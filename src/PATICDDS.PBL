.******************************************************************************
.
.         PATICDDS.PBL
.         ------------
.         This include displays all Disease Code entries
.
.     Modifications: 15/03/94  Ian Rutt 
.                    Adapted from PATWRDDS
.         V6.03.00  26/09/1996  Greg Horvat      Holy Spirit Mods
.                   Ported from release 5.04
.
.------------------------------------------------------------------------------
.         Display Heading, and then loop over entries
.------------------------------------------------------------------------------
.
PATICDDS  DISPLAY   *P1:3,*EF,*P20:4,*V2LON,*ULON,"Disease Codes "
          MOVE      FIVE,CVERT
          MOVE      ONE,CCOL
.
          UNPACK    DPCODE,KEY1,KEY8
          PACK      DPCODE,KEY8,SP10
          PACK      KEY9,DPCODE,SP9
          CALL      RDSICD1
ICDD1000  CALL      RDKICD1
          BRANCH    OVRCD,ICDD5000
.
          MATCH     SP9,DPCODE                * Still only letter desc's
          GOTO      ICDD5000 IF EQUAL         * No - exit
.
          MOVE      DDESC,KEY70
          DISPLAY   *PCCOL:CVERT,*V2LON,DPCODE,SP1,*HOFF,KEY70
.
          ADD       ONE,CVERT
          COMPARE   TWENTY4,CVERT
          GOTO      ICDD1000 IF LESS
.
          MOVE      FIVE,CVERT
.....          ADD       "40",CCOL
.....          COMPARE   "70",CCOL
.....          GOTO      ICDD1000 IF LESS
.....          GOTO      ICDD1000
.
.         Check for new standards question, or old question
.
          BRANCH    CNEWDS,ICDD2000
.
          KEYIN     *P1:24,*EL," (",*V2LON,"E",*HOFF,")xit, (":
                    *V2LON,"F",*HOFF,")irst Screen, (":
                    *V2LON,"N",*HOFF,")ext Screen : ",*V2LON,ANS;
.
          REP       UPPLOW,ANS 
          CMATCH    ANSE,ANS
          GOTO      ICDD6000 IF EQUAL
          CMATCH    ANSF,ANS
          GOTO      PATICDDS IF EQUAL
.
          GOTO      ICDD4000
.
.         Use the new standards question
.
ICDD2000  KEYIN     *P1:24,*EL," (",*V2LON,"C",*HOFF,")ontinue, (":
                    *V2LON,"F",*HOFF,")irst Screen, (":
                    *V2LON,"N",*HOFF,")ext Screen : ",*V2LON,ANS;
.
          REP       UPPLOW,ANS
          CMATCH    ANSC,ANS
          GOTO      ICDD6000 IF EQUAL
          CMATCH    ANSF,ANS
          GOTO      PATICDDS IF EQUAL
.
ICDD4000  MOVE      FIVE,CVERT
          MOVE      ONE,CCOL
          DISPLAY   *P1:5,*EF
          GOTO      ICDD1000
.
.         End of codes
.
ICDD5000  BRANCH    CNEWDS,ICDD6000
          DISPLAY   *P1:24,*EL;
          CALL      HITENTER
.
ICDD6000  MOVE      ZERO,OVRCD
          RETURN
