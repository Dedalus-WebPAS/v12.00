.******************************************************************************
.* System         : ALL                     Release 5.01                      *
.*                                                                            *
.* Include Name   : CLPATMAS.PBL                                              *
.*                                                                            *
.* Function       : Clear the patient master file variables - PATMAS & PATMSX *
.*                                                                            *
.* MODS:                                                                      *
.*       V12.00.01 14/05/2025  J.Tan          TSK 0955096                     *
.*                 Added alpanumeric visit number generation                  *
.*       V10.10.01 28/03/2017 Ebon Clements    TSK 0833052                    *
.*                 Added PTMXESPF                                             *
.*       V10.08.01 05/06/2016 Steve Armstrong  TSK 0279181                    *
.*                 Added PTMAUUID, PTMAUTIM & PTMXUUID                        *
.*       V10.02.01 16/06/2011 Ebon Clements  CAR 239530                       *
.*                 Added PTMADCUD, PTMADCUT and PTMADCUU                      *
.*       V10.01.01 16/11/2010  Jill Parkinson CAR 233088                      *
.*                 Added clearing of PTMASPAR,PTMASPA2,PTMADCDT               *
.*       V9.04.01  26/10/2005  Jill Habasque CAR 62834                        *
.*                 Added clearing of PTMXDEAF                                 *
.*       V9.03.01  24/06/2003  Tonii  CAR 39849                               *
.*                 Added clearing of PTMXCTIM - Date/Time changed             *
.*                                   PTMXSLAC - SLA code                      *
.*                                   PTMXFILN - Filing required               *
.*                                   PTMXSPAR - spare                         *
.******************************************************************************
.*                  14/11/2001  Steve Armstrong                               *
.*                  Set PHOSP to zero instead of two                          *
.*                  19/05/2000  Tonii                                         *
.*                  Added PTMXMCCD (Medicare Code)                            *
.*                  19/01/2000  Jill Habasque    5.08                         *
.*                  Added PTMXSIN1 to PTMXSIN5                                *
.*                  07/10/1998  Glenn Berry      5.07 changes                 *
.******************************************************************************
.*                  12/01/93  DIG                                             *
.*                  Fixed so that PPORT is initialised to spaces, not zero.   *
.*                  03/11/1993    Justin Coates                               *
.*                  added clear of PTMXGPPT                                   *
.*                  01/12/1993    Ian Rutt                                    *
.*                  added clear of PTMAEMPC, PTMANOKO, PTMANOKE, PTMADCNO     * 
.*                  05/10/1995    Paul Howells   suht                         *
.*                  added clear of PTMXOSDT.                                  * 
.*                  09/02/1996    Whirlpool     srf 613991                    *
.*                  Fixed clearing of pension number                          * 
.******************************************************************************
CLPATMAS  MOVE      ZEROUR,PURNO            * UR number
          MOVE      SP2,PPORT               * Port Currently Updating U/R
          UNPACK    SP20,PCHGDTE,PTITL      * date of last change yymmdd/title
          MOVE      ZERO,PHOSP              * Hospital Last 12 Months
          MOVE      ZERO,PLDAYS             * No Days Last in Hospital
          MOVE      ZERO,PBDEBT             * Bad Debtor Indicator 0-No 1-Yes
          MOVE      SP20,PSNAME             * Patients Surname
          MOVE      SP70,PTMASNAM           * Patients Surname
          MOVE      SP30,PGNAME             * Patients given name
          MOVE      SP20,PPSNAME            * Patients Previous Surname
          PACK      PADD1,SP30,SP30         * address 1
          PACK      PADD2,SP30,SP30         * address 2
          PACK      PSUBRB,SP30,SP30        * address 3
          PACK      PADD4,SP30,SP30         * address 4
          MOVE      SP20,PPOST              * post code
          MOVE      SP20,PTELEP             * Telephone Private
          MOVE      SP20,PTELEB             * Telephone Business
          UNPACK    SP20,PSEX,PMSTAT,PBDATE * Sex, marital stat, DOB
          MOVE      ZERO,PSAGE              * Age
          UNPACK    SP10,PCONT,PREG,PTYPE   * Country of Birth, religon, p type
          UNPACK    SP30,POCCUP,PLDDATE     * Occupation, last disch. date
          UNPACK    SP30,PMEDI              * Medicare Number, Pension number
          MOVE      SP30,PPENNO             * other pension number field
          UNPACK    SP20,PPNDTE,PREPAT      * Pension No Expiry Date, repat num
          MOVE      TWO,PSMOK               * Patient Smoker
          MOVE      ZERO,PSTAT              * Patient Status
          MOVE      SP20,PMICRO             * Microfilm Address
          MOVE      ZERO,PCEASE             * Deceased indicator
          MOVE      ZERO,PCASE              * Case Notes Indicator
          MOVE      ZERO,PAUTOPY            * Autopsy Indicator
          UNPACK    SP10,PHIGH1,PHIGH2,PHIGH3  * Highlight Codes
          MOVE      SP30,PLOCDOC            * Local Doctor
          UNPACK    SP70,PFUNDH,PFNDTB,PFNDMM     * Health Fund/Table/Number
          MOVE      SP10,PFNDTB
          UNPACK    SP20,PUSR1,PUSR2,PUSR3,PUSR4,PUSR5,PUSR6 * UD fields
          MOVE      ZERO,PUYN1              * User Defined Y/N Field 1
          MOVE      ZERO,PUYN2              * User Defined Y/N Field 2
          MOVE      ZERO,PUYN3              * User Defined Y/N Field 3
          MOVE      ZERO,PYRRES             * Number of Years Resident
          MOVE      SP20,PNKNAME            * Next of Kin Name
          PACK      PNKADD1,SP30,SP30       * NOK 1 Address Line 1
          PACK      PNKADD2,SP30,SP30       * NOK 1 Address Line 2
          PACK      PNKSUBR,SP30,SP30       * NOK 1 Suburb
          PACK      PNKADD4,SP30,SP30       * NOK 1 Address Line 4
          MOVE      SP30,PNKPOST            * NOK 1 Postcode
          MOVE      SP20,PNKTELP            * NOK 1 Private Telephone
          UNPACK    SP30,PNKTELB,PNKRELP    * NOK 1 Business Telephone, r'ship
          MOVE      ZEROVISN,PLSTINP        * Last Inpatient  Visit Number
          MOVE      ZEROVISN,PLSTOUT        * Last Outpatient Visit Number
          MOVE      ZERO,PNXRAY             * Number of Previous X-Rays
          UNPACK    SP30,PFNDYY,PFNDCG,PDECDTE,PDIET,PINITHOS
          MOVE      SP20,PHCNOTES           * case notes indicators
          MOVE      SP10,PHKADUNI           * hong kong unique address id
          UNPACK    SP20,PTMAEMPC,PTMANOKO
          UNPACK    SP20,PTMANOKE,PTMADCNO
          UNPACK    SP2,PTMAUKDB,PTMAUKDD   * unknown dates flags
          PACK      PTMADCDT,SP70
          UNPACK    SP70,PTMAHCP1,PTMAHCL1,PTMAHCG1
          UNPACK    SP70,PTMAHCP2,PTMAHCL2,PTMAHCG2
          UNPACK    SP70,PTMAHCP3,PTMAHCL3,PTMAHCG3
          UNPACK    SP70,PTMAHCP4,PTMAHCL4,PTMAHCG4
          UNPACK    SP70,PTMAHCP5,PTMAHCL5,PTMAHCG5
          PACK      PTMASPAR,SP70
          MOVE      SP70,PTMADCUD
          MOVE      SP70,PTMADCUT
          MOVE      SP70,PTMADCUU
          MOVE      SP10,PTMAUUID
          MOVE      SP8,PTMAUTIM
          PACK      PTMASPA2,SP70,SP70
.
. extension file
.
          MOVE      SP8,PTMXRDAT            * Registration Date
          MOVE      SP30,PTMXMEAL           * Special Meal Requirements
          MOVE      SP4,PTMXLGA             * LGA Code
          MOVE      SP3,PTMXLS              * Current Legal status (Cat LS)
          MOVE      SP8,PTMXLSDT            * Date of legal status (ccyymmdd)
          MOVE      SP1,PTMXFHMD            * Familial history of mental disord.
          MOVE      SP3,PTMXMHU1            * M.H. User defined field 1
          MOVE      SP3,PTMXMHU2            * M.H. User defined field 2
          MOVE      SP3,PTMXMHU3            * M.H. User defined field 3
          MOVE      SP20,PTMXECNM           * Emergency contact name
          PACK      PTMXECA1,SP30,SP5       * Emergency contact address line 1
          PACK      PTMXECA2,SP30,SP5       * Emergency contact address line 2
          PACK      PTMXECA3,SP30,SP5       * Emergency contact address line 3
          PACK      PTMXECA4,SP30,SP5       * Emergency contact address line 4
          MOVE      SP20,PTMXECPC           * Emergency contact postcode
.         MOVE      SP20,PTMXECS1           * Spare var. for postcode expansion
          MOVE      SP20,PTMXECPP           * Emergency contact private phone
          MOVE      SP20,PTMXECBP           * Emergency contact business phone
          MOVE      SP20,PTMXECRE           * Emergency contact relationship
          MOVE      SP20,PTMXNRNM           * Nearest relative name
          PACK      PTMXNRA1,SP30,SP5       * Nearest relative address line 1
          PACK      PTMXNRA2,SP30,SP5       * Nearest relative address line 2
          PACK      PTMXNRA3,SP30,SP5       * Nearest relative address line 3
          PACK      PTMXNRA4,SP30,SP5       * Nearest relative address line 4
          MOVE      SP8,PTMXNRPC            * Nearest relative postcode
.         MOVE      SP4,PTMXNRS1            * Spare var. for postcode expansion
          MOVE      SP20,PTMXNRPP           * Nearest relative private phone
          MOVE      SP20,PTMXNRBP           * Nearest relative business phone
          MOVE      SP10,PTMXNRRE           * Nearest relative relationship
          MOVE      SP8,PTMX3BEX            * certificate expiry date
          MOVE      SP20,PTMXCARD           * Card number (NZ billing)
          MOVE      SP8,PTMXCEXP            * Card expiry date (NZ billing)
          MOVE      SP3,PTMXCXMP            * Card exemption type (Cat XM)
          MOVE      SP20,PTMXFMLY           * Family id
          MOVE      SP20,PTMXCHNM           * Chinese Name
.         MOVE      SP3,PTMXFIL1            * Filler Number 1
          MOVE      SP3,PTMXDOFR            * District of Residence
          MOVE      SP10,PTMXREGP           * Registered GP
          UNPACK    SP10,PTMXGPPC,PTMXGPPT  * GP Practice code/count
          MOVE      SP20,PTMXSPID           * Supplementary ID
          MOVE      SP10,PTMXOSDT           * date arrived from overseas
          MOVE      SP4,PTMXOPER            * operator
          MOVE      SP1,PTMXUKDO            * unknown date arrived flag 
          MOVE      SP20,PTMXCELL           * Cell Phone
          PACK      PTMXADD1,SP20,SP20      * Postal Address 1
          PACK      PTMXADD2,SP20,SP20      * Postal Address 2
          PACK      PTMXADD3,SP20,SP20      * Postal Address 3
          PACK      PTMXADD4,SP20,SP20      * Postal Address 4
          MOVE      SP20,PTMXPOST           * Postal Address Post Code
          MOVE      SP2,PTMXMCCD            * Medicare Code
          UNPACK    SP20,PTMXSIN1,PTMXSIN2  * Status Indicators
          UNPACK    SP20,PTMXSIN3,PTMXSIN4,PTMXSIN5
          MOVE      SP30,PTMXCTIM           * Time/Date changed
          MOVE      SP10,PTMXSLAC           * SLA Code
          MOVE      SP10,PTMXFILN           * Filing Required
          MOVE      SP10,PTMXDEAF           * Deaf
          MOVE      SP1,PTMXOSMS
          MOVE      SP10,PTMXUUID
          MOVE      SP70,PTMXESPF
          MOVE      SP70,PTMXSPAR           * Spare variable
          RETURN
...............................................................................
