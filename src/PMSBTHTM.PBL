. *----------------------------------------------------------------------
. * Include Name  :   PMSBTHTM.PBL
. *
. * Function      :   CGI variables for PMSBTHFD - pmsbthaf.dat
. *
. * Includes Needed :
. *
. *----------------------------------------------------------------------
.  Modifications Done :
.
.  V10.03.01  21/02/2012  Jill Parkinson CAR 260559
.             Fixed BDETL000 loop
.  V10.00.00  23/07/2010  Jill Parkinson CAR 222551
.             Created include
.------------------------------------------------------------------------
.   Clear Parameters for labour details table
.------------------------------------------------------------------------
.         
CPPMBT00  MOVE      Z70,PMBTH001
          MOVE      Z70,PMBTH002
          MOVE      Z70,PMBTH003
          MOVE      Z70,PMBTH004
          MOVE      Z70,PMBTH005
          MOVE      Z70,PMBTH006
          MOVE      Z70,PMBTH007
          MOVE      Z70,PMBTH008
          MOVE      Z70,PMBTH009
          MOVE      Z70,PMBTH010
          MOVE      Z70,PMBTH011
          MOVE      Z70,PMBTH012
          MOVE      Z70,PMBTH013
          MOVE      Z70,PMBTH014
          MOVE      Z70,PMBTH015
          MOVE      Z70,PMBTH016
          MOVE      Z70,PMBTH017
          MOVE      Z70,PMBTH018
          MOVE      Z70,PMBTH019
          MOVE      Z70,PMBTH020
          MOVE      Z70,PMBTH021
          MOVE      Z70,PMBTH022
          MOVE      Z70,PMBTH023
          MOVE      Z70,PMBTH024
          MOVE      Z70,PMBTH025
          MOVE      Z70,PMBTH026
          MOVE      Z70,PMBTH027
          MOVE      Z70,PMBTH028
          MOVE      Z70,PMBTH029
          MOVE      Z70,PMBTH030
          MOVE      Z70,PMBTH031
          MOVE      Z70,PMBTH032
          MOVE      Z70,PMBTH033
          MOVE      Z70,PMBTH034
          MOVE      Z70,PMBTH035
          MOVE      Z70,PMBTH036
          MOVE      Z70,PMBTH037
          MOVE      Z70,PMBTH038
          MOVE      Z70,PMBTH039
          MOVE      Z70,PMBTH040
          MOVE      Z70,PMBTH041
          MOVE      Z70,PMBTH042
          MOVE      Z70,PMBTH043
          MOVE      Z70,PMBTH044
          MOVE      Z70,PMBTH045
.
CPPMBT99  RETURN
+
.------------------------------------------------------------------------
.   Clear file variables for birth details table
.------------------------------------------------------------------------
CLPMBT00  MOVE      SP70,PMBTUNIQ  *   Pregnancy Unique Id
          MOVE      SP70,PMBTBUNQ  *   Birth Unique Id
          MOVE      SP70,PMBTADMN  *   Admission Number
          MOVE      SP70,PMBTADMM  *   Admission Number (Mother)
          MOVE      SP70,PMBTLURN  *   Linked UR (if baby registered)
          MOVE      SP70,PMBTNBFR  *   No. of Birth Form
          MOVE      SP70,PMBTPLUR  *   Plurality
          MOVE      SP70,PMBTADOP  *   Adoption (Cat mk)
          MOVE      SP70,PMBTBBAR  *   Born Before Arrival (Cat ml)
          MOVE      SP70,PMBTBDAT  *   Birth Date (CCYYMMDD)
          MOVE      SP70,PMBTBTIM  *   Birth Time (hh:mm:ss)
          MOVE      SP70,PMBTESTG  *   Estimated Gestation at Birth
          MOVE      SP70,PMBTGEND  *   Gender
          MOVE      SP70,PMBTBSTA  *   Birth Status/Condition (Cat mp)
          MOVE      SP70,PMBTMDEL  *   Method of Delivery (Cat mn)
          MOVE      SP70,PMBTAPG1  *   Apgar score at 1 minute
          MOVE      SP70,PMBTAPG2  *   Apgar Score at 5 minutes
          MOVE      SP70,PMBTTRES  *   Time to Establish Respiration
          MOVE      SP70,PMBTDRUG  *   Resuscitation Drugs (Free Format)
          MOVE      SP70,PMBTBWGH  *   Birth Weight (grams)
          MOVE      SP70,PMBTLNGT  *   Length (cms)
          MOVE      SP70,PMBTHEAD  *   Head Circumference (cms)
          MOVE      SP70,PMBTMOUL  *   Moulding (Cat ms)
          MOVE      SP70,PMBTCAPU  *   Caput (Cat mt)
          MOVE      SP70,PMBTCORB  *   Cord Blood Taken (Cat mv)
          MOVE      SP70,PMBTMECO  *   Meconium (Cat mw)
          MOVE      SP70,PMBTURIN  *   Urine (Cat mx)
          MOVE      SP70,PMBTPAED  *   Paediatrician (pmshcpaf)
          MOVE      SP70,PMBTNICU  *   NICU Admission Indicator (Cat my)
          MOVE      SP70,PMBTVITK  *   Vitamin K 1=yes
          MOVE      SP70,PMBTHBDT  *   Hep B Received Date (CCYYMMDD)
          MOVE      SP70,PMBTHBTM  *   Hep B Received Time (hh:mm:ss)
          MOVE      SP70,PMBTBFAT  *   Breastfeeding Attempted (Cat mz)
          MOVE      SP70,PMBTIFDD  *   Infant Feeding on Discharge (CatNB)
          MOVE      SP70,PMBTBEBY  *   Baby Examined By (pmshcpaf)
          MOVE      SP70,PMBTLBAT  *   Label Attached By (pmshcpaf)
          MOVE      SP70,PMBTLBCH  *   Label Checked By (pmshcpaf)
          MOVE      SP70,PMBTGDAT  *   Guthrie Hypothyroidism Test Date
          MOVE      SP70,PMBTGTIM  *   Guthrie Hypothyroidisn Test Time
          MOVE      SP70,PMBTDWGH  *   Discharge Weight (grams)
          MOVE      SP70,PMBTBPRE  *   Birth Presentation
          MOVE      SP70,PMBTCANE  *   Cord Around neck
          MOVE      SP70,PMBTCABO  *   Cord Around Body
          MOVE      SP70,PMBTWEBC  *   Web User Id Created (websecaf)
          MOVE      SP70,PMBTDATC  *   Date Created (CCYYMMDD)
          MOVE      SP70,PMBTTIMC  *   Time Created (hh:mm:ss)
          MOVE      SP70,PMBTWEBU  *   Web User Updated (websecaf)
          MOVE      SP70,PMBTDATU  *   Date Update (CCYYMMDD)
          MOVE      SP70,PMBTTIMU  *   Time Updated (hh:mm:ss)
          MOVE      SP70,PMBTRECS  *   Record Status 1=Deleted
          MOVE      SP70,PMBTWEBD  *   Web User Deleted (websecaf)
          MOVE      SP70,PMBTDATD  *   Date Deleted (CCYYMMDD)
          MOVE      SP70,PMBTTIMD  *   Time Deleted (hh:mm:ss)
          MOVE      SP70,PMBTAUDC  *   Audit Counter
          MOVE      SP70,PMBTREAS  *   Reason for Change

CLPMBT99  RETURN
+
.------------------------------------------------------------
. Output Birth details
.------------------------------------------------------------
PMBT0000  BRANCH    FLDITMNO,PMBT0010,PMBT0020,PMBT0030,PMBT0040,PMBT0050:
                             PMBT0060,PMBT0070,PMBT0080,PMBT0090,PMBT0100:
                             PMBT0110,PMBT0120,PMBT0130,PMBT0140,PMBT0150:
                             PMBT0160,PMBT0170,PMBT0180,PMBT0190,PMBT0200:
                             PMBT0210,PMBT0220,PMBT0230,PMBT0240,PMBT0250:
                             PMBT0260,PMBT0270,PMBT0280,PMBT0290,PMBT0300:
                             PMBT0310,PMBT0320,PMBT0330,PMBT0340,PMBT0350:
                             PMBT0360,PMBT0370,PMBT0380,PMBT0390,PMBT0400:
                             PMBT0410,PMBT0420,PMBT0430,PMBT0440,PMBT0450:
                             PMBT0460,PMBT0470,PMBT0480,PMBT0490,PMBT0500:
                             PMBT0510,PMBT0520,PMBT0530,PMBT0540,PMBT0550:
                             PMBT0560,PMBT0570,PMBT0580
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMBT9999
.
PMBT0010  WRITE     HTMLFILE;PMBTUNIQ;      * Pregnancy Unique Id
          GOTO      PMBT9999
.
PMBT0020  WRITE     HTMLFILE;PMBTBUNQ;      * Birth Unique Number
          GOTO      PMBT9999
.
PMBT0030  WRITE     HTMLFILE;PMBTADMN;      * Admission Number
          GOTO      PMBT9999
.
PMBT0040  WRITE     HTMLFILE;PMBTADMM;      * Mother Admission Number
          GOTO      PMBT9999
.
PMBT0050  WRITE     HTMLFILE;PMBTLURN;      * Linked UR
          GOTO      PMBT9999
.
PMBT0060  WRITE     HTMLFILE;PMBTNBFR;      * Number of Birth Form
          GOTO      PMBT9999
.
PMBT0070  WRITE     HTMLFILE;PMBTPLUR;      * Plurality
          GOTO      PMBT9999
.
PMBT0080  MOVE      "mk",CATEGORY           * Adoption (cat mk)
          MOVE      PMBTADOP,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0090  MOVE      "ml",CATEGORY           * Born before arrival (cat ml)
          MOVE      PMBTBBAR,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0100  MATCH     PMBTBDAT,SP70           * Birth Date
          GOTO      PMBT9999 IF EQUAL
          UNPACK    PMBTBDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMBT9999
.
PMBT0110  WRITE     HTMLFILE;PMBTBTIM;      * Birth Time 
          GOTO      PMBT9999
.
PMBT0120  WRITE     HTMLFILE;PMBTESTG;      * Estimated gestation
          GOTO      PMBT9999
.
PMBT0130  WRITE     HTMLFILE;PMBTGEND;      * Gender
          GOTO      PMBT9999
.
PMBT0140  MOVE      "mp",CATEGORY           * Birth Status (cat mp)
          MOVE      PMBTBSTA,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0150  MOVE      "mn",CATEGORY           * Method of Delivery (cat mn)
          MOVE      PMBTMDEL,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0160  WRITE     HTMLFILE;PMBTAPG1;      * Apgar score at 1 minute
          GOTO      PMBT9999
.
PMBT0170  WRITE     HTMLFILE;PMBTAPG2;      * Apgar score at 5 minutes
          GOTO      PMBT9999
.
PMBT0180  WRITE     HTMLFILE;PMBTTRES;      * Time to establish respiration
          GOTO      PMBT9999
.
PMBT0190  WRITE     HTMLFILE;PMBTDRUG;      * Resuscitation Drugs
          GOTO      PMBT9999
.
PMBT0200  WRITE     HTMLFILE;PMBTBWGH;      * Birth Weight(grams)
          GOTO      PMBT9999
.
PMBT0210  WRITE     HTMLFILE;PMBTLNGT;      * Length(cms)
          GOTO      PMBT9999
.
PMBT0220  WRITE     HTMLFILE;PMBTHEAD;      * Head Circumference (cms)
          GOTO      PMBT9999
.
PMBT0230  MOVE      "ms",CATEGORY           * Moulding (cat ms)
          MOVE      PMBTMOUL,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0240  MOVE      "mt",CATEGORY           * Caput (cat mt)
          MOVE      PMBTCAPU,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0250  MOVE      "mv",CATEGORY           * Cord Blood Taken (cat mv)
          MOVE      PMBTCAPU,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0260  MOVE      "mw",CATEGORY           * Meconium (cat mw)
          MOVE      PMBTMECO,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0270  MOVE      "mx",CATEGORY           * Urine (cat mx)
          MOVE      PMBTURIN,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0280  MOVE      PMBTPAED,GENPCODE;      * Paediatrician (pmshcpaf)
          CALL      HCPDET00
          GOTO      PMBT9999
.
PMBT0290  MOVE      "my",CATEGORY           * NICU Adm Indicator (cat my)
          MOVE      PMBTNICU,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0300  WRITE     HTMLFILE;PMBTVITK;      * Vitamin K
          GOTO      PMBT9999
.
PMBT0310  MATCH     PMBTHBDT,SP70           * Hep B Date
          GOTO      PMBT9999 IF EQUAL
          UNPACK    PMBTHBDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMBT9999
.
PMBT0320  WRITE     HTMLFILE;PMBTHBTM;      * Hep B Time 
          GOTO      PMBT9999
.
PMBT0330  MOVE      "mz",CATEGORY           * Breastfeeding Attempted (cat mz)
          MOVE      PMBTBFAT,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0340  MOVE      "NB",CATEGORY           * Infant feeding on Disch (cat NB)
          MOVE      PMBTIFDD,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0350  MOVE      PMBTBEBY,GENPCODE       * Baby Examined by (pmshcpaf)
          CALL      HCPDET00
          GOTO      PMBT9999
.
PMBT0360  MOVE      PMBTLBAT,GENPCODE       * Label Attached by(pmshcpaf)
          CALL      HCPDET00
          GOTO      PMBT9999
.
PMBT0370  MOVE      PMBTLBCH,GENPCODE       * Label Checked by (pmshcpaf)
          CALL      HCPDET00
          GOTO      PMBT9999
.
PMBT0380  MATCH     PMBTGDAT,SP70           * Guthrie Hypothyroidism Date
          GOTO      PMBT9999 IF EQUAL
          UNPACK    PMBTGDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMBT9999
.
PMBT0390  WRITE     HTMLFILE;PMBTGTIM;      * Guthrie Hypothyroidism Time
          GOTO      PMBT9999
.
PMBT0400  WRITE     HTMLFILE;PMBTDWGH;      * Discharge Weight (grams)
          GOTO      PMBT9999
.
PMBT0410  PACK      KEY10,PMBTWEBC,SP70
          CALL      RDWBSE1
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMBT9999
.
PMBT0420  MATCH     PMBTDATC,SP70
          GOTO      PMBT9999 IF EQUAL
          UNPACK    PMBTDATC,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMBT9999
.
PMBT0430  WRITE     HTMLFILE;PMBTTIMC;
          GOTO      PMBT9999
.
PMBT0440  PACK      KEY10,PMBTWEBU,SP70
          CALL      RDWBSE1
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMBT9999
.
PMBT0450  MATCH     PMBTDATU,SP70
          GOTO      PMBT9999 IF EQUAL
          UNPACK    PMBTDATU,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMBT9999
.
PMBT0460  WRITE     HTMLFILE;PMBTTIMU;
          GOTO      PMBT9999
.
PMBT0470  WRITE     HTMLFILE;PMBTRECS;
          GOTO      PMBT9999
.
PMBT0480  PACK      KEY10,PMBTWEBD,SP70
          CALL      RDWBSE1
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMBT9999
.
PMBT0490  MATCH     PMBTDATD,SP70
          GOTO      PMBT9999 IF EQUAL
          UNPACK    PMBTDATD,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMBT9999
.
PMBT0500  WRITE     HTMLFILE;PMBTTIMD;
          GOTO      PMBT9999
.
PMBT0510  CALL      BTHLS000
          GOTO      PMBT9999
.
PMBT0520  MOVE      "NL",CATEGORY           * Birth Presentation (cat NL)
          MOVE      PMBTBPRE,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0530  MOVE      "NQ",CATEGORY           * Cord around neck   (cat NQ)
          MOVE      PMBTCANE,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0540  MOVE      "NR",CATEGORY           * Cord around body   (cat NR)
          MOVE      PMBTCABO,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0550  WRITE     HTMLFILE;PMBTAUDC       * Audit Counter
          GOTO      PMBT9999
.
PMBT0560  MOVE      "FY",CATEGORY           * Reason for Change  (cat FY)
          MOVE      PMBTREAS,CODE
          CALL      CODITM00
          GOTO      PMBT9999
.
PMBT0570  CALL      BTHA0000
          GOTO      PMBT9999
.
PMBT0580  CALL      BDETL000                * Birth detail list (linked UR)
          GOTO      PMBT9999
.
PMBT9999  RETURN
+
.------------------------------------------------------------
.   Set Parameters for Birth Details table
.------------------------------------------------------------
SPMBT000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPMBT001,SPMBT002,SPMBT003,SPMBT004,SPMBT005:
                       SPMBT006,SPMBT007,SPMBT008,SPMBT009,SPMBT010:
                       SPMBT011,SPMBT012,SPMBT013,SPMBT014,SPMBT015:
                       SPMBT016,SPMBT017,SPMBT018,SPMBT019,SPMBT020:
                       SPMBT021,SPMRG022,SPMBT023,SPMBT024,SPMBT025:
                       SPMBT026,SPMBT027,SPMBT028,SPMBT029,SPMBT030:
                       SPMBT031,SPMBT032,SPMBT033,SPMBT034,SPMBT035:
                       SPMBT036,SPMBT037,SPMBT038,SPMBT039,SPMBT040:
                       SPMBT041,SPMBT042,SPMBT043,SPMBT044,SPMBT045
.
          MOVE      ONE,EXIT
          GOTO      SPMBT999
. 
SPMBT001  PACK      PMBTH001,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT002  PACK      PMBTH002,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT003  PACK      PMBTH003,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT004  PACK      PMBTH004,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT005  PACK      PMBTH005,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT006  PACK      PMBTH006,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT007  PACK      PMBTH007,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT008  PACK      PMBTH008,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT009  PACK      PMBTH009,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT010  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMBTH010,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMBT999
.
SPMBT011  PACK      PMBTH011,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT012  PACK      PMBTH012,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT013  PACK      PMBTH013,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT014  PACK      PMBTH014,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT015  PACK      PMBTH015,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT016  PACK      PMBTH016,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT017  PACK      PMBTH017,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT018  PACK      PMBTH018,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT019  PACK      PMBTH019,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT020  PACK      PMBTH020,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT021  PACK      PMBTH021,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT022  PACK      PMBTH022,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT023  PACK      PMBTH023,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT024  PACK      PMBTH024,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT025  PACK      PMBTH025,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT026  PACK      PMBTH026,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT027  PACK      PMBTH027,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT028  PACK      PMBTH028,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT029  PACK      PMBTH029,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT030  PACK      PMBTH030,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT031  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMBTH031,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMBT999
.
SPMBT032  PACK      PMBTH032,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT033  PACK      PMBTH033,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT034  PACK      PMBTH034,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT035  PACK      PMBTH035,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT036  PACK      PMBTH036,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT037  PACK      PMBTH037,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT038  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMBTH031,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMBT999
.
SPMBT039  PACK      PMBTH039,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT040  PACK      PMBTH040,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT041  PACK      PMBTH041,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT042  PACK      PMBTH042,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT043  PACK      PMBTH043,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT044  PACK      PMBTH044,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT045  PACK      PMBTH045,QRYDATA,SP70
          GOTO      SPMBT999
.
SPMBT999  RETURN
+
.------------------------------------------------------------
.  Update labour details file
.------------------------------------------------------------
MVPMBT00  MATCH     PMBTH001,Z70
          IF        !@EQUAL
            MOVE      PMBTH001,PMBTUNIQ
          ENDIF
.
          MATCH     PMBTH002,Z70
          IF        !@EQUAL
            MOVE      PMBTH002,PMBTBUNQ
          ENDIF
.
          MATCH     PMBTH003,Z70
          IF        !@EQUAL
            MOVE      PMBTH003,PMBTADMN
          ENDIF
.
          MATCH     PMBTH004,Z70
          IF        !@EQUAL
            MOVE      PMBTH004,PMBTADMM
          ENDIF
.
          MATCH     PMBTH005,Z70
          IF        !@EQUAL
            MOVE      PMBTH005,PMBTLURN
          ENDIF
.
          MATCH     PMBTH006,Z70
          IF        !@EQUAL
            MOVE      PMBTH006,PMBTNBFR
          ENDIF
.
          MATCH     PMBTH007,Z70
          IF        !@EQUAL
            MOVE      PMBTH007,PMBTPLUR
          ENDIF
.
          MATCH     PMBTH008,Z70
          IF        !@EQUAL
            MOVE      PMBTH008,PMBTADOP
          ENDIF
.
          MATCH     PMBTH009,Z70
          IF        !@EQUAL
            MOVE      PMBTH009,PMBTBBAR
          ENDIF
.
          MATCH     PMBTH010,Z70
          IF        !@EQUAL
            MOVE      PMBTH010,PMBTBDAT
          ENDIF
.
          MATCH     PMBTH011,Z70
          IF        !@EQUAL
            MOVE      PMBTH011,PMBTBTIM
          ENDIF
.
          MATCH     PMBTH012,Z70
          IF        !@EQUAL
            MOVE      PMBTH012,PMBTESTG
          ENDIF
.
          MATCH     PMBTH013,Z70
          IF        !@EQUAL
            MOVE      PMBTH013,PMBTGEND
          ENDIF
.
          MATCH     PMBTH014,Z70
          IF        !@EQUAL
            MOVE      PMBTH014,PMBTBSTA
          ENDIF
.
          MATCH     PMBTH015,Z70
          IF        !@EQUAL
            MOVE      PMBTH015,PMBTMDEL
          ENDIF
.
          MATCH     PMBTH016,Z70
          IF        !@EQUAL
            MOVE      PMBTH016,PMBTAPG1
          ENDIF
.
          MATCH     PMBTH017,Z70
          IF        !@EQUAL
            MOVE      PMBTH017,PMBTAPG2
          ENDIF
.
          MATCH     PMBTH018,Z70
          IF        !@EQUAL
            MOVE      PMBTH018,PMBTTRES
          ENDIF
.
          MATCH     PMBTH019,Z70
          IF        !@EQUAL
            MOVE      PMBTH019,PMBTDRUG
          ENDIF
.
          MATCH     PMBTH020,Z70
          IF        !@EQUAL
            MOVE      PMBTH020,PMBTBWGH
          ENDIF
.
          MATCH     PMBTH021,Z70
          IF        !@EQUAL
            MOVE      PMBTH021,PMBTLNGT
          ENDIF
.
          MATCH     PMBTH022,Z70
          IF        !@EQUAL
            MOVE      PMBTH022,PMBTHEAD
          ENDIF
.
          MATCH     PMBTH023,Z70
          IF        !@EQUAL
            MOVE      PMBTH023,PMBTMOUL
          ENDIF
.
          MATCH     PMBTH024,Z70
          IF        !@EQUAL
            MOVE      PMBTH024,PMBTCAPU
          ENDIF
.
          MATCH     PMBTH025,Z70
          IF        !@EQUAL
            MOVE      PMBTH025,PMBTCORB
          ENDIF
.
          MATCH     PMBTH026,Z70
          IF        !@EQUAL
            MOVE      PMBTH026,PMBTMECO
          ENDIF
.
          MATCH     PMBTH027,Z70
          IF        !@EQUAL
            MOVE      PMBTH027,PMBTURIN
          ENDIF
.
          MATCH     PMBTH028,Z70
          IF        !@EQUAL
            MOVE      PMBTH028,PMBTPAED
          ENDIF
.
          MATCH     PMBTH029,Z70
          IF        !@EQUAL
            MOVE      PMBTH029,PMBTNICU
          ENDIF
.
          MATCH     PMBTH030,Z70
          IF        !@EQUAL
            MOVE      PMBTH030,PMBTVITK
          ENDIF
.
          MATCH     PMBTH031,Z70
          IF        !@EQUAL
            MOVE      PMBTH031,PMBTHBDT
          ENDIF
.
          MATCH     PMBTH032,Z70
          IF        !@EQUAL
            MOVE      PMBTH032,PMBTHBTM
          ENDIF
.
          MATCH     PMBTH033,Z70
          IF        !@EQUAL
            MOVE      PMBTH033,PMBTBFAT
          ENDIF
.
          MATCH     PMBTH034,Z70
          IF        !@EQUAL
            MOVE      PMBTH034,PMBTIFDD
          ENDIF
.
          MATCH     PMBTH035,Z70
          IF        !@EQUAL
            MOVE      PMBTH035,PMBTBEBY
          ENDIF
.
          MATCH     PMBTH036,Z70
          IF        !@EQUAL
            MOVE      PMBTH036,PMBTLBAT
          ENDIF
.
          MATCH     PMBTH037,Z70
          IF        !@EQUAL
            MOVE      PMBTH037,PMBTLBCH
          ENDIF
.
          MATCH     PMBTH038,Z70
          IF        !@EQUAL
            MOVE      PMBTH038,PMBTGDAT
          ENDIF
.
          MATCH     PMBTH039,Z70
          IF        !@EQUAL
            MOVE      PMBTH039,PMBTGTIM
          ENDIF
.
          MATCH     PMBTH040,Z70
          IF        !@EQUAL
            MOVE      PMBTH040,PMBTDWGH
          ENDIF
.
          MATCH     PMBTH041,Z70
          IF        !@EQUAL
            MOVE      PMBTH041,PMBTBPRE
          ENDIF
.
          MATCH     PMBTH042,Z70
          IF        !@EQUAL
            MOVE      PMBTH042,PMBTCANE
          ENDIF
.
          MATCH     PMBTH043,Z70
          IF        !@EQUAL
            MOVE      PMBTH043,PMBTCABO
          ENDIF
.
          MATCH     PMBTH044,Z70
          IF        !@EQUAL
            MOVE      PMBTH044,PMBTAUDC
          ENDIF
.
          MATCH     PMBTH045,Z70
          IF        !@EQUAL
            MOVE      PMBTH045,PMBTREAS
          ENDIF
.
MVPMBT99  RETURN
+
.------------------------------------------------------------
.   List of birth detail records
.------------------------------------------------------------
BTHLS000  MOVE      SP70,DIM10
          PACK      KEY23,PREGUNIQ,Z70
          CALL      RSPMBTH1
BTHLS100  CALL      RPPMBTH1
          BRANCH    OVRCD,BTHLS999
.
          MATCH     PREGUNIQ,PMBTUNIQ
          GOTO      BTHLS999 IF NOT EQUAL
.
          MATCH     DIM10,PMBTBUNQ
          GOTO      BTHLS100 IF EQUAL
.
          PACK      DIM10,PMBTBUNQ,SP70
.
BTHLS200  CLEAR     HTMLLINK
          APPEND    "javascript:ViewDetails('",HTMLLINK
          APPEND    PMBTUNIQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMBTBUNQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMBTAUDC,HTMLLINK
          APPEND    "')",HTMLLINK
          RESET     HTMLLINK
          CLEAR     HTMLLNK2
          APPEND    "javascript:AuditDetails('",HTMLLNK2
          APPEND    PMBTUNIQ,HTMLLNK2
          APPEND    "','",HTMLLNK2
          APPEND    PMBTBUNQ,HTMLLNK2
          APPEND    "','",HTMLLNK2
          APPEND    PMBTAUDC,HTMLLNK2
          APPEND    "')",HTMLLNK2
          RESET     HTMLLNK2
          WRITE     HTMLFILE;"t.addRow(#"",HTMLLINK,"#",":
                             "#"",PMBTUNIQ,"#",":
                             "#"",PMBTBUNQ,"#",":
                             "#"",PMBTADMN,"#",":
                             "#"",PMBTADMM,"#",":
                             "#"",PMBTLURN,"#",":
                             "#"",PMBTBDAT,"#",":
                             "#"",PMBTBTIM,"#",":
                             "#"",PMBTGEND,"#",":
                             "#"",PMBTBSTA,"#",":
                             "#"",HTMLLNK2,"#");"
.
          GOTO      BTHLS100
.
BTHLS999  RETURN
+
.------------------------------------------------------------
.   List of Audit records on pmsbthaf
.------------------------------------------------------------
BTHA0000  MATCH     SP70,PREGUNIQ
          GOTO      BTHA9999 IF EQUAL
.
          PACK      KEY23,PREGUNIQ,BRTHUNIQ,Z70
          CALL      RSPMBTH1
BTHA0100  CALL      RPPMBTH1
          BRANCH    OVRCD,BTHA9999
.
          MATCH     PREGUNIQ,PMBTUNIQ
          GOTO      BTHA9999 IF NOT EQUAL
.
          MATCH     BRTHUNIQ,PMBTBUNQ
          GOTO      BTHA9999 IF NOT EQUAL
.
          PACK      CURRUNIQ,PMLBUNIQ
          CLEAR     HTMLLINK
          APPEND    "javascript:ViewDetails('",HTMLLINK
          APPEND    PMBTUNIQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMBTBUNQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMBTAUDC,HTMLLINK
          APPEND    "')",HTMLLINK
          RESET     HTMLLINK
          WRITE     HTMLFILE;"t.addRow(#"",HTMLLINK,"#",":
                             "#"",PMBTUNIQ,"#",":
                             "#"",PMBTBUNQ,"#",":
                             "#"",PMBTAUDC,"#",":
                             "#"",PMBTADMN,"#",":
                             "#"",PMBTADMM,"#",":
                             "#"",PMBTLURN,"#",":
                             "#"",PMBTBDAT,"#",":
                             "#"",PMBTBTIM,"#",":
                             "#"",PMBTGEND,"#",":
                             "#"",PMBTBSTA,"#");"
.
          GOTO      BTHA0100
.
BTHA9999  RETURN
+
.------------------------------------------------------------
.   List of birth detail records  (by Linked UR)
.------------------------------------------------------------
BDETL000  MOVE      SP70,DIM10
          MATCH     SP70,URNUMBER
          GOTO      BDETL9999 IF EQUAL
.
          PACK      KEY31,URNUMBER,Z70
          CALL      RSPMBTH4
BDETL100  CALL      RPPMBTH4
          BRANCH    OVRCD,BDETL999
.
          MATCH     URNUMBER,PMBTLURN
          GOTO      BDETL999 IF NOT EQUAL
.
          MATCH     SP70,DIM10
          GOTO      BDETL150 IF EQUAL
.
          MATCH     DIM10,PMBTBUNQ
          GOTO      BDETL100 IF EQUAL
.
BDETL150  PACK      DIM10,PMBTBUNQ,SP70
.
BDETL200  CLEAR     HTMLLINK
          APPEND    "javascript:ViewDetails('",HTMLLINK
          APPEND    PMBTUNIQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMBTBUNQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMBTAUDC,HTMLLINK
          APPEND    "')",HTMLLINK
          RESET     HTMLLINK
          CLEAR     HTMLLNK2
          APPEND    "javascript:AuditDetails('",HTMLLNK2
          APPEND    PMBTUNIQ,HTMLLNK2
          APPEND    "','",HTMLLNK2
          APPEND    PMBTBUNQ,HTMLLNK2
          APPEND    "','",HTMLLNK2
          APPEND    PMBTAUDC,HTMLLNK2
          APPEND    "')",HTMLLNK2
          RESET     HTMLLNK2
          WRITE     HTMLFILE;"t.addRow(#"",HTMLLINK,"#",":
                             "#"",PMBTUNIQ,"#",":
                             "#"",PMBTBUNQ,"#",":
                             "#"",PMBTADMN,"#",":
                             "#"",PMBTADMM,"#",":
                             "#"",PMBTLURN,"#",":
                             "#"",PMBTBDAT,"#",":
                             "#"",PMBTBTIM,"#",":
                             "#"",PMBTGEND,"#",":
                             "#"",PMBTBSTA,"#",":
                             "#"",HTMLLNK2,"#");"
.
          GOTO      BDETL100
.
BDETL999  RETURN
+


