+
.******************************************************************************
.* System         : Patient Billing                                           *
.* Include Name   : PATGILOS.PBL                                              *
.* Name           : Get intended length of stay                               *
.******************************************************************************
.* Date           : 02/03/1999                                                *
.* Author         : Greg Horvat                                               *
.* Files Required : PATCODFD                                                  *
.* Parameters Req : Validate admission record                                 *
.*                  PTCNDSCI                                                  *
.* Returns        : KEY1 - Intended length of stay                            *
.* Modifications  :                                                           *
.*        V9.02.01  01/11/2001  Greg Horvat                                   *
.*                  Added xtra option to the parameter PTCNDSCI               *
.*                                                                            *
.******************************************************************************
PATGILOS
GILOS000  MOVE      "2",KEY1                * Default ILOS to 2 - overnite stay
          MATCH     ADATE,DDATE
          IF        @EQUAL
            MOVE      "1",KEY1              * Default ILOS to 1 - sameday
          ENDIF
.
          IF        PTCNDSCI=0
            MOVE      "P ",TCODE
            MOVE      ACLSS,ACODE
          ELSE
            LOAD      TCODE,PTCNDSCI,CATU1,CATU2,CATU3,CATU4,CATU5,CATVI
            LOAD      ACODE,PTCNDSCI,AUSR1,AUSR2,AUSR3,AUSR4,AUSR5,PMVXIDUS
          ENDIF
          MATCH     SP3,ACODE
          GOTO      GILOS900 IF EQUAL
.
          MOVE      SP1,TCINDC1
          PACK      KEY5,TCODE,ACODE
          CALL      RDCODE1                 * Read a codes file record
.
          MATCH     ADATE,DDATE
          IF        !@EQUAL
            MATCH     "2",TCINDC1           * Intended same day patient?
            IF        @EQUAL
              MOVE      "0",KEY1            * Overnite stay for sameday patient
            ENDIF
          ENDIF
.
GILOS900  MOVE      ZERO,EXIT
GILOS999  RETURN
+
.

