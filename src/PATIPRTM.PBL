. *----------------------------------------------------------------------
. * Include Name  :   PATIPRTM.INC
. *
. * Function      :   CGI variables for PATIPRFD - patipraf.dat
. *
. *  V10.03.01 11/08/2011 J.Tan          CAR 237245
. *                       Mods to change police number to police amount
. *  V9.09.01  16/06/2011 J.Tan          CAR 237245
. *                       Mods to allow changing insurance prov.after invoiced
. *  V9.09.00  18/04/2011 J.Tan          CAR 237245
. *                       Created TM
. *----------------------------------------------------------------------
.
.------------------------------------------------------------------------
.   Clear Parameters 
.------------------------------------------------------------------------
.
CPTIPR00  MOVE      Z70,PTIPR001
          MOVE      Z70,PTIPR002
          MOVE      Z70,PTIPR003
          MOVE      Z70,PTIPR004
          MOVE      ZERO,PTIPR005
          MOVE      Z70,PTIPR006
          MOVE      Z70,PTIPR007
          MOVE      ZERO,PTIPR008
.
CPTIPR99  RETURN
.
.------------------------------------------------------------
.   Set Parameters 
.------------------------------------------------------------
SPTIPR00  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPTIPR01,SPTIPR02,SPTIPR03,SPTIPR04,SPTIPR05:
                       SPTIPR06,SPTIPR07,SPTIPR08
.
          MOVE      ONE,EXIT
          GOTO      SPTIPR99
.
SPTIPR01  MOVE      QRYDATA,PTIPR001
          GOTO      SPTIPR99
.
SPTIPR02  MOVE      QRYDATA,PTIPR002
          PACK      PTIPR002,PTIPR002,SP70
          GOTO      SPTIPR99
.
SPTIPR03  SQUEEZE   QRYDATA
          MOVE      ZERO,FORM3
          MOVE      QRYDATA,FORM3
          MOVE      FORM3,PTIPR003
          GOTO      SPTIPR99
.
SPTIPR04  MOVE      QRYDATA,PTIPR004
          GOTO      SPTIPR99
.
SPTIPR05  SQUEEZE   QRYDATA
          MOVE      ZERO,PTIPR005
          MOVE      QRYDATA,PTIPR005
          GOTO      SPTIPR99
.
SPTIPR06  MOVE      QRYDATA,PTIPR006
          GOTO      SPTIPR99
.
SPTIPR07  MOVE      QRYDATA,PTIPR007
          GOTO      SPTIPR99
.
SPTIPR08  SQUEEZE   QRYDATA
          MOVE      ZERO,PTIPR008
          MOVE      QRYDATA,PTIPR008
          GOTO      SPTIPR99
.
SPTIPR99  RETURN
.
.------------------------------------------------------------
. Display fields
.------------------------------------------------------------
DIPR0000  BRANCH    FLDITMNO,DIPR0100,DIPR0200,DIPR0300,DIPR0400,DIPR0500:
                             DIPR0600
          GOTO      DIPR9999
.
DIPR0100  WRITE     HTMLFILE;PTIRINVN;
          GOTO      DIPR9999
.
DIPR0200  WRITE     HTMLFILE;PTIRMEDI;
          GOTO      DIPR9999
.
DIPR0300  WRITE     HTMLFILE;PTIRPOLA;
          GOTO      DIPR9999
.
DIPR0400  WRITE     HTMLFILE;PTIRCHOL;
          GOTO      DIPR9999
.
DIPR0500  WRITE     HTMLFILE;PTIRCPFN;
          GOTO      DIPR9999
.
DIPR0600  WRITE     HTMLFILE;PTIRAMNT;
          GOTO      DIPR9999
.
DIPR9999  RETURN
+
.------------------------------------------------------------
.  Update morgue file
.------------------------------------------------------------
MVPIPR00  MATCH     PTIPR002,Z70
          IF        !@EQUAL
            MOVE      PTIPR002,PTIRINVN
          ENDIF
.
          MATCH     PTIPR004,Z70
          IF        !@EQUAL
            MOVE      PTIPR004,PTIRMEDI
          ENDIF
.
          MOVE      PTIPR005,PTIRPOLA
.
          MATCH     PTIPR006,Z70
          IF        !@EQUAL
            MOVE      PTIPR006,PTIRCHOL
          ENDIF
.
          MATCH     PTIPR007,Z70
          IF        !@EQUAL
            MOVE      PTIPR007,PTIRCPFN
          ENDIF
.
          MOVE      PTIPR008,PTIRAMNT
.
MVPIPR99  RETURN
