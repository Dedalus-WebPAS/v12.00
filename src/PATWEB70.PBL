.----------------------------------------------------------------------
. Program       : PATWEB70
.
. Function      : Patient Label Server
.
. Modifications :
.                   
.----------------------------------------------------------------------
. V12.00.05 06/10/2025  J.Tan            TSK 0965990
.           Mod to read PTCNDRSM - Which variable for Separation mode
. V12.00.04 08/09/2025  Thanh T         TSK 0949457
.           Recompiled for PATSHT6 changes
. V12.00.03 24/06/2025  Ebon Clements   TSK 0962602
.           Max of 255 open file limit reached.
.           Moved open of OUTRF1A2 to REFLABEL from INIT0000
.           Close WEBSCHA2, WEBSCHA3 and WEBSCHA4 at INIT0000
.           Removed open of PATIN1A1 in INIT0000
.           Moved open of OPRCBDA1 to OPRCBD00 from INIT0000
.           Moved open of PMSUPGA1, PMSAPGA1, PMSPITA1, PATFIMA1 and PMSIMPA1
.           to before call of PRINTHON
. V12.00.02 11/06/2025  Ebon Clements   TSK 0961623
.           Alphanueric visit number changes
. V12.00.01 20/05/2025 Thanh T         TSK 0955096
.           Changed for alphanumeric visit number
.----------------------------------------------------------------------
. V11.05.05 07/04/2025  PJ Le Febour    TSK 0949428b
.           Recompiled for PATSHT6 
. V11.05.04 20/03/2025  PJ Le Febour    TSK 0949428a
.           Recompiled for PATSHT6 
. V11.05.04 22/02/2025  PJ Le Febour    TSK 0949428
.           Recompiled for PATSHT6  - added PMVXUDF7(upload MyHealth)
. V11.05.03 06/02/2025  Ebon Clements   TSK 0956930
.           Recompiled for WEBGROUP - Clear grouper vars
. V11.05.02 30/01/2025  Thanh T         TSK 0956569  
.           Recompiled for PATSHT6 and DXPATMAS changes              
. V11.05.01 30/01/2025  Thanh T         TSK 0956569  
.           Recompiled for PATSHT6 and DXPATMAS changes              
. V11.04.09 08/10/2024  Thanh T         TSK 0952281
.           Recompiled for DXPATMAS changes
. V11.04.08 29/08/2024  Alina Bhari     TSK 0950335
.           Corectly calculated patient age for age field in stationery        
.           templates - MDPRN407,CSPRN407                                         
. V11.04.07 17/05/2024  Thanh T         TSK 0941543
.           Recompiled for DXPATMAS changes
. V11.04.06 13/05/2024  Thanh T         TSK 0941543
.           Recompiled for PATSHT6 changes 
.           14/05/2024  J.Tan           TSK 0935689
.           Recompiled for PATSHT6 - Variable 1245 for Total Out of Pocket $
. V11.04.05 07/05/2024  Ebon Clements   TSK 0937359
.           Fixed key pack for joing registry read - PRTCSS00
. V11.04.04 29/01/2024  Nikitha B       TSK 0973585
.           Added tags from CSPR2082 to CSPR2091 to display Free Format Staff 
.           Name 1 to 10 respectively.  
.           Added tag OPRSDT00 to read oprsdtaf & read Staff names Free Format. 
. V11.04.03 23/11/2023  Peter Vela      TSK 0935874
.           Recompiled for PATSHT6 - Added validation for PTCNUNET = 3
.           NIHC IHI functionality
.           Recompiled for DXOUTREF - Added validation for PTCNUNET = 3
.           NIHC IHI functionality
.           Recompiled for PATCRSFP - Added validation for PTCNUNET = 3
.           NIHC IHI functionality
.           Recompiled for PATHFCF - Added validation for PTCNUNET = 3
.           NIHC IHI functionality
. V11.04.02 21/11/2023  Thanh T        TSK 0939233
.           Recompiled for PATCRDFD changes 
. V11.04.01 21/11/2023  Thanh T        TSK 0914124  
.           Recompiled for PATSHT6 changes 
.----------------------------------------------------------------------
. V11.03.07 15/11/2023  Don Nguyen     TSK 0917199
.           Recompiled for WEBPRTCD (IBAWEBCD)
. V11.03.06 17/10/2023  Peter Vela       TSK 0935874
.           Added parameter check for pmsihiaf
. V11.03.05 11/09/2023  Thanh T         TSK 0914124
.           Added SAVKEY10 to save WBSEUID
. V11.03.04 08/09/2023  Thanh T.        TSK 0912156
.           Recompiled for PATPAOFS and PRTALCPW changes 
. V11.03.03 07/08/2023  J.Tan           TSK 0935137
.           Recompiled for PATHFCF - Checking Cat FI ind6=1 for printing
. V11.03.02 14/06/2023  Bella Turco     TSK 0933691
.           Fixed misspelling of Stationary
. V11.03.01 01/03/2023  Peter Vela      TSK 0909393
.           Changed KEY for oprsesaf reads 
.           Changed KEY for oprdetaf reads
.           CASEKEYS value comes from IBALPCFD.IBLPSKEY
.           and will now include the hospital at the start of the key
.           Writes to IBLPSKEY have to be changed to add the hospital field
.           for theatre 
. V11.02.07 29/08/2022  Thanh T         TSK 0914124
.           Recompiled for PATSHT6 changes
. V11.02.06 02/08/2022  Thanh T         TSK 0914124
.           Recompiled for PATSHT6 changes
. V11.02.05 01/07/2022  Ebon Clements   TSK 0921738
.           Open file limit of 255 reached. Closed unused open files
.           PMSHCLA1, PATTRAN1
.           03/07/2022  Jill Parkinson  TSK 0921738
.           Removed aaecotaf and aaertaaf 
. V11.02.04 12/05/2022  Jacob Jackson    TSK 0919301
.           Recompiled for DXOUTDET change - change to appointment var
. V11.02.03 14/04/2022  Thanh T          TSK 0903453                        
.           Added CSPR2076 to CSPR2081 and MDPRN551 to MDPRN556 for
.           Identifying gender/pronoun and free text fields                    
.           14/04/2022  Ebon Clements    TSK 0911639
.           Recompiled for PATPRLAB - STV wrist band barcode
. V11.02.02 10/02/2022  Thanh T          TSK 0905641
.           Recompiled as OUTHEDFD/OUTMA1FD/WATTR1FD changes
. V11.02.01 24/01/2022  Jacob Jackson  TSK 0864505
.           Added preferred name option labels -
.           MDPRN546, MDPRN547, MDPRN548, MDPRN549, MDPRN550 &
.           CSPR2071, CSPR2072, CSPR2073, CSPR2074, CSPR2075
.           Recompiled for AAEMRN5N2, PATSHT6, PATHFCF, PATCRSFP, 
.           EMRMR5N2, PRTACCF, PRINTHON, DXPATMAS
. V11.01.07 25/11/2021  Sunny          TSK 0900631
.           Recompiled for PATSHT6 - Added PR6I3210 to PR6I3211
. V11.01.06 28/10/2021  Sunny          TSK 0896110
.           Recompiled for PATHFCF - Added WADIM6 
. V11.01.05 24/08/2021  Sunny          TSK 0893817
.           Recompiled PATSHT6 - Added PR6I3206 to PR6I3209  
.           24/08/2021  Peter Vela     TSK 0895969
.           Fixed match to Account Reference ID in GTPTLG60 
.           25/08/2021  Ebon Clements  TSK 0895969
.           Removed file opens from INIT000 as files where not read
.           SCRSLTA1, PATAXEA1, PATHOSP1, OUTRF1A1, OUTBOKA2, OUTBOKA4 and
.           OUTSESA2
. V11.01.04 17/06/2021  Thanh T        TSK 0901286
.           Recompiled for PRTACCF changes
. V11.01.03 27/04/2021  Thanh T        TSK 0895165
.           Recompiled for OPRARDFD changes
. V11.01.02 17/02/2021  J.Tan           TSK 0888639
.           Changed Counter OPRPMBFD PATMMBFD to DIM 3
. V11.01.01 16/02/2021  Thanh T          TSK 0902138
.           Recompiled for WXOPRDEA changes
.----------------------------------------------------------------------
. V11.00.17 08/12/2020  J.Tan          Task 0896778
.           Recompiled for PATHFCF - Added saved DTR variables
. V11.00.16 17/11/2020  Thanh T          TSK 0878747
.           Added PATATRFD PATATRIO and PATATRTD for PATSHT6
.           Added CSPR2070/MDPRN545 - multiple birth details
. V11.00.15 12/11/2020  Ebon Clements  TSK 0898748
.           Recompiled for PATSHT6 - Emergency contact address
. V11.00.14 26/10/2020  J.Tan          Task 0896778
.           Recompiled for PATHFCF - Fixed MBS Item description
. V11.00.13 06/10/2020  J.Tan          Task 0897709
.           Recompiled for PATHFCF -allow more than 15 ICD codes
. V11.00.12 23/09/2020  Peter Vela       TSK 0895969
.           Recompiled for WEBSEDFD
. V11.00.11 22/09/2020  Peter Vela       TSK 0895969
.           Recompiled for WEBERCFD
. V11.00.10 14/09/2020  J.Tan          Task 0888394
.           Recompiled for PATHFCF -Fixed printing fields on multi pages
. V11.00.09 08/09/2020  Peter Vela     Task 0895969
.           Added WebServices OECW
. V11.00.08 31/08/2020  Tracey Nguyen  Task 0896149
.           Recompiled for PATHFCF -
.           Commented out PHFC6712 to revert changes to Care Type
.           cat CC to use User Defined Field 3 as per pre 01/07/2020
. V11.00.07 21/07/2020  J.Tan          Task 0888394
.           Recompiled for PATHFCF -Mod to print fields on multi pages
. V11.00.06 29/06/2020  Ebon Clementsn Task 0893790 
.           Set NOLABEL to ZERO in CLRPAR00 as it's a FORM
. V11.00.05 05/06/2020  Jill Parkinson Task 0892648                   
.           Recompiled for PATHFCF - July 2020 start date            
. V11.00.04 18/05/2020  J.Tan          TSK 0891113
.           Recompiled for PATHFCF - Added var 402 for PKADD4
. V11.00.03 07/04/2020  Ebon Clements  TSK 0887745
.           Recompiled for PATSHT6 - Discharge date dd/mm/ccyy
.           02/04/2020  Thanh T        TSK 0879163                    
.           Changed CSPRN405, OPRCBD10, MDPRN405 for Sex category changes.
.           Added CSPR2069 and MDPRN544 for for sex long description 
. V11.00.02 06/03/2020  Tracey Nguyen  TSK 0848746
.           Recompiled for PATHFCF (PRTHFCF)- Added variable fields
.           400(Insurance Company) and 401 (Insurance Policy Number/
.           Insurance Fund Membership Number)
. V11.00.01 04/03/2020  J.Tan          TSK 0838262
.           Added Effective from and to date to MBS Item file
.----------------------------------------------------------------------
. V10.15.03 07/02/2020  Ebon Clements    TSK 0887235
.           Recompiled for PMSCEXCD - extra contact postal address
. V10.15.02 06/12/2019 Jill Parkinson Task 0884621
.           Recompiled for PATHFCF
. V10.15.01 22/09/2019  Ken Bell         TSK 0875392
.           Removing Claim Number if Claim Cancelled
.----------------------------------------------------------------------
. V10.14.06 29/07/2019  Don Nguyen       TSK 0877726
.           Recompiled for PATHFCF (PRTHFCF) - Used PTCDUDF5 instead
. V10.14.05 25/07/2019  Don Nguyen       TSK 0877726
.           Recompiled for PATHFCF (PRTHFCF) - Validate Admission Date for
.           Bed Type, Care Class and Mental Health Legal Status.
. V10.14.04 11/06/2019  Nicole Torrisi   TSK 0870675
.           Recompiled for DXPATMAS
. V10.14.03 17/04/2019  Nicole Torrisi   TSK 0870675
.           Recompiled for DXPATMAS - 215 - Email address
. V10.14.02 18/02/2019  Ebon Clements    TSK 0829856
.           Recompiled for GETEFDRG - Contract from effective date
. V10.14.01 15/02/2019  Thanh T.         TSK 0869660
.           Recompiled for PATPRLAB changed
.----------------------------------------------------------------------
. V10.13.12 13/12/2018  Thanh T          TSK 0865690
.           Recompiled for PATSHT6
. V10.13.11 13/12/2018  Thanh T          TSK 0865690
.           Recompiled for PATSHT6
. V10.13.10 19/11/2018  Ken Bell         TSK 0865690
.           Recompiled for PATSHT6
. V10.13.09 07/11/2018  Thanh T          TSK 0865690
.           Recompiled for PATSHT6
. V10.13.08 05/11/2018  Richa Phogat     TSK 0864090
.           Recompiled for DXWATTRE, Added WATTX1FD               
. V10.13.07 30/10/2018  Richa Phogat     TSK 0864090
.           Recompiled for DXWATTRE - Added ACC Number(DWTTR073)
. V10.13.06 16/10/2018  Richa Phogat     TSK 0862844
.           Recompiled for DXPATMAS - Fixed Registered HCP name
. V10.13.05 16/10/2018  Ebon Clements   TSK 0863467
.           Allow multiple instances of server to be run.
.           Delete ibalpcaf after read lock and before printing begins
.           Added save and restore routine instead of re reads
.           SLPC0000 and RLPC0000
. V10.13.04 04/09/2018  Ken Bell        TSK 0862168
.           Recompiled for PATSHT6
. V10.13.03 22/08/2018  Thanh T         TSK 0860668
.           Recompiled for PATSHT6
. V10.13.02 21/08/2018  Nicole Torrisi  TSK 0859684
.           Recompiled for WEBLBINP(DADMDETS - 154 - Admitting Point)
. V10.13.01 08/08/2018  Thanh T         TSK 0860668
.           Recompiled for PATSHT6
. V10.12.06 10/07/2018  Nicole Torrisi  TSK 0857785
.           Recompiled for DXPATMAS - 214 - Alternate ID
. V10.12.05 24/04/2018  Tracey Nguyen   TSK 0841644
.           Recompiled for PMSIMPFD - added impairment group
. V10.12.04 23/04/2018  Richa Phogat     TSK 0853196
.           Recompiled for PRTACCF
. V10.12.03 20/04/2018  Peter Vela      TSK 0855360
.           Recompiled for DXWATTRE
. V10.12.02 06/03/2018  Steve Armstrong TSK 0853233
.           Recompiled for changes to PATPRLAB
. V10.12.01 18/01/2018  Richa Phogat   TSK 0825792
.           Modified Admitting Nurse Description, Nurse 1/2/3 Attending Patient
.           Front/Back/Day Description to read pmshcpaf instead of oprnuraf if
.           OPCNURSE=1
.----------------------------------------------------------------------
. V10.11.09 27/11/2017  Thanh T.       TSK 0821710    
.           Recompiled as PATMISTD changed     
. V10.11.08 23/11/2017  Davin          TSK 0846231
.           Recompiled for OPRPMBFD - added oppmrefn
. V10.11.07 30/10/2017  J.Tan            TSK 0846739
.           Recompiled for PRTACCF - added NHI fields
. V10.11.06 24/10/2017  Davin                    TSK 0837347
.           Recompiled for PATSHT6 - mods to HCP Practice variables
. V10.11.05 02/10/2017  Steve Armstrong  TSK 0816814
.           Recompiled for changes to ACCDIAFD
. V10.11.04 20/09/2017  Richa Phogat     TSK 0845103
.           Added file ACCCMTFD, ACCDIAFD & EMRICDFD
.           Recompiled for PRTACCF.PBL
. V10.11.03 23/08/2017  Thanh T.                 TSK 0821710
.           Recompiled WEBLBOUT 
. V10.11.02 26/07/2017  Thanh T.                 TSK 0821710
.           Recompiled PASMISTM
. V10.11.01 19/07/2017  Thanh T.                 TSK 0821710  
.           Audit Amission/outpatient visit comments.
.           VISMDTAF/VISMDTAF change
.           18/07/2017  Steve Armstrong          TSK 0842330
.           Recompiled for changes to PATHST6.
.----------------------------------------------------------------------
.        V10.10.07  11/07/2017  Ebon Clements    TSK 0841035
.                   Recompiled for changes to PATPRLAB
.        V10.10.06  11/07/2017  Nicole Torrisi   TSK 0841026
.                   Recompiled for changes to WEBLBALL - Read NHI details
.        V10.10.05  29/06/2017  Steve Armstrong  TSK 0841035
.                   Recompiled for changes to PATPRLAB
.        V10.10.04  12/04/2017  Ebon Clements    TSK 0836756
.                   Recompiled for WEBLBINP - Printing NHI values
.        V10.10.03  17/03/2017  Thanh T.         TSK 0832066                 
.                   Changed DVA PREPAT/PMPXDVAC fields to use the new         
.                   concession card PMCDCNUM/PMCDDVAC fields                  
.        V10.10.02  16/03/2017  Jill Parkinson   TSK 0818098   
.                   Recompiled for PRINTHON
.        V10.10.01  02/03/2017  Tracey Nguyen    TSK 0317279
.                   Recompiled for DXPATMAS - Fixed fix multi given name
.                   formatting in title case (DPTM1210 and DPTM1211)
.                   14/02/2017   J.Tan         TSK 0829089
.                   Changed index on oprthiaf file
.        V10.09.04  03/02/2017  Ken Bell         TSK 0831808
.                   Recompiled for PATSHT6 - GP Practice for Inpatient
.        V10.09.03  10/01/2017  Nicole Torrisi   TSK 0829851
.                   Recompiled for PATCRSFP - Cancer Reg Form
.        V10.09.02  08/12/2016  Jill Parkinson TSK 0822329   
.                   Recompiled for new ACC fields
.        V10.09.01  02/12/2016  Steve Armstrong  TSK 0817740
.                   Recompiled for changes to OUTPRLAB & PATSETLB
.----------------------------------------------------------------------
.        V10.08.14  15/11/2016  Steve Armstrong  TSK 0817740
.                   Recompiled for changes to OUTPRLAB & PATSETLB
.                   24/11/2016  J.Tan            TSK 0825330
.                   Recompiled for changes to PATHFCF
.        V10.08.13  17/10/2016  Peter Vela       TSK 0826301
.                   Recompiled for WEBEMRDX - Added Hospital Number
.        V10.08.12  23/09/2016  Steve Armstrong  TSK 0826625
.                   Added new variables for GP Label printing.
.                   Recompiled for changes to PATSETLB, PATPRLAB and OUTPRLAB.
.        V10.08.11  22/09/2016  J.Tan          TSK 0813931
.                   CSPRN000 - Added Baby weight and Placenta delivery time
.        V10.08.10  07/09/2016  Peter Vela     TSK 0821597
.                   Recompiled for DXPATMAS - Added Medical Records Alert 
.                   Description
.        V10.08.09  31/08/2016  J.Tan            TSK 0321465 & 0319749
.                   Recompiled for PATHFCF - Accom.date when Contract ID chged*
.        V10.08.08  26/08/2016  Don Nguyen       TSK 0312570
.                   Recompiled for PATHFCF (GETDRG)
.                   Added PMSEDGFD/IO and GETEFDRG
.        V10.08.07  10/08/2016  Davin            TSK 0321234
.                   Recompiled for PATSHT6 - alert care pathway fields
.                   10/08/2016  Ebon Clements    TSK 0821162
.                   Recompiled for PATSHT6 - Nearest relative relationship
.        V10.08.06  15/07/2016  Davin            TSK 0315393
.                   Recompiled for PATSHT6
.        V10.08.05  28/06/2016  Nicole Torrisi TSK 0817199                     
.                   Recompiled for DXOUTDET - Added Item 110 - Attending Doctor
.        V10.08.04  07/06/2016  Jill Parkinson TSK 0820003                     
.                   Recompiled for PMSCEXCD - allow patmx1af/patma1af details 
.        V10.08.03  06/06/2016  Peter Vela     TSK 0321157
.                   Recompiled for OPRPOCFD
.        V10.08.02  03/05/2016  Peter Vela       TSK 0321530
.                   Recompiled for PATSHT6
.        V10.08.01  01/04/2016  Steve Armstrong  TSK 0321157
.                   Recompiled for changes to OPRPOCFD
.----------------------------------------------------------------------
.        V10.07.05  23/02/2016  Don Nguyen       TSK 0323914
.                   Recompiled for PATSHT6 - added var 1162 (PR6I3162)
.        V10.07.04  02/02/2016  Peter Vela       CAR 0322116
.                   Recompiled for PATSHT6
.        V10.07.03  29/01/2016  Peter Vela       CAR 0809567
.                   Recompiled for PATSHT6
.        V10.07.02  29/10/2015  Ebon Clements    CAR 268970
.                   Change to use OUTCLIFD index 1 instead of index 2
.        V10.07.01  19/10/2015  Don Nguyen       CAR 316625
.                   Recompiled for WEBLBINP (DADMDETS)
.                   Recompiled for PATSHT6 - added variables 1152 and 1153
.----------------------------------------------------------------------
.        V10.06.15  21/09/2015  Davin             CAR 313906
.                   Recompiled for PMSCEXCD - allow patmx1af/patma1af details
.        V10.06.14  14/09/2015  Peter Vela       CAR 320950
.                   Recompiled for PATSHT6 - Added Multiple Card Type Number 
.        V10.06.13  10/09/2015  Steve Armstrong  CAR 315321
.                   Recompiled for changes to OUTPRLAB, PATSETLB & PATPRLAB
.        V10.06.12  02/09/2015  Peter Vela       CAR 320878
.                   Recompiled for PATHFCF - Added PRFA Mobile Number
.        V10.06.11  01/09/2015  Steve Armstrong  CAR 321211
.                   Mods to fix printing of I/P PMI label same
.                   as for PMI label.
.        V10.06.10  27/08/2015  Don Nguyen       CAR 308621
.                   Recompiled for PATSHT6 - added variables 1148-1150
.        V10.06.09  13/08/2015  Don Nguyen       CAR 308621
.                   Added TABOCTAL and recompiled for PATSHT6
.        V10.06.08  16/07/2015  Peter Vela       CAR 319529
.                   Added OPDAUNIQ to CSPRN000 variable number 670
.                   15/07/2015  Steve Armstrong  CAR 315999
.                   Recompiled for changes to PATSETLB, PATPRLAB & IBADLABS
.                   14/07/2015  Peter Vela    CAR 312033
.                   Recompiled for DXOUTDET
.        V10.06.07  26/06/2015  Peter Vela    CAR 283178
.                   Fixed validation of print empty line in MDPRN910
.        V10.06.06  28/05/2015  Peter Vela    CAR 312552
.                   Recompiled for PATSHT6 - add ASTAY
.        V10.06.05  15/05/2015  Davin         CAR 310155
.                   Recompiled for PATGBCRN - added MOD10V05 for BPAY
.        V10.06.04  17/04/2015  Don Nguyen       CAR 303612
.                   Recompiled for PATPRLAB - Restored order of WLINEZ18
.        V10.06.03  15/04/2015  J.Tan            CAR 314503
.                   Recompiled for PATSHT6 - added 1135 for Casemix Code
.        V10.06.02  31/03/2015  Don Nguyen       CAR 303612
.                   Recompiled for PATPRLAB, PATSETLB and RCHLABEL
.        V10.06.01  19/03/2015  Ebon Clements    CAR 268970
.                   Removed open of OUTCLIA2
.----------------------------------------------------------------------
.        V10.05.18  23/01/2015  Peter Vela       CAR 310793
.                   Added direct read to bokrc1af in PRTINP40
.        V10.05.17  09/01/2015  Don Nguyen       CAR 296120
.                   Recompiled for PATSHT6 - added 1132 for TAC Accident Date
.        V10.05.16  02/12/2014  Nicole Torrisi   CAR 304493
.                   Recompiled for DXPATMAS
.        V10.05.15  06/11/2014  Don Nguyen       CAR 304059
.                   Recompiled for changes to OPRSESIO - added Default Team 
.                   Completed fields.
.        V10.05.14  31/10/2014  J.Tan            CAR 304310
.                   Recompiled PATSHT6 - Added 1131 for DVA Visit
.        V10.05.13  30/10/2014  Don Nguyen       CAR 307680
.                   Recompiled for changes to PATSHT6 - Added PR6I3130
.        V10.05.12  22/10/2014  Steve Armstrong  CAR 294204
.                   Recompiled for changes to SJOGLABL
.                   22/10/2014 J.Tan             CAR 306503
.                   Recompiled for PATHFCF - Invoice with multiple contract ID
.        V10.05.11  20/10/2014  Peter Vela       CAR 301311
.                   Recompiled for DXPATMAS
.        V10.05.10  13/10/2014  Ania P           CAR 303879
.                   Added HP code output
.        V10.05.09  02/10/2014  Steve Armstrong  CAR 306544
.                   Mods to only print SJOG barcode labels where the
.                   label type is LABELINP01, so wrist band labels will
.                   function as they did previously via screen printed
.                   labels.
.        V10.05.08  26/09/2014  Steve Armstrong  CAR 306544
.                   Recompiled for changes to SJOGLABL
.                   29/09/2014  Davin            CAR 305951
.                   Recompiled for PATHFCF - Changed fund membership number
.        V10.05.07  23/09/2014  Steve Armstrong  CAR 294204
.                   Recompiled for changes to SJOGLABL & IBADLABS.
.                   Also added read of pmsvx1af record before printing
.                   labels.
.        V10.05.06  18/09/2014  Davin            CAR 304204
.                   Recompiled for GETDRG - get drg vers based on disch date
.        V10.05.05  15/09/2014  Steve Armstrong  CAR 294204
.                   Recompiled for changes to SJOGLABL & IBADLABS
.        V10.05.04  10/09/2014  Steve Armstrong  CAR 294204
.                   Recompiled for changes to SJOGLABL
.        V10.05.03  05/09/2014  Don Nguyen       CAR 250925
.                   Modified OPRCBD00 to match baby number against non-deleted
.                   records only.
.        V10.05.02  26/08/2014  Don Nguyen       CAR 250925
.                   Modified OPRCBD00 to skip record if flagged as deleted
.                   (OPCBDELT = 1).
.                   26/08/2014  Ania P           CAR 303210
.                   Recompiled for MEHHONFD
.        V10.05.01  01/08/2014  Don Nguyen       CAR 250925
.                   Added vars 635 - 669 (CSSD Theatre; CSPR2023 - CSPR2057)
.                   29/07/2014  Steve Armstrong  CAR 294204
.                   Mods to print SJOG Geelong Labels
.                   Recompiled for changes to IBADLABS, OUTPRLAB,
.                   PATPRLAB, PATSETLB for SJOG Geelong labels.
.----------------------------------------------------------------------
.        V10.04.05  02/07/2014  Don Nguyen       CAR 292599
.                   Recompiled for PATSHT6 - Added vars 1120 - 1129  
.                   Added LINE80 & FIRSTCH
.        V10.04.04  17/06/2014  Steve Armstrong  CAR 301639
.                   Added call to TFILENAM for FNAMPOST (AUTOPCOD) in
.                   INIT0000.
.                   Recompiled for changes to AUTOPCOD & AUPCDVAR.
.        V10.04.03  24/02/2014  J.Tan            CAR 285504
.                   Recompiled for DXPATMAS
.        V10.04.02  25/02/2014  Don Nguyen       CAR 291879
.                   Recompiled for changes to WEBLBPMI (DXPATMAS)
.                   Recompiled for changes to WEBLBREF (DXOUTREF)
.                   24/02/2014  J.Tan            CAR 285504
.                   Recompiled for DXPATMAS
.                   24/02/2014  Don Nguyen       CAR 291879
.                   Added field 634 (CSPR2022)
.                   Moved CNPRN000 into an include (PATCRSFP.PBL)
.                   Added GTIHINUM for PATCRSFP.PBL 
.                   Recompiled for PATSHT6 - Added Field 1117
.                   Recompiled for PATHFCF - Added Field 398
.        V10.04.01  09/01/2014  Don Nguyen       CAR 295501
.                   Recompiled for PATSHT6 - Added Field 1116
.----------------------------------------------------------------------
.        V10.03.40  11/11/2013  Peter Vela       CAR 284858
.                   Recompiled for WEBLBCOM
.        V10.03.39  07/11/2013  Peter Vela       CAR 284858
.                   Recompiled for WEBLBCOM
.        V10.03.38  04/10/2013  Patrick Adair    CAR 284134
.                   Recompiled for new oprcliaf field
.        V10.03.37  03/10/2013  Steve Armstrong  CAR 288277
.                   Recompiled for further changes to PATSETLB & PATPRLAB
.        V10.03.36  27/09/2013  Jill Parkinson   CAR 29240   
.                   Recompiled for DADMDETS - LABELINP variable 121
.        V10.03.35  18/09/2013  Ania P           CAR 291670
.                   Added OPEN of PATIN1A1 in GPTEXT00
.        V10.03.34  09/09/2013  Nicole Torrisi   CAR 287738
.                   Recompiled for DXPATMAS
.        V10.03.33  26/08/2013  Davin            CAR 284840
.                   Recompiled for PATSHT6 - Added Fields 1114 & 1115
.        V10.03.32  15/08/2013  Steve Armstrong  CAR 288277
.                   Recompiled for changes to PATSETLB & PATPRLAB
.                   (Alternate STV PMI Zebra label)
.        V10.03.31  18/07/2013  Don Nguyen       CAR 288603
.                   Recompiled for PATSHT6 - Added Field 1113
.        V10.03.30  20/06/2013  Davin            CAR 287161
.                   Recompiled for PATGBCRN - right justify ptcnhbpi
.        V10.03.29  14/06/2013  Don Nguyen       CAR 286615
.                   Recompiled for DXALLDET (WEBLBALL) - ALLVR136-156
.        V10.03.28  23/04/2013  Don Nguyen       CAR 283575
.                   Recompiled for PATSHT6 - Added Fields 1111 & 1112
.        V10.03.27  18/04/2013  J.Tan            CAR 281636
.                   Recompiled for PATSHT6 - "UNK" AVISIT
.        V10.03.26  18/04/2013  Ania P           CAR 281663
.                   Recompiled for PATHFCF
.        V10.03.25  26/03/2013  Don Nguyen       CAR 282342
.                   Recompiled for PATGBCRN
.        V10.03.24  05/03/2013  Patrick Adair    CAR 281898
.                   Recompiled for PATHFCF
.        V10.03.23  13/02/2013  Jill Parkinson   CAR 278327
.                   Recompiled for PATHFCF - RDMOP000 key change
.        V10.03.22  12/02/2013  Peter Vela       CAR 278327
.                   Recompiled for PATHFCF
.        V10.03.21  24/01/2013  Peter Vela       CAR 278327
.                   Recompiled for PATHFCF
.        V10.03.20  24/01/2013  Peter Vela       CAR 278327
.                   Recompiled for PATHFCF
.        V10.03.19  18/01/2013  Saroeun Soeur    CAR 273569
.                   Recompiled for PATSHT6
.        V10.03.18  12/12/2012  Don Nguyen       CAR 277958
.                   Recompiled for WEBLBINP (DXPATMAS)
.        V10.03.17  22/11/2012  Patrick Adair    CAR 273181
.                   Read Visit file when creating AROC form
.        V10.03.16  09/11/2012  Davin            CAR 256150
.                   Added code to fax inpatient form (prtinp70)
.        V10.03.15  31/10/2012  Jill Parkinson   CAR 275635
.                   Recompiled for WEBLBCOM - stop loop if LABCOS not setup
.        V10.03.14  22/10/2012  Patrick Adair    CAR 273181
.                   Added Stationery Variables for AN-SNAP (Fields 96 - 175)
.        V10.03.13  17/10/2012  Jill Parkinson   CAR 273375
.                   Recompiled for DATECONV - first day of year calculation
.        V10.03.12  20/08/2012 Steve Armstrong   CAR 501539
.                   Recompiled for changes to PATHFCF
.        V10.03.11  18/07/2012  Don Nguyen       CAR 264561
.                   Recompiled for PATGBCRN
.        V10.03.10  17/05/2012 J.Tan             CAR 252613
.                   Recompiled for DADMDETS - fixed Insurance code
.        V10.03.09  17/04/2012 Don Nguyen        CAR 261728
.                   Recompiled for DADMDETS - Print Local GP or Practice Name
.        V10.03.08  17/04/2012 Don Nguyen        CAR 261728
.                   Recompiled for WEBEMRDX - Print Local GP or Practice Name
.        V10.03.07  16/03/2012  Jill Parkinson   CAR 243341
.                   Changed BKRXUDF5 to be category VI
.        V10.03.06  21/02/2012  J.Tan            CAR 247672
.                   Recompiled for PATSHT6 - Hospital Approval no for Multi Hosp
.        V10.03.05  13/02/2012  J.Tan            CAR 259025
.                   Recompiled for PATHFCF - added Alternate Election
.        V10.03.04  06/02/2012  Ebon Clements    CAR 259219
.                   Recompiled for PATSHT6 - NOK relationship description
.        V10.03.03  01/02/2012  J.Tan            CAR 247090
.                   Recompiled for PATSHT6 - Print indicator for Card Type
.        V10.03.02  29/11/2011  Jill Parkinson  CAR 249362
.                   Changed alert key
.        V10.03.01  09/11/2011  Ebon Clements     CAR 248529
.                   Added multiple contacts of the same type functionality
.----------------------------------------------------------------------
.        V10.02.15  18/10/2011  Davin          CAR 253080
.                   Recompiled for PATHFCF (added mehdlsfd/io/open)
.        V10.02.14  14/10/2011  Davin          CAR 252759
.                   Recompiled for PATHFCF
.        V10.02.13  11/10/2011  Saroeun Soeur  CAR 246773
.                   Recompiled for DXPATMAS
.        V10.02.12  03/10/2011  Davin          CAR 248953
.                   Recompiled for PATHFCF
.        V10.02.11  13/09/2011  Davin          CAR 248749
.                   Recompiled for PATSHT6 & PATHFCF
.        V10.02.10  01/09/2011  Jill Parkinson CAR 249381
.                   Recompiled for changes to PATHFCF - patecdaf reads
.        V10.02.09  04/07/2011  Steve Armstrong  CAR 240722
.                   Recompiled for changes to PMSCEXCD.
.                   Added read on pmspx2af prior to calling XCON0000.
.                   01/07/2011 Ebon Clements   CAR 242246
.                   Recompiled for DXOUTDET - clinic phone number
.        V10.02.08  29/06/2011 Peter Vela      CAR 239594
.                   Added WAHealth variables
.        V10.02.07 07/06/2011 Ebon Clements    CAR 239530
.                   Added print extra contact functionality
.        V10.02.06  02/06/2011  Saroeun Soeur    LANDESK 500457
.                   Recompiled for PATHFCF
.        V10.02.04  25/05/2011  Saroeun Soeur    CAR 242008
.                   Recompiled for PATSHT6
.        V10.02.03  Saroeun Soeur     CAR 242008
.                   Recompiled for PATSHT6
.        V10.02.02  Peter Vela        CAR 239759
.                   Recompiled for PATSHT6
.        V10.02.01  16/03/2011 Jill Parkinson CAR 239574
.                   Increased printer size
.----------------------------------------------------------------------
.        V10.01.01  14/12/2010 Mike Laming   CAR 233046
.                   Mods to Misc.Charges PATMCHFD - incl. new routine PATMCHRD
.----------------------------------------------------------------------
.        V10.00.07  Steve Armstrong   CAR 231275
.                   Recompiled for changes to DXPATMAS
.        V10.00.06  Jill Parkinson CAR 222489
.                   Added medical booking forms
.        V10.00.05  Ebon Clements CAR 230238
.                   Recompiled for DXPATMAS - HCP Practice name
.        V10.00.04  Peter Vela    CAR 216620
.                   Recompiled for WEBEMRDX - Added EMVCFTXT Primary Diagnosis
.                   Free Format Description
.        V10.00.03  Mike Laming   CAR 208570
.                   Recompiled for changes to PATCRDFD.
.        V10.00.02  08/04/2010  Peter Vela     CAR 218917
.                   Recompiled for DADMDETS - Added Extra Doctor variables
.                   to inpatient labels.
.        V10.00.01  31/03/2010  Davin          CAR 208120
.                   Recompiled for PATSHT6 - var 874 - first Alternate ID
.----------------------------------------------------------------------
.         V9.12.19  01/02/2010  Peter Vela       CAR 204672
.                   Recompiled for PATHFCF
.         V9.12.18  28/01/2010  Peter Vela     CAR 199757
.                   Added Operating Surgeon End Time
.         V9.12.17  11/01/2010  Peter Vela     CAR 199757
.                   Added the following Stationery template variables to
.                   CSPRN000:
.                   Surgeon 2 Code, Description and End Time.
.                   Assistant 1 Code, Description and End Time.
.                   Assistant 2 Code, Description and End Time.
.                   Anaesthetist Code, Description and End Time.
.                   Other Code, Description and End Time.
.                   Added Staff Category 1 - 10
.                   Added Team 1 Surgery Delay Code, Description
.                   Added Staff End Times 1- 10
.         V9.12.16  07/01/2010  Ebon Clements  CAR 212367
.                   Recompiled for PATSHT6 - local doctor free format
.         V9.12.15  21/12/2009  Ebon Clements  CAR 205439
.                   Recompiled for PATSHT6 - Concession card print order
.         V9.12.14  17/12/2009  Peter McMullen CAR 210130
.                   Convert to newer Dr name format routine DOCNM000
.         V9.12.13  17/11/2009  Peter Vela       CAR 199767
.                   Added further Theatre variables Stationery Type 18
.                   CSPRN000
.         V9.12.12  16/10/2009  Ebon Clements    CAR 206812
.                   Recompiled for DXOUTDET
.         V9.12.11  16/10/2009  Ebon Clements CAR 190680
.                   Recompiled for DADMDETS -
.                   Fixed pack of VAR after calls to CMPH0000
.         V9.12.10  14/10/2009  WeeLee Koo       CAR 205308
.                   Recompiled for DXPATMAS
.         V9.12.09  05/10/2009  Peter Vela       CAR 199757
.                   Added theatre form variables for Stationery Type 18
.                   for Intraoperative Report Healthscope
.                   Added Next Stationery Variable to Stationery Type 18
.                   Added Next Stationery Variable to Stationery Type 3
.                   Recompiled for PATSHT6
.                   Added Next Stationery Variable to Stationery Type 19
.                   Recompiled for PRINTHON
.         V9.12.08  06/10/2009  WeeLee Koo       CAR 206462
.                   Recompiled for DXALLDET>ALLVR135 - ACC Number
.         V9.12.07  04/08/2009  Peter Vela       CAR 202478
.                   Recompiled for DXPATMAS
.         V9.12.06  14/07/2009  Peter Vela       CAR 197776
.                   Recompiled for PATSHT6 - Added Referring GP Code and Desc
.         V9.12.05  29/06/2009  Ebon Clements    CAR 199875
.                   Added open of patelgaf to GTPTLG00
.         V9.12.04  22/06/2009  Peter Vela       CAR 198045
.                   Added BOKRC1FD variables to Stationery Type 18:
.                   BKREEDAT, BKREATIM,BKREADOC (code and desc), DBKREELO
.         V9.12.03  28/05/2009  Saroeun Soeur    CAR 196987
.                   Recompiled for PATHFCF
.         V9.12.02  21/05/2009  Saroeun Soeur    CAR 197081
.                   Recompiled for DADMDETs attending doc
.         V9.12.01  20/05/2009  Saroeun Soeur    CAR 197081
.                   Recompiled for DADMDETS
.         V9.11.09  29/04/2009  Saroeun Soeur    CAR 191476
.                   Recompiled for PATSHT6
.         V9.11.08  16/04/2009  Davin         CAR 182901
.                   Recompiled for PATSHT6 - fees information mods
.         V9.11.07  01/04/2009  Peter Vela       CAR 189217
.                   Recompiled for PATSHT6 - Discharge Intention CAT KN
.                   PMSVX1FD.PMVXUDIN
.         V9.11.06  23/03/2009  Davin            CAR 178015
.                   Recompiled for PATSHT6 - BPAY CRN now uses invoice number,
.                                            so display as blank for ID sheets
.         V9.11.05  04/03/2009  Jill Habasque    CAR 134681
.                   Added IWI fields (851-853)
.         V9.11.04  10/02/2009  Peter Vela       CAR 183976
.                   Added Eclipse OEC Eligibility Check functionality
.         V9.11.03  19/01/2009  Ebon Clements    CAR 169339
.                   Added arrival user defined nurse to theatre forms
.         V9.11.02  04/12/2008  Peter Vela       CAR 179104
.                   Recompiled for PATSHT6
.         V9.11.01  22/10/2008  Peter Vela       CAR 180404
.                   Recompiled for DXPATMAS
.         V9.10.17  25/09/2008 Peter Vela      CAR 179076
.                   Recompiled for PATSHT6 - Added Attending Doctor with
.                   call to PACNAME
.         V9.10.16  24/09/2008 Sandra Barcham  CAR 164480
.                   Recompiled for OUTPRLAB
.         V9.10.15  23/09/2008 Peter Vela      CAR 179104
.                   Recompiled for PATSHT6
.                   - Added deceased PRFA indicator to variable 89
.         V9.10.14  16/09/2008 Peter Vela      CAR 170506
.                   Recompiled for PATSHT6
.                   Added Cat KO pmvxurea code
.                   Added Cat KO pmvxurea description
.                   Added Attending Doctor fax number
.         V9.10.13  08/09/2008 Ebon Clements   CAR 175728
.                   Recompiled for PATSHT6 - Compensable vars and pmi address
.         V9.10.12  05/09/2008 Jill Habasque   CAR 175204
.                   Recompiled for WEBLBCOM - subtract 2 for wrist band labels
.         V9.10.11  04.09/2008 Ebon Clements   CAR 177643
.                   Recompiled for PATSHT6 - PMPXUSR7, PMPXUSR8 & PMPXUSR9
.         V9.10.10  19/08/2008 Ebon Clements   CAR 176281
.                   Recompiled for PATSHT6 - Fee information
.         V9.10.09  30/07/2008  Ebon Clements  CAR 173369
.                   Added OPCNPLIN - Don't print a blank line a the
.                   start of theatre form. CSPRN000
.         V9.10.08  25/07/2008  Ebon Clements  CAR 173834
.                   Recompiled for DADMDETS - Attending doctor format name
.         V9.10.07  22/07/2008  Ebon Clements  CAR 173369
.                   Allow print of theatre forms for day oncology bookings
.                   PRTCSS00
.         V9.10.06  15/07/2008  Ebon Clements  CAR 160213
.                   Recompiled for update fee estimate functionality changes
.         V9.10.05  18/06/2008 Ebon Clements     CAR 169830
.                   Recompiled for PATHFCF
.         V9.10.04  20/05/2008 Ebon Clements     CAR 166566
.                   Recompiled for PATSHT6
.         V9.10.03  19/05/2008 Ebon Clements     CAR 167936
.                   Recompiled for PATSHT6
.         V9.10.02  16/05/2008 Ebon Clements     CAR 166563
.                   Recompiled for WEBEMRDX
.         V9.10.01  13/05/2008 Ebon Clements     CAR 166566
.                   Recompiled for PATSHT6
.         V9.09.23  28/03/2008 Ebon Clements     CAR 164282
.                   Recompiled for PATSHT6 - Added Treating Doctor
.         V9.09.22  28/02/2008 Peter Vela        CAR 162654
.                   Recompiled for PATSHT6 - Added Inform GP
.         V9.09.21  08/02/2008  Davin            CAR 153384
.                   Recompiled for PATSHT6 - added fields 618-631
.         V9.09.20  25/01/2008  Davin            CAR 153384
.                   Recompiled for PATSHT6 - added fees information fields
.         V9.09.19  25/01/2008  Jill Habasque    CAR 100278
.                   Recompiled for PATSHT6 - added check for multi hospital
.         V9.09.18  19/12/2007 Ebon Clements     CAR 157606
.                   Recompiled for DXALLDET - Status open changed to active
.         V9.09.17  12/12/2007  Ebon Clements     CAR 157081
.                   Recompiled for PATSHT6 - Patient e-mail address
.         V9.09.16  03/12/2007  Peter Vela        CAR 147233
.                   Added functionality to read PATELGFD patient eligibility
.         V9.09.15  05.12.2007  Peter McMullen    CAR 137137
.                   Recompiled for changes to DXOUTREF for item 103
.         V9.09.14  03/12/2007 Ebon Clements      CAR 150315
.                   Added joint registry to CSPRN000 theatre form printing
.         V9.09.13  19/11/2007  Peter Vela        CAR 110766
.                   Recompiled for DXPATMAS
.         V9.09.12  19/11/2007 Peter Vela         CAR 110766
.                   Recompiled for PATSETLB
.         V9.09.11  05/10/2007 Ebon Clements      CAR 150315
.                   Added DVA number to CSPRN000 theatre form printing
.         V9.09.10  28/09/2007 Davin              CAR 149173
.                   Recompiled for PATHFCF - Added visit based Referring HCP
.         V9.09.09  18.09.2007  Steve Armstrong   CAR 124435
.                   Recompiled for changes to DXOUTREF for items:
.                      50 - Claim Code
.                      51 - Claim Code Description
.                      52 - ACC Number
.                   Recompiled for changes to WEBEMRDX for item:
.                      200 - ACC Number
.                   Recompiled for changes to DXOUTDET for item:
.                      102 - ACC Number
.                   Recompiled for changes to DADMDETS for item:
.                      134 - ACC Number
.         V9.09.08  28.08.2007 Jill Habasque      CAR 135539
.                   Added print ACC and HONOS
.         V9.09.07  15/08/2007 Mike Laming        CAR 131722
.                   Recompiled for PATSHT6 - add suburb to address lines
.         V9.09.06  09/08/2007 Peter Vela         CAR 147539
.                   Recompiled for WEBLBCOM
.         V9.09.05  01/08/2007 J.Tan              CAR 145438
.                   Recompiled for PATHFCF - New fields for Total Bedfee charges
.                   02/08/2007 J.Tan              CAR 145810
.                   Recompiled for PATHFCF - Credit notes
.                   01/08/2007 J.Tan              CAR 146650
.                   Recompiled for DXPATMAS - Blank health fund
.         V9.09.04  23/07/2007 Peter Vela         CAR 142913
.                   Changed GCCSJG00 to read indicator 2
.         V9.09.03  18/07/2007 Peter Vela         CAR 142173
.                   Added call to GCCSJG00 from Inpatient Stationery
.                   Template
.         V9.09.02  12/07/2007 Peter Vela         CAR 142913
.                   Added GCCSJG00 Get Concession card details for SJOG
.         V9.09.01  10/07/2007 Sandra Barcham     CAR 144845
.                   Fixed I * C on PATMI1A3
.         V9.08.26  30/05/2007  Mike Laming       CAR 125991
.                   Recompiled for PATCRDFD - New fields in file
.         V9.08.25  25/05/2007  Mike Laming       CAR 125991
.                   Recompiled for PATCRDFD - added Sing. Cancer Reg. fields
.         V9.08.24  03/05/2007  Jill Habasque     CAR 139238
.                   Recompiled for WEBLBCOM - wrist band labels
.         V9.08.23  28.04.2007  Peter Vela        CAR 139080
.                   Recompiled for PATHFCF - Removed validation for
.                   Accomodation Code and Daily rate from VALTR100
.         V9.08.22  20.04.2007  Peter Vela        CAR 129314
.                   Recompiled for PATSHT6 - Added Ward Description
.                   (WBDESC from Ward Record)
.         V9.08.21  10.04.2007  Peter Vela        CAR ??????
.                   Recompiled for PATHFCF
.         V9.08.20  10.04.2007  Peter Vela        CAR 124557
.                   Added stat temp variables for type 18 Theatre Form
.         V9.08.19  16.03.2007  Ebon Clements     CAR 135528
.                   Added allied health label functionality - LABELALL
.         V9.08.18  02.03.2007  Jill Habasque     CAR 124699
.                   Recompiled for LABELREF (added read of pmspx2af)
.         V9.08.17  02.03.2007  Ebon Clements     CAR 132645
.                   Recompiled for DXOUTREF and OUTPRLAB open file prefix bug
.         V9.08.16  27.02.2007  Jill Habasque     CAR 132645
.                   Moved call to OPNOUT00 to be before outbb1af read in
.                   outlabel
.         V9.08.15  26/02/2007  Peter Vela        CAR 124542
.                   Recompiled for PATHFCF
.         V9.08.14  23/02/2007  Peter Vela        CAR 124542
.                   Recompiled for PATHFCF
.         V9.08.13  06/02/2007  Neelkamal Pyla    CAR 120594
.                   Recompiled for PATSHT6 - Added NOK Relation and Title Desc
.         V9.08.12  05/02/2007  Peter Vela        CAR 124542
.                   Recompiled for PATHFCF
.         V9.08.11  01/02/2007  Peter Vela        CAR 124542
.                   Recompiled for PATHFCF
.         V9.08.10  31/01/2007  Peter Vela        CAR 127930
.                   Recompiled for EMRSITFD
.         V9.08.09  15/12/2006  J.Tan  CAR 127625
.                   Mods to JH HRN
.         V9.08.08  13/12/2006  J.Tan  CAR 127625
.                   Mods to JH HRN
.         V9.08.07  13/12/2006  J.Tan  CAR 127625
.                   Mods to JH HRN
.         V9.08.06  13/12/2006  Jill Habasque    CAR 127678
.                   Recompiled for WEBLBINP and PATSHT6
.         V9.08.05  27/11/2006  Steve Armstrong  CAR 126039
.                   Recompiled for changes to SGCHKDIG
.         V9.08.04  27/11/2006  Steve Armstrong  CAR 125800
.                   Recompiled for changes to WEBLBOUT
.         V9.08.03  23/11/2006  Steve Armstrong  CAR 125800
.                   Recompiled for changes to DXPATMAS, DADMDETS & DXOUTDET
.         V9.08.02  16.11.2006  Steve Armstrong   CAR 124160
.                   Recompiled for PATSHT6 (Singapore HRN)
.                   Added Singapore HRN for stationery templating (Canc. reg.)
.         V9.08.01  23.10.2006  Peter Vela        CAR 120622
.                   Recompiled for PATSHT6
.----------------------------------------------------------------------
.         V9.07.07  20.09.2006  Peter Vela        CAR 118225
.                   Recompiled for DXPATMAS
.         V9.07.06  08.09.2006  Peter Vela        CAR 118225
.                   Recompiled for DXPATMAS
.                   Added controlf reads to PTCNPFSN PTCNPFGN
.         V9.07.05  04.09.2006  Peter Vela        CAR 113181
.                   Recompiled for PATHFCF
.         V9.07.04  25.08.2006  Peter Vela        CAR 105060
.                   Recompiled for PATSHT6 - Added aboriginality code.
.         V9.07.03  04.08.2006  Ebon Clements     CAR 109958
.                   Changed LABELOUT98 for STV to print carer label to zebra
.         V9.07.02  14/07/2006  Mike Laming   CAR 112161
.                   Re-compile for PATHFCF - fix "Print Last Invoice"
.         V9.07.01  05.07.2006  Sandra Barcham    CAR 111267
.                   Fix I * C open icd10 v5 tables
.         V9.06.02  06/06/2006  Steve Armstrong   CAR 107577
.                   Recompiled for STV label changes in PATPRLAB & OUTPRLAB
.         V9.06.01  23/05/2006  Ebon Clements CAR 792776
.                   Print postal/pmi address on carer label if carer
.                   details blank
.----------------------------------------------------------------------
.         V9.05.04  29/03/2006  Peter Vela    CAR 95780
.                   Added EMG contact mobile numbers to cssd and cancer reg
.         V9.05.03  27/03/2006  Ebon Clements CAR 79277
.                   Recompiled for WEBLBOUT - Carer contact details
.         V9.05.02  24/03/2006  Peter Vela    CAR 61299
.                   Recompiled for PATHFCF
.                   Increased field no size from DIM3 to DIM5
.         V9.05.01  09/03/2006  Ebon Clements CAR 78533
.                   Mods for PATCODTM - Hospital specific category codes
.         V9.05.B04 20/02/2006  Ebon Clements     CAR 76341
.                   Added referral and encounter file audit
.         V9.05.B03 22/12/2005  Steve Armstrong   CAR 89599
.                   Recompiled for chanegs to WEBLBPMI
.         V9.05.B02 20/12/2005  Ebon Clements CAR 76341
.                   Key length changes for encounter number
.----------------------------------------------------------------------
.         V9.04.35  25/11/2005  J.Tan         CAR 85892
.                   Recompiled for PATHFCF - fixed MBS amount
.         V9.04.34  03/11/2005  Peter Vela    CAR 79842
.                   Recompiled for PATSHT6
.         V9.04.33  27/10/2005  Mike Laming   CAR 65745
.                   Recompiled for PATHFCF - fixes for Split Invoices
.         V9.04.32  04/10/2005  Peter Vela    CAR 60396
.                   Recompiled for PATSHT6
.         V9.04.31  23/09/2005  J.Tan         CAR 73899
.                   Recompiled for DXPATMAS - added field for GP Prac address
.         V9.04.30  12/09/2005  Mike Laming   CAR 62952
.                   Recompiled for WEBLBOUT -select Clinic Desc by Booking Date
.         V9.04.29  01/09/2005  Mike Laming    CAR 62428
.                   Re-compiled for PATHFCF & PATHFCVR - add vars & NEWBB000
.                   Also add PATLINFD etc
.         V9.04.28  23/08/2005  Peter Vela     CAR 70514
.                   Added read to pathspaf
.         V9.04.27  18/08/2005  Peter Vela     CAR 69456
.                   Recompiled for PATSHT6
.         V9.04.26  17/08/2005  Peter Vela     CAR 71773
.                   Recompiled for DADMDETS
.         V9.04.25  16/08/2005  Ebon Clements  CAR
.                   Recompiled for WEBLBOUT, WEBLBCOM
.         V9.04.24  12/08/2005  J.Tan      CAR 71717
.                   Recompiled for PATHFCF - missing MBS items
.         V9.04.23  10/08/2005  Peter Vela        CAR 58448
.                   Recompiled for WEBLBOUT, WEBLBCOM
.                   08/08/2005  Peter Vela        CAR 67204
.                   Added Theatre Stationery Variables:
.                   Clinic/Surgeon Address 1 - 6
.                   Clinic/Surgeon Telephone Number
.                   Clinic/Surgeon Fax Number
.                   Clinic/Surgeon Email Address
.                   Provider Number
.                   Clinic/Surgeon Pager Telephone Number
.                   Clinic/Surgeon Pager Number
.                   Clinic/Surgeon Mobile Number
.                   01/08/2005  Peter Vela        CAR 67204
.                   Recompiled for PATSHT6
.         V9.04.22  27/07/2005  Steve Armstrong   CAR 66545
.                   Recompiled for PATSHT6
.         V9.04.21  20/07/2005  J.Tan         CAR 68001
.                   Recompiled for PATHFCF
.         V9.04.20  19/07/2005  Peter Vela        CAR 63023
.                   Recompiled for PATSHT6
.         V9.04.19  22/06/2005  Peter Vela        CAR 64333
.                   Added read to patient master and pmi extension
.                   for outpatient labels OUTLAB07
.         V9.04.18  15/06/2005  Peter Vela        CAR 63549
.                   Added open for oprcliaf
.         V9.04.17  13/05/2005  Peter Vela        CAR 61776
.                   Recompiled for WEBLBOUT
.         V9.04.16  15/04/2005  Ebon Clements     CAR 60609
.                   Added scheduler description to CCSD form printing
.         V9.04.15  07/04/2005  Steve Armstrong   CAR 59639
.                   Recompiled for DXOUTREF
.         V9.04.14  23/03/2005  Peter Vela    CAR 56364
.                   Recompiled for WEBEMRDX
.         V9.04.13  16/03/2005  Lina Vo       CAR 56405
.                   Added Print Theatre Forms
.                   15/03/2005  Mike Laming   CAR 58448
.                   Recompiled for WEBLBOUT - fix Cr/Lf problem with Labels
.         V9.04.12  23/02/2005  Peter Vela CAR 54547
.                   Recompiled for PATHFCF
.         V9.04.11  24/01/2005  Peter Vela CAR 55331
.                   Recompiled for DXPATMAS
.         V9.04.10  11/01/2005  Lina Vo    CAR 50670
.                   Fixed Booking Label schedule description
.         V9.04.09  17/12/2004  Peter Vela CAR 55723
.                   Recompiled for PATHFCF
.         V9.04.08  20/12/2004  Ebon Clements  55406
.                   Added zebra asset label printing
.         V9.04.07  26/11/2004  Peter Vela CAR 55477
.                   Recompiled for PATHFCF
.                   Added includes for OPRARDFD
.         V9.04.06  26/10/2004  Ebon Clements CAR 54583
.                   Added calvary ACT pathology label LABELPLY01
.         V9.04.05  11/10/2004  Peter Vela    CAR 53464
.                   Added new variables to Cancer Registration stat template
.         V9.04.04  04/10/2004  Jill Habasque CAR 53798
.                   Recompiled for PRINTAAE - Approval number
.         V9.04.03  27/09/2004  J.Tan     CAR 53750
.                   Recompiled for PATHFCF - Check for credit note items
.         V9.04.02  21/09/2004  J.Tan
.                   Recompiled for DXPATMAS - added medicare expiry date
.         V9.04.01  03/09/2004  Jill Habasque
.                   Added move of iblpcopy to nocopies at main1200
.         V9.03.17  11/06/2004  Mike Laming   CAR 49016  July 2004 PRS/2
.                   - Add Sex Description routine SEXDSC00 with Code "R" -
.                   "Intersex" added
.         V9.03.16  27/05/2004  Peter Vela       CAR 48227
.                   Added VARGBCRN and PATGBCRN
.                   26/05/2004  Pat Dirito       CAR 50035
.                   Recompiled for PATHFCF & added var MVDAYS
.                   05/05/2004  Jill Habasque
.                   Fixed calling of RDCTRL000 if no outpatient sites exist
.         V9.03.15  29/03/2004  Mike Laming     CAR 45023
.                   Re-compile for PATHFCF - add code to test PTEOTYPE
.         V9.03.14  24/03/2004  Peter Vela      CAR 47681
.                   Added functionality to print out first cancer registration
.                   of an admission number.
.         V9.03.13  02/03/2004  Jill Habasque   CAR 47859
.                   Added read of OTCNAP12
.         V9.03.12  01/03/2004  Jill Habasque   CAR 47884
.                   Added error messages for outpatient labels
.         V9.03.11  19/02/2004  Jill Habasque   CAR 47526
.                   Recompiled for WEBBGRND
.         V9.03.10  16/02/2004  Ebon Clements   CAR 47525
.                   Changed Hawks Bay labels to branch to ZEBOUT00
.         V9.03.09  10/02/2004  Ebon Clements   CAR 47349
.                   Recompiled for ALLERCFD - Changed ALERNDIM to ALERNDIG
.                   09/02/2004  Sylvek Litewka  CAR 47000
.                   Modified procedure PRTLAB00 to add printing of Outpatient
.                   Referral Labels.
.         V9.03.08  23/12/2003  Peter Vela   CAR 37624
.                   Recompiled for DXOUTDET
.         V9.03.07  28/11/2003  Mike Laming  CAR 37514
.                   Recompiled for PATHFCF - add Disch Ind "Z"
.         V9.03.06  07/11/2003 Sylvek Litewka CAR 44328
.                   Recompiled for PATMMBFD changes.
.         V9.03.05  30/09/2003 Ebon Clements  CAR 43674
.                   Close files before opening in OPNOUT00
.         V9.03.04  11/09/2003 Jill Habasque
.                   Recompiled for DADMDETS (PMHCTITL changing SP70)
.         V9.03.03  25/08/2003 Ebon Clements CAR 42813
.                   Recompiled for EMRSITFD changes that were missing in V9 that
.                   had been made in 5.09 - EMSTDLOC
.                   20/08/2003  CAR 42308   Mike Laming
.                   Recompiled for PATHFCF - Fix printing MBS Items on 2nd
.                   page (also effects/fixes Accom. lines on page 2)
.         V9.03.02  12/08/2003 Sylvek Litewka  CAR 41293
.                   Removed procedures SAVPRO00,NXTSCH00,CLRSCS00 and REDPAR00.
.                   They have been replaced by code inserted into WEBPRTCD.PBL
.                   and IBAWEBCD.PBL. Added code to populate SCHEDDSC variable
.                   with description of document being printed.
.         V9.03.01  20/06/2003 Tonii CAR 39332 (SV135352)
.                   Added variables needed for GP labels used in OUTPRLAB
.                   Recompiled for OUTPRLAB
.----------------------------------------------------------------------
.         V9.02.48  26.03.2003  Pat Dirito       CAR 24088
.                   Added unlock of scheduler record.
.         V9.02.47  17/03/2003  Sylvek Litewka   SRF 37018
.                   Modified procedure ZEBOUT00 to populate ZEBRAFLG variable.
.                   This variable is used by OUTPRLAB.PBL to print the correct
.                   label.
.         V9.02.46  08/01/2003  Peter Vela  SRF 23145
.                   Added functionality to print Nutrition Labels for Current
.                   Event Inpatients
.         V9.02.45  04/12/2002  Tonii  SRF 33987
.                   Recompiled for PATHFCF
.                   12/11/2002  Guomin Fu   SRF 21995
.                   Recompiled for PATHFCF
.                   Fixed discharge code not printed correctly for deseased
.                   patient
.         V9.02.44  25/10/2002  Ebon Clements SRF 22413
.                   Removed CWEBTIMO
.         V9.02.43  18/10/2002  Ebon Clements SRF 23397
.                   Clear files in RCHLAB00 if visit number is blank
.         V9.02.42  16/10/2002  Ebon Clements SRF 23024
.                   Recompiled for WEBLBCAR - tab position for CAR labels
.         V9.02.41  23/09/2002  Jill Habasque SRF 22043
.                   Recompiled for PATSETLB
.         V9.02.40  20/09/2002  Peter Vela    SRF 17859
.                   Recompiled for PATHFCF
.         V9.02.39  09/09/2002  Peter Vela    SRF 17859
.                   Recompiled for PATHFCF
.         V9.02.38  06/08/2002  Ebon Clements SRF 19957
.                   Recompiled for WEBLBERC and WEBLBCAR for the service
.                   provider name
.         V9.02.37  01/07/2002  Bronko sosic
.                   Recompiled for DXPATMAS
.                   01/07/2002  Ebon Clements  SRF 18835
.                   Fixed match for LABELOUT99 for outpatient address labels
.         V9.02.36  01/07/2002  Bronko sosic
.                   Recompiled for DXPATMAS
.         V9.02.35  18/06/2002  Jill Habasque
.                   Added open of patinvrf
.         V9.02.34  25/05/2002  Bronko Sosic
.                   Fix Printing for patient Address Label
.         V9.02.33  22/04/2002  B.G.Ackland
.                   Fix Printing Forms
.         V9.02.32  22/04/2002  B.G.Ackland
.                   Fix Printing of Sex for STV PMI Label
.         V9.02.31  18/04/2002  Tonii
.                   Added printing of PMI labels for St Vincent's
.         V9.02.30  12/04/2002  Dean Cramer
.                   Recompile for PATSETLB
.         V9.02.29  11/04/2002  Dean Cramer
.                   Put overcond branches in ZEBRAL99 so non admitted
.                   patients do not print to label with data in error
.         V9.02.28  05/04/2002  Bronko Sosic
.                   Added new option to print Outpatient Address Labels
.         V9.02.27  03/04/2002  Bronko Sosic
.                   Added option to Print St V Address Labels
.         V9.02.26  27/03/2002  Ebon Clements
.                   Recompiled for WEBLBERC and WEBLBCAR
.         V9.02.25  14/03/2002  Tonii
.                   Added printing of Nutrition labels
.                   12/03/2002  J.Tan defect number 3374
.                   Recompiled for PATHFCF
.         V9.02.24  05/03/2002  Jill Habasque 3267
.                   Recompiled for PATSETLB
.         V9.02.23  13/02/2002  B.G.Ackland
.                   Fix Error Reporting
.         V9.02.22  10/02/2002  Jill Habasque
.                   Recompiled for PATSHT6
.         V9.02.21  07/02/2002  Bronko Sosic
.                   Added Printing of HFC Forms
.         V9.02.20  02/02/2002  Tonii
.                   Mods to read in PTCNUADT parameter
.                   Added new include for MBS items (PATMMBFD/PATMMBIO)
.                   Recompiled for PATSHT6
.         V9.02.19  30/01/2002  Tonii
.                   Recompiled for PATPRLAB,PATSETLB and RCHLABEL
.         V9.02.18  21/01/2002  Sai
.                   Recompiled for OPR013IO
.         V9.02.17  20/01/2002  Jill Habasque
.                   Added open of pati10df
.         V9.02.16  19/12/2001  Ebon Clements
.                   Recompiled for PATSHT6 - Head on unit doctor
.         V9.02.15  23/11/2001  Ebon Clements
.                   Mods for printing CAR labels
.         V9.02.14  16/11/2001  Ebon Clements
.                   Added option for printing CAR labels
.                   18/11/2001  Bronko Sosic
.                   Changed print of labels for RCH
.         V9.02.13  03/11/2001  Tonii
.                   - Fixed validation in OUTLABEL
.                   - Recompiled for PATPRLAB & OUTPRLAB
.         V9.02.12  31/10/2001  B.G.Ackland
.                   Fix Default Printer Settings
.         V9.02.11  30/10/2001  B.G.Ackland
.                   Fix Default Printer Settings
.         V9.02.10  26/10/2001  Tonii
.                   Recompiled for changes to PATSETLB
.         V9.02.09  19/10/2001  Bronko Sosic
.                   Changed Index Read on PATMI1FD
.         V9.02.08  19/10/2001  Mike Laming
.                   Recompile for PATSHEET
.         V9.02.07  16/10/2001  Bronko Sosic
.                   Changed the Variable PMSPX2FD was read with
.         V9.02.06  14/10/2001  Bronko Sosic
.                   Added var from PMSPX2FD PMSVX1FD For Form Printing
.         V9.02.05  10.10.2001  B.G.Ackland
.                   COMMIT Transaction Control
.         V9.02.04  05.10.2001  B.G.Ackland
.                   Trap OPEN for Emergency Files Not Used by all sites.
.         V9.02.03  13/09/2001  Bronko Sosic & 03.10.2001 B.G.Ackland
.                   Changed Form Printing so that you can spool Forms &
.                   COMMIT Transaction Control for WEBINT00.
.         V9.02.02  05/09/2001  Tonii
.                   Added subroutine RCHL0000 to print RCH labels
.         V9.02.01  14/08/2001  Bronko Sosic
.                   Added print ZEBRA Labels
.         V9.00.01  08/08/2001  Ebon Clements
.                   Added print ERC Labels
.         V5.10.B02 10/04/2001  Glenn Saunders
.                   Remove all references to PATSUR file (old surname file)
.         V5.10.B00 26/02/2001  J.Tan
.                   Recompiled for PATWMAFD
.         V5.08.02  16/08/2000  Caleb Sharman
.                   Changed Health Fund variables to be 8 chars
.         V5.08.01  08/08/2000  Steve Downing
.                   Recompiled for DXWATTRE
.         V5.07.06  23/02/2000  Greg Horvat      SRF 637565
.                   Recompiled for DADMDETS - Changes for 4 character DRGs
.         V5.07.05  28.01.2000  B.G.Ackland
.                   Recompile in Work
.         V5.07.04  10/01/2000  B.G.Ackland
.                   Compile for New Standards
.         V5.07.03  11/01/2000  Nicole Harrington
.                   Changed DXEMRDET to be WEBEMRDX in WEBLBEMR
.         V5.07.02  20/12/1999  Katie Nelson
.                   Recompiled for IBAWEBDF/IBAWEBCD
.         V5.07.01  01/11/1999  Katie Nelson
.                   Port from 6.06 to 5.07
.                   24/08/1999  Greg Horvat
.                   Recompiled for DADMDETS - Fixed I*C
.                   07/07/1999  Greg Horvat      99/00 PRS2 Mods
.                   Recompiled for DADMDETS - Changed to display contract vars
.                 V6.04.00 27.05.1998 Katie Nelson
.                          Modified skeleton server to be patient label server
.                 V6.04.00 11.02.1998 B.G.Ackland
.                          Created Skeleton Program
.
.----------------------------------------------------------------------
          INC       IBAWEBDF
          INC       EPSON/INC

..          INC       PATDINVS/INC
          INC       ALLCONFD/INC
          INC       AUPCDVAR/INC
          INC       PATHOSFD/INC
          INC       PATPR1FD/INC
          INC       IBATMDFD/INC
          INC       AAECONFD/INC
          INC       AAEDE1FD/INC
          INC       AAEGRCFD/INC
...       INC       AAECOTFD/INC
          INC       AAEDI1FD/INC
          INC       AAEAUXFD/INC
...       INC       AAERTAFD/INC
          INC       ACCDIAFD/INC        ***** new ACC Diagnosis Details FD
          INC       ACCCMTFD/INC        ***** new ACC Comments file
          INC       BOKRC1FD/INC
          INC       BOKRX1FD/INC
          INC       BOKDIAFD/INC
          INC       CHKDIGVR/INC
          INC       ELTRONVR/INC          * Eltron Printer Variables
          INC       EMRCONFD/INC   
          INC       EMRGRCFD/INC
          INC       EMRICDFD/INC
          INC       EMRLOCFD/INC
          INC       EMRSITFD/INC
          INC       EMRUNKFD/INC
          INC       EMRVISFD/INC
          INC       EMRVCDFD/INC
          INC       IBADLABS/INC
          INC       IBALPCFD/INC
          INC       NHIMASFD/INC
          INC       NZPSPRFD/INC
          INC       NHIETHFD/INC
          INC       OPLBVARS/INC
          INC       OPRARDFD/INC                                       *I-55477
          INC       OPRCONFD/INC
          INC       OPRCBDFD/INC            * Caesarean Birth Details
          INC       OPRDEAFD/INC
          INC       OPRSRGFD/INC
          INC       OPRPMBFD/INC
          INC       OPRJRRFD/INC
          INC       OPRPIMFD/INC
          INC       OPRPOCFD/INC
          INC       OPRPOCTD/INC
          INC       OPRSESFD/INC
          INC       OPRTHIFD/INC
          INC       OPRTSMFD/INC
          INC       OPRSDTFD/INC
          INC       OPRDECFD/INC
          INC       OPREXPFD/INC
          INC       OPRNURFD/INC                                       *I-56364
          INC       OPRSCRFD/INC
          INC       OPRCLIFD/INC
          INC       OPROPRFD/INC
          INC       OUTBOAFD/INC
          INC       OUTBB1FD/INC
          INC       OUTBOCFD/INC
          INC       OUTCONFD/INC
          INC       OUTCLIFD/INC
          INC       OUTCTYFD/INC
          INC       OUTDIAFD/INC
          INC       OUTXSCFD/INC     ******
          INC       OUTSITFD/INC
          INC       OUTSESFD/INC
          INC       OUTMA1FD/INC
          INC       OUTHEDFD/INC
          INC       OUTRF1FD/INC
          INC       MEHDLSFD/INC
          INC       MEHVI1FD/INC
          INC       MWALRVAR/INC
          INC       PATAXEFD/INC
          INC       PATASFFD/INC
          INC       PATCALAG/INC
          INC       PATCMCFD/INC
          INC       PATCONFD/INC
          INC       PATDADFD/INC
          INC       PATDO1FD/INC
          INC       PATDHEAD/INC
          INC       PATDGWFD/INC
          INC       PATELGFD/INC
          INC       PMSDTCFD/INC
          INC       PMSEEHFD/INC
          INC       PMSEEDFD/INC
          INC       PMSSESFD/INC
          INC       PMSSEDFD/INC
          INC       PMSERCFD/INC
          INC       PMSAILFD/INC
          INC       PMSFIDFD/INC
          INC       PATFN1FD/INC
          INC       PATGO1FD/INC
          INC       PMSAELFD/INC
          INC       PMSHCPFD/INC
          INC       PMSHCGFD/INC
          INC       PMSEVTFD/INC
          INC       PMSFCIFD/INC
          INC       PMSWORFD/INC
.
          INC       PATATRFD/INC
          INC       PATATRTD/INC
.***************************************  Start of AN-SNAP change     Car 273181
          INC       PMSUPGFD/INC
          INC       PMSAPGFD/INC
          INC       PMSPITFD/INC
          INC       PMSIMPFD/INC
          INC       PATFIMFD/INC
.***************************************  End of AN-SNAP change       Car 273181
          INC       PATHSPFD/INC
          INC       PATICOFD/INC
          INC       PATICDFD/INC
          INC       PATITMFD/INC
          INC       PATLINFD/INC            * UR Linkage Details       *I-62428
          INC       PATMA1FD/INC
          INC       PATMI1FD/INC
          INC       PATMCHFD/INC
          INC       PATMMBFD/INC     *** MBS codes file
          INC       PATNIDFD/INC
          INC       PATRE1FD/INC
          INC       PATTRNFD/INC
          INC       PATVADFD/INC
          INC       PATVISFD/INC
          INC       PATVKCFD/INC
          INC       PATWR1FD/INC
          INC       PATALRFD/INC
          INC       PMSALNFD/INC
          INC       PATCFAFD/INC
          INC       PATCRDFD/INC    * I CAR 47681
          INC       PATCRGFD/INC    * I CAR 47681
          INC       PATCUNFD/INC
          INC       PATDSCFD/INC
          INC       PATFX1FD/INC
          INC       PMSHCLFD/INC
          INC       PMSPX2FD/INC    ***
          INC       PMSVX1FD/INC    ***
          INC       PMSEXTFD/INC
          INC       PATIN1FD/INC
          INC       PATWC1FD/INC
          INC       PMSWX1FD/INC
          INC       PATWMAFD/INC
          INC       PATWVEFD/INC
          INC       TFILEVAR/INC
          INC       WATCONFD/INC
          INC       WATTR1FD/INC
          INC       WATTX1FD/INC
          INC       WATRTDFD/INC
          INC       SCRPSTFD/INC
          INC       SCRSBGFD/INC
          INC       SCRSLTFD/INC
          INC       SCRMASFD/INC
          INC       ALLCASFD/INC
          INC       ALLDIAFD/INC
          INC       ALLREFFD/INC
          INC       ALLERCFD/INC
          INC       ALLENCFD/INC
          INC       ALLPRRFD/INC
          INC       ALLEQUFD/INC
          INC       MEHHONFD/INC
          INC       PMSDUNFD/INC
          INC       PATINVFD/INC
          INC       VARGBCRN/INC                                        *I-48227
          INC       PMSCEXFD/INC
          INC       PMSCCDFD/INC
          INC       PMSRELFD/INC
          INC       PMSTLEFD/INC
          INC       PMSDIVFD/INC
          INC       PMSTEMFD/INC
          INC       PATHGPFD/INC
          INC       PATQMHFD/INC
          INC       PMSIHIFD/INC            * IHI Details
          INC       PMSEDGFD/INC       * Effective DRG Dates
          INC       PATMISTD/INC
          INC       VISMDTFD/INC
          INC       VISMTXFD/INC
          INC       WEBEEHFD/INC
          INC       WEBEEDFD/INC
          INC       WEBERCFD/INC
          INC       WEBSESFD/INC
          INC       WEBSEDFD/INC
.
. ----- Program Variables -----
ZED30     INIT      "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"
HFCFDTE   DIM       8                       * Int'm date from (CCYYMMDD)I-90208
HFCFINVN  DIM       8                       * Save last invoice number *I-90208
HFCTDTE   DIM       8                       * Invoice Date to          *I-65745
.
INVFLAG   FORM      1                                                  *I-90208
IMPLCNTR  FORM      1
IMPLRETN  FORM      1
IMPLTYPE  DIM       1
IMPLSUBT  DIM       1
.
MBINVFLG  FORM      1                       * Is item on invoice? (0=Yes/1=No)
DAYCLAIM  FORM      6[4]
DTRIDESC  DIM       30
DTRDATE   DIM        8
DTRITEM   DIM        9
DTRAMTT   FORM      12.2
DAYSDIFF  FORM       2
MAXSEPDY  FORM      "35"
SAVFIL8   DIM       8
SAVKEY8   DIM       8
SAVKEY10  DIM       10
SAVKY30B  DIM       30
SENDLETT  INIT      "SendAdmissionLetter"
SKEY10    DIM       10
AMBERSND  INIT      "\&"
A8DATE    DIM       8
ACDESC    DIM       20
ACCEPT    FORM      1
ADDRLN    DIM       57
ADIAG     DIM       50
ADMSRC    DIM       19
ADMTYPE   DIM       20
ADOCDESC  DIM       22
ANSLI     INIT      "i"
ANSLW     INIT      "w"
HDOCDESC  DIM       22
AEDATE    DIM       8
AEDESC    DIM       20
AEDOCNAM  DIM       22
AEDOCT    DIM       13
AEINSUR   DIM       5
AEMODE    DIM       3
AENUMB    DIM       8
AEPREV    DIM       3
AESEEN    DIM       3
AESIT     DIM       3
AESRC     DIM       3
AETIME    DIM       5
AEURNO    DIM       8
AWRDBED   DIM       7
BCCERCNT  FORM      1
BCCERINB  DIM       1
BCCERINC  DIM       1
DOCTCODE  DIM       6
TEMPOUTN  DIM       8
TEMPURNO  DIM       8
SAVD5     DIM       5
SAVD50    DIM       50
SKIPFLAG  FORM      1
SAVDATE   DIM       8
.
B8DATE    DIM       8
BOKSTAT0  INIT      "Booked"
BOKSTAT1  INIT      "Pre-Admitted"
BOKSTAT2  INIT      "Cancelled"
BOKSTAT3  INIT      "Admitted"
BOKSTAT4  INIT      "Discharged"
.
CHGCONTR  FORM      1
CALDAYS   FORM      3
CARECLS   DIM       20
CATap     INIT      "ap"
CATdv     INIT      "dv"
CATTC     INIT      "tc"
CATCR     INIT      "cr"
CATHP     INIT      "HP"
CATLS     INIT      "LS"
CATOS     INIT      "Os"
CATOU     INIT      "Ou"
.**************************************  Start of AN-SNAP change      Car 273181
CALCDAYS  FORM      4                  * Rehab Suspension Days for Interruption
FIMSCORD  DIM       3                  * FIM Score calculation
FIMSCORE  FORM      3                  * FIM Score calculation
RINTCNTR  FORM      1                  * Interruption Number Counter
RINTINDC  FORM      1                  * Interruption Number Indicator
TOTALSDS  FORM      4                  * Total Suspension Days
TOTALSOC  FORM      4                  * Total Suspension Occurrences
TRHSUSOC  DIM       1                  * Only Calc Suspension Occurrences
SAVKEY23  DIM       23                 * PMSUPGAF key
.
CATARLC   INIT      "ar"
CATASLC   INIT      "as"
CATKDUC   INIT      "KD"
CATM1LC   INIT      "m1"
CATM2LC   INIT      "m2"
CATPWLC   INIT      "pw"
CATPXLC   INIT      "px"
CATPYLC   INIT      "py"
CATPZLC   INIT      "pz"
CATRALC   INIT      "ra"
CATRBLC   INIT      "rb"
CATRDLC   INIT      "rd"
CATRELC   INIT      "re"
CATRGLC   INIT      "rg"
CATRZUC   INIT      "RZ"
CATTQLC   INIT      "tq"
.***************************************  End of AN-SNAP change       Car 273181
CDEFPRT2  DIM       3
CFNAMEW   DIM       8                       * file name for comments
CKACTIVE  FORM      1
CKLINKED  FORM      1
CLAIMCOD  DIM       3
CLDESC    DIM       20
CLMDET1   DIM       50
CLMDET2   DIM       50
CONTTYPE  DIM       1
CONTTYP2  FORM      1
CMDLINE   DIM       127       * Command line instruction
COUNT     FORM      1
COUNTRY   DIM       12
COUNTRY1  DIM       20
CURRROW   FORM      3
CPPAPER1  FORM      2                       * for Labels
CPPAPER2  FORM      2                       * for identification forms
COCNUSE   FORM      1
CLIND     DIM       1
.
D8DATE    DIM       8
DALERG    DIM       3
DANS1     DIM       20
DCASE     DIM       3
DCATE     DIM       1
DCENT1    DIM       2
DCENT2    DIM       2
DCLASS    DIM       1
DDAY1     DIM       1
DDAY2     DIM       1
DESCH1    DIM       15
DESCH2    DIM       15
DESCH3    DIM       15
DFUND     DIM       20
DFNAME    DIM       60
DIM1A     DIM       1
DIM1B     DIM       1
DIM1C     DIM       1
DIM4A     DIM       4
DIM4B     DIM       4
DIM4C     DIM       4
DIM22     DIM       22
DIM26     DIM       26
DIM35     DIM       35
DIM40     DIM       40
DIM60ZA   DIM       60
DIM60ZB   DIM       60
DIM60ZC   DIM       60
DIM80     DIM       80
DIMZ8     DIM       8
DIMZ20    DIM       20
DMON1     DIM       1
DMON2     DIM       1
DOCCODE   DIM       6
DPSTAT    DIM       24
DRGVER    DIM       3
DSCDEST   DIM       19
DSCPFLAG  FORM      1
DSCSTAT   DIM       20
DSSEX     DIM       8                                         * was 6  *C-49016
DSMOKE    DIM       3
DSNAMEA   DIM       20
DTYPE     DIM       20
DTRTDATE  DIM       8
DTRTCENT  DIM       8
DTRTYEAR  DIM       8
DTRTMNTH  DIM       8
DTRTTDAY  DIM       8
.
DTRDDATE  DIM       8
DTRDCENT  DIM       8
DTRDYEAR  DIM       8
DTRDMNTH  DIM       8
DTRDTDAY  DIM       8
DYEAR1    DIM       1
DYEAR2    DIM       1
.
EMADD1    DIM       25                      * Employer address line 1
EMADD2    DIM       25                      * Employer address line2
EMNAME    DIM       20                      * Employer Name
EMPOST    DIM       4                       * Employer Postcode
EMSUBR    DIM       15                      * Employer Suburb
EMTELEP   DIM       12                      * Employer Private Telephone
.
FIELDNO   FORM      5
FLAG6ERR  FORM      1
FNDESC    DIM       22
FOLLOWUP  FORM      1
FORM1A    FORM      1
FORM1B    FORM      1
FORM12P2  FORM      12.2
FORM62    FORM      6.2
FORM6P2   FORM      6.2
FORM5     FORM      5
FORM5E    FORM      5
FORM62A   FORM      6.2
FORMTYP1  INIT      "Knee"
FORMTYP2  INIT      "Hip"
FORMTYP3  INIT      "Multi Joint"
FORMTYP4  INIT      "Spine"
FORMTY31  INIT      "Shoulder"
FORMTY32  INIT      "Elbow"
FORMTY33  INIT      "Wrist"
FORMTY34  INIT      "Ankle"
FUNDESC   DIM       30
FDTRTDAT  FORM      8
FDTRDDAT  FORM      8
FIRSTCH   FORM      1
FSTDATE   FORM      8
.
ALRTDESC  DIM       20
WRKDTE8   DIM       8
WRKDTE10  DIM       10
WORKCATG  DIM       2
WORKVAR   DIM       100 
.
HCPDATFL  FORM      1
HCSADM    DIM       4
HCSCAT    DIM       4
HCSINS    DIM       4
HCSMAR    DIM       4
HCSRAC    DIM       4
HCSREG    DIM       4
HCSSRC    DIM       4
HCSTRY    DIM       4
HCSTYP    DIM       4
HCSU2     DIM       4
HDIM4     DIM       4
HFPORT    FORM      6.2
HIGH14    DIM       4
HIGH24    DIM       4
HIGH34    DIM       4
HMLBMESG  DIM       20
.HFCFINVN  DIM       8
.
IHINUMBR  DIM       20                      * IHI Number
IND1AI    DIM       1
INPUTNO   FORM      6
INSIND    DIM       1
.
JREGFORM  DIM       2
JYEAR     FORM      2
.
KEY21A    DIM       21
KEY26A    DIM       26
KEYFIELD  DIM       127
.
LANGUSED  DIM       20
LASTROW   FORM      3
LINE80    DIM       80
.
OECWINDC  FORM      1
.
MADESC    DIM       3
MARITAL   DIM       10
MARITAL1  DIM       20
MAXDISC   FORM      6.2
MDIM3     DIM       3
MHCNUSE   FORM      1
MODE      DIM       2
MODE4     DIM       4
MULTILIN  FORM      1
.
MBIRURNO  DIM       8
MBIRTYOR  DIM       24
.
NOKADDR   DIM       57
NETTOT    FORM      6.2
.
ORIGVISI  FORM      4
.
PRNTEXTN  INIT      ".prt"
PRNTSTRT  FORM      3
PRIDSYET  FORM      1
.
QADD1     DIM       25
QADD2     DIM       25
QBDATE    DIM       6
QGNAME    DIM       20        **ns**
QLOCDOC   DIM       30
QMEDI     DIM       10
QOCCUP    DIM       14
QPOST     DIM       4
QSAGE     FORM      3
QSEX      DIM       1
QSNAME    DIM       20        * PATMA1FD.PBL
QSUBRB    DIM       15
QTELEP    DIM       12
QTITL     DIM       4         **ns**
.
RTAOVRCD  FORM      1
RDOCTEL   DIM       12
RDOCFAX   DIM       12
RDOCADD1  DIM       29
RDOCADD2  DIM       29
RDOCADD3  DIM       15
RDOCPCOD  DIM       4
REGDESC   DIM       20
RELIGN    DIM       20
RESADDR   DIM       57
.
SAVEVIS   DIM       8                       * save A&E number
SAVNPNA   FORM      3
SAVTYP    DIM       3
SCCOL     FORM      3
SEXIND    DIM       1
SIT4      DIM       4
SRC4      DIM       4
SVSTNCOD  DIM       6
SUPRSQST  FORM      1
SVERT     FORM      2
SUBSYSKY  DIM       50
SCHDPRNT  DIM       6
SCHDCOPY  FORM      3
STATNCOD  DIM       6       * Sationary Code
FREETXT1  DIM       40
FREETXT2  DIM       40
FREETXT3  DIM       40
FREETXT4  DIM       40
FREETXT5  DIM       40
FREETXT6  DIM       40
FREETXT7  DIM       40
.
TABDESC   DIM       30
TBLDESC   DIM       16
.
U1DESC    DIM       20
U1QATB    DIM       3
U2DESC    DIM       20
.
VARIABLE  DIM       127
VADESC    DIM       3
.
WADIM6    DIM       6
WCDESC    DIM       3
WCNAME    DIM       20
WDATE1    DIM       8
WDATE2    DIM       8
WDIM3     DIM       3
WEBFLAG   FORM      "1"                     *Using web server - yes
.
XDAY1     DIM       2
XMON1     DIM       2
XYEAR1    DIM       2
XCENT1    DIM       2
XAGE      DIM       3
XWKAGE    DIM       2
.
YESDFLTS  FORM      1
.
ZEBRAFLG  FORM      1                 * 1 = yes, 0 = no
ZOPTION   FORM      2
.
. bronko
.
. * I-90301, variables needed by OUTPRLAB for CAR 39332
.
ENDSTR    FORM      2
PRTOPT1   FORM      1
PRTOPT2   FORM      1
TMPPTR    FORM      2
TODAY     DIM       8
DIM60     DIM       60
. * I-90301, end
.
CLMCDALL  FORM      1                       * Claim code type
CLAMCODE  DIM       3                       * Claim code
CURRDAT8  DIM       8                       * Current date (CCYYMMDD)
.
DAYCASE   FORM      1                       * Day case type
DDRGCODE  DIM       4
DMDCCODE  DIM       4
DIM16     DIM       16
DISPFLAG  FORM      1
DTGTNTRD  FORM      1                       * Dont get next
.
EOSFLG    FORM      1                       * End of string flag for health fund
.
FINIDAT8  DIM       8                       * Finish date (CCYYMMDD)
FORM8     FORM      8
.
HELFDALL  FORM      1                       * Health fund type
HELTHFND  DIM       6                       * Health fund
HFCFCONT  FORM      3                       * Counter of records printed
MVDAYS    FORM      4                       * mechanical ventilation days
.
SAVCONTR  DIM       6
STRTDAT8  DIM       8                       * Start date (CCYYMMDD)
SAVKEY30  DIM       30
FORM6     FORM      6
TODATE    DIM       8
FROMDATE  DIM       8
FORM82    FORM      8.2
CATAC     INIT      "AC"
CATDD     INIT      "DD"
CATKN     INIT      "KN"
CATU1     INIT      "U1"
CATU2     INIT      "U2"
CATU3     INIT      "U3"
CATU4     INIT      "U4"
CATU5     INIT      "U5"
CATVI     INIT      "VI"
NBRDAYS   FORM      4
.
. ----- Program Constants -----
.
XCOMMW    FILE      ASCII, FIXED=70              * wokring temp file
HUNDRED2  FORM      "102"
HUNDRED3  FORM      "103"
HUNDRED4  FORM      "104"
HUNDRED5  FORM      "105"
SCHDFLNO  FORM      8
.
ALLCODES  INIT      "All Codes"
ALLHELFD  INIT      "All Health Funds"
ANSCA     INIT      "CA"
.
ZPRINTER  INIT      "850"
CODELA    INIT      "LA"
CODELHS   INIT      "hs"
CODELHP   INIT      "hp"
CODELHF   INIT      "hf"
CODELHC   INIT      "hc"
CODELSS   INIT      "ss"
CODELHT   INIT      "ht"
CODELHM   INIT      "hm"
CODEDX    INIT      "DX"
CODEVA    INIT      "VA"
CODEPV    INIT      "PV"
CODEVB    INIT      "VB"
CODEVR    INIT      "VR"
CODEVI    INIT      "VI"
CODEVJ    INIT      "VJ"
CODEVK    INIT      "VK"
CATDO     INIT      "DO"
CODEAC    INIT      "AC"
CODEBT    INIT      "BT"
CODEC     INIT      "C "
CODECC    INIT      "CC"
CODED     INIT      "D "
CODEDA    INIT      "DA"
CODEDC    INIT      "DC"
CODEDD    INIT      "DD"
CODED1    INIT      "D1"
CODED2    INIT      "D2"
CODED3    INIT      "D3"
CODED4    INIT      "D4"
CODED5    INIT      "D5"
CODEEG    INIT      "EG"
CODEH1    INIT      "H1"
CODEH2    INIT      "H2"
CODEH3    INIT      "H3"
CODEIO    INIT      "IO"
CODEIM    INIT      "IM"
CODEIB    INIT      "IB"
CODEIF    INIT      "IF"
CODEIH    INIT      "IH"
CODEIX    INIT      "IX"
CODEIP    INIT      "IP"
CODEIQ    INIT      "IQ"
CODEIJ    INIT      "IJ"
CODEIK    INIT      "IK"
CODEP     INIT      "P "
CODEP2    INIT      "P2"
CODEP3    INIT      "P3"
CODEP4    INIT      "P4"
CODEP5    INIT      "P5"
CODEP6    INIT      "P6"
CODER     INIT      "R "
CODES     INIT      "S "
CODET     INIT      "T "
CODETLA   INIT      "Ta"
CODEU2    INIT      "U2"
CODEU3    INIT      "U3"
CODEU4    INIT      "U4"
CODEU5    INIT      "U5"
CODEU6    INIT      "U6"
CODEU7    INIT      "U7"
CODEV6    INIT      "V6"
CODEV7    INIT      "V7"
CODEV8    INIT      "V8"
CODEXM    INIT      "XM"
CATAE     INIT      "AE"
CATAI     INIT      "AI"
CATAR     INIT      "AR"
CATLA     INIT      "LA"
CATC      INIT      "C "
CATW0     INIT      "w0"
DASH      INIT      "-"
.
FIVE9     FORM      "59"
.
SP11      INIT      "           "
SP27      INIT      "                           "
SP100     INIT      "                                                  ":
                    "                                                  "
STAT6     INIT      "In Hospital         "
STAT7     INIT      "On Short Term Leave "
STAT8     INIT      "On Trial Leave      "
STAT9     INIT      "On Holiday Leave    "
STAT10    INIT      "A.W.O.L.            "
STAT11    INIT      "Discharged          "
.
.
X1        INIT      "X"
X2        INIT      "XX"
X3        INIT      "XXX"
X4        INIT      "XXXX"
X5        INIT      "XXXXX"
X10       INIT      "XXXXXXXXXX"
X15       INIT      "XXXXXXXXXXXXXXX"
X20       INIT      "XXXXXXXXXXXXXXXXXXXX"
X25       INIT      "XXXXXXXXXXXXXXXXXXXXXXXXXX"
X30       INIT      "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
X100      INIT      "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX ":
                    "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX "
X27       INIT      "XXXXXXXXXXXXXXXXXXXXXXXXXXX"
.
ZED10     INIT      "zzzzzzzzzz"
Z30       INIT      "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"
ZERO4     INIT      "0000"
ZERO8     INIT      "0000    "
.
. Calvary ACT pathology label constants
.
COLLDATE  INIT      "Collect Date:"
COLLTIME  INIT      "Collect Time:"
DASHSTRN  INIT      "-------------------------------"
DATSTRNG  INIT      "^FD"
EMERDEP1  INIT      "Emergency"
EMERDEP2  INIT      "Department"
ENDSTRNG  INIT      "^FS"
ETC       INIT      "^XZ"
THOUSND4  FORM      "4000"
TWOHUND   FORM      "200"
.HUND25    FORM      "125"
.HUND30    FORM      "130"
HUND50    FORM      "150"
HUND55    FORM      "155"
HUND85    FORM      "185"
HUND70    FORM      "170"
LABLHOME  INIT      "^LH"
LABLWIDT  INIT      "^PW"
POSSTRNG  INIT      "^FO"
TWOHND30  FORM      "230"
QTYSTRNG  INIT      "^PQ"
STRFONT   INIT      "^A"
STX       INIT      "^XA"
.
ATT       DIM       80         * attribute string
AFTDECP   FORM      2          * After Decimal Place
AFTDECPF  FORM      2          * After Decimal Place Format String
.
BEFDECP   FORM      2          * Before Decimal Place
BEFDECPF  FORM      2          * Before Decimal Place Format String
.
CFILEPRE  DIM       3   * Current Open File Prefix for Outpatient Files
CASEKEYS  DIM       28
CHG       FORM      1
.
DECIMALP  INIT      "."
DIM3A     DIM       3
DIM8      DIM       8
DIM12     DIM       12
.
EMRFLAG   FORM      "1"
.
FORM3     FORM      3
FORM21    FORM      21
FORM2A    FORM      2
FORMAT21  FORM      21
FORMACTN  DIM       6
.
LABELATT  DIM       80[24]
LABELDAT  DIM       80[24]
LABELTYP  DIM       10
LLCNT     FORM      5
LEFTBRAK  INIT      "("
.
NMPNUMB   DIM       20
.
PRINTVAR  DIM       80
.
SBWINDOW  FORM      1
SCRID     DIM       2
SECINT    FORM      1
.
WAITTIME  FORM      4
WAITKEYS  DIM       19
.
.         WORK VARIABLES
.
DIM3      DIM       3
DIM5      DIM       5
DIM6      DIM       6
DIM7      DIM       7
DIM9      DIM       9
DIM10     DIM       10
DIM11     DIM       11
DIM14     DIM       14
DIM15     DIM       15
DIM18     DIM       18
DIM20     DIM       20
DIM25     DIM       25
DIM33     DIM       33
.
CFPAYCOD  DIM       3        * 3M Codefinder PAY Code
.
.
.         constants
.
CODEA     INIT      "A "
CODECL    INIT      "CL"
CODEM     INIT      "M "
CODEP1    INIT      "P1"
CODEU1    INIT      "U1"
CODECV    INIT      "CV"
CODEO5    INIT      "O5"
CODEO6    INIT      "O6"
CODEO7    INIT      "O7"
CODEO8    INIT      "O8"
SP12      INIT      "            "
SP13      INIT      "             "
SP14      INIT      "              "
SP18      INIT      "                  "
SP80      INIT      "                                   ":
                    "                                             "
CODEAA    INIT      "AA"
CODEAE    INIT      "AE"
CODEAI    INIT      "AI"
CODEAP    INIT      "AP"
CODEAR    INIT      "AR"
CODEA1    INIT      "A1"
CODEA2    INIT      "A2"
CODEA3    INIT      "A3"
CODEA4    INIT      "A4"
CODEA5    INIT      "A5"
CODEA6    INIT      "A6"
CODEA7    INIT      "A7"
CODEA8    INIT      "A8"
CODEBC    INIT      "BC"
CODEEA    INIT      "EA"
CODEED    INIT      "ED"
CODEEP    INIT      "EP"
CODEES    INIT      "ES"
CODEEW    INIT      "EW"
CATEA     INIT      "ea"
CATEB     INIT      "eb"
CATEC     INIT      "ec"
CATED     INIT      "ed"
CATEE     INIT      "ee"
CATEF     INIT      "ef"
CATEG     INIT      "eg"
CATEH     INIT      "eh"
CATEI     INIT      "ei"
CATEJ     INIT      "ej"
CATEK     INIT      "ek"
CATEL     INIT      "el"
CATEM     INIT      "em"
CATEN     INIT      "en"
CATEO     INIT      "eo"
CATEP     INIT      "ep"
CATEQ     INIT      "eq"
CATER     INIT      "er"
CATES     INIT      "es"
CATET     INIT      "et"
CATEU     INIT      "eu"
CATEV     INIT      "ev"
CATEW     INIT      "ew"
.
OSQBRACK  INIT      "["
CSQBRACK  INIT      "]"
TABOCTAL  INIT      011                * TAB character (Octal form)
.
.         CONTROLF FILE VARIABLES
.
PTCNLABT  FORM      2                       * extra label types 10-
PTCNPLB1  FORM      1
.
.----------------------------------------------------------------------
PRGID     INIT      "PATWEB70"
VERSION   INIT      "V12.00.05"
PRGNAM    INIT      "Patient Label Server"
.----------------------------------------------------------------------
.
          CALL      WEBINT00       * Initialise Fifo Etc.
.
          CALL      INIT0000       * Open Files
.
MAIN0000  COMMIT                   * Match BEGIN in WEBINT00 for Transactions
.
          BEGIN
.
          DISPLAY   *W5
          PACK      KEY5,SP70
          CALL      RSIBLPC1
MAIN1000  CALL      RKIBLPC1
          BRANCH    OVRCD,MAIN0000
.
          MOVE      IBLPSCHE,KEY5
          CALL      RLIBLPC1
          BRANCH    OVRCD,MAIN0000,MAIN1000
.
          MOVE      IBLPSCHE,KEY5
          CALL      DEIBLPC1
.
          CALL      CLRPAR00
.
          MOVE      IBLPURNO,URNUMBER
          MOVE      IBLPVISN,ADMISSNO
          MOVE      IBLPPRNT,SELPRINT
          IF        CTYPLAB = 26
            IF        IBLPCOPY <= 24
              MOVE      ONE,NOLABEL
            ELSE
              ASSIGN    IBLPCOPY/24,NOLABEL
              ADD       ONE,NOLABEL
            ENDIF
            MOVE      ONE,NOCOPIES    * No copies always 1 to avoid printing
            MOVE      IBLPCOPY,VALUE  * multiple pages when printing RCH labels
          ELSE
            MOVE      IBLPCOPY,NOLABEL
            MOVE      ONE,NOCOPIES    * No copies always 1 to avoid printing
.           MOVE      IBLPCOPY,NOCOPIES
          ENDIF
.
          MOVE      IBLPRUID,KEY10
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      SP70,PASSCODE
          ELSE
            MOVE      WBSEPCD,PASSCODE
          ENDIF
.
          PACK      LABELTYP,IBLPLAPR,IBLPLASC,SP70
          MOVE      IBLPFRE1,FREETEXT
          MOVE      IBLPSTAT,STATNCOD
.
          MATCH     SP70,STATNCOD
          IF        !@EQUAL
            MOVE      TWO,F1           * Print Form
            MOVE      TWO,REPORTNO           * Print Form
          ELSE
            MOVE      ONE,F1           * Print Label
            MOVE      ONE,REPORTNO           * Print Label
          ENDIF
.
          PACK      CURRDATE,CCC,CYY,CMM,CDD
          REP       " 0",CURRDATE
.
          BRANCH    F1,MAIN1100,MAIN1200
          GOTO      MAIN9000
.
MAIN1100  CALL      PRTLAB00                * Print Patient Labels
          GOTO      MAIN9000
.
MAIN1200  MOVE      IBLPCOPY,NOCOPIES
          CALL      PRTFRM00                * Print Forms
          GOTO      MAIN9000
.
MAIN9000  PACK      KEY5,SP70
          CALL      RSIBLPC1
.
          COMMIT
.
          BEGIN
.
          GOTO      MAIN1000
.------------------------------------------------------------
. Log Printing Error to Web Error Log
.------------------------------------------------------------
PRTERR00  CLOCK     TIME,CTIMEIS
          MOVE      "PATWEB70",PRGID
          PACK      KEY24,PRGID,CCC,CYY,CMM,CDD,CTIMEIS,SP70
          REP       " 0",KEY24
          CALL      RDWBER1
          IF        OVRCD=0
            GOTO      PRTERR99
          ENDIF
          UNPACK    KEY24,WBERPID,WBERDAT,WBERTIM
          MOVE      WEBTITLE,WBERERR
          MOVE      USERID,WBERUID
          MOVE      REPORTNO,WBERREP
          MOVE      TEMPLATE,WBERTMP
          MOVE      URNUMBER,WBERURN
          MOVE      ADMISSNO,WBERVIS
          MOVE      PRGERRCT,F3
          MOVE      F3,WBERCNT
          MOVE      SP70,WBERSPA
.
          MOVE      ZERO,OVRCD
          TRAP      OVERCOND IF IO
          CALL      WRWBER1
          TRAPCLR   IO
.
PRTERR99  RETURN
.------------------------------------------------------------
.  Print Patient Label
.------------------------------------------------------------
PRTLAB00  UNPACK    LABELTYP,DIM5,DIM3,DIM2
.
..          MATCH     "AAE",DIM3
..          IF        @EQUAL
..            PROC      LABELAAE
..            GOTO      PRTLAB99
..          ENDIF
.
          MATCH     "BOK",DIM3
          IF        @EQUAL
            MOVE     "Booking Label Printing",SCHEDDSC
            PACK      CASEKEYS,IBLPSKEY
            PROC      LABELBOK
            GOTO      PRTLAB99
          ENDIF
.
..          MATCH     "EMR",DIM3
..          IF        @EQUAL
..            PROC      LABELEMR
..            GOTO      PRTLAB99
..          ENDIF
.
          MATCH     "INP",DIM3
          IF        @EQUAL
            MOVE     "Inpatient Label Printing",SCHEDDSC
            IF       CTYPLAB = 25
              CALL     ZEBRAL00
              GOTO     PRTLAB99
            ENDIF
            MATCH    "LABELINP01",LABELTYP
            IF       @EQUAL
              IF       CTYPLAB = 27
                CALL     SJOGLB00
                GOTO     PRTLAB99
              ENDIF
            ENDIF
            PROC     LABELINP
            GOTO     PRTLAB99
          ENDIF
.
          MATCH     "NUT",DIM3
          IF        @EQUAL
            MOVE     "Nutrition Label Printing",SCHEDDSC
            IF       CTYPLAB = 25
              IF       PTCNNULB <> 0
                CALL     NUTRLB00
                GOTO     PRTLAB99
              ENDIF
            ENDIF
          ENDIF
.
         MATCH     "ADD",DIM3
          IF        @EQUAL
            MOVE     "Address Label Printing",SCHEDDSC
            IF       CTYPLAB = 25
              CALL     ADDRSS00
              GOTO     PRTLAB99
            ENDIF
          ENDIF
.
         PACK      SAVD5,DIM3,DIM2     * Address Label for OUT patients
         MATCH     "OUT99",SAVD5
         IF        @EQUAL
           MOVE     "Outpatent Address Label Printing",SCHEDDSC
           IF       CTYPLAB = 25
             CALL     ADDRSS00
             GOTO     PRTLAB99
           ENDIF
          ENDIF
.
         PACK      SAVD5,DIM3,DIM2     * Carer Label for OUT patients at STV
         MATCH     "OUT98",SAVD5
         IF        @EQUAL
           MOVE     "Outpatent Carer Label Printing",SCHEDDSC
           IF       CTYPLAB = 25
             CALL     CARESS00
             GOTO     PRTLAB99
           ENDIF
          ENDIF
.
          MATCH     "OUT",DIM3
          IF        @EQUAL
            MOVE      "Outpatient Label Printing",SCHEDDSC
            PACK      CASEKEYS,IBLPSKEY,SP70
            CALL      OUTLABEL
            GOTO      PRTLAB99
          ENDIF
.
          MATCH     "REF",DIM3
          IF        @EQUAL
            MOVE      "Referral Label Printing",SCHEDDSC
            CALL      REFLABEL
            GOTO      PRTLAB99
          ENDIF
.
          MATCH     "PMI",DIM3
          IF        @EQUAL
            MOVE      "PMI Label Printing",SCHEDDSC
            IF        CTYPLAB = 25
              CALL      STVPMI00
              GOTO      PRTLAB99
            ENDIF
.
            IF        CTYPLAB = 26
              CALL      RCHLAB00
              GOTO      PRTLAB99
            ENDIF
.
            PROC      LABELPMI
            GOTO      PRTLAB99
          ENDIF
.
          MATCH     "WAT",DIM3
          IF        @EQUAL
            MOVE      "Waiting List Label Printing",SCHEDDSC
            PACK      WAITKEYS,IBLPSKEY
            PROC      LABELWAT
            GOTO      PRTLAB99
          ENDIF
.
          MATCH     "ALL",DIM3
          IF        @EQUAL
            MOVE      "A/H Label Printing",SCHEDDSC
            PROC      LABELALL
            GOTO      PRTLAB99
          ENDIF
.
          MATCH     "ERC",DIM3
          IF        @EQUAL
            MOVE      "ERC Label Printing",SCHEDDSC
            MOVE      IBLPCOPY,NOLABEL
            MOVE      ONE,NOCOPIES
            PROC      LABELERC
            GOTO      PRTLAB99
          ENDIF
.
          MATCH     "CAR",DIM3
          IF        @EQUAL
            MOVE      "CAR Label Printing",SCHEDDSC
            MOVE      IBLPCOPY,NOLABEL
            MOVE      ONE,NOCOPIES
            PROC      LABELCAR
            GOTO      PRTLAB99
          ENDIF
.
          MATCH     "PLY",DIM3
          IF        @EQUAL
            MOVE     "Pathology Label Printing",SCHEDDSC
            CALL     CALPLY00
            GOTO     PRTLAB99
          ENDIF
.
          MATCH     "ASS",DIM3
          IF        @EQUAL
            MOVE     "Asset Label Printing",SCHEDDSC
            CALL     ASSLAB00
            GOTO     PRTLAB99
          ENDIF
.
PRTLAB99  MOVE      SP70,SCHEDDSC
          MOVE      "PATWEB70",PRGID
          RETURN
.
.------------------------------------------------------------
.  Print Nutrition labels
.------------------------------------------------------------
NUTRLB00  MOVE      TWO,ZEBRAFLG
.
          PACK      KEY8,URNUMBER
          CALL      RDMAST1
.
          PACK      KEY8,ADMISSNO
          CALL      RDMISS1
          BRANCH    OVRCD,NUTRLB10             * I SRF 23145
.          BRANCH    OVRCD,NUTRLB99            * D SRF 23145
.
          PACK      KEY6,AWARD,ABED
          CALL      RDWARD1
          BRANCH    OVRCD,NUTRLB99
          GOTO      NUTRLB20                   * I SRF 23145
.
NUTRLB10  PACK      KEY8,ADMISSNO
          CALL      RDPTVIS1
          BRANCH    OVRCD,NUTRLB99
.
          COMPARE   NINE,PVITYPE
          GOTO      NUTRLB99 IF NOT EQUAL
.
          MATCH     " 1",PVISYST
          GOTO      NUTRLB99 IF NOT EQUAL
.
          PACK      KEY8,ADMISSNO
          CALL      RDPMEVT1
          BRANCH    OVRCD,NUTRLB99
.
          MOVE      "EV",CATEGORY              * Check the event cat
          MOVE      PMEVEVNT,CODE              * indicator 1
          CALL      GETCOD00
.
          MATCH     "I",TCINDC1                * inpatient event
          GOTO      NUTRLB99 IF NOT EQUAL
.
          PACK      KEY6,PMEVPWRD,PMEVPBED
          CALL      RDWARD1
          BRANCH    OVRCD,NUTRLB99             * end I SRF 23145
.
          MOVE      URNUMBER,AURNO
.
NUTRLB20  CALL      PATSETLB
          CALL      PATPRLAB
.
          MOVE      ZERO,ZEBRAFLG
.
.
NUTRLB99  RETURN
.------------------------------------------------------------
.  Print St Vincents Address labels
.------------------------------------------------------------
ADDRSS00  MOVE      THREE,ZEBRAFLG
.
          PACK      KEY8,URNUMBER
          CALL      RDMAST1
.
          CALL      PATSETLB
          CALL      PATPRLAB
.
          MOVE      ZERO,ZEBRAFLG
.
.
ADDRSS99  RETURN
.
.------------------------------------------------------------
.  Print St Vincents Carer label using Address label format
.------------------------------------------------------------
CARESS00  MOVE      THREE,ZEBRAFLG
.
          PACK      KEY8,URNUMBER
          CALL      RDMAST1
          CALL      RDPMPX21
.
          MOVE      "C",CONTTYPE            * Carer
          CALL      XCON0000                * Get extra contact details
.
          MOVE      PMCETITL,PTITL          * Move carer detail variables over
          MOVE      PMCESNAM,PSNAME         * pmi fields as this uses the
          MOVE      PMCEGNAM,PGNAME         * address zebra label to print
.
          MOVE      PMCEADD1,PADD1
          MOVE      PMCEADD2,PADD2
          MOVE      PMCEADD3,PSUBRB
          MOVE      PMCEADD4,PADD4
          MOVE      PMCEPOST,PPOST
.
          MOVE      PMCETELP,PTELEP
          MOVE      PMCETELB,PTELEB
          MOVE      PMCETELM,PTMXCELL
          MOVE      PMCEEMAI,PMPXPEML
.
          CALL      PATSETLB
          CALL      PATPRLAB
.
          MOVE      ZERO,ZEBRAFLG
.
CARESS99  RETURN
.------------------------------------------------------------
.  Print ZEBRA Label for Inpatients
.------------------------------------------------------------
ZEBRAL00  MOVE      ONE,ZEBRAFLG
.
          PACK      KEY8,URNUMBER
          CALL      RDMAST1
.
          PACK      KEY8,URNUMBER
          CALL      RDPMPX21
.
          PACK      KEY8,ADMISSNO
          CALL      RDMISS1
          BRANCH    OVRCD,ZEBRAL99
.
          PACK      KEY8,ADMISSNO
          CALL      RDVISA1
          BRANCH    OVRCD,ZEBRAL99
.
          CALL      PATSETLB
          CALL      PATPRLAB
.
          MOVE      ZERO,ZEBRAFLG
.
.
ZEBRAL99  RETURN
+
.------------------------------------------------------------
.  Print SJOG Geelong Label for Inpatients
.------------------------------------------------------------
SJOGLB00  PACK      KEY8,URNUMBER
          CALL      RDMAST1
          BRANCH    OVRCD,SJOGLB99
.
          PACK      KEY8,URNUMBER
          CALL      RDPMPX21
          BRANCH    OVRCD,SJOGLB99
.
          PACK      KEY8,ADMISSNO
          CALL      RDMISS1
          BRANCH    OVRCD,SJOGLB99
.
          CALL      CLPMSVX1
          PACK      KEY8,ADMISSNO
          CALL      RDPMVX11
.
          CALL      PATSETLB
          CALL      PATPRLAB
.
SJOGLB99  RETURN
+
.------------------------------------------------------------
.  Print SJOG Geelong Label for Outpatients
.------------------------------------------------------------
SJOGOP00  MOVE      HOLABLAY,LABTYPE
.
          CALL      OUTSETLB
          CALL      OUTPRLAB
.
SJOGOP99  RETURN
+
.------------------------------------------------------------
. Outpatient Label Printing
.------------------------------------------------------------
OUTLABEL  PACK      KEY6,WBSESIT,SP70
          CALL      RDSITA1              * Read the site record
          BRANCH    OVRCD,OUTLAB91       * Invalid site
.
          MATCH     OSTFILE,CFILEPRE     * Same as Current File Prefix
          IF        !@EQUAL
            MOVE      OSTFILE,CFILEPRE   * Save Current File Prefix
            CALL      OPNOUT00           * Open Files
          ENDIF
.
          PACK      KEY36,URNUMBER,SP70
          CALL      RDSBOKA3
OUTLAB05  CALL      RDKBOKA3
          BRANCH    OVRCD,OUTLAB90
.
          MATCH     OBAURNO,URNUMBER
          GOTO      OUTLAB90 IF NOT EQUAL
.
          MOVE      OBAOUTNO,DIM8
.
          MATCH     DIM8,ADMISSNO
          GOTO      OUTLAB07 IF EQUAL
.
          GOTO      OUTLAB05
.
OUTLAB07  PACK      KEY28,OBASITE,OBACLIN,OBADATE,OBASTRT,OBASLOT,SP10
          CALL      RDBOKA1
          BRANCH    OVRCD,OUTLAB92
.
          MOVE      OBAOUTNO,KEY8
          CALL      RDBOKB1
          BRANCH    OVRCD,OUTLAB93
.
          PACK      KEY8,URNUMBER,SP70
          CALL      RDMAST1                 * Read Master file
          BRANCH    OVRCD,OUTLAB94
.
          PACK      KEY8,URNUMBER,SP70
          CALL      RDPMPX21                * Read Master Extension file
          BRANCH    OVRCD,OUTLAB95
.
          CALL      CLPMSVX1
          PACK      KEY8,OBAOUTNO,SP70
          CALL      RDPMVX11                * Read Visit Extension file
.
          MATCH     "LABELOUT98",LABELTYP   * Carers label not zebra
          GOTO      OUTLAB10 IF EQUAL
.
          BRANCH    HOLABLAY,OUTLAB10,OUTLAB10,OUTLAB10,OUTLAB10,OUTLAB10:
                             OUTLAB10,OUTLAB10,OUTLAB24,OUTLAB10,OUTLAB10:
                             OUTLAB10,OUTLAB10,OUTLAB10,OUTLAB24,OUTLAB15
OUTLAB10  PROC      LABELOUT
          GOTO      OUTLAB99
.
OUTLAB15  CALL      SJOGOP00
          GOTO      OUTLAB99
.
OUTLAB24  CALL      ZEBOUT00
          GOTO      OUTLAB99
.
OUTLAB90  DISPLAY   "Missing outbokaf record for ",URNUMBER:
                    " visit",ADMISSNO,*N;
          GOTO      OUTLAB99
.
OUTLAB91  DISPLAY   "Invalid site for ",URNUMBER:
                    " visit",ADMISSNO,*N;
          GOTO      OUTLAB99
.
OUTLAB92  DISPLAY   "Missing outbokaf record for ",KEY28,*N;
          GOTO      OUTLAB99
.
OUTLAB93  DISPLAY   "Missing outbb1af record for ",KEY28,*N;
          GOTO      OUTLAB99
.
OUTLAB94  DISPLAY   "Missing patma1af record for ",URNUMBER,*N;
          GOTO      OUTLAB99
.
OUTLAB95  DISPLAY   "Missing pmspx2af record for ",URNUMBER,*N;
          GOTO      OUTLAB99
.
OUTLAB99  RETURN
.------------------------------------------------------------
.  Print ZEBRA Label for Outpatients
.------------------------------------------------------------
ZEBOUT00  UNPACK    LABELTYP,DIM5,DIM3,DIM2
          MOVE      DIM2,ZEBRAFLG
          MOVE      HOLABLAY,LABTYPE
          MOVE      HOLPAGE,LABCOS        * no of labels across pag
          MOVE      HOLPAGE,LABPAGE       * no of labels across pag
          MOVE      HOLSIZE,LABSIZE       * Label Size
.
          PACK      KEY8,OBAURNO
          CALL      RDMAST1
          BRANCH    OVRCD,ZEBOUT99
.
          PACK      KEY18,OBASITE,OBACLIN,OBADAY,OBASTRT
          CALL      RDMASA1
          BRANCH    OVRCD,ZEBOUT99
.
ZEBOUT20  CALL      OUTSETLB
          CALL      OUTPRLAB
.
          MOVE      ZERO,ZEBRAFLG
.
ZEBOUT99  RETURN
.
.------------------------------------------------------------
. Outpatient Referral Label Printing
.------------------------------------------------------------
REFLABEL  CLOSE     WEBTPLA1
          OPEN      OUTRF1A2,"outrf1af"
.
          PACK      KEY24,URNUMBER,Z70
          CALL      RSOTRFL2
REFLAB10  CALL      RPOTRFL2
          BRANCH    OVRCD,REFLAB99
.
          MATCH     OTRLURNO,URNUMBER
          GOTO      REFLAB99 IF NOT EQUAL
.
          MOVE      OTRLOUTN,DIM8
.
          MATCH     DIM8,ADMISSNO
          GOTO      REFLAB20 IF EQUAL
.
          GOTO      REFLAB10
.
REFLAB20  PROC      LABELREF
          GOTO      REFLAB99
.
REFLAB99  CLOSE     OUTRF1A2
          OPEN      WEBTPLA1,"webtplaf"
          RETURN
.
.------------------------------------------------------------
.  Print RCH labels
.------------------------------------------------------------
RCHLAB00  CALL      IBACLOCK
          MOVE      FOUR,ZEBRAFLG
.
          PACK      KEY8,URNUMBER
          CALL      RDMAST1
          IF        OVRCD = 1
            CALL      CLPATMAS
          ENDIF
.
          PACK      KEY8,URNUMBER
          CALL      RDPMPX21
          IF        OVRCD = 1
            CALL     CLPMSPX2
          ENDIF
.
          MATCH     SP70,ADMISSNO           * Skip reads if no visit number
          IF        @EQUAL
            CALL      CLPATMIS
            CALL      CLPATVIS
            CALL      CLPMSVX1
            GOTO      RCHLAB10
          ENDIF
.
          PACK      KEY8,ADMISSNO
          CALL      RDMISS1
          IF        OVRCD = 1
            CALL      CLPATMIS
          ENDIF
.
          PACK      KEY8,ADMISSNO
          CALL      RDVISA1
          IF        OVRCD = 1
            CALL      CLPATVIS
          ENDIF
.
          PACK      KEY8,ADMISSNO
          CALL      RDPMVX11
          IF        OVRCD = 1
            CALL      CLPMSVX1
          ENDIF
.
RCHLAB10  CALL      PATSETLB
          CALL      PATPRLAB
.
          MOVE      ZERO,ZEBRAFLG
.
RCHLAB99  RETURN
.------------------------------------------------------------
.  Print St Vincent's PMI labels
.------------------------------------------------------------
STVPMI00  CALL      IBACLOCK
          MOVE      FOUR,ZEBRAFLG
.
          PACK      KEY8,URNUMBER
          CALL      RDMAST1
.
          PACK      KEY8,URNUMBER
          CALL      RDPMPX21
.
          CALL      PATSETLB
          CALL      PATPRLAB
.
STVPMI99  RETURN
.
.------------------------------------------------------------
.  Print Form
.------------------------------------------------------------
PRTFRM00  MATCH     SP70,STATNCOD
          GOTO      PRTFRM90 IF EQUAL
.
          PACK      KEY6,STATNCOD,SP70
          CALL      RDIBTH1
          BRANCH    OVRCD,PRTFRM91
.
          BRANCH    IBTHSTFM,PRTFRM91,PRTFRM10,PRTFRM20,PRTFRM20,PRTFRM30:
                             PRTFRM40,PRTFRM05,PRTFRM50
.
PRTFRM05  COMPARE   "18",IBTHSTFM          * Print CSSD Form (Theatre)
          GOTO      PRTFRM60 IF EQUAL
.
          COMPARE   "19",IBTHSTFM          * Print Assessment Forms   Car 273181 
          GOTO      PRTFRM70 IF EQUAL
.
          COMPARE   "20",IBTHSTFM          * Print Medical Booking Form
          GOTO      PRTFRM80 IF EQUAL
.
          MOVE      "Can't print this type of form",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTFRM99
.
PRTFRM10  CALL      PRTAAE00
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM20  CALL      PRTINP00
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM30  CALL      PRTHCF00
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM40  CALL      PRTCAN00                   * I CAR 47681
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM50  CALL      PRTACC00                   * ACC Form
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM60  MOVE      "CCSD Form printing",SCHEDDSC    * Scheduler description
          CALL      PRTCSS00
          MOVE      SP70,SCHEDDSC
.
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM70  CALL      PRTHON00                   * Assessment Forms     Car 273181
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM80  CALL      PRTMED00                   * Medical Booking Form
          MOVE      ZERO,EXIT
          GOTO      PRTFRM99
.
PRTFRM90  MOVE      "Stationery code is mandatory.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTFRM99
.
PRTFRM91  MOVE      "Error reading Stationery code file",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
.
PRTFRM99  RETURN
.------------------------------------------------------------
.  Print AAE Forms
.------------------------------------------------------------
PRTAAE00  MOVE      "AAE Form Printing",SCHEDDSC
          PROC      PRINTAAE
          MOVE      SP70,SCHEDDSC
PRTAAE99  RETURN
.-------------------------------------------------------------------------------
.  Print Assessment Forms (HONOS and AN-SNAP)                         Car 273181
.-------------------------------------------------------------------------------
PRTHON00  MOVE      "Assessment Form Printing",SCHEDDSC             * Car 273181
          PACK      KEY16,ADMISSNO,IBLPSKEY,SP70
          CALL      RDMHHON1
          BRANCH    OVRCD,PRTHON50                                  * Car 273181
.
          PACK      KEY8,MHHNVISN,SP70
          CALL      RDVISA1
          BRANCH    OVRCD,PRTHON91
.
          MOVE      PVIURNO,KEY8
          CALL      RDMAST1
          BRANCH    OVRCD,PRTHON92
.
          MOVE      PVIURNO,KEY8
          CALL      RDPMPX21                * Read Master Extention file
.
.***************************************  Start of AN-SNAP change     Car 273181
          GOTO      PRTHON80
.
. ***************** Read Admission File for visit/ur
PRTHON50  PACK      KEY8,ADMISSNO,SP70
          CALL      RDPTMIS1
          BRANCH    OVRCD,PRTHON99
.
. ***************** Read UPG so that visit falls in start/end date range
          PACK      KEY31,URNUMBER,ATYPE,SP70
          CALL      RSPMUPG1
PRTHON51  CALL      RKPMUPG1
          BRANCH    OVRCD,PRTHON99
.
          MATCH     PMUGURNO,AURNO
          GOTO      PRTHON99 IF NOT EQUAL
.
          MATCH     PMUGATYP,ATYPE
          GOTO      PRTHON99 IF NOT EQUAL
.
          MATCH     PMUGCLAM,ACLAIM
          GOTO      PRTHON55 IF EQUAL
.
          MATCH     PMUGFUND,AFUNDH
          GOTO      PRTHON51 IF NOT EQUAL
.
. ***************** Read Health Fund Table to get Health Fund table Type
          PACK      KEY14,AFUNDH,AFNDTB,SP70
          CALL      RDFUND1
          BRANCH    OVRCD,PRTHON99
.
          MATCH     PMUGTABT,PTHFBCAT
          GOTO      PRTHON51 IF NOT EQUAL
.
PRTHON55  MATCH     PMUGSDAT,ADATE
          GOTO      PRTHON51 IF LESS
.
          MATCH     PMUGENDD,SP70
          IF        !@EQUAL
            MATCH     ADATE,PMUGENDD
            GOTO      PRTHON51 IF LESS
          ENDIF
.
. ***************** Read corresponding APG
          PACK      KEY31,PMUGURNO,PMUGATYP,PMUGCLAM,PMUGFUND,PMUGTABT:
                          PMUGEDAT,SP70
          CALL      RDPMAPG1
          BRANCH    OVRCD,PRTHON99
.                                           * Read the Master File Record
          MOVE      PMUGURNO,KEY8
          CALL      RDMAST1
          BRANCH    OVRCD,PRTHON92
.                                           * Read Master Extention file
          MOVE      PMUGURNO,KEY8
          CALL      RDPMPX21
.                                           * Read Visit file
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDVISA1
          BRANCH    OVRCD,PRTHON91
.
. ***************** if all ok
.
PRTHON80  MOVE      STATNCOD,CPIDCOD
          CALL      SETUP000
          BRANCH    EXIT,PRTHON99
.
          CLOSE     EMRSITA1
          CLOSE     EMRLOCA1
          CLOSE     EMRUNKA1
          CLOSE     EMRGRCA1
          CLOSE     EMRVCDA1
.
          OPEN      PMSAPGA1,"pmsapgaf"
          OPEN      PMSUPGA1,"pmsupgaf"
          OPEN      PMSPITA1,"pmspitaf"
          OPEN      PMSIMPA1,"pmsimpaf"
          OPEN      PATFIMA1,"patfimaf"
.
          CALL      PRINTHON
.
          CLOSE     PMSAPGA1
          CLOSE     PMSUPGA1
          CLOSE     PMSPITA1
          CLOSE     PMSIMPA1
          CLOSE     PATFIMA1
.
          OPEN      EMRSITA1,"emrsitaf"
          OPEN      EMRLOCA1,"emrlocaf"
          OPEN      EMRUNKA1,"emrunkaf"
          OPEN      EMRGRCA1,"emrgrcaf"
          OPEN      EMRVCDA1,"emrvcdaf"
.
          MOVE      SP70,SCHEDDSC
          GOTO      PRTHON99
.
.PRTHON90  MOVE      "Invalid HONOS key",WEBTITLE
.          CALL      PRTERR00
.          MOVE      ONE,EXIT
.          GOTO      PRTHON99
.
.***************************************  End of AN-SNAP change       Car 273181
.
PRTHON91  MOVE      "Missing referral record",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTHON99
.
PRTHON92  MOVE      "Missing master file record",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTHON99
.
PRTHON99  RETURN
.------------------------------------------------------------
.  Print Inpatient Forms
.------------------------------------------------------------
PRTINP00  MOVE      "Inpatient Form Printing",SCHEDDSC
          MOVE      ADMISSNO,KEY8
          CALL      RDMISS1
          BRANCH    OVRCD,PRTINP90
.
          MATCH     "       0",AURNO
          GOTO      PRTINP92 IF EQUAL
.
          BRANCH    ASTAT,PRTINP10,PRTINP10,PRTINP30,PRTINP30,PRTINP80
.
PRTINP10  MATCH     SP3,AWARD
          GOTO      PRTINP30 IF NOT EQUAL
.
          COMPARE   ONE,ASTAT               * pre-admissted patient ?
          GOTO      PRTINP20 IF EQUAL
.
          COMPARE   ONE,CBOOKG              * booking system being used ?
          GOTO      PRTINP20 IF NOT EQUAL   * no
          MOVE      AADMNO,KEY8             * yes - get expected ward/bed from
          CALL      RDBKREC1                *       Booking File
          BRANCH    OVRCD,PRTINP30
          MOVE      BKREWARD,AWARD
          MOVE      BKREEBED,ABED
          GOTO      PRTINP30
.
.         Get the standby ward
.
PRTINP20  MOVE      AADMNO,WSTBY
          PACK      KEY14,WSTBY,SP6
          CALL      RDSWARD4
          CALL      RDKWARD4
          BRANCH    OVRCD,PRTINP30
.
          MATCH     AADMNO,WSTBY
          GOTO      PRTINP30 IF NOT EQUAL
          MOVE      WWARD,AWARD
          MOVE      WBED,ABED
.
PRTINP30  CALL      CLPATDSC           *Clear discharge file variables
          COMPARE   THREE,ASTAT
          GOTO      PRTINP40 IF NOT EQUAL
          MOVE      AADMNO,KEY8
          CALL      RDDSCH1
.
PRTINP40  MOVE      AURNO,KEY8
          CALL      RDMAST1
.
          MOVE      AURNO,TEMPURNO
          MOVE      TEMPURNO,KEY8
          CALL      RDPMPX21                * Read Master Extention file
.
          MOVE      ADMISSNO,TEMPOUTN
          PACK      KEY8,TEMPOUTN           * Read Visit Extention file
          CALL      RDPMVX11
.
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDBKREC1
          IF        OVRCD=1
            CALL      CLBOKRC1
          ENDIF
.
          PACK      KEY8,ADMISSNO,SP70  * Read Booking File
          CALL      RDBKRX11
          IF        OVRCD=1
            CALL      CLBOKRX1
          ENDIF
.
          MOVE      AADMNO,KEY8
          CALL      RDRESP1
.
          CALL      GCUN0000           *web version of PATGNCUN
.                                      *Generate clinic unit number
          MOVE      STATNCOD,CPIDCOD
          CALL      SETUP000
          BRANCH    EXIT,PRTINP99
.
          COMPARE   ONE,PTCNUADT
          CALL      GTRNSRC0 IF EQUAL   *Get the transfer source codes
.
          CALL      GCCSJG00
.
          CALL      GTPTLG00
.
          CALL      GPFINF00
.
          CALL      GPTEXT00
.
          CALL      GMHVIS00
.
          CALL      PRTSHT00
.
PRTINP70  MATCH     SP70,IBLPFRE4
          IF        !@EQUAL
            MATCH     IBLPSTAT,IBLPFRE4
            IF        @EQUAL
              SQUEEZE   IBLPFRE5
              SQUEEZE   IBLPFRE6
              PACK      CMDLINE,SENDLETT,SP1,RSCNROD       * report directory
              STRIP     CMDLINE
              ENDSET    CMDLINE
              APPEND    SAVFIL8,CMDLINE                    * spoolfile name
              APPEND    PRNTEXTN,CMDLINE
              APPEND    SP1,CMDLINE
              APPEND    IBLPFRE5,CMDLINE                   * recipient name
              APPEND    AMBERSND,CMDLINE
              APPEND    IBLPFRE6,CMDLINE                   * recipient fax no
              RESET     CMDLINE
              EXECUTE   CMDLINE,TASKID      * fax this form
            ENDIF
          ENDIF
.                                             fund claim form
          MOVE      ZERO,EXIT
          GOTO      PRTINP99
.
PRTINP80  MOVE      "Admission Status = Cancelled",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTINP99
.
PRTINP90  MOVE      "Invalid Admission Number",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTINP99
.
PRTINP91  MOVE      "ERROR READING MASTER FILE",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTINP99
.
PRTINP92  MOVE      "Invalid - This Admission has zero U/R.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
.
PRTINP99  MOVE      SP70,SCHEDDSC
          RETURN
.------------------------------------------------------------
.  Print Health Fund Claim Forms
.------------------------------------------------------------
PRTHCF00  MOVE      "Health Fund Form Printing",SCHEDDSC
          MOVE      ADMISSNO,KEY8
          CALL      RDMISS1
          BRANCH    OVRCD,PRTHFC90
.
          MATCH     "       0",AURNO
          GOTO      PRTHFC92 IF EQUAL
.
          BRANCH    ASTAT,PRTHFC10,PRTHFC10,PRTHFC30,PRTHFC30,PRTHFC80
.
PRTHFC10  MATCH     SP3,AWARD
          GOTO      PRTHFC30 IF NOT EQUAL
.
          COMPARE   ONE,ASTAT               * pre-admissted patient ?
          GOTO      PRTHFC20 IF EQUAL
.
          COMPARE   ONE,CBOOKG              * booking system being used ?
          GOTO      PRTHFC20 IF NOT EQUAL   * no
          MOVE      AADMNO,KEY8             * yes - get expected ward/bed from
          CALL      RDBKREC1                        Booking File
          BRANCH    OVRCD,PRTHFC30
          MOVE      BKREWARD,AWARD
          MOVE      BKREEBED,ABED
          GOTO      PRTHFC30
.
.         Get the standby ward
.
PRTHFC20  MOVE      AADMNO,WSTBY
          PACK      KEY14,WSTBY,SP6
          CALL      RDSWARD4
          CALL      RDKWARD4
          BRANCH    OVRCD,PRTHFC30
.
          MATCH     AADMNO,WSTBY
          GOTO      PRTHFC30 IF NOT EQUAL
          MOVE      WWARD,AWARD
          MOVE      WBED,ABED
.
PRTHFC30  CALL      CLPATDSC           *Clear discharge file variables
          COMPARE   THREE,ASTAT
          GOTO      PRTHFC40 IF NOT EQUAL
          MOVE      AADMNO,KEY8
          CALL      RDDSCH1
.
PRTHFC40  MOVE      AURNO,KEY8
          CALL      RDMAST1
.
          MOVE      AURNO,TEMPURNO
          MOVE      TEMPURNO,KEY8
          CALL      RDPMPX21                * Read Master Extention file
.
          MOVE      ADMISSNO,TEMPOUTN
          PACK      KEY8,TEMPOUTN           * Read Visit Extention file
          CALL      RDPMVX11
.
          IF        IBCNMHOS=1
            PACK      KEY3,PMVXMHOS,SP70
            CALL      RDPTHSP1
          ENDIF

          MOVE      AADMNO,KEY8
          CALL      RDRESP1
.
          CALL      GPTEXT00
.
          CALL      GCUN0000           *web version of PATGNCUN
.                                      *Generate clinic unit number
          MOVE      STATNCOD,CPIDCOD
          CALL      SETUP000
          BRANCH    EXIT,PRTHFC99
.
          COMPARE   ONE,PTCNUADT
          CALL      GTRNSRC0 IF EQUAL   *Get the transfer source codes
.
          CALL      PRTHFCF                 * Print the user defined health
.                                             fund claim form
          MOVE      ZERO,EXIT
          GOTO      PRTHFC99
.
PRTHFC80  MOVE      "Admission Status = Cancelled",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTHFC99
.
PRTHFC90  MOVE      "Invalid Admission Number",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTHFC99
.
PRTHFC91  MOVE      "ERROR READING MASTER FILE",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTHFC99
.
PRTHFC92  MOVE      "Invalid - This Admission has zero U/R.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
.
PRTHFC99  MOVE      SP70,SCHEDDSC
          RETURN
.------------------------------------------------------------
.  Print ACC Form
.------------------------------------------------------------
PRTACC00  MOVE      "ACC Form Printing",SCHEDDSC
          MOVE      ADMISSNO,KEY8
          CALL      RDPTVIS1
          BRANCH    OVRCD,PRTACC05
.
          PACK      KEY8,ADMISSNO           * Read Visit Extension file
          CALL      RDPMVX11
          BRANCH    OVRCD,PRTACC05
          GOTO      PRTACC10
.
PRTACC05  CALL      OUTFIL00              * Check user id site files
          PACK      KEY36,ADMISSNO,SP70
          CALL      RDSBOKA6
          CALL      RDKBOKA6
          BRANCH    OVRCD,PRTACC90
.
          MATCH     ADMISSNO,DOBAOUTN
          GOTO      PRTACC90 IF NOT EQUAL
          MOVE      DOBAOUTN,PVIBILL
          MOVE      DOBAOUTN,DPVIBILL
          MOVE      OBAURNO,PVIURNO
          MOVE      OBADATE,PVIDATE
.
PRTACC10  MOVE      PVIURNO,KEY8
          CALL      RDMAST1
.
          PACK      KEY8,PVIURNO,SP70
          CALL      RDPMPX21                * Read Master Extension file
.
          MOVE      STATNCOD,CPIDCOD
          CALL      SETUP000
          BRANCH    EXIT,PRTACC99
.
          PACK      KEY8,DPVIBILL,SP70
          CALL      RDWCOM1
          BRANCH    OVRCD,PRTACC82
.
          PACK      KEY8,DPVIBILL,SP70
          CALL      RDPMWX11                * read workers compensation ext file
          BRANCH    OVRCD,PRTACC83
          MATCH     "3",PMWXCSTA
          GOTO      PRTACC84 IF EQUAL
.
          CALL      CLNHIMAS
          IF        PTCNNHII = 1
            PACK      KEY8,PVIURNO
            CALL      RDNHMAS2
          ENDIF
.
          CALL      PRTACCF                 * Print the user defined ACC Form
.
          MOVE      ZERO,EXIT
          GOTO      PRTACC99
.
PRTACC82  MOVE      "No ACC record found",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTACC99
.
PRTACC83  MOVE      "ACC extension record missing",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTACC99
.
PRTACC84  MOVE      "ACC record has been cancelled",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTACC99
.
PRTACC90  MOVE      "Invalid Visit Number",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTACC99
.
PRTACC91  MOVE      "Error reading master file",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTACC99
.
PRTACC99  MOVE      SP70,SCHEDDSC
          RETURN
.------------------------------------------------------------
.    Setup routine from IBABIL79 for PRTINP00
.------------------------------------------------------------
SETUP000  BRANCH    CIDLAY,SETLID2,SETLINID,SETLID3,SETLID4,SETLID5,SETUP100
          GOTO      SETLINID
.
SETUP100  MOVE      CPIDCOD,KEY6
          CALL      RDIBTH1
          BRANCH    OVRCD,SETUP900
.
          PACK      KEY12,CPIDCOD,SP6  *position on details file
          CALL      RSIBDET1
          CALL      RKIBDET1
          BRANCH    OVRCD,SETUP900
.
          MATCH     CPIDCOD,IBDTSCOD   *match stationary codes
          GOTO      SETUP900 IF NOT EQUAL
          MOVE      ZERO,EXIT
          GOTO      SETUP999
.
SETUP900  MOVE      "User Defined Stationery Code not on file",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
.
SETUP999  RETURN
.------------------------------------------------------------
.   Get the transfer source code for PRTINP00
.------------------------------------------------------------
GTRNSRC0  MOVE      SP10,PTDAADTS
          MOVE      SP10,PTDADCTS
          MOVE      AADMNO,KEY8
          CALL      RDPTDAD1           *read PATDADFD record using adm no as key
.
GTRNSRC9  RETURN
.------------------------------------------------------------
.  PRTSHT Routine from IBABIL79 for PRTINP00
.------------------------------------------------------------
PRTSHT00  BRANCH    CIDLAY,PRTSHT2,PRTSHEET,PRTSHT3,PRTSHT4,PRTSHT5,PRTSHT6
          GOTO      PRTSHEET
.------------------------------------------------------------
.  Process fields from template body
.------------------------------------------------------------
PROFLD00
PROFLD99  RETURN
.------------------------------------------------------------
. Open Files and Initialize Variables
.------------------------------------------------------------
INIT0000  CLOSE     WEBSCHA2           * Close not used files from WEBINT00
          CLOSE     WEBSCHA3           * Close not used files from WEBINT00
          CLOSE     WEBSCHA4           * Close not used files from WEBINT00
.
          MOVE      ONE,EMRFLAG
          MOVE      ZERO,ZEBRAFLG
.
          MOVE      ZERO,OVRCD
          TRAP      OVERCOND IF IO
          OPEN      EMRICDA1,"emricdaf"
          OPEN      EMRVISA1,"emrvisaf"
          OPEN      EMRSITA1,"emrsitaf"
          OPEN      EMRLOCA1,"emrlocaf"
          OPEN      EMRUNKA1,"emrunkaf"
          OPEN      EMRGRCA1,"emrgrcaf"
          OPEN      EMRVCDA1,"emrvcdaf"
          TRAPCLR   IO
          IF        OVRCD=1
            MOVE      ZERO,EMRFLAG
          ENDIF
.
          OPEN      WEBERRA1,"weberraf"
          OPEN      IBATDET1,"ibatmdaf"
          OPEN      PATDO1A1,"patdo1af"
          OPEN      PATMA1A1,"patma1af"
          OPEN      PATMX1A1,"patmx1af"
          OPEN      PATMI1A1,"patmi1af"
          OPEN      PATMI1A3,"patmi1af"
          OPEN      PATMCHG1,"patmchgf"
          OPEN      PATFN1A1,"patfn1af"
          OPEN      PATGO1A1,"patgo1af"
          OPEN      PATRE1A1,"patre1af"
          OPEN      PATWR1A1,"patwr1af"
          OPEN      PATWR1A4,"patwr1af"
....      OPEN      PATIN1A1,"patin1af"
          OPEN      PATWC1A1,"patwc1af"
          OPEN      PMSWX1A1,"pmswx1af"
          OPEN      PATCODE1,"patcodes"
          OPEN      PMSHCPA1,"pmshcpaf"
          OPEN      PMSHCPA4,"pmshcpaf"
          OPEN      PMSAELA1,"pmsaelaf"
          OPEN      PMSEXTA1,"pmsextaf"
          OPEN      PATAUDVK,"pataudvk"
          OPEN      PATVKCA1,"patvkcaf"
          OPEN      PATMMBS1,"patmmbsf"
.
          OPEN      AAEDI1A1,"aaedi1af"
...       OPEN      AAECOTA1,"aaecotaf"
          OPEN      AAEDE1A1,"aaede1af"
...       OPEN      AAERTAA1,"aaertaaf"
          OPEN      AAEDE1A1,"aaede1af"
          OPEN      ACCDIAA1,"accdiaaf"
          OPEN      ACCCMTA1,"acccmtaf"
.
          OPEN      WATTR1A1,"wattr1af"
          OPEN      WATTX1A1,"wattx1af"
          OPEN      BOKRC1A1,"bokrc1af"
          OPEN      BOKRX1A1,"bokrx1af"
.
          OPEN      SCRPSTA1,"scrpstaf"
          OPEN      SCRSBGA1,"scrsbgaf"
          OPEN      SCRMASA1,"scrmasaf"
.
          OPEN      IBATMHA1,"ibatmhaf"
          OPEN      IBASPOL1,"ibaspolf"
          OPEN      IBAPRTA1,"ibaprtaf"        * For Printer Selection
          OPEN      IBACODE1,"ibacodef"        * For Printer Selection
          OPEN      IHAPASS1,"ihapassf"        * For Printer Selection
          OPEN      IBAPDFA1,"ibapdfaf"        * For default printer selection
          OPEN      OPRARDA1,"oprardaf"                               *I-55477
          OPEN      OPRCLIA1,"oprcliaf"
          OPEN      OPRDETA1,"oprdetaf"
          OPEN      OPRDETA2,"oprdetaf"
          OPEN      OPRSRGA1,"oprsrgaf"
          OPEN      OPRPMBA1,"oprpmbaf"
          OPEN      OPRJRRA1,"oprjrraf"
          OPEN      OPRSESA1,"oprsesaf"
          OPEN      OPRTHIA1,"oprthiaf"
          OPEN      OPRTSMA1,"oprtsmaf"
          OPEN      OPRSDTA1,"oprsdtaf"
          OPEN      OPRPIMA1,"oprpimaf"
          OPEN      OPRPOCA1,"oprpocaf"
          OPEN      OPROPRA1,"opropraf"
          OPEN      OPRNURA1,"oprnuraf"                               *I-56364
.
          OPEN      NHIMASA2,"nhimasaf"
          OPEN      NHIETHA1,"nhiethaf"
          OPEN      NZPSPRA1,"nzpspraf"
          OPEN      IBALPCA1,"ibalpcaf"
          OPEN      PATASFA1,"patasfaf"
          OPEN      PATDGWA1,"patdgwaf"
          OPEN      PMSHCPA1,"pmshcpaf"
          OPEN      PMSHCGA1,"pmshcgaf"
          OPEN      PATHSPA1,"pathspaf"
          OPEN      PATTRAN2,"pattranf"
          OPEN      PATNIDA1,"patnidaf"
          OPEN      PATVISA1,"patvisaf"
          OPEN      PATVKCA1,"patvkcaf"
          OPEN      WATRTDA1,"watrtdaf"
          OPEN      PATINVR3,"patinvrf"
.
          OPEN      PATDSCH1,"patdschf"
          OPEN      PATLINK1,"patlinkf"                                *I-62428
          OPEN      PATALRT1,"patalrtf"
          OPEN      PMSALNA1,"pmsalnaf"
          OPEN      PATPR1A1,"patpr1af"
....      OPEN      PMSHCLA1,"pmshclaf"
          OPEN      PMSEVTA1,"pmsevtaf"
....      OPEN      PATTRAN1,"pattranf"
          OPEN      PATDADA1,"patdadaf"
          OPEN      PATVADA1,"patvadaf"
          OPEN      PATICDD1,"paticddf"
          OPEN      PATI10D1,"pati10df"
          OPEN      PATWVET1,"patwvetf"
          OPEN      PATWMAB1,"patwmabf"
          OPEN      PATCUNO1,"patcunof"
          OPEN      PMSPX2A1,"pmspx2af"
          OPEN      PMSVX1A1,"pmsvx1af"
          OPEN      PATITEM1,"patitemn"
          OPEN      ALLEQUA1,"allequaf"
          OPEN      PMSCEXA1,"pmscexaf"
          OPEN      PMSCCDA1,"pmsccdaf"
          OPEN      PMSRELA1,"pmsrelaf"
          OPEN      PMSTLEA1,"pmstleaf"
          OPEN      PMSDIVA2,"pmsdivaf"
          OPEN      PMSTEMA1,"pmstemaf"
          OPEN      MEHDLSA1,"mehdlsaf"
          OPEN      MEHVI1A1,"mehvi1af"
.
          OPEN      PATCRDA1,"patcrdaf"        * I CAR 47681
          OPEN      PATCRGA1,"patcrgaf"        * I CAR 47681
          OPEN      PATELGA1,"patelgaf"
          OPEN      PMSEEHA1,"pmseehaf"
          OPEN      PMSEEDA1,"pmseedaf"
          OPEN      PMSSESA1,"pmssesaf"
          OPEN      PMSSEDA1,"pmssedaf"
          OPEN      PMSERCA1,"pmsercaf"
          OPEN      PMSAILA1,"pmsailaf"
          OPEN      PMSDTCA1,"pmsdtcaf"
          OPEN      PMSFIDA1,"pmsfidaf"
          OPEN      PMSWORA1,"pmsworaf"
          OPEN      PATHGRP1,"pathgrpf"
          OPEN      VISMDTA1,"vismdtaf"
          OPEN      VISMTXA1,"vismtxaf"
.***************************************  Start of AN-SNAP change     Car 273181
....      OPEN      PMSUPGA1,"pmsupgaf"
....      OPEN      PMSAPGA1,"pmsapgaf"
....      OPEN      PMSPITA1,"pmspitaf"
....      OPEN      PMSIMPA1,"pmsimpaf"
....      OPEN      PATFIMA1,"patfimaf"
.***************************************  End of AN-SNAP change       Car 273181
.
          READ      CONTROLF,TEN;*126,CLABPG,CLABPRT
          READ      CONTROLF,ZERO;*43,IBCNMHOS
          READ      CONTROLF,TEN3;*1,CHADD1,*143,CSIZLAB,*166,UROPT
          READ      CONTROLF,TEN5;*187,CBOOKG
          READ      CONTROLF,TEN9;*75,CCNOTES
          READ      CONTROLF,TWENTY;*77,PT3BHOSP,*223,PTCNLNFF,PTCNCHFF:
                                    *193,PTCNDCLM
          READ      CONTROLF,FORTY;*111,OPCNCLSU
          READ      CONTROLF,FIFTY9;*34,CTYPEUR,*35,CTYPLAB,*130,CADDLAB:
                                   *132,CALRDESC,*208,PTWRDLAB,*213,PTURLAB:
                                   *220,PTCNUADT,*236,PTCNFFLL
          READ      CONTROLF,THIRTY;*89,HELPAGE,HELPRNT,HELSIZE,*95,HESYST:
                                   *130,HETYPLAB,*178,HADDLAB
          READ      CONTROLF,THIRTY1;*89,HOLPAGE,HOLPRNT,HOLSIZE,*101,HOLABLAY:
                                    *136,HADDLABS,*179,OTCNLABB,*248,OTCNAP12
.
          READ      CONTROLF,EIGHTY8;*234,PTCNNCFB,*241,PTCNCSTA       *I-57547
.
          READ      CONTROLF,HUNDRED2;*67,RSCNROD
          READ      CONTROLF,HUNDRED3;*212,PTCNPFSN,PTCNPFGN,*220,PTCNDEES:
                                      *221,PTCNDDES
          READ      CONTROLF,HUND13;*4,OPCNPLIN,*51,OPCNURSE
          READ      CONTROLF,HUND14;*145,PTCNCLID
          READ      CONTROLF,HUND18;*138,PTCNNEWC
          READ      CONTROLF,HUND20;*158,PTCNUNET
          READ      CONTROLF,HUND22;*8,EMCNURSE
          READ      CONTROLF,HUND29;*61,PTCNWSIN,*71,PTCNOECW,*72,PTCNOECE
          READ      CONTROLF,HUND28;*210,PTCNSTYP
.
          CALL      OPICO1
          CALL      OPICO2
          CALL      OPICD1
          CALL      OPICD2
.
          CALL      RDCTRL00               * Read all controlf file vars
.
          OPEN      ALLREFA1,"allrefaf"    * Allied Health Referral Table
          OPEN      ALLERCA1,"allercaf"    * Allied Health ERC Table
          OPEN      ALLENCA1,"allencaf"    * Allied Health Encounter Table
          OPEN      ALLPRRA1,"allprraf"    * Allied Health Problem Codes
          OPEN      ALLCASA1,"allcasaf"    * Allied Health Case team
          OPEN      ALLDIAA1,"alldiaaf"    * Allied Health Diagnosis Codes
          OPEN      MEHHONA1,"mehhonaf"
          OPEN      PMSDUNA2,"pmsdunaf"
          OPEN      PATHOSP2,"pathospf"
.
          READ      CONTROLF,HUNDRED5;*175,PTCNNULB
.
. Open outpatient file with no site prefix
.
....      OPEN      OUTRF1A2,"outrf1af"
.
          OPEN      OUTSITA1,"outsitaf"    * Open the site file
          MOVE      "out",CFILEPRE         * Save Current File Prefix
.
          CALL      OPNOUT00               * Open Outpatient Files
.
          IF        IBCNMHOS=1
            OPEN      MLTCODA1,"mltcodaf"
          ENDIF
.
          OPEN      PATQMHA1,"patqmhaf"
.
          MATCH     "0",PTCNUNET
          IF        !@EQUAL
            OPEN      PMSIHIA1,"pmsihiaf"    * IHI Details
          ENDIF
.
....      OPEN      OPRCBDA1,"oprcbdaf"    * Caesarean Birth Details
.
          CALL      TFILENAM
          MOVE      TFILNAME,FNAMPOST
.
          MOVE      ONE,OECWINDC
          MATCH     "1",PTCNOECW
          IF         @EQUAL
.
            MOVE      ZERO,OVRCD
            TRAP      OVERCOND IF IO
            OPEN      WEBEEHA1,"webeehaf"
            TRAPCLR   IO
            IF        OVRCD=1
              MOVE      ZERO,OECWINDC
            ENDIF
.
            MOVE      ZERO,OVRCD
            TRAP      OVERCOND IF IO
            OPEN      WEBEEDA1,"webeedaf"
            TRAPCLR   IO
            IF        OVRCD=1
              MOVE      ZERO,OECWINDC
            ENDIF
.
            MOVE      ZERO,OVRCD
            TRAP      OVERCOND IF IO
            OPEN      WEBERCA1,"webercaf"
            TRAPCLR   IO
            IF        OVRCD=1
              MOVE      ZERO,OECWINDC
            ENDIF
.
            MOVE      ZERO,OVRCD
            TRAP      OVERCOND IF IO
            OPEN      WEBSESA1,"websesaf"
            TRAPCLR   IO
            IF        OVRCD=1
              MOVE      ZERO,OECWINDC
            ENDIF
.
            MOVE      ZERO,OVRCD
            TRAP      OVERCOND IF IO
            OPEN      WEBSEDA1,"websedaf"
            TRAPCLR   IO
            IF        OVRCD=1
              MOVE      ZERO,OECWINDC
            ENDIF
.
          ENDIF
.
INIT9999  RETURN
.------------------------------------------------------------
. Open Outpateint Files
.------------------------------------------------------------
OPNOUT00  PACK      CFNAME,CFILEPRE,FILBOKA1  * Get the name of the BOKA1 file
          CLOSE     OUTBOKA1
          OPEN      OUTBOKA1,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILBOKA3  * Get the name of the BOKA3 file
          CLOSE     OUTBOKA3
          OPEN      OUTBOKA3,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILBOKA6  * Get the name of the BOKA6 file
          CLOSE     OUTBOKA6
          OPEN      OUTBOKA6,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILSESA1  * Get the name of the SESA1 file
          CLOSE     OUTSESA1
          OPEN      OUTSESA1,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILCLIA1  * Get the name of the CLIA1 file
          CLOSE     OUTCLIA1
          OPEN      OUTCLIA1,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILCTYA1  * Get the name of the CTYA1 file
          CLOSE     OUTCTYA1
          OPEN      OUTCTYA1,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILBOKC1  * Get the name of the BOKC1 file
          CLOSE     OUTBOKC1
          OPEN      OUTBOKC1,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILDIAG1  * Get the name of the DIAG1 file
          CLOSE     OUTDIAG1
          OPEN      OUTDIAG1,CFNAME           * Open the file
.
          PACK      CFNAME,CFILEPRE,FILMA1A1
          CLOSE     OUTMA1A1
          CALL      OPOTMA11                * Open the file
.
          PACK      CFNAME,CFILEPRE,FILBB1A1
          CLOSE     OUTBB1A1
          CALL      OPOTBB11               * Open the file
.
          PACK      CFNAME,CFILEPRE,FILHEDA1
          CLOSE     OUTHEDA1
          OPEN      OUTHEDA1,CFNAME         * Open the file
.
          RETURN
.------------------------------------------------------------
.         control file reads for printing inp forms
.------------------------------------------------------------
RDCTRL00  READ      CONTROLF,TEN;*54,CFILENO,*79,CAPPRVNO
          READ      CONTROLF,TEN3;*213,CHCSCOD
          READ      CONTROLF,TEN4;*227,CIDLAY
          READ      CONTROLF,TEN5;*187,CBOOKG,*249,CRDRTYP
          READ      CONTROLF,TEN9;*75,CCNOTES
          READ      CONTROLF,SIXTY9;*69,MHCNUSE
          READ      CONTROLF,TWENTY;*196,PTCNUCRD
          READ      CONTROLF,SEVENTY7;*202,PTCNOCSC,*240,PTCNAXEU
          READ      CONTROLF,TWENTY1;*45,PTCNDRSM:    * Var for Sep. Mode
                                     *138,PTCNNHII
.
.         control file reads for printing aae forms
.
          READ      CONTROLF,THIRTY;*51,HEAUDA:
                                    *89,HELPAGE,HELPRNT,HELSIZE,HEPMR5:
                                    *95,HESYST:
                                   *100,HEUSR1,HEUSR2,HEUSR3,HEUSR4,HEUSR5:
                                        HEMAND1,HEMAND2,HEMAND3,HEMAND4,HEMAND5:
                                   *110,HEAUSR1,HEAUSRD1,HEAUSRM1,HETYPLAB:
                                   *132,HSTANDM,*165,HNONRES,*168,HNUMDES:
                                   *178,HADDLAB,HCNTLOG:
                                   *186,HEMR5L,HEMR5COD,*195,HINPCLM,AECNCHRS:
                                        AEALERT:
                                   *198,AECNUPVS,AECNUBRD,AECNFTYP,AECNSITM:
                                   *202,AECNSQA3,AECNDDCQ,AECNDFDC,*248,AECNDCUR
          READ      CONTROLF,SEVENTY4;*87,COCNUSE
          READ      CONTROLF,SEVENTY7;*240,PTCNAXEU
          READ      CONTROLF,SEVENTY8;*29,AECNPLOC,*31,AECNDPVI
          READ      CONTROLF,EIGHTY;*240,PTCNDORP,PTCNUCGP,*245,PTCNDFCL
.
RDCTRL99  RETURN
.------------------------------------------------------------
. Clear Parameters
.------------------------------------------------------------
CLRPAR00  MOVE      ZERO,EXIT
          MOVE      ZERO,REPORTNO
          MOVE      SP70,TEMPLATE
          MOVE      SP70,ADMISSNO
          MOVE      SP70,URNUMBER
          MOVE      SP70,LABELTYP
          MOVE      SP70,FORMACTN
          MOVE      SP70,SELPRINT
          MOVE      ZERO,NOLABEL
          MOVE      SP70,NOCOPIES
          MOVE      SP70,SBWINDOW
          MOVE      SP70,WAITKEYS
          MOVE      SP70,CASEKEYS
          MOVE      SP70,FREETEXT
          RETURN
.------------------------------------------------------------
. Set Parameters
.------------------------------------------------------------
SETPAR00  MATCH     "reportno=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,REPORTNO
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "urnumber=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,URNUMBER
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "admissno=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,ADMISSNO
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "template=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,TEMPLATE
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "formactn=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,FORMACTN
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "selprint=",QRYNAME
          IF        @EQUAL
            SQUEEZE   QRYDATA
            MOVE      QRYDATA,SELPRINT
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "nolabels=",QRYNAME
          IF        @EQUAL
            SQUEEZE   QRYDATA
            MOVE      QRYDATA,NOLABEL
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "nocopies=",QRYNAME
          IF        @EQUAL
            SQUEEZE   QRYDATA
            MOVE      QRYDATA,NOCOPIES
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "sbwindow=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,SBWINDOW
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "labeltyp=",QRYNAME
          IF        @EQUAL
            SQUEEZE   QRYDATA
            MOVE      QRYDATA,LABELTYP
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "freetext=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,FREETEXT
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "waitkeys=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,WAITKEYS
            MOVE      QRYDATA,URNUMBER
            GOTO      SETPAR99
          ENDIF
.
          MATCH     "casekeys=",QRYNAME
          IF        @EQUAL
            MOVE      QRYDATA,CASEKEYS
            GOTO      SETPAR99
          ENDIF
.
SETPAR99  RETURN
.------------------------------------------------------------
.         calculate the number of previous new attendances
.         From  IBAAAE01
.------------------------------------------------------------
          DEFPROC   CNPNATT0
.
          INC       AAEDE1FD/INC
.
          OPEN      AAEDE1A1,"aaede1af"
.
CNPN0000  COMPARE   ONE,AECNUNNA
          GOTO      CNPN9999 IF NOT EQUAL   * not using number new att
.
          MOVE      CKYIDEF3,AEDANPNA       * set the value
          COMPARE   ONE,ZOPTION
          GOTO      CNPN9500 IF NOT EQUAL   * not insert mode
.
.         calculate new value for insert mode
.
          MOVE      ZERO,CCITEM             * clear the count
          PACK      KEY16,PURNO,SP8
          CALL      RDSDETA2
.
CNPN1000  CALL      RDKDETA2
          BRANCH    OVRCD,CNPN9000
          MATCH     PURNO,ADAURNO
          GOTO      CNPN9000 IF NOT EQUAL
.
          PACK      KEY5,CATEP,ADAPREV
          CALL      RDCODE1
          BRANCH    OVRCD,CNPN1000          * invalid code
.
          MATCH     "1",TCINDC1
          GOTO      CNPN1000 IF NOT EQUAL   * not a NEW attendance
.
          ADD       ONE,CCITEM              * valid record
          GOTO      CNPN1000
.
CNPN9000  MOVE      CCITEM,AEDANPNA         * no. of previous new attend.
CNPN9500  MOVE      AEDANPNA,SAVNPNA
          GOTO      CNPN9999
.
          INC       IBAOVRIO/INC
          INC       AAEDE1IO/INC
.
CNPN9999  ENDPROC
+
.------------------------------------------------------------
.         PRINT CANCER REGISTRATION             * I CAR 47681
.------------------------------------------------------------
PRTCAN00  PACK      KEY8,URNUMBER,SP70  * Read Master File
          CALL      RDMAST1
          BRANCH    OVRCD,PRTCAN91
.
          PACK      KEY8,URNUMBER                                      *I-53464
          CALL      RDPMPX21
          IF        OVRCD = 1
            CALL     CLPMSPX2
          ENDIF
.
          PACK      KEY8,ADMISSNO,SP70  * Read Admission File
          CALL      RDMISS1
          BRANCH    OVRCD,PRTCAN92
.
          PACK      KEY8,ADMISSNO,SP70  * Read for Discharge Data
          CALL      RDDSCH1
          IF        OVRCD=1
            CALL      CLPATDSC      * CAR 47761
            PACK      DDATE,CCENT,CYEAR,CMON,CDAY
            REP       " 0",DDATE
          ENDIF
.
          PACK      KEY8,ADMISSNO,SP70      * Read Can Reg Header Details
          CALL      RDPTCRG1
          BRANCH    OVRCD,PRTCAN95
.
.         PACK      KEY25,ADMISSNO,PTCRD008,PTCRD002,SP70
.         CALL      RDPTCRD1                 * deleted this section because
.         BRANCH    OVRCD,PRTCAN94           * canjot focus on particular canreg
.
          PACK      KEY25,ADMISSNO,SP70      * Will only print out the first
          CALL      RSPTCRD1                 * cancer registration of that
          CALL      RKPTCRD1                 * admission number
          BRANCH    OVRCD,PRTCAN94           * (if there is one)
.
          MATCH     ADMISSNO,DPTCDDAD
          GOTO      PRTCAN94 IF NOT EQUAL
.
.         MOVE      PRINTSEL,SELPRINT        * Set Defualt Printer from CGI var
.
          CALL      CNHED000                 * Read & Validate Stationary Code
          BRANCH    EXIT,PRTCAN99
.
          CALL      CNPRN000                 * Print Cancer Registration
.
          MOVE      ZERO,EXIT
          GOTO      PRTCAN99
.
PRTCAN91  MOVE      "Can't find patient Master Details. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCAN99
.
PRTCAN92  MOVE      "Can't find patient Admission Details.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCAN99
.
PRTCAN94  MOVE      "Cancer Registration Details not found. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCAN99
.
PRTCAN95  MOVE      "Cancer Registration Header Details not found. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCAN99
.
PRTCAN99  RETURN
.--------------------------------------------------------------------
. Read Staionary Header File as CNPRN000 uses file vars * I CAR 47681
.--------------------------------------------------------------------
CNHED000  MOVE      ZERO,EXIT                     * initialize exit flag
.
          PACK      KEY6,STATNCOD,SP70
          CALL      RDIBTH1
          BRANCH    OVRCD,CNHED900
.
          GOTO      CNHED999
.
CNHED900  CLEAR     WEBTITLE
          MOVE      "Stationery Code not on File.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT                   * Stat. code not on file
.
CNHED999  RETURN
+
.------------------------------------------------------------
.  Calvary ACT pathology labels
.------------------------------------------------------------
CALPLY00  CALL      IBACLOCK
.
          MOVE      NOLABEL,F2
          MOVE      F2,ZCOPY
          REP       " 0",ZCOPY
.
          PACK      KEY8,URNUMBER
          CALL      RDMAST1
          BRANCH    OVRCD,CALPLY99
.
          PACK      KEY8,URNUMBER
          CALL      RDPMPX21
          BRANCH    OVRCD,CALPLY99
.
          UNPACK    PBDATE,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
.
          MOVE      SP70,DIM8
          SQUEEZE   PURNO
          MOVE      PURNO,DIM8
          SQUEEZE   PSNAME
          SQUEEZE   PGNAME
.
          CALL      OPNPRINT
.
          PRINT     STX,LABLHOME,TWOHND30,COMMA,ZERO,LABLWIDT:
                    THOUSND4:
                    *N:
                    POSSTRNG,TEN,COMMA,TWENTY,STRFONT,ANSD,ANSN,COMMA:
                    THIRTY2,COMMA,TWENTY,DATSTRNG,*+,DIM8,ENDSTRNG:
                    *N:
                    POSSTRNG,TEN,COMMA,FIFTY5,STRFONT,ANSD,ANSN,COMMA:
                    TEN6,COMMA,TEN,DATSTRNG,*+,PSNAME,ENDSTRNG:
                    POSSTRNG,TWOHUND,COMMA,FIFTY5,STRFONT,ANSD:
                    ANSN,COMMA,TEN6,COMMA,TEN,DATSTRNG,*+,PGNAME,ENDSTRNG:
                    *N:
                    POSSTRNG,TEN,COMMA,EIGHTY5,STRFONT,ANSD:
                    ANSN,COMMA,TEN6,COMMA,TEN,DATSTRNG,CPCDATE,ENDSTRNG:
                    *N:
                    POSSTRNG,FIVE,COMMA,HUND05,STRFONT,ANSD:
                    ANSN,COMMA,TEN6,COMMA,TEN,DATSTRNG,DASHSTRN:
                    ENDSTRNG:
                    *N:
                    POSSTRNG,TEN,COMMA,HUND25,STRFONT,ANSD:
                    ANSN,COMMA,TEN6,COMMA,TEN,DATSTRNG,EMERDEPT1:
                    ENDSTRNG,POSSTRNG,HUND30,COMMA,HUND25,STRFONT,ANSD:
                    ANSN,COMMA,TEN6,COMMA,TEN,DATSTRNG,EMERDEPT2,ENDSTRNG:
                    *N:
                    POSSTRNG,TEN,COMMA,HUND55,STRFONT,ANSD:
                    ANSN,COMMA,TEN6,COMMA,TEN,DATSTRNG,COLLDATE:
                    ENDSTRNG:
                    *N:
                    POSSTRNG,TEN,COMMA,HUND85,STRFONT,ANSD:
                    ANSN,COMMA,TEN6,COMMA,TEN,DATSTRNG,COLLTIME:
                    ENDSTRNG:
                    *N:
                    QTYSTRNG,ZCOPY:
                    *N:
                    ETC
.
          CALL      CLSPRINT
.
CALPLY99  RETURN
.
.
.------------------------------------------------------------
.  Asset labels
.------------------------------------------------------------
ASSLAB00  CALL      IBACLOCK
.
          MOVE      NOLABEL,F2
          MOVE      F2,ZCOPY
          REP       " 0",ZCOPY
.
          MOVE      SP70,WLINEZ1
          MOVE      SP70,WLINEZ2
          MOVE      SP70,WLINEZ3
.
          PACK      KEY10,IBLPSKEY,SP70
          CALL      RDALEQU1
          IF        OVRCD=1
            MOVE      SP70,ALEQPROD
            MOVE      SP70,ALEQDESC
          ENDIF
.
          MOVE      ALEQPROD,WLINEZ1
          RESET     WLINEZ1,20
          APPEND    ZFS,WLINEZ1
.
          CLEAR     WLINEZ2
          APPEND    "Asset : ",WLINEZ2
          APPEND    ALEQPROD,WLINEZ2
.
          MOVE      ALEQDESC,WLINEZ3
.
ASSLAB50  CALL      OPNPRINT
.

          PRINT     *1,ZXA,"^LH060,050":
                    *N,ZBARCOD,WLINEZ1:
                    *N,"^FO001,040^A0,25,25",ZFD,WLINEZ2,ZFS:
                    *N,"^FO001,075^A0,25,25",ZFD,WLINEZ3,ZFS:
                    *N,"^PQ",ZCOPY:
                    *N,ZXZ
.
. Print Label Here
.
          CALL      CLSPRINT
.
ASSLAB99  RETURN
+
.------------------------------------------------------------
.       PRINT CSSD Form (Theatre)
.------------------------------------------------------------
PRTCSS00  PACK      KEY8,URNUMBER,SP70  * Read Master File
          CALL      RDMAST1
          BRANCH    OVRCD,PRTCSS91
.
          PACK      KEY8,URNUMBER                                      *I-53464
          CALL      RDPMPX21
          IF        OVRCD = 1
            CALL     CLPMSPX2
          ENDIF
.
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDPTVISA1
          IF        OVRCD=1
            CALL      CLPATVIS
          ENDIF
.
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDPMVX11
          IF        OVRCD = 1
            CALL      CLPMSVX1
          ENDIF
.
          PACK      KEY8,ADMISSNO,SP70  * Read Booking File
          CALL      RDBKREC1
          BRANCH    OVRCD,PRTCSS94
.
          PACK      KEY8,ADMISSNO,SP70  * Read Booking File
          CALL      RDBKRX11
          BRANCH    OVRCD,PRTCSS94
.
          MOVE      SP70,TCINDC1
          MATCH     SP70,BKRETYPE
          IF        !@EQUAL
            PACK      KEY5,ANSB,ANSK,BKRETYPE,SP70
            CALL      RDCODE1
          ENDIF
.
          PACK      CASEKEYS,IBLPSKEY,SP70
.
          PACK      KEY26,CASEKEYS,SP70 * Read Theatre File
          CALL      RDOPDEA1
          IF        OVRCD=1
            MATCH     ANSO,TCINDC1          * Day oncology booking ?
            IF        !@EQUAL
              GOTO      PRTCSS93
            ELSE
              CALL      CLOPRDEA
            ENDIF
          ENDIF
.
          PACK      KEY22,CASEKEYS,SP70
          CALL      RDOPSES1
          IF        OVRCD=1
            MATCH     ANSO,TCINDC1          * Day oncology booking ?
            IF        !@EQUAL
              GOTO      PRTCSS93
            ELSE
              CALL      CLOPRSES
            ENDIF
          ENDIF
.
          PACK      KEY10,OPDAUNIQ,SP70
          CALL      RDOPARD1
          IF        OVRCD=1
            CALL      CLOPRARD
          ENDIF
.
          MOVE      SP70,JREGFORM
          UNPACK    IBLPSKEY,DIM26,JREGFORM
.
          PACK      KEY12,OPDAUNIQ,JREGFORM,SP70
          CALL      RDOPJRR1
          IF        OVRCD=1
            CALL      CLOPJR00              * clear joint reg file vars
          ENDIF
.
          PACK      KEY11,OPDAUNIQ,ONE,SP70     * Pre Operative Checklist
          CALL      RDOPPOC1
          IF        OVRCD=1
            CALL      CLOPPO00
          ENDIF
          CALL      STPOP000
.
          PACK      KEY11,OPDAUNIQ,TWO,SP70     * Arrival Checklist
          CALL      RDOPPOC1
          IF        OVRCD=1
            CALL      CLOPPO00
          ENDIF
          CALL      STPOA000
.
..          PACK      KEY8,ADMISSNO,SP70  * Read Admission File
..          CALL      RDMISS1
..          BRANCH    OVRCD,PRTCSS92
.
          CALL      CSHED000            * Read & Validate Stationary Code
          BRANCH    EXIT,PRTCSS99
.
          CALL      CSPRN000            * Print CSSD Form
.
          MOVE      ZERO,EXIT
          GOTO      PRTCSS99
.
PRTCSS91  MOVE      "Can't find patient Master Details. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCSS99
.
PRTCSS92  MOVE      "Can't find patient Admission Details.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCSS99
.
PRTCSS93  MOVE      "Can't find Theatre Details. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCSS99
.
PRTCSS94  MOVE      "Can't find Booking Details. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTCSS99
.
PRTCSS99  RETURN
+
.------------------------------------------------------------
.       PRINT Medical Booking Form
.------------------------------------------------------------
PRTMED00  PACK      KEY8,URNUMBER,SP70  * Read Master File
          CALL      RDMAST1
          BRANCH    OVRCD,PRTMED91
.
          PACK      KEY8,URNUMBER,SP70
          CALL      RDPMPX21
          IF        OVRCD = 1
            CALL     CLPMSPX2
          ENDIF
.
          PACK      KEY8,ADMISSNO,SP70  * Read Booking File
          CALL      RDBKREC1
          BRANCH    OVRCD,PRTMED94
.
          PACK      KEY8,ADMISSNO,SP70  * Read Booking File
          CALL      RDBKRX11
          BRANCH    OVRCD,PRTMED94
.
          CALL      CSHED000            * Read & Validate Stationary Code
          BRANCH    EXIT,PRTMED99
.
          CALL      MDPRN000            * Print Medical Booking Form
.
          MOVE      ZERO,EXIT
          GOTO      PRTMED99
.
PRTMED91  MOVE      "Can't find patient Master Details. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTMED99
.
PRTMED92  MOVE      "Can't find patient Admission Details.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTMED99
.
PRTMED94  MOVE      "Can't find Booking Details. ",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT
          GOTO      PRTMED99
.
PRTMED99  RETURN
+
.--------------------------------------------------------------------
. Read Stationary Header File as CSPRN000 uses file vars
.--------------------------------------------------------------------
CSHED000  MOVE      ZERO,EXIT                     * initialize exit flag
.
          PACK      KEY6,STATNCOD,SP70
          CALL      RDIBTH1
          BRANCH    OVRCD,CSHED900
.
          GOTO      CSHED999
.
CSHED900  CLEAR     WEBTITLE
          MOVE      "Stationery Code not on File.",WEBTITLE
          CALL      PRTERR00
          MOVE      ONE,EXIT                   * Stat. code not on file
.
CSHED999  RETURN
.--------------------------------------------------------------------
.                          CSPRN000
.  Routine to print the CSSD Form
.--------------------------------------------------------------------
CSPRN000  CALL      OPNPRINT                   * open the spool file
.
          MATCH     "1",OPCNPLIN
          IF        !@EQUAL
            PRINT     *N;                      * Don't print a blank line at
          ENDIF                                * the start of theatre forms
.                                              * cancer forms
          MOVE      ONE,CURRROW
.
          PACK      KEY12,STATNCOD,SP70
          CALL      RSIBDET1                   * position on the details file
          CALL      RKIBDET1
          BRANCH    OVRCD,CSPRN990
.
          MATCH     STATNCOD,IBDTSCOD              * match stationary codes
          GOTO      CSPRN990 IF NOT EQUAL
.
          MOVE      IBDTROW,LASTROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      CSPRN200 IF EQUAL
.
.------ print new-lines until current row equals the one read in ------
.
CSPRN050  PRINT     *N;
          ADD       ONE,CURRROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      CSPRN200 IF EQUAL
.
          GOTO      CSPRN050
.
.------ read through the details file ------
.
CSPRN100  CALL      RKIBDET1
          BRANCH    OVRCD,CSPRN900
.
          MATCH     STATNCOD,IBDTSCOD           * match stationary codes
          GOTO      CSPRN900 IF NOT EQUAL
.
          MOVE      IBDTROW,LASTROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      CSPRN200 IF EQUAL
.
.------ print new-lines until current row equals the one read in ------
.
CSPRN110  PRINT     *N;
          ADD       ONE,CURRROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      CSPRN200 IF EQUAL
.
          GOTO      CSPRN110
.
.------ branch on the field type ------
.
CSPRN200  BRANCH    IBDTINDC,CSPRN300,CSPRN400
.
.------ the field is a text field ------
.
CSPRN300  RESET     IBDTTXFL,IBDTPLEN
          LENSET    IBDTTXFL
          RESET     IBDTTXFL
          PRINT     *IBDTCOL,*+,IBDTTXFL;
          GOTO      CSPRN100
.
.------ the field is a data field ------
.
CSPRN400  MOVE      IBDTTXFL,DIM5
          MOVE      DIM5,FORM5
.
          PACK      VARIABLE,SP70,SP70   * Clear here
.
          BRANCH    FORM5,CSPRN401,CSPRN402,CSPRN403,CSPRN404,CSPRN405: * 5
                          CSPRN406,CSPRN407,CSPRN408,CSPRN409,CSPRN410: * 10
                          CSPRN411,CSPRN412,CSPRN413,CSPRN414,CSPRN415: * 15
                          CSPRN416,CSPRN417,CSPRN418,CSPRN419,CSPRN420: * 20
                          CSPRN421,CSPRN422,CSPRN423,CSPRN424,CSPRN425: * 25
                          CSPRN426,CSPRN427,CSPRN428,CSPRN429,CSPRN430: * 30
                          CSPRN431,CSPRN432,CSPRN433,CSPRN434,CSPRN435: * 35
                          CSPRN436,CSPRN437,CSPRN438,CSPRN439,CSPRN440: * 40
                          CSPRN441,CSPRN441,CSPRN441,CSPRN441,CSPRN441: * 45
                          CSPRN441,CSPRN441,CSPRN441,CSPRN441,CSPRN441: * 50
                          CSPRN441,CSPRN441,CSPRN441,CSPRN442,CSPRN443: * 55
                          CSPRN444,CSPRN445,CSPRN446,CSPRN447,CSPRN448: * 60
                          CSPRN449,CSPRN450,CSPRN451,CSPRN452,CSPRN453: * 65
                          CSPRN454,CSPRN455,CSPRN456,CSPRN457,CSPRN458: * 70
                          CSPRN459,CSPRN460,CSPRN461,CSPRN462,CSPRN463: * 75
                          CSPRN464,CSPRN465,CSPRN466,CSPRN467,CSPRN468: * 80
                          CSPRN469,CSPRN470,CSPRN471,CSPRN472,CSPRN473: * 85
                          CSPRN474,CSPRN475,CSPRN476,CSPRN477,CSPRN478: * 90
                          CSPRN479,CSPRN480,CSPRN481,CSPRN482,CSPRN483: * 95
                          CSPRN484,CSPRN485,CSPRN486,CSPRN487,CSPRN488: * 100
                          CSPRN489,CSPRN490,CSPRN491,CSPRN492,CSPRN493: * 105
                          CSPRN494,CSPRN495,CSPRN496,CSPRN497,CSPRN498: * 110
                          CSPRN499,CSPRN500,CSPRN501,CSPRN502,CSPRN503: * 115
                          CSPRN504,CSPRN505,CSPRN506,CSPRN507,CSPRN508: * 120
                          CSPRN509,CSPRN510,CSPRN511,CSPRN512,CSPRN513: * 125
                          CSPRN514,CSPRN515,CSPRN516,CSPRN517,CSPRN518: * 130
                          CSPRN519,CSPRN520,CSPRN521,CSPRN522,CSPRN523: * 135
                          CSPRN524,CSPRN525,CSPRN526,CSPRN527,CSPRN528: * 140
                          CSPRN529,CSPRN530,CSPRN531,CSPRN532,CSPRN533: * 145
                          CSPRN534,CSPRN535,CSPRN536,CSPRN537,CSPRN538: * 150
                          CSPRN539,CSPRN540,CSPRN541,CSPRN542,CSPRN543: * 155
                          CSPRN544,CSPRN545,CSPRN546,CSPRN547,CSPRN548: * 160
                          CSPRN549,CSPRN550,CSPRN551,CSPRN552,CSPRN553: * 165
                          CSPRN554,CSPRN555,CSPRN556,CSPRN557,CSPRN558: * 170
                          CSPRN559,CSPRN560,CSPRN561,CSPRN562,CSPRN563: * 175
                          CSPRN564,CSPRN565,CSPRN566,CSPRN567,CSPRN568: * 180
                          CSPRN569,CSPRN570,CSPRN571,CSPRN572,CSPRN573: * 185
                          CSPRN574,CSPRN575,CSPRN576,CSPRN577,CSPRN578: * 190
                          CSPRN579,CSPRN580,CSPRN581,CSPRN582,CSPRN583: * 195
                          CSPRN584,CSPRN585,CSPRN586,CSPRN587,CSPRN588: * 200
                          CSPRN589,CSPRN590,CSPRN591,CSPRN592,CSPRN593: * 205
                          CSPRN594,CSPRN595,CSPRN596,CSPRN597,CSPRN598: * 210
                          CSPRN599,CSPRN600,CSPRN601,CSPRN602,CSPRN603: * 215
                          CSPRN604,CSPRN605,CSPRN606,CSPRN607,CSPRN608: * 220
                          CSPRN609,CSPRN610,CSPRN611,CSPRN612,CSPRN613: * 225
                          CSPRN614,CSPRN615,CSPRN616,CSPRN617,CSPRN618: * 230
                          CSPRN619,CSPRN620,CSPRN621,CSPRN622,CSPRN623: * 235
                          CSPRN624,CSPRN625,CSPRN626,CSPRN627,CSPRN628: * 240
                          CSPRN629,CSPRN630,CSPRN631,CSPRN632,CSPRN633: * 245
                          CSPRN634,CSPRN635,CSPRN636,CSPRN637,CSPRN638: * 250
                          CSPRN639,CSPRN640,CSPRN641,CSPRN642,CSPRN643: * 255
                          CSPRN644,CSPRN645,CSPRN646,CSPRN647,CSPRN648: * 260
                          CSPRN649,CSPRN650,CSPRN651,CSPRN652,CSPRN653: * 265
                          CSPRN654,CSPRN655,CSPRN656,CSPRN657,CSPRN658: * 270
                          CSPRN659,CSPRN660,CSPRN661,CSPRN662,CSPRN663: * 275
                          CSPRN664,CSPRN665,CSPRN666,CSPRN667,CSPRN668: * 280
                          CSPRN669,CSPRN670,CSPRN671,CSPRN672,CSPRN673: * 285
                          CSPRN674,CSPRN675,CSPRN676,CSPRN677,CSPRN678: * 290
                          CSPRN679,CSPRN680,CSPRN681,CSPRN682,CSPRN683: * 295
                          CSPRN684,CSPRN685,CSPRN686,CSPRN687,CSPRN688: * 300
                          CSPRN689,CSPRN690,CSPRN691,CSPRN692,CSPRN693: * 305
                          CSPRN694,CSPRN695,CSPRN696,CSPRN697,CSPRN698: * 310
                          CSPRN699,CSPRN700,CSPRN701,CSPRN702,CSPRN703: * 315
                          CSPRN704,CSPRN705,CSPRN706,CSPRN707,CSPRN708: * 320
                          CSPRN709,CSPRN710,CSPRN711,CSPRN712,CSPRN713: * 325
                          CSPRN714,CSPRN715,CSPRN716,CSPRN717,CSPRN718: * 330
                          CSPRN719,CSPRN720,CSPRN721,CSPRN722,CSPRN723: * 335
                          CSPRN724,CSPRN725,CSPRN726,CSPRN727,CSPRN728: * 340
                          CSPRN729,CSPRN730,CSPRN731,CSPRN732,CSPRN733: * 345
                          CSPRN734,CSPRN735,CSPRN736,CSPRN737,CSPRN738: * 350
                          CSPRN739,CSPRN740,CSPRN741,CSPRN742,CSPRN743: * 355
                          CSPRN744,CSPRN745,CSPRN746,CSPRN747,CSPRN748: * 360
                          CSPRN749,CSPRN750,CSPRN751,CSPRN752,CSPRN753: * 365
                          CSPRN754,CSPRN755,CSPRN756,CSPRN757,CSPRN758: * 370
                          CSPRN759,CSPRN760,CSPRN761,CSPRN762,CSPRN763: * 375
                          CSPRN764,CSPRN765,CSPRN766,CSPRN767,CSPRN768: * 380
                          CSPRN769,CSPRN770,CSPRN771,CSPRN772,CSPRN773: * 385
                          CSPRN774,CSPRN775,CSPRN776,CSPRN777,CSPRN778: * 390
                          CSPRN779,CSPRN780,CSPRN781,CSPRN782,CSPRN783: * 395
                          CSPRN784,CSPRN785,CSPRN786,CSPRN787,CSPRN788: * 400
                          CSPRN789,CSPRN790,CSPRN791,CSPRN792,CSPRN793: * 405
                          CSPRN794,CSPRN795,CSPRN796,CSPRN797,CSPRN798: * 410
                          CSPRN799,CSPRN800,CSPRN801,CSPRN802,CSPRN803: * 415
                          CSPRN804,CSPRN805,CSPRN806,CSPRN807,CSPRN808: * 420
                          CSPRN809,CSPRN810,CSPRN811,CSPRN812,CSPRN813: * 425
                          CSPRN814,CSPRN815,CSPRN816,CSPRN817,CSPRN818: * 430
                          CSPRN819,CSPRN820,CSPRN821,CSPRN822,CSPRN823: * 435
                          CSPRN824,CSPRN825,CSPRN826,CSPRN827,CSPRN828: * 440
                          CSPRN829,CSPRN830,CSPRN831,CSPRN832,CSPRN833: * 445
                          CSPRN834,CSPRN835,CSPRN836,CSPRN837,CSPRN838: * 450
                          CSPRN839,CSPRN840,CSPRN841,CSPRN842,CSPRN843: * 455
                          CSPRN844,CSPRN845,CSPRN846,CSPRN847,CSPRN848: * 460
                          CSPRN849,CSPRN850,CSPRN851,CSPRN852,CSPRN853: * 465
                          CSPRN854,CSPRN855,CSPRN856,CSPRN857,CSPRN858: * 470
                          CSPRN859,CSPRN860,CSPRN861,CSPRN862,CSPRN863: * 475
                          CSPRN864,CSPRN865,CSPRN866,CSPRN867,CSPRN868: * 480
                          CSPRN869,CSPR1870,CSPR1871,CSPR1872,CSPR1873: * 485
                          CSPR1874,CSPR1875,CSPR1876,CSPR1877,CSPR1878: * 490
                          CSPR1879,CSPR1880,CSPR1881,CSPR1882,CSPR1883: * 495
                          CSPR1884,CSPR1885,CSPR1886,CSPR1887,CSPR1888: * 500
                          CSPR1889,CSPR1890,CSPR1891,CSPR1892,CSPR1893: * 505
                          CSPR1894,CSPR1895,CSPR1896,CSPR1897,CSPR1898: * 510
                          CSPR1899,CSPR1900,CSPR1901,CSPR1902,CSPR1903: * 515
                          CSPR1904,CSPR1905,CSPR1906,CSPR1907,CSPR1908: * 520
                          CSPR1909,CSPR1910,CSPR1911,CSPR1912,CSPR1913: * 525
                          CSPR1914,CSPR1915,CSPR1916,CSPR1917,CSPR1918: * 530
                          CSPR1919,CSPR1920,CSPR1921,CSPR1922,CSPR1923: * 535
                          CSPR1924,CSPR1925,CSPR1926,CSPR1927,CSPR1928: * 540
                          CSPR1929,CSPR1930,CSPR1931,CSPR1932,CSPR1933: * 545
                          CSPR1934,CSPR1935,CSPR1936,CSPR1937,CSPR1938: * 550
                          CSPR1939,CSPR1940,CSPR1941,CSPR1942,CSPR1943: * 555
                          CSPR1944,CSPR1945,CSPR1946,CSPR1947,CSPR1948: * 560
                          CSPR1949,CSPR1950,CSPR1951,CSPR1952,CSPR1953: * 565
                          CSPR1954,CSPR1955,CSPR1956,CSPR1957,CSPR1958: * 570
                          CSPR1959,CSPR1960,CSPR1961,CSPR1962,CSPR1963: * 575
                          CSPR1964,CSPR1965,CSPR1966,CSPR1967,CSPR1968: * 580
                          CSPR1969,CSPR1970,CSPR1971,CSPR1972,CSPR1973: * 585
                          CSPR1974,CSPR1975,CSPR1976,CSPR1977,CSPR1978: * 590
                          CSPR1979,CSPR1980,CSPR1981,CSPR1982,CSPR1983: * 595
                          CSPR1984,CSPR1985,CSPR1986,CSPR1987,CSPR1988: * 600
                          CSPR1989,CSPR1990,CSPR1991,CSPR1992,CSPR1993: * 605
                          CSPR1994,CSPR1995,CSPR1996,CSPR1997,CSPR1998: * 610
                          CSPR1999,CSPR2000,CSPR2001,CSPR2002,CSPR2003: * 615
                          CSPR2004,CSPR2005,CSPR2006,CSPR2007,CSPR2008: * 620
                          CSPR2009,CSPR2010,CSPR2011,CSPR2012,CSPR2013: * 625
                          CSPR2014,CSPR2015,CSPR2016,CSPR2017,CSPR2018: * 630
                          CSPR2019,CSPR2020,CSPR2021,CSPR2022,CSPR2023: * 635
                          CSPR2024,CSPR2025,CSPR2026,CSPR2027,CSPR2028: * 640
                          CSPR2029,CSPR2030,CSPR2031,CSPR2032,CSPR2033: * 645
                          CSPR2034,CSPR2035,CSPR2036,CSPR2037,CSPR2038: * 650
                          CSPR2039,CSPR2040,CSPR2041,CSPR2042,CSPR2043: * 655
                          CSPR2044,CSPR2045,CSPR2046,CSPR2047,CSPR2048: * 660
                          CSPR2049,CSPR2050,CSPR2051,CSPR2052,CSPR2053: * 665
                          CSPR2054,CSPR2055,CSPR2056,CSPR2057,CSPR2058: * 670
                          CSPR2059,CSPR2060,CSPR2061,CSPR2062,CSPR2063: * 675
                          CSPR2064,CSPR2065,CSPR2066,CSPR2067,CSPR2068: * 680
                          CSPR2069,CSPR2070,CSPR2071,CSPR2072,CSPR2073: * 685
                          CSPR2074,CSPR2075,CSPR2076,CSPR2077,CSPR2078: * 690
                          CSPR2079,CSPR2080,CSPR2081,CSPR2082,CSPR2083: * 695
                          CSPR2084,CSPR2085,CSPR2086,CSPR2087,CSPR2088: * 700
                          CSPR2089,CSPR2090,CSPR2091
.
.------ format the U/R number ------
.
CSPRN401  MOVE      PURNO,VARIABLE
          MOVE      EIGHT,PRNTSTRT
          SUB       IBDTPLEN,PRNTSTRT
          GOTO      CSPRN880
.
.------ format the patients surname ------
.
CSPRN402  MOVE      PSNAME,VARIABLE
          GOTO      CSPRN870
.
.------ format the patients given name ------
.

CSPRN403  MOVE      PGNAME,VARIABLE
          GOTO      CSPRN870
.
.------ format the patients title ------
.
CSPRN404  MOVE      PTITL,VARIABLE
          GOTO      CSPRN870
.
.------ format the patients sex description ------
.
CSPRN405  MOVE      SP8,VARIABLE
          MOVE      PSEX,DSEXCHAR
          CALL      SEXDSP00
          MOVE      DSEXASC1,VARIABLE
          GOTO      CSPRN870
.
.------ format the date of birth ------
.
CSPRN406  UNPACK    PBDATE,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          MOVE      CPCDATE,VARIABLE
          GOTO      CSPRN870
.
.------ format the patients age ------
.
CSPRN407  IF        PCEASE=1
            MOVE      PDECDTE,AGEDATE            * Date of Death
          ELSE
            PACK      AGEDATE,CCC,CYY,CMM,CDD    * today's date
          ENDIF
          REP       " 0",AGEDATE
.
          CALL      CALCAGE
          MOVE      PSAGEYRS,VARIABLE 
.         MOVE      PSAGE,VARIABLE
          MOVE      THREE,PRNTSTRT
          SUB       IBDTPLEN,PRNTSTRT
          GOTO      CSPRN880
.
.------ format the patients name ------
.
CSPRN408  MOVE      TWO,PACFRMT
          MOVE      PSNAME,PACSNAME
          MOVE      PGNAME,PACGNAME
          MOVE      PTITL,PACTITLE
          CALL      PACNAME                      * pack the patients name
          MOVE      PACFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ format the patients address line 1 ------
.
CSPRN409  MOVE      PMEDI,VARIABLE
          GOTO      CSPRN870
.
.------ format the patients address line 1 ------
.
CSPRN410  MOVE      PADD1,VARIABLE
          GOTO      CSPRN870
.
.------ format the patients address line 2 ------
.
CSPRN411  MOVE      PADD2,VARIABLE
          GOTO      CSPRN870
.
.------ format the suburb ------
.
CSPRN412  MOVE      PSUBRB,VARIABLE
          GOTO      CSPRN870
.
.------ format the post code ------
.
CSPRN413  MOVE      PPOST,VARIABLE
          GOTO      CSPRN870
.
.------ format the private Telephone ------
.
CSPRN414  MOVE      PTELEP,VARIABLE
          GOTO      CSPRN870
.
.------ format the business Telephone ------
.
CSPRN415  MOVE      PTELEB,VARIABLE
          GOTO      CSPRN870
.
.------ format the marital status code ------
.
CSPRN416  MOVE      PMSTAT,VARIABLE
          GOTO      CSPRN870
.
.------ format the marital status description ------
.
CSPRN417  PACK      KEY5,ANSM,SP1,PMSTAT,SP10
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ format the country of birth code ------
.
CSPRN418  MOVE      PCONT,VARIABLE
          GOTO      CSPRN870
.
.------ format the country of birth description ------
.
CSPRN419  PACK      KEY5,ANSC,SP1,PCONT,SP10
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ format the religion code ------
.
CSPRN420  MOVE      PREG,VARIABLE
          GOTO      CSPRN870
.
.------ format the religion description ------
.
CSPRN421  PACK      KEY5,ANSR,SP1,PREG,SP10
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin name ------
.
CSPRN422  MOVE      PNKNAME,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin address line 1 ------
.
CSPRN423  MOVE      PNKADD1,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin address line 2 ------
.
CSPRN424  MOVE      PNKADD2,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin suburb ------
.
CSPRN425  MOVE      PNKSUBR,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin post code ------
.
CSPRN426  MOVE      PNKPOST,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin private telephone ------
.
CSPRN427  MOVE      PNKTELP,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin business telephone ------
.
CSPRN428  MOVE      PNKTELB,VARIABLE
          GOTO      CSPRN870
.
.------ format the next of kin relationship ------
.
CSPRN429  MOVE      PNKRELP,VARIABLE
          GOTO      CSPRN870
.
.------ format the pension number ------
.
CSPRN430  MOVE      PPENNO,VARIABLE
          GOTO      CSPRN870
.
.------ format the session date ------
.
CSPRN431  UNPACK    OPDADATE,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          MOVE      CPCDATE,VARIABLE
          GOTO      CSPRN870
.
.------ format the session time ------
.
CSPRN432  MOVE      OPDATIME,VARIABLE
          GOTO      CSPRN870
.
.------ format the clinic/surgeon code ------
.
CSPRN433  MOVE      OPDACLIN,VARIABLE
          GOTO      CSPRN870
.
.------ format the clinic/surgeon code ------
.
CSPRN434  IF        OPCNCLSU=1
            MOVE      OPDACLIN,KEY6
            CALL      RDDOCT1
            BRANCH    OVRCD,CSPRN100
            MOVE      DTITL,FMTTITLE
            MOVE      DGNAME,FMTGNAME
            MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
            MOVE      DOCFNAME,VARIABLE
          ELSE
            MOVE      OPDACLIN,KEY6
            CALL      RDOPCLI1
            BRANCH    OVRCD,CSPRN100
            MOVE      OPCLDESC,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ format the operating room code ------
.
CSPRN435  MOVE      OPDATHET,VARIABLE
          GOTO      CSPRN870
.
.------ format the operating room description ------
.
CSPRN436  MOVE      OPDATHET,KEY6
          CALL      RDOPOPR1
          BRANCH    OVRCD,CSPRN100
          MOVE      OPRMDESC,VARIABLE
          GOTO      CSPRN870
.
.------ format the expected ward code ------
.
CSPRN437  MOVE      BKRXPOWD,VARIABLE
          GOTO      CSPRN870
.
.------ format the expected ward description ------
.
CSPRN438  PACK      KEY6,BKRXPOWD,SP70
          CALL      RDWARD1
          BRANCH    OVRCD,CSPRN100
          MOVE      WBDESC,VARIABLE
          GOTO      CSPRN870
.
.------ format the current date ------
.
CSPRN439  PACK      CURRDAT8,CCC,CYY,CMM,CDD
          REP       " 0",CURRDAT8
          UNPACK    CURRDAT8,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          MOVE      CPCDATE,VARIABLE
          GOTO      CSPRN870
.
.------ format Admission ------
.
CSPRN440  PACK      VARIABLE,ADMISSNO,SP70
          GOTO      CSPRN870
.
.------ clinic/surgeon details (oprdetaf) ------
.
CSPRN441  IF        OPCNCLSU=1
            MOVE      OPDACLIN,KEY10
            CALL      RDPMHCP1
            BRANCH    OVRCD,CSPRN100
          ELSE
            MOVE      OPDACLIN,KEY6
            CALL      RDOPCLI1
            BRANCH    OVRCD,CSPRN100
            MOVE      OPCLDOCT,KEY10
            CALL      RDPMHCP1
            BRANCH    OVRCD,CSPRN100
          ENDIF
.
          SUB       "40",FORM5
          LOAD      VARIABLE,FORM5,PMHCADR1,PMHCADR2,PMHCADR3,PMHCADR4,PMHCADR5:
                                   PMHCADR6,PMHCSTEL,PMHCFAXN,PMHCSEML,PMHCPRV1:
                                   PMHCPAGR,PMHCPAGN,PMHCMOBN
.
          GOTO      CSPRN870
.
.------ NOK Mobile Number      (pmspx2af) ------
.
CSPRN442  MOVE      PMPXKMOB,VARIABLE
          GOTO      CSPRN870
.
.------ Emergency Contact Mobile Number (pmspx2af) ------
.
CSPRN443  MOVE      PMPXCMOB,VARIABLE
          GOTO      CSPRN870
.
.------ Nearest Relative Mobile Number (pmspx2af) ------
.
CSPRN444  MOVE      PMPXRMOB,VARIABLE
          GOTO      CSPRN870
.
.------ Nearest Relative Mobile Number (pmspx2af) ------
.
CSPRN445  MOVE      PVIDOCT,KEY6
          CALL      RDDOCT1
          BRANCH    OVRCD,CSPRN100
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Scheduled Procedure Description (oprdeaaf) ------
.
CSPRN446  MOVE      SP70,IDESC
          PACK      KEY17,OPDAPROV,OPDADATE,SP70
          CALL      PATITMRD
          BRANCH    OVRCD,CSPRN100
          MOVE      IDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Scheduled Procedure Code (oprdeaaf) ------
.
CSPRN447  MOVE      OPDAPROV,VARIABLE
          GOTO      CSPRN870
.
.------ Session Date (oprsesaf) ------
.
CSPRN448  UNPACK    OPSEDATE,CCENT,CYEAR,CMON,CDAY
          MATCH     CMON,SP70
          IF        !@EQUAL
            MOVE      CMON,F2
            LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
            PACK      VARIABLE,CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          ENDIF
          GOTO      CSPRN870
.
.------ Time Called For (oprardaf) ------
.
CSPRN449  MOVE      OPARTCAL,VARIABLE
          GOTO      CSPRN870
.
.------ Time of Arrival (oprardaf) ------
.
CSPRN450  MOVE      OPARATIM,VARIABLE
          GOTO      CSPRN870
.
.------ Late Reason (oprardaf) ------
.
CSPRN451  MOVE      "s",DIM1
          PACK      KEY5,ANSO,DIM1,OPARRLAT,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Admitting Nurse Description (oprardaf) ------
.
CSPRN452  MATCH     "1",OPCNURSE           * Use pmshcpaf for ED Nurse?
          GOTO      CSPR452A IF EQUAL      * Yes
.
          PACK      KEY6,OPARANUR
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
CSPR452A  PACK      KEY10,OPARANUR,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Admitting Nurse Code (oprardaf) ------
.
CSPRN453  MOVE      OPARANUR,VARIABLE
          GOTO      CSPRN870
.
.------ Prosthesis (oprardaf) ------
.
CSPRN454  MOVE      OPARPROT,VARIABLE
          GOTO      CSPRN870
.
.------ Patient Id Bracelet Pre Operative (oprpocaf) ------
.
CSPRN455  MATCH     "2",SVPOP003
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Patient Id Bracelet Arrival (oprpocaf) ------
.
CSPRN456  MATCH     "2",SVPOA003
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Surgical Agreement to Treat Signed Pre Operative (oprpocaf) -----
.
CSPRN457  MATCH     "2",SVPOP004
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Surgical Agreement to Treat Signed Arrival (oprpocaf) ------
.
CSPRN458  MATCH     "2",SVPOA004
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Anaesthetic Agreement to Treat Signed Pre Operative (oprpocaf) ------
.
CSPRN459  MATCH     "2",SVPOP005
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Anaesthetic Agreement to Treat Signed Arrival (oprpocaf) ------
.
CSPRN460  MATCH     "2",SVPOA005
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Blood/Product Argeement to Treat Signed Pre Operative (oprpocaf) ------
.
CSPRN461  MATCH     "2",SVPOP006
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Blood/Product Agreement to Treat Signed Arrival (oprpocaf) ------
.
CSPRN462  MATCH     "2",SVPOA006
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Request Tissue/Body Part Signed Pre Operative (oprpocaf) ------
.
CSPRN463  MATCH     "2",SVPOP007
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Request Tissue/Body Part Signed Arrival (oprpocaf) ------
.
CSPRN464  MATCH     "2",SVPOA007
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Time Nil by Mouth Food Pre Operative (oprpocaf) ------
.
CSPRN465  MOVE      SVPOP008,VARIABLE
          GOTO      CSPRN870
.
.------ Time Nil by Mouth Food Arrival (oprpocaf) ------
.
CSPRN466  MOVE      SVPOA008,VARIABLE
          GOTO      CSPRN870
.
.------ Time Nil by Fluid Pre Operative (oprpocaf) ------
.
CSPRN467  MOVE      SVPOP009,VARIABLE
          GOTO      CSPRN870
.
.------ Time Nil by Fluid Arrival (oprpocaf) ------
.
CSPRN468  MOVE      SVPOA009,VARIABLE
          GOTO      CSPRN870
.
.------ Nil by Mouth Food Check Pre Operative (oprpocaf) ------
.
CSPRN469  MATCH     "2",SVPOP010
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Nil by Mouth Food Check Arrival (oprpocaf) ------
.
CSPRN470  MATCH     "2",SVPOA010
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Nil by Fluid Check Pre Operative (oprpocaf) ------
.
CSPRN471  MATCH     "2",SVPOP011
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Nil by Fluid Check Arrival (oprpocaf) ------
.
CSPRN472  MATCH     "2",SVPOA011
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Allergies Noted Pre Operative (oprpocaf) ------
.
CSPRN473  MATCH     "2",SVPOP012
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Allergies Noted Arrival (oprpocaf) ------
.
CSPRN474  MATCH     "2",SVPOA012
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ ECG Results Pre Operative (oprpocaf) ------
.
CSPRN475  MATCH     "2",SVPOP013
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ ECG Results Arrival (oprpocaf) ------
.
CSPRN476  MATCH     "2",SVPOA013
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Laboratory Results Pre Operative (oprpocaf) ------
.
CSPRN477  MATCH     "2",SVPOP014
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Laboratory Results Arrival (oprpocaf) ------
.
CSPRN478  MATCH     "2",SVPOA014
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Completed Blood Form Pre Operative (oprpocaf) ------
.
CSPRN479  MATCH     "2",SVPOP015
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Completed Blood Form Arrival (oprpocaf) ------
.
CSPRN480  MATCH     "2",SVPOA015
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Medication Chart Pre Operative (oprpocaf) ------
.
CSPRN481  MATCH     "2",SVPOP016
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Medication Chart Arrival (oprpocaf) ------
.
CSPRN482  MATCH     "2",SVPOA016
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Drug Infusion Chart Pre Operative (oprpocaf) ------
.
CSPRN483  MATCH     "2",SVPOP017
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Drug Infusion Chart Arrival (oprpocaf) ------
.
CSPRN484  MATCH     "2",SVPOA017
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Fluid Balance Chart Pre Operative (oprpocaf) ------
.
CSPRN485  MATCH     "2",SVPOP018
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Fluid Balance Chart Arrival (oprpocaf) ------
.
CSPRN486  MATCH     "2",SVPOA018
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X Ray/CAT Scans Pre Operative (oprpocaf) ------
.
CSPRN487  MATCH     "2",SVPOP019
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X Ray/CAT Scans Arrival (oprpocaf) ------
.
CSPRN488  MATCH     "2",SVPOA019
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Diabetic Chart Pre Operative (oprpocaf) ------
.
CSPRN489  MATCH     "2",SVPOP020
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Diabetic Chart Arrival (oprpocaf) ------
.
CSPRN490  MATCH     "2",SVPOA020
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Dentures CAT Oy Desc Pre Operative (oprardaf) ------
.
CSPRN491  MOVE      "y",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP021,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Dentures CAT Oy Code Pre Operative (oprardaf) ------
.
CSPRN492  MOVE      SVPOP021,VARIABLE
          GOTO      CSPRN870
.
.------ Dentures CAT Oy Desc Arrival (oprardaf) ------
.
CSPRN493  MOVE      "y",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA021,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Dentures CAT Oy Code Arrival (oprardaf) ------
.
CSPRN494  MOVE      SVPOA021,VARIABLE
          GOTO      CSPRN870
.
.------ Valuables CAT Oz Desc Pre Operative (oprardaf) ------
.
CSPRN495  MOVE      "z",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP022,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Valuables CAT Oz Code Pre Operative (oprardaf) ------
.
CSPRN496  MOVE      SVPOP022,VARIABLE
          GOTO      CSPRN870
.
.------ Valuables CAT Oz Desc Arrival (oprardaf) ------
.
CSPRN497  MOVE      "z",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA022,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Valuables CAT Oz Code Arrival (oprardaf) ------
.
CSPRN498  MOVE      SVPOA022,VARIABLE
          GOTO      CSPRN870
.
.------ Shave Checked Pre Operative (oprpocaf) ------
.
CSPRN499  MATCH     "2",SVPOP023
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Shave Checked Arrival (oprpocaf) ------
.
CSPRN500  MATCH     "2",SVPOA023
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Time Urine Voided Pre Operative (oprpocaf) ------
.
CSPRN501  MOVE      SVPOP024,VARIABLE
          GOTO      CSPRN870
.
.------ Time Urine Voided Arrival (oprpocaf) ------
.
CSPRN502  MOVE      SVPOA024,VARIABLE
          GOTO      CSPRN870
.
.------ Interpreter Req. CAT OQ Desc Pre Operative (oprpocaf) ------
.
CSPRN503  PACK      KEY5,ANSO,ANSQ,SVPOA025,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Interpreter Req. CAT OQ Desc Arrival (oprpocaf) ------
.
CSPRN504  PACK      KEY5,ANSO,ANSQ,SVPOA025,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 1 CAT oY Pre Op Desc  (oprpocaf) ------
.
CSPRN505  MOVE      "o",DIM1
          PACK      KEY5,DIM1,ANSY,SVPOP027,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 1 CAT oY Pre Op Code (oprpocaf) ------
.
CSPRN506  MOVE      SVPOP027,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 1 CAT oY Arrival Desc  (oprpocaf) ------
.
CSPRN507  MOVE      "o",DIM1
          PACK      KEY5,DIM1,ANSY,SVPOA027,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 1 CAT oY Arrival Code  (oprpocaf) ------
.
CSPRN508  MOVE      SVPOA027,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 2 CAT oZ Pre Op Desc  (oprpocaf) ------
.
CSPRN509  MOVE      "o",DIM1
          PACK      KEY5,DIM1,ANSZ,SVPOP028,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 2 CAT oZ Pre Op Code (oprpocaf) ------
.
CSPRN510  MOVE      SVPOP028,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 2 CAT oZ Arrival Desc  (oprpocaf) ------
.
CSPRN511  MOVE      "o",DIM1
          PACK      KEY5,DIM1,ANSZ,SVPOA028,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 2 CAT oZ Arrival Code  (oprpocaf) ------
.
CSPRN512  MOVE      SVPOA028,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 3 CAT Oa Pre Op Desc  (oprpocaf) ------
.
CSPRN513  MOVE      "a",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP029,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 3 CAT Oa Pre Op Code (oprpocaf) ------
.
CSPRN514  MOVE      SVPOP029,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 3 CAT Oa Arrival Desc  (oprpocaf) ------
.
CSPRN515  MOVE      "a",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA029,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 3 CAT Oa Arrival Code  (oprpocaf) ------
.
CSPRN516  MOVE      SVPOA029,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 4 CAT Ob Pre Op Desc  (oprpocaf) ------
.
CSPRN517  MOVE      "b",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP030,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 4 CAT Ob Pre Op Code (oprpocaf) ------
.
CSPRN518  MOVE      SVPOP030,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 4 CAT Ob Arrival Desc  (oprpocaf) ------
.
CSPRN519  MOVE      "b",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA030,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 4 CAT Ob Arrival Code  (oprpocaf) ------
.
CSPRN520  MOVE      SVPOA030,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 5 CAT Oc Pre Op Desc  (oprpocaf) ------
.
CSPRN521  MOVE      "c",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP031,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 5 CAT Oc Pre Op Code (oprpocaf) ------
.
CSPRN522  MOVE      SVPOP031,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 5 CAT Oc Arrival Desc  (oprpocaf) ------
.
CSPRN523  MOVE      "c",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA031,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 5 CAT Oc Arrival Code  (oprpocaf) ------
.
CSPRN524  MOVE      SVPOA031,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 6 CAT Od Pre Op Desc  (oprpocaf) ------
.
CSPRN525  MOVE      "d",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP032,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 6 CAT Od Pre Op Code (oprpocaf) ------
.
CSPRN526  MOVE      SVPOP032,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 6 CAT Od Arrival Desc  (oprpocaf) ------
.
CSPRN527  MOVE      "d",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA032,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 6 CAT Od Arrival Code  (oprpocaf) ------
.
CSPRN528  MOVE      SVPOA032,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 7 CAT Oe Pre Op Desc  (oprpocaf) ------
.
CSPRN529  MOVE      "e",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP033,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 7 CAT Oe Pre Op Code (oprpocaf) ------
.
CSPRN530  MOVE      SVPOP033,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 7 CAT Oe Arrival Desc  (oprpocaf) ------
.
CSPRN531  MOVE      "e",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA033,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 7 CAT Oe Arrival Code  (oprpocaf) ------
.
CSPRN532  MOVE      SVPOA033,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 8 CAT Of Pre Op Desc  (oprpocaf) ------
.
CSPRN533  MOVE      "f",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP034,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 8 CAT Of Pre Op Code (oprpocaf) ------
.
CSPRN534  MOVE      SVPOP034,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 8 CAT Of Arrival Desc  (oprpocaf) ------
.
CSPRN535  MOVE      "f",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA034,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 8 CAT Of Arrival Code  (oprpocaf) ------
.
CSPRN536  MOVE      SVPOA034,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 9 CAT Og Pre Op Desc  (oprpocaf) ------
.
CSPRN537  MOVE      "g",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP035,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 9 CAT Og Pre Op Code (oprpocaf) ------
.
CSPRN538  MOVE      SVPOP035,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 9 CAT Og Arrival Desc  (oprpocaf) ------
.
CSPRN539  MOVE      "g",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA035,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 9 CAT Og Arrival Code  (oprpocaf) ------
.
CSPRN540  MOVE      SVPOA035,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 10 CAT Oh Pre Op Desc  (oprpocaf) ------
.
CSPRN541  MOVE      "h",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP036,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 10 CAT Oh Pre Op Code (oprpocaf) ------
.
CSPRN542  MOVE      SVPOP036,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 10 CAT Oh Arrival Desc  (oprpocaf) ------
.
CSPRN543  MOVE      "h",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA036,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 10 CAT Oh Arrival Code  (oprpocaf) ------
.
CSPRN544  MOVE      SVPOA036,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 11 CAT Oi Pre Op Desc  (oprpocaf) ------
.
CSPRN545  MOVE      "i",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP037,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 11 CAT Oi Pre Op Code (oprpocaf) ------
.
CSPRN546  MOVE      SVPOP037,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 11 CAT Oi Arrival Desc  (oprpocaf) ------
.
CSPRN547  MOVE      "i",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA037,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 11 CAT Oi Arrival Code  (oprpocaf) ------
.
CSPRN548  MOVE      SVPOA037,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 12 CAT Oj Pre Op Desc  (oprpocaf) ------
.
CSPRN549  MOVE      "j",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP038,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 12 CAT Oj Pre Op Code (oprpocaf) ------
.
CSPRN550  MOVE      SVPOP038,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 12 CAT Oj Arrival Desc  (oprpocaf) ------
.
CSPRN551  MOVE      "j",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA038,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 12 CAT Oj Arrival Code  (oprpocaf) ------
.
CSPRN552  MOVE      SVPOA038,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 13 CAT Ok Pre Op Desc  (oprpocaf) ------
.
CSPRN553  MOVE      "k",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP039,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 13 CAT Ok Pre Op Code (oprpocaf) ------
.
CSPRN554  MOVE      SVPOP039,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 13 CAT Ok Arrival Desc  (oprpocaf) ------
.
CSPRN555  MOVE      "k",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA039,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 13 CAT Ok Arrival Code  (oprpocaf) ------
.
CSPRN556  MOVE      SVPOA039,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 14 CAT Ol Pre Op Desc  (oprpocaf) ------
.
CSPRN557  MOVE      "l",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP040,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 14 CAT Ol Pre Op Code (oprpocaf) ------
.
CSPRN558  MOVE      SVPOP040,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 14 CAT Ol Arrival Desc  (oprpocaf) ------
.
CSPRN559  MOVE      "l",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA040,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 14 CAT Ol Arrival Code  (oprpocaf) ------
.
CSPRN560  MOVE      SVPOA040,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 15 CAT Om Pre Op Desc  (oprpocaf) ------
.
CSPRN561  MOVE      "m",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP041,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 15 CAT Om Pre Op Code (oprpocaf) ------
.
CSPRN562  MOVE      SVPOP041,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 15 CAT Om Arrival Desc  (oprpocaf) ------
.
CSPRN563  MOVE      "m",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA041,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 15 CAT Om Arrival Code  (oprpocaf) ------
.
CSPRN564  MOVE      SVPOA041,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 16 CAT On Pre Op Desc  (oprpocaf) ------
.
CSPRN565  MOVE      "n",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP042,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 16 CAT On Pre Op Code (oprpocaf) ------
.
CSPRN566  MOVE      SVPOP042,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 16 CAT On Arrival Desc  (oprpocaf) ------
.
CSPRN567  MOVE      "n",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA042,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 16 CAT On Arrival Code  (oprpocaf) ------
.
CSPRN568  MOVE      SVPOA042,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 17 CAT Oo Pre Op Desc  (oprpocaf) ------
.
CSPRN569  MOVE      "o",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP043,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 17 CAT Oo Pre Op Code (oprpocaf) ------
.
CSPRN570  MOVE      SVPOP043,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 17 CAT Oo Arrival Desc  (oprpocaf) ------
.
CSPRN571  MOVE      "o",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA043,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 17 CAT Oo Arrival Code  (oprpocaf) ------
.
CSPRN572  MOVE      SVPOA043,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 18 CAT Op Pre Op Desc  (oprpocaf) ------
.
CSPRN573  MOVE      "p",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP044,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 18 CAT Op Pre Op Code (oprpocaf) ------
.
CSPRN574  MOVE      SVPOP044,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 18 CAT Op Arrival Desc  (oprpocaf) ------
.
CSPRN575  MOVE      "p",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA044,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 18 CAT Op Arrival Code  (oprpocaf) ------
.
CSPRN576  MOVE      SVPOA044,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 19 CAT Oq Pre Op Desc  (oprpocaf) ------
.
CSPRN577  MOVE      "q",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP045,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 19 CAT Oq Pre Op Code (oprpocaf) ------
.
CSPRN578  MOVE      SVPOP045,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 19 CAT Oq Arrival Desc  (oprpocaf) ------
.
CSPRN579  MOVE      "q",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA045,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 19 CAT Oq Arrival Code  (oprpocaf) ------
.
CSPRN580  MOVE      SVPOA045,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 20 CAT Or Pre Op Desc  (oprpocaf) ------
.
CSPRN581  MOVE      "r",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOP046,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 20 CAT Or Pre Op Code (oprpocaf) ------
.
CSPRN582  MOVE      SVPOP046,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 20 CAT Or Arrival Desc  (oprpocaf) ------
.
CSPRN583  MOVE      "r",DIM1
          PACK      KEY5,ANSO,DIM1,SVPOA046,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Code 20 CAT Or Arrival Code  (oprpocaf) ------
.
CSPRN584  MOVE      SVPOA046,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 1 Pre Operative (oprpocaf) ------
.
CSPRN585  MATCH     "2",SVPOP047
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 1 Arrival (oprpocaf) ------
.
CSPRN586  MATCH     "2",SVPOA047
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 2 Pre Operative (oprpocaf) ------
.
CSPRN587  MATCH     "2",SVPOP048
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 2 Arrival (oprpocaf) ------
.
CSPRN588  MATCH     "2",SVPOA048
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 3 Pre Operative (oprpocaf) ------
.
CSPRN589  MATCH     "2",SVPOP049
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 3 Arrival (oprpocaf) ------
.
CSPRN590  MATCH     "2",SVPOA049
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 4 Pre Operative (oprpocaf) ------
.
CSPRN591  MATCH     "2",SVPOP050
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 4 Arrival (oprpocaf) ------
.
CSPRN592  MATCH     "2",SVPOA050
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 5 Pre Operative (oprpocaf) ------
.
CSPRN593  MATCH     "2",SVPOP051
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 5 Arrival (oprpocaf) ------
.
CSPRN594  MATCH     "2",SVPOA051
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 6 Pre Operative (oprpocaf) ------
.
CSPRN595  MATCH     "2",SVPOP052
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 6 Arrival (oprpocaf) ------
.
CSPRN596  MATCH     "2",SVPOA052
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 7 Pre Operative (oprpocaf) ------
.
CSPRN597  MATCH     "2",SVPOP053
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 7 Arrival (oprpocaf) ------
.
CSPRN598  MATCH     "2",SVPOA053
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 8 Pre Operative (oprpocaf) ------
.
CSPRN599  MATCH     "2",SVPOP054
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 8 Arrival (oprpocaf) ------
.
CSPRN600  MATCH     "2",SVPOA054
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 9 Pre Operative (oprpocaf) ------
.
CSPRN601  MATCH     "2",SVPOP055
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 9 Arrival (oprpocaf) ------
.
CSPRN602  MATCH     "2",SVPOA055
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 10 Pre Operative (oprpocaf) ------
.
CSPRN603  MATCH     "2",SVPOP056
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Y/N Field 10 Arrival (oprpocaf) ------
.
CSPRN604  MATCH     "2",SVPOA056
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ User Defined Time Field 1 Pre Operative (oprpocaf) ------
.
CSPRN605  MOVE      SVPOP057,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 1 Arrival (oprpocaf) ------
.
CSPRN606  MOVE      SVPOA057,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 2 Pre Operative (oprpocaf) ------
.
CSPRN607  MOVE      SVPOP058,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 2 Arrival (oprpocaf) ------
.
CSPRN608  MOVE      SVPOA058,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 3 Pre Operative (oprpocaf) ------
.
CSPRN609  MOVE      SVPOP059,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 3 Arrival (oprpocaf) ------
.
CSPRN610  MOVE      SVPOA059,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 4 Pre Operative (oprpocaf) ------
.
CSPRN611  MOVE      SVPOP060,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 4 Arrival (oprpocaf) ------
.
CSPRN612  MOVE      SVPOA060,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 5 Pre Operative (oprpocaf) ------
.
CSPRN613  MOVE      SVPOP061,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 5 Arrival (oprpocaf) ------
.
CSPRN614  MOVE      SVPOA061,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 6 Pre Operative (oprpocaf) ------
.
CSPRN615  MOVE      SVPOP062,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 6 Arrival (oprpocaf) ------
.
CSPRN616  MOVE      SVPOA062,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 7 Pre Operative (oprpocaf) ------
.
CSPRN617  MOVE      SVPOP063,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 7 Arrival (oprpocaf) ------
.
CSPRN618  MOVE      SVPOA063,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 8 Pre Operative (oprpocaf) ------
.
CSPRN619  MOVE      SVPOP064,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 8 Arrival (oprpocaf) ------
.
CSPRN620  MOVE      SVPOA064,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 9 Pre Operative (oprpocaf) ------
.
CSPRN621  MOVE      SVPOP065,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 9 Arrival (oprpocaf) ------
.
CSPRN622  MOVE      SVPOA065,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 10 Pre Operative (oprpocaf) ------
.
CSPRN623  MOVE      SVPOP066,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 10 Arrival (oprpocaf) ------
.
CSPRN624  MOVE      SVPOA066,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 1 Pre Operative (oprpocaf) ------
.
CSPRN625  MOVE      SVPOP067,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 1 Arrival (oprpocaf) ------
.
CSPRN626  MOVE      SVPOA067,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 2 Pre Operative (oprpocaf) ------
.
CSPRN627  MOVE      SVPOP068,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 2 Arrival (oprpocaf) ------
.
CSPRN628  MOVE      SVPOA068,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 3 Pre Operative (oprpocaf) ------
.
CSPRN629  MOVE      SVPOP069,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 3 Arrival (oprpocaf) ------
.
CSPRN630  MOVE      SVPOA069,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 4 Pre Operative (oprpocaf) ------
.
CSPRN631  MOVE      SVPOP070,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 4 Arrival (oprpocaf) ------
.
CSPRN632  MOVE      SVPOA070,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 5 Pre Operative (oprpocaf) ------
.
CSPRN633  MOVE      SVPOP071,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 5 Arrival (oprpocaf) ------
.
CSPRN634  MOVE      SVPOA071,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 6 Pre Operative (oprpocaf) ------
.
CSPRN635  MOVE      SVPOP072,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 6 Arrival (oprpocaf) ------
.
CSPRN636  MOVE      SVPOA072,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 7 Pre Operative (oprpocaf) ------
.
CSPRN637  MOVE      SVPOP073,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 7 Arrival (oprpocaf) ------
.
CSPRN638  MOVE      SVPOA073,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 8 Pre Operative (oprpocaf) ------
.
CSPRN639  MOVE      SVPOP074,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 8 Arrival (oprpocaf) ------
.
CSPRN640  MOVE      SVPOA074,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 9 Pre Operative (oprpocaf) ------
.
CSPRN641  MOVE      SVPOP075,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 9 Arrival (oprpocaf) ------
.
CSPRN642  MOVE      SVPOA075,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Form Field 10 Pre Operative (oprpocaf) ------
.
CSPRN643  MOVE      SVPOP076,VARIABLE
          GOTO      CSPRN870
.
.------ User Defined Time Field 10 Arrival (oprpocaf) ------
.
CSPRN644  MOVE      SVPOA076,VARIABLE
          GOTO      CSPRN870
.
.------ DVA Number ------
.
CSPRN645  MOVE      THREE,DIM1
          CALL      GCCARD00
          MOVE      PMCDCNUM,VARIABLE
          GOTO      CSPRN870
.
.------ Anatomical Side X if Left ------
.
CSPRN646  MATCH     "1",OPJRSIDE
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Anatomical Side X if Right ------
.
CSPRN647  MATCH     "2",OPJRSIDE
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if Primary Procedure ------
.
CSPRN648  MATCH     "1",OPJRPRIM
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if Revision Procedure ------
.
CSPRN649  MATCH     "2",OPJRPRIM
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Joint X if Shoulder ------
.
CSPRN650  MATCH     "1",OPJRJOIN
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Joint X if Elbow ------
.
CSPRN651  MATCH     "2",OPJRJOIN
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Joint X if Wrist ------
.
CSPRN652  MATCH     "3",OPJRJOIN
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Joint X if Ankle ------
.
CSPRN653  MATCH     "4",OPJRJOIN
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Joint Registry Form Type ------
.
CSPRN654  MOVE      ZERO,F1
          MOVE      OPJRTYPE,F1
          LOAD      VARIABLE,F1,FORMTYP1,FORMTYP2,FORMTYP3,FORMTYP4
.
          IF        F1=3
            LOAD      VARIABLE,F1,FORMTY31,FORMTY32,FORMTY33,FORMTY34
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Osteoarthritis ------
.
CSPRN655  MATCH     "1",OPJRDI01
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Rheumatoid Arthritis ------
.
CSPRN656  MATCH     "1",OPJRDI02
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Other Inflam Arthritis ------
.
CSPRN657  MATCH     "1",OPJRDI03
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Avascular Necrosis ------
.
CSPRN658  MATCH     "1",OPJRDI04
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Dysplasia ------
.
CSPRN659  MATCH     "1",OPJRDI05
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Fracture ------
.
CSPRN660  MATCH     "1",OPJRDI06
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Trauma ------
.
CSPRN661  MATCH     "1",OPJRDI07
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Dislocation ------
.
CSPRN662  MATCH     "1",OPJRDI08
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Instability ------
.
CSPRN663  MATCH     "1",OPJRDI09
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Tumour ------
.
CSPRN664  MATCH     "1",OPJRDI10
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Other ------
.
CSPRN665  MATCH     "1",OPJRDI11
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Disc Disease (with radiculopathy ------
.
CSPRN666  MATCH     "1",OPJRDI12
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Disc Disease(without radiculopathy) ------
.
CSPRN667  MATCH     "1",OPJRDI13
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Spondylolisthesis ------
.
CSPRN668  MATCH     "1",OPJRDI14
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Adjacent Segment Syndrome ------
.
CSPRN669  MATCH     "1",OPJRDI15
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Post Laminectomy or Disectomy ------
.
CSPRN670  MATCH     "1",OPJRDI16
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Adjacent to Concurrent Fusion ------
.
CSPRN671  MATCH     "1",OPJRDI17
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Pain of Unknown Cause ------
.
CSPRN672  MATCH     "1",OPJRDI18
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Loosening ------
.
CSPRN673  MATCH     "1",OPJRDI19
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Lysis ------
.
CSPRN674  MATCH     "1",OPJRDI20
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Infection ------
.
CSPRN675  MATCH     "1",OPJRDI21
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Implant Breakage ------
.
CSPRN676  MATCH     "1",OPJRDI22
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Neurological ------
.
CSPRN677  MATCH     "1",OPJRDI23
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Instability ------
.
CSPRN678  MATCH     "1",OPJRDI24
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis X if Diagnosis (not used) ------
.
CSPRN679  MATCH     "1",OPJRDI25
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------Diagnosis Other Comment ------
.
CSPRN680  MOVE      OPJRDC01,VARIABLE
          GOTO      CSPRN870
.
.------Diagnosis Fracture Comment ------
.
CSPRN681  MOVE      OPJRDC02,VARIABLE
          GOTO      CSPRN870
.
.------Diagnosis Tumour Comment ------
.
CSPRN682  MOVE      OPJRDC03,VARIABLE
          GOTO      CSPRN870
.
.------Diagnosis Breakage Comment ------
.
CSPRN683  MOVE      OPJRDC04,VARIABLE
          GOTO      CSPRN870
.
.------Diagnosis Comment (not used)------
.
CSPRN684  MOVE      OPJRDC05,VARIABLE
          GOTO      CSPRN870
.
.------ X if Inicompartmental Medial ------
.
CSPRN685  MATCH     "1",OPJRUNCM
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if Inicompartmental Lateral ------
.
CSPRN686  MATCH     "1",OPJRUNCL
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Comment Line 1 ------
.
CSPRN687  MOVE      OPJRCMT1,VARIABLE
          GOTO      CSPRN870
.
.------ Comment Line 2 ------
.
CSPRN688  MOVE      OPJRCMT2,VARIABLE
          GOTO      CSPRN870
.
.------ Comment Line 3 ------
.
CSPRN689  MOVE      OPJRCMT3,VARIABLE
          GOTO      CSPRN870
.
.------ Comment Line 4 ------
.
CSPRN690  MOVE      OPJRCMT4,VARIABLE
          GOTO      CSPRN870
.
.------ Comment Line 5 ------
.
CSPRN691  MOVE      OPJRCMT5,VARIABLE
          GOTO      CSPRN870
.
.------ X if Computer Assisted ------
.
CSPRN692  MATCH     "1",OPJRCOMP
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if Not Computer Assisted ------
.
CSPRN693  MATCH     "1",OPJRCOMP
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Computer System ------
.
CSPRN694  MATCH     SP70,OPJRCMPS
          GOTO      CSPRN870 IF EQUAL
.
          MOVE      "pr",DIM2
          PACK      KEY5,DIM2,OPJRCMPS,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN870
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ X if Re Operation Performed ------
.
CSPRN695  MATCH     "1",OPJRREOP
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Re Operation Performed ------
.
CSPRN696  MATCH     "1",OPJRREOP
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Re Operation Performed Reason ------
.
CSPRN697  MOVE      OPJRRRES,VARIABLE
          GOTO      CSPRN870
.
.------ X if Patella Cement Used ------
.
CSPRN698  MATCH     "1",OPJRCEMP
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Patella Cement Used ------
.
CSPRN699  MATCH     "1",OPJRCEMP
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Patella Cement Company Name ------
.
CSPRN700  MOVE      OPJRCNMP,VARIABLE
          GOTO      CSPRN870
.
.------ X if Tibial Cement Used ------
.
CSPRN701  MATCH     "1",OPJRCEMT
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Tibial Cement Used ------
.
CSPRN702  MATCH     "1",OPJRCEMT
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Tibial Cement Company Name ------
.
CSPRN703  MOVE      OPJRCNMT,VARIABLE
          GOTO      CSPRN870
.
.------ X if Femoral Cement Used ------
.
CSPRN704  MATCH     "1",OPJRCEMF
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Femoral Cement Used ------
.
CSPRN705  MATCH     "1",OPJRCEMF
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Femoral Cement Company Name ------
.
CSPRN706  MOVE      OPJRCNMF,VARIABLE
          GOTO      CSPRN870
.
.------ X if Acetubular Cement Used ------
.
CSPRN707  MATCH     "1",OPJRCEMA
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Acetubular Cement Used ------
.
CSPRN708  MATCH     "1",OPJRCEMA
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Acetubular Cement Company Name ------
.
CSPRN709  MOVE      OPJRCNMA,VARIABLE
          GOTO      CSPRN870
.
.------ X if Proximal Cement Used ------
.
CSPRN710  MATCH     "1",OPJRCEMX
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Proximal Cement Used ------
.
CSPRN711  MATCH     "1",OPJRCEMX
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Proximal Cement Company Name ------
.
CSPRN712  MOVE      OPJRCNMX,VARIABLE
          GOTO      CSPRN870
.
.------ X if Distal Cement Used ------
.
CSPRN713  MATCH     "1",OPJRCEMD
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Distal Cement Used ------
.
CSPRN714  MATCH     "1",OPJRCEMD
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if Screws Used ------
.
CSPRN715  MATCH     "1",OPJRSCRW
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Screws Used ------
.
CSPRN716  MATCH     "1",OPJRSCRW
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Number of Screws Used ------
.
CSPRN717  MATCH     SP70,OPJRSCRN
          GOTO      CSPRN870 IF EQUAL
.
          MOVE      OPJRSCRN,VARIABLE
          GOTO      CSPRN870
.
.------ X if Wire Used ------
.
CSPRN718  MATCH     "1",OPJRWIRE
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Wire Used ------
.
CSPRN719  MATCH     "1",OPJRWIRE
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if Trochanteric Grip Used ------
.
CSPRN720  MATCH     "1",OPJRGRIP
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Trochanteric Grip Used ------
.
CSPRN721  MATCH     "1",OPJRGRIP
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Trochanteric Grip Company ------
.
CSPRN722  MOVE      OPJRGRIC,VARIABLE
          GOTO      CSPRN870
.
.------ X if Cables Used ------
.
CSPRN723  MATCH     "1",OPJRCABL
          IF        @EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ X if No Cables Used ------
.
CSPRN724  MATCH     "1",OPJRCABL
          IF        !@EQUAL
            MOVE      ANSX,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Cables Company Name ------
.
CSPRN725  MOVE      OPJRCABC,VARIABLE
          GOTO      CSPRN870
.
.------ Number of Cables Used ------
.
CSPRN726  MOVE      OPJRCABN,VARIABLE
          GOTO      CSPRN870
.
.------  Femoral 1 - Company ------
.
CSPRN727  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 1 - Prosthesis Name ------
.
CSPRN728  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 1 - Cat/Ref no. ------
.
CSPRN729  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 1 - Lot no. ------
.
CSPRN730  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 2 - Company ------
.
CSPRN731  MOVE      ANSF,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 2 - Prosthesis Name ------
.
CSPRN732  MOVE      ANSF,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 2 - Cat/Ref no. ------
.
CSPRN733  MOVE      ANSF,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 2 - Lot no. ------
.
CSPRN734  MOVE      ANSF,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 3 - Company ------
.
CSPRN735  MOVE      ANSF,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 3 - Prosthesis Name ------
.
CSPRN736  MOVE      ANSF,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 3 - Cat/Ref no. ------
.
CSPRN737  MOVE      ANSF,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 3 - Lot no. ------
.
CSPRN738  MOVE      ANSF,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 4 - Company ------
.
CSPRN739  MOVE      ANSF,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 4 - Prosthesis Name ------
.
CSPRN740  MOVE      ANSF,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 4 - Cat/Ref no. ------
.
CSPRN741  MOVE      ANSF,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 4 - Lot no. ------
.
CSPRN742  MOVE      ANSF,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 5 - Company ------
.
CSPRN743  MOVE      ANSF,IMPLTYPE
          MOVE      FIVE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 5 - Prosthesis Name ------
.
CSPRN744  MOVE      ANSF,IMPLTYPE
          MOVE      FIVE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 5 - Cat/Ref no. ------
.
CSPRN745  MOVE      ANSF,IMPLTYPE
          MOVE      FIVE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Femoral 5 - Lot no. ------
.
CSPRN746  MOVE      ANSF,IMPLTYPE
          MOVE      FIVE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Stem ------
.
CSPRN747  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSF,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Head ------
.
CSPRN748  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSH,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Centraliser ------
.
CSPRN749  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSC,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Intra-medullary Plug ------
.
CSPRN750  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSP,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral ------
.
CSPRN751  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSF,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Femoral  ------
.
CSPRN752  MOVE      ANSF,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Spacer Distal Medial ------
.
CSPRN753  MOVE      ANSS,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ONE,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Spacer Distal Lateral------
.
CSPRN754  MOVE      ANSS,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      TWO,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Spacer Posterior Medial ------
.
CSPRN755  MOVE      ANSS,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      THREE,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Femoral Spacer Posterior Lateral------
.
CSPRN756  MOVE      ANSS,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      FOUR,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Femoral Spacers  ------
.
CSPRN757  MOVE      ANSS,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 1 - Company ------
.
CSPRN758  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 1 - Prosthesis Name ------
.
CSPRN759  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 1 - Cat/Ref no. ------
.
CSPRN760  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 1 - Lot no. ------
.
CSPRN761  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 2 - Company ------
.
CSPRN762  MOVE      ANSA,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 2 - Prosthesis Name ------
.
CSPRN763  MOVE      ANSA,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 2 - Cat/Ref no. ------
.
CSPRN764  MOVE      ANSA,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 2 - Lot no. ------
.
CSPRN765  MOVE      ANSA,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 3 - Company ------
.
CSPRN766  MOVE      ANSA,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 3 - Prosthesis Name ------
.
CSPRN767  MOVE      ANSA,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 3 - Cat/Ref no. ------
.
CSPRN768  MOVE      ANSA,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Acetabular 3 - Lot no. ------
.
CSPRN769  MOVE      ANSA,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Acetabular Component Cup ------
.
CSPRN770  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSU,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Acetabular Component Shell ------
.
CSPRN771  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSL,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Acetabular Component Insert ------
.
CSPRN772  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSI,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Acetabular Component Bipolar ------
.
CSPRN773  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSB,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Acetabular Component Reinforcement ------
.
CSPRN774  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSR,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Acetabular Component Mesh ------
.
CSPRN775  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSM,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Acetabular Components ------
.
CSPRN776  MOVE      ANSA,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Patella 1 - Company ------
.
CSPRN777  MOVE      ANSP,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Patella 1 - Prosthesis Name ------
.
CSPRN778  MOVE      ANSP,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Patella 1 - Cat/Ref no. ------
.
CSPRN779  MOVE      ANSP,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Patella 1 - Lot no. ------
.
CSPRN780  MOVE      ANSP,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Patella Components ------
.
CSPRN781  MOVE      ANSP,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Patella Components ------
.
CSPRN782  MOVE      ANSP,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 1 - Company ------
.
CSPRN783  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 1 - Prosthesis Name ------
.
CSPRN784  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 1 - Cat/Ref no. ------
.
CSPRN785  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 1 - Lot no. ------
.
CSPRN786  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 2 - Company ------
.
CSPRN787  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 2 - Prosthesis Name ------
.
CSPRN788  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 2 - Cat/Ref no. ------
.
CSPRN789  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 2 - Lot no. ------
.
CSPRN790  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 3 - Company ------
.
CSPRN791  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 3 - Prosthesis Name ------
.
CSPRN792  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 3 - Cat/Ref no. ------
.
CSPRN793  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Tibial 3 - Lot no. ------
.
CSPRN794  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Component all in one  ------
.
CSPRN795  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSA,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Component base plate  ------
.
CSPRN796  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANST,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Component insert ------
.
CSPRN797  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSI,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Component stem  ------
.
CSPRN798  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSS,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Tibial Components  ------
.
CSPRN799  MOVE      ANST,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 1 - Company ------
.
CSPRN800  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 1 - Prosthesis Name ------
.
CSPRN801  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 1 - Cat/Ref no. ------
.
CSPRN802  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 1 - Lot no. ------
.
CSPRN803  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 2 - Company ------
.
CSPRN804  MOVE      ANSX,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 2 - Prosthesis Name ------
.
CSPRN805  MOVE      ANSX,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 2 - Cat/Ref no. ------
.
CSPRN806  MOVE      ANSX,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 2 - Lot no. ------
.
CSPRN807  MOVE      ANSX,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 3 - Company ------
.
CSPRN808  MOVE      ANSX,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 3 - Prosthesis Name ------
.
CSPRN809  MOVE      ANSX,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 3 - Cat/Ref no. ------
.
CSPRN810  MOVE      ANSX,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 3 - Lot no. ------
.
CSPRN811  MOVE      ANSX,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 4 - Company ------
.
CSPRN812  MOVE      ANSX,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 4 - Prosthesis Name ------
.
CSPRN813  MOVE      ANSX,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 4 - Cat/Ref no. ------
.
CSPRN814  MOVE      ANSX,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Proximal 4 - Lot no. ------
.
CSPRN815  MOVE      ANSX,IMPLTYPE
          MOVE      FOUR,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Proximal Component Shoulder ------
.
CSPRN816  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSD,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Proximal Component Wrist ------
.
CSPRN817  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSW,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Proximal Component Elbow ------
.
CSPRN818  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSE,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Proximal Component Ankle ------
.
CSPRN819  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSK,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Proximal Components ------
.
CSPRN820  MOVE      ANSX,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Spacer block medial ------
.
CSPRN821  MOVE      ANSC,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      FIVE,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Spacer wedge medial------
.
CSPRN822  MOVE      ANSC,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      SEVEN,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Spacer block lateral ------
.
CSPRN823  MOVE      ANSC,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      SIX,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Tibial Spacer wedge lateral------
.
CSPRN824  MOVE      ANSC,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      EIGHT,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Tibial Spacers ------
.
CSPRN825  MOVE      ANSC,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 1 - Company ------
.
CSPRN826  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 1 - Prosthesis Name ------
.
CSPRN827  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 1 - Cat/Ref no. ------
.
CSPRN828  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 1 - Lot no. ------
.
CSPRN829  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 2 - Company ------
.
CSPRN830  MOVE      ANSD,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 2 - Prosthesis Name ------
.
CSPRN831  MOVE      ANSD,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 2 - Cat/Ref no. ------
.
CSPRN832  MOVE      ANSD,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 2 - Lot no. ------
.
CSPRN833  MOVE      ANSD,IMPLTYPE
          MOVE      TWO,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 3 - Company ------
.
CSPRN834  MOVE      ANSD,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      ONE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 3 - Prosthesis Name ------
.
CSPRN835  MOVE      ANSD,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      TWO,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 3 - Cat/Ref no. ------
.
CSPRN836  MOVE      ANSD,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      THREE,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  Distal 3 - Lot no. ------
.
CSPRN837  MOVE      ANSD,IMPLTYPE
          MOVE      THREE,IMPLCNTR
          MOVE      FOUR,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Distal Shoulder------
.
CSPRN838  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSD,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Distal Wrist------
.
CSPRN839  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSW,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Distal Elbow------
.
CSPRN840  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSE,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if Distal Ankle------
.
CSPRN841  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      FIVE,IMPLRETN
          MOVE      ANSK,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------  X if No Distal Components ------
.
CSPRN842  MOVE      ANSD,IMPLTYPE
          MOVE      ONE,IMPLCNTR
          MOVE      SIX,IMPLRETN
          MOVE      SP70,IMPLSUBT
          CALL      IMPD0000                 * Get implant details
          GOTO      CSPRN870
.
.------ Arrival User Def Nurse 1 Code (oprardaf) ------
.
CSPRN843  MOVE      OPARUYN1,VARIABLE
          GOTO      CSPRN870
.
.------ Arrival User Def Nurse 2 Description (oprardaf) ------
.
CSPRN844  PACK      KEY6,OPARUYN1
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Arrival User Def Nurse 2 Code (oprardaf) ------
.
CSPRN845  MOVE      OPARUYN2,VARIABLE
          GOTO      CSPRN870
.
.------ Arrival User Def Nurse 2 Description (oprardaf) ------
.
CSPRN846  PACK      KEY6,OPARUYN2
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Arrival User Def Time 1 (oprardaf) ------
.
CSPRN847  MOVE      OPARUT01,VARIABLE
          GOTO      CSPRN870
.
.------ Expected due date (bokrc1af) ------
.
CSPRN848  UNPACK    BKREEDAT,CCENT,CYEAR,CMON,CDAY
          MATCH     CMON,SP70
          IF        !@EQUAL
            MOVE      CMON,F2
            LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
            PACK      VARIABLE,CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          ENDIF
          GOTO      CSPRN870
.
.------ Expected assessment time (bokrc1af) ------
.
CSPRN849  MOVE      BKREATIM,VARIABLE
          GOTO      CSPRN870
.
.------ Attending Doctor Code (bokrc1af) ------
.
CSPRN850  MOVE      BKREADOC,VARIABLE
          GOTO      CSPRN870
.
.------ Attending Doctor Description (bokrc1af) ------
.
CSPRN851  MATCH     SP70,BKREADOC
          GOTO      CSPRN100 IF EQUAL
          GOTO      CSPRN100 IF EOS
.
          MOVE      BKREADOC,KEY6
          CALL      RDDOCT1
          IF        OVRCD=1
            MOVE      BKREADOC,VARIABLE
          ELSE
            MOVE      DTITL,FMTTITLE
            MOVE      DGNAME,FMTGNAME
            MOVE      DSNAME,FMTSNAME
            CALL      DOCNM000
            MOVE      DOCFNAME,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Expected Length of Stay (bokrc1af) ------
.
CSPRN852  MOVE      DBKREELO,VARIABLE
          GOTO      CSPRN870
.
.------ Hospital Name/Description ------
.
CSPRN853  OPEN      CONTROLF,"controlf"
          READ      CONTROLF,ZERO;*43,IBCNMHOS
          IF        IBCNMHOS<>1
            MOVE      CNAME,VARIABLE
            GOTO      CSPRN870
          ENDIF
          MATCH     SP70,PMVXMHOS
          IF        !@EQUAL & !@EOS
            PACK      KEY3,PMVXMHOS,SP70
            CALL      RDPTHSP1
            MOVE      PTHSNAME,VARIABLE
          ELSE
            MOVE      CNAME,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ Operation Type ------
.
CSPRN854  MOVE      OPDATYPE,VARIABLE
          GOTO      CSPRN870
.
.------ Operation Type Description ------
.
CSPRN855  MATCH     SP70,OPDATYPE
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          PACK      KEY5,ANSO,ANSY,OPDATYPE,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Return To Theatre------
.
CSPRN856  MOVE      PMVXUVTH,VARIABLE
          GOTO      CSPRN870
.
.------Return To Theatre Description ------
.
CSPRN857  MATCH     SP70,PMVXUVTH
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          PACK      KEY5,ANSK,ANSB,PMVXUVTH,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Recovery Front ------
.
CSPRN858  MOVE      OPARTIRF,VARIABLE
          GOTO      CSPRN870
.
.------ Recovery Back ------
.
CSPRN859  MOVE      OPARTIRB,VARIABLE
          GOTO      CSPRN870
.
.------ Recovery Day ------
.
CSPRN860  MOVE      OPARTIRD,VARIABLE
          GOTO      CSPRN870
.
.------Time To ICU ------
.
CSPRN861  MOVE      OPARTICU,VARIABLE
          GOTO      CSPRN870
.
.------Exit Time ------
.
CSPRN862  MOVE      OPARTETC,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 1 Attending Patient Front Description (oprardaf) ------
.
CSPRN863  MATCH     SP70,OPARNUF1
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          MATCH     "1",OPCNURSE           * Use pmshcpaf for ED Nurse?
          GOTO      CSPR863A IF EQUAL      * Yes
.
          PACK      KEY6,OPARNUF1,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
CSPR863A  PACK      KEY10,OPARNUF1,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 1 Attending Patient Front Code (oprardaf) ------
.
CSPRN864  MOVE      OPARNUF1,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 2 Attending Patient Front Description (oprardaf) ------
.
CSPRN865  MATCH     SP70,OPARNUF2
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          MATCH     "1",OPCNURSE           * Use pmshcpaf for ED Nurse?
          GOTO      CSPR865A IF EQUAL      * Yes
.
          PACK      KEY6,OPARNUF2,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
CSPR865A  PACK      KEY10,OPARNUF2,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 2 Attending Patient Front Code (oprardaf) ------
.
CSPRN866  MOVE      OPARNUF2,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 1 Attending Patient Back Description (oprardaf) ------
.
CSPRN867  MATCH     SP70,OPARNUB1
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          MATCH     "1",OPCNURSE           * Use pmshcpaf for ED Nurse?
          GOTO      CSPR867A IF EQUAL      * Yes
.
          PACK      KEY6,OPARNUB1,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
CSPR867A  PACK      KEY10,OPARNUB1,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 1 Attending Patient Back Code (oprardaf) ------
.
CSPRN868  MOVE      OPARNUB1,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 2 Attending Patient Back Description (oprardaf) ------
.
CSPRN869  MATCH     SP70,OPARNUB2
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          MATCH     "1",OPCNURSE           * Use pmshcpaf for ED Nurse?
          GOTO      CSPR869A IF EQUAL      * Yes
.
          PACK      KEY6,OPARNUB2,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
CSPR869A  PACK      KEY10,OPARNUB2,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 2 Attending Patient Back Code (oprardaf) ------
.
CSPR1870  MOVE      OPARNUB2,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 1 Attending Patient Day Description (oprardaf) ------
.
CSPR1871  MATCH     SP70,OPARNUD1
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          MATCH     "1",OPCNURSE           * Use pmshcpaf for ED Nurse?
          GOTO      CSP1871A IF EQUAL      * Yes
.
          PACK      KEY6,OPARNUD1,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
CSP1871A  PACK      KEY10,OPARNUD1,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 1 Attending Patient Day Code (oprardaf) ------
.
CSPR1872  MOVE      OPARNUD1,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 2 Attending Patient Day Description (oprardaf) ------
.
CSPR1873  MATCH     SP70,OPARNUD2
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          MATCH     "1",OPCNURSE           * Use pmshcpaf for ED Nurse?
          GOTO      CSP1873A IF EQUAL      * Yes
.
          PACK      KEY6,OPARNUD2,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
CSP1873A  PACK      KEY10,OPARNUD2,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,CSPRN100
          PACK      FMTTITLE,SP20
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
          GOTO      CSPRN870
.
.------ Nurse 2 Attending Patient Day Code (oprardaf) ------
.
CSPR1874  MOVE      OPARNUD2,VARIABLE
          GOTO      CSPRN870
.
.------ Anaesthetic Code------
.
CSPR1875  MOVE      OPDAANAE,VARIABLE
          GOTO      CSPRN870
.
.------Anaesthetic Code Description ------
.
CSPR1876  MATCH     SP70,OPDAANAE
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          PACK      KEY5,ANSO,ANSA,OPDAANAE,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Arrival Delay Code------
.
CSPR1877  MOVE      OPARRLAT,VARIABLE
          GOTO      CSPRN870
.
.------Arrival Delay Description ------
.
CSPR1878  MATCH     SP70,OPARRLAT
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          PACK      KEY5,CATOS,OPARRLAT,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Recovery Delay Code------
.
CSPR1879  MOVE      OPARRDCD,VARIABLE
          GOTO      CSPRN870
.
.------Recovery Delay Description ------
.
CSPR1880  MATCH     SP70,OPARRDCD
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          PACK      KEY5,CATOU,OPARRDCD,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------Team 1 Surgery Start Time ------
.
CSPR1881  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGTISS,VARIABLE
          GOTO      CSPRN870
.
.------Team 1 Surgery End Time ------
.
CSPR1882  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGTISE,VARIABLE
          GOTO      CSPRN870
.
.------Team 1 Count Correct ------
.
CSPR1883  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGCCNT,VARIABLE
          GOTO      CSPRN870
.
.------ Procedure 1 Code ------
.
CSPR1884  MOVE      "1",DIM1
          MOVE      ONE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 1 Description ------
.
CSPR1885  MOVE      "1",DIM1
          MOVE      ONE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 2 Code ------
.
CSPR1886  MOVE      "1",DIM1
          MOVE      TWO,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 2 Description ------
.
CSPR1887  MOVE      "1",DIM1
          MOVE      TWO,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 3 Code ------
.
CSPR1888  MOVE      "1",DIM1
          MOVE      THREE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 3 Description ------
.
CSPR1889  MOVE      "1",DIM1
          MOVE      THREE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 4 Code ------
.
CSPR1890  MOVE      "1",DIM1
          MOVE      FOUR,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 4 Description ------
.
CSPR1891  MOVE      "1",DIM1
          MOVE      FOUR,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 5 Code ------
.
CSPR1892  MOVE      "1",DIM1
          MOVE      FIVE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 5 Description ------
.
CSPR1893  MOVE      "1",DIM1
          MOVE      FIVE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------Team 1 Specimens Microbiology------
.
CSPR1894  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGSPMI,VARIABLE
          GOTO      CSPRN870
.
.------Team 1 Specimens Anatomical Biology------
.
CSPR1895  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGSPAP,VARIABLE
          GOTO      CSPRN870
.
.------ Alert 1 Code ------
.
CSPR1896  MOVE      ONE,FORM2
          MOVE      ONE,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 1 Description ------
.
CSPR1897  MOVE      ONE,FORM2
	  MOVE      TWO,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 2 Code ------
.
CSPR1898  MOVE      TWO,FORM2
          MOVE      ONE,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 2 Description ------
.
CSPR1899  MOVE      TWO,FORM2
          MOVE      TWO,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 3 Code ------
.
CSPR1900  MOVE      THREE,FORM2
          MOVE      ONE,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 3 Description ------
.
CSPR1901  MOVE      THREE,FORM2
          MOVE      TWO,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 4 Code ------
.
CSPR1902  MOVE      FOUR,FORM2
          MOVE      ONE,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 4 Description ------
.
CSPR1903  MOVE      FOUR,FORM2
          MOVE      TWO,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 5 Code ------
.
CSPR1904  MOVE      FIVE,FORM2
          MOVE      ONE,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Alert 5 Description ------
.
CSPR1905  MOVE      FIVE,FORM2
          MOVE      TWO,FORM1
          CALL      PATALR00
          GOTO      CSPRN870
.
.------ Operating Surgeon Code ------
.
CSPR1906  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSPR196A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 0",DOPTSSIN
          GOTO      CSPR196A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
          GOTO      CSPRN870
.
.------ Operating Surgeon Description ------
.
CSPR1907  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSPR197A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 0",DOPTSSIN
          GOTO      CSPR197A IF NOT EQUAL
.
          MATCH     SP70,OPTSSCDE
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDDOCT1                  * read the doctors file
          BRANCH    OVRCD,CSPRN870
.
          STRIP     DTITL
          STRIP     DGNAME
          STRIP     DSNAME
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          PACK      VARIABLE,DOCFNAME
          RESET     DTITL
          RESET     DGNAME
          RESET     DSNAME
.
          GOTO      CSPRN870
.
.------ Staff Type 1 ------
.
CSPR1908  MOVE      ONE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 1 Description ------
.
CSPR1909  MOVE      ONE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 1 Code ------
.
CSPR1910  MOVE      ONE,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 1 Description ------
.
CSPR1911  MOVE      ONE,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 2 ------
.
CSPR1912  MOVE      TWO,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 2 Description ------
.
CSPR1913  MOVE      TWO,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 2 Code ------
.
CSPR1914  MOVE      TWO,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 2 Description ------
.
CSPR1915  MOVE      TWO,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 3 ------
.
CSPR1916  MOVE      THREE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 3 Description ------
.
CSPR1917  MOVE      THREE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 3 Code ------
.
CSPR1918  MOVE      THREE,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 3 Description ------
.
CSPR1919  MOVE      THREE,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 4 ------
.
CSPR1920  MOVE      FOUR,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 4 Description ------
.
CSPR1921  MOVE      FOUR,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 4 Code ------
.
CSPR1922  MOVE      FOUR,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 4 Description ------
.
CSPR1923  MOVE      FOUR,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 5 ------
.
CSPR1924  MOVE      FIVE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 5 Description ------
.
CSPR1925  MOVE      FIVE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 5 Code ------
.
CSPR1926  MOVE      FIVE,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 5 Description ------
.
CSPR1927  MOVE      FIVE,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 6 ------
.
CSPR1928  MOVE      SIX,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 6 Description ------
.
CSPR1929  MOVE      SIX,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 6 Code ------
.
CSPR1930  MOVE      SIX,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 6 Description ------
.
CSPR1931  MOVE      SIX,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 7 ------
.
CSPR1932  MOVE      SEVEN,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 7 Description ------
.
CSPR1933  MOVE      SEVEN,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 7 Code ------
.
CSPR1934  MOVE      SEVEN,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 7 Description ------
.
CSPR1935  MOVE      SEVEN,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 8 ------
.
CSPR1936  MOVE      EIGHT,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 8 Description ------
.
CSPR1937  MOVE      EIGHT,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 8 Code ------
.
CSPR1938  MOVE      EIGHT,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 8 Description ------
.
CSPR1939  MOVE      EIGHT,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 9 ------
.
CSPR1940  MOVE      NINE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 9 Description ------
.
CSPR1941  MOVE      NINE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 9 Code ------
.
CSPR1942  MOVE      NINE,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 9 Description ------
.
CSPR1943  MOVE      NINE,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 10 ------
.
CSPR1944  MOVE      TEN,FORM2
          MOVE      ONE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Type 10 Description ------
.
CSPR1945  MOVE      TEN,FORM2
          MOVE      TWO,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 10 Code ------
.
CSPR1946  MOVE      TEN,FORM2
          MOVE      THREE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff 10 Description ------
.
CSPR1947  MOVE      TEN,FORM2
          MOVE      FOUR,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Instrument Nurse Code ------
.
CSPR1948  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1948A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          COMPARE   TWO,OPTSSIND
          GOTO      CSP1948A IF NOT EQUAL
.
          MATCH     "1",OPTSINST
          GOTO      CSP1948A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
          GOTO      CSPRN870
.
.------ Instrument Nurse Description ------
.
CSPR1949  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1949A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          COMPARE   TWO,OPTSSIND
          GOTO      CSP1949A IF NOT EQUAL
.
          MATCH     "1",OPTSINST
          GOTO      CSP1949A IF NOT EQUAL
.
          MATCH     SP70,OPTSSCDE
          GOTO      CSPRN870 IF EQUAL
          GOTO      CSPRN870 IF EOS
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN870
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
.
          GOTO      CSPRN870
.
.------ Circulating Nurse Code ------
.
CSPR1950  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1950A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          COMPARE   TWO,OPTSSIND
          GOTO      CSP1950A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1950A IF EQUAL
          GOTO      CSP1950A IF EOS
.
          PACK      KEY5,ANSO,ANSN,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1950A
.
          MATCH     "C",TCINDC1
          GOTO      CSP1950A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
          GOTO      CSPRN870
.
.------ Circulating Nurse Description ------
.
CSPR1951  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1951A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          COMPARE   TWO,OPTSSIND
          GOTO      CSP1951A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1951A IF EQUAL
          GOTO      CSP1951A IF EOS
.
          PACK      KEY5,ANSO,ANSN,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1951A
.
          MATCH     "C",TCINDC1
          GOTO      CSP1951A IF NOT EQUAL
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,CSPRN870
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
.
          GOTO      CSPRN870
.
.------ Time Out Field------
.
CSPR1952  MOVE      OPARUT01,VARIABLE
          GOTO      CSPRN870
.
.------ Next Stationery Code Type 18------
.
CSPR1953  CALL      SLPC0000           * Save ibalpcaf file variables
.
          UNPACK    IBDTTXFL,DIM8,DIM6
          MOVE      IBLPURNO,URNUMBER
          MOVE      IBLPVISN,ADMISSNO
          MOVE      IBLPSKEY,SUBSYSKY
          MOVE      IBLPPRNT,SCHDPRNT
          MOVE      IBLPCOPY,SCHDCOPY
          MOVE      STATNCOD,SVSTNCOD
          MOVE      DIM6,STATNCOD
          PACK      LABELTYP,IBLPLAPR,IBLPLASC
          MOVE      IBLPFRE1,FREETXT1
          MOVE      IBLPFRE2,FREETXT2
          MOVE      IBLPFRE3,FREETXT3
          MOVE      IBLPFRE4,FREETXT4
          MOVE      IBLPFRE5,FREETXT5
          MOVE      IBLPFRE6,FREETXT6
          MOVE      IBLPFRE7,FREETXT7
.
          CALL      ADDPRN00
.
          CALL      RLPC0000           * Restore ibalpcaf file variables
.
          MOVE      SVSTNCOD,STATNCOD
.
          GOTO      CSPRN870
.
.------ Title of Stationery Template Form------
.
CSPR1954  MOVE      IBTHDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Scheduled Procedure Description 2 (oprdeaaf) ------
.
CSPR1955  MOVE      SP70,IDESC
          PACK      KEY17,OPDAPRV2,OPDADATE,SP70
          CALL      PATITMRD
          BRANCH    OVRCD,CSPRN100
          MOVE      IDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Scheduled Procedure Code 2 (oprdeaaf) ------
.
CSPR1956  MOVE      OPDAPRV2,VARIABLE
          GOTO      CSPRN870
.
.------ Scheduled Procedure Description 3 (oprdeaaf) ------
.
CSPR1957  MOVE      SP70,IDESC
          PACK      KEY17,OPDAPRV3,OPDADATE,SP70
          CALL      PATITMRD
          BRANCH    OVRCD,CSPRN100
          MOVE      IDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Scheduled Procedure Code 3 (oprdeaaf) ------
.
CSPR1958  MOVE      OPDAPRV3,VARIABLE
          GOTO      CSPRN870
.
.------ Operation description line 1 (oprdeaaf) ------
.
CSPR1959  MOVE      OPDADES1,VARIABLE
          GOTO      CSPRN870
.
.------ Operation description line 2 (oprdeaaf) ------
.
CSPR1960  MOVE      OPDADES2,VARIABLE
          GOTO      CSPRN870
.
.------ Operation description line 3 (oprdeaaf) ------
.
CSPR1961  MOVE      OPDADES3,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 Blood Loss Code ------
.
CSPR1962  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGBLOS,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 Blood Loss Description ------
.
CSPR1963  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          PACK      KEY5,CODETLA,OPSGBLOS,SP10
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
.
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 1 ------
.
CSPR1964  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT01,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 2 ------
.
CSPR1965  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT02,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 3 ------
.
CSPR1966  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT03,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 4 ------
.
CSPR1967  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT04,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 5 ------
.
CSPR1968  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT05,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 6 ------
.
CSPR1969  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT06,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 7 ------
.
CSPR1970  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT07,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 8 ------
.
CSPR1971  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT08,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 9 ------
.
CSPR1972  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT09,VARIABLE
          GOTO      CSPRN870
.
.------ Team 1 User Defined Time Field 10 ------
.
CSPR1973  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGUT10,VARIABLE
          GOTO      CSPRN870
.
.------ Surgeon Code ------
.
CSPR1974  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1974A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 1",DOPTSSIN
          GOTO      CSP1974A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1974A IF EQUAL
          GOTO      CSP1974A IF EOS
.
          PACK      KEY5,ANSO,ANSP,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1974A
.
          MATCH     "S",TCINDC1
          GOTO      CSP1974A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
          GOTO      CSPRN870
.
.------ Surgeon Description ------
.
CSPR1975  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1975A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 1",DOPTSSIN
          GOTO      CSP1975A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1975A IF EQUAL
          GOTO      CSP1975A IF EOS
.
          PACK      KEY5,ANSO,ANSP,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1975A
.
          MATCH     "S",TCINDC1
          GOTO      CSP1975A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDDOCT1                  * read the doctors file
          BRANCH    OVRCD,CSPRN870
.
          STRIP     DTITL
          STRIP     DGNAME
          STRIP     DSNAME
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          PACK      VARIABLE,DOCFNAME
          RESET     DTITL
          RESET     DGNAME
          RESET     DSNAME
.
          GOTO      CSPRN870
.
.------ Surgeon End Time ------
.
CSPR1976  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1976A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 1",DOPTSSIN
          GOTO      CSP1976A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1976A IF EQUAL
          GOTO      CSP1976A IF EOS
.
          PACK      KEY5,ANSO,ANSP,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1976A
.
          MATCH     "S",TCINDC1
          GOTO      CSP1976A IF NOT EQUAL
.
          MOVE      SP70,DIM5
          MOVE      OPTSETIM,DIM5
          MOVE      DIM5,VARIABLE
.
          GOTO      CSPRN870
.
. ------ Assistant Doctor 1 Code ------
.
CSPR1977  MOVE      ONE,FORM1
          MOVE      ONE,FORM1B
          CALL      GETASD00
          GOTO      CSPRN870
.
. ------ Assistant Doctor 1 Description ------
.
CSPR1978  MOVE      ONE,FORM1
          MOVE      TWO,FORM1B
          CALL      GETASD00
          GOTO      CSPRN870
.
. ------ Assistant Doctor 1 End Time ------
.
CSPR1979  MOVE      ONE,FORM1
          MOVE      THREE,FORM1B
          CALL      GETASD00
          GOTO      CSPRN870
.
. ------ Assistant Doctor 2 Code ------
.
CSPR1980  MOVE      TWO,FORM1
          MOVE      ONE,FORM1B
          CALL      GETASD00
          GOTO      CSPRN870
.
. ------ Assistant Doctor 2 Description ------
.
CSPR1981  MOVE      TWO,FORM1
          MOVE      TWO,FORM1B
          CALL      GETASD00
          GOTO      CSPRN870
.
. ------ Assistant Doctor 2 End Time ------
.
CSPR1982  MOVE      TWO,FORM1
          MOVE      THREE,FORM1B
          CALL      GETASD00
          GOTO      CSPRN870
.
. ------ Anaesthetist Code
.
CSPR1983  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1983A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 1",DOPTSSIN
          GOTO      CSP1983A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1983A IF EQUAL
          GOTO      CSP1983A IF EOS
.
          PACK      KEY5,ANSO,ANSP,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1983A
.
          MATCH     "N",TCINDC1
          GOTO      CSP1983A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
.
          GOTO      CSPRN870
.
. ------ Anaesthetist Description
.
CSPR1984  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1984A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 1",DOPTSSIN
          GOTO      CSP1984A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1984A IF EQUAL
          GOTO      CSP1984A IF EOS
.
          PACK      KEY5,ANSO,ANSP,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1984A
.
          MATCH     "N",TCINDC1
          GOTO      CSP1984A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDDOCT1                  * read the doctors file
          BRANCH    OVRCD,CSPRN870
.
          STRIP     DTITL
          STRIP     DGNAME
          STRIP     DSNAME
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          PACK      VARIABLE,DOCFNAME
          RESET     DTITL
          RESET     DGNAME
          RESET     DSNAME
.
          GOTO      CSPRN870
.
. ------ Anaesthetist End Time
.
CSPR1985  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1985A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 1",DOPTSSIN
          GOTO      CSP1985A IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      CSP1985A IF EQUAL
          GOTO      CSP1985A IF EOS
.
          PACK      KEY5,ANSO,ANSP,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSP1985A
.
          MATCH     "N",TCINDC1
          GOTO      CSP1985A IF NOT EQUAL
.
          MOVE      OPTSETIM,VARIABLE
.
          GOTO      CSPRN870
.
. ------ Other Medical Staff Code
.
CSPR1986  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1986A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 3",DOPTSSIN
          GOTO      CSP1986A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
.
          GOTO      CSPRN870
.
. ------ Other Medical Staff Description
.
CSPR1987  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1987A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 3",DOPTSSIN
          GOTO      CSP1987A IF NOT EQUAL
.
          MOVE      OPTSSCDE,VARIABLE
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDDOCT1                  * read the doctors file
          BRANCH    OVRCD,CSPRN870
.
          STRIP     DTITL
          STRIP     DGNAME
          STRIP     DSNAME
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          PACK      VARIABLE,DOCFNAME
          RESET     DTITL
          RESET     DGNAME
          RESET     DSNAME
.
          GOTO      CSPRN870
.
. ------ Other Medical Staff End Time
.
CSPR1988  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSP1988A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 3",DOPTSSIN
          GOTO      CSP1988A IF NOT EQUAL
.
          MOVE      OPTSETIM,VARIABLE
.
          GOTO      CSPRN870
.
.------ Staff Category Description 1 ------
.
CSPR1989  MOVE      ONE,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 2 ------
.
CSPR1990  MOVE      TWO,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 3 ------
.
CSPR1991  MOVE      THREE,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 4 ------
.
CSPR1992  MOVE      FOUR,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 5 ------
.
CSPR1993  MOVE      FIVE,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 6 ------
.
CSPR1994  MOVE      SIX,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 7 ------
.
CSPR1995  MOVE      SEVEN,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 8 ------
.
CSPR1996  MOVE      EIGHT,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 9 ------
.
CSPR1997  MOVE      NINE,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff Category Description 10 ------
.
CSPR1998  MOVE      TEN,FORM2
          MOVE      FIVE,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------Team 1 Surgery Delay Code ------
.
CSPR1999  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      OPSGSGDL,VARIABLE
          GOTO      CSPRN870
.
.------Team 1 Surgery Delay Description ------
.
CSPR2000  PACK      KEY11,OPDAUNIQ,ONE,SP70   * reading surgical table
          CALL      RDOPSRG1
          BRANCH    OVRCD,CSPRN100
.
          PACK      KEY5,ANST,ANSV,OPSGSGDL,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN100
.
          MOVE      TDESC,VARIABLE
          GOTO      CSPRN870
.
.------ Pre-operative time 1 (HH:MM) (oprdetaf) ------
.
CSPR2001  MOVE      OPDAPRE1,VARIABLE
          GOTO      CSPRN870
.
.------ Pre-operative time 2 (HH:MM) (oprdetaf) ------
.
CSPR2002  MOVE      OPDAPRE2,VARIABLE
          GOTO      CSPRN870
.
.------ Pre-operative time 3 (HH:MM) (oprdetaf) ------
.
CSPR2003  MOVE      OPDAPRE3,VARIABLE
          GOTO      CSPRN870
.
.------ Pre-operative time 4 (HH:MM) (oprdetaf) ------
.
CSPR2004  MOVE      OPDAPRE4,VARIABLE
          GOTO      CSPRN870
.
.------ Pre-operative time 5 (HH:MM) (oprdetaf) ------
.
CSPR2005  MOVE      OPDAPRE5,VARIABLE
          GOTO      CSPRN870
.
.------ Post-operative time 1 (HH:MM) (oprdetaf) ------
.
CSPR2006  MOVE      OPDAPOS1,VARIABLE
          GOTO      CSPRN870
.
.------ Post-operative time 2 (HH:MM) (oprdetaf) ------
.
CSPR2007  MOVE      OPDAPOS2,VARIABLE
          GOTO      CSPRN870
.
.------ Post-operative time 3 (HH:MM) (oprdetaf) ------
.
CSPR2008  MOVE      OPDAPOS3,VARIABLE
          GOTO      CSPRN870
.
.------ Post-operative time 4 (HH:MM) (oprdetaf) ------
.
CSPR2009  MOVE      OPDAPOS4,VARIABLE
          GOTO      CSPRN870
.
.------ Staff End Time 1 ------
.
CSPR2010  MOVE      ONE,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 2 ------
.
CSPR2011  MOVE      TWO,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 3 ------
.
CSPR2012  MOVE      THREE,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 4 ------
.
CSPR2013  MOVE      FOUR,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 5 ------
.
CSPR2014  MOVE      FIVE,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 6 ------
.
CSPR2015  MOVE      SIX,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 7 ------
.
CSPR2016  MOVE      SEVEN,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 8 ------
.
CSPR2017  MOVE      EIGHT,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 9 ------
.
CSPR2018  MOVE      NINE,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Staff End Time 10 ------
.
CSPR2019  MOVE      TEN,FORM2
          MOVE      SIX,FORM1
          CALL      OPRTSM00
          GOTO      CSPRN870
.
.------ Operating Surgeon End Time ------
.
CSPR2020  PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
CSPR220A  CALL      RKOPTSM1
          BRANCH    OVRCD,CSPRN870
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      CSPRN870 IF NOT EQUAL
.
          MATCH     " 0",DOPTSSIN
          GOTO      CSPR196A IF NOT EQUAL
.
          MOVE      SP70,DIM5
          MOVE      OPTSETIM,DIM5
          MOVE      DIM5,VARIABLE
.
          GOTO      CSPRN870
.
.------ Hospital ID ------
.
CSPR2021  OPEN      CONTROLF,"controlf"
          READ      CONTROLF,ZERO;*43,IBCNMHOS
          IF        IBCNMHOS<>1
            GOTO      CSPRN870
          ENDIF
          MATCH     SP70,PMVXMHOS
          IF        !@EQUAL & !@EOS
            PACK      KEY3,PMVXMHOS,SP70
            CALL      RDPTHSP1
            MOVE      PTHSHOSP,VARIABLE
          ENDIF
          GOTO      CSPRN870
.
.------ IHI Number ------
.
CSPR2022  PACK      VARIABLE,SP70
          MATCH     "1",PTCNUNET
          IF        @EQUAL
            CALL      GTIHINUM
            MOVE      IHINUMBR,VARIABLE     * IHI Number
          ENDIF
          GOTO      CSPRN870
.
.------ Time Patient Died (oprardaf) ------
.
CSPR2023  PACK      VARIABLE,SP70
          MOVE      OPARTEXP,VARIABLE       * Time Patient Died (HH:MM:SS)
          GOTO      CSPRN870
.
.------ Procedure 6 Code ------
.
CSPR2024  MOVE      "1",DIM1
          MOVE      SIX,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 6 Description ------
.
CSPR2025  MOVE      "1",DIM1
          MOVE      SIX,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 7 Code ------
.
CSPR2026  MOVE      "1",DIM1
          MOVE      SEVEN,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 7 Description ------
.
CSPR2027  MOVE      "1",DIM1
          MOVE      SEVEN,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 8 Code ------
.
CSPR2028  MOVE      "1",DIM1
          MOVE      EIGHT,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 8 Description ------
.
CSPR2029  MOVE      "1",DIM1
          MOVE      EIGHT,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 9 Code ------
.
CSPR2030  MOVE      "1",DIM1
          MOVE      NINE,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 9 Description ------
.
CSPR2031  MOVE      "1",DIM1
          MOVE      NINE,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 10 Code ------
.
CSPR2032  MOVE      "1",DIM1
          MOVE      TEN,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 10 Description ------
.
CSPR2033  MOVE      "1",DIM1
          MOVE      TEN,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 11 Code ------
.
CSPR2034  MOVE      "1",DIM1
          MOVE      TEN1,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 11 Description ------
.
CSPR2035  MOVE      "1",DIM1
          MOVE      TEN1,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 12 Code ------
.
CSPR2036  MOVE      "1",DIM1
          MOVE      TEN2,FORM2
          MOVE      ONE,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Procedure 12 Description ------
.
CSPR2037  MOVE      "1",DIM1
          MOVE      TEN2,FORM2
          MOVE      TWO,FORM1
          CALL      OPRPMB00
          GOTO      CSPRN870
.
.------ Caesarean Baby 1 Sex ------
.
CSPR2038  MOVE      ONE,FORM2          * Baby Number
          MOVE      ONE,FORM1          * Sex
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 1 DOB ------
.
CSPR2039  MOVE      ONE,FORM2          * Baby Number
          MOVE      TWO,FORM1          * DOB
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 1 Time of Birth ------
.
CSPR2040  MOVE      ONE,FORM2          * Baby Number
          MOVE      THREE,FORM1        * Time of Birth
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 1 U/R ------
.
CSPR2041  MOVE      ONE,FORM2          * Baby Number
          MOVE      FOUR,FORM1         * Baby U/R
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 2 Sex ------
.
CSPR2042  MOVE      TWO,FORM2          * Baby Number
          MOVE      ONE,FORM1          * Sex
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 2 DOB ------
.
CSPR2043  MOVE      TWO,FORM2          * Baby Number
          MOVE      TWO,FORM1          * DOB
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 2 Time of Birth ------
.
CSPR2044  MOVE      TWO,FORM2          * Baby Number
          MOVE      THREE,FORM1        * Time of Birth
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 2 U/R ------
.
CSPR2045  MOVE      TWO,FORM2          * Baby Number
          MOVE      FOUR,FORM1         * Baby U/R
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 3 Sex ------
.
CSPR2046  MOVE      THREE,FORM2        * Baby Number
          MOVE      ONE,FORM1          * Sex
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 3 DOB ------
.
CSPR2047  MOVE      THREE,FORM2        * Baby Number
          MOVE      TWO,FORM1          * DOB
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 3 Time of Birth ------
.
CSPR2048  MOVE      THREE,FORM2        * Baby Number
          MOVE      THREE,FORM1        * Time of Birth
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 3 U/R ------
.
CSPR2049  MOVE      THREE,FORM2        * Baby Number
          MOVE      FOUR,FORM1         * Baby U/R
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 4 Sex ------
.
CSPR2050  MOVE      FOUR,FORM2         * Baby Number
          MOVE      ONE,FORM1          * Sex
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 4 DOB ------
.
CSPR2051  MOVE      FOUR,FORM2         * Baby Number
          MOVE      TWO,FORM1          * DOB
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 4 Time of Birth ------
.
CSPR2052  MOVE      FOUR,FORM2         * Baby Number
          MOVE      THREE,FORM1        * Time of Birth
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 4 U/R ------
.
CSPR2053  MOVE      FOUR,FORM2         * Baby Number
          MOVE      FOUR,FORM1         * Baby U/R
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 5 Sex ------
.
CSPR2054  MOVE      FIVE,FORM2         * Baby Number
          MOVE      ONE,FORM1          * Sex
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 5 DOB ------
.
CSPR2055  MOVE      FIVE,FORM2         * Baby Number
          MOVE      TWO,FORM1          * DOB
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 5 Time of Birth ------
.
CSPR2056  MOVE      FIVE,FORM2         * Baby Number
          MOVE      THREE,FORM1        * Time of Birth
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 5 U/R ------
.
CSPR2057  MOVE      FIVE,FORM2         * Baby Number
          MOVE      FOUR,FORM1         * Baby U/R
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Unique Number ------
.
CSPR2058  PACK      VARIABLE,SP70
          MOVE      OPDAUNIQ,VARIABLE
          GOTO      CSPRN870
.
.------ Caesarean Baby 1 Birth Weight ------
.
CSPR2059  MOVE      ONE,FORM2          * Baby Number
          MOVE      FIVE,FORM1         * Baby Weight
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 1 Placenta Delivery Time ------
.
CSPR2060  MOVE      ONE,FORM2          * Baby Number
          MOVE      SIX,FORM1          * Placenta Delivery Time
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 2 Birth Weight ------
.
CSPR2061  MOVE      TWO,FORM2          * Baby Number
          MOVE      FIVE,FORM1         * Baby Weight
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 2 Placenta Delivery Time ------
.
CSPR2062  MOVE      TWO,FORM2          * Baby Number
          MOVE      SIX,FORM1          * Placenta Delivery Time
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 3 Birth Weight ------
.
CSPR2063  MOVE      THREE,FORM2        * Baby Number
          MOVE      FIVE,FORM1         * Baby Weight
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 3 Placenta Delivery Time ------
.
CSPR2064  MOVE      THREE,FORM2        * Baby Number
          MOVE      SIX,FORM1          * Placenta Delivery Time
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 4 Birth Weight ------
.
CSPR2065  MOVE      FOUR,FORM2         * Baby Number
          MOVE      FIVE,FORM1         * Baby Weight
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 4 Placenta Delivery Time ------
.
CSPR2066  MOVE      FOUR,FORM2         * Baby Number
          MOVE      SIX,FORM1          * Placenta Delivery Time
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 5 Birth Weight ------
.
CSPR2067  MOVE      FIVE,FORM2         * Baby Number
          MOVE      FIVE,FORM1         * Baby Weight
          CALL      OPRCBD00
          GOTO      CSPRN870
.
.------ Caesarean Baby 5 Placenta Delivery Time ------
.
CSPR2068  MOVE      FIVE,FORM2         * Baby Number
          MOVE      SIX,FORM1          * Placenta Delivery Time
          CALL      OPRCBD00
          GOTO      CSPRN870
.	  
.----- format patient sex long description ------	  
.	  
CSPR2069  MOVE      PSEX,DSEXCHAR	  
          CALL      SEXDSP00	      
          MOVE      DSEXLDES,VARIABLE        * Get sex long description		
          GOTO      CSPRN870	      
.
CSPR2070  MOVE      PURNO,MBIRURNO
          CALL      MULBIR00                 * Get multlple birth details
          MOVE      MBIRTYOR,VARIABLE
          GOTO      CSPRN870	      
.
CSPR2071  PACK      VARIABLE,PMPXPFSN,SP70   * Preferred Surname
          GOTO      CSPRN870
.
CSPR2072  PACK      VARIABLE,PMPXPFGN,SP70   * Preferred Given Name
          GOTO      CSPRN870
.
CSPR2073  PACK      VARIABLE,PSNAME,SP70     * Pref Surname instead of Actual SN
          MATCH     "1",PTCNPFSN
          IF        @EQUAL
            MATCH     SP70,PMPXPFSN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFSN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      CSPRN870
.
CSPR2074  PACK      VARIABLE,PGNAME,SP70     * Pref GN instead of Actual GN
          MATCH     "1",PTCNPFGN
          IF        @EQUAL
            MATCH     SP70,PMPXPFGN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFGN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      CSPRN870
.
CSPR2075  PACK      VARIABLE,PTMASNAM,SP70   * Pref Surname instead of 40char SN
          MATCH     "1",PTCNPFSN
          IF        @EQUAL
            MATCH     SP70,PMPXPFSN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFSN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      CSPRN870
.
CSPR2076  PACK      VARIABLE,PMPXUCC4,SP70       * Identify gender
          GOTO      CSPRN870
.
CSPR2077  PACK      VARIABLE,SP70                * Identify gender long desc
          MOVE      SP70,PTCDLDES
          MATCH     SP70,PMPXUCC4
          IF        !@EQUAL
            MOVE      "Gi",DIM2
            PACK      KEY5,DIM2,PMPXUCC4,SP70
            CALL      RDCODE1
            IF        OVRCD=0
              MOVE      PTCDLDES,VARIABLE
            ENDIF
          ENDIF
          GOTO      CSPRN870
.
CSPR2078  PACK      VARIABLE,PMPXATF1,SP70,SP70  * Identify gender Free Text
          GOTO      CSPRN870
.
CSPR2079  PACK      VARIABLE,PMPXUCC5,SP70       * Identify pronoun
          GOTO      CSPRN870
.
CSPR2080  PACK      VARIABLE,SP70                * Identif pronoun long desc
          MOVE      SP70,PTCDLDES
          MATCH     SP70,PMPXUCC5
          IF        !@EQUAL
            MOVE      "Gp",DIM2
            PACK      KEY5,DIM2,PMPXUCC5,SP70
            CALL      RDCODE1
            IF        OVRCD=0
              MOVE      PTCDLDES,VARIABLE
            ENDIF
          ENDIF
          GOTO      CSPRN870
.
CSPR2081  PACK      VARIABLE,PMPXATF2,SP70,SP70  * Identify Pronoun Free Text
          GOTO      CSPRN870
.
.------ Free Format Staff Name 1 ------
.
CSPR2082  MOVE      ONE,FORM2                    * Staff Number
          MOVE      ONE,FORM1                    * Staff name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 2 ------
.
CSPR2083  MOVE      TWO,FORM2                    * Staff Number
          MOVE      ONE,FORM1                    * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 3 ------
.
CSPR2084  MOVE      THREE,FORM2                  * Staff Number
          MOVE      ONE,FORM1                    * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 4 ------
.
CSPR2085  MOVE      FOUR,FORM2                   * Staff Number
          MOVE      ONE,FORM1                    * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 5 ------
.
CSPR2086  MOVE      FIVE,FORM2                   * Staff Number
          MOVE      ONE,FORM1                    * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 6 ------
.
CSPR2087  MOVE      SIX,FORM2                    * Staff Number
          MOVE      ONE,FORM1                    * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 7 ------
.
CSPR2088  MOVE      SEVEN,FORM2                  * Staff Number
          MOVE      ONE,FORM1                    * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 8 ------
.
CSPR2089  MOVE      EIGHT,FORM2                  * Staff Number
          MOVE      ONE,FORM1                    * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 9 ------
.
CSPR2090  MOVE      NINE,FORM2                  * Staff Number
          MOVE      ONE,FORM1                   * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------ Free Format Staff Name 10 ------
.
CSPR2091  MOVE      TEN,FORM2                   * Staff Number
          MOVE      ONE,FORM1                   * Staff Name (Free Format)
          CALL      OPRSDT00
          GOTO      CSPRN870
.
.------- Print Vars --------
.
CSPRN870  RESET     VARIABLE,IBDTPLEN
          LENSET    VARIABLE
          RESET     VARIABLE
          PRINT     *IBDTCOL,*+,VARIABLE;
          GOTO      CSPRN100
.
.------ formatting for Form fields and right justified variables ------
.
CSPRN880  COMPARE   ZERO,PRNTSTRT          * don't bump if printing full length
          GOTO      CSPRN890 IF EQUAL
.
          BUMP      VARIABLE,PRNTSTRT      * bump to starting position
.
.------ print the variable ------
.
CSPRN890  PRINT     *IBDTCOL,*+,VARIABLE;
          GOTO      CSPRN100
.
.------ end of medical record request form reached ------
.
CSPRN900  MOVE      FALSE,EXIT
.
.------ print new-lines until the end of page is reached ------
.
CSPRN910  PRINT     *N;
          ADD       ONE,LASTROW
.
          COMPARE   LASTROW,IBTHLENG          * test page length
          GOTO      CSPRN999 IF EQUAL
.
          GOTO      CSPRN910
.
.------ no details on file ------
.
CSPRN990  MOVE      TRUE,EXIT
.
CSPRN999  CALL      CLSPRINT                  * close the spool file
          RETURN
.
.--------------------------------------------------------------------
.  Routine to print the Medical Booking Form
.--------------------------------------------------------------------
MDPRN000  CALL      OPNPRINT                   * open the spool file
.
          MOVE      ONE,CURRROW
.
          PACK      KEY12,STATNCOD,SP70
          CALL      RSIBDET1                   * position on the details file
          CALL      RKIBDET1
          BRANCH    OVRCD,MDPRN990
.
          MATCH     STATNCOD,IBDTSCOD              * match stationary codes
          GOTO      MDPRN990 IF NOT EQUAL
.
          MOVE      IBDTROW,LASTROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      MDPRN200 IF EQUAL
.
.------ print new-lines until current row equals the one read in ------
.
MDPRN050  PRINT     *N;
          ADD       ONE,CURRROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      MDPRN200 IF EQUAL
.
          GOTO      MDPRN050
.
.------ read through the details file ------
.
MDPRN100  CALL      RKIBDET1
          BRANCH    OVRCD,MDPRN900
.
          MATCH     STATNCOD,IBDTSCOD           * match stationary codes
          GOTO      MDPRN900 IF NOT EQUAL
.
          MOVE      IBDTROW,LASTROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      MDPRN200 IF EQUAL
.
.------ print new-lines until current row equals the one read in ------
.
MDPRN110  PRINT     *N;
          ADD       ONE,CURRROW
.
          COMPARE   CURRROW,IBDTROW            * compare rows
          GOTO      MDPRN200 IF EQUAL
.
          GOTO      MDPRN110
.
.------ branch on the field type ------
.
MDPRN200  BRANCH    IBDTINDC,MDPRN300,MDPRN400
.
.------ the field is a text field ------
.
MDPRN300  RESET     IBDTTXFL,IBDTPLEN
          LENSET    IBDTTXFL
          RESET     IBDTTXFL
          PRINT     *IBDTCOL,*+,IBDTTXFL;
          GOTO      MDPRN100
.
.------ the field is a data field ------
.
MDPRN400  MOVE      IBDTTXFL,DIM5
          MOVE      DIM5,FORM5
.
          PACK      VARIABLE,SP70,SP70   * Clear here
.
          BRANCH    FORM5,MDPRN401,MDPRN402,MDPRN403,MDPRN404,MDPRN405: * 5
                          MDPRN406,MDPRN407,MDPRN408,MDPRN409,MDPRN410: * 10
                          MDPRN411,MDPRN412,MDPRN413,MDPRN414,MDPRN415: * 15
                          MDPRN416,MDPRN417,MDPRN418,MDPRN419,MDPRN420: * 20
                          MDPRN421,MDPRN422,MDPRN423,MDPRN424,MDPRN425: * 25
                          MDPRN426,MDPRN427,MDPRN428,MDPRN429,MDPRN430: * 30
                          MDPRN431,MDPRN432,MDPRN433,MDPRN434,MDPRN435: * 35
                          MDPRN436,MDPRN437,MDPRN438,MDPRN439,MDPRN440: * 40
                          MDPRN441,MDPRN442,MDPRN443,MDPRN444,MDPRN445: * 45
                          MDPRN446,MDPRN447,MDPRN448,MDPRN449,MDPRN450: * 50
                          MDPRN451,MDPRN451,MDPRN451,MDPRN451,MDPRN451: * 55
                          MDPRN451,MDPRN451,MDPRN451,MDPRN459,MDPRN460: * 60
                          MDPRN461,MDPRN462,MDPRN463,MDPRN464,MDPRN465: * 65
                          MDPRN466,MDPRN467,MDPRN468,MDPRN469,MDPRN470: * 70
                          MDPRN471,MDPRN472,MDPRN473,MDPRN474,MDPRN475: * 75
                          MDPRN476,MDPRN477,MDPRN478,MDPRN479,MDPRN480: * 80
                          MDPRN481,MDPRN482,MDPRN483,MDPRN484,MDPRN485: * 85
                          MDPRN486,MDPRN487,MDPRN488,MDPRN489,MDPRN490: * 90
                          MDPRN491,MDPRN492,MDPRN493,MDPRN494,MDPRN495: * 95
                          MDPRN496,MDPRN497,MDPRN498,MDPRN499,MDPRN500: * 100
                          MDPRN501,MDPRN502,MDPRN503,MDPRN504,MDPRN505: * 105
                          MDPRN506,MDPRN507,MDPRN508,MDPRN509,MDPRN510: * 110
                          MDPRN511,MDPRN512,MDPRN513,MDPRN514,MDPRN515: * 115
                          MDPRN516,MDPRN517,MDPRN518,MDPRN519,MDPRN520: * 120
                          MDPRN521,MDPRN522,MDPRN523,MDPRN524,MDPRN525: * 125
                          MDPRN526,MDPRN527,MDPRN528,MDPRN529,MDPRN530: * 130
                          MDPRN531,MDPRN532,MDPRN533,MDPRN534,MDPRN535: * 135
                          MDPRN536,MDPRN537,MDPRN538,MDPRN539,MDPRN540: * 140
                          MDPRN541,MDPRN542,MDPRN543,MDPRN544,MDPRN545: * 145
                          MDPRN546,MDPRN547,MDPRN548,MDPRN549,MDPRN550: * 150
                          MDPRN551,MDPRN552,MDPRN553,MDPRN554,MDPRN555: * 155
                          MDPRN556
          GOTO      MDPRN100
.
.------ format the U/R number ------
.
MDPRN401  MOVE      PURNO,VARIABLE
          MOVE      EIGHT,PRNTSTRT
          SUB       IBDTPLEN,PRNTSTRT
          GOTO      MDPRN880
.
.------ format the patients surname ------
.
MDPRN402  MOVE      PSNAME,VARIABLE
          GOTO      MDPRN870
.
.------ format the patients given name ------
.
MDPRN403  MOVE      PGNAME,VARIABLE
          GOTO      MDPRN870
.
.------ format the patients title ------
.
MDPRN404  MOVE      PTITL,VARIABLE
          GOTO      MDPRN870
.
.------ format the patients sex description ------
.
MDPRN405  MOVE      SP70,VARIABLE
          MOVE      PSEX,DSEXCHAR
          CALL      SEXDSP00 
          MOVE      DSEXSDES,VARIABLE
          GOTO      MDPRN870
.
.------ format the date of birth ------
.
MDPRN406  UNPACK    PBDATE,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          MOVE      CPCDATE,VARIABLE
          GOTO      MDPRN870
.
.------ format the patients age ------
.
MDPRN407  IF        PCEASE=1
            MOVE      PDECDTE,AGEDATE            * Date of Death
          ELSE
            PACK      AGEDATE,CCC,CYY,CMM,CDD    * today's date
          ENDIF
          REP       " 0",AGEDATE
.
          CALL      CALCAGE
          MOVE      PSAGEYRS,VARIABLE 
.          MOVE      PSAGE,VARIABLE
          MOVE      THREE,PRNTSTRT
          SUB       IBDTPLEN,PRNTSTRT
          GOTO      MDPRN880
.
.------ format the patients name ------
.
MDPRN408  MOVE      TWO,PACFRMT
          MOVE      PSNAME,PACSNAME
          MOVE      PGNAME,PACGNAME
          MOVE      PTITL,PACTITLE
          CALL      PACNAME                      * pack the patients name
          MOVE      PACFNAME,VARIABLE
          GOTO      MDPRN870
.
.------ format the patients address line 1 ------
.
MDPRN409  MOVE      PMEDI,VARIABLE
          GOTO      MDPRN870
.
.------ format the patients address line 1 ------
.
MDPRN410  MOVE      PADD1,VARIABLE
          GOTO      MDPRN870
.
.------ format the patients address line 2 ------
.
MDPRN411  MOVE      PADD2,VARIABLE
          GOTO      MDPRN870
.
.------ format the suburb ------
.
MDPRN412  MOVE      PSUBRB,VARIABLE
          GOTO      MDPRN870
.
.------ format the post code ------
.
MDPRN413  MOVE      PPOST,VARIABLE
          GOTO      MDPRN870
.
.------ format the private Telephone ------
.
MDPRN414  MOVE      PTELEP,VARIABLE
          GOTO      MDPRN870
.
.------ format the business Telephone ------
.
MDPRN415  MOVE      PTELEB,VARIABLE
          GOTO      MDPRN870
.
.------ format the marital status code ------
.
MDPRN416  MOVE      PMSTAT,VARIABLE
          GOTO      MDPRN870
.
.------ format the marital status description ------
.
MDPRN417  PACK      KEY5,ANSM,SP1,PMSTAT,SP10
          CALL      RDCODE1
          BRANCH    OVRCD,MDPRN100
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
.------ format the country of birth code ------
.
MDPRN418  MOVE      PCONT,VARIABLE
          GOTO      MDPRN870
.
.------ format the country of birth description ------
.
MDPRN419  PACK      KEY5,ANSC,SP1,PCONT,SP10
          CALL      RDCODE1
          BRANCH    OVRCD,MDPRN100
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
.------ format the religion code ------
.
MDPRN420  MOVE      PREG,VARIABLE
          GOTO      MDPRN870
.
.------ format the religion description ------
.
MDPRN421  PACK      KEY5,ANSR,SP1,PREG,SP10
          CALL      RDCODE1
          BRANCH    OVRCD,MDPRN100
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin name ------
.
MDPRN422  MOVE      PNKNAME,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin address line 1 ------
.
MDPRN423  MOVE      PNKADD1,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin address line 2 ------
.
MDPRN424  MOVE      PNKADD2,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin suburb ------
.
MDPRN425  MOVE      PNKSUBR,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin post code ------
.
MDPRN426  MOVE      PNKPOST,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin private telephone ------
.
MDPRN427  MOVE      PNKTELP,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin business telephone ------
.
MDPRN428  MOVE      PNKTELB,VARIABLE
          GOTO      MDPRN870
.
.------ format the next of kin relationship ------
.
MDPRN429  MOVE      PNKRELP,VARIABLE
          GOTO      MDPRN870
.
.------ format the pension number ------
.
MDPRN430  MOVE      PPENNO,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact name -------
.
MDPRN431  MOVE      PTMXECNM,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact address 1 -------
.
MDPRN432  MOVE      PTMXECA1,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact address 2 -------
.
MDPRN433  MOVE      PTMXECA2,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact address 3 -------
.
MDPRN434  MOVE      PTMXECA3,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact postcode -------
.
MDPRN435  MOVE      PTMXECPC,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact private phone -------
.
MDPRN436  MOVE      PTMXECPP,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact business phone -------
.
MDPRN437  MOVE      PTMXECBP,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Emergency contact relationship -------
.
MDPRN438  PACK      KEY10,PTMXECRE,SP10                               *C-201977
          CALL      RDPMREL1
          IF        OVRCD=1
            MOVE      PTMXECRE,PMRLDESC
          ENDIF
          MOVE      PMRLDESC,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative name -------
.
MDPRN439  MOVE      PTMXNRNM,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative address 1 -------
.
MDPRN440  MOVE      PTMXNRA1,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative address 2 -------
.
MDPRN441  MOVE      PTMXNRA2,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative address 3 -------
.
MDPRN442  MOVE      PTMXNRA3,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative postcode -------
.
MDPRN443  MOVE      PTMXNRPC,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative private phone -------
.
MDPRN444  MOVE      PTMXNRPP,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative business phone -------
.
MDPRN445  MOVE      PTMXNRBP,VARIABLE
          GOTO      MDPRN870
.
. ------- Format Nearest relative relationship -------
.
MDPRN446  MOVE      PTMXNRRE,VARIABLE
          GOTO      MDPRN870
.
.
.------ format Registered HCP. code (PMI Based) ------
.
MDPRN447  MOVE      PMPXRHC1,VARIABLE
          GOTO      MDPRN870
.
.------ format Registered HCP. description (PMI Based) ------
.
MDPRN448  PACK      PACFNAME,SP30,SP30,SP20
          PACK      KEY10,PMPXRHC1,SP70
          CALL      RDPMHCP1
          IF        OVRCD=0
            MOVE      PMHCSNAM,PACSNAME
            MOVE      PMHCGNAM,PACGNAME
            MOVE      PMHCTITL,PACTITLE
            MOVE      TWO,PACFRMT
            CALL      PACNAME
          ENDIF
          MOVE      PACFNAME,VARIABLE
          GOTO      MDPRN870
.
.------ format HCP practice code (PMI Based) ------
.
MDPRN449  MOVE      "-",ANS
          MATCH     SP2,PMPXR1GC
          IF        @EQUAL
            MOVE      SP1,ANS
          ENDIF
          PACK      VARIABLE,PMPXRH1G,ANS,PMPXR1GC,SP30
          GOTO      MDPRN870
.
.------ format HCP practice description (PMI Based) ------
.
MDPRN450  PACK      PMHGPNAM,SP30
          PACK      KEY10,PMPXRH1G,SP70
          PACK      KEY12,KEY10,PMPXR1GC,SP70
          CALL      RDPMHCG1
          MOVE      PMHGPNAM,VARIABLE
          GOTO      MDPRN870
.
. ------- HCP Practice Address details * PMI based -------
.
MDPRN451  PACK      KEY10,PMPXRH1G,SP70
          PACK      KEY12,KEY10,PMPXR1GC,SP70
          CALL      RDPMHCG1
          BRANCH    OVRCD,MDPRN870
.
          SUB       "50",FORM5
          LOAD      VARIABLE,FORM5,PMHGADD1,PMHGADD2,PMHGADD3:
                                   PMHGADD4,PMHGPOST,PMHGPTEL:
                                   PMHGPPNO,PMHGPFAX
          GOTO      MDPRN870
.
MDPRN459  MOVE      PTMXCELL,VARIABLE          * cellular telephone
          GOTO      MDPRN870
.
MDPRN460  MOVE      PTMXADD1,VARIABLE          * Postal Address line 1
          GOTO      MDPRN870
.
MDPRN461  MOVE      PTMXADD2,VARIABLE          * Postal Address line 2
          GOTO      MDPRN870
.
MDPRN462  MOVE      PTMXADD3,VARIABLE          * Postal Address line 3
          GOTO      MDPRN870
.
MDPRN463  MOVE      PTMXADD4,VARIABLE          * Postal Address line 4
          GOTO      MDPRN870
.
MDPRN464  MOVE      PTMXPOST,VARIABLE             * Postcode
          GOTO      MDPRN870
.
MDPRN465  MOVE      DBKREBOO,VARIABLE           * Booking/Admission No.
          GOTO      MDPRN870
.
.------ format Attending Doctors Title --------
.
MDPRN466  MOVE      BKREADOC,KEY6
          CALL      RDDOCT1
          IF        OVRCD=0
            MOVE      DTITL,VARIABLE
            GOTO      MDPRN870
          ENDIF
          MOVE       SP70,VARIABLE
          GOTO       MDPRN870
.
.------ format Doctors Given Name --------
.
MDPRN467  MOVE      BKREADOC,KEY6
          CALL      RDDOCT1
          IF        OVRCD=0
            MOVE      DGNAME,VARIABLE
            GOTO      MDPRN870
          ENDIF
          MOVE       SP70,VARIABLE
          GOTO       MDPRN870
.
.------ format Doctors Surname Name --------
.
MDPRN468  MOVE      BKREADOC,KEY6
          CALL      RDDOCT1
          IF        OVRCD=0
            MOVE      DSNAME,VARIABLE
            GOTO      MDPRN870
          ENDIF
          MOVE       SP70,VARIABLE
          GOTO       MDPRN870
.
.------ format Referring Doctors Title --------
.
MDPRN469  MOVE      BKRESDOC,KEY6
          CALL      RDDOCT1
          IF        OVRCD=0
            MOVE      DTITL,VARIABLE
            GOTO      MDPRN870
          ENDIF
          MOVE       SP70,VARIABLE
          GOTO       MDPRN870
.
.------ format Doctors Given Name --------
.
MDPRN470  MOVE      BKRESDOC,KEY6
          CALL      RDDOCT1
          IF        OVRCD=0
            MOVE      DGNAME,VARIABLE
            GOTO      MDPRN870
          ENDIF
          MOVE       SP70,VARIABLE
          GOTO       MDPRN870
.
.------ format Doctors Surname Name --------
.
MDPRN471  MOVE      BKRESDOC,KEY6
          CALL      RDDOCT1
          IF        OVRCD=0
            MOVE      DSNAME,VARIABLE
            GOTO      MDPRN870
          ENDIF
          MOVE       SP70,VARIABLE
          GOTO       MDPRN870
.
MDPRN472  UNPACK    BKREEDAT,CCENT,CYEAR,CMON,CDAY *Expected due date (CCYYMMDD)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN473  MOVE      BKREATIM,VARIABLE           * Expected assessment time
          GOTO      MDPRN870
.
MDPRN474  UNPACK    BKREPDAT,CCENT,CYEAR,CMON,CDAY *Expected due date (CCYYMMDD)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN475  MOVE      BKREPTIM,VARIABLE           * Pre-assessment time
          GOTO      MDPRN870
.
MDPRN476  UNPACK    BKREADAT,CCENT,CYEAR,CMON,CDAY *Procedure Date (Date booked)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN477  PACK      TCODE,ANSB,ANSK,SP70           * Booking type (Cat "BK")
          PACK      ACODE,BKRETYPE,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN478  PACK      TCODE,ANSB,ANSK,SP70        * Cancellation reason (Cat "BC")
          PACK      ACODE,BKRECANC,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN479  MOVE      BOKSTAT0,VARIABLE           * Booking status
          LOAD      VARIABLE,BKRESTAT,BOKSTAT1,BOKSTAT2,BOKSTAT3,BOKSTAT4
          GOTO      MDPRN870
.
MDPRN480  MOVE      BKREOMEM,VARIABLE           * Benefit fund member (Y/N/U)
          GOTO      MDPRN870
.
MDPRN481  MOVE      BKREPREV,VARIABLE           * Previous inpatient (Y/N/U)
          GOTO      MDPRN870
.
MDPRN482  PACK      TCODE,ANSB,ANSP,SP70      * Preferred accommodation (Cat BP)
          PACK      ACODE,BKREACCM,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN483  MOVE      BKREPROC,VARIABLE           * Waiting list procedure code
          GOTO      MDPRN870
.
MDPRN484  MOVE      DBKRECNT,VARIABLE           * Waiting list procedure count
          GOTO      MDPRN870
.
MDPRN485  MOVE      BKREWARD,VARIABLE           * Expected ward
          GOTO      MDPRN870
.
MDPRN486  PACK      KEY6,BKREWARD,SP70
          CALL      RDWARD1
          BRANCH    OVRCD,MDPRN870
          PACK      VARIABLE,WBDESC,SP30,SP30,SP30
          GOTO      MDPRN870
.
MDPRN487  MOVE      BKREEBED,VARIABLE           * Expected bed
          GOTO      MDPRN870
.
MDPRN488  PACK      TCODE,ANSP,SP70     * Patient Cat./Adm Class (Cat P)
          PACK      ACODE,BKRECLSS,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN489  PACK      TCODE,ANSA,SP70      * Adm Type/Pat. Class (Cat A)
          PACK      ACODE,BKREATYP,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN490  PACK      TCODE,ANSA,ANSC,SP70        * Department (Cat AC)
          PACK      ACODE,BKREDEPT,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN491  MOVE      BKRETDOC,VARIABLE           * Associated Doctor
          GOTO      MDPRN870
.
MDPRN492  PACK      TCODE,ANSC,ANSL,SP70        * Claim type (Cat CL)
          PACK      ACODE,BKRECLMT,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN493  MOVE      BKRERFGP,VARIABLE           * Referring GP
          GOTO      MDPRN870
.
MDPRN494  MOVE      BKRERFGP,VARIABLE           * Formatted Referring GP
          PACK      KEY10,BKRERFGP,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,MDPRN870
.
          MOVE      PMHCTITL,FMTTITLE
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLLE
          GOTO      MDPRN870
.
MDPRN495  MOVE      BKREGPPC,VARIABLE           * GP Practice code
          GOTO      MDPRN870
.
MDPRN496  MOVE      BKREGPFA,VARIABLE           * GPFH Approval Number
          GOTO      MDPRN870
.
MDPRN497  PACK      TCODE,ANST,SP70         * Resident Status (Cat T)
          PACK      ACODE,BKRERESI,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN498  PACK      TCODE,ANSC,ANSC,SP70         * Elective Adm Type  (Cat CC)
          PACK      ACODE,BKREEATY,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN499  MOVE      BKREECRA,VARIABLE           * ECR Approval Number
          GOTO      MDPRN870
.
MDPRN500  MOVE      BKREGPPT,VARIABLE           * GP Practice count
          GOTO      MDPRN870
.
MDPRN501  PACK      TCODE,ANSD,ANSA,SP70        * District of Residence (Cat DA)
          PACK      ACODE,BKREDOFR,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN502  MOVE      BKREOPER,VARIABLE           * Operator who made I/P Booking
          GOTO      MDPRN870
.
MDPRN503  MOVE      DBKREELO,VARIABLE           * Expected Length of Stay (Days)
          GOTO      MDPRN870
.
MDPRN504  UNPACK    BKREBKDT,CCENT,CYEAR,CMON,CDAY   * System Date
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN505  MOVE      BKREINDC,VARIABLE           * Pre-admission movement ind
          GOTO      MDPRN870
.
MDPRN506  PACK      KEY6,BKRXPOWD,SP70           * Post-Op Ward (patwr1af)
          CALL      RDWARD1
          BRANCH    OVRCD,MDPRN870
          MOVE      WBDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN507  MOVE      "ap",TCODE             * Admitting Ward (Cat ap)
          PACK      ACODE,BKRXADWD,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN508  UNPACK    BKRXCDTE,CCENT,CYEAR,CMON,CDAY * Contact Date (ccyymmdd)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN509  MOVE      BKRXPSTY,VARIABLE           * Parent Staying (0=NO,1=YES)
          GOTO      MDPRN870
.
MDPRN510  UNPACK    BKRXCNDT,CCENT,CYEAR,CMON,CDAY * Confirmation Date(ccyymmdd)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN511  PACK      TCODE,ANSB,ANSE,SP70    * Canc Booking Reaso W/L(Cat BE)
          PACK      ACODE,BKRXUDF1,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN512  PACK      TCODE,ANSB,ANSF,SP70       * Model of Care (Medbook Cat BF)
          PACK      ACODE,BKRXUDF2,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN513  PACK      TCODE,ANSB,ANSG,SP70        * UDF Field3 (Cat BG)
          PACK      ACODE,BKRXUDF3,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN514  PACK      TCODE,ANSB,ANSH,SP70       * User Defined Field 4 (Cat BH)
          PACK      ACODE,BKRXUDF4,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN515  PACK      TCODE,ANSV,ANSI,SP70        * Intended Stay (Cat VI)
          PACK      ACODE,BKRXUDF5,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN516  UNPACK    BKRXUDD1,CCENT,CYEAR,CMON,CDAY *User Defined Date1(ccyymmdd)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN517  UNPACK    BKRXUDD2,CCENT,CYEAR,CMON,CDAY *User Defined Date2(ccyymmdd)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN518  UNPACK    BKRXUDD3,CCENT,CYEAR,CMON,CDAY *User Defined Date3(ccyymmdd)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN519  UNPACK    BKRXUDD4,CCENT,CYEAR,CMON,CDAY *User Defined Date4(ccyymmdd)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN520  MOVE      BKRXUFF1,VARIABLE           * Procedure Description 1
          GOTO      MDPRN870
.
MDPRN521  MOVE      BKRXUFF2,VARIABLE           * Procedure Description 2
          GOTO      MDPRN870
.
MDPRN522  MOVE      BKRXUFF3,VARIABLE           * Procedure Description 3
          GOTO      MDPRN870
.
MDPRN523  MOVE      BKRXUFF4,VARIABLE           * User Defined Free Format 4
          GOTO      MDPRN870
.
MDPRN524  MOVE      BKRXEDC1,VARIABLE           * Extra Doctor Code 1 (pmshcpaf)
          GOTO      MDPRN870
.
MDPRN525  MOVE      BKRXEDC2,VARIABLE           * Extra Doctor Code 2 (pmshcpaf)
          GOTO      MDPRN870
.
MDPRN526  MOVE      BKRXEDC3,VARIABLE           * Extra Doctor Code 3 (pmshcpaf)
          GOTO      MDPRN870
.
MDPRN527  UNPACK    BKRXODTE,CCENT,CYEAR,CMON,CDAY * Operation Date (ccyymmdd)
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN528  PACK      TCODE,ANSS,ANSP,SP70       * Operation Period (Cat SP)
          PACK      ACODE,BKRXOPRD,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN529  UNPACK    BKRXCRDT,CCENT,CYEAR,CMON,CDAY * Date record created
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70
          GOTO      MDPRN870
.
MDPRN530  MOVE      BKRXCRTM,VARIABLE           * Time record created (hh:mm:ss)
          GOTO      MDPRN870
.
MDPRN531  MOVE      BKRXWEBC,VARIABLE           * WEB User Id rec. creator
          GOTO      MDPRN870
.
MDPRN532  PACK      TCODE,ANSS,SP70       * Admission Source (Category S)
          PACK      ACODE,BKRXASRC,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN533  PACK      TCODE,ANSB,ANSO,SP70        * Blood Type (category BO)
          PACK      ACODE,BKRXBLDT,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN534  MOVE      BKRXCTTY,VARIABLE       * Contact Type (Letter No.-watletaf)
          GOTO      MDPRN870
.
MDPRN535  MOVE      BKRXSGBK,VARIABLE           * Surgical Booking (0=No 1=Yes)
          GOTO      MDPRN870
.
MDPRN536  PACK      TCODE,ANSV,ANSF,SP70        * Forms (Cat VF)
          PACK      ACODE,BKRXFORM,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN537  MOVE      BKRXCNTM,VARIABLE           * Confirmation Time (hh:mm:ss)
          GOTO      MDPRN870
.
MDPRN538  MOVE      BKRXUDT1,VARIABLE           * User defined time 1 (hh:mm:ss)
          GOTO      MDPRN870
.
MDPRN539  MOVE      BKRXUDT2,VARIABLE           * User defined time 2 (hh:mm:ss)
          GOTO      MDPRN870
.
MDPRN540  MOVE      BKRXPOBD,VARIABLE           * Post-Op Bed (patwr1af)
          GOTO      MDPRN870
.
MDPRN541  MOVE      BKRXPOEC,VARIABLE     * Patient Online Eligibility Consent
          GOTO      MDPRN870
.
MDPRN542  PACK      TCODE,ANSD,ANSC,SP70        * Diet  (Cat DC)
          PACK      ACODE,BKRXDIET,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.
MDPRN543  PACK      TCODE,ANSO,ANSB,SP70        * Transport  (Cat OB)
          PACK      ACODE,BKRXTRAN,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      MDPRN870
.   
.----- format patient sex long description ------   
.   
MDPRN544  MOVE      PSEX,DSEXCHAR   
          CALL      SEXDSP00	
          MOVE      DSEXLDES,VARIABLE        * Get sex long description	  
          GOTO      MDPRN870	
.
MDPRN545  MOVE      PURNO,MBIRURNO
          CALL      MULBIR00                 * Get multlple birth details
          MOVE      MBIRTYOR,VARIABLE
          GOTO      MDPRN870
.
MDPRN546  PACK      VARIABLE,PMPXPFSN,SP70   * Preferred Surname
          GOTO      MDPRN870
.
MDPRN547  PACK      VARIABLE,PMPXPFGN,SP70   * Preferred Given Name
          GOTO      MDPRN870
.
MDPRN548  PACK      VARIABLE,PSNAME,SP70     * Pref Surname instead of Actual SN
          MATCH     "1",PTCNPFSN
          IF        @EQUAL
            MATCH     SP70,PMPXPFSN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFSN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      MDPRN870
.
MDPRN549  PACK      VARIABLE,PGNAME,SP70     * Pref GN instead of Actual GN
          MATCH     "1",PTCNPFGN
          IF        @EQUAL
            MATCH     SP70,PMPXPFGN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFGN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      MDPRN870
.
MDPRN550  PACK      VARIABLE,PTMASNAM,SP70   * Pref Surname instead of 40char SN
          MATCH     "1",PTCNPFSN
          IF        @EQUAL
            MATCH     SP70,PMPXPFSN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFSN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      MDPRN870
.
MDPRN551  PACK      VARIABLE,PMPXUCC4,SP70       * Identify gender
          GOTO      MDPRN870
.
MDPRN552  PACK      VARIABLE,SP70                * Identify gender long desc
          MOVE      SP70,PTCDLDES
          MATCH     SP70,PMPXUCC4
          IF        !@EQUAL
            MOVE      "Gi",DIM2
            PACK      KEY5,DIM2,PMPXUCC4,SP70
            CALL      RDCODE1
            IF        OVRCD=0
              MOVE      PTCDLDES,VARIABLE
            ENDIF
          ENDIF
          GOTO      MDPRN870
.
MDPRN553  PACK      VARIABLE,PMPXATF1,SP70,SP70  * Identify gender Free Text
          GOTO      MDPRN870
.
MDPRN554  PACK      VARIABLE,PMPXUCC5,SP70       * Identify pronoun
          GOTO      MDPRN870
.
MDPRN555  PACK      VARIABLE,SP70                * Identif pronoun long desc
          MOVE      SP70,PTCDLDES
          MATCH     SP70,PMPXUCC5
          IF        !@EQUAL
            MOVE      "Gp",DIM2
            PACK      KEY5,DIM2,PMPXUCC5,SP70
            CALL      RDCODE1
            IF        OVRCD=0
              MOVE      PTCDLDES,VARIABLE
            ENDIF
          ENDIF
          GOTO      MDPRN870
.
MDPRN556  PACK      VARIABLE,PMPXATF2,SP70,SP70  * Identify Pronoun Free Text
          GOTO      MDPRN870
.
.
.------- Print Vars --------
.
MDPRN870  RESET     VARIABLE,IBDTPLEN
          LENSET    VARIABLE
          RESET     VARIABLE
          PRINT     *IBDTCOL,*+,VARIABLE;
          GOTO      MDPRN100
.
.------ formatting for Form fields and right justified variables ------
.
MDPRN880  COMPARE   ZERO,PRNTSTRT          * don't bump if printing full length
          GOTO      MDPRN890 IF EQUAL
.
          BUMP      VARIABLE,PRNTSTRT      * bump to starting position
.
.------ print the variable ------
.
MDPRN890  PRINT     *IBDTCOL,*+,VARIABLE;
          GOTO      MDPRN100
.
.------ end of medical booking form reached ------
.
MDPRN900  MOVE      FALSE,EXIT
.
.------ print new-lines until the end of page is reached ------
.
MDPRN910  PRINT     *N;
          ADD       ONE,LASTROW
.
          COMPARE   LASTROW,IBTHLENG          * test page length
          GOTO      MDPRN999 IF EQUAL
          GOTO      MDPRN999 IF LESS
.
          GOTO      MDPRN910
.
.------ no details on file ------
.
MDPRN990  MOVE      TRUE,EXIT
.
MDPRN999  CALL      CLSPRINT                  * close the spool file
          RETURN
.
+
.*******************************************************************************
. OUTFIL00 - Check if the user id has an outpatienty site. If they do open
.            the correct outpatient files according to the site. If they do not
.            have a site make sure the default prefix of out is is used to
.            open the files.
.*******************************************************************************
OUTFIL00  PACK      KEY10,IBLPRUID,SP70
          CALL      RDWBSE1
          BRANCH    OVRCD,OUTFIL10
          MATCH     SP70,WBSESIT             * Does the user have a site
          GOTO      OUTFIL50 IF NOT EQUAL
.
OUTFIL10  MATCH     "out",CFILEPRE           * Is out currently open
          IF        !@EQUAL
            MOVE      "out",OSTFILE          * open default prefix of out
            MOVE      OSTFILE,CFILEPRE       * Save Current File Prefix
            CALL      OPNOUT00               * Open out Outpatient Files
          ENDIF
.
          MOVE      ZERO,EXIT
          GOTO      OUTFIL99
.
OUTFIL50  MOVE      WBSESIT,KEY6
          CALL      RDSITA1
          BRANCH    OVRCD,OUTFIL90           * error invalid site code
.
          MATCH     OSTFILE,CFILEPRE         * Save Current File Prefix
          IF        !@EQUAL
            MOVE      OSTFILE,CFILEPRE       * Save Current File Prefix
            CALL      OPNOUT00               * Open prefixed Outpatient Files
          ENDIF
.
          MOVE      ZERO,EXIT
          GOTO      OUTFIL99
.
OUTFIL90  MOVE      "Outpatient Site Invalid",WEBTITLE
          CALL      WEBERR00
          MOVE      ONE,EXIT
.
OUTFIL99  RETURN
.
.--------------------------------------------------------------------
. Get the implant details for joint registry form printing
. Inputs :   IMPLTYPE: Implant Type      (Cat WO indicator 1)
.                    : eg (F)emoral
.            IMPLSUBT: Implant Sub Type  (Cat WO indicator 2)
.                      eg Stem, Head
.            IMPLCNTR: Implant Counter
.                      1,2,3,4,5.....
.            IMPLRETN: Return Detail
.                      1 = Company Name
.                      2 = Prosthesis Name
.                      3 = Cat/Ref no.
.                      4 = Lot no.
.                      5 = Return X if details exists
.                      6 = Return X if not details exist for IMPLTYPE
.--------------------------------------------------------------------
IMPD0000  MOVE      ZERO,F1
.
          PACK      KEY13,OPDAUNIQ,SP70
          CALL      RSOPPIM1
IMPD1000  CALL      RKOPPIM1
          BRANCH    OVRCD,IMPD9000
.
          MATCH     OPDAUNIQ,OPPIUNID
          GOTO      IMPD9000 IF NOT EQUAL
.
          MATCH     JREGFORM,OPPIRCNT       * Joint Reg Form
          GOTO      IMPD1000 IF NOT EQUAL
.
          PACK      KEY75,OPPIICDE,OPPIBCOD,SP70
          CALL      RDOPTHI1                * Read Implant Details
          BRANCH    OVRCD,IMPD1000
.
          MATCH     SP70,OPTITYIM
          GOTO      IMPD1000 IF EQUAL
.
          PACK      KEY5,ANSO,ANSW,OPTITYIM,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,IMPD1000
.
          MATCH     TCINDC1,IMPLTYPE        * Check Implant Type
          GOTO      IMPD1000 IF NOT EQUAL
.
          MATCH     SP70,IMPLSUBT
          IF        !@EQUAL
            MATCH     TCINDC2,IMPLSUBT        * Check Sub Type
            GOTO      IMPD1000 IF NOT EQUAL
          ENDIF
.
          ADD       ONE,F1
.
          COMPARE   IMPLCNTR,F1
          GOTO      IMPD1000 IF NOT EQUAL
.
IMPD8000  BRANCH    IMPLRETN,IMPD8100,IMPD8120,IMPD8130,IMPD8140,IMPD8150
          GOTO      IMPD9999
.
IMPD8100  MOVE      OPTIMANU,VARIABLE       * Company
          GOTO      IMPD9999
.
IMPD8120  MOVE      OPTIDESC,VARIABLE       * Prosthesis Name
          GOTO      IMPD9999
.
IMPD8130  MOVE      OPTICODE,VARIABLE       * Cat/Ref no.
          GOTO      IMPD9999
.
IMPD8140  MOVE      OPPILTSN,VARIABLE       * Lot no.
          GOTO      IMPD9999
.
IMPD8150  MOVE      ANSX,VARIABLE           * Return X if sub type
          GOTO      IMPD9999
.
IMPD9000  IF        IMPLRETN=6
            MOVE      ANSX,VARIABLE         * No details exists for IMPLTYPE
          ENDIF
          GOTO      IMPD9999
.
IMPD9999  RETURN
+
.--------------------------------------------------------------------
. Get Patient Eligibility details
.--------------------------------------------------------------------
GTPTLG00  OPEN      PATELGA1,"patelgaf"
.
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDPTELG1
          IF        OVRCD=1
            CALL      CLPATELG
          ENDIF
.
          MATCH     "1",PTCNOECE
          GOTO      GTPTLG50 IF EQUAL
.
          PACK      KEY20,ADMISSNO,SP70
          LJUSTIFY  KEY20
          PACK      KEY23,KEY20,Z70
          CALL      RSPMEEH1
GTPTLG10  CALL      RPPMEEH1
          BRANCH    OVRCD,GTPTLG40
.
          MATCH     KEY20,PMHEARID
          GOTO      GTPTLG40 IF NOT EQUAL
.
          GOTO      GTPTLG50
.
GTPTLG40  CALL      CLPMSEEH
.
GTPTLG50  MATCH     "1",PTCNWSIN
          GOTO      GTPTLG90 IF NOT EQUAL
.
          MATCH     "1",PTCNOECW
          GOTO      GTPTLG90 IF NOT EQUAL
.
          COMPARE   ONE,OECWINDC
          GOTO      GTPTLG90 IF NOT EQUAL
.
          PACK      KEY20,ADMISSNO,SP70
          LJUSTIFY  KEY20
          PACK      KEY23,KEY20,Z70
          CALL      RSWBEEH1
GTPTLG60  CALL      RPWBEEH1
          BRANCH    OVRCD,GTPTLG90
.
          MATCH     KEY20,WBEHARID
          GOTO      GTPTLG90 IF NOT EQUAL
.
          CALL      MVEEH000
.
          GOTO      GTPTLG99
.
GTPTLG90  CALL      CLWEBEEH
.
GTPTLG99  RETURN
+
.--------------------------------------------------------------------
. Get Patient Fees Information Details
.--------------------------------------------------------------------
GPFINF00  PACK      KEY8,ADMISSNO,SP70
          CALL      RDPMAIL1
          BRANCH    OVRCD,GPFINF99
.
          PACK      KEY15,PMALFINO,SP2,ONE
          CALL      RDPMFID1
          IF        OVRCD=1
            CALL      CLPMFI00
          ENDIF
GPFINF99  RETURN
.
.--------------------------------------------------------------------
. Get Mental Health Visit Details
.--------------------------------------------------------------------
GMHVIS00  PACK      KEY8,ADMISSNO,SP70
          CALL      RDMHVIS1
          BRANCH    OVRCD,GMHVIS99
.
GMHVIS99  RETURN
.
.--------------------------------------------------------------------
. Get Patient Insurance Details
.--------------------------------------------------------------------
GPTEXT00  MATCH     SP70,ACLAIM
          GOTO      GPTEXT99 IF EQUAL
          GOTO      GPTEXT99 IF EOS
.
          PACK      KEY11,ADMISSNO,ACLAIM,SP70
          CALL      RDPMEXT1
          IF        OVRCD=1
            CALL      CLPMSEXT
            CALL      CLPATIN1
            GOTO      GPTEXT99
          ENDIF
.
          MATCH     SP70,PMEXICOD
          GOTO      GPTEXT99 IF EQUAL
          GOTO      GPTEXT99 IF EOS
.
          OPEN      PATIN1A1,"patin1af"
          PACK      KEY6,PMEXICOD,SP70
          CALL      RDINSR1
          IF        OVRCD=1
            CALL      CLPATIN1
            GOTO      GPTEXT99
          ENDIF
.
GPTEXT99  RETURN
.--------------------------------------------------------------------
. Get the patients compensable details if any.
.--------------------------------------------------------------------
. REQUIRES: CLAIMCOD - Claim Code
.           ADMISSNO - Admission number
.
. RETURNS : CLMDET1 = If private the patients health fund name
.                     or W/C, TAC, DVA if compensable
.                     or NILL if not compensable and not private
.           CLMDET2 = If private the patients health fund member number
.                     or W/C, TAC claim numbers, DVA number and (Card Colour)
.                        if compensable
.                     or blank if not compensable and not private
.--------------------------------------------------------------------
CMPH0000  MOVE      SP70,CLMDET1
          MOVE      SP70,CLMDET2
.
          MATCH     SP70,CLAIMCOD
          GOTO      CMPH9999 IF EQUAL
.
          PACK      KEY5,ANSC,ANSL,CLAIMCOD,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CMPH9999
.
          MATCH     "3",TCINDC5                  * Self insured
          GOTO      CMPH9000 IF EQUAL
.
.------ see what type of claim we have if any exists ------
.
          MOVE      ZERO,FORM2
CMPH1000  ADD       ONE,FORM2
          COMPARE   SIX,FORM2
          GOTO      CMPH5000 IF NOT LESS
.
          LOAD      ANS,FORM2,TCINDC1,TCINDC2,TCINDC3:
                    TCINDC4,TCINDC5
.
          CMATCH    "W",ANS                      * Work Cover
          GOTO      CMPH2000 IF EQUAL
.
          CMATCH    "M",ANS                      * TAC
          GOTO      CMPH3000 IF EQUAL
.
          CMATCH    "V",ANS                      * VET
          GOTO      CMPH4000 IF EQUAL
.
          GOTO      CMPH1000
.
CMPH2000  OPEN      PATWC1A1,"patwc1af"          * Work Cover
          MOVE      "W/C",CLMDET1
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDWCOM1
          BRANCH    OVRCD,CMPH9999
.
          OPEN      PMSWX1A1,"pmswx1af"
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDPMWX11
          IF        OVRCD=0
            MATCH     "3",PMWXCSTA               * Cancelled
            GOTO      CMPH9999 IF EQUAL
          ENDIF
.
          MOVE      WCCLMNO,CLMDET2
          GOTO      CMPH9999
.
CMPH3000  OPEN      PATWMAB1,"patwmabf"          * TAC
          MOVE      "TAC",CLMDET1
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDWMAB1
          BRANCH    OVRCD,CMPH9999
.
          MOVE      MREFNO,CLMDET2
          GOTO      CMPH9999
.
CMPH4000  OPEN      PATWVET1,"patwvetf"          * VET
          MOVE      "DVA",CLMDET1
          PACK      KEY8,ADMISSNO,SP70
          CALL      RDWVET1
          BRANCH    OVRCD,CMPH9999
.
          MOVE      SP70,TDESC
          MOVE      THREE,DIM1
          CALL      GCCARD00
          MATCH     SP70,PMCDDVAC
          IF        !@EQUAL & !@EOS
            PACK      KEY5,ANSD,ANSX,PMCDDVAC,SP70
            CALL      RDCODE1
            IF        OVRCD = 1
              MOVE      PMCDDVAC,TDESC
            ENDIF
          ENDIF
.
          MOVE      TDESC,DIM1
.
          CLEAR     CLMDET2
          STRIP     VCLMNO
          APPEND    VCLMNO,CLMDET2
          APPEND    " (",CLMDET2
          APPEND    DIM1,CLMDET2
          APPEND    ")",CLMDET2
          RESET     CLMDET2
          GOTO      CMPH9999
.
CMPH5000  MATCH     SP70,PFUNDH
          GOTO      CMPH9999 IF EQUAL
.
          PACK      KEY14,PFUNDH,ZERO4,SP70      * Display health fund
          CALL      RDFUND1
          IF        OVRCD=1
            MOVE      PFUNDH,HFNAME
          ENDIF
.
          MOVE      HFNAME,CLMDET1
          MOVE      PFNDMM,CLMDET2
          GOTO      CMPH9999
.
CMPH9000  MOVE      "NIL",CLMDET1                * Self insured
          MOVE      SP70,CLMDET2
.
CMPH9999  RETURN
+
.----------------------------------------------------------------------------
. Get oprpmbaf details    PARAMETERS: DIM1 Team Number FORM2 Procedure Number
.                                   : FORM1 Variable Number
.----------------------------------------------------------------------------
OPRPMB00  MOVE      ZERO,FORM2A
.
          PACK      KEY14,OPDAUNIQ,DIM1,SP70
          CALL      RSOPPMB1
OPRPMB10  CALL      RKOPPMB1
          BRANCH    OVRCD,OPRPMB99
.
          MATCH     OPDAUNIQ,OPPMUNID
          GOTO      OPRPMB99 IF NOT EQUAL
.
.         MATCH     DIM1,OPPMTMNO
.         GOTO      OPRPMB99 IF NOT EQUAL
.
          ADD       ONE,FORM2A
.
          COMPARE   FORM2A,FORM2
          GOTO      OPRPMB10 IF NOT EQUAL
.
          BRANCH    FORM1,OPRPMB20,OPRPMB30
          GOTO      OPRPMB99
.
OPRPMB20  MOVE      OPPMCMBS,VARIABLE
          GOTO      OPRPMB99
.
OPRPMB30  MATCH     SP70,OPPMCMBS
          GOTO      OPRPMB99 IF EQUAL
          GOTO      OPRPMB99 IF EOS
.
          PACK      KEY17,OPPMCMBS,OPDADATE,SP70
          CALL      PATITMRD
          IF        OVRCD=0
            MOVE      IDESC,VARIABLE
          ENDIF
          GOTO      OPRPMB99
.
OPRPMB99  RETURN
+
.----------------------------------------------------------------------------
.         Get Caesarean Birth Details (oprcbdaf) 
.
.         PARAMETERS:
.           FORM1 - Variable Type (1-Sex, 2-DOB, 3-Time of Birth, 4-Baby UR
.                                  5-Birth Weight 6-Placenta Delivery Time)
.           FORM2 - Baby Number (1 - 5)
.----------------------------------------------------------------------------
OPRCBD00  CLOSE     WEBTPLA1
          OPEN      OPRCBDA1,"oprcbdaf"
.
          MOVE      SP70,VARIABLE
          MOVE      ZERO,COUNTER
          PACK      KEY12,OPDAUNIQ,SP70
          CALL      RSOPCBD1
OPRCBD05  CALL      RKOPCBD1
          BRANCH    OVRCD,OPRCBD99
.
          MATCH     OPDAUNIQ,OPCBUNIQ
          GOTO      OPRCBD99 IF NOT EQUAL
. 
          MATCH     "1",OPCBDELT            * deleted?
          GOTO      OPRCBD05 IF EQUAL       * yes; skip
.
          ADD       ONE,COUNTER
.
          COMPARE   FORM2,COUNTER           * matching baby number?
          GOTO      OPRCBD05 IF NOT EQUAL
.
          BRANCH    FORM1,OPRCBD10,OPRCBD20,OPRCBD30,OPRCBD40,OPRCBD50:
                          OPRCBD60
          GOTO      OPRCBD99
.
OPRCBD10  MOVE      OPCBBSEX,DSEXCHAR
          CALL      SEXDSP00                
          MOVE      DSEXASC1,VARIABLE
          GOTO      OPRCBD99
.
OPRCBD20  UNPACK    OPCBBDOB,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          PACK      VARIABLE,CPCDATE,SP70   * Date of birth
          GOTO      OPRCBD99
.
OPRCBD30  MOVE      OPCBBTME,VARIABLE       * Time of birth
          GOTO      OPRCBD99
.
OPRCBD40  MOVE      OPCBBURN,VARIABLE       * Baby U/R
          GOTO      OPRCBD99
.
OPRCBD50  MOVE      OPCBBWGT,VARIABLE       * Birth Weight
          GOTO      OPRCBD99
.
OPRCBD60  MOVE      OPCBPDTM,VARIABLE       * Placenta Delivery Time
          GOTO      OPRCBD99
.
OPRCBD99  CLOSE     OPRCBDA1
          OPEN      WEBTPLA1,"webtplaf"
          RETURN
.
.----------------------------------------------------------------------------
. Get patalraf details    PARAMETERS: FORM2 Alert Number FORM1 Variable
.----------------------------------------------------------------------------
PATALR00  MOVE      ZERO,FORM2A
.
          PACK      KEY16,PURNO,SP70
          CALL      RSPTALR1
PATALR10  CALL      RKPTALR1
          BRANCH    OVRCD,PATALR99
.
          MATCH     PURNO,PTALURNO
          GOTO      PATALR99 IF NOT EQUAL
.
          ADD       ONE,FORM2A
.
          COMPARE   FORM2A,FORM2
          GOTO      PATALR10 IF NOT EQUAL
.
          BRANCH    FORM1,PATALR20,PATALR30
          GOTO      PATALR99
.
PATALR20  MOVE      PTALCODE,VARIABLE
          GOTO      PATALR99
.
PATALR30  MATCH     SP70,PTALCODE
          GOTO      PATALR99 IF EQUAL
          GOTO      PATALR99 IF EOS
.
          MATCH     SP70,PTALCATG
          GOTO      PATALR99 IF EQUAL
          GOTO      PATALR99 IF EOS
.
          PACK      KEY5,PTALCATG,PTALCODE,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,PATALR99
          MOVE      TDESC,VARIABLE
.
          GOTO      PATALR99
.
PATALR99  RETURN
+
.----------------------------------------------------------------------------
. Get oprtsmaf details    PARAMETERS: FORM2 Staff Number FORM1 Variabel Number
.----------------------------------------------------------------------------
OPRTSM00  MOVE      SP70,VARIABLE
          MOVE      ZERO,FORM2A
.
          PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
OPRTSM10  CALL      RKOPTSM1
          BRANCH    OVRCD,OPRTSM99
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      OPRTSM99 IF NOT EQUAL
.
          COMPARE   ZERO,OPTSSIND
          GOTO      OPRTSM10 IF EQUAL
.
          ADD       ONE,FORM2A
.
          COMPARE   FORM2,FORM2A
          GOTO      OPRTSM10 IF NOT EQUAL
.
          BRANCH    FORM1,OPRTSM20,OPRTSM30,OPRTSM40,OPRTSM50,OPRTSM60,OPRTSM70
          GOTO      OPRTSM99
.
OPRTSM20  MOVE      DOPTSSIN,VARIABLE
          GOTO      OPRTSM99
.
OPRTSM30  BRANCH    OPTSSIND,OPRTSM31,OPRTSM32,OPRTSM33
          GOTO      OPRTSM99
.
OPRTSM31  MOVE      "Doctor",VARIABLE
          GOTO      OPRTSM99
.
OPRTSM32  MOVE      "Nurse",VARIABLE
          GOTO      OPRTSM99
.
OPRTSM33  MOVE      "Other",VARIABLE
          GOTO      OPRTSM99
.
OPRTSM40  MOVE      OPTSSCDE,VARIABLE
          GOTO      OPRTSM99
.
OPRTSM50  BRANCH    OPTSSIND,OPRTSM51,OPRTSM52,OPRTSM51
          GOTO      OPRTSM99
.
OPRTSM51  MATCH     SP70,OPTSSCDE
          GOTO      OPRTSM99 IF EQUAL
          GOTO      OPRTSM99 IF EOS
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDDOCT1                  * read the doctors file
          BRANCH    OVRCD,OPRTSM99
.
          STRIP     DTITL
          STRIP     DGNAME
          STRIP     DSNAME
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          PACK      VARIABLE,DOCFNAME
          RESET     DTITL
          RESET     DGNAME
          RESET     DSNAME
.
          GOTO      OPRTSM99
.
OPRTSM52  MATCH     SP70,OPTSSCDE
          GOTO      OPRTSM99 IF EQUAL
          GOTO      OPRTSM99 IF EOS
.
          PACK      KEY6,OPTSSCDE,SP70
          CALL      RDOPNUR1
          BRANCH    OVRCD,OPRTSM99
          PACK      FMTTITLE,SP20
          MOVE      OPNRGNAM,FMTGNAME
          MOVE      OPNRSNAM,FMTSNAME
          CALL      DOCNM000
          MOVE      DOCFNAME,VARIABLE
.
          GOTO      OPRTSM99
.
OPRTSM60  BRANCH    OPTSSIND,OPRTSM61,OPRTSM62,OPRTSM63
          GOTO      OPRTSM99
.
OPRTSM61  MOVE      "OP",DIM2
          GOTO      OPRTSM64
.
OPRTSM62  MOVE      "ON",DIM2
          GOTO      OPRTSM64
.
OPRTSM63  MOVE      "OF",DIM2
          GOTO      OPRTSM64
.
OPRTSM64  PACK      KEY5,DIM2,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,CSPRN870
.
          MOVE      TDESC,VARIABLE
.
          GOTO      OPRTSM99
.
OPRTSM70  MOVE      SP70,DIM5
          MOVE      OPTSETIM,DIM5
          MOVE      DIM5,VARIABLE
.
          GOTO      OPRTSM99
.
OPRTSM99  RETURN
.
.----------------------------------------------------------------------------
. GETASD00 - Read Assistant Doctor details from oprtsmaf
.----------------------------------------------------------------------------
GETASD00  MOVE      ZERO,FORM1A
          PACK      KEY35,OPDAUNIQ,SP70
          CALL      RSOPTSM1
GETASD10  CALL      RKOPTSM1
          BRANCH    OVRCD,GETASD99
.
          MATCH     OPDAUNIQ,OPTSUNID
          GOTO      GETASD99 IF NOT EQUAL
.
          MATCH     " 1",DOPTSSIN
          GOTO      GETASD10 IF NOT EQUAL
.
          MATCH     SP70,OPTSSTYP
          GOTO      GETASD10 IF EQUAL
          GOTO      GETASD10 IF EOS
.
          PACK      KEY5,ANSO,ANSP,OPTSSTYP,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,GETASD10
.
          MATCH     "A",TCINDC1
          GOTO      GETASD10 IF NOT EQUAL
.
          ADD       ONE,FORM1A
          COMPARE   FORM1,FORM1A
          GOTO      GETASD10 IF NOT EQUAL
.
          BRANCH    FORM1B,GETASD50,GETASD60,GETASD70
          GOTO      GETASD99
.
GETASD50  MOVE      OPTSSCDE,VARIABLE
          GOTO      GETASD99
.
GETASD60  PACK      KEY6,OPTSSCDE,SP70
          CALL      RDDOCT1                  * read the doctors file
          BRANCH    OVRCD,GETASD99
.
          STRIP     DTITL
          STRIP     DGNAME
          STRIP     DSNAME
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          PACK      VARIABLE,DOCFNAME
          RESET     DTITL
          RESET     DGNAME
          RESET     DSNAME
.
          GOTO      GETASD99
.
GETASD70  MOVE      SP70,DIM5
          MOVE      OPTSETIM,DIM5
          MOVE      DIM5,VARIABLE
.
          GOTO      GETASD99
.
GETASD99  RETURN
+
.----------------------------------------------------------------------------
. Get oprsdtaf details    PARAMETERS: FORM2 Staff Number FORM1 Variabel Number
.----------------------------------------------------------------------------
OPRSDT00  MOVE      SP70,VARIABLE
          MOVE      ZERO,FORM2A   
.
          PACK      KEY89,OPDAUNIQ,SP70   * Read oprsdtaf file
          CALL      RSOPSDT1
OPRSDT01  CALL      RKOPSDT1
          BRANCH    OVRCD,OPRSDT99
.
          MATCH     OPSDUNIQ,OPDAUNIQ
          GOTO      OPRSDT99 IF NOT EQUAL
.
          MATCH     " 0",OPSDSTYP         * check for Operating Surgeon
          GOTO      OPRSDT01 IF EQUAL
.
          MATCH     OPSDSTCC,SP70         * check for empty Staff Category Code
          GOTO      OPRSDT01 IF EQUAL
.
          MATCH     " 1",OPSDSTYP
          IF        @EQUAL
            MOVE      "OP",D2             * Doctor Category
          ENDIF
.
          MATCH     " 2",OPSDSTYP
          IF        @EQUAL
            MOVE      "ON",D2             * Nurse Category
          ENDIF
.
          MATCH     " 3",OPSDSTYP
          IF        @EQUAL
            MOVE      "OF",D2             * Other Category
          ENDIF
.
          PACK      KEY5,D2,OPSDSTCC,SP70 * Read patcodes file
          CALL      RDCODE1
          BRANCH    OVRCD,OPRSDT01
.
          MATCH     "F",TCINDC3           * check Indicator 3 value for F
          GOTO      OPRSDT01 IF NOT EQUAL
.
          ADD       ONE,FORM2A
          COMPARE   FORM2,FORM2A
          GOTO      OPRSDT01 IF NOT EQUAL
.
          BRANCH    FORM1,OPRSDT02
          GOTO      OPRSDT99
.
OPRSDT02  MOVE      OPSDSNAM,VARIABLE    * Display Staff name (Free Format)
          GOTO      OPRSDT99
.
OPRSDT99  RETURN
.----------------------------------------------------------------------------
. MVEEH000 - Move webeehaf data to pmseehaf. For template variables 
.----------------------------------------------------------------------------
MVEEH000  MOVE      WBEHARID,PMHEARID
          MOVE      WBEHRPTC,PMHERPTC
          MOVE      WBEHCTID,PMHECTID
          MOVE      WBEHBENL,PMHEBENL
          MOVE      WBEHCFAC,PMHECFAC
          MOVE      WBEHCPAM,PMHECPAM
          MOVE      WBEHCPDR,PMHECPDR
          MOVE      WBEHCPDI,PMHECPDI
          MOVE      WBEHCPFN,PMHECPFN
          MOVE      WBEHCPMN,PMHECPMN
          MOVE      WBEHCPRN,PMHECPRN
          MOVE      WBEHEXAM,PMHEEXAM
          MOVE      WBEHEADI,PMHEEADI
          MOVE      WBEHEXBA,PMHEEXBA
          MOVE      WBEHEXDI,PMHEEXDI
          MOVE      WBEHFSTA,PMHEFSTA
          MOVE      WBEHFRID,PMHEFRID
          MOVE      WBEHFSCD,PMHEFSCD
          MOVE      WBEHMSCD,PMHEMSCD
          MOVE      WBEHPEAI,PMHEPEAI
          MOVE      WBEHPSCD,PMHEPSCD
          MOVE      WBEHTNAM,PMHETNAM
          MOVE      WBEHTBDI,PMHETBDI
          MOVE      WBEHTBSC,PMHETBSC
          MOVE      WBEHVCID,PMHEVCID
          MOVE      WBEHUDTE,PMHEUDTE
          MOVE      WBEHUTIM,PMHEUTIM
.
MVEEH999  RETURN
+
          INC       IBAWEBCD
          INC       PATHFCF
.
          INC       DXPATCOD
          INC       DXPATMAS
          INC       GTIHINUM
          INC       PRTACCF
          INC       SJOGLABL
          INC       TFILENAM
...       INC       AAECOTIO/INC
          INC       AAEDI1IO/INC
          INC       AAEDE1IO/INC
...       INC       AAERTAIO/INC
          INC       AAEGRCIO/INC
          INC       ACCDIAIO/INC
          INC       ACCCMTIO/INC
          INC       BOKRC1IO/INC
          INC       BOKRX1IO/INC
          INC       BOKDIAIO/INC
          INC       EMRGRCIO/INC
          INC       EMRICDIO/INC
          INC       EMRLOCIO/INC
          INC       EMRSITIO/INC
          INC       EMRUNKIO/INC
          INC       EMRVISIO/INC
          INC       EMRVCDIO/INC
          INC       NHIMASIO/INC
          INC       NZPSPRIO/INC
          INC       NHIETHIO/INC
          INC       MEHDLSIO/INC
          INC       MEHVI1IO/INC
          INC       OPRARDIO/INC                                       *I-55477
          INC       OPRCBDIO/INC       * Caesarean Birth Details
          INC       OPRDEAIO/INC
          INC       OPRSRGIO/INC
          INC       OPRPMBIO/INC
          INC       OPRSESIO/INC
          INC       OPRTHIIO/INC
          INC       OPRSDTIO/INC
          INC       OPRTSMIO/INC
          INC       OPRDECIO/INC
          INC       OPREXPIO/INC
          INC       OPRSCRIO/INC
          INC       OPRCLIIO/INC
          INC       OPRJRRIO/INC
          INC       OPRPIMIO/INC
          INC       OPRPOCIO/INC
          INC       OPROPRIO/INC
          INC       OPRNURIO/INC                                       *I-56364
          INC       OUTCTYIO/INC
          INC       OUTCLIIO/INC
          INC       OUTSITIO/INC
          INC       OUTMA1IO/INC
          INC       OUTHEDIO/INC
          INC       OUTXSCIO/INC
          INC       IBATMDIO/INC
          INC       IBALPCIO/INC
          INC       PATASFIO/INC
          INC       PATAXEIO/INC
          INC       PATDGWIO/INC
          INC       PATDADIO/INC
          INC       PATHSPIO/INC
          INC       PATLINIO/INC            * UR Linkage Details       *I-62428
          INC       OUTBOCIO/INC
          INC       OUTDIAIO/INC
          INC       OUTBOAIO/INC
          INC       OUTBB1IO/INC
          INC       OUTSESIO/INC
          INC       OUTRF1IO/INC
          INC       PATALRIO/INC
          INC       PMSALNIO/INC
          INC       PATCRDIO/INC    * I CAR 47681
          INC       PATCRGIO/INC    * I CAR 47681
          INC       PATCUNIO/INC
          INC       PATELGIO/INC
          INC       PMSEEHIO/INC
          INC       PMSEEDIO/INC
          INC       PMSSESIO/INC
          INC       PMSSEDIO/INC
          INC       PMSERCIO/INC
          INC       PMSAILIO/INC
          INC       PMSDTCIO/INC
          INC       PMSFIDIO/INC
          INC       PMSHCLIO/INC
          INC       PMSHCPIO/INC
          INC       PMSAELIO/INC
          INC       PMSEXTIO/INC
          INC       PMSHCGIO/INC
          INC       PMSPX2IO/INC    ***
          INC       PMSVX1IO/INC    ***
          INC       PMSEVTIO/INC
          INC       PMSFCIIO/INC
          INC       PMSWORIO/INC
          INC       PATDSCIO/INC
          INC       PATIN1IO/INC
          INC       PATITMIO/INC
          INC       PATWC1IO/INC
          INC       PMSWX1IO/INC
          INC       PATWMAIO/INC
          INC       PATWR1IO/INC
          INC       PATWVEIO/INC
          INC       PATVISIO/INC
          INC       PATVADIO/INC
          INC       PATVKCIO/INC
          INC       PATNIDIO/INC
          INC       PATCMCIO/INC
          INC       PATDO1IO/INC
          INC       PATFN1IO/INC
          INC       PATGO1IO/INC
          INC       PATICOIO/INC
          INC       PATICDIO/INC
          INC       PATMA1IO/INC
          INC       PATMI1IO/INC
          INC       PATMCHIO/INC
          INC       PATMMBIO/INC
          INC       PATRE1IO/INC
          INC       PATTRNIO/INC
          INC       WATTR1IO/INC
          INC       WATTX1IO/INC
          INC       WATRTDIO/INC
          INC       PATHOSIO/INC
          INC       PATDOCTM
..          INC       LABELPMI
.
          INC       CALCAGE
          INC       CALCYRS
.
          INC       IBALABPT
.
          INC       WEBLBAAE
          INC       WEBLBBOK
          INC       WEBLBEMR
          INC       WEBLBINP
          INC       WEBLBPMI
          INC       WEBLBWAT
          INC       WEBLBOUT
          INC       WEBLBALL
          INC       WEBLBERC
          INC       WEBLBCAR
          INC       WEBLBREF
.
          INC       WEBDITEM
          INC       WEBBGRND
.
          INC       AGECHK
          INC       KYNAEDOC
          INC       CLPATDSC
          INC       WEBGNCUN                *Generate clinic unit number
          INC       CLPATELG
          INC       CLPMSFID
          INC       CLPATMAS
          INC       CLOPRARD
          INC       CLOPRJRR
          INC       CLWEBEEH
          INC       OPRPOCTM
          INC       PACADDRS
.         INC       PMSHCGKY
          INC       PATDOCCD
          INC       PATGBCRN                                            *I-48227
          INC       PATVKCRD
          INC       PATSHEET      *Patient Identification Sheet
          INC       PATSHT2       *Patient Identifiaction Sheet (St. Andrews)
          INC       PATSHT3       *Patient Identifiaction Sheet (H.O.A)
          INC       PATSHT4       *Patient Identifiaction Sheet (Modbury)
          INC       PATSHT5       *Patient Identifiaction Sheet (Melb. Clinic)
          INC       PATSHT6       *Patient Identifiaction Sheet (User Defined)
          INC       LABELAGE
          INC       IBALPCCD
.
          INC       DATECONV
          INC       PRINTAAE
          INC       PRINTHON
          INC       PMIGTNID
          INC       PATSETLB
          INC       PATPRLAB
          INC       RCHLABEL
          INC       OUTPRLAB
          INC       NHOSPDAY                * Calculate days in hospital
          INC       NAMSTRCD
          INC       CLBOKRC1
          INC       CLBOKRX1
          INC       CLPMSEEH
          INC       CLPMSEED
          INC       CLPMSEXT
          INC       CLPATIN1
          INC       CLPMSSES
          INC       CLPMSSED
          INC       CLPMSERC
          INC       CLPMSVX1
          INC       CLPMSPX2
          INC       CLPATVIS
          INC       CLPATMIS
          INC       CLPMSCEX
          INC       CLOPRSES
          INC       CLOPRDEA
          INC       CLNHIMAS
          INC       CLWEBEED
          INC       CLWEBERC
          INC       CLWEBSES
          INC       CLWEBSED
          INC       DAYOFWEK
          INC       GETALTID
          INC       PATMCHRD                * Miscellaneous Charges read routine
          INC       PMSCEXCD
          INC       PATCRSFP
          INC       GETEFDRG
          INC       PATITMRD
.
          INC       PATCFAIO/INC
          INC       PATFX1IO/INC
          INC       PATPR1IO/INC
          INC       SCRPSTIO/INC
          INC       SCRSBGIO/INC
          INC       SCRSLTIO/INC
          INC       SCRMASIO/INC
          INC       ALLCASIO/INC
          INC       ALLDIAIO/INC
          INC       ALLREFIO/INC
          INC       ALLERCIO/INC
          INC       ALLENCIO/INC
          INC       ALLPRRIO/INC
          INC       MEHHONIO/INC
          INC       PMSDUNIO/INC
          INC       PATINVIO/INC
          INC       ALLEQUIO/INC
          INC       PMSCEXIO/INC
          INC       PMSCCDIO/INC
          INC       PMSRELIO/INC
          INC       PMSTLEIO/INC
          INC       PMSDIVIO/INC
          INC       PMSTEMIO/INC
          INC       PATHGPIO/INC
          INC       PATQMHIO/INC
.
          INC       PATATRIO/INC
          INC       MULBIR00
.***************************************  Start of AN-SNAP change     Car 273181
          INC       PMSUPGIO/INC
          INC       PMSAPGIO/INC
          INC       PMSPITIO/INC
          INC       PMSIMPIO/INC
          INC       PATFIMIO/INC
.***************************************  End of AN-SNAP change       Car 273181
          INC       PMSIHIIO/INC            * IHI Details
          INC       PMSEDGIO/INC       * Effective DRG Dates
          INC       VISMDTIO/INC
          INC       VISMTXIO/INC
.
          INC       WEBEEHIO/INC
          INC       WEBEEDIO/INC
          INC       WEBERCIO/INC
          INC       WEBSESIO/INC
          INC       WEBSEDIO/INC
.
