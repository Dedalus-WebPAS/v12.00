.------------------------------------------------------------
.  Web Common Area
.------------------------------------------------------------
PRGERROR  DIM       40    * Program Error
SERVERID  DIM       8     * Server Program ID
PRGERRCT  DIM       3     * Error Count
WGATEWAY  FORM      1     * WEB Gateway 0=CGI 1=SERVLET
FIFONAME  DIM       127   * Trigger Fifo Name
CONFNAME  DIM       127   * Configuration File - HTTP Request parameters
RPLYNAME  DIM       127   * Reply Fifo Name
TEMPCDIR  DIM       127   * BSP first Directory
TEMPLDIR  DIM       127   * BSP second Directory
REPORTNO  FORM      2     * Report No
TEMPLATE  DIM       3     * Template No
USERID    DIM       10    * Remote User ID
URNUMBER  DIM       8     * Remote User ID
ADMISSNO  DIM       8     * Remote User ID
EXITFLAG  DIM       1     * Exit Flag
TEMP3DIR  DIM       127   * BSP third Directory
TEMP4DIR  DIM       127   * BSP fourth Directory
TEMP5DIR  DIM       127   * BSP fifth Directory
TEMP6DIR  DIM       127   * BSP sixth Directory
TEMP7DIR  DIM       127   * BSP seventh Directory
TEMP8DIR  DIM       127   * BSP eighth Directory
TEMP9DIR  DIM       127   * BSP ninth Directory
TEMP0DIR  DIM       127   * BSP tenth Directory
.
          INC       STDDETFD
          INC       WEBERRFD/INC
.
PRGID     INIT      "WANSWERT"
PRGNAM    INIT      "Web Answer Control Program - Servlet"
VERSION   INIT      "V12.00.00"
.
          MOVE      "0",F3
          MOVE      F3,PRGERRCT
          MOVE      "0",WGATEWAY 
          MOVE      "0",REPORTNO
          MOVE      SP70,TEMPLATE
          MOVE      SP70,USERID
          MOVE      SP70,URNUMBER
          MOVE      SP70,ADMISSNO
          MOVE      SP70,PRGERROR
          MOVE      SP70,EXITFLAG
.
          KEYIN     SERVERID
          KEYIN     FIFONAME
          KEYIN     CONFNAME
          KEYIN     RPLYNAME
          KEYIN     TEMPCDIR
          KEYIN     TEMPLDIR
          KEYIN     TEMP3DIR
          KEYIN     TEMP4DIR
          KEYIN     TEMP5DIR
          KEYIN     TEMP6DIR
          KEYIN     TEMP7DIR
          KEYIN     TEMP8DIR
          KEYIN     TEMP9DIR
          KEYIN     TEMP0DIR
.
          OPEN      CONTROLF,"controlf"
          OPEN      WEBERRA1,"weberraf"
          CALL      IBACLOCK
.
MAIN1000  CLOCK     TIME,CTIMEIS
          PACK      KEY24,SERVERID,CCC,CYY,CMM,CDD,CTIMEIS,SP70
          REP       " 0",KEY24
          CALL      RDWBER1
          IF        OVRCD=0
            GOTO      MAIN1000
          ENDIF
          UNPACK    KEY24,WBERPID,WBERDAT,WBERTIM
          MOVE      "Server Started",WBERERR
          MOVE      SP70,WBERUID
          MOVE      SP70,WBERREP
          MOVE      SP70,WBERTMP
          MOVE      SP70,WBERURN
          MOVE      SP70,WBERVIS
          MOVE      PRGERRCT,F3
          MOVE      F3,WBERCNT
          MOVE      SP70,WBERSPA
.
          MOVE      ZERO,OVRCD
          TRAP      OVERCOND IF IO
          CALL      WRWBER1
          TRAPCLR   IO
.
          CHAIN     SERVERID
.
          INC       WEBERRIO/INC
          INC       IBADATE
          INC       IBATIME
          INC       JULCON
          INC       DMYCON
          INC       IBACOMN
          INC       IBAOVRIO/INC
.
