.        INC       PATLETIO.INC
.
.        FILE I/O REQUESTS FOR PATIENT LETTER FILE
.
.OVRCD   FORM     1        0 = NOT OVER
.                          1 = OVER
.KEY6    DIM      5        KEY FOR PATLETR1 AND PATLETR2
.
RAPTLET1  MOVE     ZERO,OVRCD
          RESET    KEY6
          READ     PATLETR1,KEY6;ANS
          GOTO     OVERCOND IF OVER
          RETURN
.
RSPTLET1  RESET    KEY6
          READ     PATLETR1,KEY6;;
          RETURN
.
RKPTLET1  MOVE     ZERO,OVRCD
          READKS   PATLETR1;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                            PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                            PTLECOMM,PTLECONF,PTLESPAR
          GOTO     OVERCOND IF OVER
          MOVE     DPTLELNO,PTLELTNO
          MOVE     DPTLELIN,PTLELINO
          RETURN
.
RPPTLET1  MOVE     ZERO,OVRCD
          READKP   PATLETR1;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                            PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                            PTLECOMM,PTLECONF,PTLESPAR
          GOTO     OVERCOND IF OVER
          MOVE     DPTLELNO,PTLELTNO
          MOVE     DPTLELIN,PTLELINO
          RETURN
.
RDPTLET1  MOVE     ZERO,OVRCD
          RESET    KEY6
          READ     PATLETR1,KEY6;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                                 PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                                 PTLECOMM,PTLECONF,PTLESPAR
          GOTO     OVERCOND IF OVER
          MOVE     DPTLELNO,PTLELTNO
          MOVE     DPTLELIN,PTLELINO
          RETURN
.
RLPTLET1  MOVE     ZERO,OVRCD
          RESET    KEY6
          READL    PATLETR1,KEY6;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                                 PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                                 PTLECOMM,PTLECONF,PTLESPAR
          GOTO     OVERCOND IF OVER
          GOTO     OVERLOCK IF LOCKED
          MOVE     DPTLELNO,PTLELTNO
          MOVE     DPTLELIN,PTLELINO
          RETURN
.
UPPTLET1  MOVE     PTLELTNO,DPTLELNO
          MOVE     PTLELINO,DPTLELIN
          UPDATE   PATLETR1;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                            PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                            PTLECOMM,PTLECONF,PTLESPAR
          RETURN
.
ULPTLET1  UNLOCK   PATLETR1
          RETURN
.
DEPTLET1  RESET    KEY6
          DELETE   PATLETR1,KEY6
          RETURN
.
WRPTLET1  MOVE     ZERO,OVRCD
          MOVE     PTLELTNO,DPTLELNO
          MOVE     PTLELINO,DPTLELIN
          TRAP     OVERLOCK IF IO
          RESET    KEY6
          WRITE    PATLETR1,KEY6;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                                 PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                                 PTLECOMM,PTLECONF,PTLESPAR
          TRAPCLR  IO
          RETURN
.
RAPTLET2  MOVE     ZERO,OVRCD
          RESET    KEY6
          READ     PATLETR2,KEY6;ANS
          GOTO     OVERCOND IF OVER
          RETURN
.
RSPTLET2  MOVE     ZERO,OVRCD
          RESET    KEY6
          READ     PATLETR2,KEY6;;
          RETURN
.
RKPTLET2  MOVE     ZERO,OVRCD
          READKS   PATLETR2;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                            PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                            PTLECOMM,PTLECONF,PTLESPAR
          GOTO     OVERCOND IF OVER
          MOVE     DPTLELNO,PTLELTNO
          MOVE     DPTLELIN,PTLELINO
          RETURN
.
RPPTLET2  MOVE     ZERO,OVRCD
          READKP   PATLETR2;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                            PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                            PTLECOMM,PTLECONF,PTLESPAR
          GOTO     OVERCOND IF OVER
          MOVE     DPTLELNO,PTLELTNO
          MOVE     DPTLELIN,PTLELINO
          RETURN
.
RDPTLET2  MOVE     ZERO,OVRCD
          RESET    KEY6
          READ     PATLETR2,KEY6;DPTLELNO,DPTLELIN,PTLETEXT,PTLELVAR,PTLEPBOT:
                                 PTLEPTOP,PTLEPPAG,PTLEPTAB,PTLEMMFN,PTLEACTV:
                                 PTLECOMM,PTLECONF,PTLESPAR
          GOTO     OVERCOND IF OVER
          MOVE     DPTLELNO,PTLELTNO
          MOVE     DPTLELIN,PTLELINO
          RETURN
.
