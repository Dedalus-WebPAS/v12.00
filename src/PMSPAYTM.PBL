. *----------------------------------------------------------------------
. * Include Name  :   PMSPAYTM.PBL
. *
. * Function      :   CGI variables for PMSPAYFD - pmspayaf.dat
. *----------------------------------------------------------------------
.  Modifications Done :
.
.  V9.07.01   05/07/2006  Ebon Clements CAR 103365
.             Added sequence
.  V9.07.00   27/06/2006  Ebon Clements CAR 103365
.             Created include
. *----------------------------------------------------------------------
.
.------------------------------------------------------------------------
.   Clear Parameters for ur based payor details file
.------------------------------------------------------------------------
.
CPPMPA00  MOVE      Z70,PMPAY001
          MOVE      Z70,PMPAY002
          MOVE      Z70,PMPAY003
          MOVE      Z70,PMPAY004
          MOVE      Z70,PMPAY005
.
CPPMPA99  RETURN
.
.------------------------------------------------------------
. Add ur based payor details file
.------------------------------------------------------------
PMPA0000  BRANCH    FLDITMNO,PMPA0010,PMPA0020,PMPA0030,PMPA0040,PMPA0050:
                             PMPA0060,PMPA0070,PMPA0080,PMPA0090,PMPA0100:
                             PMPA0110
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMPA9999
.
PMPA0010  WRITE     HTMLFILE;PMPAURNO;
          GOTO      PMPA9999
.
PMPA0020  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,PMPA0025
.
          WRITE     HTMLFILE;PMPAPAYC;
          GOTO      PMPA9999
.
PMPA0025  PACK      KEY14,PMPAPAYC,ZERO,ZERO,ZERO,ZERO,SP70
          CALL      RDFUND1
          IF        OVRCD=0
            WRITE     HTMLFILE;HFNAME;
          ELSE
            WRITE     HTMLFILE;PMPAPAYC;
          ENDIF
          GOTO      PMPA9999
.
PMPA0030  WRITE     HTMLFILE;PMPASEQN;
          GOTO      PMPA9999
.
PMPA0040  WRITE     HTMLFILE;PMPACOMM;
          GOTO      PMPA9999
.
PMPA0050  WRITE     HTMLFILE;PMPAACTV;
          GOTO      PMPA9999
.
PMPA0060  MATCH     PMPACDAT,SP70
          GOTO      PMPA9999 IF EQUAL
.
          UNPACK    PMPACDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMPA9999
.
PMPA0070  WRITE     HTMLFILE;PMPACTIM;
          GOTO      PMPA9999
.
PMPA0080  MATCH     SP70,PMPACUID
          GOTO      PMPA9999 IF EQUAL
.
          PACK      KEY10,PMPACUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      PMPACUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMPA9999
.
PMPA0090  MATCH     PMPAUDAT,SP70
          GOTO      PMPA9999 IF EQUAL
.
          UNPACK    PMPAUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMPA9999
.
PMPA0100  WRITE     HTMLFILE;PMPAUTIM;
          GOTO      PMPA9999
.         
PMPA0110  MATCH     SP70,PMPAUUID
          GOTO      PMPA9999 IF EQUAL
.
          PACK      KEY10,PMPAUUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      PMPAUUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMPA9999
.
PMPA9999  RETURN
.
.------------------------------------------------------------
.   Set Parameters for ur based payor details file
.------------------------------------------------------------
SPPMP000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPPMP001,SPPMP002,SPPMP003,SPPMP004,SPPMP005
.
          MOVE      ONE,EXIT
          GOTO      SPPMP999
.
SPPMP001  PACK      PMPAY001,QRYDATA,SP70
          GOTO      SPPMP999
.
SPPMP002  PACK      PMPAY002,QRYDATA,SP70
          GOTO      SPPMP999
.
SPPMP003  PACK      PMPAY003,QRYDATA,SP70
          GOTO      SPPMP999
.
SPPMP004  MOVE      QRYDATA,PMPAY004
          GOTO      SPPMP999
.
SPPMP005  MOVE      QRYDATA,PMPAY005
          GOTO      SPPMP999
.
SPPMP999  RETURN
.
.------------------------------------------------------------
.  Update ur based payor details file
.------------------------------------------------------------
MVPMPA00  MATCH     PMPAY001,Z70
          IF        !@EQUAL
            MOVE      PMPAY001,PMPAURNO
          ENDIF
.
          MATCH     PMPAY002,Z70
          IF        !@EQUAL
            MOVE      PMPAY002,PMPAPAYC
          ENDIF
.
          MATCH     PMPAY003,Z70
          IF        !@EQUAL
            MOVE      PMPAY003,PMPASEQN
          ENDIF
.
          MATCH     PMPAY004,Z70
          IF        !@EQUAL
            MOVE      PMPAY004,PMPACOMM
          ENDIF
.
          MATCH     PMPAY005,Z70
          IF        !@EQUAL
            MOVE      PMPAY005,PMPAACTV
          ENDIF
.
MVPMPA99  RETURN
