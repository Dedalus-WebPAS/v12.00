.----------------------------------------------------------------------------
. Cancer Registration Details - PATCRDFD
.
. Modifications :
.----------------------------------------------------------------------------
. * V12.00.01 16/0452025 Thanh T     TSK 0955096
. *           Changed for alphanumeric visit number 
.----------------------------------------------------------------------------
. *      V11.04.02  23/01/2024  Ebon Clements    TSK 0939233
. *                 Added facility previously diagnosed textarea save
. *                 and display - PTCRD117-PTCRD119. PTCDFCPR
. *      V11.04.01  21/11/2023  Thanh T          TSK 0939233                
. *                 Initialize PTCDFCPR field with 280 spaces intead of 70
. *                 spaces   
.----------------------------------------------------------------------------
. *      V10.12.01  09/03/2018  J.Tan            TSK 0842287
. *                 Added PTCDBDIA 'Best Basis for Diagnosis' cat Bd
. *      V10.08.03  13/05/2016  J.Tan            TSK 0315587
. *                 Changed PTCDSTAG to use cat sS
. *      V10.08.02  13/04/2016  Peter Vela       TSK 0813958
. *                 Added PTCDSCFL & PTCDCSSY
. *      V10.08.01  12/04/2016  Steve Armstrong  TSK 0813958
. *                 Added PTCDSCFL & PTCDCSSY to CLRCRD00
. *      V10.03.01  03/06/2013  Davin          CAR 283509
. *                 Added PTCRD113/PTCDECOG - ECOG Performance Status (Cat EO)
. *      V10.00.01  30/03/2010  Mike Laming    CAR 208570
. *                 fix PTCRD110, PTCRD111, PTCRD112 to pad the field
. *       V9.12.01  18/11/2009  Mike Laming    CAR 208570
. *                 Add PTCRD110 (PTCDMET4), PTCRD111 (PTCDMET5), PTCRD112
. *                     (PTCDMET6) - Metastatic Type 4,5 & 6 - ICD10 Codes
. *       V9.10.01  04/06/2008  Mike Laming    CAR 168872
. *                 Add cgi variable PTCRD108 (Date Extracted - PTCDDTEX)
. *       V9.09.01  16/11/2007  Mike Laming    CAR 154835
. *                 Add Qld. fields PTCDSURB, PTCDSTTE, PTCDPOST (PTCRD105-107)
.----------------------------------------------------------------------------
.         Clear Cancer Registration cgi variables
.----------------------------------------------------------------------------
CLCRDCGI  MOVE      SP70,PTCRD001
          MOVE      ZERO,PTCRD002
          MOVE      SP70,PTCRD003
          MOVE      SP70,PTCRD004
          MOVE      SP70,PTCRD005
          MOVE      SP70,PTCRD006
          MOVE      ZERO,PTCRD007
          MOVE      SP70,PTCRD008
          MOVE      SP70,PTCRD009
          MOVE      SP70,PTCRD010
          MOVE      SP70,PTCRD011
          MOVE      SP70,PTCRD012
          MOVE      SP70,PTCRD013
          MOVE      SP70,PTCRD014
          MOVE      SP70,PTCRD015
          MOVE      SP70,PTCRD016
          MOVE      SP70,PTCRD017
          MOVE      SP70,PTCRD018
          MOVE      SP70,PTCRD019
          MOVE      SP70,PTCRD020
          MOVE      SP70,PTCRD021
          MOVE      SP70,PTCRD022
          MOVE      SP70,PTCRD023
          MOVE      SP70,PTCRD024
          MOVE      SP70,PTCRD025
          MOVE      ZERO,PTCRD026
          MOVE      SP70,PTCRD027
          MOVE      SP70,PTCRD028
          MOVE      SP70,PTCRD029
          MOVE      SP70,PTCRD030
          MOVE      SP70,PTCRD031
          MOVE      SP70,PTCRD032
          MOVE      SP70,PTCRD033
          MOVE      SP70,PTCRD034
          MOVE      SP70,PTCRD035
          MOVE      SP70,PTCRD036
          MOVE      SP70,PTCRD037
          MOVE      SP70,PTCRD038
          MOVE      SP70,PTCRD039
          MOVE      ZERO,PTCRD040
          MOVE      ZERO,PTCRD041
          MOVE      SP70,PTCRD042
          MOVE      SP70,PTCRD043
          MOVE      ZERO,PTCRD044
          MOVE      SP70,PTCRD045
          MOVE      ZERO,PTCRD046
          MOVE      SP70,PTCRD047
          MOVE      SP70,PTCRD048
          MOVE      SP70,PTCRD049
          MOVE      SP70,PTCRD050
          MOVE      SP70,PTCRD051
          MOVE      SP70,PTCRD052
          MOVE      SP70,PTCRD053
          MOVE      ZERO,PTCRD054
          MOVE      ZERO,PTCRD055
          MOVE      ZERO,PTCRD056
          MOVE      ZERO,PTCRD057
          MOVE      ZERO,PTCRD058
          MOVE      ZERO,PTCRD059
          MOVE      ZERO,PTCRD060
          MOVE      ZERO,PTCRD061
          MOVE      SP70,PTCRD062
          MOVE      ZERO,PTCRD063
          MOVE      SP70,PTCRD064
          MOVE      ZERO,PTCRD065
          MOVE      ZERO,PTCRD066
          MOVE      ZERO,PTCRD067
          MOVE      ZERO,PTCRD068
          MOVE      ZERO,PTCRD069
          MOVE      ZERO,PTCRD070
          MOVE      ZERO,PTCRD071
          MOVE      ZERO,PTCRD072
          MOVE      ZERO,PTCRD073
          MOVE      ZERO,PTCRD074
          MOVE      ZERO,PTCRD075
          MOVE      SP70,PTCRD076
          MOVE      SP70,PTCRD077
          MOVE      SP70,PTCRD078
          MOVE      SP70,PTCRD079
          MOVE      SP70,PTCRD080
          MOVE      SP70,PTCRD081
          MOVE      SP70,PTCRD082
          MOVE      SP70,PTCRD083
          MOVE      ZERO,PTCRD084
          MOVE      ZERO,PTCRD085
          MOVE      SP70,PTCRD086
          MOVE      ZERO,PTCRD087
          MOVE      SP70,PTCRD088
          MOVE      ZERO,PTCRD089
          MOVE      SP70,PTCRD090
          MOVE      ZERO,PTCRD091
          MOVE      SP70,PTCRD092
          MOVE      ZERO,PTCRD093
          MOVE      SP70,PTCRD094
          MOVE      SP70,PTCRD095
          MOVE      SP70,PTCRD096
          MOVE      SP70,PTCRD097
          MOVE      SP70,PTCRD098
          MOVE      SP70,PTCRD099
          MOVE      SP70,PTCRD100
          MOVE      SP70,PTCRD101
          MOVE      SP70,PTCRD102
          MOVE      SP70,PTCRD103
          MOVE      SP70,PTCRD104
          MOVE      SP70,PTCRD105
          MOVE      SP70,PTCRD106
          MOVE      SP70,PTCRD107
          MOVE      SP70,PTCRD108
          MOVE      SP70,PTCRD109
          MOVE      SP70,PTCRD110
          MOVE      SP70,PTCRD111
          MOVE      SP70,PTCRD112
          MOVE      SP70,PTCRD113
          MOVE      SP70,PTCRD114
          MOVE      SP70,PTCRD115
          MOVE      SP70,PTCRD116
          PACK      PTCRD117,Z70,Z70
          PACK      PTCRD118,SP70,SP70
          PACK      PTCRD119,SP70,SP70
.
CLCRDC99  RETURN
+
.-------------------------------------------------------------------------------
.     Clear Cancer Registration Details  
.-------------------------------------------------------------------------------
CLRCRD00  MOVE      ZEROVISN,PTCDDADN  * Patient Admission Number
          MOVE      ZERO,PTCDCNRG      * Cancer Registration Number
          MOVE      SP70,PTCDADTE      * Date of 1st Admis (CCYYMMDD)   
          MOVE      SP70,PTCDDDTE      * Date of 1st Diag (CCYYMMDD)    
          MOVE      SP70,PTCDTMRC      * Date of Tumour Recurrence (CCYYMMDD)
          MOVE      SP70,PTCDMTSP      * Date Metastatic Spread (CCYYMMDD)
          MOVE      ZERO,PTCDUKPR      * Unknown Primary 0=No 1=Yes
          MOVE      SP70,PTCDPRMM      * Primary Site (Diagnosis) ICD10 Code
          MOVE      SP70,PTCDHTYP      * Histological Type - ICD10 Code
          MOVE      SP70,PTCDMET1      * Metastatic Type 1 - ICD10 Code
          MOVE      SP70,PTCDMET2      * Metastatic Type 2 - ICD10 Code
          MOVE      SP70,PTCDMET3      * Metastatic Type 3 - ICD10 Code
          MOVE      SP70,PTCDMET4      * Metastatic Type 4 - ICD10 Code
          MOVE      SP70,PTCDMET5      * Metastatic Type 5 - ICD10 Code
          MOVE      SP70,PTCDMET6      * Metastatic Type 6 - ICD10 Code
          MOVE      SP70,PTCDLATR      * Laterality (Cat LY)
          MOVE      SP70,PTCDSTAG      * Other Staging Scheme
          MOVE      "0",PTCDBT01       * Basis for Diag (this facility -
.                                        Clinical Only) 0=No 1=Yes
          MOVE      "0",PTCDBT02       * Basis for Diag (this facility -
.                                        Biochemistry) 0=No 1=Yes
          MOVE      "0",PTCDBT03       * Basis for Diag (this facility -
.                                        Imaging) 0=No 1=Yes
          MOVE      "0",PTCDBT04       * Basis for Diag (this facility -
.                                        Endoscopy) 0=No 1=Yes
          MOVE      "0",PTCDBT05       * Basis for Diag (this facility -
.                                        Exploratory Surgery) 0=No 1=Yes
          MOVE      "0",PTCDBT06       * Basis for Diag (this facility -
.                                        Cytology/Haematology) 0=No 1=Yes
          MOVE      "0",PTCDBT07       * Basis for Diag (this facility -
.                                        Hist. Of Meta) 0=No 1=Yes
          MOVE      "0",PTCDBT08       * Basis for Diag (this facility -
.                                        Hist. Of Primary) 0=No 1=Yes
          MOVE      "0",PTCDBT09       * Basis for Diag (this facility -
.                                        Other) 0=No 1=Yes
          MOVE      "0",PTCDBT10       * Basis for Diag (this facility -
.                                        Autopsy) 0=No 1=Yes
          MOVE      SP70,PTCDOTDG      * Other Diag(this facility) free text
          MOVE      ZERO,PTCDRFLG      * Readmission Flag 0=No 1=Yes
          MOVE      SP70,PTCDPATH      * Pathology Code - ICD10 Code
          MOVE      "0",PTCDDGPR       * Cancer Diagnosed prior to admission
.                                        0=No 1=Yes 2=Unknown
          PACK      PTCDFCPR,SP70,SP70,SP70,SP70
.                                      * Facility prev diagnosed at.           
          MOVE      "0",PTCDBO01       * Basis for Diag (oth facility -
.                                        Clinical Only) 0=No 1=Yes
          MOVE      "0",PTCDBO02       * Basis for Diag (oth facility -
.                                        Biochemisrty) 0=No 1=Yes
          MOVE      "0",PTCDBO03       * Basis for Diag (oth facility -
.                                        Imaging) 0=No 1=Yes
          MOVE      "0",PTCDBO04       * Basis for Diag (oth facility -
.                                        Endoscopy) 0=No 1=Yes
          MOVE      "0",PTCDBO05       * Basis for Diag (oth facility -
.                                        Exploratory Surgery) 0=No 1=Yes
          MOVE      "0",PTCDBO06       * Basis for Diag (oth facility -
.                                        Cytology/Haematology) 0=No 1=Yes
          MOVE      "0",PTCDBO07       * Basis for Diag (oth facility -
.                                        Hist. Of Meta) 0=No 1=Yes
          MOVE      "0",PTCDBO08       * Basis for Diag (oth facility -
.                                        Hist. Of Primary) 0=No 1=Yes
          MOVE      "0",PTCDBO09       * Basis for Diag (oth facility -
.                                        Other) 0=No 1=Yes
          MOVE      SP70,PTCDDGOT      * Other Diagnosis (other facility)
          MOVE      ZERO,PTCDAUTP      * Cancer Diagnosed on Autopsy only
                                       * 0=No 1=Yes
          MOVE      ZERO,PTCDBRLW      * Breslow Thickness
          MOVE      SP70,PTCDMLIN      * Melanoma Invasion Level (Cat IL)
          MOVE      SP70,PTCDRPLB      * Reporting Lab (Cat LB)
          MOVE      ZERO,PTCDBTSZ      * Breast Tumour Size
          MOVE      SP70,PTCDCKLV      * Clarks Level
          MOVE      ZERO,PTCDGLSC      * Gleason Score
          MOVE      SP70,PTCDCOMM      * Comments
          MOVE      SP70,PTCDDTEX      * Date extracted (CCYYMMDD)

          MOVE      SP70,PTCDDTRC      * Date Record Created (CCYYMMDD)
          MOVE      SP70,PTCDTMCR      * Time Record Created (HH:MM:SS)
          MOVE      SP70,PTCDUSCR      * User who created record
          MOVE      SP70,PTCDDTUP      * Date Record Updated (CCYYMMDD)
          MOVE      SP70,PTCDTMUP      * Time Record Updated (HH:MM:SS)
          MOVE      SP70,PTCDUSUP      * User who last updated record
          MOVE      SP70,PTCDBSDG      * Basis of Diagnosis
          MOVE      SP70,PTCDESTM      * Estimated Date Flag (Estim/Unknown)
          MOVE      SP70,PTCDCELT      * Histological Grade/Differentation

.
.                                      * Singapore Cancer Reg variables
          MOVE      SP35,PTCDDOCC
          MOVE      SP35,PTCDDOCN
          MOVE      SP35,PTCDNTDT
          MOVE      ZERO,PTCDSNT1
          MOVE      ZERO,PTCDSNT2
          MOVE      ZERO,PTCDSNT3
          MOVE      ZERO,PTCDBOD1
          MOVE      ZERO,PTCDBOD2
          MOVE      ZERO,PTCDBOD3
          MOVE      ZERO,PTCDBOD4
          MOVE      ZERO,PTCDBOD5
          MOVE      SP35,PTCDBOL5
          MOVE      ZERO,PTCDBOD6
          MOVE      SP35,PTCDBOL6
          MOVE      ZERO,PTCDBOD7
          MOVE      SP35,PTCDBOL7
          MOVE      ZERO,PTCDGD01
          MOVE      ZERO,PTCDGD02
          MOVE      ZERO,PTCDGD03
          MOVE      ZERO,PTCDGD04
          MOVE      ZERO,PTCDGD05
          MOVE      ZERO,PTCDGD06
          MOVE      ZERO,PTCDGD07
          MOVE      ZERO,PTCDGD08
          MOVE      ZERO,PTCDGD09
          MOVE      SP35,PTCDPLOD
          MOVE      SP35,PTCDCOD1
          MOVE      SP35,PTCDCOD2
          MOVE      SP35,PTCDCSGT
          MOVE      SP35,PTCDCSGN
          MOVE      SP35,PTCDCSGM
          MOVE      SP35,PTCDCSSG
          MOVE      SP35,PTCDCSCM
          MOVE      ZERO,PTCDTNON
          MOVE      ZERO,PTCDTSUR
          MOVE      SP35,PTCDTSDT
          MOVE      ZERO,PTCDTRAD
          MOVE      SP35,PTCDTRDT
          MOVE      ZERO,PTCDTCHM
          MOVE      SP35,PTCDTCDT
          MOVE      ZERO,PTCDTHOR
          MOVE      SP35,PTCDTHDT
          MOVE      ZERO,PTCDTBIO
          MOVE      SP35,PTCDTBDT
          MOVE      SP35,PTCDRLDT
          MOVE      SP35,PTCDNDCL
          MOVE      ZERO,PTCDTSAB
          MOVE      ZERO,PTCDTOTH
          MOVE      SP35,PTCDTHOS
          MOVE      ZERO,PTCDRST1
          MOVE      ZERO,PTCDRST2
          MOVE      ZERO,PTCDRST3
          MOVE      ZERO,PTCDRST4
          MOVE      ZERO,PTCDRST5
          MOVE      SP70,PTCDSURB
          MOVE      SP35,PTCDSTTE
          MOVE      SP35,PTCDPOST
          MOVE      SP70,PTCDECOG
          MOVE      SP70,PTCDRADI
          MOVE      SP70,PTCDSYST
          MOVE      SP70,PTCDSCFL
          MOVE      SP70,PTCDCSSY
          MOVE      SP70,PTCDBDIA
          PACK      PTCDSPAR,SP70,SP70
.
CLRCRD99  RETURN
.----------------------------------------------------------------
.   Set Parameters for Option 08: Cancer Registration
.----------------------------------------------------------------
STCRD000  UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,STCRD001,STCRD002,STCRD003,STCRD004,STCRD005,STCRD006:
                                STCRD007,STCRD008,STCRD009,STCRD010,STCRD011:
                                STCRD012,STCRD013,STCRD014,STCRD015,STCRD016:
                                STCRD017,STCRD018,STCRD019,STCRD020,STCRD021:
                                STCRD022,STCRD023,STCRD024,STCRD025,STCRD026:
                                STCRD027,STCRD028,STCRD029,STCRD030,STCRD031:
                                STCRD032,STCRD033,STCRD034,STCRD035,STCRD036:
                                STCRD037,STCRD038,STCRD039,STCRD040,STCRD041:
                                STCRD042,STCRD043,STCRD044,STCRD045,STCRD046:
                                STCRD047,STCRD048,STCRD049,STCRD050,STCRD051:
                                STCRD052,STCRD053,STCRD054,STCRD055,STCRD056:
                                STCRD057,STCRD058,STCRD059,STCRD060,STCRD061:
                                STCRD062,STCRD063,STCRD064,STCRD065,STCRD066:
                                STCRD067,STCRD068,STCRD069,STCRD070,STCRD071:
                                STCRD072,STCRD073,STCRD074,STCRD075,STCRD076:
                                STCRD077,STCRD078,STCRD079,STCRD080,STCRD081:
                                STCRD082,STCRD083,STCRD084,STCRD085,STCRD086:
                                STCRD087,STCRD088,STCRD089,STCRD090,STCRD091:
                                STCRD092,STCRD093,STCRD094,STCRD095,STCRD096:
                                STCRD097,STCRD098,STCRD099,STCRD100,STCRD101:
                                STCRD102,STCRD103,STCRD104,STCRD105,STCRD106:
                                STCRD107,STCRD108,STCRD109,STCRD110,STCRD111:
                                STCRD112,STCRD113,STCRD114,STCRD115,STCRD116:
                                STCRD117,STCRD999,STCRD999
          GOTO      STCRD999
.
STCRD001  SQUEEZE   QRYDATA
          MOVE      QRYDATA,PTCRD001
          PACK      PTCRD001,PTCRD001,SP70
          GOTO      STCRD999
.
STCRD002  MOVE      QRYDATA,PTCRD002
          GOTO      STCRD999
.
STCRD003  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD003,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD003
          GOTO      STCRD999
.
STCRD004  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD004,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD004
          GOTO      STCRD999
.
STCRD005  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD005,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD005
          GOTO      STCRD999
.
STCRD006  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD006,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD006
          GOTO      STCRD999
.
STCRD007  MOVE      QRYDATA,PTCRD007
          GOTO      STCRD999
.
STCRD008  MOVE      QRYDATA,PTCRD008
          PACK      PTCRD008,PTCRD008,SP70
          GOTO      STCRD999
.
STCRD009  MOVE      QRYDATA,PTCRD009
          GOTO      STCRD999
.
STCRD010  PACK      PTCRD010,QRYDATA,SP20
          GOTO      STCRD999
.
STCRD011  PACK      PTCRD011,QRYDATA,SP20
          GOTO      STCRD999
.
STCRD012  PACK      PTCRD012,QRYDATA,SP20
          GOTO      STCRD999
.
STCRD013  MOVE      QRYDATA,PTCRD013
          GOTO      STCRD999
.
STCRD014  MOVE      QRYDATA,PTCRD014
          GOTO      STCRD999
.
STCRD015  MOVE      QRYDATA,PTCRD015
          GOTO      STCRD999
.
STCRD016  MOVE      QRYDATA,PTCRD016
          GOTO      STCRD999
.
STCRD017  MOVE      QRYDATA,PTCRD017
          GOTO      STCRD999
.
STCRD018  MOVE      QRYDATA,PTCRD018
          GOTO      STCRD999
.
STCRD019  MOVE      QRYDATA,PTCRD019
          GOTO      STCRD999
.
STCRD020  MOVE      QRYDATA,PTCRD020
          GOTO      STCRD999
.
STCRD021  MOVE      QRYDATA,PTCRD021
          GOTO      STCRD999
.
STCRD022  MOVE      QRYDATA,PTCRD022
          GOTO      STCRD999
.
STCRD023  MOVE      QRYDATA,PTCRD023
          GOTO      STCRD999
.
STCRD024  MOVE      QRYDATA,PTCRD024
          GOTO      STCRD999
.
STCRD025  MOVE      QRYDATA,PTCRD025
          GOTO      STCRD999
.
STCRD026  MOVE      QRYDATA,PTCRD026
          GOTO      STCRD999
.
STCRD027  MOVE      QRYDATA,PTCRD027
          GOTO      STCRD999
.
STCRD028  MOVE      QRYDATA,PTCRD028
          GOTO      STCRD999
.
STCRD029  MOVE      QRYDATA,PTCRD029
          GOTO      STCRD999
.
STCRD030  MOVE      QRYDATA,PTCRD030
          GOTO      STCRD999
.
STCRD031  MOVE      QRYDATA,PTCRD031
          GOTO      STCRD999
.
STCRD032  MOVE      QRYDATA,PTCRD032
          GOTO      STCRD999
.
STCRD033  MOVE      QRYDATA,PTCRD033
          GOTO      STCRD999
.
STCRD034  MOVE      QRYDATA,PTCRD034
          GOTO      STCRD999
.
STCRD035  MOVE      QRYDATA,PTCRD035
          GOTO      STCRD999
.
STCRD036  MOVE      QRYDATA,PTCRD036
          GOTO      STCRD999
.
STCRD037  MOVE      QRYDATA,PTCRD037
          GOTO      STCRD999
.
STCRD038  MOVE      QRYDATA,PTCRD038
          GOTO      STCRD999
.
STCRD039  MOVE      QRYDATA,PTCRD039
          GOTO      STCRD999
.
STCRD040  MOVE      QRYDATA,PTCRD040
          GOTO      STCRD999
.
STCRD041  MOVE      QRYDATA,PTCRD041
          GOTO      STCRD999
.
STCRD042  MOVE      QRYDATA,PTCRD042
          GOTO      STCRD999
.
STCRD043  MOVE      QRYDATA,PTCRD043
          GOTO      STCRD999
.
STCRD044  MOVE      QRYDATA,PTCRD044
          GOTO      STCRD999
.
STCRD045  MOVE      QRYDATA,PTCRD045
          GOTO      STCRD999
.
STCRD046  MOVE      QRYDATA,PTCRD046
          GOTO      STCRD999
.
STCRD047  MOVE      QRYDATA,PTCRD047
          GOTO      STCRD999
.
STCRD048  MOVE      QRYDATA,PTCRD048
          GOTO      STCRD999
.
STCRD049  MOVE      QRYDATA,PTCRD049
          GOTO      STCRD999
.
STCRD050  MOVE      QRYDATA,PTCRD050
          GOTO      STCRD999
.
STCRD051  MOVE      QRYDATA,PTCRD051
          GOTO      STCRD999
.
STCRD052  MOVE      QRYDATA,PTCRD052
          GOTO      STCRD999
.
STCRD053  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD053,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD053
          GOTO      STCRD999
.
STCRD054  MOVE      QRYDATA,PTCRD054
          GOTO      STCRD999
.
STCRD055  MOVE      QRYDATA,PTCRD055
          GOTO      STCRD999
.
STCRD056  MOVE      QRYDATA,PTCRD056
          GOTO      STCRD999
.
STCRD057  MOVE      QRYDATA,PTCRD057
          GOTO      STCRD999
.
STCRD058  MOVE      QRYDATA,PTCRD058
          GOTO      STCRD999
.
STCRD059  MOVE      QRYDATA,PTCRD059
          GOTO      STCRD999
.
STCRD060  MOVE      QRYDATA,PTCRD060
          GOTO      STCRD999
.
STCRD061  MOVE      QRYDATA,PTCRD061
          GOTO      STCRD999
.
STCRD062  MOVE      QRYDATA,PTCRD062
          GOTO      STCRD999
.
STCRD063  MOVE      QRYDATA,PTCRD063
          GOTO      STCRD999
.
STCRD064  MOVE      QRYDATA,PTCRD064
          GOTO      STCRD999
.
STCRD065  MOVE      QRYDATA,PTCRD065
          GOTO      STCRD999
.
STCRD066  MOVE      QRYDATA,PTCRD066
          GOTO      STCRD999
.
STCRD067  MOVE      QRYDATA,PTCRD067
          GOTO      STCRD999
.
STCRD068  MOVE      QRYDATA,PTCRD068
          GOTO      STCRD999
.
STCRD069  MOVE      QRYDATA,PTCRD069
          GOTO      STCRD999
.
STCRD070  MOVE      QRYDATA,PTCRD070
          GOTO      STCRD999
.
STCRD071  MOVE      QRYDATA,PTCRD071
          GOTO      STCRD999
.
STCRD072  MOVE      QRYDATA,PTCRD072
          GOTO      STCRD999
.
STCRD073  MOVE      QRYDATA,PTCRD073
          GOTO      STCRD999
.
STCRD074  MOVE      QRYDATA,PTCRD074
          GOTO      STCRD999
.
STCRD075  MOVE      QRYDATA,PTCRD075
          GOTO      STCRD999
.
STCRD076  MOVE      QRYDATA,PTCRD076
          GOTO      STCRD999
.
STCRD077  MOVE      QRYDATA,PTCRD077
          GOTO      STCRD999
.
STCRD078  MOVE      QRYDATA,PTCRD078
          GOTO      STCRD999
.
STCRD079  MOVE      QRYDATA,PTCRD079
          GOTO      STCRD999
.
STCRD080  MOVE      QRYDATA,PTCRD080
          GOTO      STCRD999
.
STCRD081  MOVE      QRYDATA,PTCRD081
          GOTO      STCRD999
.
STCRD082  MOVE      QRYDATA,PTCRD082
          GOTO      STCRD999
.
STCRD083  MOVE      QRYDATA,PTCRD083
          GOTO      STCRD999
.
STCRD084  MOVE      QRYDATA,PTCRD084
          GOTO      STCRD999
.
STCRD085  MOVE      QRYDATA,PTCRD085
          GOTO      STCRD999
.
STCRD086  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD086,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD086
          GOTO      STCRD999
.
STCRD087  MOVE      QRYDATA,PTCRD087
          GOTO      STCRD999
.
STCRD088  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD088,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD088
          GOTO      STCRD999
.
STCRD089  MOVE      QRYDATA,PTCRD089
          GOTO      STCRD999
.
STCRD090  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD090,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD090
          GOTO      STCRD999
.
STCRD091  MOVE      QRYDATA,PTCRD091
          GOTO      STCRD999
.
STCRD092  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD092,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD092
          GOTO      STCRD999
.
STCRD093  MOVE      QRYDATA,PTCRD093
          GOTO      STCRD999
.
STCRD094  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD094,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD094
          GOTO      STCRD999
.
STCRD095  RESET     QRYDATA
          MATCH     SP70,QRYDATA
          GOTO      STCRD999 IF EQUAL
.
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00
          PACK      PTCRD095,CCENT,CYEAR,CMON,CDAY
          REP       " 0",PTCRD095
          GOTO      STCRD999
.
STCRD096  MOVE      QRYDATA,PTCRD096
          GOTO      STCRD999
.
STCRD097  MOVE      QRYDATA,PTCRD097
          GOTO      STCRD999
.
STCRD098  MOVE      QRYDATA,PTCRD098
          GOTO      STCRD999
.
STCRD099  MOVE      QRYDATA,PTCRD099
          GOTO      STCRD999
.
STCRD100  MOVE      QRYDATA,PTCRD100
          GOTO      STCRD999
.
STCRD101  MOVE      QRYDATA,PTCRD101
          GOTO      STCRD999
.
STCRD102  MOVE      QRYDATA,PTCRD102
          GOTO      STCRD999
.
STCRD103  MOVE      QRYDATA,PTCRD103
          GOTO      STCRD999
.
STCRD104  MOVE      QRYDATA,PTCRD104
          GOTO      STCRD999
.
STCRD105  MOVE      QRYDATA,PTCRD105
          GOTO      STCRD999
.
STCRD106  MOVE      QRYDATA,PTCRD106
          GOTO      STCRD999
.
STCRD107  MOVE      QRYDATA,PTCRD107
          GOTO      STCRD999
.
STCRD108  MOVE      QRYDATA,PTCRD108
          GOTO      STCRD999
.
STCRD109  MOVE      QRYDATA,PTCRD109
          GOTO      STCRD999
.
STCRD110  PACK      PTCRD110,QRYDATA,SP20
          GOTO      STCRD999
.
STCRD111  PACK      PTCRD111,QRYDATA,SP20
          GOTO      STCRD999
.
STCRD112  PACK      PTCRD112,QRYDATA,SP20
          GOTO      STCRD999
.
STCRD113  MOVE      QRYDATA,PTCRD113
          GOTO      STCRD999
.
STCRD114  MOVE      QRYDATA,PTCRD114
          GOTO      STCRD999
.
STCRD115  MOVE      QRYDATA,PTCRD115
          GOTO      STCRD999
.
STCRD116  MOVE      QRYDATA,PTCRD116
          GOTO      STCRD999
.
. PTCRD117 is a textarea and will populate PTCRD117, PTCRD118 and PTCRD119
.
STCRD117  PACK      PTCRD117,QRYDATA,SP70,SP70    * Some comment received
          MOVE      ZERO,F1
.
STCRD118  READ      CONFFILE,SEQ;QRYNAME,QRYDATA
          GOTO      STCRD999 IF OVER
.
          ADD       ONE,F1
.
          MATCH     SP70,QRYNAME
          IF        !@EQUAL
            MOVE      ONE,TEXTAREA                 * Flag for Next CGI Paramete
            GOTO      STCRD999
          ENDIF
.
          PACK      QRYDATA,QRYDATA,SP70,SP70
          STORE     QRYDATA,F1,PTCRD118,PTCRD119
          GOTO      STCRD118
.
STCRD999  RETURN
+
.-------------------------------------------------------------------------------
.     Save Cancer Registration Details
.-------------------------------------------------------------------------------
SAVCRD00  MOVE      ADMISSNO,PTCDDADN  * Patient Admission Number
          MOVE      PTCRD002,PTCDCNRG  * Cancer Registration Number
          MOVE      PTCRD003,PTCDADTE  * Date of 1st Admis (CCYYMMDD)
          MOVE      PTCRD004,PTCDDDTE  * Date of 1st Diag (CCYYMMDD)
          MOVE      PTCRD005,PTCDTMRC  * Date of Tumour Recurrence (CCYYMMDD)
          MOVE      PTCRD006,PTCDMTSP  * Date Metastatic Spread (CCYYMMDD)
.
          COMPARE   ZERO,PTCRD007
          IF        @EQUAL
            MOVE      ZERO,PTCDUKPR    * Unknown Primary 0=No 1=Yes
          ELSE
            MOVE      ONE,PTCDUKPR
          ENDIF
.
          MOVE      PTCRD008,PTCDPRMM  * Primary Site (Diagnosis) ICD10 Code
          MOVE      PTCRD009,PTCDHTYP  * Histological Type - ICD10 Code
          MOVE      PTCRD010,PTCDMET1  * Metastatic Type 1 - ICD10 Code
          MOVE      PTCRD011,PTCDMET2  * Metastatic Type 2 - ICD10 Code
          MOVE      PTCRD012,PTCDMET3  * Metastatic Type 3 - ICD10 Code
          MOVE      PTCRD110,PTCDMET4  * Metastatic Type 4 - ICD10 Code -208570
          MOVE      PTCRD111,PTCDMET5  * Metastatic Type 5 - ICD10 Code -208570
          MOVE      PTCRD112,PTCDMET6  * Metastatic Type 6 - ICD10 Code -208570
          MOVE      PTCRD013,PTCDLATR  * Laterality (Cat LY)
          MOVE      PTCRD014,PTCDSTAG  * Other Staging Scheme
.
          MATCH     SP70,PTCRD015
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT01  * Basis for Diag (this facility -
.                                     Clinical Only) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT01
          ENDIF
.
          MATCH     SP70,PTCRD016
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT02  * Basis for Diag (this facility -
.                                     Biochemistry) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT02
          ENDIF
.
          MATCH     SP70,PTCRD017
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT03  * Basis for Diag (this facility -
.                                     Imaging) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT03
          ENDIF
.
          MATCH     SP70,PTCRD018
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT04  * Basis for Diag (this facility -
.                                     Endoscopy) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT04
          ENDIF
.
          MATCH     SP70,PTCRD019
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT05  * Basis for Diag (this facility -
.                                     Exploratory Surgery) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT05
          ENDIF
.
          MATCH     SP70,PTCRD020
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT06  * Basis for Diag (this facility -
.                                     Cytology/Haematology) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT06
          ENDIF
.
          MATCH     SP70,PTCRD021
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT07  * Basis for Diag (this facility -
.                                          Hist. Of Meta) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT07
          ENDIF
.
          MATCH     SP70,PTCRD022
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT08  * Basis for Diag (this facility -
.                                     Hist. Of Primary) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT08
          ENDIF
.
          MATCH     SP70,PTCRD023
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT09  * Basis for Diag (this facility -
.                                     Other) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT09
          ENDIF
.
          MATCH     SP70,PTCRD024
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBT10  * Basis for Diag (this facility -
.                                     Autopsy) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBT10
          ENDIF
.
          MOVE      PTCRD025,PTCDOTDG  * Other Diag(this facility) free text
.
          COMPARE   ZERO,PTCRD026
          IF        @EQUAL
            MOVE      ZERO,PTCDRFLG  * Readmission Flag 0=No 1=Yes
          ELSE
            MOVE      ONE,PTCDRFLG
          ENDIF
.
          MOVE      PTCRD027,PTCDPATH  * Pathology Code - ICD10 Code
          MOVE      PTCRD028,PTCDDGPR  * Cancer Diagnosed prior to admission
.                                        0=No 1=Yes 2=Unknown
          MOVE      PTCRD029,PTCDFCPR  * Facility prev diagnosed at.
.
          MATCH     SP70,PTCRD030
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO01  * Basis for Diag (oth facility -
.                                     Clinical Only) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO01
          ENDIF
.
          MATCH     SP70,PTCRD031
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO02  * Basis for Diag (oth facility -
.                                     Biochemisrty) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO02
          ENDIF
.
          MATCH     SP70,PTCRD032
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO03  * Basis for Diag (oth facility -
.                                     Imaging) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO03
          ENDIF
.
          MATCH     SP70,PTCRD033
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO04  * Basis for Diag (oth facility -
.                                     Endoscopy) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO04
          ENDIF
.
          MATCH     SP70,PTCRD034
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO05  * Basis for Diag (oth facility -
.                                     Exploratory Surgery) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO05
          ENDIF
.
          MATCH     SP70,PTCRD035
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO06  * Basis for Diag (oth facility -
.                                     Cytology/Haematology) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO06
          ENDIF
.
          MATCH     SP70,PTCRD036
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO07  * Basis for Diag (oth facility -
.                                     Hist. Of Meta) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO07
          ENDIF
.
          MATCH     SP70,PTCRD037
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO08  * Basis for Diag (oth facility -
.                                     Hist. Of Primary) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO08
          ENDIF
.
          MATCH     SP70,PTCRD038
          IF        @EQUAL | @EOS
            MOVE      "0",PTCDBO09  * Basis for Diag (oth facility -
.                                     Other) 0=No 1=Yes
          ELSE
            MOVE      "1",PTCDBO09
          ENDIF
.
          MOVE      PTCRD039,PTCDDGOT  * Other Diagnosis (other facility)
.
          COMPARE   ZERO,PTCRD040
          IF        @EQUAL
            MOVE      ZERO,PTCDAUTP  * Cancer Diagnosed on Autopsy only
                                     * 0=No 1=Yes
          ELSE
            MOVE      ONE,PTCDAUTP
          ENDIF
.
          MOVE      PTCRD041,PTCDBRLW  * Breslow Thickness
          MOVE      PTCRD042,PTCDMLIN  * Melanoma Invasion Level (Cat IL)
          MOVE      PTCRD043,PTCDRPLB  * Reporting Lab (Cat LB)
          MOVE      PTCRD044,PTCDBTSZ  * Breast Tumour Size
          MOVE      PTCRD045,PTCDCKLV  * Clarks Level
          MOVE      PTCRD046,PTCDGLSC  * Gleason Score
          MOVE      PTCRD047,PTCDCOMM  * Comments
          MOVE      PTCRD048,PTCDBSDG  * Basis of Diagnosis NZ (Cat BD)
          MATCH     SP70,PTCRD049
          IF        @EQUAL
            MOVE      "0",PTCDESTM     * Estimated date flag
          ELSE
            MOVE      "1",PTCDESTM
          ENDIF
.
          MOVE      PTCRD050,PTCDCELT  * Histological Grade/Differentation or
.
          MATCH     "A",UPDTTYPE
          IF        @EQUAL
            PACK      PTCDDTRC,CCC,CYY,CMM,CDD  * Date Record Created (CCYYMMDD)
            REP       " 0",PTCDDTRC
            MOVE      CTIMEIS,PTCDTMCR   * Time Record Created (HH:MM:SS)
            MOVE      USERID,PTCDUSCR    * User who created record
            MOVE      SP70,PTCDDTEX      * Date extracted (CCYYMMDD)
          ELSE
            PACK      PTCDDTUP,CCC,CYY,CMM,CDD  * Date Record Updated (CCYYMMDD)
            REP       " 0",PTCDDTUP
            MOVE      CTIMEIS,PTCDTMUP   * Time Record Updated (HH:MM:SS)
            MOVE      USERID,PTCDUSUP    * User who last updated record
          ENDIF
.
.                                           * Singapore Cancer Reg variables
.
          PACK      PTCDDOCC,PTCRD051,SP35  * Doctor/Cons.in Charge (dflt.- Att.Doc)
          PACK      PTCDDOCN,PTCRD052,SP35  * Notifying Doctor
          PACK      PTCDNTDT,PTCRD053,SP35  * Date of Notification (yyyymmdd)
.
          MOVE      "0",PTCDSNT1
          MATCH     "1",PTCRD054        * Source of Notification 1 - SN
          IF        @EQUAL
            MOVE      "1",PTCDSNT1
          ENDIF
.
          MOVE      "0",PTCDSNT2
          MATCH     "1",PTCRD055        * Source of Notification 2 - OR
          IF        @EQUAL
            MOVE      "1",PTCDSNT2
          ENDIF
.
          MOVE      "0",PTCDSNT3
          MATCH     "1",PTCRD056        * Source of Notification 3 - RS
          IF        @EQUAL
            MOVE      "1",PTCDSNT3
          ENDIF
.
          MOVE      "0",PTCDBOD1
          MATCH     "1",PTCRD057        * Basis of Diag. 1 - Death Certif Only
          IF        @EQUAL
            MOVE      "1",PTCDBOD1
          ENDIF
.
          MOVE      "0",PTCDBOD2
          MATCH     "1",PTCRD058        * Basis of Diag. 2 - Clinical only
          IF        @EQUAL
            MOVE      "1",PTCDBOD2
          ENDIF
.
          MOVE      "0",PTCDBOD3
          MATCH     "1",PTCRD059        * Basis of Diag. 3 - Clinical Investig'n
          IF        @EQUAL
            MOVE      "1",PTCDBOD3
          ENDIF
.
          MOVE      "0",PTCDBOD4
          MATCH     "1",PTCRD060        * Basis of Diag. 4 - Specif Tumor Marker
          IF        @EQUAL
            MOVE      "1",PTCDBOD4
          ENDIF
.
          MOVE      "0",PTCDBOD5
          MATCH     "1",PTCRD061        * Basis of Diag. 5 - Cytology
          IF        @EQUAL
            MOVE      "1",PTCDBOD5
          ENDIF
          PACK      PTCDBOL5,PTCRD062,SP35 * Basis of Diag. 5 - Cytology Lab No.
.
          MOVE      "0",PTCDBOD6
          MATCH     "1",PTCRD063        * Basis of Diag. 6 - Metastasis
          IF        @EQUAL
            MOVE      "1",PTCDBOD6
          ENDIF
          PACK      PTCDBOL6,PTCRD064,SP35 * Basis of Diag. 6 - Metast Lab No.
.
          MOVE      "0",PTCDBOD7
          MATCH     "1",PTCRD065        * Basis of Diag. 7 - Primary Tumor
          IF        @EQUAL
            MOVE      "1",PTCDBOD7
          ENDIF
          PACK      PTCDBOL7,PTCRD066,SP35 * Basis of Diag. 7 - PrimTumor Lab No.
.
          MOVE      "0",PTCDGD01
          MATCH     "1",PTCRD067        * Grade/Differen. 1 Well      1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD01
          ENDIF
.
          MOVE      "0",PTCDGD02
          MATCH     "1",PTCRD068        * Grade/Differen. 2 Moderate  1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD02
          ENDIF
.
          MOVE      "0",PTCDGD03
          MATCH     "1",PTCRD069        * Grade/Differen. 3 Poor      1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD03
          ENDIF
.
          MOVE      "0",PTCDGD04
          MATCH     "1",PTCRD070        * Grade/Differen. 4 Undifferentiated
          IF        @EQUAL
            MOVE      "1",PTCDGD04
          ENDIF
.
          MOVE      "0",PTCDGD05
          MATCH     "1",PTCRD071        * Grade/Differen. 5 T-Cell    1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD05
          ENDIF
.
          MOVE      "0",PTCDGD06
          MATCH     "1",PTCRD072        * Grade/Differen. 6 B-Cell    1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD06
          ENDIF
.
          MOVE      "0",PTCDGD07
          MATCH     "1",PTCRD073        * Grade/Differen. 7 Null Cell 1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD07
          ENDIF
.
          MOVE      "0",PTCDGD08
          MATCH     "1",PTCRD074        * Grade/Differen. 8 NK Cell   1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD08
          ENDIF
.
          MOVE      "0",PTCDGD09
          MATCH     "1",PTCRD075        * Grade/Differen. 9 N.O.S.    1=Y, 0=N
          IF        @EQUAL
            MOVE      "1",PTCDGD09
          ENDIF
.
          PACK      PTCDPLOD,PTCRD076,SP35   * Place of Death
          PACK      PTCDCOD1,PTCRD077,SP35   * Cause of Death line 1
          PACK      PTCDCOD2,PTCRD078,SP35   * Cause of Death line 2
          PACK      PTCDCSGT,PTCRD079,SP35   * Clinical Stage T
          PACK      PTCDCSGN,PTCRD080,SP35   * Clinical Stage N
          PACK      PTCDCSGM,PTCRD081,SP35   * Clinical Stage M
          PACK      PTCDCSSG,PTCRD082,SP35   * Clinical Stage - Stage Grouping
          PACK      PTCDCSCM,PTCRD083,SP35   * Classification Manual
.
          MOVE      "0",PTCDTNON
          MATCH     "1",PTCRD084        * Treatment - No Treatment   1=Yes, 0=No
          IF        @EQUAL
            MOVE      "1",PTCDTNON
          ENDIF
.
          MOVE      "0",PTCDTSUR
          MATCH     "1",PTCRD085        * Treatment - Surgery        1=Yes, 0=No
          IF        @EQUAL
            MOVE      "1",PTCDTSUR
          ENDIF
          MOVE      PTCRD086,PTCDTSDT   * Treatment - Surgery  initiation Date
.
          MOVE      "0",PTCDTRAD
          MATCH     "1",PTCRD087        * Treatment - Radiotherapy   1=Yes, 0=No
          IF        @EQUAL
            MOVE      "1",PTCDTRAD
          ENDIF
          MOVE      PTCRD088,PTCDTRDT   * Treatment - Radiotherapy  init. Date
.
          MOVE      "0",PTCDTCHM
          MATCH     "1",PTCRD089        * Treatment - Chemotherapy   1=Yes, 0=No
          IF        @EQUAL
            MOVE      "1",PTCDTCHM
          ENDIF
          MOVE      PTCRD090,PTCDTCDT   * Treatment - Chemo    initiation Date
.
          MOVE      "0",PTCDTHOR
          MATCH     "1",PTCRD091        * Treatment - Hormones       1=Yes, 0=No
          IF        @EQUAL
            MOVE      "1",PTCDTHOR
          ENDIF
          MOVE      PTCRD092,PTCDTHDT       * Treatment - Hormones init. Date
.
          MOVE      "0",PTCDTBIO
          MATCH     "1",PTCRD093        * Treatment - Biologcal/Other 1=Yes,0=No
          IF        @EQUAL
            MOVE      "1",PTCDTBIO
          ENDIF
          MOVE      PTCRD094,PTCDTBDT       * Treatment - Biological init. Date
.
          MOVE      PTCRD095,PTCDRLDT       * Date of First Relapse (yyyymmdd)
.
          PACK      PTCDNDCL,PTCRD096,SP35  * Notifying Dept / Clinic
.
          MOVE      "0",PTCDTSAB
          MATCH     "1",PTCRD097        * Treating Hosp. - This (Same-as-Above)
          IF        @EQUAL
            MOVE      "1",PTCDTSAB
            PACK      PTCDTHOS,SP35     * blank "Other Hos Name"
            MOVE      "0",PTCRD098      * reset second check-box
          ENDIF
          MOVE      "0",PTCDTOTH
          MATCH     "1",PTCRD098        * Treating Hosp. - This (Same-as-Above)
          IF        @EQUAL
            MOVE      "1",PTCDTOTH
            PACK      PTCDTHOS,PTCRD099,SP35  * Treating Hos. Other Hosp Name
          ENDIF
.
          MOVE      "0",PTCDRST1
          MATCH     "1",PTCRD100        * Resident Status - Sing. Citizen
          IF        @EQUAL
            MOVE      "1",PTCDRST1
....        UNPACK    SP10,PTCRD101,PTCRD102,PTCRD103,PTCRD104  * reset all oth
          ENDIF
          MOVE      "0",PTCDRST2
          MATCH     "1",PTCRD101        * Resident Status - Sing. SP
          IF        @EQUAL
            MOVE      "1",PTCDRST2
....        UNPACK    SP10,PTCRD102,PTCRD103,PTCRD104  * reset all others
          ENDIF
          MOVE      "0",PTCDRST3
          MATCH     "1",PTCRD102        * Resident Status - Malaysia
          IF        @EQUAL
            MOVE      "1",PTCDRST3
....        UNPACK    SP10,PTCRD103,PTCRD104  * reset all others
          ENDIF
          MOVE      "0",PTCDRST4
          MATCH     "1",PTCRD103        * Resident Status - Indonesia
          IF        @EQUAL
            MOVE      "1",PTCDRST4
....        UNPACK    SP10,PTCRD104           * reset all others
          ENDIF
          MOVE      "0",PTCDRST5
          MATCH     "1",PTCRD104        * Resident Status - Other
          IF        @EQUAL
            MOVE      "1",PTCDRST5
          ENDIF
.
          MOVE      PTCRD105,PTCDSURB       * Suburb/Locality of First Diagnosis
          MOVE      PTCRD106,PTCDSTTE       * State of First Diagnosis
          MOVE      PTCRD107,PTCDPOST       * Postcode of First Diagnosis 
          CMATCH    "R",PTCRD108            * "Resubmit"
          IF        @EQUAL
            MOVE      SP8,PTCDDTEX          * reset Date Extracted
          ENDIF
.
          MOVE      PTCRD113,PTCDECOG       * ECOG Performance Status (Cat EO)
          MOVE      PTCRD114,PTCDSCFL       * Stage of Cancer Flag
          MOVE      PTCRD115,PTCDCSSY       * Cancer Staging System (Cat Cs)
          MOVE      PTCRD116,PTCDBDIA       * Best Basis for Diagnosis (Cat Bd)
.
. Facility previously diagnosed at textarea
.
          MATCH     Z70,PTCRD117
          IF        !@EQUAL
            PACK      PTCDFCPR,PTCRD117,PTCRD118,PTCRD119,SP70
          ENDIF
.        
          PACK      PTCDSPAR,SP70,SP70      * Spare
.
SAVCRD99  RETURN
+
.--------------------------------------------------------------------------
. Option 8 - Cancer Coding
.--------------------------------------------------------------------------
CANC0000  BRANCH    FLDITMNO,CANC0100,CANC0200,CANC0300,CANC0400,CANC0500:
                             CANC0600,CANC0700,CANC0800,CANC0900,CANC1000:
                             CANC1100,CANC1200,CANC1300,CANC1400,CANC1500:
                             CANC1600,CANC1700,CANC1800,CANC1900,CANC2000:
                             CANC2100,CANC2200,CANC2300,CANC2400,CANC2500:
                             CANC2600,CANC2700,CANC2800,CANC2900,CANC3000:
                             CANC3100,CANC3200,CANC3300,CANC3400,CANC3500:
                             CANC3600,CANC3700,CANC3800,CANC3900,CANC4000:
                             CANC4100,CANC4200,CANC4300,CANC4400,CANC4500:
                             CANC4600,CANC4700,CANC4800,CANC4900,CANC5000:
                             CANC5100,CANC5200,CANC5300,CANC5400,CANC5500:
                             CANC5600,CANC5700,CANC5800,CANC5900,CANC6000:
                             CANC6100,CANC6200,CANC6300,CANC6400,CANC6500:
                             CANC6600,CANC6700,CANC6800,CANC6900,CANC7000:
                             CANC7100,CANC7200,CANC7300,CANC7400,CANC7500:
                             CANC7600,CANC7700,CANC7800,CANC7900,CANC8000:
                             CANC8100,CANC8200,CANC8300,CANC8400,CANC8500:
                             CANC8600,CANC8700,CANC8800,CANC8900,CANC9000:
                             CANC9100,CANC9200,CANC9300,CANC9400,CANC9500:
                             CANC9600,CANC9700,CANC9800,CANC9900
          GOTO      CANC9999
.
CANC0100  CALL      GETPRM00       * Output Primary Site
          GOTO      CANC9999
.
CANC0200  CALL      GETMOR00       * Output Histological Site
          GOTO      CANC9999
.
CANC0300  CALL      GETMET00       * Get Metastic Sites 1,2,3,4,5 & 6
          GOTO      CANC9999
.
CANC0400  CALL      REGTB000       * Patient Cancer Registration Table
          GOTO      CANC9999
.
CANC0500  WRITE     HTMLFILE;PTCDDADN;  * Patient Admission Number
          GOTO      CANC9999
.
CANC0600  WRITE     HTMLFILE;PTCDCNRG;  * Cancer Registration Number
          GOTO      CANC9999
.
CANC0700  MATCH     SP70,PTCDADTE       * Date of 1st Admis (CCYYMMDD
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDADTE,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC0800  MATCH     SP70,PTCDDDTE       * Date of 1st Diag (CCYYMMDD
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDDDTE,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC0900  MATCH     SP70,PTCDTMRC   * Date of Tumour Recurrence (CCYYMMDD)
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDTMRC,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC1000  MATCH     SP70,PTCDMTSP   * Date Metastatic Spread (CCYYMMDD)
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDMTSP,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC1100  WRITE     HTMLFILE;PTCDUKPR; * Unknown Primary 0=No 1=Yes
          GOTO      CANC9999
.
CANC1200  MOVE      PTCDPRMM,ICDCODE * Primary Site (Diagnosis) ICD10 Code
          CALL      DISICD00
          GOTO      CANC9999
.
CANC1300  MOVE      PTCDHTYP,ICDCODE * Histological Type - ICD10 Code
          CALL      DISICD00
          GOTO      CANC9999
.                                                             * start *C-208570
CANC1400  MOVE      ZERO,F1           * Metastatic Type 1 to 6 - ICD10 Code
          UNPACK    DIM127,DIM1,KEY1,DIM127
          MOVE      KEY1,F1
          LOAD      ICDCODE,F1,PTCDMET1,PTCDMET2,PTCDMET3,PTCDMET4:
                               PTCDMET5,PTCDMET6
          CALL      DISICD00
          GOTO      CANC9999
.
CANC1500  GOTO      CANC9999          * no longer used
.
CANC1600  GOTO      CANC9999          * no longer used          * end *C-208570
.
CANC1700  MOVE      PTCDLATR,CODE   * Laterality (Cat LY)
          MOVE      "LY",CATEGORY
          CALL      CODITM00
          GOTO      CANC9999
.
CANC1800  MOVE      PTCDSTAG,CODE   * Other Staging Scheme
          MOVE      "sS",CATEGORY
          CALL      CODITM00
          GOTO      CANC9999
.
CANC1900  WRITE     HTMLFILE;PTCDBT01; * Basis for Diag (this facility -
          GOTO      CANC9999           * Clinical Only) 0=No 1=Yes
.
CANC2000  MATCH     SP70,PTCDBT02      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Biochemistry) 0=No 1=Yess
          WRITE     HTMLFILE;PTCDBT02;
          GOTO      CANC9999
.
CANC2100  MATCH     SP70,PTCDBT03      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Imaging) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT03;
          GOTO      CANC9999
.
CANC2200  MATCH     SP70,PTCDBT04      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Endoscopy) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT04;
          GOTO      CANC9999
.
CANC2300  MATCH     SP70,PTCDBT05      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Exploratory Surgery) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT05;
          GOTO      CANC9999
.
CANC2400  MATCH     SP70,PTCDBT06      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Cytology/Haematology) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT06;
          GOTO      CANC9999
.
CANC2500  MATCH     SP70,PTCDBT07      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Hist. Of Meta) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT07;
          GOTO      CANC9999
.
CANC2600  MATCH     SP70,PTCDBT08      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Hist. Of Primary) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT08;
          GOTO      CANC9999
.
CANC2700  MATCH     SP70,PTCDBT09      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Other) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT09;
          GOTO      CANC9999
.
CANC2800  MATCH     SP70,PTCDBT10      * Basis for Diag (this facility -
          GOTO      CANC9999 IF EQUAL  * Autopsy) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBT10;
          GOTO      CANC9999
.
CANC2900  MATCH     SP70,PTCDOTDG      * Other Diag(this facility) free text
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDOTDG;
          GOTO      CANC9999
.
CANC3000  WRITE     HTMLFILE;PTCDRFLG; * Readmission Flag 0=No 1=Yes
          GOTO      CANC9999
.
CANC3100  MOVE      PTCDPATH,ICDCODE   * Pathology Code - ICD10 Codeode
          CALL      DISICD00
          GOTO      CANC9999
.
CANC3200  MATCH     SP70,PTCDDGPR      * Cancer Diagnosed prior to admission
          GOTO      CANC9999 IF EQUAL  * 0=No 1=Yes 2=Unknown
          WRITE     HTMLFILE;PTCDDGPR;
          GOTO      CANC9999
.
CANC3300  MATCH     SP70,PTCDFCPR      * Facility prev diagnosed at.
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDFCPR;
          GOTO      CANC9999
.
CANC3400  MATCH     SP70,PTCDBO01      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Clinical Only) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO01;
          GOTO      CANC9999
.
CANC3500  MATCH     SP70,PTCDBO02      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Biochemisrty) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO02;
          GOTO      CANC9999
.
CANC3600  MATCH     SP70,PTCDBO03      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Imaging) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO03;
          GOTO      CANC9999
.
CANC3700  MATCH     SP70,PTCDBO04      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Endoscopy) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO04;
          GOTO      CANC9999
.
CANC3800  MATCH     SP70,PTCDBO05      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Exploratory Surgery) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO05;
          GOTO      CANC9999
.
CANC3900  MATCH     SP70,PTCDBO06      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Cytology/Haematology) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO06;
          GOTO      CANC9999
.
CANC4000  MATCH     SP70,PTCDBO07      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Hist. Of Meta) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO07;
          GOTO      CANC9999
.
CANC4100  MATCH     SP70,PTCDBO08      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Hist. Of Primary) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO08;
          GOTO      CANC9999
.
CANC4200  MATCH     SP70,PTCDBO09      * Basis for Diag (oth facility -
          GOTO      CANC9999 IF EQUAL  * Other) 0=No 1=Yes
          WRITE     HTMLFILE;PTCDBO09;
          GOTO      CANC9999
.
CANC4300  MATCH     SP70,PTCDDGOT      * Other Diagnosis (other facility)
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDDGOT;
          GOTO      CANC9999
.
CANC4400  WRITE     HTMLFILE;PTCDAUTP; * Cancer Diagnosed on Autopsy only
          GOTO      CANC9999           * 0=No 1=Yes
.
CANC4500  COMPARE   ZERO,PTCDBRLW      * Breslow Thickness
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBRLW;
          GOTO      CANC9999
.
CANC4600  MOVE      PTCDMLIN,CODE      * Melanoma Invasion Level (Cat IL)
          MOVE      "IL",CATEGORY
          CALL      CODITM00
          GOTO      CANC9999
.
CANC4700  MOVE      PTCDRPLB,CODE      * Reporting Lab (Cat LB)
          MOVE      "LB",CATEGORY
          CALL      CODITM00
          GOTO      CANC9999
.
CANC4800  COMPARE   ZERO,PTCDBTSZ      * Breast Tumour Size
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBTSZ;
          GOTO      CANC9999
.
CANC4900  MATCH     SP70,PTCDCKLV      * Clarks Level
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDCKLV;
          GOTO      CANC9999
.
CANC5000  COMPARE   ZERO,PTCDGLSC      * Gleason Score
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGLSC;
          GOTO      CANC9999
.
CANC5100  MATCH     SP70,PTCDCOMM      * Comments
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDCOMM;
          GOTO      CANC9999
.
CANC5200  MATCH     SP70,PTCDDTEX      * Date extracted (CCYYMMDD)
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDDTEX,CCENT,CYEAR,CMON,CDAY    * Date of Coding
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC5300  MATCH     SP70,PTCDDTRC      * Date Record Created (CCYYMMDD)
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDDTRC,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC5400  MATCH     SP70,PTCDTMCR      * Time Record Created (HH:MM:SS)
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDTMCR;
          GOTO      CANC9999
.
CANC5500  PACK      KEY10,PTCDUSCR,SP70  * User who created record
          CALL      RDWBSE1
          BRANCH    OVRCD,CANC9999
          WRITE     HTMLFILE;WBSENAM;
          GOTO      CANC9999
.
CANC5600  MATCH     SP70,PTCDDTUP      * Date Record Updated (CCYYMMDD)
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDDTUP,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC5700  MATCH     SP70,PTCDTMUP      * Time Record Updated (HH:MM:SS)
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDTMUP;
          GOTO      CANC9999
.
CANC5800  PACK      KEY10,PTCDUSUP,SP70  * User who last updated record
          CALL      RDWBSE1
          BRANCH    OVRCD,CANC9999
          WRITE     HTMLFILE;WBSENAM;
          GOTO      CANC9999
.
CANC5900  CALL      PREVRG00       * Prev set of Registrations
          GOTO      CANC9999
.
CANC6000  CALL      NEXTRG00       * Next set of Registrations
          GOTO      CANC9999
.
CANC6100  CALL      REGLST00       * List of Cancer Registration for a U/R
          GOTO      CANC9999
.
CANC6200  CALL      SELSTA00       * Selection List of Cancer Stationary Codes
          GOTO      CANC9999
.
CANC6300  MOVE      PTYPE,CODE     * Resident Status
          MOVE      "T ",CATEGORY
          CALL      GETCOD00
          WRITE     HTMLFILE;TCINDC1;
          GOTO      CANC9999
.
CANC6400  MOVE      PTCDBSDG,CODE  * Basis of Diagnosis NZ.
          MOVE      "BD",CATEGORY
          CALL      CODITM00
          GOTO      CANC9999
.
CANC6500  WRITE     HTMLFILE;PTCRMULT;   * Multiple Primaries
          GOTO      CANC9999
.
CANC6600  COMPARE   ZERO,PTCRSTAY        * LOS in NZ
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCRSTAY;
          GOTO      CANC9999
.
CANC6700  WRITE     HTMLFILE;PTCRVERT;   * Converted Record
          GOTO      CANC9999
.
CANC6800  WRITE     HTMLFILE;PMCDG002;   * Cancer Registration Number
          GOTO      CANC9999
.
CANC6900  WRITE     HTMLFILE;PMCDG003;   * Primary Site
          GOTO      CANC9999
.
CANC7000  UNPACK    DIM127,DIM1,KEY1,DIM127
          MOVE      KEY1,F1
          BRANCH    F1,CANC7010
          WRITE     HTMLFILE;PMCDG004;   * Basis for Diagnosis
          GOTO      CANC9999
.
CANC7010  MOVE      UNKNOWN,DIM25
          LOAD      DIM25,PMCDG004,BASDCLIN,UNKNOWN,BASDIMAG,BASDENDO:
                                   UNKNOWN,BASDCYTO,BASDMETA,BASDPRIM:
                                   BASDAUTO
          WRITE     HTMLFILE;DIM25;     * Basis for Diagnosis Desc
          GOTO      CANC9999
.
CANC7100  CALL      LSTRCD00             * List of Reason for clinical Diagnosis
          GOTO      CANC9999
.
CANC7200  WRITE     HTMLFILE;VIEWONLY;   * Display only
          GOTO      CANC9999
.
CANC7300  WRITE     HTMLFILE;PTCDESTM;   * Estimated date flag
          GOTO      CANC9999
.
CANC7400  WRITE     HTMLFILE;PTCDCELT;   * Histological grade
          GOTO      CANC9999
.
.                                           * Singapore Cancer Reg - variables
CANC7500  MATCH     SP10,PTCDDOCC      * Doctor/Cons.in Charge (dflt.- Att.Doc)
          IF        @EQUAL
            MATCH     SP10,ADOCTA  
            GOTO      CANC9999 IF EQUAL
            PACK      PTCDDOCC,ADOCTA,SP10
          ENDIF
.
          PACK      GENPCODE,PTCDDOCC,SP70
          CALL      HCPDET00                * hcp details
          GOTO      CANC9999
.
CANC7600  MATCH     SP70,PTCDDOCN      * Notifying Doctor
....      GOTO      CANC9999 IF EQUAL
.
          PACK      GENPCODE,PTCDDOCN,SP70
          CALL      HCPDET00                * hcp details
          GOTO      CANC9999
.
CANC7700  MATCH     SP70,PTCDNTDT      * Date of Notification (yyyymmdd)
          GOTO      CANC9999 IF EQUAL
          UNPACK    PTCDNTDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANC9999
.
CANC7800  CMATCH    SP1,PTCDSNT1       * Source of Notification 1 - SN      Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDSNT1;
          GOTO      CANC9999
.
CANC7900  CMATCH    SP1,PTCDSNT2       * Source of Notification 2 - OR      Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDSNT2;
          GOTO      CANC9999
.
CANC8000  CMATCH    SP1,PTCDSNT3       * Source of Notification 3 - RS      Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDSNT3;
          GOTO      CANC9999
.
CANC8100  CMATCH    SP1,PTCDBOD1       * Basis of Diag. 1 - Death Cert Only Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOD1;
          GOTO      CANC9999
.
CANC8200  CMATCH    SP1,PTCDBOD2       * Basis of Diag. 2 - Clinical only   Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOD2;
          GOTO      CANC9999
.
CANC8300  CMATCH    SP1,PTCDBOD3       * Basis of Diag. 3 - Clinical Invest. Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOD3;
          GOTO      CANC9999
.
CANC8400  CMATCH    SP1,PTCDBOD4       * Basis of Diag. 4 - Specif Tumor Marker
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOD4;
          GOTO      CANC9999
.
CANC8500  CMATCH    SP1,PTCDBOD5       * Basis of Diag. 5 - Cytology        Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOD5;
          GOTO      CANC9999
.
CANC8600  MATCH     SP70,PTCDBOL5      * Basis of Diag. 5 - Cytology Lab No.
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOL5;
          GOTO      CANC9999
.
CANC8700  CMATCH    SP1,PTCDBOD6       * Basis of Diag. 6 - Metastasis      Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOD6;
          GOTO      CANC9999
.
CANC8800  MATCH     SP70,PTCDBOL6      * Basis of Diag. 6 - Metastasis Lab No.
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOL6;
          GOTO      CANC9999
.
CANC8900  CMATCH    SP1,PTCDBOD7       * Basis of Diag. 7 - Primary Tumor   Y/N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOD7;
          GOTO      CANC9999
.
CANC9000  MATCH     SP70,PTCDBOL7      * Basis of Diag. 7 - Prim. Tumor Lab No.
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDBOL7;
          GOTO      CANC9999
.
CANC9100  CMATCH    SP1,PTCDGD01       * Grade/Differen. 1 Well      1=Y, 0=N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD01;
          GOTO      CANC9999
.
CANC9200  CMATCH    SP1,PTCDGD02       * Grade/Differen. 2 Moderate  1=Y, 0=N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD02;
          GOTO      CANC9999
.
CANC9300  CMATCH    SP1,PTCDGD03       * Grade/Differen. 3 Poor      1=Y, 0=N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD03;
          GOTO      CANC9999
.
CANC9400  CMATCH    SP1,PTCDGD04       * Grade/Differen. 4 Undifferentiated
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD04;
          GOTO      CANC9999
.
CANC9500  CMATCH    SP1,PTCDGD05       * Grade/Differen. 5 T-Cell    1=Y, 0=N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD05;
          GOTO      CANC9999
.
CANC9600  CMATCH    SP1,PTCDGD06       * Grade/Differen. 6 B-Cell    1=Y, 0=N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD06;
          GOTO      CANC9999
.
CANC9700  CMATCH    SP1,PTCDGD07       * Grade/Differen. 7 Null Cell 1=Y, 0=N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD07;
          GOTO      CANC9999
.
CANC9800  CMATCH    SP1,PTCDGD08       * Grade/Differen. 8 NK Cell   1=Y, 0=N
          GOTO      CANC9999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD08;
          GOTO      CANC9999
.
CANC9900  UNPACK    DIM127,D1,KEY3,DIM127
          MOVE      KEY3,FLDITMNO
          CALL      CANCX000                * additional patcrd fields
          GOTO      CANC9999
.
CANC9999  RETURN
.
.--------------------------------------------------------------------
.                                             additional patcrd fields
.---------------------------------------------------------------------
CANCX000  BRANCH    FLDITMNO,CANCX010,CANCX020,CANCX030,CANCX040,CANCX050:
                             CANCX060,CANCX070,CANCX080,CANCX090,CANCX100:
                             CANCX110,CANCX120,CANCX130,CANCX140,CANCX150:
                             CANCX160,CANCX170,CANCX180,CANCX190,CANCX200:
                             CANCX210,CANCX220,CANCX230,CANCX240,CANCX250:
                             CANCX260,CANCX270,CANCX280,CANCX290,CANCX300:
                             CANCX310,CANCX320,CANCX330,CANCX340,CANCX350:
                             CANCX360,CANCX370,CANCX380,CANCX390,CANCX400:
                             CANCX410,CANCX420
          GOTO      CANCX999
.
CANCX010  CMATCH    SP1,PTCDGD09       * Grade/Differen. 9 N.O.S.    1=Y, 0=N
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDGD09;
          GOTO      CANCX999
.
CANCX020  MATCH     SP70,PTCDPLOD      * Place of Death
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDPLOD;
          GOTO      CANCX999
.
CANCX030  MATCH     SP70,PTCDCOD1      * Cause of Death line 1
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDCOD1;
          GOTO      CANCX999
.
CANCX040  MATCH     SP70,PTCDCOD2      * Cause of Death line 2
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDCOD2;
          GOTO      CANCX999
.
CANCX050  CMATCH    SP1,PTCDCSGT       * Clinical Stage T              Yes/No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDCSGT;
          GOTO      CANCX999
.
CANCX060  CMATCH    SP1,PTCDCSGN       * Clinical Stage N              Yes/No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDCSGN;
          GOTO      CANCX999
.
CANCX070  CMATCH    SP1,PTCDCSGM       * Clinical Stage M              Yes/No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDCSGM;
          GOTO      CANCX999
.
CANCX080  MATCH     SP70,PTCDCSSG      * Clinical Stage - Stage Grouping
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDCSSG;
          GOTO      CANCX999
.
CANCX090  MATCH     SP70,PTCDCSCM      * Classification Manual
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDCSCM;
          GOTO      CANCX999
.
CANCX100  CMATCH    SP1,PTCDTNON       * Treatment - No Treatment   1=Yes, 0=No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTNON;
          GOTO      CANCX999
.
CANCX110  CMATCH    SP1,PTCDTSUR       * Treatment - Surgery        1=Yes, 0=No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTSUR;
          GOTO      CANCX999
.
CANCX120  MATCH     SP70,PTCDTSDT      * Treatment - Surgery  initiation Date
          GOTO      CANCX999 IF EQUAL
          UNPACK    PTCDTSDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANCX999
.
CANCX130  CMATCH    SP1,PTCDTRAD       * Treatment - Radiotherapy   1=Yes, 0=No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTRAD;
          GOTO      CANCX999
.
CANCX140  MATCH     SP70,PTCDTRDT      * Treatment - Radiotherapy  init. Date
          GOTO      CANCX999 IF EQUAL
          UNPACK    PTCDTRDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANCX999
.
CANCX150  CMATCH    SP1,PTCDTCHM       * Treatment - Chemotherapy   1=Yes, 0=No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTCHM;
          GOTO      CANCX999
.
CANCX160  MATCH     SP70,PTCDTCDT      * Treatment - Chemo    initiation Date
          GOTO      CANCX999 IF EQUAL
          UNPACK    PTCDTCDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANCX999
.
CANCX170  CMATCH    SP1,PTCDTHOR       * Treatment - Hormones       1=Yes, 0=No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTHOR;
          GOTO      CANCX999
.
CANCX180  MATCH     SP70,PTCDTHDT      * Treatment - Hormones initiation Date
          GOTO      CANCX999 IF EQUAL
          UNPACK    PTCDTHDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANCX999
.
CANCX190  CMATCH    SP1,PTCDTBIO       * Treatment - Biologcal/Other 1=Yes,0=No
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTBIO;
          GOTO      CANCX999
.
CANCX200  MATCH     SP70,PTCDTBDT      * Treatment - Biological init. Date
          GOTO      CANCX999 IF EQUAL
          UNPACK    PTCDTBDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANCX999
.
CANCX210  MATCH     SP70,PTCDRLDT      * Date of First Relapse (yyyymmdd)
          GOTO      CANCX999 IF EQUAL
          UNPACK    PTCDRLDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANCX999
.
CANCX220  COMPARE   ONE,PCEASE         * Deceased Indicator
          GOTO      CANCX999 IF NOT EQUAL
          WRITE     HTMLFILE;PCEASE;
          GOTO      CANCX999
.
CANCX230  MATCH     SP70,PDECDTE       * Date of Death
          GOTO      CANCX999 IF EQUAL
          UNPACK    PDECDTE,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      CANCX999
.
CANCX240  CMATCH    SP35,PTCDNDCL      * Notifying Dept / Clinic
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDNDCL;
          GOTO      CANCX999
.
CANCX250  CMATCH    SP1,PTCDTSAB       * Treating Hosp - This (Same-as-Above)  
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTSAB;
          GOTO      CANCX999
.
CANCX260  CMATCH    SP1,PTCDTOTH       * Treating Hosp - Other
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTOTH;
          GOTO      CANCX999
.
CANCX270  CMATCH    SP35,PTCDTHOS      * Treating - Other Hosp Name
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDTHOS;
          GOTO      CANCX999
.
CANCX280  CMATCH    SP1,PTCDRST1       * Resident Status - Sing. Citizen
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDRST1;
          GOTO      CANCX999
.
CANCX290  CMATCH    SP1,PTCDRST2       * Resident Status - Sing. PR
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDRST2;
          GOTO      CANCX999
.
CANCX300  CMATCH    SP1,PTCDRST3       * Resident Status - Maylasia
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDRST3;
          GOTO      CANCX999
.
CANCX310  CMATCH    SP1,PTCDRST4       * Resident Status - Indonesia
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDRST4;
          GOTO      CANCX999
.
CANCX320  CMATCH    SP1,PTCDRST5       * Resident Status - Other
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDRST5;
          GOTO      CANCX999
.
CANCX330  MATCH     SP70,PTCDSURB       * Suburb/Locality of First Diagnosis
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDSURB;
          GOTO      CANCX999
.
CANCX340  MATCH     SP35,PTCDSTTE       * State of First Diagnosis
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDSTTE;
          GOTO      CANCX999
.
CANCX350  MATCH     SP70,PTCDPOST       * Postcode of First Diagnosis
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDPOST;
          GOTO      CANCX999
.
CANCX360  MOVE      PTCDECOG,CODE      * ECOG Performance Status (Cat EO)
          MOVE      "EO",CATEGORY
          CALL      CODITM00
          GOTO      CANCX999
.
CANCX370  MATCH     SP70,PTCDSCFL      * Stage of Cancer Flag
          GOTO      CANCX999 IF EQUAL
          WRITE     HTMLFILE;PTCDSCFL;
          GOTO      CANCX999
.
CANCX380  MOVE      PTCDCSSY,CODE      * Cancer Staging System (Cat Cs)
          MOVE      "Cs",CATEGORY
          CALL      CODITM00
          GOTO      CANCX999
.
CANCX390  MATCH     SP70,PTCDSCFL      * Stage of Cancer Flag Desc
          IF        @EQUAL
            WRITE     HTMLFILE;"No";
          ENDIF
          MATCH     "0",PTCDSCFL
          IF        @EQUAL
            WRITE     HTMLFILE;"No";
          ENDIF
          MATCH     "1",PTCDSCFL
          IF        @EQUAL
            WRITE     HTMLFILE;"Yes";
          ENDIF
          GOTO      CANCX999
.
CANCX400  MOVE      PTCDCSSG,CODE      
          MOVE      "SG",CATEGORY
          CALL      CODITM00
          GOTO      CANCX999
.
CANCX410  MOVE      PTCDBDIA,CODE          * Best basis for diagnosis
          MOVE      "Bd",CATEGORY
          CALL      CODITM00
          GOTO      CANCX999
.
CANCX420  PACK      PTCDFCPR,PTCDFCPR,SP70,SP70,SP70,SP70     
          PACK      DPCRD117,SP70,SP70
          PACK      DPCRD118,SP70,SP70
          PACK      DPCRD119,SP70,SP70
          UNPACK    PTCDFCPR,DPCRD117,DPCRD118,DPCRD119
.
          STRIP     DPCRD117
          MOVELPTR  DPCRD117,F2
          IF        F2=0
            MOVE      ONE,F2
          ENDIF
          SFORMAT   VAR,F2
          MOVE      DPCRD117,VAR
          WRITE     HTMLFILE;VAR
          SFORMAT   VAR,127
.
          STRIP     DPCRD118
          MOVELPTR  DPCRD118,F2
          IF        F2=0
            MOVE      ONE,F2
          ENDIF
          SFORMAT   VAR,F2
          MOVE      DPCRD118,VAR
          WRITE     HTMLFILE;VAR
          SFORMAT   VAR,127
.
          STRIP     DPCRD119
          MOVELPTR  DPCRD119,F2
          IF        F2=0
            MOVE      ONE,F2
          ENDIF
          SFORMAT   VAR,F2
          MOVE      DPCRD119,VAR
          WRITE     HTMLFILE;VAR
          SFORMAT   VAR,127
.
          GOTO      CANCX999
.
CANCX999  RETURN
.
