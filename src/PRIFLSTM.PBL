. *----------------------------------------------------------------------
. * Include Name  :   PRIFLSTM.PBL
. *
. * Function      :   CGI Variables for PRIFLSFD - priflsaf
. *
. * Mods          :   V9.02.01 16.10.2001  R Surve
. *                            Created include
. *               :   V9.02.02 13.12.2001  DC & KS
. *                            Include Scan Flag  
. *               :   V9.03.01 12.02.2003  Lina Vo  CAR 44133
. *                            Mods to MVPRFL00 to include practice fields
. *                            PRFL0009 & PRFL0010.  Practice and Service
. *                            Doctor Fields are treated independently.
. *----------------------------------------------------------------------
.------------------------------------------------------------------------
.   Clear Parameters for General Letter  
.------------------------------------------------------------------------
CPPRFL00  MOVE      Z70,PRFL0001
          MOVE      Z70,PRFL0002
          MOVE      Z70,PRFL0003
          MOVE      Z70,PRFL0004
          MOVE      Z70,PRFL0005
          MOVE      Z70,PRFL0006
          MOVE      Z70,PRFL0007
          MOVE      Z70,PRFL0008
          MOVE      Z70,PRFL0009
          MOVE      Z70,PRFL0010
          MOVE      Z70,PRFL0011
          MOVE      Z70,PRFL0012
          MOVE      Z70,PRFL0013
          MOVE      Z70,PRFL0014
          MOVE      Z70,PRFL0015
          MOVE      Z70,PRFL0016
          MOVE      Z70,PRFL0017
          MOVE      Z70,PRFL0018
          MOVE      Z70,PRFL0019
          MOVE      Z70,PRFL0020
          MOVE      Z70,PRFL0021
          MOVE      Z70,PRFL0022
          MOVE      ZERO,PRFL0023
          MOVE      Z70,PRFL0024
          MOVE      Z70,PRFL0025
          MOVE      Z70,PRFL0026
          MOVE      Z70,PRFL0027
.          
CPPRFL99  RETURN
.
.------------------------------------------------------------
.   Set Parameters for Private Practice Financial Letter file
.------------------------------------------------------------
SPPRFL00  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPPRFL01,SPPRFL02,SPPRFL03,SPPRFL04,SPPRFL05:
                       SPPRFL06,SPPRFL07,SPPRFL08,SPPRFL09,SPPRFL10:
                       SPPRFL11,SPPRFL12,SPPRFL13,SPPRFL14,SPPRFL15:
                       SPPRFL16,SPPRFL17,SPPRFL18,SPPRFL19,SPPRFL20:
                       SPPRFL21,SPPRFL22,SPPRFL23,SPPRFL24,SPPRFL25:
                       SPPRFL26,SPPRFL27
.
          MOVE      ONE,EXIT
          GOTO      SPPRFL99
.
SPPRFL01  SQUEEZE   QRYDATA
          MOVE      QRYDATA,PRFL0001
          PACK      PRFL0001,PRFL0001,SP70
          GOTO      SPPRFL99
.
SPPRFL02  MOVE      QRYDATA,PRFL0002
          GOTO      SPPRFL99
.
SPPRFL03  MOVE      QRYDATA,PRFL0003 
          GOTO      SPPRFL99 
.
SPPRFL04  MOVE      QRYDATA,PRFL0004 
          GOTO      SPPRFL99
.
SPPRFL05  MOVE      QRYDATA,PRFL0005 
          GOTO      SPPRFL99
.
SPPRFL06  MOVE      QRYDATA,PRFL0006 
          GOTO      SPPRFL99
.
SPPRFL07  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0007
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0007,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL08  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0008
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0008,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL09  MOVE      QRYDATA,PRFL0009 
          GOTO      SPPRFL99 
.
SPPRFL10  MOVE      QRYDATA,PRFL0010 
          GOTO      SPPRFL99  
.
SPPRFL11  MOVE      QRYDATA,PRFL0011
          GOTO      SPPRFL99
.
SPPRFL12  MOVE      QRYDATA,PRFL0012 
          GOTO      SPPRFL99
.
SPPRFL13  MOVE      QRYDATA,PRFL0013
          GOTO      SPPRFL99
.
SPPRFL14  MOVE      QRYDATA,PRFL0014
          GOTO      SPPRFL99
.
SPPRFL15  MOVE      QRYDATA,PRFL0015
          GOTO      SPPRFL99
.
SPPRFL16  MOVE      QRYDATA,PRFL0016
          GOTO      SPPRFL99
.
SPPRFL17  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0017
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0017,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL18  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0018
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0018,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL19  MOVE      QRYDATA,PRFL0019
          GOTO      SPPRFL99
.
SPPRFL20  MOVE      QRYDATA,PRFL0020
          GOTO      SPPRFL99
.
SPPRFL21  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0021
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0021,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL22  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0022
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0022,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL23  MOVE      QRYDATA,PRFL0023
          GOTO      SPPRFL99
.
SPPRFL24  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0024
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0024,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL25  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          IF        @EQUAL
            MOVE      QRYDATA,PRFL0025
            GOTO      SPPRFL99 
          ENDIF
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PRFL0025,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPPRFL99
.
SPPRFL26  MOVE      QRYDATA,PRFL0026
          GOTO      SPPRFL99
.
SPPRFL27  MOVE      QRYDATA,PRFL0027
          GOTO      SPPRFL99
.
SPPRFL99  RETURN
.
.------------------------------------------------------------
. Clear Private Practice Financial Letter Variables
.------------------------------------------------------------
CLPRFL00  MOVE      SP70,PRFLSEID
          MOVE      SP70,PRFLSEDC
          MOVE      SP70,PRFLDBFR
          MOVE      SP70,PRFLDBTO
          MOVE      SP70,PRFLSNFR
          MOVE      SP70,PRFLSNTO
          MOVE      SP70,PRFLVDFR
          MOVE      SP70,PRFLVDTO
          MOVE      SP70,PRFLPPFR
          MOVE      SP70,PRFLPPTO
          MOVE      SP70,PRFLSDFR
          MOVE      SP70,PRFLSDTO
          MOVE      SP70,PRFLCCFR
          MOVE      SP70,PRFLCCTO
          MOVE      SP70,PRFLLLFR
          MOVE      SP70,PRFLLLTO
          MOVE      SP70,PRFLDLFR
          MOVE      SP70,PRFLDLTO
          MOVE      SP70,PRFLFCFR
          MOVE      SP70,PRFLFCTO
          MOVE      SP70,PRFLFDFR
          MOVE      SP70,PRFLFDTO
          MOVE      ZERO,PRFLMBAL
          MOVE      SP70,PRFLIDFR
          MOVE      SP70,PRFLIDTO
          MOVE      SP70,PRFLLTYP
          MOVE      SP70,PRFLSCAN
.          
CLPRFL99  RETURN
.
.------------------------------------------------------------
. Move CGI variable to file variable 
.------------------------------------------------------------
MVPRFL00  MATCH     PRFL0001,Z70
          IF        !@EQUAL
            MOVE      PRFL0001,PRFLSEID
          ENDIF
.
          MATCH     PRFL0002,Z70
          IF        !@EQUAL
            MOVE      PRFL0002,PRFLSEDC
          ENDIF
.
          MATCH     PRFL0003,Z70
          IF        !@EQUAL
            MOVE      PRFL0003,PRFLDBFR
          ENDIF
.
          MATCH     PRFL0004,Z70
          IF        !@EQUAL
            MOVE      PRFL0004,PRFLDBTO
          ENDIF
.
          MATCH     PRFL0005,Z70
          IF        !@EQUAL
            MOVE      PRFL0005,PRFLSNFR
          ENDIF
.
          MATCH     PRFL0006,Z70
          IF        !@EQUAL
            MOVE      PRFL0006,PRFLSNTO
          ENDIF
.
          MATCH     PRFL0007,Z70
          IF        !@EQUAL
            MOVE      PRFL0007,PRFLVDFR
          ENDIF
.
          MATCH     PRFL0008,Z70
          IF        !@EQUAL
            MOVE      PRFL0008,PRFLVDTO
          ENDIF
.
          MATCH     PRFL0009,Z70
          IF        !@EQUAL
            MOVE      PRFL0009,PRFLPPFR
          ENDIF
.
          MATCH     PRFL0010,Z70
          IF        !@EQUAL
            MOVE      PRFL0010,PRFLPPTO
          ENDIF
.
          MATCH     PRFL0011,Z70
          IF        !@EQUAL
            MOVE      PRFL0011,PRFLSDFR
          ENDIF
.
          MATCH     PRFL0012,Z70
          IF        !@EQUAL
            MOVE      PRFL0012,PRFLSDTO
          ENDIF
.
          MATCH     PRFL0013,Z70
          IF        !@EQUAL
            MOVE      PRFL0013,PRFLCCFR
          ENDIF
.
          MATCH     PRFL0014,Z70
          IF        !@EQUAL
            MOVE      PRFL0014,PRFLCCTO
          ENDIF
.
          MATCH     PRFL0015,Z70
          IF        !@EQUAL
            MOVE      PRFL0015,PRFLLLFR
          ENDIF
.
          MATCH     PRFL0016,Z70
          IF        !@EQUAL
            MOVE      PRFL0016,PRFLLLTO
          ENDIF
.
          MATCH     PRFL0017,Z70
          IF        !@EQUAL
            MOVE      PRFL0017,PRFLDLFR
          ENDIF
.
          MATCH     PRFL0018,Z70
          IF        !@EQUAL
            MOVE      PRFL0018,PRFLDLTO
          ENDIF
.
          MATCH     PRFL0019,Z70
          IF        !@EQUAL
            MOVE      PRFL0019,PRFLFCFR
          ENDIF
.
          MATCH     PRFL0020,Z70
          IF        !@EQUAL
            MOVE      PRFL0020,PRFLFCTO
          ENDIF
.
          MATCH     PRFL0021,Z70
          IF        !@EQUAL
            MOVE      PRFL0021,PRFLFDFR
          ENDIF
.
          MATCH     PRFL0022,Z70
          IF        !@EQUAL
            MOVE      PRFL0022,PRFLFDTO
          ENDIF
.
          MOVE      PRFL0023,PRFLMBAL
.
          MATCH     PRFL0024,Z70
          IF        !@EQUAL
            MOVE      PRFL0024,PRFLIDFR
          ENDIF
.
          MATCH     PRFL0025,Z70
          IF        !@EQUAL
            MOVE      PRFL0025,PRFLIDTO
          ENDIF
.
          MATCH     PRFL0026,Z70
          IF        !@EQUAL
            MOVE      PRFL0026,PRFLLTYP
          ENDIF
.
          MATCH     PRFL0027,Z70
          IF        !@EQUAL
            MOVE      PRFL0027,PRFLSCAN
          ENDIF
.
MVPRFL99  RETURN
.
.------------------------------------------------------------
. Add Reminder Accounts Fields
.------------------------------------------------------------
PRFL0000  BRANCH    FLDITMNO,PRFL0100,PRFL0200,PRFL0300,PRFL0400,PRFL0500:
                             PRFL0600,PRFL0700,PRFL0800,PRFL0900,PRFL1000:
                             PRFL1100,PRFL1200,PRFL1300,PRFL1400,PRFL1500:
                             PRFL1600,PRFL1700,PRFL1800,PRFL1900,PRFL2000:
                             PRFL2100,PRFL2200,PRFL2300,PRFL2400,PRFL2500:
                             PRFL2600,PRFL2700,PRFL2800
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PRFL9999
.
PRFL0100  WRITE     HTMLFILE;PRFLSEID;
          GOTO      PRFL9999
.
PRFL0200  WRITE     HTMLFILE;PRFLSEDC;
          GOTO      PRFL9999
.
PRFL0300  WRITE     HTMLFILE;PRFLDBFR;
          GOTO      PRFL9999
.
PRFL0400  WRITE     HTMLFILE;PRFLDBTO;
          GOTO      PRFL9999
.
PRFL0500  WRITE     HTMLFILE;PRFLSNFR;
          GOTO      PRFL9999
.
PRFL0600  WRITE     HTMLFILE;PRFLSNTO;
          GOTO      PRFL9999
.
PRFL0700  MATCH     PRFLVDFR,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLVDFR,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL0800  MATCH     PRFLVDTO,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLVDTO,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL0900  MOVE      PRFLPPFR,PRRMMP01
          CALL      SELPPP00     * Private Practice Medical Practices
          GOTO      PRFL9999
.
PRFL1000  MOVE      PRFLPPTO,PRRMMP01
          CALL      SELPPP00     * Private Practice Medical Practices
          GOTO      PRFL9999
.
PRFL1100  PACK      TMDOPR01,PRFLSDFR,SP70
          CALL      SELPPD00     * Private Practice Doctors
          GOTO      PRFL9999
.
PRFL1200  PACK      TMDOPR01,PRFLSDTO,SP70
          CALL      SELPPD00     * Private Practice Doctors
          GOTO      PRFL9999
.
PRFL1300  MOVE      "CL",CATEGORY
          MOVE      PRFLCCFR,CODE
          CALL      CODITM00
          GOTO      PRFL9999
.
PRFL1400  MOVE      "CL",CATEGORY
          MOVE      PRFLCCTO,CODE
          CALL      CODITM00
          GOTO      PRFL9999
.
PRFL1500  MOVE      PRFLLLFR,PRLLTYP1
          CALL      SELPPF00     * Private Practice Financial Letter TYpe
          GOTO      PRFL9999
.
PRFL1600  MOVE      PRFLLLTO,PRLLTYP1
          CALL      SELPPF00     * Private Practice Financial Letter TYpe
          GOTO      PRFL9999
.
PRFL1700  MATCH     PRFLDLFR,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLDLFR,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL1800  MATCH     PRFLDLTO,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLDLTO,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL1900  MOVE      "FA",CATEGORY
          MOVE      PRFLFCFR,CODE
          CALL      CODITM00
          GOTO      PRFL9999
.
PRFL2000  MOVE      "FA",CATEGORY
          MOVE      PRFLFCTO,CODE
          CALL      CODITM00
          GOTO      PRFL9999
.
PRFL2100  MATCH     PRFLFDFR,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLFDFR,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL2200  MATCH     PRFLFDTO,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLFDTO,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL2300  WRITE     HTMLFILE;PRFLMBAL;
          GOTO      PRFL9999
.
PRFL2400  MATCH     PRFLIDFR,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLIDFR,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL2500  MATCH     PRFLIDTO,SP70
          GOTO      PRFL9999 IF EQUAL
          UNPACK    PRFLIDTO,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      PRFL9999
.
PRFL2600  MOVE      PRFLLTYP,PRLLTYP1
          CALL      SELPPF00     * Private Practice Financial Letter TYpe
          GOTO      PRFL9999
.
PRFL2700  CALL      PRFTAB00
          GOTO      PRFL9999
.
PRFL2800  WRITE     HTMLFILE;PRFLSCAN;
          GOTO      PRFL9999
.
PRFL9999  RETURN
.------------------------------------------------------------
. List of General Letter lists
.------------------------------------------------------------
PRFTAB00  MOVE      SP70,KEY4
          CALL      RSPRFLS1
PRFTAB10  CALL      RKPRFLS1
          BRANCH    OVRCD,PRFTAB99
.
          CLEAR     HTMLLINK
          APPEND    "javascript:UpdateItem('",HTMLLINK
          APPEND    PRFLSEID,HTMLLINK
          APPEND    "')",HTMLLINK
          RESET     HTMLLINK
.
          WRITE     HTMLFILE;"t.addRow(#"",HTMLLINK,"#",":
                             "#"",PRFLSEID,"#",":
                             "#"",PRFLSEDC,"#",":
                             "#"",PRFLDBFR,"#",":
                             "#"",PRFLDBTO,"#");"
.
          GOTO      PRFTAB10
.
PRFTAB99  RETURN
