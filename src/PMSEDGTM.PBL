.------------------------------------------------------------------------------
.
.        Include Name  : PMSEDGTM.PBL
.
.        Function      : Effective DRG utilitiy routines for cgi vars
.
.        Modifications :
.           V10.08.00    26/08/2016  Don Nguyen   TSK 0312570
.                        Created include
.------------------------------------------------------------------------------
.
.------------------------------------------------------------------------
.   Clear Parameters for cgi vars
.------------------------------------------------------------------------
CPWL0000  MOVE      Z70,PMSED001
          MOVE      Z70,PMSED002
          MOVE      Z70,PMSED003
          MOVE      Z70,PMSED004
          MOVE      Z70,PMSED005
          MOVE      Z70,PMSED006
          MOVE      Z70,PMSED007
          MOVE      Z70,PMSED008
          MOVE      Z70,PMSED009
          MOVE      Z70,PMSED010
          MOVE      Z70,PMSED011
          MOVE      Z70,PMSED012
          MOVE      Z70,PMSED013
.
CPWL9999  RETURN
.
.------------------------------------------------------------
. Display fields from PMSEDGFD
.------------------------------------------------------------
PMED0000  BRANCH    FLDITMNO,PMED0010,PMED0020,PMED0030,PMED0040,PMED0050:
                             PMED0060,PMED0070,PMED0080,PMED0090,PMED0100:
                             PMED0110,PMED0120,PMED0130
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMED9999
.
PMED0010  WRITE     HTMLFILE;PMEGRTYP;
          GOTO      PMED9999
.
PMED0020  WRITE     HTMLFILE;PMEGKEYV;
          GOTO      PMED9999
.
PMED0030  WRITE     HTMLFILE;PMEGDRGV;
          GOTO      PMED9999
.
PMED0040  WRITE     HTMLFILE;PMEGPYCD;
          GOTO      PMED9999
.
PMED0050  MATCH     SP70,PMEGFDAT
          GOTO      PMED9999 IF EQUAL
          UNPACK    PMEGFDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMED9999
.
PMED0060  MATCH     SP70,PMEGTDAT
          GOTO      PMED9999 IF EQUAL
          UNPACK    PMEGTDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMED9999
.
PMED0070  WRITE     HTMLFILE;PMEGCUID;
          GOTO      PMED9999
.
PMED0080  MATCH     SP70,PMEGCDAT
          GOTO      PMED9999 IF EQUAL
          UNPACK    PMEGCDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMED9999
.
PMED0090  WRITE     HTMLFILE;PMEGCTIM;
          GOTO      PMED9999
.
PMED0100  WRITE     HTMLFILE;PMEGUUID;
          GOTO      PMED9999
.
PMED0110  MATCH     SP70,PMEGUDAT
          GOTO      PMED9999 IF EQUAL
          UNPACK    PMEGUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMED9999
.
PMED0120  WRITE     HTMLFILE;PMEGUTIM;
          GOTO      PMED9999
.
PMED0130  WRITE     HTMLFILE;PMEGCOMM;
          GOTO      PMED9999
.
PMED9999  RETURN
.
.------------------------------------------------------------
.   Set Parameters for PMSEDGFD
.------------------------------------------------------------
SPMED000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPMED001,SPMED002,SPMED003,SPMED004,SPMED005:
                       SPMED006,SPMED007,SPMED008,SPMED009,SPMED010:
                       SPMED011,SPMED012,SPMED013
.
          MOVE      ONE,EXIT
          GOTO      SPMED999
.
SPMED001  MOVE      QRYDATA,PMSED001
          GOTO      SPMED999
.
SPMED002  MOVE      QRYDATA,PMSED002
          GOTO      SPMED999
.
SPMED003  MOVE      QRYDATA,PMSED003
          GOTO      SPMED999
.
SPMED004  MOVE      QRYDATA,PMSED004
          GOTO      SPMED999
.
SPMED005  MATCH     Z70,QRYDATA
          IF        !@EQUAL
            MATCH     SP70,QRYDATA
            IF        @EQUAL | @EOS
              MOVE      SP70,PMSED005
            ELSE
              UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
              CALL      SETMTH00
              PACK      PMSED005,CCENT,CYEAR,CMON,CDAY
              REP       " 0",PMSED005
            ENDIF
          ENDIF
          GOTO      SPMED999
.
SPMED006  MATCH     Z70,QRYDATA
          IF        !@EQUAL
            MATCH     SP70,QRYDATA
            IF        @EQUAL | @EOS
              MOVE      SP70,PMSED006
            ELSE
              UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
              CALL      SETMTH00
              PACK      PMSED006,CCENT,CYEAR,CMON,CDAY
              REP       " 0",PMSED006
            ENDIF
          ENDIF
          GOTO      SPMED999
.
SPMED007  MOVE      QRYDATA,PMSED007
          GOTO      SPMED999
.
SPMED008  MATCH     Z70,QRYDATA
          IF        !@EQUAL
            MATCH     SP70,QRYDATA
            IF        @EQUAL | @EOS
              MOVE      SP70,PMSED008
            ELSE
              UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
              CALL      SETMTH00
              PACK      PMSED008,CCENT,CYEAR,CMON,CDAY
              REP       " 0",PMSED008
            ENDIF
          ENDIF
          GOTO      SPMED999
.
SPMED009  MOVE      QRYDATA,PMSED009
          GOTO      SPMED999
.
SPMED010  MOVE      QRYDATA,PMSED010
          GOTO      SPMED999
.
SPMED011  MATCH     Z70,QRYDATA
          IF        !@EQUAL
            MATCH     SP70,QRYDATA
            IF        !@EQUAL
              UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
              CALL      SETMTH00
              PACK      PMSED011,CCENT,CYEAR,CMON,CDAY
              REP       " 0",PMSED011
            ELSE
              MOVE      SP70,PMSED011
            ENDIF
          ENDIF
          GOTO      SPMED999
.
SPMED012  MOVE      QRYDATA,PMSED012
          GOTO      SPMED999
.
SPMED013  MOVE      QRYDATA,PMSED013
          GOTO      SPMED999
.
SPMED999  RETURN
.
.------------------------------------------------------------
.  Update PMSEDGFD file variables
.------------------------------------------------------------
MVPMED00  MATCH     Z70,PMSED001
          IF        !@EQUAL
            MOVE      PMSED001,PMEGRTYP
          ENDIF
.
          MATCH     Z70,PMSED002
          IF        !@EQUAL
            PACK      PMEGKEYV,PMSED002,SP70
          ENDIF
.
          MATCH     Z70,PMSED003
          IF        !@EQUAL
            MOVE      PMSED003,PMEGDRGV
          ENDIF
.
          MATCH     Z70,PMSED004
          IF        !@EQUAL
            MOVE      PMSED004,PMEGPYCD
            RJUSTIFY  PMEGPYCD
          ENDIF
.
          MATCH     Z70,PMSED005
          IF        !@EQUAL
            MOVE      PMSED005,PMEGFDAT
          ENDIF
.
          MATCH     Z70,PMSED006
          IF        !@EQUAL
            MOVE      PMSED006,PMEGTDAT
          ENDIF
.
          MATCH     Z70,PMSED007
          IF        !@EQUAL
            MOVE      PMSED007,PMEGCUID
          ENDIF
.
          MATCH     Z70,PMSED008
          IF        !@EQUAL
            MOVE      PMSED008,PMEGCDAT
          ENDIF
.
          MATCH     Z70,PMSED009
          IF        !@EQUAL
            MOVE      PMSED009,PMEGCTIM
          ENDIF
.
          MATCH     Z70,PMSED010
          IF        !@EQUAL
            MOVE      PMSED010,PMEGUUID
          ENDIF
.
          MATCH     Z70,PMSED011
          IF        !@EQUAL
            MOVE      PMSED011,PMEGUDAT
          ENDIF
.
          MATCH     Z70,PMSED012
          IF        !@EQUAL
            MOVE      PMSED012,PMEGUTIM
          ENDIF
.
          MATCH     Z70,PMSED013
          IF        !@EQUAL
            MOVE      PMSED013,PMEGCOMM
          ENDIF
.
MVPMED99  RETURN
