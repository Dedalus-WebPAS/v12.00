.*----------------------------------------------------------------------
.* Include Name  :   PMSSRRTM.PBL
.*
.* Function      :   CGI variables for PMSSRRFD - pmssrraf.dat
.*
.*----------------------------------------------------------------------
. Modifications :
.
. V10.08.00  25/07/2016  Ebon Clements      TSK 0294154
.            Created include
.*----------------------------------------------------------------------
.------------------------------------------------------------
. Clear SMS response file cgi vars
.------------------------------------------------------------
CLPMRR00  MOVE      Z70,PMSRR001
          MOVE      Z70,PMSRR002
          MOVE      Z70,PMSRR003
          MOVE      Z70,PMSRR004
          MOVE      Z70,PMSRR005
          MOVE      Z70,PMSRR006
          MOVE      Z70,PMSRR007
          MOVE      Z70,PMSRR008
          MOVE      Z70,PMSRR009
          MOVE      Z70,PMSRR010
          MOVE      Z70,PMSRR011
          MOVE      Z70,PMSRR012
          MOVE      Z70,PMSRR013
          MOVE      Z70,PMSRR014 
          MOVE      Z70,PMSRR015
.
CLPMRR99  RETURN
.------------------------------------------------------------
. SMS response file tags
.------------------------------------------------------------
PMRR0000  BRANCH    FLDITMNO,PMRR0010,PMRR0020,PMRR0030,PMRR0040,PMRR0050:
                             PMRR0060,PMRR0070,PMRR0080,PMRR0090,PMRR0100:
                             PMRR0110,PMRR0120,PMRR0130,PMRR0140,PMRR0150
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMRR9999
.
PMRR0010  WRITE     HTMLFILE;PMRRUMID;
          GOTO      PMRR9999
.
PMRR0020  WRITE     HTMLFILE;PMRRUCNT;
          GOTO      PMRR9999
.
PMRR0030  WRITE     HTMLFILE;PMRRMNUM;
          GOTO      PMRR9999
.
PMRR0040  WRITE     HTMLFILE;PMRRURNO;
          GOTO      PMRR9999
.
PMRR0050  WRITE     HTMLFILE;PMRRMTYP;
          GOTO      PMRR9999
.
PMRR0060  WRITE     HTMLFILE;PMRRRKEY;
          GOTO      PMRR9999
.
PMRR0070  MATCH     PMRRRDTE,SP70
          GOTO      PMRR9999 IF EQUAL
.
          UNPACK    PMRRRDTE,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMRR9999
.
PMRR0080  WRITE     HTMLFILE;PMRRRTIM;
          GOTO      PMRR9999
.
PMRR0090  WRITE     HTMLFILE;PMRRRESA;
          GOTO      PMRR9999
.
PMRR0100  WRITE     HTMLFILE;PMRRRESB;
          GOTO      PMRR9999
.
PMRR0110  WRITE     HTMLFILE;PMRRRESC;
          GOTO      PMRR9999
.
PMRR0120  WRITE     HTMLFILE;PMRRRESD;
          GOTO      PMRR9999
.
PMRR0130  WRITE     HTMLFILE;PMRRRESE;
          GOTO      PMRR9999
.
PMRR0140  WRITE     HTMLFILE;PMRRRESF;
          GOTO      PMRR9999

PMRR0150  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,PMRR0051
.
          WRITE     HTMLFILE;PMRRSTAT;
          GOTO      PMRR9999
.
PMRR0051  MATCH     " 0",PMRRSTAT
          IF        @EQUAL
            WRITE      HTMLFILE;"Message";
          ENDIF
.
          MATCH     " 1",PMRRSTAT
          IF        @EQUAL
            WRITE      HTMLFILE;"Awaiting Delivery";
          ENDIF
.
          MATCH     " 2",PMRRSTAT
          IF        @EQUAL
            WRITE      HTMLFILE;"Successful Delivery";
          ENDIF
.
          MATCH     " 3",PMRRSTAT
          IF        @EQUAL
            WRITE      HTMLFILE;"Error";
          ENDIF
.
          MATCH     " 4",PMRRSTAT
          IF        @EQUAL
            WRITE      HTMLFILE;"Error Processed";
          ENDIF
          GOTO      PMRR9999
.
PMRR9999  RETURN
.
.------------------------------------------------------------
. Set SMS response file cgi vars
.------------------------------------------------------------
SPMSR000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPMSR001,SPMSR002,SPMSR003,SPMSR004,SPMSR005:
                       SPMSR006,SPMSR007,SPMSR008,SPMSR009,SPMSR010:
                       SPMSR011,SPMSR012,SPMSR013,SPMSR014,SPMSR015
.
          MOVE      ONE,EXIT
          GOTO      SPMSR999 
.
SPMSR001  PACK      PMSRR001,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR002  PACK      PMSRR002,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR003  PACK      PMSRR003,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR004  PACK      PMSRR004,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR005  PACK      PMSRR005,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR006  PACK      PMSRR006,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR007  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMSRR007,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMSR999
.
SPMSR008  PACK      PMSRR008,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR009  PACK      PMSRR009,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR010  PACK      PMSRR010,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR011  PACK      PMSRR011,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR012  PACK      PMSRR012,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR013  PACK      PMSRR013,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR014  PACK      PMSRR014,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR015  PACK      PMSRR015,QRYDATA,SP70
          GOTO      SPMSR999
.
SPMSR999  RETURN
.
.------------------------------------------------------------
.  Update SMS Reposonse file
.------------------------------------------------------------
MVPMRR00  MATCH     PMSRR001,Z70
          IF        !@EQUAL
            MOVE      PMSRR001,PMRRUMID
          ENDIF
.
          MATCH     PMSRR002,Z70
          IF        !@EQUAL
            MOVE      PMSRR002,PMRRUCNT
          ENDIF
.
          MATCH     PMSRR003,Z70
          IF        !@EQUAL
            MOVE      PMSRR003,PMRRMNUM
          ENDIF
.
          MATCH     PMSRR004,Z70
          IF        !@EQUAL
            MOVE      PMSRR004,PMRRURNO
          ENDIF
.
          MATCH     PMSRR005,Z70
          IF        !@EQUAL
            MOVE      PMSRR005,PMRRMTYP
          ENDIF
.
          MATCH     PMSRR006,Z70
          IF        !@EQUAL
            MOVE      PMSRR006,PMRRRKEY
          ENDIF
.
          MATCH     PMSRR007,Z70
          IF        !@EQUAL
            MOVE      PMSRR007,PMRRRDTE
          ENDIF
.
          MATCH     PMSRR008,Z70
          IF        !@EQUAL
            MOVE      PMSRR008,PMRRRTIM
          ENDIF
.
          MATCH     PMSRR009,Z70
          IF        !@EQUAL
            MOVE      PMSRR009,PMRRRESA
          ENDIF
.
          MATCH     PMSRR010,Z70
          IF        !@EQUAL
            MOVE      PMSRR010,PMRRRESB
          ENDIF
.
          MATCH     PMSRR011,Z70
          IF        !@EQUAL
            MOVE      PMSRR011,PMRRRESC
          ENDIF
.
          MATCH     PMSRR012,Z70
          IF        !@EQUAL
            MOVE      PMSRR012,PMRRRESD
          ENDIF
.
          MATCH     PMSRR013,Z70
          IF        !@EQUAL
            MOVE      PMSRR013,PMRRRESE
          ENDIF
.
          MATCH     PMSRR014,Z70
          IF        !@EQUAL
            MOVE      PMSRR014,PMRRRESF
          ENDIF
.
          MATCH     PMSRR015,Z70
          IF        !@EQUAL
            MOVE      PMSRR015,PMRRSTAT
          ENDIF
.
MVPMRR99  RETURN
