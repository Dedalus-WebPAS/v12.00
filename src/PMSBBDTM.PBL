. *----------------------------------------------------------------------
. * Include Name  :   PMSBBDTM.PBL
. *
. * Function      :   CGI variable functions for PMSBBDFD - pmsbbdaf.dat
. *----------------------------------------------------------------------
.  Modifications Done :
.
.  V9.11.04   17/12/2008  Ebon Clements          CAR 174080
.             Added ward type tag
.  V9.11.03   30/10/2008  Ebon Clements          CAR 174077
.             Added PMBBD021 and PMBBD022
.  V9.11.02   28/10/2008  Ebon Clements          CAR 174077
.             Pack PMBBD010 with spaces
.  V9.11.01   08/10/2008  Ebon Clements          CAR 174068
.             Added PMBBD020
.  V9.11.00   24/09/2008  Ebon Clements          CAR 174038
.             Created include
. *----------------------------------------------------------------------
.
.------------------------------------------------------------------------
. Clear Parameters
.------------------------------------------------------------------------
CPPMBD00  MOVE      Z70,PMBBD001
          MOVE      Z70,PMBBD002
          MOVE      Z70,PMBBD003
          MOVE      Z70,PMBBD004
          MOVE      Z70,PMBBD005
          MOVE      Z70,PMBBD006
          MOVE      Z70,PMBBD007
          MOVE      Z70,PMBBD008
          MOVE      Z70,PMBBD009
          MOVE      Z70,PMBBD010
          MOVE      Z70,PMBBD011
          MOVE      Z70,PMBBD012
          MOVE      Z70,PMBBD013
          MOVE      Z70,PMBBD014
          MOVE      Z70,PMBBD015
          MOVE      Z70,PMBBD016
          MOVE      Z70,PMBBD017
          MOVE      Z70,PMBBD018
          MOVE      Z70,PMBBD019
          MOVE      Z70,PMBBD020
          MOVE      Z70,PMBBD021
          MOVE      Z70,PMBBD022
.
CPPMBD99  RETURN
.
.------------------------------------------------------------
. Set Parameters 
.------------------------------------------------------------
SPPMBD00  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPPMBD01,SPPMBD02,SPPMBD03,SPPMBD04,SPPMBD05:
                       SPPMBD06,SPPMBD07,SPPMBD08,SPPMBD09,SPPMBD10:
                       SPPMBD11,SPPMBD12,SPPMBD13,SPPMBD14,SPPMBD15:
                       SPPMBD16,SPPMBD17,SPPMBD18,SPPMBD19,SPPMBD20:
                       SPPMBD21,SPPMBD22
          MOVE      ONE,EXIT
          GOTO      SPPMBD99
.
SPPMBD01  PACK      PMBBD001,QRYDATA,SP70
          GOTO      SPPMBD99
.
SPPMBD02  PACK      PMBBD002,QRYDATA,SP70
          GOTO      SPPMBD99
.
SPPMBD03  PACK      PMBBD003,QRYDATA,SP70
          GOTO      SPPMBD99
.
SPPMBD04  PACK      PMBBD004,QRYDATA,SP70
          GOTO      SPPMBD99
.
SPPMBD05  SQUEEZE   QRYDATA          
          MOVE      ZERO,F2
          MOVE      QRYDATA,F2
          MOVE      F2,PMBBD005
          GOTO      SPPMBD99
.
SPPMBD06  SQUEEZE   QRYDATA         
          MOVE      ZERO,F2
          MOVE      QRYDATA,F2
          MOVE      F2,PMBBD006
          GOTO      SPPMBD99
.
SPPMBD07  SQUEEZE   QRYDATA         
          MOVE      ZERO,F2
          MOVE      QRYDATA,F2
          MOVE      F2,PMBBD007
          GOTO      SPPMBD99
.
SPPMBD08  SQUEEZE   QRYDATA         
          MOVE      ZERO,F2
          MOVE      QRYDATA,F2
          MOVE      F2,PMBBD008
          GOTO      SPPMBD99
.
SPPMBD09  SQUEEZE   QRYDATA         
          MOVE      ZERO,F2
          MOVE      QRYDATA,F2
          MOVE      F2,PMBBD009
          GOTO      SPPMBD99
.
SPPMBD10  PACK      PMBBD010,QRYDATA,SP70
          GOTO      SPPMBD99
.
SPPMBD11  MOVE      QRYDATA,PMBBD011
          GOTO      SPPMBD99
.
SPPMBD12  MOVE      QRYDATA,PMBBD012
          GOTO      SPPMBD99
.
SPPMBD13  MOVE      QRYDATA,PMBBD013
          GOTO      SPPMBD99
.
SPPMBD14  MOVE      QRYDATA,PMBBD014
          GOTO      SPPMBD99
.
SPPMBD15  MOVE      QRYDATA,PMBBD015
          GOTO      SPPMBD99
.
SPPMBD16  MOVE      QRYDATA,PMBBD016
          GOTO      SPPMBD99
.
SPPMBD17  MOVE      QRYDATA,PMBBD017
          GOTO      SPPMBD99
.
SPPMBD18  MOVE      QRYDATA,PMBBD018
          GOTO      SPPMBD99
.
SPPMBD19  MOVE      QRYDATA,PMBBD019
          GOTO      SPPMBD99
.
SPPMBD20  MOVE      QRYDATA,PMBBD020
          GOTO      SPPMBD99
.
SPPMBD21  MOVE      QRYDATA,PMBBD021
          GOTO      SPPMBD99
.
SPPMBD22  MOVE      QRYDATA,PMBBD022
          GOTO      SPPMBD99
.
SPPMBD99  RETURN
.
.------------------------------------------------------------
.  Update cgi to file 
.------------------------------------------------------------
MVPMBD00  MATCH     PMBBD001,Z70
          IF        !@EQUAL
            MOVE      PMBBD001,PMBDHOSP
          ENDIF       
.
          MATCH     PMBBD002,Z70
          IF        !@EQUAL
            MOVE      PMBBD002,PMBDWARD
          ENDIF     
.
          MATCH     PMBBD003,Z70
          IF        !@EQUAL
            MOVE      PMBBD003,PMBDROOM
          ENDIF     
.
          MATCH     PMBBD004,Z70
          IF        !@EQUAL
            MOVE      PMBBD004,PMBDBEDD
          ENDIF     
.
          MATCH     PMBBD005,Z70
          IF        !@EQUAL
            MOVE      PMBBD005,PMBDSEQ1
          ENDIF     
.
          MATCH     PMBBD006,Z70
          IF        !@EQUAL
            MOVE      PMBBD006,PMBDSEQ2
          ENDIF     
.
          MATCH     PMBBD007,Z70
          IF        !@EQUAL
            MOVE      PMBBD007,PMBDSEQ3
          ENDIF     
.
          MATCH     PMBBD008,Z70
          IF        !@EQUAL
            MOVE      PMBBD008,PMBDSEQ4
          ENDIF     
.
          MATCH     PMBBD009,Z70
          IF        !@EQUAL
            MOVE      PMBBD009,PMBDSEQ5
          ENDIF     
.
          MATCH     PMBBD010,Z70
          IF        !@EQUAL
            MOVE      PMBBD010,PMBDCADM
          ENDIF     
.
          MATCH     PMBBD011,Z70
          IF        !@EQUAL
            MOVE      PMBBD011,PMBDTBDT
          ENDIF     
.
          MATCH     PMBBD012,Z70
          IF        !@EQUAL
            MOVE      PMBBD012,PMBDTBTM
          ENDIF     
.
          MATCH     PMBBD013,Z70
          IF        !@EQUAL
            MOVE      PMBBD013,PMBDPOWD
          ENDIF     
.
          MATCH     PMBBD014,Z70
          IF        !@EQUAL
            MOVE      PMBBD014,PMBDPOBD
          ENDIF     
.
          MATCH     PMBBD015,Z70
          IF        !@EQUAL
            MOVE      PMBBD015,PMBDSURN
          ENDIF     
.
          MATCH     PMBBD016,Z70
          IF        !@EQUAL
            MOVE      PMBBD016,PMBDGIVN
          ENDIF     
.
          MATCH     PMBBD017,Z70
          IF        !@EQUAL
            MOVE      PMBBD017,PMBDGEND
          ENDIF     
.
          MATCH     PMBBD018,Z70
          IF        !@EQUAL
            MOVE      PMBBD018,PMBDHFST
          ENDIF     
.
          MATCH     PMBBD019,Z70
          IF        !@EQUAL
            MOVE      PMBBD019,PMBDCEAS
          ENDIF     
.
          MATCH     PMBBD020,Z70
          IF        !@EQUAL
            MOVE      PMBBD020,PMBDURNO
          ENDIF     
.
          MATCH     PMBBD021,Z70
          IF        !@EQUAL
            MOVE      PMBBD021,PMBDEWRD
          ENDIF     
.
          MATCH     PMBBD022,Z70
          IF        !@EQUAL
            MOVE      PMBBD022,PMBDEBED
          ENDIF     
.
MVPMBD99  RETURN
.
.------------------------------------------------------------
. Output Tags
.------------------------------------------------------------
PMBD0000  BRANCH    FLDITMNO,PMBD0010,PMBD0020,PMBD0030,PMBD0040,PMBD0050:
                             PMBD0060,PMBD0070,PMBD0080,PMBD0090,PMBD0100:
                             PMBD0110,PMBD0120,PMBD0130,PMBD0140,PMBD0150:
                             PMBD0160,PMBD0170,PMBD0180,PMBD0190,PMBD0200:
                             PMBD0210,PMBD0220
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMBD9999
.
PMBD0010  WRITE     HTMLFILE;PMBDHOSP;
          GOTO      PMBD9999
.
PMBD0020  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,PMBD0021,PMBD0022
.
          PACK      KEY6,PMBDWARD,SP70
          CALL      RDWARD1
          IF        OVRCD=1
            PACK      WBDESC,PMBDWARD,SP70
          ENDIF
          MATCH     "~~W",PMBDWARD
          IF        @EQUAL
            MOVE      "Ward Not Specified",WBDESC
          ENDIF
.
          MATCH     "~~B",PMBDWARD
          IF        @EQUAL
            MOVE      "Bed Requests",WBDESC
          ENDIF
          WRITE     HTMLFILE;WBDESC;
          GOTO      PMBD9999
.
PMBD0021  WRITE     HTMLFILE;PMBDWARD;
          GOTO      PMBD9999
.
PMBD0022  PACK      KEY6,PMBDWARD,SP70
          CALL      RDWARD1
          BRANCH    OVRCD,PMBD9999
.
          WRITE     HTMLFILE;WINPUT;
          GOTO      PMBD9999
.
PMBD0030  WRITE     HTMLFILE;PMBDROOM;
          GOTO      PMBD9999
.
PMBD0040  WRITE     HTMLFILE;PMBDBEDD;
          GOTO      PMBD9999
.
PMBD0050  WRITE     HTMLFILE;PMBDSEQ1;
          GOTO      PMBD9999
.
PMBD0060  WRITE     HTMLFILE;PMBDSEQ2;
          GOTO      PMBD9999
.
PMBD0070  WRITE     HTMLFILE;PMBDSEQ3;
          GOTO      PMBD9999
.
PMBD0080  WRITE     HTMLFILE;PMBDSEQ4;
          GOTO      PMBD9999
.
PMBD0090  WRITE     HTMLFILE;PMBDSEQ5;
          GOTO      PMBD9999
.
PMBD0100  WRITE     HTMLFILE;PMBDCADM;
          GOTO      PMBD9999
.
PMBD0110  WRITE     HTMLFILE;PMBDTBDT;
          GOTO      PMBD9999
.
PMBD0120  WRITE     HTMLFILE;PMBDTBTM;
          GOTO      PMBD9999
.
PMBD0130  WRITE     HTMLFILE;PMBDPOWD;
          GOTO      PMBD9999
.
PMBD0140  WRITE     HTMLFILE;PMBDPOBD;
          GOTO      PMBD9999
.
PMBD0150  WRITE     HTMLFILE;PMBDSURN;
          GOTO      PMBD9999
.
PMBD0160  WRITE     HTMLFILE;PMBDGIVN;
          GOTO      PMBD9999
.
PMBD0170  WRITE     HTMLFILE;PMBDGEND;
          GOTO      PMBD9999
.
PMBD0180  WRITE     HTMLFILE;PMBDHFST;
          GOTO      PMBD9999
.
PMBD0190  WRITE     HTMLFILE;PMBDCEAS;
          GOTO      PMBD9999
.
PMBD0200  WRITE     HTMLFILE;PMBDURNO;
          GOTO      PMBD9999
.
PMBD0210  WRITE     HTMLFILE;PMBDEWRD;
          GOTO      PMBD9999
.
PMBD0220  WRITE     HTMLFILE;PMBDEBED;
          GOTO      PMBD9999
.
PMBD9999  RETURN
.
