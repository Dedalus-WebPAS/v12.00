. *-----------------------------------------------------------------------------
. * Include Name  :  PMSFOCTM.PBL
. *
. * Function      :  CGI Variables for PMSFOCFD - pmsfocaf
. *
. * Mods          :  V10.03.01 09/05/2012 Davin             CAR 260600
. *                            Created include
. *-----------------------------------------------------------------------------
.-------------------------------------------------------------------------------
. Clear Phase of Care Parameters
.-------------------------------------------------------------------------------
CPFOCM00  MOVE      Z70,PMFOC001
          MOVE      Z70,PMFOC002
          MOVE      Z70,PMFOC003
          MOVE      Z70,PMFOC004
          MOVE      Z70,PMFOC005
          MOVE      Z70,PMFOC006
          MOVE      Z70,PMFOC007
          MOVE      Z70,PMFOC008
          MOVE      Z70,PMFOC009
          MOVE      Z70,PMFOC010
          MOVE      Z70,PMFOC011
.
CPFOCM99  RETURN
.
.-------------------------------------------------------------------------------
. Set Phase of Care Parameters 
.-------------------------------------------------------------------------------
SPFOCM00  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPFOCM01,SPFOCM02,SPFOCM03,SPFOCM04,SPFOCM05:
                       SPFOCM06,SPFOCM07,SPFOCM08,SPFOCM09,SPFOCM10:
                       SPFOCM11
          GOTO      SPFOCM99
.
SPFOCM01  PACK      PMFOC001,QRYDATA,SP70
          GOTO      SPFOCM99
.
SPFOCM02  PACK      PMFOC002,QRYDATA,SP70
          RJUSTIFY  PMFOC002
          GOTO      SPFOCM99
.
SPFOCM03  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMFOC003,CCENT,CYEAR,CMON,CDAY
          GOTO      SPFOCM99
.
SPFOCM04  PACK      PMFOC004,QRYDATA,SP70
          GOTO      SPFOCM99
.
SPFOCM05  PACK      PMFOC005,QRYDATA,SP70
          GOTO      SPFOCM99
.
SPFOCM06  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMFOC006,CCENT,CYEAR,CMON,CDAY
          GOTO      SPFOCM99
.
SPFOCM07  PACK      PMFOC007,QRYDATA,SP70
          GOTO      SPFOCM99
.
SPFOCM08  PACK      PMFOC008,QRYDATA,SP70
          GOTO      SPFOCM99
.
SPFOCM09  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMFOC009,CCENT,CYEAR,CMON,CDAY
          GOTO      SPFOCM99
.
SPFOCM10  PACK      PMFOC010,QRYDATA,SP70
          GOTO      SPFOCM99
.
SPFOCM11  PACK      PMFOC011,QRYDATA,SP70
          GOTO      SPFOCM99
.
.
SPFOCM99  RETURN
.
.-------------------------------------------------------------------------------
. Output Phase of Care tags 
.-------------------------------------------------------------------------------
PMFOC000  BRANCH    FLDITMNO,PMFOC010,PMFOC020,PMFOC030,PMFOC040,PMFOC050:
                             PMFOC060,PMFOC070,PMFOC080,PMFOC090,PMFOC100:
                             PMFOC110
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMFOC999
.
PMFOC010  WRITE     HTMLFILE;PMFOVISN;
          GOTO      PMFOC999
.
PMFOC020  WRITE     HTMLFILE;PMFOEPNO;
          GOTO      PMFOC999
.	
PMFOC030  MATCH     PMFOPCDT,SP70
          GOTO      PMFOC999 IF EQUAL
          UNPACK    PMFOPCDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMFOC999
.
PMFOC040  MOVE      "pu",CATEGORY
          MOVE      PMFOPHOC,CODE
          CALL      CODITM00
          GOTO      PMFOC999
.
PMFOC050  WRITE     HTMLFILE;PMFORAPC;
          GOTO      PMFOC999
.
PMFOC060  MATCH     PMFOCDAT,SP70
          GOTO      PMFOC999 IF EQUAL
          UNPACK    PMFOCDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMFOC999
.
PMFOC070  WRITE     HTMLFILE;PMFOCTIM;
          GOTO      PMFOC999
.
PMFOC080  WRITE     HTMLFILE;PMFOCUID;
          GOTO      PMFOC999
.
PMFOC090  MATCH     PMFOUDAT,SP70
          GOTO      PMFOC999 IF EQUAL
          UNPACK    PMFOUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMFOC999
.
PMFOC100  WRITE     HTMLFILE;PMFOUTIM;
          GOTO      PMFOC999
.
PMFOC110  WRITE     HTMLFILE;PMFOUUID;
          GOTO      PMFOC999
.
PMFOC999  RETURN
.
.-------------------------------------------------------------------------------
. Move Phase of Care cgi variables to file variables
.-------------------------------------------------------------------------------
MVPMFO00  MATCH     Z70,PMFOC001
          IF        !@EQUAL
            MOVE      PMFOC001,PMFOVISN
          ENDIF       
.
          MATCH     Z70,PMFOC002
          IF        !@EQUAL
            MOVE      PMFOC002,PMFOEPNO
          ENDIF       
.
          MATCH     Z70,PMFOC003
          IF        !@EQUAL
            MOVE      PMFOC003,PMFOPCDT
          ENDIF       
.
          MATCH     Z70,PMFOC004
          IF        !@EQUAL
            MOVE      PMFOC004,PMFOPHOC
          ENDIF       
.
          MATCH     Z70,PMFOC005
          IF        !@EQUAL
            MOVE      PMFOC005,PMFORAPC
          ENDIF       
.
          MATCH     Z70,PMFOC006
          IF        !@EQUAL
            MOVE      PMFOC006,PMFOCDAT
          ENDIF       
.
          MATCH     Z70,PMFOC007
          IF        !@EQUAL
            MOVE      PMFOC007,PMFOCTIM
          ENDIF       
.
          MATCH     Z70,PMFOC008
          IF        !@EQUAL
            MOVE      PMFOC008,PMFOCUID
          ENDIF       
.
          MATCH     Z70,PMFOC009
          IF        !@EQUAL
            MOVE      PMFOC009,PMFOUDAT
          ENDIF       
.
          MATCH     Z70,PMFOC010
          IF        !@EQUAL
            MOVE      PMFOC010,PMFOUTIM
          ENDIF       
.
          MATCH     Z70,PMFOC011
          IF        !@EQUAL
            MOVE      PMFOC011,PMFOUUID
          ENDIF       
.
MVPMFO99  RETURN
.
.-------------------------------------------------------------------------------
. Clear Phase of Care file variables
.-------------------------------------------------------------------------------
CLPMFO00  MOVE      SP70,PMFOVISN
          MOVE      SP70,PMFOEPNO
          MOVE      SP70,PMFOPCDT
          MOVE      SP70,PMFOPHOC
          MOVE      SP70,PMFORAPC
          MOVE      SP70,PMFOCDAT
          MOVE      SP70,PMFOCTIM
          MOVE      SP70,PMFOCUID
          MOVE      SP70,PMFOUDAT
          MOVE      SP70,PMFOUTIM
          MOVE      SP70,PMFOUUID
.
CLPMFO99  RETURN
