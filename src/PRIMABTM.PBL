. *----------------------------------------------------------------------
. * Include Name  :   PRIMABTM.PBL
. *
. * Function      :   CGI Variables for PRIMABFD - primabdf 
. *
. * Mods          :   V9.03.00 18/02/04 J.Tan
. *                            Created include
. *----------------------------------------------------------------------
.------------------------------------------------------------------------
.   Clear Parameters for doctor referral
.------------------------------------------------------------------------
CPPRMB00  MOVE      Z70,PRMAB001
          MOVE      Z70,PRMAB002 
          MOVE      Z70,PRMAB003
          MOVE      Z70,PRMAB004
          MOVE      Z70,PRMAB005
          MOVE      Z70,PRMAB006
          MOVE      Z70,PRMAB008
          MOVE      Z70,PRMAB009
          MOVE      Z70,PRMAB010
          MOVE      Z70,PRMAB011
          MOVE      Z70,PRMAB012
          MOVE      Z70,PRMAB013
          MOVE      Z70,PRMAB014
          MOVE      Z70,PRMAB015
          MOVE      Z70,PRMAB016
          MOVE      Z70,PRMAB017
          MOVE      Z70,PRMAB018
          MOVE      Z70,PRMAB019
          MOVE      Z70,PRMAB020
.
CPPRMB99  RETURN
.
.------------------------------------------------------------
.   Set Parameters for Doctor referral file
.------------------------------------------------------------
SPPRMB00  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPPRMB01,SPPRMB02,SPPRMB03,SPPRMB04,SPPRMB05:
                       SPPRMB06,SPPRMB07,SPPRMB08,SPPRMB09,SPPRMB10:
                       SPPRMB11,SPPRMB12,SPPRMB13,SPPRMB14,SPPRMB15:
                       SPPRMB16,SPPRMB17,SPPRMB18,SPPRMB19,SPPRMB20
.
          MOVE      ONE,EXIT
          GOTO      SPPRMB99
.
SPPRMB01  PACK      PRMAB001,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB02  PACK      PRMAB002,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB03  PACK      PRMAB003,QRYDATA,SP70
          GOTO      SPPRMB99 
.
SPPRMB04  PACK      PRMAB004,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB05  PACK      PRMAB005,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB06  PACK      PRMAB006,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB07  PACK      PRMAB007,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB08  PACK      PRMAB008,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB09  PACK      PRMAB009,QRYDATA,SP70
          GOTO      SPPRMB99 
.
SPPRMB10  PACK      PRMAB010,QRYDATA,SP70
          GOTO      SPPRMB99  
.
SPPRMB11  PACK      PRMAB011,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB12  PACK      PRMAB012,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB13  PACK      PRMAB013,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB14  PACK      PRMAB014,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB15  PACK      PRMAB015,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB16  PACK      PRMAB016,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB17  PACK      PRMAB017,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB18  PACK      PRMAB018,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB19  PACK      PRMAB019,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB20  PACK      PRMAB020,QRYDATA,SP70
          GOTO      SPPRMB99
.
SPPRMB99  RETURN
.------------------------------------------------------------
. Clear General Variables
.------------------------------------------------------------
CLPRMB00  MOVE      SP70,PRMAREFN     * M.A.B. Reference Number
          MOVE      SP70,PRMAPOLS     * Police Station Accident Reported To
          MOVE      SP70,PRMASOLN     * Solictor Name 
          MOVE      SP70,PRMASAD1     * Solicitor address line 1
          MOVE      SP70,PRMASAD2     * Solicitor address line 2
          MOVE      SP70,PRMASAD3     * Solicitor address line 3
          MOVE      SP70,PRMASPCD     * Solicitor postcode
          MOVE      SP70,PRMASOLT     * Solicitor Telephone
          MOVE      SP70,PRMAREGO     * Car Registration Numbers Involved
          MOVE      SP70,PRMAALOC     * Accident Location
          MOVE      SP70,PRMAATIM     * Accident Time
          MOVE      SP70,PRMAENGD     * While Engaged In
          MOVE      SP70,PRMAINJD     * Patient Injured When
          MOVE      SP70,PRMAUDF1     * User Defined Field 1 (Category MO)
          MOVE      SP70,PRMAUDF2     * User Defined Field 2 (Category MP)
          MOVE      SP70,PRMAMSEV     * Mechanism of Severist Injury
          MOVE      SP70,PRMARSEV     * Region of Severist Injury
          MOVE      SP70,PRMAODD1     * Other Driver Details Line 1
          MOVE      SP70,PRMAODD2     * Other Driver Details Line 2
          MOVE      SP70,PRMAODD3     * Other Driver Details Line 3
.
CLPRMB99  RETURN
.------------------------------------------------------------
. Add General  Fields
.------------------------------------------------------------
PRMB0000  BRANCH    FLDITMNO,PRMB0100,PRMB0200,PRMB0300,PRMB0400,PRMB0500:
                             PRMB0600,PRMB0700,PRMB0800,PRMB0900,PRMB1000:
                             PRMB1100,PRMB1200,PRMB1300,PRMB1400,PRMB1500:
                             PRMB1600,PRMB1700,PRMB1800,PRMB1900,PRMB2000
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PRMB9999
.
PRMB0100  WRITE     HTMLFILE;PRMAREFN; 
          GOTO      PRMB9999
.
PRMB0200  WRITE     HTMLFILE;PRMAPOLS; 
          GOTO      PRMB9999
.
PRMB0300  WRITE     HTMLFILE;PRMASOLN; 
          GOTO      PRMB9999
.
PRMB0400  WRITE     HTMLFILE;PRMASAD1; 
          GOTO      PRMB9999
.
PRMB0500  WRITE     HTMLFILE;PRMASAD2; 
          GOTO      PRMB9999
.
PRMB0600  WRITE     HTMLFILE;PRMASAD3; 
          GOTO      PRMB9999
.
PRMB0700  WRITE     HTMLFILE;PRMASPCD; 
          GOTO      PRMB9999
.
PRMB0800  WRITE     HTMLFILE;PRMASOLT; 
          GOTO      PRMB9999
.
PRMB0900  WRITE     HTMLFILE;PRMAREGO; 
          GOTO      PRMB9999
.
PRMB1000  WRITE     HTMLFILE;PRMAALOC; 
          GOTO      PRMB9999
.
PRMB1100  WRITE     HTMLFILE;PRMAATIM; 
          GOTO      PRMB9999
.
PRMB1200  WRITE     HTMLFILE;PRMAENGD; 
          GOTO      PRMB9999
.
PRMB1300  WRITE     HTMLFILE;PRMAINJD; 
          GOTO      PRMB9999
.
PRMB1400  MOVE      "MO",CATEGORY
          MOVE      PRMAUDF1,CODE
          CALL      CODITM00 
          GOTO      PRMB9999
.
PRMB1500  MOVE      "MP",CATEGORY
          MOVE      PRMAUDF2,CODE
          CALL      CODITM00 
          GOTO      PRMB9999
.
PRMB1600  WRITE     HTMLFILE;PRMAMSEV; 
          GOTO      PRMB9999
.
PRMB1700  WRITE     HTMLFILE;PRMARSEV; 
          GOTO      PRMB9999
.
PRMB1800  WRITE     HTMLFILE;PRMAODD1; 
          GOTO      PRMB9999
.
PRMB1900  WRITE     HTMLFILE;PRMAODD2; 
          GOTO      PRMB9999
.
PRMB2000  WRITE     HTMLFILE;PRMAODD3; 
          GOTO      PRMB9999
.
PRMB9999  RETURN
.------------------------------------------------------------
.  move CGI variable to file variable 
.------------------------------------------------------------
MVPRMB00  MATCH     PRMAB001,Z70
          IF        !@EQUAL
            MOVE      PRMAB001,PRMAREFN
          ENDIF
.
          MATCH     PRMAB002,Z70
          IF        !@EQUAL
            MOVE      PRMAB002,PRMAPOLS
          ENDIF
.
          MATCH     PRMAB003,Z70
          IF        !@EQUAL
            MOVE      PRMAB003,PRMASOLN
          ENDIF
.
          MATCH     PRMAB004,Z70
          IF        !@EQUAL
            MOVE      PRMAB004,PRMASAD1
          ENDIF
.
          MATCH     PRMAB005,Z70
          IF        !@EQUAL
            MOVE      PRMAB005,PRMASAD2
          ENDIF
.
          MATCH     PRMAB006,Z70
          IF        !@EQUAL
            MOVE      PRMAB006,PRMASAD3
          ENDIF
.
          MATCH     PRMAB007,Z70
          IF        !@EQUAL
            MOVE      PRMAB007,PRMASPCD
          ENDIF
.
          MATCH     PRMAB008,Z70
          IF        !@EQUAL
            MOVE      PRMAB008,PRMASOLT
          ENDIF
.
          MATCH     PRMAB009,Z70
          IF        !@EQUAL
            MOVE      PRMAB009,PRMAREGO
          ENDIF
.
          MATCH     PRMAB010,Z70
          IF        !@EQUAL
            MOVE      PRMAB010,PRMAALOC
          ENDIF
.
          MATCH     PRMAB011,Z70
          IF        !@EQUAL
            MOVE      PRMAB011,PRMAATIM
          ENDIF
.
          MATCH     PRMAB012,Z70
          IF        !@EQUAL
            MOVE      PRMAB012,PRMAENGD
          ENDIF
.
          MATCH     PRMAB013,Z70
          IF        !@EQUAL
            MOVE      PRMAB013,PRMAINJD
          ENDIF
.
          MATCH     PRMAB014,Z70
          IF        !@EQUAL
            MOVE      PRMAB014,PRMAUDF1
          ENDIF
.
          MATCH     PRMAB015,Z70
          IF        !@EQUAL
            MOVE      PRMAB015,PRMAUDF2
          ENDIF
.
          MATCH     PRMAB016,Z70
          IF        !@EQUAL
            MOVE      PRMAB016,PRMAMSEV
          ENDIF
.
          MATCH     PRMAB017,Z70
          IF        !@EQUAL
            MOVE      PRMAB017,PRMARSEV
          ENDIF
.
          MATCH     PRMAB018,Z70
          IF        !@EQUAL
            MOVE      PRMAB018,PRMAODD1
          ENDIF
.
          MATCH     PRMAB019,Z70
          IF        !@EQUAL
            MOVE      PRMAB019,PRMAODD2
          ENDIF
.
          MATCH     PRMAB020,Z70
          IF        !@EQUAL
            MOVE      PRMAB020,PRMAODD3
          ENDIF
.
MVPRMB99  RETURN
.
