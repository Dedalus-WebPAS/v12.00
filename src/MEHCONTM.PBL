.
.  ****************************************************************************
.  *                                                                          *
.  *     Include Name : MEHCONTM.INC                                          *
.  *                                                                          *
.  *     Function     : File Definition include for                           *
.  *                    Mental Health Control File cgi variable functions     *
.  *                                                                          *
.  *     Modifications:                                                       *
.  *      V11.01.01 12/09/2021  Sunny         TSK 0858604                     *
.  *                Added MEHCN021 - Add MH Diagnosis using prev MH Diagnosis *
.  *      V11.00.01 20/05/2020  Thanh T       TSK 0858656                     *
.  *                Added MEHCN020 - Hide DSM-IV coding from MH Diagnosis     *
.  *      V10.11.01 19/10/2017  J.Tan         TSK 0843390                     *
.  *                Added MEHCN019 - Record Responsible DHB on Legal Status   *
.  *      V10.10.01 30/03/2017  Thanh T.       TSK 0835502                    *
.  *                Added MEHCN018 - Minimum security level to see MH visits  *
.  *                in visit list                                             *
.  *      V10.05.01 06/02/2015  Don Nguyen     CAR 306757                     *
.  *                Modified routines to cater for MEHCN017                   *
.  *      V10.03.01 17/01/2012  Mike Laming    CAR 256500                     *
.  *                Added MEHCN016 "PRIMHD IP Activity Type (Cat.A or Cat.BT)"*
.  *      V9.10.02  05/09/2008  J.Tan          CAR 166690                     *
.  *                Added MEHCN015 - Extract Test/Live PRIMHED                *
.  *      V9.10.01  26/05/2008  J.Tan          CAR 166690                     *
.  *                Added PRIMHED Extract                                     *
.  *      V9.06.01  19/04/2006  J.Tan          CAR 91327                      *
.  *                Added MHCNMINC - Next Filename number for MHINC Extract   *
.  *      V9.05.B01 29/12/2005  J.Tan          CAR 90040                      *
.  *                Added MHCNUNIQ - Next referral unique number              *
.  *      V9.03.00  14/10/2004  Jill Habasque  CAR 43723                      *
.  *                Created include                                           *
.  ****************************************************************************
.
.------------------------------------------------------------------------
.   Clear Parameters for MEHCONFD
.------------------------------------------------------------------------
CPMH0000  MOVE      Z70,MEHCN001
          MOVE      Z70,MEHCN002
          MOVE      Z70,MEHCN003
          MOVE      Z70,MEHCN004
          MOVE      Z70,MEHCN005
          MOVE      Z70,MEHCN006
          MOVE      Z70,MEHCN007
          MOVE      Z70,MEHCN008
          MOVE      Z70,MEHCN009
          MOVE      Z70,MEHCN010
          MOVE      Z70,MEHCN011
          MOVE      Z70,MEHCN012
          MOVE      Z70,MEHCN013
          MOVE      Z70,MEHCN014
          MOVE      Z70,MEHCN015
          MOVE      Z70,MEHCN016
          MOVE      Z70,MEHCN017
          MOVE      Z70,MEHCN018
          MOVE      Z70,MEHCN019
          MOVE      Z70,MEHCN020
          MOVE      Z70,MEHCN021
.
CPMH9999  RETURN
.
.------------------------------------------------------------
. Display fields from MEHCONFD - Sector 69,105
.------------------------------------------------------------
MHCN0000  BRANCH    FLDITMNO,MHCN0010,MHCN0020,MHCN0030,MHCN0040,MHCN0050:
                             MHCN0060,MHCN0070,MHCN0080,MHCN0090,MHCN0100:
                             MHCN0110,MHCN9999,MHCN0130,MHCN0140,MHCN0150:
                             MHCN0160,MHCN0170,MHCN0180,MHCN0190,MHCN0200:
                             MHCN0210
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      MHCN9999
.
MHCN0010  WRITE     HTMLFILE;MHCEMPST;  * Employment Status
          GOTO      MHCN9999
.
MHCN0020  WRITE     HTMLFILE;PTCNSORP;  * Source of referral to psych
          GOTO      MHCN9999
.
MHCN0030  WRITE     HTMLFILE;PTCNFPST;  * Previous Specialised treatment
          GOTO      MHCN9999
.
MHCN0040  WRITE     HTMLFILE;MHCNUNIQ;  * Next referral unique number
          GOTO      MHCN9999
.
MHCN0050  MOVE      "LS",CATEGORY
          MOVE      MHCNSINP,CODE       * Default Section code for Inpatient
          CALL      CODITM00
          GOTO      MHCN9999
.
MHCN0060  WRITE     HTMLFILE;MHCNMINC;  * Next Filename number for MHINC Extract
          GOTO      MHCN9999
.
MHCN0070  WRITE     HTMLFILE;MHCNPHED;  * Using PRIMHED Extract
          GOTO      MHCN9999
.
MHCN0080  WRITE     HTMLFILE;MHCNPHVR;  * PRIMHED XML File Version - valid value
          GOTO      MHCN9999
.
MHCN0090  WRITE     HTMLFILE;MHCNORID;  * Submitting Organisation ID (GXXNNN-C)
          GOTO      MHCN9999
.
MHCN0100  WRITE     HTMLFILE;MHCNOTYP;  * Organisation Type
          GOTO      MHCN9999
.
MHCN0110  MATCH     MHCNEDAT,SP70       * Last Extract Date (ccyymmdd)
          GOTO      MHCN9999 IF EQUAL
.
          UNPACK    MHCNEDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
NHDDS
          UNPACK    MHCNETIM,CHOUR,CMIN *  Last Extract Time (hhmm)
          MOVE      " at ",KEY4
.
          PACK      KEY20,CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR,KEY4:
                          CHOUR,COLON,CMIN,SP70
          WRITE     HTMLFILE;KEY20;
          GOTO      MHCN9999
.
MHCN0130  WRITE     HTMLFILE;MHCNENUM;  * Last Extract Number (eg.001)
          GOTO      MHCN9999
.
MHCN0140  WRITE     HTMLFILE;MHCNEDIR;  * PRIMHED Extract Directory
          GOTO      MHCN9999
.
MHCN0150  WRITE     HTMLFILE;MHCNELIV;  * Extract Live PRIMHEAD
          GOTO      MHCN9999
.
MHCN0160  WRITE     HTMLFILE;MHCNIPAT;  * PRIMHED IP Activity Type (Cat A or BT)
          GOTO      MHCN9999
.
MHCN0170  WRITE     HTMLFILE;MHCNMHLS;  * Category for allocating Mental Health
                                        * Legal Status (Cat AC or CC)
          GOTO      MHCN9999
.
MHCN0180  WRITE     HTMLFILE;MHCNDVIS;  * Minimum security level to see MH
          GOTO      MHCN9999
.
MHCN0190  WRITE     HTMLFILE;MHCNRDHB;  * Record Responsible DHB on LS
          GOTO      MHCN9999
.
MHCN0200  WRITE     HTMLFILE;MHCNHDDS;  * Hide DSM-IV coding from MH Diag 
          GOTO      MHCN9999
.
MHCN0210  WRITE     HTMLFILE;MHCNPRDS;  * Add MH Diag using prev MH Diagnosis
          GOTO      MHCN9999
.
MHCN9999  RETURN
.
.------------------------------------------------------------
.   Set Parameters for MEHCONFD
.------------------------------------------------------------
SPMEH000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPMEH001,SPMEH002,SPMEH003,SPMEH004,SPMEH005:
                       SPMEH006,SPMEH007,SPMEH008,SPMEH009,SPMEH010:
                       SPMEH011,SPMEH012,SPMEH013,SPMEH014,SPMEH015:
                       SPMEH016,SPMEH017,SPMEH018,SPMEH019,SPMEH020:
                       SPMEH021
.
          MOVE      ONE,EXIT
          GOTO      SPMEH999
.
SPMEH001  MOVE      QRYDATA,MEHCN001
          GOTO      SPMEH999
.
SPMEH002  MOVE      QRYDATA,MEHCN002
          GOTO      SPMEH999
.
SPMEH003  MOVE      QRYDATA,MEHCN003
          GOTO      SPMEH999
.
SPMEH004  MOVE      QRYDATA,MEHCN004
          GOTO      SPMEH999
.
SPMEH005  MOVE      QRYDATA,MEHCN005
          GOTO      SPMEH999
.
SPMEH006  MOVE      QRYDATA,MEHCN006
          GOTO      SPMEH999
.
SPMEH007  MOVE      QRYDATA,MEHCN007
          GOTO      SPMEH999
.
SPMEH008  MOVE      QRYDATA,MEHCN008
          GOTO      SPMEH999
.
SPMEH009  MOVE      QRYDATA,MEHCN009
          GOTO      SPMEH999
.
SPMEH010  MOVE      QRYDATA,MEHCN010
          GOTO      SPMEH999
.
SPMEH011  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      MEHCN011,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMEH999
.
SPMEH012  MOVE      QRYDATA,MEHCN012
          GOTO      SPMEH999
.
SPMEH013  MOVE      QRYDATA,MEHCN013
          GOTO      SPMEH999
.
SPMEH014  MOVE      QRYDATA,MEHCN014
          GOTO      SPMEH999
.
SPMEH015  MOVE      QRYDATA,MEHCN015
          GOTO      SPMEH999
.
SPMEH016  MOVE      QRYDATA,MEHCN016
          GOTO      SPMEH999
.
SPMEH017  MOVE      QRYDATA,MEHCN017
          GOTO      SPMEH999
.
SPMEH018  MOVE      QRYDATA,MEHCN018
          GOTO      SPMEH999
.
SPMEH019  MOVE      QRYDATA,MEHCN019
          GOTO      SPMEH999
.
SPMEH020  MOVE      QRYDATA,MEHCN020
          GOTO      SPMEH999
.
SPMEH021  MOVE      QRYDATA,MEHCN021
          GOTO      SPMEH999
.
SPMEH999  RETURN
.
.------------------------------------------------------------
.  Update MEHCONFD file variables
.------------------------------------------------------------
MVMH0000  MATCH     Z70,MEHCN001
          IF        !@EQUAL
            MOVE      MEHCN001,MHCEMPST
          ENDIF
.
          MATCH     Z70,MEHCN002
          IF        !@EQUAL
            MOVE      MEHCN002,PTCNSORP
          ENDIF
.
          MATCH     Z70,MEHCN003
          IF        !@EQUAL
            MOVE      MEHCN003,PTCNFPST
          ENDIF
.
          MATCH     Z70,MEHCN004
          IF        !@EQUAL
            MOVE      MEHCN004,MHCNUNIQ
          ENDIF
.
          MATCH     Z70,MEHCN005
          IF        !@EQUAL
            MOVE      MEHCN005,MHCNSINP
          ENDIF
.
          MATCH     Z70,MEHCN006
          IF        !@EQUAL
            MOVE      MEHCN006,MHCNMINC
          ENDIF
.
          MATCH     Z70,MEHCN007
          IF        !@EQUAL
            MOVE      MEHCN007,MHCNPHED
          ENDIF
.
          MATCH     Z70,MEHCN008
          IF        !@EQUAL
            MOVE      MEHCN008,MHCNPHVR
          ENDIF
.
          MATCH     Z70,MEHCN009
          IF        !@EQUAL
            MOVE      MEHCN009,MHCNORID
          ENDIF
.
          MATCH     Z70,MEHCN010
          IF        !@EQUAL
            MOVE      MEHCN010,MHCNOTYP
          ENDIF
.
.         MATCH     Z70,MEHCN011
.         IF        !@EQUAL
.           MOVE      MEHCN011,MHCNEDAT
.         ENDIF
.
.         MATCH     Z70,MEHCN012
.         IF        !@EQUAL
.           MOVE      MEHCN012,MHCNETIM
.         ENDIF
.
          MATCH     Z70,MEHCN013
          IF        !@EQUAL
            MOVE      MEHCN013,MHCNENUM
          ENDIF
.
          MATCH     Z70,MEHCN014
          IF        !@EQUAL
            MOVE      MEHCN014,MHCNEDIR
          ENDIF
.
          MATCH     Z70,MEHCN015
          IF        !@EQUAL
            MOVE      MEHCN015,MHCNELIV
          ENDIF
.
          MATCH     Z70,MEHCN016
          IF        !@EQUAL
            PACK      MHCNIPAT,MEHCN016,SP10
          ENDIF
.
          MATCH     Z70,MEHCN017
          IF        !@EQUAL
            PACK      MHCNMHLS,MEHCN017,SP10
          ENDIF
.
          MATCH     Z70,MEHCN018
          IF        !@EQUAL
            MOVE      MEHCN018,MHCNDVIS
          ENDIF
.
          MATCH     Z70,MEHCN019
          IF        !@EQUAL
            MOVE      MEHCN019,MHCNRDHB
          ENDIF
.
          MATCH     Z70,MEHCN020
          IF        !@EQUAL
            MOVE      MEHCN020,MHCNHDDS
          ENDIF
.
          MATCH     Z70,MEHCN021
          IF        !@EQUAL
            MOVE      MEHCN021,MHCNPRDS
          ENDIF
.
MVMH9999  RETURN
