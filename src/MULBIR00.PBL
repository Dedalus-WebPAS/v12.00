.-----------------------------------------------------------------------------
. Get current multiple birth details from patatraf with type 022
.-----------------------------------------------------------------------------
. V11.00.01 16/11/2020  Thanh T           TSK 0878747
.           Initial Version
.-----------------------------------------------------------------------------
. Input : MBIRURNO  DIM 8  - UR Number
. Output: MBIRTYOR  DIM 25 - Multiple Birth Type short description / Order
.-----------------------------------------------------------------------------
MULBIR00  MOVE      SP70,MBIRTYOR
          OPEN      PATATRA3,"patatraf"
          PACK      DIM8,SP7,ZERO
.
          PACK      KEY35,MBIRURNO,DIM8,ATYPE022,Z70
          CALL      RSPTATR3
MULBIR02  CALL      RPPTATR3
          BRANCH    OVRCD,MULBIR08
.
          MATCH     MBIRURNO,PTARURNO
          GOTO      MULBIR08 IF NOT EQUAL
.
          MATCH     DIM8,PTARVISN
          GOTO      MULBIR08 IF NOT EQUAL
.
          MATCH     ATYPE022,PTARTYPE
          GOTO      MULBIR08 IF NOT EQUAL
.
          MATCH     "1",PTARDELR
          GOTO      MULBIR02 IF EQUAL
.
          MATCH     SP70,PTARFDTE
          GOTO      MULBIR02 IF NOT EQUAL
.
          MATCH     SP70,PTARFTME
          GOTO      MULBIR02 IF NOT EQUAL
.
          MOVE      "mX",KEY2
          PACK      KEY5,KEY2,PTARCOD1
          CALL      RDCODE1
          IF        OVRCD=1
            MOVE      PTARCOD1,TDESC
          ENDIF
          STRIP     TDESC
.
          PACK      MBIRTYOR,TDESC,SP1,SLASH,SP1,PTARVAL1
.
MULBIR08  CLOSE     PATATRA3
.
MULBIR09  RETURN
.
.-----------------------------------------------------------------------------
. Input : MBIRURNO  DIM 8  - UR Number
. Output: MBIRTYOR  DIM 25 - Multiple Birth Type short description / Order
.                            (NS if Order is Blank or 0 for Not Stated) 
.-----------------------------------------------------------------------------
MULBIR20  MOVE      SP70,MBIRTYOR
          MOVE      "NS",DIM2
          OPEN      PATATRA3,"patatraf"
          PACK      DIM8,SP7,ZERO
.
          PACK      KEY35,MBIRURNO,DIM8,ATYPE022,Z70
          CALL      RSPTATR3
MULBIR22  CALL      RPPTATR3
          BRANCH    OVRCD,MULBIR28
.
          MATCH     MBIRURNO,PTARURNO
          GOTO      MULBIR28 IF NOT EQUAL
.
          MATCH     DIM8,PTARVISN
          GOTO      MULBIR28 IF NOT EQUAL
.
          MATCH     ATYPE022,PTARTYPE
          GOTO      MULBIR28 IF NOT EQUAL
.
          MATCH     "1",PTARDELR
          GOTO      MULBIR22 IF EQUAL
.
          MATCH     SP70,PTARFDTE
          GOTO      MULBIR22 IF NOT EQUAL
.
          MATCH     SP70,PTARFTME
          GOTO      MULBIR22 IF NOT EQUAL
.
          MATCH     SP70,PTARVAL1
          IF        !@EQUAL
            MATCH     "0",PTARVAL1
            IF        !@EQUAL
              MOVE      PTARVAL1,DIM2
            ENDIF
          ENDIF
.
          MOVE      "mX",KEY2
          PACK      KEY5,KEY2,PTARCOD1
          CALL      RDCODE1
          IF        OVRCD=1
            MOVE      PTARCOD1,TDESC
          ENDIF
          STRIP     TDESC
.
          PACK      MBIRTYOR,TDESC,SP1,SLASH,SP1,DIM2
.
MULBIR28  CLOSE     PATATRA3
.
MULBIR29  RETURN
