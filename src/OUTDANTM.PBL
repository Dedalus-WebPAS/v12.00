. *----------------------------------------------------------------------
. * Include Name  :   OUTDANTM.PBL
. *
. * Function      :   CGI Variable Functions for OUTDANFD - outdanaf
. *
. * Mods          :   
. * V10.02.00 01/09/2011 Ebon Clements CAR 242014
. *           Created include
. * V10.15.01 18/10/2019 Richa Phogat  TSK 0861257
. *           Added OTDAN011, OTDNREQC, SPOTDA11, OTDN2200
. *----------------------------------------------------------------------
.------------------------------------------------------------------------
. Clear parameters for the outpatient direct actions
.------------------------------------------------------------------------
CPOTDA00  MOVE      Z70,OTDAN001
          MOVE      Z70,OTDAN002
          MOVE      Z70,OTDAN003
          MOVE      Z70,OTDAN004
          MOVE      Z70,OTDAN005
          MOVE      Z70,OTDAN006
          MOVE      Z70,OTDAN007
          MOVE      Z70,OTDAN008
          MOVE      Z70,OTDAN009
          MOVE      Z70,OTDAN010
          MOVE      Z70,OTDAN011
.
CPOTDA99  RETURN
.
.------------------------------------------------------------
. Set Parameters for outpatient direct actions
.------------------------------------------------------------
SPOTDA00  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPOTDA01,SPOTDA02,SPOTDA03,SPOTDA04,SPOTDA05:
                       SPOTDA06,SPOTDA07,SPOTDA08,SPOTDA09,SPOTDA10:
                       SPOTDA11
.
          MOVE      ONE,EXIT
          GOTO      SPOTDA99
.
SPOTDA01  PACK      OTDAN001,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA02  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      OTDAN002,CCENT,CYEAR,CMON,CDAY,SP70
          GOTO      SPOTDA99
.
SPOTDA03  PACK      OTDAN003,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA04  PACK      OTDAN004,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA05  PACK      OTDAN005,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA06  PACK      OTDAN006,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA07  PACK      OTDAN007,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA08  PACK      OTDAN008,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA09  PACK      OTDAN009,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA10  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      OTDAN010,CCENT,CYEAR,CMON,CDAY,SP70
          GOTO      SPOTDA99
.
SPOTDA11  PACK      OTDAN011,QRYDATA,SP70
          GOTO      SPOTDA99
.
SPOTDA99  RETURN
.
.------------------------------------------------------------
. Tags for outpatient direct actions
.------------------------------------------------------------
OTDN0000  BRANCH    FLDITMNO,OTDN0100,OTDN0200,OTDN0300,OTDN0400,OTDN0500:
                             OTDN0600,OTDN0700,OTDN0800,OTDN0900,OTDN1000:
                             OTDN1100,OTDN1200,OTDN1300,OTDN1400,OTDN1500:
                             OTDN1600,OTDN1700,OTDN1800,OTDN1900,OTDN2000:
                             OTDN2100,OTDN2200
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      OTDN9999
.
OTDN0100  WRITE     HTMLFILE;OTDNURNO;
          GOTO      OTDN9999
.
OTDN0200  MATCH     OTDNADAT,SP70
          GOTO      OTDN9999 IF EQUAL
.
          UNPACK    OTDNADAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      OTDN9999
.
OTDN0300  WRITE     HTMLFILE;OTDNATIM;
          GOTO      OTDN9999
.
OTDN0400  WRITE     HTMLFILE;OTDNATYP;
          GOTO      OTDN9999
.
OTDN0500  WRITE     HTMLFILE;OTDNVISN;
          GOTO      OTDN9999
.
OTDN0600  WRITE     HTMLFILE;OTDNCOMP;
          GOTO      OTDN9999
.
OTDN0700  MOVE      "FZ",CATEGORY
          MOVE      OTDNOUTC,CODE
          CALL      CODITM00 
          GOTO      OTDN9999
.
OTDN0800  WRITE     HTMLFILE;OTDNCOMM;
          GOTO      OTDN9999
.
OTDN0900  MATCH     OTDNCOMD,SP70
          GOTO      OTDN9999 IF EQUAL
.
          UNPACK    OTDNCOMD,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      OTDN9999
.
OTDN1000  WRITE     HTMLFILE;OTDNCOMT;
          GOTO      OTDN9999
.
OTDN1100  MATCH     SP70,OTDNCOMU
          GOTO      OTDN9999 IF EQUAL
.
          PACK      KEY10,OTDNCOMU,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      OTDNCOMU,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      OTDN9999
.
OTDN1200  MATCH     OTDNCDAT,SP70
          GOTO      OTDN9999 IF EQUAL
.
          UNPACK    OTDNCDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      OTDN9999
.
OTDN1300  WRITE     HTMLFILE;OTDNCTIM;
          GOTO      OTDN9999
.
OTDN1400  MATCH     SP70,OTDNCUID
          GOTO      OTDN9999 IF EQUAL
.
          PACK      KEY10,OTDNCUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      OTDNCUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      OTDN9999
.
OTDN1500  MATCH     OTDNUDAT,SP70
          GOTO      OTDN9999 IF EQUAL
.
          UNPACK    OTDNUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      OTDN9999
.
OTDN1600  WRITE     HTMLFILE;OTDNUTIM;
          GOTO      OTDN9999
.
OTDN1700  MATCH     SP70,OTDNUUID
          GOTO      OTDN9999 IF EQUAL
.
          PACK      KEY10,OTDNUUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      OTDNUUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      OTDN9999
.
OTDN1800  MATCH     " 0",OTDNATYP
          IF        @EQUAL
            WRITE     HTMLFILE;"PMI Update"
            GOTO      OTDN9999
          ENDIF
.
          MATCH     " 1",OTDNATYP
          IF        @EQUAL
            WRITE     HTMLFILE;"Appointment Message"
            GOTO      OTDN9999
          ENDIF
.
          MATCH     " 2",OTDNATYP
          IF        @EQUAL
            WRITE     HTMLFILE;"Reschedule Appointment"
            GOTO      OTDN9999
          ENDIF
.
          MATCH     " 3",OTDNATYP
          IF        @EQUAL
            WRITE     HTMLFILE;"Cancel Appointment"
            GOTO      OTDN9999
          ENDIF
.
          MATCH     " 4",OTDNATYP
          IF        @EQUAL
            WRITE     HTMLFILE;"Pending Reschedule"
            GOTO      OTDN9999
          ENDIF
.
          MATCH     " 5",OTDNATYP
          IF        @EQUAL
            WRITE     HTMLFILE;"Closed Referral"
            GOTO      OTDN9999
          ENDIF
          GOTO      OTDN9999
.
OTDN1900  WRITE     HTMLFILE;OTDNREFN;
          GOTO      OTDN9999
.
OTDN2000  MATCH     "1",OTDNCOMP
          IF        @EQUAL
            WRITE     HTMLFILE;DYES;
          ENDIF
          GOTO      OTDN9999
.
OTDN2100  MATCH     OTDNVDAT,SP70
          GOTO      OTDN9999 IF EQUAL
.
          UNPACK    OTDNVDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      OTDN9999
.
OTDN2200  MOVE      "rs",CATEGORY
          MOVE      OTDNREQC,CODE
          CALL      CODITM00 
          GOTO      OTDN9999
.
OTDN9999  RETURN
.
.-----------------------------------------------------------------------------
. Moved cgi variables to file variables outpatient direct actions
.-----------------------------------------------------------------------------
MVOTDN00  MATCH     Z70,OTDAN001
          IF        !@EQUAL
            MOVE      OTDAN001,OTDNURNO
          ENDIF
.
          MATCH     Z70,OTDAN002
          IF        !@EQUAL
            MOVE      OTDAN002,OTDNADAT
          ENDIF
.
          MATCH     Z70,OTDAN003
          IF        !@EQUAL
            MOVE      OTDAN003,OTDNATIM
          ENDIF
.
          MATCH     Z70,OTDAN004
          IF        !@EQUAL
            MOVE      OTDAN004,OTDNATYP
          ENDIF
.
          MATCH     Z70,OTDAN005
          IF        !@EQUAL
            MOVE      OTDAN005,OTDNVISN
          ENDIF
.
          MATCH     Z70,OTDAN006
          IF        !@EQUAL
            MOVE      OTDAN006,OTDNCOMP
          ENDIF
.
          MATCH     Z70,OTDAN007
          IF        !@EQUAL
            MOVE      OTDAN007,OTDNOUTC
          ENDIF
.
          MATCH     Z70,OTDAN008
          IF        !@EQUAL
            MOVE      OTDAN008,OTDNCOMM
          ENDIF
.
          MATCH     Z70,OTDAN009
          IF        !@EQUAL
            MOVE      OTDAN009,OTDNREFN
          ENDIF
.
          MATCH     Z70,OTDAN010
          IF        !@EQUAL
            MOVE      OTDAN010,OTDNVDAT
          ENDIF
.
          MATCH     Z70,OTDAN011
          IF        !@EQUAL
            MOVE      OTDAN011,OTDNREQC
          ENDIF
.
MVOTDN99  RETURN
.
.------------------------------------------------------------
. Clear file vars outpatient direct actions
.------------------------------------------------------------
CLOUTDAN  MOVE      SP70,OTDNURNO
          MOVE      SP70,OTDNADAT
          MOVE      SP70,OTDNATIM
          MOVE      SP70,OTDNATYP
          MOVE      SP70,OTDNVISN
          MOVE      SP70,OTDNCOMP
          MOVE      SP70,OTDNOUTC
          MOVE      SP70,OTDNCOMM
          MOVE      SP70,OTDNCOMD
          MOVE      SP70,OTDNCOMT
          MOVE      SP70,OTDNCOMU
          MOVE      SP70,OTDNCDAT
          MOVE      SP70,OTDNCTIM
          MOVE      SP70,OTDNCUID
          MOVE      SP70,OTDNUDAT
          MOVE      SP70,OTDNUTIM
          MOVE      SP70,OTDNUUID
          MOVE      SP70,OTDNREFN
          MOVE      SP70,OTDNVDAT
          MOVE      SP70,OTDNREQC
          MOVE      SP70,OTDNSPAR
.
          RETURN

