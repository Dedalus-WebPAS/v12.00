. *----------------------------------------------------------------------
. * Include Name  :   PMSIHUTM.PBL
. *
. * Function      :   CGI variables for PMSIHUFD - pmsihuaf.dat
. *
. * Includes Needed :
. *
. * V10.04.00 06/02/2014 Ebon Clements           CAR 291879
. *           Created include
. *----------------------------------------------------------------------
.
.------------------------------------------------------------------------
.   Clear Parameters for pmsihuaf
.------------------------------------------------------------------------
.
CPPMIU00  MOVE      Z70,PMIHU001
          MOVE      Z70,PMIHU002
          MOVE      Z70,PMIHU003
          MOVE      Z70,PMIHU004
.
CPPMIU99  RETURN
.
.------------------------------------------------------------------------
.   Display for pmsihuaf
.------------------------------------------------------------------------
PMIH0000  BRANCH    FLDITMNO,PMIH0010,PMIH0020,PMIH0030,PMIH0040,PMIH0050:
                             PMIH0060,PMIH0070,PMIH0080,PMIH0090,PMIH0100
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMIH9999
.
PMIH0010  WRITE     HTMLFILE;PMIUHOSP;
          GOTO      PMIH9999
.
PMIH0020  MOVE      "AC",CATEGORY
          MOVE      PMIUUNIT,CODE
          CALL      CODITM00
          GOTO      PMIH9999
.
PMIH0030  WRITE     HTMLFILE;PMIUHPIO;
          GOTO      PMIH9999
.
PMIH0040  WRITE     HTMLFILE;PMIUACTV;
          GOTO      PMIH9999
.
PMIH0050  MATCH     PMIUCDAT,SP70
          GOTO      PMDI9999 IF EQUAL
.
          UNPACK    PMIUCDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMIH9999
.
PMIH0060  WRITE     HTMLFILE;PMIUCTIM;
          GOTO      PMIH9999
.
PMIH0070  MATCH     SP70,PMIUCUID
          GOTO      PMDI9999 IF EQUAL
.
          PACK      KEY10,PMIUCUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      PMIUCUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMIH9999
.
PMIH0080  MATCH     PMIUUDAT,SP70
          GOTO      PMDI9999 IF EQUAL
.
          UNPACK    PMIUUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMIH9999
.
PMIH0090  WRITE     HTMLFILE;PMIUUTIM;
          GOTO      PMIH9999
.
PMIH0100  MATCH     SP70,PMIUUUID
          GOTO      PMDI9999 IF EQUAL
.
          PACK      KEY10,PMIUUUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      PMIUUUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMIH9999
.
PMIH9999  RETURN
.
.------------------------------------------------------------
.   Set Parameters for pmsihuaf
.------------------------------------------------------------
SPMIU000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPMIU001,SPMIU002,SPMIU003,SPMIU004
.
          MOVE      ONE,EXIT
          GOTO      SPMIU999
.
SPMIU001  PACK      PMIHU001,QRYDATA,SP70
          GOTO      SPMIU999
.
SPMIU002  PACK      PMIHU002,QRYDATA,SP70
          GOTO      SPMIU999
.
SPMIU003  PACK      PMIHU003,QRYDATA,SP70
          GOTO      SPMIU999
.
SPMIU004  PACK      PMIHU004,QRYDATA,SP70
          GOTO      SPMIU999
.
SPMIU999  RETURN
.
.------------------------------------------------------------
.  Update divisions details
.------------------------------------------------------------
MVPMIU00  MATCH     PMIHU001,Z70
          IF        !@EQUAL
            MOVE      PMIHU001,PMIUHOSP
          ENDIF
.
          MATCH     PMIHU002,Z70
          IF        !@EQUAL
            MOVE      PMIHU002,PMIUUNIT
          ENDIF
.
          MATCH     PMIHU003,Z70
          IF        !@EQUAL
            MOVE      PMIHU003,PMIUHPIO
          ENDIF
.
          MATCH     PMIHU004,Z70
          IF        !@EQUAL
            MOVE      PMIHU004,PMIUACTV
          ENDIF
.
MVPMIU99  RETURN

