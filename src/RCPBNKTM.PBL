. *----------------------------------------------------------------------
. * Include Name  :   RCPBNKTM.PBL
. *
. * Function      :   CGI variable functions for RCPBNKFD - rcpbnkaf.dat
. *
. * Modifications :
. *
. * V10.05.01 04/12/2014 Peter Vela       CAR 309543
. *           Added Updated User ID
. * V10.02.01 26/10/2011 J.Tan            CAR 253933
. *           Mods to set PTMASNAM before packing patient name
. * V10.00.01 10/08/2010 Peter Vela              CAR 181784
. *           Added RCBNCUID code only tag
. * V9.03.02 16/01/2003 Lina Vo                  CAR 4073
. *          Mods to use correct variables for cash drawer name
. * V9.03.01 13/01/2003 J.Tan 
. *          Mods to set cash drawer name
. * V9.03.00 26/11/2003 Ebon Clements            CAR 44095
. *          Created include
. *----------------------------------------------------------------------
.------------------------------------------------------------------------
.   Clear parameters for the bank header file
.------------------------------------------------------------------------
CPRCBK00  MOVE      Z70,RCPBK001
          MOVE      Z70,RCPBK002
          MOVE      Z70,RCPBK003
          MOVE      Z70,RCPBK004
          MOVE      Z70,RCPBK005
          MOVE      Z70,RCPBK006
          MOVE      Z70,RCPBK007
          MOVE      Z70,RCPBK008
          MOVE      Z70,RCPBK009
          MOVE      Z70,RCPBK010
          MOVE      Z70,RCPBK011
          MOVE      Z70,RCPBK012
          MOVE      Z70,RCPBK013
          MOVE      Z70,RCPBK014
          MOVE      Z70,RCPBK015
          MOVE      Z70,RCPBK016
          MOVE      Z70,RCPBK017
          MOVE      Z70,RCPBK018
          MOVE      Z70,RCPBK019
          MOVE      Z70,RCPBK020
.
CPRCBK99  RETURN
.------------------------------------------------------------
. Bank header file standard tags
.------------------------------------------------------------
RCBK0000  BRANCH    FLDITMNO,RCBK0010,RCBK0020,RCBK0030,RCBK0040,RCBK0050:
                             RCBK0060,RCBK0070,RCBK0080,RCBK0090,RCBK0100:
                             RCBK0110,RCBK0120,RCBK0130,RCBK0140,RCBK0150:
                             RCBK0160,RCBK0170,RCBK0180,RCBK0190,RCBK0200:
                             RCBK0210,RCBK0220
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      RCBK9999
.
RCBK0010  WRITE     HTMLFILE;RCBNRECN;
          GOTO      RCBK9999
.
RCBK0020  MATCH     RCBNTDAT,SP70
          GOTO      RCBK9999 IF EQUAL
.
          UNPACK    RCBNTDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      RCBK9999
.
RCBK0030  WRITE     HTMLFILE;RCBNTOTP;
          GOTO      RCBK9999
.
RCBK0040  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
.
          MATCH     RCBNCDRW,SP70
          GOTO      RCBK9999 IF EQUAL
.
          BRANCH    F1,RCBK0041
          WRITE     HTMLFILE;RCBNCDRW;
          GOTO      RCBK9999
.
RCBK0041  MOVE      RCBNCDRW,KEY6
          CALL      RDCIDA1 
          IF        OVRCD=0
            MOVE      RCPGIVEN,PGNAME
            MOVE      RCPSUR,PSNAME
            PACK      PTMASNAM,RCPSUR,SP70
            MOVE      SP70,PTITL
            CALL      PATNAM00
            WRITE     HTMLFILE;PATFNAME;
          ELSE
            WRITE     HTMLFILE;RCBNCDRW;
          ENDIF
          GOTO      RCBK9999
.
RCBK0050  WRITE     HTMLFILE;RCBNMHOS;
          GOTO      RCBK9999
.
RCBK0060  WRITE     HTMLFILE;RCBNMDHS;
          GOTO      RCBK9999
.
RCBK0070  WRITE     HTMLFILE;RCBNTTYP;
          GOTO      RCBK9999
.
RCBK0080  WRITE     HTMLFILE;RCBNRCOD;
          GOTO      RCBK9999
.
RCBK0090  WRITE     HTMLFILE;RCBNSTAT;
          GOTO      RCBK9999
.
RCBK0100  MATCH     RCBNBDAT,SP70
          GOTO      RCBK9999 IF EQUAL
.         
          UNPACK    RCBNBDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      RCBK9999
.
RCBK0110  WRITE     HTMLFILE;RCBNBTIM;
          GOTO      RCBK9999
.
RCBK0120  MATCH     RCBNRDAT,SP70
          GOTO      RCBK9999 IF EQUAL
.
          UNPACK    RCBNRDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      RCBK9999
.
RCBK0130  WRITE     HTMLFILE;RCBNRTIM;
          GOTO      RCBK9999
.
RCBK0140  WRITE     HTMLFILE;RCBNCHQA;
          GOTO      RCBK9999
.
RCBK0150  MATCH     RCBNCDAT,SP70
          GOTO      RCBK9999 IF EQUAL
.
          UNPACK    RCBNCDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      RCBK9999
.
RCBK0160  WRITE     HTMLFILE;RCBNCTIM;
          GOTO      RCBK9999
.
RCBK0170  MATCH     SP70,RCBNCUID
          GOTO      RCBK9999 IF EQUAL
.
          PACK      KEY10,RCBNCUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      RCBNCUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      RCBK9999
.
RCBK0180  MATCH     RCBNUDAT,SP70
          GOTO      RCBK9999 IF EQUAL
.
          UNPACK    RCBNUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      RCBK9999
.
RCBK0190  WRITE     HTMLFILE;RCBNUTIM;
          GOTO      RCBK9999
.
RCBK0200  MATCH     SP70,RCBNUUID
          GOTO      RCBK9999 IF EQUAL
.
          PACK      KEY10,RCBNUUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      RCBNUUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      RCBK9999
.
RCBK0210  WRITE     HTMLFILE;RCBNCUID;
          GOTO      RCBK9999
.
RCBK0220  WRITE     HTMLFILE;RCBNUUID;
          GOTO      RCBK9999
.
RCBK9999  RETURN
.
.------------------------------------------------------------
.   Set Parameters for the bank header file
.------------------------------------------------------------
SPRCB000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPRCB010,SPRCB020,SPRCB030,SPRCB040,SPRCB050:
                       SPRCB060,SPRCB070,SPRCB080,SPRCB090,SPRCB100:
                       SPRCB110,SPRCB120,SPRCB130,SPRCB140,SPRCB150:
                       SPRCB160,SPRCB170,SPRCB180,SPRCB190,SPRCB200
.
          MOVE      ONE,EXIT
          GOTO      SPRCB999
.
SPRCB010  MOVE      QRYDATA,RCPBK001
          GOTO      SPRCB999
.
SPRCB020  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      RCPBK002,CCENT,CYEAR,CMON,CDAY
          GOTO      SPRCB999
.
SPRCB030  MOVE      QRYDATA,RCPBK003
          GOTO      SPRCB999
.
SPRCB040  MOVE      QRYDATA,RCPBK004
          GOTO      SPRCB999
.
SPRCB050  MOVE      QRYDATA,RCPBK005
          GOTO      SPRCB999
.
SPRCB060  MOVE      QRYDATA,RCPBK006
          GOTO      SPRCB999
.
SPRCB070  MOVE      QRYDATA,RCPBK007
          GOTO      SPRCB999
.
SPRCB080  MOVE      QRYDATA,RCPBK008
          GOTO      SPRCB999
.
SPRCB090  MOVE      QRYDATA,RCPBK009
          GOTO      SPRCB999
.
SPRCB100  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      RCPBK010,CCENT,CYEAR,CMON,CDAY 
          GOTO      SPRCB999
.
SPRCB110  MOVE      QRYDATA,RCPBK011
          GOTO      SPRCB999
.
SPRCB120  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      RCPBK012,CCENT,CYEAR,CMON,CDAY
          GOTO      SPRCB999
.
SPRCB130  MOVE      QRYDATA,RCPBK013
          GOTO      SPRCB999
.
SPRCB140  MOVE      QRYDATA,RCPBK014
          GOTO      SPRCB999
.
SPRCB150  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      RCPBK015,CCENT,CYEAR,CMON,CDAY
          GOTO      SPRCB999
.
SPRCB160  MOVE      QRYDATA,RCPBK016
          GOTO      SPRCB999
.
SPRCB170  MOVE      QRYDATA,RCPBK017
          GOTO      SPRCB999
.
SPRCB180  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      RCPBK018,CCENT,CYEAR,CMON,CDAY
          GOTO      SPRCB999
.
SPRCB190  MOVE      QRYDATA,RCPBK019
          GOTO      SPRCB999
.
SPRCB200  MOVE      QRYDATA,RCPBK020
          GOTO      SPRCB999
.
SPRCB999  RETURN
.
.------------------------------------------------------------
.  Update bank header file
.------------------------------------------------------------
MVRCBK00  MATCH     RCPBK001,Z70
          IF        !@EQUAL
            MOVE      RCPBK001,RCBNRECN
          ENDIF
.
          MATCH     RCPBK002,Z70
          IF        !@EQUAL
            MOVE      RCPBK002,RCBNTDAT
          ENDIF
.
          MATCH     RCPBK003,Z70
          IF        !@EQUAL
            MOVE      RCPBK003,RCBNTOTP
          ENDIF
.
          MATCH     RCPBK004,Z70
          IF        !@EQUAL
            MOVE      RCPBK004,RCBNCDRW
          ENDIF
.
          MATCH     RCPBK005,Z70
          IF        !@EQUAL
            MOVE      RCPBK005,RCBNMHOS
          ENDIF
.
          MATCH     RCPBK006,Z70
          IF        !@EQUAL
            MOVE      RCPBK006,RCBNMDHS
          ENDIF
.
          MATCH     RCPBK007,Z70
          IF        !@EQUAL
            MOVE      RCPBK007,RCBNTTYP
          ENDIF
.
          MATCH     RCPBK008,Z70
          IF        !@EQUAL
            MOVE      RCPBK008,RCBNRCOD
          ENDIF
.
          MATCH     RCPBK009,Z70
          IF        !@EQUAL
            MOVE      RCPBK009,RCBNSTAT
          ENDIF
.
          MATCH     RCPBK010,Z70
          IF        !@EQUAL
            MOVE      RCPBK010,RCBNBDAT
          ENDIF
.
          MATCH     RCPBK011,Z70
          IF        !@EQUAL
            MOVE      RCPBK011,RCBNBTIM
          ENDIF
.
          MATCH     RCPBK012,Z70
          IF        !@EQUAL
            MOVE      RCPBK012,RCBNRDAT
          ENDIF
.
          MATCH     RCPBK013,Z70
          IF        !@EQUAL
            MOVE      RCPBK013,RCBNRTIM
          ENDIF
.
          MATCH     RCPBK014,Z70
          IF        !@EQUAL
            MOVE      RCPBK014,RCBNCHQA
          ENDIF
.
          MATCH     RCPBK015,Z70
          IF        !@EQUAL
            MOVE      RCPBK015,RCBNCDAT
          ENDIF
.
          MATCH     RCPBK016,Z70
          IF        !@EQUAL
            MOVE      RCPBK016,RCBNCTIM
          ENDIF
.
          MATCH     RCPBK017,Z70
          IF        !@EQUAL
            MOVE      RCPBK017,RCBNCUID
          ENDIF
.
          MATCH     RCPBK018,Z70
          IF        !@EQUAL
            MOVE      RCPBK018,RCBNUDAT
          ENDIF
.
          MATCH     RCPBK019,Z70
          IF        !@EQUAL
            MOVE      RCPBK019,RCBNUTIM
          ENDIF
.
          MATCH     RCPBK020,Z70
          IF        !@EQUAL
            MOVE      RCPBK020,RCBNUUID
          ENDIF
.
MVRCBK99  RETURN
.
.------------------------------------------------------------
.  Clear bank header file
.------------------------------------------------------------
CLRPBK00  MOVE      SP70,RCBNRECN 
          MOVE      SP70,RCBNTDAT 
          MOVE      ZERO,RCBNTOTP 
          MOVE      SP70,RCBNCDRW 
          MOVE      SP70,RCBNMHOS 
          MOVE      SP70,RCBNMDHS 
          MOVE      SP70,RCBNTTYP 
          MOVE      SP70,RCBNRCOD 
          MOVE      SP70,RCBNSTAT 
          MOVE      SP70,RCBNBDAT 
          MOVE      SP70,RCBNBTIM 
          MOVE      SP70,RCBNRDAT 
          MOVE      SP70,RCBNRTIM 
          MOVE      SP70,RCBNCHQA 
          MOVE      SP70,RCBNCDAT 
          MOVE      SP70,RCBNCTIM 
          MOVE      SP70,RCBNCUID 
          MOVE      SP70,RCBNUDAT 
          MOVE      SP70,RCBNUTIM 
          MOVE      SP70,RCBNUUID 
          MOVE      SP70,RCBNSPAR 
.
CLRPBK99  RETURN
.------------------------------------------------------------
.  Move Temporary bank header fields to bank header fields
.------------------------------------------------------------
MVTMBK00  MOVE      TMBNRECN,RCBNRECN 
          MOVE      TMBNTDAT,RCBNTDAT 
          MOVE      TMBNTOTP,RCBNTOTP 
          MOVE      TMBNCDRW,RCBNCDRW 
          MOVE      TMBNMHOS,RCBNMHOS 
          MOVE      TMBNMDHS,RCBNMDHS 
          MOVE      TMBNTTYP,RCBNTTYP 
          MOVE      TMBNRCOD,RCBNRCOD 
          MOVE      TMBNSTAT,RCBNSTAT 
          MOVE      TMBNBDAT,RCBNBDAT 
          MOVE      TMBNBTIM,RCBNBTIM 
          MOVE      TMBNRDAT,RCBNRDAT 
          MOVE      TMBNRTIM,RCBNRTIM 
          MOVE      TMBNCHQA,RCBNCHQA 
          MOVE      TMBNCDAT,RCBNCDAT 
          MOVE      TMBNCTIM,RCBNCTIM 
          MOVE      TMBNCUID,RCBNCUID 
          MOVE      TMBNUDAT,RCBNUDAT 
          MOVE      TMBNUTIM,RCBNUTIM 
          MOVE      TMBNUUID,RCBNUUID 
          MOVE      SP70,RCBNSPAR 
.
MVTMBK99  RETURN
.------------------------------------------------------------
.  Move bank header fields to Temporary bank header fields
.------------------------------------------------------------
MVRLBK00  MOVE      RCBNRECN,TMBNRECN
          MOVE      RCBNTDAT,TMBNTDAT 
          MOVE      RCBNTOTP,TMBNTOTP 
          MOVE      RCBNCDRW,TMBNCDRW 
          MOVE      RCBNMHOS,TMBNMHOS 
          MOVE      RCBNMDHS,TMBNMDHS 
          MOVE      RCBNTTYP,TMBNTTYP 
          MOVE      RCBNRCOD,TMBNRCOD 
          MOVE      RCBNSTAT,TMBNSTAT 
          MOVE      RCBNBDAT,TMBNBDAT 
          MOVE      RCBNBTIM,TMBNBTIM 
          MOVE      RCBNRDAT,TMBNRDAT 
          MOVE      RCBNRTIM,TMBNRTIM 
          MOVE      RCBNCHQA,TMBNCHQA 
          MOVE      RCBNCDAT,TMBNCDAT 
          MOVE      RCBNCTIM,TMBNCTIM 
          MOVE      RCBNCUID,TMBNCUID 
          MOVE      RCBNUDAT,TMBNUDAT 
          MOVE      RCBNUTIM,TMBNUTIM 
          MOVE      RCBNUUID,TMBNUUID 
          MOVE      SP70,TMBNSPAR 
.
MVRLBK99  RETURN
.
