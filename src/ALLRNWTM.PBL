. *----------------------------------------------------------------------
. * Include Name  :   ALLRNWTM.PBL
. *
. * Function      :   CGI variables for ALLRNWFD - allrnwaf.dat
. *
. * Includes Needed :
. *
. *----------------------------------------------------------------------
.  Modifications Done :
.
.  V10.08.01  28/04/2016  Ebon Clements TSK 0813977
.             Added ALRNW024 to ALRNW029
.  V10.05.01  15/10/2014  Ebon Clements CAR 291413
.             Added completed status to ALRNSTAT
.  V10.05.00  16/09/2014  Ebon Clements CAR 291413
.             Created include                
.------------------------------------------------------------------------
.   Clear Parameters for allied health referral renewal audit file
.------------------------------------------------------------------------
.
CLALRN00  MOVE      Z70,ALRNW001
          MOVE      Z70,ALRNW002
          MOVE      Z70,ALRNW003
          MOVE      Z70,ALRNW004
          MOVE      Z70,ALRNW005
          MOVE      Z70,ALRNW006
          MOVE      Z70,ALRNW007
          MOVE      Z70,ALRNW008
          MOVE      Z70,ALRNW009
          MOVE      Z70,ALRNW010
          MOVE      Z70,ALRNW011
          MOVE      Z70,ALRNW012
          MOVE      Z70,ALRNW013
          MOVE      Z70,ALRNW014
          MOVE      Z70,ALRNW015
          MOVE      Z70,ALRNW016
          MOVE      Z70,ALRNW017
          MOVE      Z70,ALRNW018
          MOVE      Z70,ALRNW019
          MOVE      Z70,ALRNW020
          MOVE      Z70,ALRNW021
          MOVE      Z70,ALRNW022
          MOVE      Z70,ALRNW023
          MOVE      Z70,ALRNW024
          MOVE      Z70,ALRNW025
          MOVE      Z70,ALRNW026
          MOVE      Z70,ALRNW027
          MOVE      Z70,ALRNW028
          MOVE      Z70,ALRNW029
.
CLALRN99  RETURN
.------------------------------------------------------------
. Add allied health referral renewal audit file
.------------------------------------------------------------
ALRN0000  BRANCH    FLDITMNO,ALRN0010,ALRN0020,ALRN0030,ALRN0040,ALRN0050:
                             ALRN0060,ALRN0070,ALRN0080,ALRN0090,ALRN0100:
                             ALRN0110,ALRN0120,ALRN0130,ALRN0140,ALRN0150:
                             ALRN0160,ALRN0170,ALRN0180,ALRN0190,ALRN0200:
                             ALRN0210,ALRN0220,ALRN0230,ALRN0240,ALRN0250:
                             ALRN0260,ALRN0270,ALRN0280,ALRN0290,ALRN0300
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      ALRN9999
.
ALRN0010  WRITE     HTMLFILE;ALRNVISN;
          GOTO      ALRN9999
.
ALRN0020  MATCH     ALRNRDAT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNRDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0030  WRITE     HTMLFILE;ALRNRTIM;
          GOTO      ALRN9999
.
ALRN0040  MATCH     SP70,ALRNRUID
          GOTO      ALRN9999 IF EQUAL
.
          PACK      KEY10,ALRNRUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      ALRNRUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      ALRN9999
.
ALRN0050  MOVE      "RI",CATEGORY
          MOVE      ALRNORTY,CODE
          CALL      CODITM00
          GOTO      ALRN9999
.
ALRN0060  MATCH     ALRNOXDT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNOXDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0070  MATCH     ALRNORDT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNORDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0080  MOVE      "RI",CATEGORY
          MOVE      ALRNNRTY,CODE
          CALL      CODITM00
          GOTO      ALRN9999
.
ALRN0090  MATCH     ALRNNXDT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNNXDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0100  MATCH     ALRNNRDT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNNRDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0110  WRITE     HTMLFILE;ALRNSTAT;
          GOTO      ALRN9999
.
ALRN0120  MATCH     ALRNRRDT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNRRDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0130  WRITE     HTMLFILE;ALRNRRTM;
          GOTO      ALRN9999
.
ALRN0140  MATCH     SP70,ALRNRRID
          GOTO      ALRN9999 IF EQUAL
.
          PACK      KEY10,ALRNRRID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      ALRNRRID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      ALRN9999
.
ALRN0150  MATCH     ALRNDDAT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNDDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0160  WRITE     HTMLFILE;ALRNDTIM;
          GOTO      ALRN9999
.
ALRN0170  MATCH     SP70,ALRNDUID
          GOTO      ALRN9999 IF EQUAL
.
          PACK      KEY10,ALRNDUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      ALRNDUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      ALRN9999
.
ALRN0180  MATCH     ALRNCDAT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNCDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0190  WRITE     HTMLFILE;ALRNCTIM;
          GOTO      ALRN9999
.
ALRN0200  MATCH     SP70,ALRNCUID
          GOTO      ALRN9999 IF EQUAL
.
          PACK      KEY10,ALRNCUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      ALRNCUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      ALRN9999
.
ALRN0210  MATCH     ALRNUDAT,SP70
          GOTO      ALRN9999 IF EQUAL
.
          UNPACK    ALRNUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALRN9999
.
ALRN0220  WRITE     HTMLFILE;ALRNUTIM;
          GOTO      ALRN9999
.
ALRN0230  MATCH     SP70,ALRNUUID
          GOTO      ALRN9999 IF EQUAL
.
          PACK      KEY10,ALRNUUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      ALRNUUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      ALRN9999
.
ALRN0240  MATCH     "1",ALRNSTAT
          IF        @EQUAL
            WRITE     HTMLFILE;"Deleted";
          ELSE
            MATCH     "2",ALRNSTAT
            IF        @EQUAL
              WRITE     HTMLFILE;"Completed";
            ELSE
              WRITE     HTMLFILE;"Current";
            ENDIF
          ENDIF
          GOTO      ALRN9999
.
ALRN0250  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,ALRN0251
.
          PACK      KEY10,ALRNORES,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,ALRN9999
.
          MOVE      PMHCTITL,FMTTITLE
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          WRITE     HTMLFILE;DOCFNAME;
          GOTO      ALRN9999
.
ALRN0251  WRITE     HTMLFILE;ALRNORES;
          GOTO      ALRN9999
.
ALRN0260  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,ALRN0261
.
          PACK      KEY10,ALRNNRES,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,ALRN9999
.
          MOVE      PMHCTITL,FMTTITLE
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          WRITE     HTMLFILE;DOCFNAME;
          GOTO      ALRN9999
.
ALRN0261  WRITE     HTMLFILE;ALRNNRES;
          GOTO      ALRN9999
.
ALRN0270  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,ALRN0271
.
          PACK      KEY10,ALRNORHC,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,ALRN9999
.
          MOVE      PMHCTITL,FMTTITLE
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          WRITE     HTMLFILE;DOCFNAME;
          GOTO      ALRN9999
.
ALRN0271  WRITE     HTMLFILE;ALRNORHC;
          GOTO      ALRN9999
.
ALRN0280  PACK      KEY20,ALRNORHC,ALRNORHP,SP70
          CALL      RDPMHCL1
          BRANCH    OVRCD,ALRN9999
.
          WRITE     HTMLFILE;PMHLPRV1;
          GOTO      ALRN9999
.
ALRN0290  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,ALRN0291
.
          PACK      KEY10,ALRNNRHC,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,ALRN9999
.
          MOVE      PMHCTITL,FMTTITLE
          MOVE      PMHCGNAM,FMTGNAME
          MOVE      PMHCSNAM,FMTSNAME
          CALL      DOCNM000
          WRITE     HTMLFILE;DOCFNAME;
          GOTO      ALRN9999
.
ALRN0291  WRITE     HTMLFILE;ALRNNRHC;
          GOTO      ALRN9999
.
ALRN0300  PACK      KEY20,ALRNNRHC,ALRNNRHP,SP70
          CALL      RDPMHCL1
          BRANCH    OVRCD,ALRN9999
.
          WRITE     HTMLFILE;PMHLPRV1;
          GOTO      ALRN9999
.
ALRN9999  RETURN
.
.
.------------------------------------------------------------
.   Set Parameters for allied health referral renewal audit file
.------------------------------------------------------------
SPALN000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPALN001,SPALN002,SPALN003,SPALN004,SPALN005:
                       SPALN006,SPALN007,SPALN008,SPALN009,SPALN010:
                       SPALN011,SPALN012,SPALN013,SPALN014,SPALN015:
                       SPALN016,SPALN017,SPALN018,SPALN019,SPALN020:
                       SPALN021,SPALN022,SPALN023,SPALN024,SPALN025:
                       SPALN026,SPALN027,SPALN028,SPALN029
.
          MOVE      ONE,EXIT
          GOTO      SPALN999
.
SPALN001  PACK      ALRNW001,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN002  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW002,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN003  PACK      ALRNW003,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN004  PACK      ALRNW004,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN005  PACK      ALRNW005,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN006  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW006,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN007  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW007,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN008  PACK      ALRNW008,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN009  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW009,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN010  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW010,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN011  PACK      ALRNW011,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN012  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW012,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN013  PACK      ALRNW013,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN014  PACK      ALRNW014,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN015  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW015,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN016  PACK      ALRNW016,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN017  PACK      ALRNW017,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN018  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW018,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN019  PACK      ALRNW019,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN020  PACK      ALRNW020,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN021  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALRNW021,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALN999
.
SPALN022  PACK      ALRNW022,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN023  PACK      ALRNW023,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN024  PACK      ALRNW024,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN025  PACK      ALRNW025,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN026  PACK      ALRNW026,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN027  PACK      ALRNW027,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN028  PACK      ALRNW028,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN029  PACK      ALRNW029,QRYDATA,SP70
          GOTO      SPALN999
.
SPALN999  RETURN
.
.------------------------------------------------------------
.  Update allied health referral renewal audit file
.------------------------------------------------------------
MVALN000  MATCH     ALRNW001,Z70
          IF        !@EQUAL
            MOVE      ALRNW001,ALRNVISN
          ENDIF
.
          MATCH     ALRNW002,Z70
          IF        !@EQUAL
            MOVE      ALRNW002,ALRNRDAT
          ENDIF
.
          MATCH     ALRNW003,Z70
          IF        !@EQUAL
            MOVE      ALRNW003,ALRNRTIM
          ENDIF
.
          MATCH     ALRNW004,Z70
          IF        !@EQUAL
            MOVE      ALRNW004,ALRNRUID
          ENDIF
.
          MATCH     ALRNW005,Z70
          IF        !@EQUAL
            MOVE      ALRNW005,ALRNORTY
          ENDIF
.
          MATCH     ALRNW006,Z70
          IF        !@EQUAL
            MOVE      ALRNW006,ALRNOXDT
          ENDIF
.
          MATCH     ALRNW007,Z70
          IF        !@EQUAL
            MOVE      ALRNW007,ALRNORDT
          ENDIF
.
          MATCH     ALRNW008,Z70
          IF        !@EQUAL
            MOVE      ALRNW008,ALRNNRTY
          ENDIF
.
          MATCH     ALRNW009,Z70
          IF        !@EQUAL
            MOVE      ALRNW009,ALRNNXDT
          ENDIF
.
          MATCH     ALRNW010,Z70
          IF        !@EQUAL
            MOVE      ALRNW010,ALRNNRDT
          ENDIF
.
          MATCH     ALRNW011,Z70
          IF        !@EQUAL
            MOVE      ALRNW011,ALRNSTAT
          ENDIF
.
          MATCH     ALRNW012,Z70
          IF        !@EQUAL
            MOVE      ALRNW012,ALRNRRDT
          ENDIF
.
          MATCH     ALRNW013,Z70
          IF        !@EQUAL
            MOVE      ALRNW013,ALRNRRTM
          ENDIF
.
          MATCH     ALRNW014,Z70
          IF        !@EQUAL
            MOVE      ALRNW014,ALRNRRID
          ENDIF
.
          MATCH     ALRNW015,Z70
          IF        !@EQUAL
            MOVE      ALRNW015,ALRNDDAT
          ENDIF
.
          MATCH     ALRNW016,Z70
          IF        !@EQUAL
            MOVE      ALRNW016,ALRNDTIM
          ENDIF
.
          MATCH     ALRNW017,Z70
          IF        !@EQUAL
            MOVE      ALRNW017,ALRNDUID
          ENDIF
.
          MATCH     ALRNW018,Z70
          IF        !@EQUAL
            MOVE      ALRNW018,ALRNCDAT
          ENDIF
.
          MATCH     ALRNW019,Z70
          IF        !@EQUAL
            MOVE      ALRNW019,ALRNCTIM
          ENDIF
.
          MATCH     ALRNW020,Z70
          IF        !@EQUAL
            MOVE      ALRNW020,ALRNCUID
          ENDIF
.
          MATCH     ALRNW021,Z70
          IF        !@EQUAL
            MOVE      ALRNW021,ALRNUDAT
          ENDIF
.
          MATCH     ALRNW022,Z70
          IF        !@EQUAL
            MOVE      ALRNW022,ALRNUTIM
          ENDIF
.
          MATCH     ALRNW023,Z70
          IF        !@EQUAL
            MOVE      ALRNW023,ALRNUUID
          ENDIF
.
          MATCH     ALRNW024,Z70
          IF        !@EQUAL
            MOVE      ALRNW024,ALRNORES
          ENDIF
.
          MATCH     ALRNW025,Z70
          IF        !@EQUAL
            MOVE      ALRNW025,ALRNNRES
          ENDIF
.
          MATCH     ALRNW026,Z70
          IF        !@EQUAL
            MOVE      ALRNW026,ALRNORHC
          ENDIF
.
          MATCH     ALRNW027,Z70
          IF        !@EQUAL
            MOVE      ALRNW027,ALRNORHP
          ENDIF
.
          MATCH     ALRNW028,Z70
          IF        !@EQUAL
            MOVE      ALRNW028,ALRNNRHC
          ENDIF
.
          MATCH     ALRNW029,Z70
          IF        !@EQUAL
            MOVE      ALRNW029,ALRNNRHP
          ENDIF
.
MVALN999  RETURN
