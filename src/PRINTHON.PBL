.******************************************************************************
.*                                                                            *
.*  PRTHONF - HON Form (User Defined Stationery)                              *
.*                                                                            *
.* &&&&& Make sure the file ibavaraf is updated with the new variables &&&&&  *
.*                                                                            *
.* Modifications  :                                                           *
.*                                                                            *
.*----------------------------------------------------------------------------*
.* V11.02.02 13/04/2022  Thanh T          TSK 0903453                         *
.*           Added PRHO1860 to PRHO1910 for identifying gender/pronoun and    *
.*           free text fields                                                 *
.* V11.02.01 26/01/2022  Jacob Jackson   TSK 0864505                          *
.*           Added preferred name field options -                             *
.*           PRHON863, PRHON864, PRHON865, PRHON866, PRHON867                 *
.* V11.00.02 18/11/2020  Thanh T         TSK 0878747                          *
.*           Added PRHON862 for multiple birth details                        *
.* V11.00.01 06/04/2020  Thanh T         TSK 0879163                          *
.*           Changed PRHON456 for Sex category.                               *
.*           Added PRHON861 for sex long description                          * 
.*----------------------------------------------------------------------------*
.*       V10.13.01  16/10/2018  Ebon Clements   TSK 0863467                   *
.*                  Added save and restore of ibalpcaf fields instead         *
.*                  re reads - SLPC0000 and RLPC0000                          *
.*       V10.10.01  16/03/2017  Jill Parkinson TSK 0818098                    *
.*                  Changed pmagdtug to print pmagdugo and pmagd10m to pmagdwlk*
.*       V10.03.01  22/10/2012  Patrick Adair  CAR 273181                     *
.*                  Added Stationery Variables for AN-SNAP (Fields 96 - 175)  *
.*        V9.12.01  10/11/2009  Peter Vela     CAR 199757                     *
.*                  Added Next Stationery Type Code for Stationery Type 19    *
.*        V9.08.00  24/08/2007  Jill Habasque  CAR 135539                     *
.*                  Created include                                           *
.******************************************************************************
.
.******************************************************************************
.*        Lineup Print                                                        *
.******************************************************************************
.
LINUPHON  CALL      OPNPRINT                 * open spool file
          MOVE      ONE,CURRROW              * Initialise current row counter
.
LNHON000  COMPARE   CURRROW,IBDTROW          * Current row up to required row ?
          GOTO      LNHON200 IF EQUAL        * Yes - print data
          PRINT     *N;                      * Else print 1 extra line
          ADD       ONE,CURRROW              * Increment counter
          GOTO      LNHON000                 * Check counter again
.
. ------- Read through the details file -------
.
LNHON100  CALL      RKIBDET1                 * Read next detail record
          BRANCH    OVRCD,LNHON900           * No more records - pad out form
.
          MATCH     CPIDCOD,IBDTSCOD         * Same form ?
          GOTO      LNHON900 IF NOT EQUAL    * No - pad out rest of form
.
LNHON110  COMPARE   CURRROW,IBDTROW          * Are we at required row ?
          GOTO      LNHON200 IF EQUAL        * Yes - print data
          PRINT     *N;                      * Else pad out form to req row
          ADD       ONE,CURRROW              * One more row printed
          GOTO      LNHON110                 * Check row count
.
. ------- Print actual data lines -------
.
LNHON200  BRANCH    IBDTINDC,LNHON300:       * Text field
                             LNHON400        * Data field
.
. ------- Print text field -------
.
LNHON300  PRINT     *IBDTCOL,IBDTTXFL;       * Print data
          MOVE      IBDTROW,CURRROW          * Row printed is current row
          GOTO      LNHON100                 * Read next record
.
. ------- Print data field -------
.
LNHON400  MOVE      IBDTTXFL,DIM5            * Data number 1st 3 chars of field
          MOVE      DIM5,FORM5               * Move to a FORM field for BRANCH
.
          BRANCH    FORM5,LNHON500,LNHON450,LNHON450,LNHON450,LNHON460:
                          LNHON450,LNHON470,LNHON450,LNHON450,LNHON450:    10
                          LNHON450,LNHON450,LNHON450,LNHON480,LNHON430:
                          LNHON470,LNHON450,LNHON450,LNHON450,LNHON450:    20
                          LNHON450,LNHON450,LNHON450,LNHON480,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON490:    30
                          LNHON490,LNHON450,LNHON450,LNHON520,LNHON450:
                          LNHON450,LNHON450,LNHON520,LNHON450,LNHON450:    40
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON470:
                          LNHON460,LNHON450,LNHON450,LNHON450,LNHON450:    50
                          LNHON450,LNHON540,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:    60
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:    70
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON530,LNHON450,LNHON450,LNHON450,LNHON450:    80
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:    90
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON475,LNHON475,LNHON475,LNHON450,LNHON450:   100
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:   110
                          LNHON450,LNHON450,LNHON450,LNHON475,LNHON475:
                          LNHON475,LNHON475,LNHON475,LNHON475,LNHON475:   120
                          LNHON475,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:   130
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:   140
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON470:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:   150
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:   160
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450:
                          LNHON450,LNHON450,LNHON450,LNHON475,LNHON475:   170
                          LNHON450,LNHON450,LNHON450,LNHON450,LNHON450
.
LNHON430  MOVE      "999",VARIABLE           * Age
          GOTO      LNHON600
.
LNHON450  PACK      VARIABLE,X10,X10,X10,X10,X10,X10,X10,X10,X10,X10,X10,X10,X10,X10,X10
          GOTO      LNHON600
.
LNHON460  MOVE      "99:99:99",VARIABLE      * Time variables
          GOTO      LNHON600
.
LNHON470  MOVE      "99/99/99",VARIABLE      * Date variables
          GOTO      LNHON600
.
LNHON475  MOVE      "99/99/9999",VARIABLE    * Date with century variables
          GOTO      LNHON600
.
LNHON480  MOVE      "9",VARIABLE             * Indicators
          GOTO      LNHON600
.
LNHON490  PACK      VARIABLE,ANSX,DOT,X10,X10      * Doctor's name
          GOTO      LNHON600
.
LNHON500  MOVE      "99999999",VARIABLE      * Admission number
          GOTO      LNHON600
.
LNHON520  CLEAR     VARIABLE                 * Address
          APPEND    X10,VARIABLE
          APPEND    X10,VARIABLE
          APPEND    X5,VARIABLE
          APPEND    COMMA,VARIABLE
          APPEND    X10,VARIABLE
          APPEND    X10,VARIABLE
          APPEND    X5,VARIABLE
          APPEND    COMMA,VARIABLE
          APPEND    " 9999",VARIABLE
          RESET     VARIABLE
          GOTO      LNHON600
.
LNHON530  MOVE      "99",VARIABLE            * Year
          GOTO      LNHON600
.
LNHON540  MOVE      "999999.99",VARIABLE     * Daily rate
          GOTO      LNHON600
.
. ------- Actual data print routine -------
.
LNHON600  RESET     VARIABLE,IBDTPLEN        * Reset pointer to required length
          LENSET    VARIABLE                 * Push logical length there
          RESET     VARIABLE                 * Reset form pointer to start
          PRINT     *IBDTCOL,*+,VARIABLE;    * Only print data between FP & LL
          MOVE      IBDTROW,CURRROW          * Move row number to one printed
          GOTO      LNHON100                 * Read next record
.
. ------- Finished all data for this form - pad out rest of form -------
.
LNHON900  COMPARE   CURRROW,IBTHLENG         * End of form ?
          GOTO      LNHON999 IF EQUAL        * Yes - exit
          PRINT     *N;                      * Otherwise pad out 1 more line
          ADD       ONE,CURRROW              * 1 more line printed
          GOTO      LNHON900                 * Test again
.
LNHON999  MOVE      FALSE,EXIT               * Set exit flag
          PACK      SAVFIL8,SPLFILE,SP70
          CALL      CLSPRINT                 * close the spool file
          RETURN                             * Finished
.
.*******************************************************************************
.*        Actual Print Routine for HON Form                                    *
.*******************************************************************************
.
PRINTHON  CALL      OPNPRINT                 * open spool file
          MOVE      ONE,CURRROW              * Initialise current row counter
.
PRHON000  COMPARE   CURRROW,IBDTROW          * Current row up to required row ?
          GOTO      PRHON200 IF EQUAL        * Yes - print data
          PRINT     *N;                      * Else print 1 extra line
          ADD       ONE,CURRROW              * Increment counter
          GOTO      PRHON000                 * Check counter again
.
. ------- Read through the details file -------
.
PRHON100  CALL      RKIBDET1                 * Read next detail record
          BRANCH    OVRCD,PRHO8000           * No more records - pad out form
.
          MATCH     CPIDCOD,IBDTSCOD         * Same form ?
          GOTO      PRHO8000 IF NOT EQUAL    * No - pad out rest of form
.
PRHON110  COMPARE   CURRROW,IBDTROW          * Are we at the required row ?
          GOTO      PRHON200 IF EQUAL        * Yes - print data
          PRINT     *N;                      * Else pad out to required row
          ADD       ONE,CURRROW              * One more row printed
          GOTO      PRHON110                 * Check row count
.
. ------- Print actual data lines -------
.
PRHON200  BRANCH    IBDTINDC,PRHON300:       * Text field
                             PRHON400        * Data field
.
. ------- Print text field -------
.
PRHON300  RESET     IBDTTXFL,IBDTPLEN
          LENSET    IBDTTXFL
          RESET     IBDTTXFL
          PRINT     *IBDTCOL,*+,IBDTTXFL;    * Print data
          MOVE      IBDTROW,CURRROW          * Row printed is current row
          GOTO      PRHON100                 * Read next record
.
. ------- Print data field -------
.
PRHON400  MOVE      IBDTTXFL,DIM5            * Data number 1st 3 chars of field
          MOVE      DIM5,FORM5               * Move to a FORM field for BRANCH
.
          PACK      VARIABLE,SP30,SP30,SP30,SP30,SP10  * Initialise variable
          BRANCH    FORM5,PRHON404,PRHON408,PRHON412,PRHON416,PRHON420:
                          PRHON424,PRHON428,PRHON432,PRHON436,PRHON440:    10
                          PRHON444,PRHON448,PRHON452,PRHON456,PRHON460:
                          PRHON464,PRHON468,PRHON472,PRHON476,PRHON480:    20
                          PRHON484,PRHON488,PRHON492,PRHON496,PRHON500:
                          PRHON504,PRHON508,PRHON512,PRHON516,PRHON520:    30
                          PRHON524,PRHON528,PRHON532,PRHON536,PRHON540:
                          PRHON544,PRHON548,PRHON552,PRHON556,PRHON560:    40
                          PRHON564,PRHON568,PRHON572,PRHON576,PRHON580:
                          PRHON584,PRHON588,PRHON592,PRHON596,PRHON600:    50
                          PRHON604,PRHON608,PRHON612,PRHON616,PRHON620:
                          PRHON624,PRHON628,PRHON632,PRHON636,PRHON640:    60
                          PRHON644,PRHON648,PRHON652,PRHON656,PRHON660:
                          PRHON664,PRHON668,PRHON672,PRHON676,PRHON680:    70
                          PRHON684,PRHON688,PRHON692,PRHON696,PRHON700:
                          PRHON704,PRHON708,PRHON712,PRHON716,PRHON720:    80
                          PRHON724,PRHON728,PRHON732,PRHON736,PRHON740:
                          PRHON744,PRHON748,PRHON752,PRHON756,PRHON760:    90
                          PRHON764,PRHON768,PRHON772,PRHON776,PRHON777:
                          PRHON778,PRHON779,PRHON780,PRHON781,PRHON782:   100
                          PRHON783,PRHON784,PRHON785,PRHON786,PRHON787:
                          PRHON788,PRHON789,PRHON790,PRHON791,PRHON792:   110
                          PRHON793,PRHON794,PRHON795,PRHON796,PRHON797:
                          PRHON798,PRHON799,PRHON800,PRHON801,PRHON802:   120
                          PRHON803,PRHON804,PRHON805,PRHON806,PRHON807:
                          PRHON808,PRHON809,PRHON810,PRHON811,PRHON812:   130
                          PRHON813,PRHON814,PRHON815,PRHON816,PRHON817:
                          PRHON818,PRHON819,PRHON820,PRHON821,PRHON822:   140
                          PRHON823,PRHON824,PRHON825,PRHON826,PRHON827:
                          PRHON828,PRHON829,PRHON830,PRHON831,PRHON832:   150
                          PRHON833,PRHON834,PRHON835,PRHON836,PRHON837:
                          PRHON838,PRHON839,PRHON840,PRHON841,PRHON842:   160
                          PRHON843,PRHON844,PRHON845,PRHON846,PRHON847:
                          PRHON848,PRHON849,PRHON850,PRHON851,PRHON852:   170
                          PRHON853,PRHON854,PRHON855,PRHON856,PRHON857:
                          PRHON858,PRHON859,PRHON860,PRHON861,PRHON862:   180
                          PRHON863,PRHON864,PRHON865,PRHON866,PRHON867:
                          PRHO1860,PRHO1870,PRHO1880,PRHO1890,PRHO1900:   190
                          PRHO1910                          
.
          GOTO      PRHON100

PRHON404  MOVE      DPVIBILL,VARIABLE          * Admission number
          MOVE      EIGHT,PRNTSTRT
          SUB       IBDTPLEN,PRNTSTRT
          GOTO      PRHO6000
.
PRHON408  MOVE      PVIURNO,VARIABLE           * U/R number
          MOVE      EIGHT,PRNTSTRT
          SUB       IBDTPLEN,PRNTSTRT
          GOTO      PRHO6000
.
PRHON412  MOVE      PSNAME,VARIABLE           * Surname
          GOTO      PRHO5000
.
PRHON416  MOVE      PGNAME,VARIABLE          * Given name
          GOTO      PRHO5000
.
PRHON420  MOVE      PTITL,VARIABLE          * title
          GOTO      PRHO5000
.
PRHON424
          GOTO      PRHO5000
.
PRHON428
          GOTO      PRHO5000
.
PRHON432  MOVE      PADD1,VARIABLE           * Address line 1
          GOTO      PRHO5000
.
PRHON436  MOVE      PADD2,VARIABLE           * Address line 2
          GOTO      PRHO5000
.
PRHON440  MOVE      PSUBRB,VARIABLE          * Suburb
          GOTO      PRHO5000
.
PRHON444  MOVE      PADD4,VARIABLE           * Address line 4
          GOTO      PRHO5000
.
PRHON448  MOVE      PTELEP,VARIABLE          * Private telephone
          GOTO      PRHO5000
.
PRHON452  MOVE      PPOST,VARIABLE           * Postcode
          GOTO      PRHO5000
.
PRHON456  MOVE      ZERO,ANS                 * Sex
          MOVE      PSEX,DSEXCHAR
          CALL      SEXDSP00   
          MOVE      DSEXASC1,VARIABLE
          GOTO      PRHO5000
.
PRHON460  CALL      LABELAGE
          MOVE      XAGE,VARIABLE           * Age
          MOVE      THREE,PRNTSTRT
          SUB       IBDTPLEN,PRNTSTRT
          GOTO      PRHO6000
.
PRHON464  UNPACK    PBDATE,CCENT,CYEAR,CMON,CDAY   * Birth date
          CALL      PACDATE
          MOVE      CPDATE,VARIABLE
          GOTO      PRHO5000
.
PRHON468  MOVE      PCONT,VARIABLE           * Country
          GOTO      PRHO5000
.
PRHON472  MOVE      MHHNUNIQ,VARIABLE
          GOTO      PRHO5000
.
PRHON476  MOVE      CODELHS,TCODE
          PACK      ACODE,MHHNHOTY,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.
PRHON480  MATCH     "1",MHHNACTV
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON484  MATCH     "1",MHHNSENT
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON488  MATCH     SP70,MHHNHDAT
          GOTO      PRHO5000 IF EQUAL
          UNPACK    MHHNHDAT,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.
PRHON492  MOVE      CODELSS,TCODE
          PACK      ACODE,MHHNSSET,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.
PRHON496  MOVE      CODELHP,TCODE
          PACK      ACODE,MHHNREAS,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.
PRHON500  MOVE      MHHNRHCP,VARIABLE
          GOTO      PRHO5000
.
PRHON504  MOVE      MHHNCAST,VARIABLE
          GOTO      PRHO5000
.
PRHON508  MOVE      MHHNPHCP,VARIABLE
          GOTO      PRHO5000
.
PRHON512  MATCH     "1",MHHNCOMP
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON516  MOVE      CODELHF,TCODE
          PACK      ACODE,MHHNFOCU,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.
PRHON520  MOVE      CODELHC,TCODE
          PACK      ACODE,MHHNCULS,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.
PRHON524  MATCH     "1",MHHNNGOS
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON528  MATCH     "1",MHHNNGOA
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON532  MATCH     "1",MHHNNGOW
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON536  MATCH     "1",MHHNVOCA
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON540  MATCH    "1",MHHNNSNG
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.
PRHON544  MOVE      CODELHT,TCODE
          PACK      ACODE,MHHNCOLS,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.
PRHON548  MOVE      CODELHM,TCODE
          PACK      ACODE,MHHNMODA,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.
PRHON552  MOVE      MHHNADQ1,VARIABLE
          GOTO      PRHO5000
.
PRHON556  MOVE      MHHNADQ2,VARIABLE
          GOTO      PRHO5000
.
PRHON560  MOVE      MHHNADQ3,VARIABLE
          GOTO      PRHO5000
.
PRHON564  MOVE      MHHNADQ4,VARIABLE
          GOTO      PRHO5000
.
PRHON568  MOVE      MHHNADQ5,VARIABLE
          GOTO      PRHO5000
.
PRHON572  MOVE      MHHNADQ6,VARIABLE
          GOTO      PRHO5000
.
PRHON576  MOVE      MHHNADQ7,VARIABLE
          GOTO      PRHO5000
.
PRHON580  MOVE      MHHNADQ8,VARIABLE
          GOTO      PRHO5000
.
PRHON584  MOVE      MHHNAQ8A,VARIABLE
          GOTO      PRHO5000
.
PRHON588  MOVE      MHHNFREE,VARIABLE
          GOTO      PRHO5000
.
PRHON592  MOVE      MHHNADQ9,VARIABLE
          GOTO      PRHO5000
.
PRHON596  MOVE      MHHNAQ10,VARIABLE
          GOTO      PRHO5000
.
PRHON600  MOVE      MHHNAQ11,VARIABLE
          GOTO      PRHO5000
.
PRHON604  MOVE      MHHNAQ12,VARIABLE
          GOTO      PRHO5000
.
PRHON608  MOVE      MHHNCYQ1,VARIABLE
          GOTO      PRHO5000
.
PRHON612  MOVE      MHHNCYQ2,VARIABLE
          GOTO      PRHO5000
.
PRHON616  MOVE      MHHNCYQ3,VARIABLE
          GOTO      PRHO5000
.
PRHON620  MOVE      MHHNCYQ4,VARIABLE
          GOTO      PRHO5000
.
PRHON624  MOVE      MHHNCYQ5,VARIABLE
          GOTO      PRHO5000
.
PRHON628  MOVE      MHHNCYQ6,VARIABLE
          GOTO      PRHO5000
.
PRHON632  MOVE      MHHNCYQ7,VARIABLE
          GOTO      PRHO5000
.
PRHON636  MOVE      MHHNCYQ8,VARIABLE
          GOTO      PRHO5000
.
PRHON640  MOVE      MHHNCYQ9,VARIABLE
          GOTO      PRHO5000
.
PRHON644  MOVE      MHHNCQ10,VARIABLE
          GOTO      PRHO5000
.
PRHON648  MOVE      MHHNCQ11,VARIABLE
          GOTO      PRHO5000
.
PRHON652  MOVE      MHHNCQ12,VARIABLE
          GOTO      PRHO5000
.
PRHON656  MOVE      MHHNCQ13,VARIABLE
          GOTO      PRHO5000
.
PRHON660  MOVE      MHHNCQ14,VARIABLE
          GOTO      PRHO5000
.
PRHON664  MOVE      MHHNCQ15,VARIABLE
          GOTO      PRHO5000
.
PRHON668  MOVE      MHHNLDQ1,VARIABLE
          GOTO      PRHO5000
.
PRHON672  MOVE      MHHNLDQ2,VARIABLE
          GOTO      PRHO5000
.
PRHON676  MOVE      MHHNLDQ3,VARIABLE
          GOTO      PRHO5000
.
PRHON680  MOVE      MHHNLDQ4,VARIABLE
          GOTO      PRHO5000
.
PRHON684  MOVE      MHHNLDQ5,VARIABLE
          GOTO      PRHO5000
.
PRHON688  MOVE      MHHNLDQ6,VARIABLE
          GOTO      PRHO5000
.
PRHON692  MOVE      MHHNLDQ7,VARIABLE
          GOTO      PRHO5000
.
PRHON696  MOVE      MHHNLDQ8,VARIABLE
          GOTO      PRHO5000
.
PRHON700  MOVE      MHHNLDQ9,VARIABLE
          GOTO      PRHO5000
.
PRHON704  MOVE      MHHNLQ10,VARIABLE
          GOTO      PRHO5000
.
PRHON708  MOVE      MHHNLQ11,VARIABLE
          GOTO      PRHO5000
.
PRHON712  MOVE      MHHNLQ12,VARIABLE
          GOTO      PRHO5000
.
PRHON716  MOVE      MHHNLQ13,VARIABLE
          GOTO      PRHO5000
.
PRHON720  MOVE      MHHNLQ14,VARIABLE
          GOTO      PRHO5000
.
PRHON724  MOVE      MHHNLQ15,VARIABLE
          GOTO      PRHO5000
.
PRHON728  MOVE      MHHNLQ16,VARIABLE
          GOTO      PRHO5000
.
PRHON732  MOVE      MHHNLQ17,VARIABLE
          GOTO      PRHO5000
.
PRHON736  MOVE      MHHNLQ18,VARIABLE
          GOTO      PRHO5000
.
PRHON740  MOVE      MHHNSCQ1,VARIABLE
          GOTO      PRHO5000
.
PRHON744  MOVE      MHHNSCQ2,VARIABLE
          GOTO      PRHO5000
.
PRHON748  MOVE      MHHNSCQ3,VARIABLE
          GOTO      PRHO5000
.
PRHON752  MOVE      MHHNSCQ4,VARIABLE
          GOTO      PRHO5000
.
PRHON756  MOVE      MHHNSCQ5,VARIABLE
          GOTO      PRHO5000
.
PRHON760  MOVE      MHHNSCQ6,VARIABLE
          GOTO      PRHO5000
.
PRHON764  MOVE      MHHNSCQ7,VARIABLE
          GOTO      PRHO5000
.
PRHON768  MOVE      MHHNHVER,VARIABLE
          GOTO      PRHO5000
.
PRHON772  MOVE      MHHNLD3A,VARIABLE
          GOTO      PRHO5000
.
PRHON776  MATCH     SP70,MHHNRDAT
          GOTO      PRHO5000 IF EQUAL
          UNPACK    MHHNRDAT,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.
.------ Next Stationery Code Type 19------
.
PRHON777  CALL      SLPC0000           * Save ibalpcaf file variables
.
          UNPACK    IBDTTXFL,DIM8,DIM6
          MOVE      IBLPURNO,URNUMBER
          MOVE      IBLPVISN,ADMISSNO
          MOVE      IBLPSKEY,SUBSYSKY
          MOVE      IBLPPRNT,SCHDPRNT
          MOVE      IBLPCOPY,SCHDCOPY
          MOVE      STATNCOD,SVSTNCOD
          MOVE      DIM6,STATNCOD
          PACK      LABELTYP,IBLPLAPR,IBLPLASC
          MOVE      IBLPFRE1,FREETXT1
          MOVE      IBLPFRE2,FREETXT2
          MOVE      IBLPFRE3,FREETXT3
          MOVE      IBLPFRE4,FREETXT4
          MOVE      IBLPFRE5,FREETXT5
          MOVE      IBLPFRE6,FREETXT6
          MOVE      IBLPFRE7,FREETXT7
.
          CALL      ADDPRN00
.
          CALL      RLPC0000           * Restore ibalpcaf file variables
.
          MOVE      SVSTNCOD,STATNCOD
.
          GOTO      PRHO5000

.* ****** AN-SNAP Stationery Variables ****** Start of Change        Car 273181
.                                           * Episode Start Date
PRHON778  MATCH     SP70,PMUGSDAT
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMUGSDAT,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Episode End Date
PRHON779  MATCH     SP70,PMUGENDD
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMUGENDD,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Discharge from Program Date
PRHON780  MATCH     SP70,PMUGRDDT
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMUGRDDT,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Program Date
PRHON781  MATCH     SP70,PMUGRPDT
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMUGRPDT,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Accom Prior to Admission
PRHON782  PACK      TCODE,CATPYLC,SP70
          PACK      ACODE,PMAGACPA,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Final Destination
PRHON783  PACK      TCODE,CATPZLC,SP70
          PACK      ACODE,PMAGACPD,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Prosthetic Phase of Care During Episode
PRHON784  MATCH     "1",PMAGAPPC
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Chronic Amnesiac
PRHON785  MATCH     "1",PMAGCAMN
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                      * Complication Interfering with Episode
PRHON786  PACK      TCODE,CATM2LC,SP70
          PACK      ACODE,PMAGCMP1,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Complication Interfering with Episode
PRHON787  PACK      TCODE,CATM2LC,SP70
          PACK      ACODE,PMAGCMP2,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Complication Interfering with Episode
PRHON788  PACK      TCODE,CATM2LC,SP70
          PACK      ACODE,PMAGCMP3,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Complication Interfering with Episode
PRHON789  PACK      TCODE,CATM2LC,SP70
          PACK      ACODE,PMAGCMP4,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Co-morbidity Interfering with Episode
PRHON790  PACK      TCODE,CATM1LC,SP70
          PACK      ACODE,PMAGCMR1,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Co-morbidity Interfering with Episode
PRHON791  PACK      TCODE,CATM1LC,SP70
          PACK      ACODE,PMAGCMR2,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Co-morbidity Interfering with Episode
PRHON792  PACK      TCODE,CATM1LC,SP70
          PACK      ACODE,PMAGCMR3,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                      * Co-morbidity Interfering with Episode
PRHON793  PACK      TCODE,CATM1LC,SP70
          PACK      ACODE,PMAGCMR4,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Discharge 6 min Walk Test
PRHON794  IF        PMAGD06M > 0
            PACK      VARIABLE,PMAGD06M
          ELSE
            PACK      VARIABLE,SP70
          ENDIF
          GOTO      PRHO5000
.                                           * Discharge 10 m Walk
PRHON795  PACK      VARIABLE,PMAGDWLK
          GOTO      PRHO5000
.                                           * Date of Relevant Acute Admission
PRHON796  MATCH     SP70,PMAGDADM
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDADM,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Assessment Date
PRHON797  MATCH     SP70,PMAGDART
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDART,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Date Clinically Ready for Rehab
PRHON798  MATCH     SP70,PMAGDCRC
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDCRC,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Date Clinically Ready for Discharge
PRHON799  MATCH     SP70,PMAGDCRD
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDCRD,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Date Emerged from PTA
PRHON800  MATCH     SP70,PMAGDEFP
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDEFP,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Date First Prosthetic Fitting
PRHON801  MATCH     SP70,PMAGDFPF
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDFPF,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Date Relevant Acute Episode
PRHON802  MATCH     SP70,PMAGDRAE
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDRAE,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Date ready for Casting
PRHON803  MATCH     SP70,PMAGDRCA
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGDRCA,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Discharge Timed Get Up and Go
PRHON804  PACK      VARIABLE,PMAGDUGO
          GOTO      PRHO5000
.                                           * Delayed Wound Care
PRHON805  MATCH     "1",PMAGDWPC
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Episode End ASIA
PRHON806  PACK      TCODE,CATRALC,SP70
          PACK      ACODE,PMAGEEAS,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Episode End Spinal Cord Injury
PRHON807  PACK      TCODE,CATRBLC,SP70
          PACK      ACODE,PMAGEESC,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Existing Co-morbidity
PRHON808  PACK      VARIABLE,PMAGEMOR
          GOTO      PRHO5000
.                                           * Employment Status after Discharge
PRHON809  PACK      TCODE,CATKDUC,SP70
          PACK      ACODE,PMAGEMST,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Employment Status prior to Episode
PRHON810  PACK      TCODE,CATKDUC,SP70
          PACK      ACODE,PMAGEMST,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Episode Start ASIA
PRHON811  PACK      TCODE,CATRALC,SP70
          PACK      ACODE,PMAGESAS,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Episode Start Spinal Cord Injury
PRHON812  PACK      TCODE,CATRBLC,SP70
          PACK      ACODE,PMAGESSC,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Fallen in Last 12 Months
PRHON813  MATCH     "1",PMAGF12M
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * 1st Admission for this Impairment
PRHON814  MATCH     "1",PMAGFADM
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Frailty
PRHON815  PACK      TCODE,CATRGLC,SP70
          PACK      ACODE,PMAGFRAI,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Impairment Code
PRHON816  PACK      KEY7,PMAGICDE,SP70
          CALL      RDPMIMP1
          BRANCH    OVRCD,PRHO5000
          PACK      VARIABLE,PMIMDESC
          GOTO      PRHO5000
.                                           * Interim Destination
PRHON817  PACK      TCODE,CATPZLC,SP70
          PACK      ACODE,PMAGIDES,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Carer Status prior to Impairment
PRHON818  PACK      TCODE,CATARLC,SP70
          PACK      ACODE,PMAGLSPA,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Carer Status post Discharge
PRHON819  PACK      TCODE,CATASLC,SP70
          PACK      ACODE,PMAGLSPD,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Mode of Episode End
PRHON820  PACK      TCODE,CATPWLC,SP70
          PACK      ACODE,PMAGMEEN,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Mode of Episode Start
PRHON821  PACK      TCODE,CATPXLC,SP70
          PACK      ACODE,PMAGMEST,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Phase of Amputee Care at Ep. End
PRHON822  PACK      TCODE,CATRDLC,SP70
          PACK      ACODE,PMAGPACE,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Phase of Amputee Care at Ep. Start
PRHON823  PACK      TCODE,CATRDLC,SP70
          PACK      ACODE,PMAGPACS,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Participation In Therapy from Day 1
PRHON824  MATCH     "1",PMAGPITD
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Pre-prosthetic Phase of Care
PRHON825  MATCH     "1",PMAGPPPC
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Prosthetic
PRHON826  MATCH     "1",PMAGPROS
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Reason For Delay in Fitting
PRHON827  PACK      TCODE,CATRELC,SP70
          PACK      ACODE,PMAGRDIF,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Referral Date
PRHON828  MATCH     SP70,PMAGRFDT
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PMAGRFDT,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                            * Service Received Post - Allied Health Management
PRHON829  MATCH     "1",PMAGSRAA
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Case Management
PRHON830  MATCH     "1",PMAGSRAC
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Domestic
PRHON831  MATCH     "1",PMAGSRAD
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Goods and Equipment
PRHON832  MATCH     "1",PMAGSRAG
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Meals
PRHON833  MATCH     "1",PMAGSRAM
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Nursing
PRHON834  MATCH     "1",PMAGSRAN
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Personal Care
PRHON835  MATCH     "1",PMAGSRAP
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Social
PRHON836  MATCH     "1",PMAGSRAS
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Post - Transport Services
PRHON837  MATCH     "1",PMAGSRAT
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Allied Health Management
PRHON838  MATCH     "1",PMAGSRPA
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Case Management
PRHON839  MATCH     "1",PMAGSRPC
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Domestic
PRHON840  MATCH     "1",PMAGSRPD
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Goods and Equipment
PRHON841  MATCH     "1",PMAGSRPG
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Meals
PRHON842  MATCH     "1",PMAGSRPM
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Nursing
PRHON843  MATCH     "1",PMAGSRPN
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Personal Care
PRHON844  MATCH     "1",PMAGSRPP
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Social
PRHON845  MATCH     "1",PMAGSRPS
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                            * Service Received Pre - Transport Services
PRHON846  MATCH     "1",PMAGSRPT
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Time Since Onset of Condition
PRHON847  PACK      TCODE,CATTQLC,SP70
          PACK      ACODE,PMAGTOCC,SP70
          CALL      GTCOD000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Ventilator Dependant at Episode End
PRHON848  MATCH     "1",PMAGVDEE
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Weight Loss in last 12 Months
PRHON849  MATCH     "1",PMAGWL12
          IF        @EQUAL
            MOVE      "Yes",VARIABLE
          ELSE
            MOVE      "No",VARIABLE             * 1=Yes 0=No
          ENDIF
          GOTO      PRHO5000
.                                           * Admission FIM Date
PRHON850  CALL      RAFM0000
          BRANCH    EXIT,PRHO5000
.
          MATCH     SP70,PTFIDATE
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PTFIDATE,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Discharge FIM Date
PRHON851  CALL      RDFM0000
          BRANCH    EXIT,PRHO5000
.
          MATCH     SP70,PTFIDATE
          GOTO      PRHO5000 IF EQUAL
          UNPACK    PTFIDATE,CCENT,CYEAR,CMON,CDAY
          PACK      VARIABLE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR
          GOTO      PRHO5000
.                                           * Admission FIM Score for Visit
PRHON852  CALL      RAFM0000
          BRANCH    EXIT,PRHO5000
.
          MOVE      ZERO,FIMSCORE
          ASSIGN    PTFIEATS+PTFIGRMS+PTFIBTHS+FIMSCORE,FIMSCORE
          ASSIGN    PTFIUPBS+PTFILWBS+PTFITLTS+FIMSCORE,FIMSCORE
          ASSIGN    PTFIBLMS+PTFIBWMS+PTFITBDS+FIMSCORE,FIMSCORE
          ASSIGN    PTFITTLS+PTFITBTS+PTFILOCS+FIMSCORE,FIMSCORE
          ASSIGN    PTFISTRS+PTFICOMS+PTFIEXPS+FIMSCORE,FIMSCORE
          ASSIGN    PTFISCIS+PTFIPRBS+PTFIMEMS+FIMSCORE,FIMSCORE
          MOVE      FIMSCORE,FIMSCORD
          PACK      VARIABLE,FIMSCORD,SP70
          GOTO      PRHO5000
.                                           * Discharge FIM Score for Visit
PRHON853  CALL      RDFM0000
          BRANCH    EXIT,PRHO5000
.
          MOVE      ZERO,FIMSCORE
          ASSIGN    PTFIEATS+PTFIGRMS+PTFIBTHS+FIMSCORE,FIMSCORE
          ASSIGN    PTFIUPBS+PTFILWBS+PTFITLTS+FIMSCORE,FIMSCORE
          ASSIGN    PTFIBLMS+PTFIBWMS+PTFITBDS+FIMSCORE,FIMSCORE
          ASSIGN    PTFITTLS+PTFITBTS+PTFILOCS+FIMSCORE,FIMSCORE
          ASSIGN    PTFISTRS+PTFICOMS+PTFIEXPS+FIMSCORE,FIMSCORE
          ASSIGN    PTFISCIS+PTFIPRBS+PTFIMEMS+FIMSCORE,FIMSCORE
          MOVE      FIMSCORE,FIMSCORD
          PACK      VARIABLE,FIMSCORD,SP70
          GOTO      PRHO5000
.                                           * Total Rehab Suspension Days
PRHON854  MOVE      ZERO,TOTALSDS
          CALL      TRSU0000
          PACK      VARIABLE,TOTALSDS,SP70
          GOTO      PRHO5000
.                                           * Total Rehab Suspension Occurrrences
PRHON855  MOVE      ZERO,TOTALSOC
          MOVE      "1",TRHSUSOC
          CALL      TRSU0000
          PACK      VARIABLE,TOTALSOC,SP70
          GOTO      PRHO5000
.                                           * Reason For Interruption - No 1
PRHON856  PACK      TDESC,SP70
          MOVE      ONE,RINTINDC
          CALL      RINT0000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Reason For Interruption - No 2
PRHON857  PACK      TDESC,SP70
          MOVE      TWO,RINTINDC
          CALL      RINT0000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Reason For Interruption - No 3
PRHON858  PACK      TDESC,SP70
          MOVE      THREE,RINTINDC
          CALL      RINT0000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Reason For Interruption - No 4
PRHON859  PACK      TDESC,SP70
          MOVE      FOUR,RINTINDC
          CALL      RINT0000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.                                           * Reason For Interruption - No 5
PRHON860  PACK      TDESC,SP70
          MOVE      FIVE,RINTINDC
          CALL      RINT0000
          MOVE      TDESC,VARIABLE
          GOTO      PRHO5000
.     
.----- format patient sex long description ------     
.     
PRHON861  MOVE      PSEX,DSEXCHAR     
          CALL      SEXDSP00	  
          MOVE      DSEXLDES,VARIABLE        * Get sex long description	    
          GOTO      PRHO5000 
.
PRHON862  MOVE      PURNO,MBIRURNO
          CALL      MULBIR00                 * Get multlple birth details
          MOVE      MBIRTYOR,VARIABLE
          GOTO      PRHO5000 
.
PRHON863  PACK      VARIABLE,PMPXPFSN,SP70   * Preferred Surname
          GOTO      PRHO5000
.
PRHON864  PACK      VARIABLE,PMPXPFGN,SP70   * Preferred Given Name
          GOTO      PRHO5000
.
PRHON865  PACK      VARIABLE,PSNAME,SP70     * Pref Surname instead of Actual SN
          MATCH     "1",PTCNPFSN
          IF        @EQUAL
            MATCH     SP70,PMPXPFSN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFSN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      PRHO5000
.
PRHON866  PACK      VARIABLE,PGNAME,SP70     * Pref GN instead of Actual GN
          MATCH     "1",PTCNPFGN
          IF        @EQUAL
            MATCH     SP70,PMPXPFGN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFGN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      PRHO5000
.
PRHON867  PACK      VARIABLE,PTMASNAM,SP70   * Pref Surname instead of 40char SN
          MATCH     "1",PTCNPFSN
          IF        @EQUAL
            MATCH     SP70,PMPXPFSN
            IF        !@EQUAL & !@EOS
              PACK      VARIABLE,PMPXPFSN,SP70,SP10
            ENDIF
          ENDIF
          GOTO      PRHO5000
.
PRHO1860  PACK      VARIABLE,PMPXUCC4,SP70       * Identify gender
          GOTO      PRHO5000
.
PRHO1870  PACK      VARIABLE,SP70                * Identify gender long desc
          MOVE      SP70,PTCDLDES
          MATCH     SP70,PMPXUCC4
          IF        !@EQUAL
            MOVE      "Gi",DIM2
            PACK      KEY5,DIM2,PMPXUCC4,SP70
            CALL      RDCODE1
            IF        OVRCD=0
              MOVE      PTCDLDES,VARIABLE
            ENDIF
          ENDIF
          GOTO      PRHO5000
.
PRHO1880  PACK      VARIABLE,PMPXATF1,SP70,SP70  * Identify gender Free Text
          GOTO      PRHO5000
.
PRHO1890  PACK      VARIABLE,PMPXUCC5,SP70       * Identify pronoun
          GOTO      PRHO5000
.
PRHO1900  PACK      VARIABLE,SP70                * Identif pronoun long desc
          MOVE      SP70,PTCDLDES
          MATCH     SP70,PMPXUCC5
          IF        !@EQUAL
            MOVE      "Gp",DIM2
            PACK      KEY5,DIM2,PMPXUCC5,SP70
            CALL      RDCODE1
            IF        OVRCD=0
              MOVE      PTCDLDES,VARIABLE
            ENDIF
          ENDIF
          GOTO      PRHO5000
.
PRHO1910  PACK      VARIABLE,PMPXATF2,SP70,SP70  * Identify Pronoun Free Text
          GOTO      PRHO5000
.
.
.* ****** AN-SNAP Stationery Variables ****** End of Change (finally) Car 273181
.
. ------- Format the variable -------
.
PRHO5000  RESET     VARIABLE,IBDTPLEN
          LENSET    VARIABLE
          RESET     VARIABLE
          PRINT     *IBDTCOL,*+,VARIABLE;
          GOTO      PRHON100                 * Read next record
.
. ------- Formatting for Form fields and right justified variables -------
.
PRHO6000  COMPARE   ZERO,PRNTSTRT          * Don't bump if printing full length
          GOTO      PRHO7000 IF EQUAL
.
          BUMP      VARIABLE,PRNTSTRT      * bump to starting position
.
. ------- Print the variable -------
.
PRHO7000  PRINT     *IBDTCOL,*+,VARIABLE;
          GOTO      PRHON100                 * Read next record
.
.------ end of MR10 reached ------
.
PRHO8000  MOVE      FALSE,EXIT
.
.------ print new-lines until the end of page is reached ------
.
PRHO9000  COMPARE   CURRROW,IBTHLENG          * test page length
          GOTO      PRHO9999 IF EQUAL
.
          PRINT     *N;
          ADD       ONE,CURRROW
          GOTO      PRHO9000
.
PRHO9999  MOVE      FALSE,EXIT               * Set exit flag
          PACK      SAVFIL8,SPLFILE,SP70     * Used to save the spool file
          CALL      CLSPRINT                 * close the spool file
          RETURN                             * Finished
.
.*******************************************************************************
.* Find Admission FIM for the admission                               Car 273181
.*******************************************************************************

RAFM0000  PACK      KEY24,DPVIBILL,SP70
          CALL      RSPTFIM1
RAFM0100  CALL      RKPTFIM1
          BRANCH    OVRCD,RAFM9998
.
          MATCH     PTFIVISN,DPVIBILL
          GOTO      RAFM9998 IF NOT EQUAL
.
          MATCH     "1",PTFIDELT
          GOTO      RAFM0100 IF EQUAL
.
          MATCH     "A",PTFITYPE
          IF        @EQUAL
            GOTO      RAFM9990
          ENDIF
.
          GOTO      RAFM9998
.
RAFM9990  MOVE      ZERO,EXIT
          GOTO      RAFM9999
.
RAFM9998  MOVE      ONE,EXIT
.
RAFM9999  RETURN
.
.*******************************************************************************
.* Find Discharge FIM for the admission                               Car 273181
.*******************************************************************************

RDFM0000  PACK      KEY24,DPVIBILL,Z70
          CALL      RSPTFIM1
RDFM0100  CALL      RPPTFIM1
          BRANCH    OVRCD,RDFM9998
.
          MATCH     PTFIVISN,DPVIBILL
          GOTO      RDFM9998 IF NOT EQUAL
.
          MATCH     "1",PTFIDELT
          GOTO      RDFM0100 IF EQUAL
.
          MATCH     "D",PTFITYPE
          IF        @EQUAL
            GOTO      RDFM9990
          ENDIF
.
          GOTO      RDFM0100
.
RDFM9990  MOVE      ZERO,EXIT
          GOTO      RDFM9999
.
RDFM9998  MOVE      ONE,EXIT
.
RDFM9999  RETURN
.
.*******************************************************************************
.* Calculate Total Rehabilitation Suspension Days & Occurrences       Car 273181
.*******************************************************************************
TRSU0000  PACK      KEY36,PMUGURNO,PMUGATYP,PMUGCLAM,PMUGFUND,PMUGTABT:
                          PMUGEDAT,SP70
          CALL      RSPMPIT1
TRSU1000  CALL      RKPMPIT1
          BRANCH    OVRCD,TRSU9999
.
          PACK      KEY31,PMPIURNO,PMPIATYP,PMPICLAM,PMPIFUND,PMPITABT:
                          PMPIEDAT,SP70
          MATCH     KEY31,KEY36
          GOTO      TRSU9999 IF NOT EQUAL
.
          MATCH     "1",PMPIDELT
          GOTO      TRSU1000 IF EQUAL
.
          ADD       ONE,TOTALSOC                 * Suspension Occurrences
          MATCH     "1",TRHSUSOC
          GOTO      TRSU1000 IF EQUAL
.
          MOVE      PMPIFDAT,FROMDATE
          MATCH     SP70,PMPITDAT
          IF        @EQUAL
            MOVE      CURRDAT8,TODATE
          ELSE
            MOVE      PMPITDAT,TODATE
          ENDIF
.
          MOVE      ZERO,CALCDAYS
          DAYSEP    FROMDATE,TODATE,CALCDAYS
          ADD       CALCDAYS,TOTALSDS            * Suspension Days
          GOTO      TRSU1000
.
TRSU9999  RETURN
.
.*******************************************************************************
.* Display Last Five Interruptions (may or may not all exist)         Car 273181
.*******************************************************************************
RINT0000  MOVE      ZERO,RINTCNTR
          PACK      KEY36,PMUGURNO,PMUGATYP,PMUGCLAM,PMUGFUND,PMUGTABT:
                          PMUGEDAT,Z70
          CALL      RSPMPIT1
RINT1000  CALL      RPPMPIT1
          BRANCH    OVRCD,RINT9999
.
          PACK      KEY31,PMPIURNO,PMPIATYP,PMPICLAM,PMPIFUND,PMPITABT:
                          PMPIEDAT,SP70
          MATCH     KEY31,KEY36
          GOTO      RINT9999 IF NOT EQUAL
.
          MATCH     "1",PMPIDELT
          GOTO      RINT1000 IF EQUAL
.
          ADD       ONE,RINTCNTR
          COMPARE   RINTINDC,RINTINDC
          GOTO      RINT1000 IF NOT EQUAL
.
          PACK      TCODE,CATRZUC,SP70
          PACK      ACODE,PMPIRINT,SP70
          CALL      GTCOD000
.
RINT9999  RETURN
.
.
...............................................................................
