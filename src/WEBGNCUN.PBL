.
.     WEBGNCUN : Generate Clinic Unit Number
.
.              This include generates a Clinic Unit Number to be
.              printed on the MR10. If one doesn't exist spaces are printed.
.              The code comes from PATGNCUN.PBL, which has been modified for
.              use with the web server programs.
.
.     MODIFICATIONS:   V6.05.00 29/07/98 Katie Nelson
.                               Modified PATGNCUN.PBL to be WEBGNCUN.PBL
+
GCUN0000  IF       CLUNTNO<>1
            GOTO     GCUN9999
          ENDIF 
.
          MATCH    SP3,AWARD
          GOTO     GCUN0100 IF NOT EQUAL
.
          PACK     KEY9,ADOCTA,WWARD
          CALL     RDCUNO1
          BRANCH   OVRCD,GCUN0200
          GOTO     GCUN0400
.
GCUN0100  PACK     KEY9,ADOCTA,AWARD
          CALL     RDCUNO1
          BRANCH   OVRCD,GCUN0200
          GOTO     GCUN0400
.
GCUN0200  PACK     KEY9,ADOCTA,SP3
          CALL     RDCUNO1
          BRANCH   OVRCD,GCUN0300
          GOTO     GCUN0400
.
GCUN0300  MOVE     "Warning - Clinic Unit Number Doesn't Exist",WEBTITLE
          CALL     WEBERR00
          MOVE     ONE,EXIT 
.
          MOVE     SP3,AUSR6
          GOTO     GCUN9999
.
GCUN0400  MOVE     CUNNUMB,AUSR6
.
GCUN9999  RETURN

