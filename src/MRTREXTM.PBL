. *----------------------------------------------------------------------
. * Include Name  :   MRTREXTM.INC
. *
. * Function      :   CGI variables for MRTREXFD - mrtrexaf.dat
. *
. * Includes Needed : 
. *
. * Mods          :   
. *       V12.00.01 19/08/2025  Bella Turco    TSK 0961695
. *                 New tag MRRX4900 for displaying Cat G "Sex" dropdown
. *       V10.02.01 08/07/2011  Ebon Clements  CAR 240724
. *                 Mods for MRT hospital/location - Added hospital to 
. *                 location key
. *       V9.08.01  08/05/2007  Mike Laming   CAR 137125 HDP 2007
. *                 Add DRG Version to Key fields for reads to PATDGWaf
. *                   V9.04.01 30/08/2004 Jill Habasque CAR 54036    
. *                            Added hospital code
. *                   V9.03.01 09/12/2003 Sylvek Litewka   CAR 20222
. *                            Modified reads if ICD files to use new IO
. *                            routines RDPTICD1 and RDPTICO1 
. *                   V9.02.03 Raghunandan Surve
. *                            Changed for Block Number and DRG range
. *                   V9.02.02 Ebon Clements         
. *                            Fixed display of MRRXAAGE
. *                   V9.02.01 J.Tan
. *                            Mods to age at admission
. *                   V5.10.00 Ebon Clements
. *                            Created Include
. *----------------------------------------------------------------------
.
.------------------------------------------------------------------------
.   Clear Parameters for research extract file
.------------------------------------------------------------------------
CPMRRX00  MOVE      Z70,MRTRE001
          MOVE      Z70,MRTRE002
          MOVE      Z70,MRTRE003
          MOVE      Z70,MRTRE004
          MOVE      Z70,MRTRE005
          MOVE      Z70,MRTRE006
          MOVE      Z70,MRTRE007
          MOVE      Z70,MRTRE008
          MOVE      Z70,MRTRE009
          MOVE      Z70,MRTRE010
          MOVE      ZERO,MRTRE011
          MOVE      Z70,MRTRE012
          MOVE      Z70,MRTRE013
          MOVE      Z70,MRTRE014
          MOVE      Z70,MRTRE015
          MOVE      Z70,MRTRE016
          MOVE      Z70,MRTRE017
          MOVE      Z70,MRTRE018
          MOVE      Z70,MRTRE019
          MOVE      Z70,MRTRE020
          MOVE      Z70,MRTRE021
          MOVE      Z70,MRTRE022
          MOVE      Z70,MRTRE023
          MOVE      Z70,MRTRE024
          MOVE      Z70,MRTRE025
          MOVE      Z70,MRTRE026
          MOVE      Z70,MRTRE027
          MOVE      Z70,MRTRE028
          MOVE      Z70,MRTRE029
          MOVE      Z70,MRTRE030
          MOVE      Z70,MRTRE031
          MOVE      Z70,MRTRE032
          MOVE      Z70,MRTRE033
          MOVE      ZERO,MRTRE034
          MOVE      Z70,MRTRE035
          MOVE      Z70,MRTRE036
          MOVE      Z70,MRTRE037
          MOVE      Z70,MRTRE038
          MOVE      Z70,MRTRE039
          MOVE      Z70,MRTRE040
          MOVE      Z70,MRTRE041
          MOVE      Z70,MRTRE042
          MOVE      Z70,MRTRE043
          MOVE      Z70,MRTRE044
          MOVE      Z70,MRTRE045
          MOVE      Z70,MRTRE046
          MOVE      Z70,MRTRE047
          MOVE      Z70,MRTRE048
.
CPMRRX99  RETURN
.------------------------------------------------------------
. Add waiting list Extension Fields
.------------------------------------------------------------
MRRX0000  BRANCH    FLDITMNO,MRRX0100,MRRX0200,MRRX0300,MRRX0400,MRRX0500:
                             MRRX0600,MRRX0700,MRRX0800,MRRX0900,MRRX1000:
                             MRRX1100,MRRX1200,MRRX1300,MRRX1400,MRRX1500:
                             MRRX1600,MRRX1700,MRRX1800,MRRX1900,MRRX2000:
                             MRRX2100,MRRX2200,MRRX2300,MRRX2400,MRRX2500:
                             MRRX2600,MRRX2700,MRRX2800,MRRX2900,MRRX3000:
                             MRRX3100,MRRX3200,MRRX3300,MRRX3400,MRRX3500:
                             MRRX3600,MRRX3700,MRRX3800,MRRX3900,MRRX4000:
                             MRRX4100,MRRX4200,MRRX4300,MRRX4400,MRRX4500:
                             MRRX4600,MRRX4700,MRRX4800,MRRX4900
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      MRRX9999
.
MRRX0100  WRITE     HTMLFILE;MRRXEXID;
          GOTO      MRRX9999
.
MRRX0200  WRITE     HTMLFILE;MRRXDESC;
          GOTO      MRRX9999
.
MRRX0300  MATCH     MRRXDIFR,SP70
          GOTO      MRRX9999 IF EQUAL
          UNPACK    MRRXDIFR,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MRRX9999
.
MRRX0400  MATCH     MRRXDITO,SP70
          GOTO      MRRX9999 IF EQUAL
          UNPACK    MRRXDITO,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MRRX9999
.
MRRX0500  MATCH     MRRXVIFR,SP70
          GOTO      MRRX9999 IF EQUAL
          UNPACK    MRRXVIFR,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MRRX9999
.
MRRX0600  MATCH     MRRXVITO,SP70
          GOTO      MRRX9999 IF EQUAL
          UNPACK    MRRXVITO,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MRRX9999
.
MRRX0700  MOVE      "AC",CATEGORY
          MOVE      MRRXUNIT,CODE
          CALL      CODITM00
          GOTO      MRRX9999
.
MRRX0800  WRITE     HTMLFILE;MRRXWARD;
          GOTO      MRRX9999
.
MRRX0900  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX0910
          PACK      KEY6,MRRXDOCT
          CALL      RDDOCT1
          BRANCH    OVRCD,MRRX9999
          MOVE      DTITL,FMTTITLE
          MOVE      DGNAME,FMTGNAME
          MOVE      DSNAME,FMTSNAME
          CALL      DOCNM000
          WRITE     HTMLFILE;DOCFNAME;
          GOTO      MRRX9999
.
MRRX0910  WRITE     HTMLFILE;MRRXDOCT;
          GOTO      MRRX9999
.
MRRX1000  WRITE     HTMLFILE;MRRXDECD;
          GOTO      MRRX9999
.
MRRX1100  WRITE     HTMLFILE;MRRXNOEX;
          GOTO      MRRX9999
.
MRRX1200  WRITE     HTMLFILE;MRRXPROG;
          GOTO      MRRX9999
.
MRRX1300  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX1310
          PACK      KEY9,MRRXDIA1,SP30
          CALL      RDPTICD1                * Read ICD10 (current date)
          IF        OVRCD=1
            CALL      RD10T9D1              * Read ICD9
            BRANCH    OVRCD,MRRX9999
          ENDIF
          WRITE     HTMLFILE;DDESC;
          GOTO      MRRX9999
.
MRRX1310  WRITE     HTMLFILE;MRRXDIA1;
          GOTO      MRRX9999
.
MRRX1400  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX1410
          PACK      KEY9,MRRXDIA2,SP30
          CALL      RDPTICD1                * Read ICD10 (current date)
          IF        OVRCD=1
            CALL      RD10T9D1              * Read ICD9
            BRANCH    OVRCD,MRRX9999
          ENDIF
          WRITE     HTMLFILE;DDESC;
          GOTO      MRRX9999
.
MRRX1410  WRITE     HTMLFILE;MRRXDIA2;
          GOTO      MRRX9999
.
MRRX1500  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX1510
          PACK      KEY9,MRRXDIA3,SP30
          CALL      RDPTICD1                * Read ICD10 (current date) 
          IF        OVRCD=1
            CALL      RD10T9D1              * Read ICD9
            BRANCH    OVRCD,MRRX9999
          ENDIF
          WRITE     HTMLFILE;DDESC;
          GOTO      MRRX9999
.
MRRX1510  WRITE     HTMLFILE;MRRXDIA3;
          GOTO      MRRX9999
.
MRRX1600  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX1610
          PACK      KEY9,MRRXPRO1,SP30
          CALL      RDPTICO1                * Read ICD10 (current date) 
          IF        OVRCD=1
            CALL      RD10T9O1              * Read ICD9
            BRANCH    OVRCD,MRRX9999
          ENDIF
          WRITE     HTMLFILE;ODESC;
          GOTO      MRRX9999
.
MRRX1610  WRITE     HTMLFILE;MRRXPRO1;
          GOTO      MRRX9999
.
MRRX1700  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX1710
          PACK      KEY9,MRRXPRO2,SP30
          CALL      RDPTICO1                * Read ICD10 (current date) 
          IF        OVRCD=1
            CALL      RD10T9O1              * Read ICD9
            BRANCH    OVRCD,MRRX9999
          ENDIF
          WRITE     HTMLFILE;ODESC;
          GOTO      MRRX9999
.
MRRX1710  WRITE     HTMLFILE;MRRXPRO2;
          GOTO      MRRX9999
.
MRRX1800  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX1810
          PACK      KEY9,MRRXPRO3,SP30
          CALL      RDPTICO1                * Read ICD10 (current date)
          IF        OVRCD=1
            CALL      RD10T9O1              * Read ICD9
            BRANCH    OVRCD,MRRX9999
          ENDIF
          WRITE     HTMLFILE;ODESC;
          GOTO      MRRX9999
.
MRRX1810  WRITE     HTMLFILE;MRRXPRO3;
          GOTO      MRRX9999
.
MRRX1900  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX1910
          PACK      KEY4,MRRXPDRG,SP30
          MOVE      "999",KEY3
          PACK      KEY7,KEY4,KEY3,SP10                               *I-137125
          CALL      RSPTDGW1                * find latest description *C-137125
          CALL      RPPTDGW1
          BRANCH    OVRCD,MRRX9999
          MATCH     PTDWDRGC,KEY4           * correct DRG code ?      *I-137125
          IF        @EQUAL
            WRITE     HTMLFILE;PTDWDESC;
          ENDIF
          GOTO      MRRX9999
.
MRRX1910  WRITE     HTMLFILE;MRRXPDRG;
          GOTO      MRRX9999
.
MRRX2000  WRITE     HTMLFILE;MRRXDISO;
          GOTO      MRRX9999
.
MRRX2100  WRITE     HTMLFILE;MRRXURFR;
          GOTO      MRRX9999
.
MRRX2200  WRITE     HTMLFILE;MRRXURTO;
          GOTO      MRRX9999
.
MRRX2300  WRITE     HTMLFILE;MRRXDTFR;
          GOTO      MRRX9999
.
MRRX2400  WRITE     HTMLFILE;MRRXDTTO;
          GOTO      MRRX9999
.
MRRX2500  WRITE     HTMLFILE;MRRXHLFR;
          GOTO      MRRX9999
.
MRRX2600  WRITE     HTMLFILE;MRRXHLTO;
          GOTO      MRRX9999
.
MRRX2700  WRITE     HTMLFILE;MRRXSMDY;
          GOTO      MRRX9999
.
MRRX2800  WRITE     HTMLFILE;MRRXCOFR;
          GOTO      MRRX9999
.
MRRX2900  WRITE     HTMLFILE;MRRXCOTO;
          GOTO      MRRX9999
.
MRRX3000  MOVE      "VN",CATEGORY
          MOVE      MRRXSNAG,CODE
          CALL      CODITM00
          GOTO      MRRX9999
.
MRRX3100  MATCH     MRRXCDFR,SP70
          GOTO      MRRX9999 IF EQUAL
          UNPACK    MRRXCDFR,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MRRX9999
. 
MRRX3200  MATCH     MRRXCDTO,SP70
          GOTO      MRRX9999 IF EQUAL
          UNPACK    MRRXCDTO,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MRRX9999
.
MRRX3300  WRITE     HTMLFILE;MRRXINCM;
          GOTO      MRRX9999
.
MRRX3400  IF        MRRXAAGE = 0 
            GOTO      MRRX9999            * Do not display zero
          ELSE
            WRITE     HTMLFILE;MRRXAAGE;
          ENDIF
          GOTO      MRRX9999
.
MRRX3500  WRITE     HTMLFILE;MRRXGEND;
          GOTO      MRRX9999
.
MRRX3600  WRITE     HTMLFILE;MRRXPOST;
          GOTO      MRRX9999
.
MRRX3700  WRITE     HTMLFILE;MRRXCOB;
          GOTO      MRRX9999
.
MRRX3800  WRITE     HTMLFILE;MRRXINVT;
          GOTO      MRRX9999
.
MRRX3900  WRITE     HTMLFILE;MRRXIPRI;
          GOTO      MRRX9999
.
MRRX4000  WRITE     HTMLFILE;MRRXINV1;
          GOTO      MRRX9999
.
MRRX4100  WRITE     HTMLFILE;MRRXINV2;
          GOTO      MRRX9999
.
MRRX4200  WRITE     HTMLFILE;MRRXBLFR;
          GOTO      MRRX9999
.
MRRX4300  WRITE     HTMLFILE;MRRXBLTO;
          GOTO      MRRX9999
.
MRRX4400  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX4410
          PACK      KEY4,MRRXDGFR,SP30
          MOVE      "999",KEY3                                        *I-137125
          PACK      KEY7,KEY4,KEY3,SP10                               *I-137125
          CALL      RSPTDGW1                * find latest description *C-137125
          CALL      RPPTDGW1
          BRANCH    OVRCD,MRRX9999
          MATCH     PTDWDRGC,KEY4           * correct DRG code ?      *I-137125
          IF        @EQUAL
            WRITE     HTMLFILE;PTDWDESC;
          ENDIF
          GOTO      MRRX9999
.
MRRX4410  WRITE     HTMLFILE;MRRXDGFR;
          GOTO      MRRX9999
.
MRRX4500  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX4510
          PACK      KEY4,MRRXDGTO,SP30
          MOVE      "999",KEY3                                        *I-137125
          PACK      KEY7,KEY4,KEY3,SP10                               *I-137125
          CALL      RSPTDGW1                * find latest description *C-137125
          CALL      RPPTDGW1
          BRANCH    OVRCD,MRRX9999
          MATCH     PTDWDRGC,KEY4           * correct DRG code ?      *I-137125
          IF        @EQUAL
            WRITE     HTMLFILE;PTDWDESC;
          ENDIF
          GOTO      MRRX9999
.
MRRX4510  WRITE     HTMLFILE;MRRXDGTO;
          GOTO      MRRX9999
.
MRRX4600  UNPACK    DIM127,ANS,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MRRX4610
.
          WRITE     HTMLFILE;MRRXHOSP;
          GOTO      MRRX9999
.
MRRX4610  MOVE      MRRXHOSP,DIM3
          CALL      HSLI0000
          GOTO      MRRX9999
.
MRRX4700  MOVE      MRRXHOSF,DIM3
          CALL      HSLI0000
          GOTO      MRRX9999
.
MRRX4800  MOVE      MRRXHOST,DIM3
          CALL      HSLI0000
          GOTO      MRRX9999
.
MRRX4900  MOVE      "G ",CATEGORY       * Gender/Sex Category G
          PACK      CODE,SP70
          CALL      CODITM00
          GOTO      MRRX9999
.
MRRX9999  RETURN
.
.------------------------------------------------------------
.   Set Parameters for research extract file
.------------------------------------------------------------
SPMRRX00  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPMRRX01,SPMRRX02,SPMRRX03,SPMRRX04,SPMRRX05:
                       SPMRRX06,SPMRRX07,SPMRRX08,SPMRRX09,SPMRRX10:
                       SPMRRX11,SPMRRX12,SPMRRX13,SPMRRX14,SPMRRX15:
                       SPMRRX16,SPMRRX17,SPMRRX18,SPMRRX19,SPMRRX20:
                       SPMRRX21,SPMRRX22,SPMRRX23,SPMRRX24,SPMRRX25:
                       SPMRRX26,SPMRRX27,SPMRRX28,SPMRRX29,SPMRRX30:
                       SPMRRX31,SPMRRX32,SPMRRX33,SPMRRX34,SPMRRX35:
                       SPMRRX36,SPMRRX37,SPMRRX38,SPMRRX39,SPMRRX40:
                       SPMRRX41,SPMRRX42,SPMRRX43,SPMRRX44,SPMRRX45:
                       SPMRRX46,SPMRRX47,SPMRRX48
.
          MOVE      ONE,EXIT
          GOTO      SPMRRX99
.
SPMRRX01  SQUEEZE   QRYDATA
          MOVE      QRYDATA,MRTRE001
          PACK      MRTRE001,MRTRE001,SP70
          GOTO      SPMRRX99
.
SPMRRX02  MOVE      QRYDATA,MRTRE002
          PACK      MRTRE002,MRTRE002,SP70
          GOTO      SPMRRX99
.
SPMRRX03  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          GOTO      SPMRRX99 IF EQUAL 
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      MRTRE003,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRRX99 
.
SPMRRX04  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          GOTO      SPMRRX99 IF EQUAL 
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      MRTRE004,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRRX99 
.
SPMRRX05  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          GOTO      SPMRRX99 IF EQUAL 
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      MRTRE005,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRRX99 
.
SPMRRX06  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          GOTO      SPMRRX99 IF EQUAL 
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      MRTRE006,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRRX99 
.
SPMRRX07  MOVE      QRYDATA,MRTRE007
          GOTO      SPMRRX99
.
SPMRRX08  MOVE      QRYDATA,MRTRE008
          GOTO      SPMRRX99
.
SPMRRX09  MOVE      QRYDATA,MRTRE009
          GOTO      SPMRRX99
.
SPMRRX10  MOVE      QRYDATA,MRTRE010
          GOTO      SPMRRX99
.
SPMRRX11  MOVE      QRYDATA,MRTRE011
          GOTO      SPMRRX99
.
SPMRRX12  MOVE      QRYDATA,MRTRE012
          GOTO      SPMRRX99
.
SPMRRX13  MOVE      QRYDATA,MRTRE013
          GOTO      SPMRRX99
.
SPMRRX14  MOVE      QRYDATA,MRTRE014
          GOTO      SPMRRX99
.
SPMRRX15  MOVE      QRYDATA,MRTRE015
          GOTO      SPMRRX99
.
SPMRRX16  MOVE      QRYDATA,MRTRE016
          GOTO      SPMRRX99
.
SPMRRX17  MOVE      QRYDATA,MRTRE017
          GOTO      SPMRRX99
.
SPMRRX18  MOVE      QRYDATA,MRTRE018
          GOTO      SPMRRX99
.
SPMRRX19  MOVE      QRYDATA,MRTRE019
          GOTO      SPMRRX99
.
SPMRRX20  MOVE      QRYDATA,MRTRE020
          GOTO      SPMRRX99
.
SPMRRX21  MOVE      QRYDATA,MRTRE021
          GOTO      SPMRRX99
.
SPMRRX22  MOVE      QRYDATA,MRTRE022
          GOTO      SPMRRX99
.
SPMRRX23  MOVE      QRYDATA,MRTRE023
          GOTO      SPMRRX99
.
SPMRRX24  MOVE      QRYDATA,MRTRE024
          GOTO      SPMRRX99
.
SPMRRX25  MOVE      QRYDATA,MRTRE025
          GOTO      SPMRRX99
.
SPMRRX26  MOVE      QRYDATA,MRTRE026
          GOTO      SPMRRX99
.
SPMRRX27  MOVE      QRYDATA,MRTRE027
          GOTO      SPMRRX99
.
SPMRRX28  MOVE      QRYDATA,MRTRE028
          GOTO      SPMRRX99
.
SPMRRX29  MOVE      QRYDATA,MRTRE029
          GOTO      SPMRRX99
.
SPMRRX30  MOVE      QRYDATA,MRTRE030
          GOTO      SPMRRX99
.
SPMRRX31  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          GOTO      SPMRRX99 IF EQUAL
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      MRTRE031,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRRX99
.
SPMRRX32  PACK      QRYDATA,QRYDATA,SP70
          MATCH     SP70,QRYDATA
          GOTO      SPMRRX99 IF EQUAL
          UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      MRTRE032,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRRX99
.
SPMRRX33  MOVE      QRYDATA,MRTRE033
          GOTO      SPMRRX99
.
SPMRRX34  MOVE      ZERO,MRTRE034
          SQUEEZE   QRYDATA
          MOVE      QRYDATA,MRTRE034
          GOTO      SPMRRX99
.
SPMRRX35  MOVE      QRYDATA,MRTRE035
          GOTO      SPMRRX99
.
SPMRRX36  MOVE      QRYDATA,MRTRE036
          GOTO      SPMRRX99
.
SPMRRX37  MOVE      QRYDATA,MRTRE037
          GOTO      SPMRRX99
.
SPMRRX38  MOVE      QRYDATA,MRTRE038
          GOTO      SPMRRX99
.
SPMRRX39  MOVE      QRYDATA,MRTRE039
          GOTO      SPMRRX99
.
SPMRRX40  MOVE      QRYDATA,MRTRE040
          GOTO      SPMRRX99
.
SPMRRX41  MOVE      QRYDATA,MRTRE041
          GOTO      SPMRRX99
.
SPMRRX42  MOVE      QRYDATA,MRTRE042
          GOTO      SPMRRX99
.
SPMRRX43  MOVE      QRYDATA,MRTRE043
          GOTO      SPMRRX99
.
SPMRRX44  MOVE      QRYDATA,MRTRE044
          GOTO      SPMRRX99
.
SPMRRX45  MOVE      QRYDATA,MRTRE045
          GOTO      SPMRRX99
.
SPMRRX46  MOVE      QRYDATA,MRTRE046
          GOTO      SPMRRX99
.
SPMRRX47  MOVE      QRYDATA,MRTRE047
          GOTO      SPMRRX99
.
SPMRRX48  MOVE      QRYDATA,MRTRE048
          GOTO      SPMRRX99
.
SPMRRX99  RETURN
.------------------------------------------------------------
.  Update research extract file
.------------------------------------------------------------
MVMRRX00  MATCH     MRTRE001,Z70
          IF        !@EQUAL
            MOVE      MRTRE001,MRRXEXID
          ENDIF
.
          MATCH     MRTRE002,Z70
          IF        !@EQUAL
            MOVE      MRTRE002,MRRXDESC
          ENDIF
.
          MATCH     Z70,MRTRE003
          IF        @EQUAL
            MOVE      SP70,MRRXDIFR
          ELSE
            MOVE      MRTRE003,MRRXDIFR
          ENDIF
.
          MATCH     Z70,MRTRE004
          IF        @EQUAL
            MOVE      SP70,MRRXDITO
          ELSE
            MOVE      MRTRE004,MRRXDITO
          ENDIF
.
          MATCH     Z70,MRTRE005
          IF        @EQUAL
            MOVE      SP70,MRRXVIFR
          ELSE
            MOVE      MRTRE005,MRRXVIFR
          ENDIF
.
          MATCH     Z70,MRTRE006
          IF        @EQUAL
            MOVE      SP70,MRRXVITO
          ELSE
            MOVE      MRTRE006,MRRXVITO
          ENDIF
.
          MATCH     MRTRE007,Z70
          IF        !@EQUAL
            MOVE      MRTRE007,MRRXUNIT
          ENDIF
.
          MATCH     MRTRE008,Z70
          IF        !@EQUAL
            MOVE      MRTRE008,MRRXWARD
          ENDIF
.
          MATCH     MRTRE009,Z70
          IF        !@EQUAL
            MOVE      MRTRE009,MRRXDOCT
          ENDIF
.
          MATCH     MRTRE010,Z70
          IF        !@EQUAL
            MOVE      MRTRE010,MRRXDECD
          ELSE
            MOVE      ZERO,MRRXDECD
          ENDIF
.
          COMPARE   MRTRE011,ZERO
          IF        !@EQUAL
            MOVE      MRTRE011,MRRXNOEX
          ENDIF
.
          MATCH     MRTRE012,Z70
          IF        !@EQUAL
            MOVE      MRTRE012,MRRXPROG
          ELSE
            MOVE      ZERO,MRRXPROG
          ENDIF
.
          MATCH     MRTRE013,Z70
          IF        !@EQUAL
            MOVE      MRTRE013,MRRXDIA1
          ENDIF
.
          MATCH     MRTRE014,Z70
          IF        !@EQUAL
            MOVE      MRTRE014,MRRXDIA2
          ENDIF
.
          MATCH     MRTRE015,Z70
          IF        !@EQUAL
            MOVE      MRTRE015,MRRXDIA3
          ENDIF
.
          MATCH     MRTRE016,Z70
          IF        !@EQUAL
            MOVE      MRTRE016,MRRXPRO1
          ENDIF
.
          MATCH     MRTRE017,Z70
          IF        !@EQUAL
            MOVE      MRTRE017,MRRXPRO2
          ENDIF
.
          MATCH     MRTRE018,Z70
          IF        !@EQUAL
            MOVE      MRTRE018,MRRXPRO3
          ENDIF
.
          MATCH     MRTRE019,Z70
          IF        !@EQUAL
            MOVE      MRTRE019,MRRXPDRG
          ENDIF
.
          MATCH     MRTRE020,Z70
          IF        !@EQUAL
            MOVE      MRTRE020,MRRXDISO
          ELSE
            MOVE      ZERO,MRRXDISO
          ENDIF
.
          MATCH     MRTRE021,Z70
          IF        !@EQUAL
            MOVE      MRTRE021,MRRXURFR
          ENDIF
.
          MATCH     MRTRE022,Z70
          IF        !@EQUAL
            MOVE      MRTRE022,MRRXURTO
          ENDIF
.
          MATCH     MRTRE023,Z70
          IF        !@EQUAL
            MOVE      MRTRE023,MRRXDTFR
          ENDIF
.
          MATCH     MRTRE024,Z70
          IF        !@EQUAL
            MOVE      MRTRE024,MRRXDTTO
          ENDIF
.
          MATCH     MRTRE025,Z70
          IF        !@EQUAL
            MOVE      MRTRE025,MRRXHLFR
          ENDIF
.
          MATCH     MRTRE026,Z70
          IF        !@EQUAL
            MOVE      MRTRE026,MRRXHLTO
          ENDIF
.
          MATCH     MRTRE027,Z70
          IF        !@EQUAL
            MOVE      MRTRE027,MRRXSMDY
          ELSE
            MOVE      ZERO,MRRXSMDY
          ENDIF
.
          MATCH     MRTRE028,Z70
          IF        !@EQUAL
            MOVE      MRTRE028,MRRXCOFR 
          ENDIF
.
          MATCH     MRTRE029,Z70
          IF        !@EQUAL
            MOVE      MRTRE029,MRRXCOTO
          ENDIF
.
          MATCH     MRTRE030,Z70
          IF        !@EQUAL
            MOVE      MRTRE030,MRRXSNAG
          ENDIF
.
          MATCH     Z70,MRTRE031
          IF        @EQUAL
            MOVE      SP70,MRRXCDFR
          ELSE
            MOVE      MRTRE031,MRRXCDFR
          ENDIF
.
          MATCH     Z70,MRTRE032
          IF        @EQUAL
            MOVE      SP70,MRRXCDTO
          ELSE
            MOVE      MRTRE032,MRRXCDTO
          ENDIF
.
          MATCH     MRTRE033,Z70
          IF        !@EQUAL
            MOVE      MRTRE033,MRRXINCM
          ELSE
            MOVE      ZERO,MRRXINCM
          ENDIF
.
          MOVE      ZERO,MRRXAAGE
          COMPARE   MRTRE034,ZERO
          IF        !@EQUAL
            MOVE      MRTRE034,MRRXAAGE
          ENDIF
.
          MATCH     MRTRE035,Z70
          IF        !@EQUAL
            MOVE      MRTRE035,MRRXGEND
          ENDIF
.
          MATCH     MRTRE036,Z70
          IF        !@EQUAL
            MOVE      MRTRE036,MRRXPOST
          ENDIF
.
          MATCH     MRTRE037,Z70
          IF        !@EQUAL
            MOVE      MRTRE037,MRRXCOB 
          ENDIF
.
          MATCH     MRTRE038,Z70
          IF        !@EQUAL
            MOVE      MRTRE038,MRRXINVT
          ELSE
            MOVE      ZERO,MRRXINVT
          ENDIF
.
          MATCH     MRTRE039,Z70
          IF        !@EQUAL
            MOVE      MRTRE039,MRRXIPRI
          ELSE
            MOVE      ZERO,MRRXIPRI
          ENDIF
.
          MATCH     MRTRE040,Z70
          IF        !@EQUAL
            MOVE      MRTRE040,MRRXINV1
          ELSE
            MOVE      ZERO,MRRXINV1
          ENDIF
.
          MATCH     MRTRE041,Z70
          IF        !@EQUAL
            MOVE      MRTRE041,MRRXINV2
          ELSE
            MOVE      ZERO,MRRXINV2
          ENDIF
.
          MATCH     Z70,MRTRE042
          IF        @EQUAL
            MOVE      SP70,MRRXBLFR
          ELSE
            MOVE      MRTRE042,MRRXBLFR
          ENDIF
.
          MATCH     Z70,MRTRE043
          IF        @EQUAL
            MOVE      SP70,MRRXBLTO
          ELSE
            MOVE      MRTRE043,MRRXBLTO
          ENDIF
.
          MATCH     Z70,MRTRE044
          IF        @EQUAL
            MOVE      SP70,MRRXDGFR
          ELSE
            MOVE      MRTRE044,MRRXDGFR
          ENDIF
.
          MATCH     Z70,MRTRE045
          IF        @EQUAL
            MOVE      SP70,MRRXDGTO
          ELSE
            MOVE      MRTRE045,MRRXDGTO
          ENDIF
.
          MATCH     Z70,MRTRE046
          IF        @EQUAL
            MOVE      SP70,MRRXHOSP
          ELSE
            MOVE      MRTRE046,MRRXHOSP
          ENDIF
.
          MATCH     Z70,MRTRE047
          IF        !@EQUAL
            MOVE      MRTRE047,MRRXHOSF
          ENDIF
.
          MATCH     Z70,MRTRE048
          IF        !@EQUAL
            MOVE      MRTRE048,MRRXHOST
          ENDIF
.
MVMRRX99 RETURN
.------------------------------------------------------------
. Hospital Selection
.------------------------------------------------------------
HSLI0000  PACK      KEY3,SP70
          CALL      RSPTHSP1
HSLI0100  CALL      RKPTHSP1
          BRANCH    OVRCD,HSLI9999
.
          PACK      KEY5,QUOTE,PTHSHOSP,QUOTE
          MATCH     DIM3,PTHSHOSP
          IF        @EQUAL
            WRITE     HTMLFILE;"<option value=",KEY5," selected>":
                               PTHSNAME,"</option>"
          ELSE
            WRITE     HTMLFILE;"<option value=",KEY5,">",PTHSNAME,"</option>"
          ENDIF
          GOTO      HSLI0100
.
HSLI9999  RETURN
