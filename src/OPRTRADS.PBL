.******************************************************************************
.                                  OPRTRADS
.                    Operating theatre instrument code D.S.
.
. Description : Display instrument Codes in description order from the 
.               oprinsaf file using the 2nd index.
.
. Requirements: This routine requires OPRTRAFD and OPRTRAIO.INC and KEY36
.
.             OPRTRADS was programed by Bill Dew on the 20/12/1989
.                        I.B.A. Development Department
.                             D. Jones supervisor
.
.   Modifications : 
.------------------------------------------------------------------------
. V11.03.01 31/01/2023  Thanh T.           TSK 0919770
.           Changed TRADS222 to cater for adding Hospital field
.------------------------------------------------------------------------
.  V9.04.01 22/02/2005 Lina Vo    CAR 56404
.           Changed index KEY36 to KEY45
.------------------------------------------------------------------------
OPRTRADS 
.
          DISPLAY    *P1:4,*EF,*P35:4,*V2LON,*ULON,"TRAY ITEMS"
          MOVE       FIVE,CVERT
          MOVE       ONE,CCOL
.
          PACK       KEY48,SP70
          CALL       RSOPTRA2
TRADS222  
          CALL       RKOPTRA2
          BRANCH     OVRCD,TRADS990
.
          DISPLAY    *PCCOL:CVERT,*V2LON,OPTHCODE,SP2,*HOFF,OPTHDESC
          ADD        ONE,CVERT
          COMPARE    TWENTY3,CVERT
          GOTO       TRADS222 IF LESS
          MOVE       FIVE,CVERT
          ADD        "40",CCOL
          COMPARE    "70",CCOL
          GOTO       TRADS222 IF LESS
.
.         Check for old or new standards question
.
          BRANCH    CNEWDS,TRADS200
.
          KEYIN     *P1:24,*EL," (",*V2LON,"E",*HOFF,")xit, (":
                    *V2LON,"F",*HOFF,")irst Screen, (":
                    *V2LON,"N",*HOFF,")ext Screen : ",*V2LON,ANS;
          CMATCH    ANSF,ANS
          GOTO      OPRTRADS IF EQUAL
          CMATCH    ANSE,ANS
          GOTO      TRADS999 IF EQUAL
          GOTO      TRADS400
.
.         New standards question
.
TRADS200  KEYIN     *P1:24,*EL," (",*V2LON,"C",*HOFF,")ontinue, ":
                    "(",*V2LON,"F",*HOFF,")irst Screen, ":
                    "(",*V2LON,"N",*HOFF,")ext Screen : ",*V2LON,ANS;
          CMATCH    ANSC,ANS
          GOTO      TRADS999 IF EQUAL
          CMATCH    ANSF,ANS
          GOTO      OPRTRADS IF EQUAL
.
.         Clear the screen
.
TRADS400  MOVE      FIVE,CVERT
          MOVE      ONE,CCOL
          DISPLAY   *P1:CVERT,*EF
.
          GOTO      TRADS222
.
TRADS990  BRANCH    CNEWDS,TRADS999
          DISPLAY   *P1:24,*EL;
          CALL      HITENTER
TRADS999  RETURN
