.*****************************************************************************
.*        LEGBOAIO.INC                                                       *
.* Mods:                                                                     *
.*        18/01/2008  Steve Armstrong  CAR 159429                            *
.*                    Added UPLGBOA3 for U/R merging                         *
.*****************************************************************************
.
.         INCLUDE NAME : OUTIOBOA.INC
.
.         FILE  I/O REQUESTS FOR OUTPATIENTS SESSION BOOKING
.
.OVRCD  FORM            1             0=NOT OVER
.                                     1= OVER
.
.         NOTE:-
.                  RDAAAX  IS THE READ CALL ON FILE THEAAAX
.                  RDKAAAX  IS THE READKS CALL
.
.KEY28    DIM       28
.KEY34    DIM       34
.KEY35    DIM       35
.KEY36    DIM       36
.
.       FIRST SESSIONS   I/O
.
RALGBOA1 MOVE      ZERO,OVRCD
         RESET     KEY28
         READ      LEGBOKA1,KEY28;ANS
         GOTO      OVERCOND IF OVER
         RETURN
.
RSLGBOA1 RESET     KEY28
         READ      LEGBOKA1,KEY28;;
         RETURN  
.
RDLGBOA1 MOVE      ZERO,OVRCD
         RESET     KEY28
         READ      LEGBOKA1,KEY28;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                                  LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                                  DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                                  LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                                  DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
.
         MOVE      LOBASITE,LSOBASIT
         MOVE      LOBACLIN,LSOBACLI
         MOVE      LOBADATE,LSOBADAT
         MOVE      LOBASTRT,LSOBASTR
         MOVE      LOBASLOT,LSOBASLO
         MOVE      LOBATIME,LSOBATIM
         MOVE      LOBACTYP,LSOBACTY
         MOVE      LOBAURNO,LSOBAURN
         MOVE      LOBASTAT,LSOBASTA
         RETURN  
.
RKLGBOA1 MOVE      ZERO,OVRCD
         READKS    LEGBOKA1;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
.
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
.
         MOVE      LOBASITE,LSOBASIT
         MOVE      LOBACLIN,LSOBACLI
         MOVE      LOBADATE,LSOBADAT
         MOVE      LOBASTRT,LSOBASTR
         MOVE      LOBASLOT,LSOBASLO
         MOVE      LOBATIME,LSOBATIM
         MOVE      LOBACTYP,LSOBACTY
         MOVE      LOBAURNO,LSOBAURN
         MOVE      LOBASTAT,LSOBASTA
         RETURN  
.
RPLGBOA1 MOVE      ZERO,OVRCD
         READKP    LEGBOKA1;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
.
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
.
         MOVE      LOBASITE,LSOBASIT
         MOVE      LOBACLIN,LSOBACLI
         MOVE      LOBADATE,LSOBADAT
         MOVE      LOBASTRT,LSOBASTR
         MOVE      LOBASLOT,LSOBASLO
         MOVE      LOBATIME,LSOBATIM
         MOVE      LOBACTYP,LSOBACTY
         MOVE      LOBAURNO,LSOBAURN
         MOVE      LOBASTAT,LSOBASTA
         RETURN  
.
.       SECOND SESSIONS   I/O
.
RSLGBOA2 RESET     KEY35
         READ      LEGBOKA2,KEY35;;
         RETURN  
.
RDLGBOA2 MOVE      ZERO,OVRCD
         RESET     KEY35
         READ      LEGBOKA2,KEY35;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                                  LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                                  DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                                  LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                                  DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.  
RKLGBOA2 MOVE      ZERO,OVRCD
         READKS    LEGBOKA2;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.  
RPLGBOA2 MOVE      ZERO,OVRCD
         READKP    LEGBOKA2;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
.       THIRD SESSIONS  FILE I/O
.
RSLGBOA3 RESET     KEY36
         READ      LEGBOKA3,KEY36;;
         RETURN
.
RDLGBOA3 MOVE      ZERO,OVRCD
         RESET     KEY36
         READ      LEGBOKA3,KEY36;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                                  LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                                  DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                                  LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                                  DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
RKLGBOA3 MOVE      ZERO,OVRCD
         READKS    LEGBOKA3;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
RPLGBOA3 MOVE      ZERO,OVRCD
         READKP    LEGBOKA3;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
UPLGBOA3 MOVE      LOBASLOT,DLOBASLO
         MOVE      LOBAURNO,DLOBAURN
         MOVE      LOBAOUTN,DLOBAOUT
         MOVE      LOBASTAT,DLOBASTA
         MOVE      LOTBARES,DLOTBARE
         UPDATE    LEGBOKA3;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO:
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         RETURN  
.
.       FOURTH SESSIONS  FILE I/O
.
RSLGBOA4 RESET     KEY35
         READ      LEGBOKA4,KEY35;;
         RETURN
.
RDLGBOA4 MOVE      ZERO,OVRCD
         RESET     KEY35
         READ      LEGBOKA4,KEY35;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                                  LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                                  DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                                  LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                                  DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
RKLGBOA4 MOVE      ZERO,OVRCD
         READKS    LEGBOKA4;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
RPLGBOA4 MOVE      ZERO,OVRCD
         READKP    LEGBOKA4;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
.
.       FIFTH SESSIONS  FILE I/O
.
RSLGBOA5 RESET     KEY35
         READ      LEGBOKA5,KEY35;;
         RETURN
.
RDLGBOA5 MOVE      ZERO,OVRCD
         RESET     KEY35
         READ      LEGBOKA5,KEY35;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                                  LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                                  DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                                  LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                                  DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
RKLGBOA5 MOVE      ZERO,OVRCD
         READKS    LEGBOKA5;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
RPLGBOA5 MOVE      ZERO,OVRCD
         READKP    LEGBOKA5;LOBASITE,LOBACLIN,LOBADATE,LOBASTRT,DLOBASLO: 
                            LOBATIME,LOBACTYP,DLOBAURN,LOBAVISI,DLOBAOUT:
                            DLOBASTA,LOBADAY,LOBAEXSL,LOBAFINS,LOBALOCK:
                            LOBAPXRA,LOBABKDT,LOBAPULL,LOBASESS,LOBADISC:
                            DLOTBARE,LOBASPAR
         GOTO      OVERCOND IF OVER
         MOVE      DLOBASLO,LOBASLOT
         MOVE      DLOBAURN,LOBAURNO
         MOVE      DLOBAOUT,LOBAOUTN
         MOVE      DLOBASTA,LOBASTAT
         MOVE      ZERO,LOTBARES
         MOVE      DLOTBARE,LOTBARES
         RETURN  
.
