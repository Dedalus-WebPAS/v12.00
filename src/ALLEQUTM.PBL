. *----------------------------------------------------------------------
. * Include Name  :   ALLEQUTM.PBL
. *
. * Function      :   CGI variables for ALLEQUFD - allequaf.dat
. *
. * Includes Needed :
. *
. * V10.00.01 18/10/2010  Mike Laming  CAR 178888
. *           Mods to ALEQ0000 for Equip.Maintenance List
. * V9.11.01  22/01/2009 Ebon Clements CAR 182024
. *           Added FILTTYPE tag
. * V9.05.B01 07/02/2006 Ebon Clements CAR 87670
. *          Fixed incorrect goto in ALEQ0080
. * V9.04.00 20/12/2004  Ebon Clements CAR 55406
. *          Added tag for ALEQPFEE
. * V9.03.02 02/03/2004  Pat Dirito    CAR 43997
. *          Added new var Fee To Be Paid   
. * V9.03.01 06/10/2003  Ebon Clements CAR 43988 
.*           Changed tag details to a standard format
. *----------------------------------------------------------------------
.
CLALEQ00  MOVE      Z70,ALEQU001
          MOVE      Z70,ALEQU002
          MOVE      Z70,ALEQU003
          MOVE      Z70,ALEQU004
          MOVE      Z70,ALEQU005
          MOVE      Z70,ALEQU006
          MOVE      Z70,ALEQU007
          MOVE      Z70,ALEQU008
          MOVE      Z70,ALEQU009
          MOVE      Z70,ALEQU010
          MOVE      Z70,ALEQU011
          MOVE      Z70,ALEQU012
          MOVE      Z70,ALEQU013
          MOVE      Z70,ALEQU014
          MOVE      Z70,ALEQU015
          MOVE      Z70,ALEQU016
          MOVE      Z70,ALEQU017
          MOVE      Z70,ALEQU018
          MOVE      Z70,ALEQU019
          MOVE      Z70,ALEQU021
          MOVE      Z70,ALEQU022
          MOVE      Z70,ALEQU023
          MOVE      Z70,ALEQU024
          MOVE      Z70,ALEQU025
          MOVE      Z70,ALEQU026
          MOVE      Z70,ALEQU027
          MOVE      Z70,ALEQU028
.
CLALEQ99  RETURN
.--------------------------------------------------------------------
.  Set Parameters for Option 5: Allied Health Equipment Maintenance
.--------------------------------------------------------------------
STEQU000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,STEQU001,STEQU002,STEQU003,STEQU004,STEQU005:
                       STEQU006,STEQU007,STEQU008,STEQU009,STEQU010:
                       STEQU011,STEQU012,STEQU013,STEQU014,STEQU015:
                       STEQU016,STEQU017,STEQU018,STEQU019,STEQU020:
                       STEQU021,STEQU022,STEQU023,STEQU024,STEQU025:
                       STEQU026,STEQU027,STEQU028
.
          MOVE      ONE,EXIT
          GOTO      STEQU999
.
STEQU001  MOVE      QRYDATA,ALEQU001
          PACK      ALEQU001,ALEQU001,SP70
          GOTO      STEQU999
.
STEQU002  MOVE      QRYDATA,ALEQU002
          PACK      ALEQU002,ALEQU002,SP70
          GOTO      STEQU999
.
STEQU003  MOVE      QRYDATA,ALEQU003
          PACK      ALEQU003,ALEQU003,SP70
          GOTO      STEQU999
.
STEQU004  MOVE      QRYDATA,ALEQU004
          PACK      ALEQU004,ALEQU004,SP70
          GOTO      STEQU999
.
STEQU005  MOVE      QRYDATA,ALEQU005
          PACK      ALEQU005,ALEQU005,SP70
          GOTO      STEQU999
.
STEQU006  MOVE      QRYDATA,ALEQU006
          PACK      ALEQU006,ALEQU006,SP70
          GOTO      STEQU999
.
STEQU007  MOVE      QRYDATA,ALEQU007
          PACK      ALEQU007,ALEQU007,SP70
          GOTO      STEQU999
.
STEQU008  MOVE      QRYDATA,ALEQU008
          GOTO      STEQU999
.
STEQU009  MOVE      QRYDATA,ALEQU009
          GOTO      STEQU999
.
STEQU010  MOVE      QRYDATA,ALEQU010
          GOTO      STEQU999
.
STEQU011  MOVE      QRYDATA,ALEQU011
          GOTO      STEQU999
.
STEQU012  MOVE      QRYDATA,ALEQU012
          GOTO      STEQU999
.
STEQU013  PACK      QRYDATA,QRYDATA,SP30
          UNPACK    QRYDATA,KEY8,KEY3 * Check for formatted or unformatted
          MATCH     SP70,KEY3
          IF        @EQUAL
            MOVE      QRYDATA,ALEQU013 * Do not change format = (CCYYMMDD)
          ELSE
            MOVE      QRYDATA,KEY11   * Change Date as format is (DD MON CCYY)
            PACK      KEY11,KEY11,SP70
            MATCH     SP70,KEY11
            IF        !@EQUAL
              UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
              CALL      SETMTH00
              PACK      ALEQU013,CCENT,CYEAR,CMON,CDAY
              REP       " 0",ALEQU013 
            ENDIF
          ENDIF
          GOTO      STEQU999
.
STEQU014  PACK      QRYDATA,QRYDATA,SP30
          UNPACK    QRYDATA,KEY8,KEY3 * Check for formatted or unformatted
          MATCH     SP70,KEY3
          IF        @EQUAL
            MOVE      QRYDATA,ALEQU014 * Do not change format = (CCYYMMDD)
          ELSE
            MOVE      QRYDATA,KEY11   * Change Date as format is (DD MON CCYY)
            PACK      KEY11,KEY11,SP70
            MATCH     SP70,KEY11
            IF        !@EQUAL
              UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
              CALL      SETMTH00
              PACK      ALEQU014,CCENT,CYEAR,CMON,CDAY
              REP       " 0",ALEQU014
            ENDIF
          ENDIF
          GOTO      STEQU999
.
STEQU015  MOVE      QRYDATA,ALEQU015
          GOTO      STEQU999
.
STEQU016  MOVE      QRYDATA,ALEQU016
          GOTO      STEQU999
.
STEQU017  MOVE      QRYDATA,ALEQU017
          GOTO      STEQU999
.
STEQU018  MOVE      QRYDATA,ALEQU018
          GOTO      STEQU999
.
STEQU019  MOVE      QRYDATA,ALEQU019
          GOTO      STEQU999
.
STEQU020  PACK      QRYDATA,QRYDATA,SP30
          UNPACK    QRYDATA,KEY8,KEY3 * Check for formatted or unformatted
          MATCH     SP70,KEY3
          IF        @EQUAL
            MOVE      QRYDATA,ALEQU020 * Do not change format = (CCYYMMDD)
          ELSE
            MOVE      QRYDATA,KEY11   * Change Date as format is (DD MON CCYY)
            PACK      KEY11,KEY11,SP70
            MATCH     SP70,KEY11
            IF        !@EQUAL
              UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
              CALL      SETMTH00
              PACK      ALEQU020,CCENT,CYEAR,CMON,CDAY
              REP       " 0",ALEQU020
            ENDIF
          ENDIF 
          GOTO      STEQU999
.
STEQU021  MOVE      QRYDATA,ALEQU021
          GOTO      STEQU999
.
STEQU022  MOVE      QRYDATA,ALEQU022
          GOTO      STEQU999
.
STEQU023  MOVE      QRYDATA,ALEQU023
          GOTO      STEQU999
.
STEQU024  MOVE      QRYDATA,ALEQU024
          GOTO      STEQU999
.
STEQU025  MOVE      QRYDATA,ALEQU025
          GOTO      STEQU999
.
STEQU026  MOVE      QRYDATA,ALEQU026
          GOTO      STEQU999
.
STEQU027  MOVE      QRYDATA,ALEQU027
          GOTO      STEQU999
.
STEQU028  MOVE      QRYDATA,ALEQU028
          GOTO      STEQU999
.
STEQU999  RETURN
.-----------------------------------------------------------
. move cgi variables into file variables equipment
.-----------------------------------------------------------
MVALEQ00  MATCH     Z70,ALEQU001
          IF        !@EQUAL
            MOVE      ALEQU001,ALEQEQUI
          ENDIF
.
          MATCH     Z70,ALEQU002
          IF        !@EQUAL
            MOVE      ALEQU002,ALEQDESC
          ENDIF
.
          MATCH     Z70,ALEQU003
          IF        !@EQUAL
            MOVE      ALEQU003,ALEQLOAN
          ENDIF
.
          MATCH     Z70,ALEQU004
          IF        !@EQUAL
            MOVE      ALEQU004,ALEQTYPE
          ENDIF
.
          MATCH     Z70,ALEQU005
          IF        !@EQUAL
            MOVE      ALEQU005,ALEQSUBT
          ENDIF
.
          MATCH     Z70,ALEQU006
          IF        !@EQUAL
            MOVE      ALEQU006,ALEQHOME
          ENDIF
.
          MATCH     Z70,ALEQU007
          IF        !@EQUAL
            MOVE      ALEQU007,ALEQDEPT
          ENDIF
.
          MATCH     Z70,ALEQU008
          IF        !@EQUAL
            MOVE      ALEQU008,ALEQITEM
          ENDIF
.
          MATCH     Z70,ALEQU009
          IF        !@EQUAL
            MOVE      ALEQU009,ALEQSUPP
          ENDIF
.
          MATCH     Z70,ALEQU010
          IF        !@EQUAL
            MOVE      ALEQU010,ALEQPROD
          ENDIF
.
          MATCH     Z70,ALEQU011
          IF        !@EQUAL
            MOVE      ALEQU011,ALEQSERI
          ENDIF
.
          MATCH     Z70,ALEQU012
          IF        !@EQUAL
            MOVE      ALEQU012,ALEQSTAT
          ENDIF
.
          MATCH     Z70,ALEQU013
          IF        !@EQUAL
            MOVE      ALEQU013,ALEQSDAT
          ENDIF
.
          MATCH     Z70,ALEQU014
          IF        !@EQUAL
            MOVE      ALEQU014,ALEQPDAT
          ENDIF
.
          MATCH     Z70,ALEQU015
          IF        !@EQUAL
            MOVE      ALEQU015,ALEQMAIN
          ENDIF
.
          MATCH     Z70,ALEQU016
          IF        !@EQUAL
            MOVE      ALEQU016,ALEQUNIT
          ENDIF
.
          MATCH     Z70,ALEQU017
          IF        !@EQUAL
            MOVE      ALEQU017,ALEQDEPO
          ENDIF
.
          MATCH     Z70,ALEQU018
          IF        !@EQUAL
            MOVE      ALEQU018,ALEQSPEC
          ENDIF
.
          MATCH     Z70,ALEQU019
          IF        !@EQUAL
            MOVE      ALEQU019,ALEQLOAU
          ENDIF
.
          MATCH     Z70,ALEQU020
          IF        !@EQUAL
            MOVE      ALEQU020,ALEQRDAT
          ENDIF
.
          MATCH     Z70,ALEQU021
          IF        !@EQUAL
            MOVE      ALEQU021,ALEQCONS
          ENDIF
.
          MATCH     Z70,ALEQU022
          IF        !@EQUAL
            MOVE      ALEQU022,ALEQCBAL
          ENDIF
.
          MATCH     Z70,ALEQU023
          IF        !@EQUAL
            MOVE      ALEQU023,ALEQREOR
          ENDIF
.
          MATCH     Z70,ALEQU024
          IF        !@EQUAL
            MOVE      ALEQU024,ALEQREQT
          ENDIF
.
          MATCH     Z70,ALEQU025
          IF        !@EQUAL
            MOVE      ALEQU025,ALEQREGN
          ENDIF
.
          MATCH     Z70,ALEQU026
          IF        !@EQUAL
            MOVE      ALEQU026,ALEQASSN
          ENDIF
.
          MATCH     Z70,ALEQU027
          IF        !@EQUAL
            MOVE      ALEQU027,ALEQACTV
          ENDIF
.
          MATCH     Z70,ALEQU028
          IF        !@EQUAL
            MOVE      ALEQU028,ALEQPFEE
          ENDIF
.
MVALEQ99  RETURN
.
.------------------------------------------------------------
. Allied Health  Services - Option 5 EQUIPMENT DETAILS
.------------------------------------------------------------
ALEQ0000  BRANCH    FLDITMNO,ALEQ0010,ALEQ0020,ALEQ0030,ALEQ0040,ALEQ0050:
                             ALEQ0060,ALEQ0070,ALEQ0080,ALEQ0090,ALEQ0100:
                             ALEQ0110,ALEQ0120,ALEQ0130,ALEQ0140,ALEQ0150:
                             ALEQ0160,ALEQ0170,ALEQ0180,ALEQ0190,ALEQ0200:
                             ALEQ0210,ALEQ0220,ALEQ0230,ALEQ0240,ALEQ0250:
                             ALEQ0260,ALEQ0270,ALEQ0280,ALEQ0290,ALEQ0300:
                             ALEQ0310,ALEQ0320,ALEQ0330,ALEQ0340,ALEQ0350:
                             ALEQ0360,ALEQ0370,ALEQ0380,ALEQ0390
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      ALEQ9999
.
ALEQ0010  WRITE     HTMLFILE;ALEQEQUI;
          GOTO      ALEQ9999
.
ALEQ0020  WRITE     HTMLFILE;ALEQDESC;
          GOTO      ALEQ9999
.
ALEQ0030  MOVE      "QG",CATEGORY
          MOVE      ALEQLOAN,CODE
          CALL      CODITM00
          GOTO      ALEQ9999
.
ALEQ0040  MOVE      "QT",CATEGORY
          MOVE      ALEQTYPE,CODE
          CALL      CODITM00
          GOTO      ALEQ9999
.
ALEQ0050  MOVE      "QY",CATEGORY
          MOVE      ALEQSUBT,CODE
          CALL      CODITM00
          GOTO      ALEQ9999
.
ALEQ0060  MOVE      "QH",CATEGORY
          MOVE      ALEQHOME,CODE
          CALL      CODITM00
          GOTO      ALEQ9999
.
ALEQ0070  MOVE      "CG",CATEGORY           * Department Code
          MOVE      DEPARTMN,CODE
          CALL      CODITM00
          GOTO      ALEQ9999
.
ALEQ0080  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,ALEQ0085
          CALL      GEEQNM00
          BRANCH    OVRCD,ALEQ9999
          WRITE     HTMLFILE;PRITDESC;
          GOTO      ALEQ9999
.
ALEQ0085  WRITE     HTMLFILE;ALEQITEM;
          GOTO      ALEQ9999
.
ALEQ0090  WRITE     HTMLFILE;ALEQSUPP;
          GOTO      ALEQ9999
.
ALEQ0100  WRITE     HTMLFILE;ALEQPROD;
          GOTO      ALEQ9999
.
ALEQ0110  WRITE     HTMLFILE;ALEQSERI;
          GOTO      ALEQ9999
.
ALEQ0120  WRITE     HTMLFILE;ALEQSTAT;
          GOTO      ALEQ9999
.
ALEQ0130  MATCH     SP70,ALEQSDAT
          IF        !@EQUAL
            UNPACK    ALEQSDAT,CCENT,CYEAR,CMON,CDAY
            MOVE      CMON,F2
            LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
            PACK      KEY12,CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          ELSE
            MOVE     SP70,KEY12
          ENDIF
          WRITE     HTMLFILE;KEY12 
          GOTO      ALEQ9999
.
ALEQ0140  MATCH     SP70,ALEQPDAT
          IF        !@EQUAL
            UNPACK    ALEQPDAT,CCENT,CYEAR,CMON,CDAY
            MOVE      CMON,F2
            LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
            PACK      KEY12,CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          ELSE
            MOVE     SP70,KEY12
          ENDIF
          WRITE     HTMLFILE;KEY12
          GOTO      ALEQ9999
.
ALEQ0150  MOVE      ALEQMAIN,ALEQU015
          SQUEEZE   ALEQU015
          WRITE     HTMLFILE;ALEQU015;
          GOTO      ALEQ9999
.
ALEQ0160  MOVE      ALEQUNIT,ALEQU016
          SQUEEZE   ALEQU016
          WRITE     HTMLFILE;ALEQU016;
          GOTO      ALEQ9999
.
ALEQ0170  WRITE     HTMLFILE;ALEQDEPO;
          GOTO      ALEQ9999
.
ALEQ0180  MATCH     "1",ALEQSPEC
          IF        !@EQUAL
            MOVE    "0",ALEQSPEC
          ENDIF
          WRITE     HTMLFILE;ALEQSPEC;
          GOTO      ALEQ9999
.
ALEQ0190  WRITE     HTMLFILE;ALEQLOAU;
          GOTO      ALEQ9999
.
ALEQ0200  MATCH     SP70,ALEQRDAT
          IF        !@EQUAL
            UNPACK    ALEQRDAT,CCENT,CYEAR,CMON,CDAY
            MOVE      CMON,F2
            LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
            PACK      KEY12,CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          ELSE
            MOVE     SP70,KEY12
          ENDIF
          WRITE     HTMLFILE;KEY12 
          GOTO      ALEQ9999
.
ALEQ0210  WRITE     HTMLFILE;ALEQCONS;
          GOTO      ALEQ9999
.
ALEQ0220  WRITE     HTMLFILE;ALEQCBAL;
          GOTO      ALEQ9999
.
ALEQ0230  WRITE     HTMLFILE;ALEQREOR;
          GOTO      ALEQ9999
.
ALEQ0240  WRITE     HTMLFILE;ALEQREQT;
          GOTO      ALEQ9999
.
ALEQ0250  WRITE     HTMLFILE;ALEQREGN;
          GOTO      ALEQ9999
.
ALEQ0260  WRITE     HTMLFILE;ALEQASSN;
          GOTO      ALEQ9999
.
ALEQ0270  WRITE     HTMLFILE;ALEQCDAT;
          GOTO      ALEQ9999
.
ALEQ0280  WRITE     HTMLFILE;ALEQCTIM;
          GOTO      ALEQ9999
.
ALEQ0290  WRITE     HTMLFILE;ALEQCUID;
          GOTO      ALEQ9999
.
ALEQ0300  WRITE     HTMLFILE;ALEQUDAT;
          GOTO      ALEQ9999
.
ALEQ0310  WRITE     HTMLFILE;ALEQUTIM;
          GOTO      ALEQ9999
.
ALEQ0320  WRITE     HTMLFILE;ALEQUUID;
          GOTO      ALEQ9999
.
ALEQ0330  CALL      EQTAB000
          GOTO      ALEQ9999
.
ALEQ0340  CALL      NEXTGE00
          GOTO      ALEQ9999
.
ALEQ0350  CALL      PREVGE00
          GOTO      ALEQ9999
.
ALEQ0360  MATCH     SP70,ALEQSUPP
          GOTO      ALEQ9999 IF EQUAL
          PACK      KEY5,ALEQSUPP,SP70
          CALL      RDAPMA1
          WRITE     HTMLFILE;APMACN1;
          GOTO      ALEQ9999
.
ALEQ0370  WRITE     HTMLFILE;ALEQACTV;
          GOTO      ALEQ9999
.
ALEQ0380  WRITE     HTMLFILE;ALEQPFEE;
          GOTO      ALEQ9999
.
ALEQ0390  MOVE      "QT",CATEGORY
          MOVE      FILTTYPE,CODE
          CALL      CODITM00
          GOTO      ALEQ9999
.
ALEQ9999  RETURN
