.
. V11.00.01 26/10/2020  Don Nguyen     TSK 0896454
.           Fixed invalid HTML output for <b> within <font> (HCBT0110)
. V10.14.01 12/07/2019  Ebon Clements    TSK 0877982
.           Updated key length for RSPRDO3 KEY28 to KEY32
. V10.05.01 21/10/2014  Ebon Clements  CAR 268970
.           Change to use OUTCLIFD index 1 instead of index 2
. V9.04.B01 19/12/2005  J.Tan         CAR 77215
.                       Mods for write off/adjustment
. V9.04.05  17/11/2005  J.Tan         CAR 77215
.                       Mods to batch status
. V9.04.04  18/08/2005  J.Tan         CAR 72571
.                       Mod to have doctor name for service provider
. V9.04.03  28/07/2005  J.Tan         CAR 69403
.                       Mods for Batch status (Dep.Verified)
. V9.04.02  19/05/2005  J.Tan         CAR 56699
.                       Added new batch status
. V9.04.01  11/05/2005  J.Tan         CAR 61381
.                       Mods batch status
.------------------------------------------------------------
. HIC Batch Fields
.------------------------------------------------------------
. Modifications :          
.------------------------------------------------------------
HCBT0000  BRANCH    FLDITMNO,HCBT0100,HCBT0200,HCBT0300,HCBT0400,HCBT0500:
                       HCBT0600,HCBT0700,HCBT0800,HCBT0900,HCBT1000:
                       HCBT1100,HCBT1200,HCBT1300,HCBT1400,HCBT1500:
                       HCBT1600
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      HCBT9999
.
HCBT0100  UNPACK    DIM127,D1,ANS,DIM127
          MOVE      ANS,F1
          BRANCH    F1,HCBT0110,HCBT0110
          WRITE     HTMLFILE;HCBTSTAT;
          GOTO      HCBT9999
.
HCBT0110  MOVE      STATBTCH,KEY16
          MOVE      ZERO,FORM2
          MOVE      HCBTSTAT,FORM2
          LOAD      KEY16,FORM2,STATEXTR,STATSENT,STATACKW,STATNACK,STATRECV:
                                STATRECX,STATPAYX,STATACTN,STATDEPX,STATCLSE
          BRANCH    F1,HCBT0120
          IF        FORM2=7
            WRITE     HTMLFILE;"<font color=#FF0000><b>",KEY16,"</b></font>";
            GOTO      HCBT9999
          ENDIF
.
HCBT0120  WRITE     HTMLFILE;KEY16;
          GOTO      HCBT9999
.
HCBT0200  WRITE     HTMLFILE;HCBTBTCH;
          GOTO      HCBT9999
.
HCBT0300  WRITE     HTMLFILE;HCBTPMCI;
          GOTO      HCBT9999
.
HCBT0400  WRITE     HTMLFILE;HCBTPYEE;
          GOTO      HCBT9999
.
HCBT0500  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,HCBT0520
          WRITE     HTMLFILE;HCBTPSRV;
          GOTO      HCBT9999
.
HCBT0520  OPEN      PRIDOCT3,"pridoctf"
          PACK      KEY32,HCBTPSRV,SP70
          CALL      RSPRDO3
          CALL      RKPRDO3
          BRANCH    OVRCD,HCBT0522
.
          MATCH     HCBTPSRV,PRDOPROV         * Same provider number?
          GOTO      HCBT0522 IF NOT EQUAL
.
.         Get doctor name
.
          PACK      KEY10,PRDODOCT,SP70
          CALL      RDPMHCP1
          BRANCH    OVRCD,HCBT0522
.
          MOVE      "1",PACFRMT
          MOVE      PMHCTITL,PACTITLE
          MOVE      PMHCSNAM,PACSNAME
          MOVE      PMHCGNAM,PACGNAME
          CALL      PACNAME
          MOVE      SP70,OCADESC
          WRITE     HTMLFILE;PACFNAME;
          GOTO      HCBT9999
.
HCBT0522  WRITE     HTMLFILE;SP70;
          GOTO      HCBT9999
.
HCBT0600  WRITE     HTMLFILE;HCBTMPRA;
          GOTO      HCBT9999
.
HCBT0700  WRITE     HTMLFILE;HCBTCAMT;
          GOTO      HCBT9999
.
HCBT0800  WRITE     HTMLFILE;HCBTAMTR;
          GOTO      HCBT9999
.
HCBT0900  WRITE     HTMLFILE;HCBTREJA;
          GOTO      HCBT9999
.
HCBT1000  WRITE     HTMLFILE;HCBTWOFF;
          GOTO      HCBT9999
.
HCBT1100  MOVE      "IE",CATEGORY     * Batch Comments
          MOVE      HCBTCMNT,CODE
          CALL      CODITM00
          GOTO      HCBT9999
.
HCBT1200  MATCH     SP70,HCBTUDAT
          GOTO      HCBT9999 IF EQUAL 
.
          UNPACK    HCBTUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      HCBT9999
.
HCBT1300  MOVE      HCBTREJA,FORM12P2
          SUB       HCBTWOFF,FORM12P2
          ADD       HCBTADJM,FORM12P2
          WRITE     HTMLFILE;FORM12P2;
          GOTO      HCBT9999
.
.         Clinic ID
.
HCBT1400  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          MATCH     SP70,HCBTCLID
          GOTO      HCBT9999 IF EQUAL
.
          BRANCH    F1,HCBT1420
.
          PACK      KEY20,HCBTSITE,HCBTCLID,Z70
          CALL      RDSCLIA1          * Read Clinic Record
          CALL      RDPCLIA1          * Read Clinic Record
          BRANCH    OVRCD,HCBT1420
.
          WRITE     HTMLFILE;OCADESC;
          GOTO      HCBT9999
.
HCBT1420  WRITE     HTMLFILE;HCBTCLID;
          GOTO      HCBT9999
.
HCBT1500  PACK      KEY12,HCBTSITE,HCBTCTYP,SP70
          CALL      RDCTYA1           * Read clinic type
          BRANCH    OVRCD,HCBT9999
          WRITE     HTMLFILE;OCTDESC;
          GOTO      HCBT9999
.
HCBT1600  MOVE      "No ",KEY3
          MATCH     "1",HCBTSENT
          GOTO      HCBT1620 IF NOT EQUAL
          MOVE      "Yes",KEY3
HCBT1620  WRITE     HTMLFILE;KEY3;
          GOTO      HCBT9999
.
HCBT9999  RETURN
.
.------------------------------------------------------------
.         Clear Fields
.------------------------------------------------------------
CLHICBTC
CLBT0000  MOVE      SP70,HCBTBTCH   * Batch Number (1 Alpha 4 Numeric)
          MOVE      SP70,HCBTPMCI   * MCI (3 Alpha 5 Numeric)
          MOVE      SP70,HCBTPYEE   * Payee Provider Number
          MOVE      SP70,HCBTPSRV   * Service Provider Number
          MOVE      SP70,HCBTMPRA   * Medical Practice
          MOVE      SP70,HCBTDATE   * Batch Date
          MOVE      SP70,HCBTSITE   * Outpatient Site
          MOVE      SP70,HCBTCTYP   * Clinic Type
          MOVE      SP70,HCBTCLID   * Clinic ID
          MOVE      ZERO,HCBTCAMT   * Total Batch Amount
          MOVE      ZERO,HCBTAMTR   * Total Amount Received
          MOVE      ZERO,HCBTREJA   * Total Amount Rejected
          MOVE      ZERO,HCBTWOFF   * Total Amount 'Write Off'
          MOVE      ZERO,HCBTTRIN   * Total Amount 'Transfer to Invoice'
          MOVE      ZERO,HCBTSIZE   * Batch Size (No of Claims in Batch)
          MOVE      SP70,HCBTSTAT   * Status (Right justified)
          MOVE      SP70,HCBTCMNT   * Batch Comments (Catgory IE)
          MOVE      SP70,HCBTHCOP   * Hardcopy to Medicare (ccyymmdd)
          MOVE      SP70,HCBTFNDR   * Date Funds Received
          MOVE      SP70,HCBTDEPD   * Date of Deposit Verified
          MOVE      SP70,HCBTCDAT   * Date Record Created (ccyymmdd)
          MOVE      SP70,HCBTCTIM   * Time Record Created (hh:mm:ss)
          MOVE      SP70,HCBTCUID   * WEB User ID Created (websecaf)
          MOVE      SP70,HCBTUDAT   * Date Record Updated (ccyymmdd)
          MOVE      SP70,HCBTUTIM   * Time Record Updated (hh:mm:ss)
          MOVE      SP70,HCBTUUID   * WEB User ID Updated (websecaf)
          MOVE      SP70,HCBTEFNM   * Extract filename
CLBT9999  RETURN
+
