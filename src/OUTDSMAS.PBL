.
.     OUTDSMAS : Display Clinic Master File Entries
.
.     This include displays entries in the Clinic Master file for a given
.      clinic.
.                   Input variable : Site,clinic contains category
.         Display Clinic Heading, and then loop over entries.
. Mods:
.         V5.09.B01 05/01/2001  Greg Horvat
.                   Replaced certain variables with KEY?? variables cause
.                   OUT66 couldnt compile
.
OUTDSMAS  DISPLAY   *P1:3,*EF,*P20:4,*V2LON,*ULON,VCLIN," -",SP3,OCADESC:
                    *P2:6,"Clinic Type",SP9:
                    *P27:6,"   Day    ",*P45:6,"Start Time"
.
          MOVE      SEVEN,CVERT
.
          PACK      KEY18 WITH VSITE,VCLIN,SP5
          CALL      RDSMASA1
.
DISPCL1   CALL      RDKMASA1
          BRANCH    OVRCD OF ENDCL1
.
          MATCH     OMACLIN,VCLIN
          GOTO      ENDCL1 IF NOT EQUAL
.
          MOVE      SP30,OCTDESC
          MOVE      SP20,KEY20
.
          PACK      KEY12 WITH VSITE,OMATYP
          CALL      RDCTYA1
          BRANCH    OVRCD OF NODESC
.
          MOVE      OCTDESC,KEY20
.
NODESC    LOAD       DDAY USING OMADAY OF DMON,DTUE,DWED,DTHU,DFRI,DSAT,DSUN
.
          DISPLAY   *P2:CVERT,*V2LON,KEY20,*P29:CVERT,DDAY,*P47:CVERT,OMASTART;
          ADD       ONE,CVERT
          COMPARE   "24",CVERT
          GOTO      DISPCL1 IF LESS
.
          KEYIN     *P1:24,*EL," (",*V2LON,"E",*HOFF,")xit, (":
                    *V2LON,"N",*HOFF,")ext Screen : ",*V2LON,ANS;
.
          CMATCH    "E",ANS
          GOTO      ENDCL2 IF EQUAL
.
          MOVE      SEVEN,CVERT
          DISPLAY   *P1:5,*EF
          GOTO      DISPCL1
.
.       IF MISSING CATEGORY SHOW  CODE MISSING
.
DISPBCL   DISPLAY   *P1:3,*EF,*P30:4,*V2LON,*BLINKON:
                    "Clinic : ",VCLIN," missing in Clinic Master File"
.
.      End of clinics
.
ENDCL1    KEYIN     *P1:24,*EL,"Hit ",*V2LON,"<RETURN>",*HOFF:
                               " to continue ",*EOFF,ANS;
ENDCL2    MOVE      ZERO,OVRCD
DSPCLIN   RETURN
