.
.       PATDSITM : Display Surgical Items Entries
.
.       This include is used to display various options available, using
.       whatever file it needs, along with any special parameter supplied
.       by the calling program.
.
.        Subroutine to display the available surgical items
.
.       Steve O'Gorman 20/07/95 - Ported from Release 6.03
.
.
PATDSITM  MOVE       FIVE,CVERT
          MOVE       ONE,CCOL
          DISPLAY    *P1:4,*EF,*P30:4,*V2LON,*ULON,"SURGICAL ITEMS"
.
.>>>>>>>  TRAP       ENDITEM0 IF F1
.
          PACK       KEY9 WITH DIM1A,SP9
          CALL       RDSITEM1
.
.         Loop over file
.
ITEMLP1   CALL       RDKITEM1
          BRANCH     OVRCD OF ENDITEM1
.
          CMATCH     SP1,DIM1A
          GOTO       ITEMDS1 IF EQUAL
.
          CMATCH     DIM1A,ITEMNO
          GOTO       ENDITEM1 IF NOT EQUAL
.
ITEMDS1   MOVE       IDESC,DIM20
          DISPLAY    *PCCOL:CVERT,*V2LON,ITEMNO,SP2,*HOFF,DIM20
          ADD        ONE,CVERT
          COMPARE    TWENTY4,CVERT
          GOTO       ITEMLP1 IF LESS
.
          MOVE       FIVE,CVERT
          ADD        "40",CCOL
          COMPARE    "70",CCOL
          GOTO       ITEMLP1 IF LESS
.
.>>>>>>>  TRAPCLR    F1
.
          KEYIN      *P1:24,*EL," (",*V2LON,"E",*HOFF,")xit, (":
                     *V2LON,"N",*HOFF,")ext Screen : ",*V2LON,ANS;
          MATCH      ANSE,ANS
          RETURN     IF EQUAL
.
          MOVE       FIVE,CVERT
          MOVE       ONE,CCOL
          DISPLAY    *P1:5,*EF
.
.>>>>>>>  TRAP       ENDITEM0 IF F1
.
          GOTO       ITEMLP1
.
ENDITEM0  NORETURN
.>>>>>>>  TRAPCLR    F1
.
.      End of rates
.
ENDITEM1  
          BRANCH    CNEWDS,ENDITEM3
          KEYIN     *P1:24,*EL,"Hit ",*V2LON,"<RETURN>",*HOFF:
                               " to continue ",*EOFF,ANS;
.
ENDITEM3  RETURN
