.------------------------------------------------------------
. File       : WATLPCCD.PBL
.
. Functions  : This file contains standard routines for
.              adding new records to WATLPCFD        
.
. Routines   : ADDWLT00  - Addes new record to WATLPCFD        
.
. Variables  : WMURNO    U/R Number
.              WMCODE    Procedure Code
.              WMCNT     Procedure Count
.
.------------------------------------------------------------
.	V9.02.00  13/06/2002  Ebon Clements 8116
.                             Created Include
.------------------------------------------------------------
ADDWLT00  MOVE     ZERO,F5
          PACK     KEY5,Z70            
          CALL     RSWTLPC1
          CALL     RPWTLPC1
.
          MOVE     WTLPSCHE,F5
ADDWLT10  ADD      ONE,F5
          MOVE     F5,KEY5
          CALL     RDWTLPC1
          IF       OVRCD=0
            GOTO     ADDWLT10
          ENDIF
.
          CALL     CLWTLP00 
          CALL     MVWTLP00
          CALL     RAWTLPC1
          IF       OVRCD=1
            CALL     WRWTLPC1
          ELSE
            GOTO     ADDWLT10
          ENDIF
.
ADDWLT99  RETURN          
.-------------------------------------------------------------
.               Clears File
.-------------------------------------------------------------
CLWTLP00  MOVE      SP70,WTLPSCHE 
          MOVE      SP70,WTLPURNO 
          MOVE      SP70,WTLPPCOD 
          MOVE      SP70,WTLPPCNT 
          MOVE      SP70,WTLPPRNT 
          MOVE      SP70,WTLPCOPY 
          MOVE      SP70,WTLPLETT 
          MOVE      SP70,WTLPWEBU 
          MOVE      SP70,WTLPRDAT 
          MOVE      SP70,WTLPRTIM 
          MOVE      SP70,WTLPSPAR 
.
CLWTLP99  RETURN
.-------------------------------------------------------------
.               Save File
.-------------------------------------------------------------
MVWTLP00  MOVE     KEY5,WTLPSCHE
.
          MOVE     WMURNO,WTLPURNO
          MOVE     WMCODE,WTLPPCOD
          MOVE     WMCNT,WTLPPCNT
.
          MOVE     SELPRINT,WTLPPRNT             * Printer
          MOVE     SCHDCOPY,WTLPCOPY             * No of Copies
          MOVE     LETTER,WTLPLETT               * Letter Number
.
          MOVE     WBSEUID,WTLPWEBU
          CALL     IBACLOCK
          PACK     WTLPRDAT,CCC,CYY,CMM,CDD
          REP      " 0",WTLPRDAT
          CLOCK    TIME,WTLPRTIM
          MOVE     SP70,WTLPSPAR
.
MVWTLP99  RETURN
