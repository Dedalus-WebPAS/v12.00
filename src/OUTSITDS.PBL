.************************************************************************
.*                                                                      *
.*                               OUTSITDS                               *
.*                                                                      *
.*     INCLUDE to display all outpatients' sites                        *
.*                                                                      *
.*     Author      : i chung                                            *
.*                                                                      *
.*     Date        : 22/02/90                                           *
.*                                                                      *
.*     File Needed : OUTSITFD    (Outpatients Site Code file)           *
.*                                                                      *
.************************************************************************
OUTSITDS  MOVE      SP6,KEY6
          CALL      RDSSITA1
          CALL      RDKSITA1
          BRANCH    OVRCD,OUTSI400
.
. ------  display Heading and then loop over entries  ------
.
          DISPLAY   *P1:3,*EF,*P15:4,*V2LON,*ULON,"OUTPATIENTS' SITES"
.
          MOVE      SIX,CVERT
          CALL      RDSSITA1
.
OUTSI100  CALL      RDKSITA1
          BRANCH    OVRCD,OUTSI500
.
          DISPLAY   *P1:CVERT,*V2LON,OSTSITE,SP2,*HOFF,OSTDESC;
          ADD       ONE,CVERT
          COMPARE   TWENTY3,CVERT
          GOTO      OUTSI100 IF LESS
.
OUTSI200  DISPLAY   *P1:24,*EL,"(",*V2LON,"C",*HOFF,")ontinue, ":
                    "(",*V2LON,"F",*HOFF,")irst Screen, ":
                    "(",*V2LON,"N",*HOFF,")ext Screen : "
OUTSI210  KEYIN     *P45:24,*DV,UNDLN1,*P45:24,*V2LON,ANS
.
          ENDSET    ANS
          APPEND    SP1,ANS
          RESET     ANS
.
          MATCH     SP1,ANS
          GOTO      OUTSI220 IF EQUAL
.
          REP       UPPLOW,ANS
          DISPLAY   *P45:24,*V2LON,ANS
.
          CMATCH    ANSN,ANS
          GOTO      OUTSI220 IF EQUAL
          CMATCH    ANSC,ANS
          GOTO      OUTSI500 IF EQUAL
          CMATCH    ANSF,ANS
          GOTO      OUTSITDS IF EQUAL
          BEEP
          GOTO      OUTSI210
.
OUTSI220  MOVE      SIX,CVERT
          DISPLAY   *P1:5,*EF
          GOTO      OUTSI100
.
. ------  if missing Dietary Message code show code missing  ------
.
OUTSI400  DISPLAY   *P1:4,*EF,*P30:4,*V2LON,*BLINKON:
                    "No Outpatients' Site codes on file",*W2;
          MOVE      ONE,OVRCD
          GOTO      OUTSI999
.
. ------  end of codes  ------
.
OUTSI500  MOVE      ZERO,OVRCD
.
OUTSI999  RETURN
+
