. *----------------------------------------------------------------------
. * Include Name  :   PMSRGNTM.PBL
. *
. * Function      :   CGI variables for PMSRGNFD - pmsrgnaf.dat
. *
. * Includes Needed :
. *
. *----------------------------------------------------------------------
.  Modifications Done :
.
.  V10.00.00  26/05/2010  Jill Parkinson CAR 222551
.             Created include
.------------------------------------------------------------------------
.   Clear Parameters for pregnancy details table
.------------------------------------------------------------------------
.         
CPPMRG00  MOVE      Z70,PMRGN001
          MOVE      Z70,PMRGN002
          MOVE      Z70,PMRGN003
          MOVE      Z70,PMRGN004
          MOVE      Z70,PMRGN005
          MOVE      Z70,PMRGN006
          MOVE      Z70,PMRGN007
          MOVE      Z70,PMRGN008
          MOVE      Z70,PMRGN009
          MOVE      Z70,PMRGN010
          MOVE      Z70,PMRGN011
          MOVE      Z70,PMRGN012
          MOVE      Z70,PMRGN013
          MOVE      Z70,PMRGN014
          MOVE      Z70,PMRGN015
          MOVE      Z70,PMRGN016
          MOVE      Z70,PMRGN017
          MOVE      Z70,PMRGN018
          MOVE      Z70,PMRGN019
          MOVE      Z70,PMRGN020
          MOVE      Z70,PMRGN021
          MOVE      Z70,PMRGN022
          MOVE      Z70,PMRGN023
          MOVE      Z70,PMRGN024
          MOVE      Z70,PMRGN025
          MOVE      Z70,PMRGN026
          MOVE      Z70,PMRGN027
          MOVE      Z70,PMRGN028
          MOVE      Z70,PMRGN029
          MOVE      Z70,PMRGN030
          MOVE      Z70,PMRGN031
          MOVE      Z70,PMRGN032
          MOVE      Z70,PMRGN033
          MOVE      Z70,PMRGN034
          MOVE      Z70,PMRGN035
          MOVE      Z70,PMRGN036
          MOVE      Z70,PMRGN037
          MOVE      Z70,PMRGN038
          MOVE      Z70,PMRGN039
          MOVE      Z70,PMRGN040
          MOVE      Z70,PMRGN041
          MOVE      Z70,PMRGN042
          MOVE      Z70,PMRGN043
          MOVE      Z70,PMRGN044
          MOVE      Z70,PMRGN045
          MOVE      Z70,PMRGN046
          MOVE      Z70,PMRGN047
          MOVE      Z70,PMRGN048
          MOVE      Z70,PMRGN049
          MOVE      Z70,PMRGN050
          MOVE      Z70,PMRGN051
          MOVE      Z70,PMRGN052
.
CPPMRG99  RETURN
+
.------------------------------------------------------------
. Output pregnancy details
.------------------------------------------------------------
PMRG0000  BRANCH    FLDITMNO,PMRG0010,PMRG0020,PMRG0030,PMRG0040,PMRG0050:
                             PMRG0060,PMRG0070,PMRG0080,PMRG0090,PMRG0100:
                             PMRG0110,PMRG0120,PMRG0130,PMRG0140,PMRG0150:
                             PMRG0160,PMRG0170,PMRG0180,PMRG0190,PMRG0200:
                             PMRG0210,PMRG0220,PMRG0230,PMRG0240,PMRG0250:
                             PMRG0260,PMRG0270,PMRG0280,PMRG0290,PMRG0300:
                             PMRG0310,PMRG0320,PMRG0330,PMRG0340,PMRG0350:
                             PMRG0360,PMRG0370,PMRG0380,PMRG0390,PMRG0400:
                             PMRG0410,PMRG0420,PMRG0430,PMRG0440,PMRG0450:
                             PMRG0460,PMRG0470,PMRG0480,PMRG0490,PMRG0500:
                             PMRG0510,PMRG0520,PMRG0530,PMRG0540,PMRG0550:
                             PMRG0560,PMRG0570,PMRG0580,PMRG0590,PMRG0600
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      PMRG9999
.
PMRG0010  WRITE     HTMLFILE;PMRGURNO;      * UR number
          GOTO      PMRG9999
.
PMRG0020  WRITE     HTMLFILE;PMRGUNIQ;      * Pregnancy Unique Id
          GOTO      PMRG9999
.
PMRG0030  WRITE     HTMLFILE;PMRGCNTR;      * Record counter
          GOTO      PMRG9999
.
PMRG0040  WRITE     HTMLFILE;PMRGGRAV;      * Gravidity
          GOTO      PMRG9999
.
PMRG0050  WRITE     HTMLFILE;PMRGTOTL;      * Total Previous Pregnancies
          GOTO      PMRG9999
.
PMRG0060  WRITE     HTMLFILE;PMRGTOPL;      * Total Prev Live Birth
          GOTO      PMRG9999                * died < 28 days
.
PMRG0070  WRITE     HTMLFILE;PMRGTOPB;      * Total Prev Live Birth
          GOTO      PMRG9999                * died > 28 days
.
PMRG0080  WRITE     HTMLFILE;PMRGCURL;      * Current no of Live Children
          GOTO      PMRG9999
.
PMRG0090  WRITE     HTMLFILE;PMRGTOPS;      * Total Previous Still Births
          GOTO      PMRG9999
.
PMRG0100  WRITE     HTMLFILE;PMRGTPND;      * Total Previous Neonatal deaths
          GOTO      PMRG9999
.
PMRG0110  WRITE     HTMLFILE;PMRGTPAS;      * Total Prev Abortions - Spontaneous
          GOTO      PMRG9999
.
PMRG0120  WRITE     HTMLFILE;PMRGTPAI;      * Total Prev Abortions - Induced
          GOTO      PMRG9999
.
PMRG0130  WRITE     HTMLFILE;PMRGTPEO;      * Total Prev Ectopic Outcomes
          GOTO      PMRG9999
.
PMRG0140  WRITE     HTMLFILE;PMRGTPUO;      * Total Prev Unknown Outcomes
          GOTO      PMRG9999
.
PMRG0150  MATCH     PMRGDATE,SP70           * Date last pregnancy completed
          GOTO      PMRG9999 IF EQUAL
          UNPACK    PMRGDATE,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMRG9999
.
PMRG0160  MOVE      "PA",CATEGORY           * Outcome of last pregnancy
          MOVE      PMRGOUTL,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0170  MOVE      "PM",CATEGORY           * Last Birth Multiple
          MOVE      PMRGLASM,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0180  UNPACK    DIM127,D1,KEY1,DIM127   * Last Birth Caesarean
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,PMRG0185
.
          WRITE     HTMLFILE;PMRGLASC;
          GOTO      PMRG9999
.
PMRG0185  MOVE      NO,YESNO
          MATCH     "1",PMRGLASC
          IF        @EQUAL
            MOVE      YES,YESNO
          ENDIF
          WRITE     HTMLFILE;YESNO;
          GOTO      PMRG9999
.
PMRG0190  WRITE     HTMLFILE;PMRGTOTS;      * Total Previous Caesareans
          GOTO      PMRG9999
.
PMRG0200  MOVE      "PB",CATEGORY           * Plan for VBAC
          MOVE      PMRGPLVB,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0210  MOVE      "PJ",CATEGORY           * Intended Setting for Birth
          MOVE      PMRGISBR,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0220  MATCH     PMRGDATM,SP70           * Date of Last Menstrual Period
          GOTO      PMRG9999 IF EQUAL
          UNPACK    PMRGDATM,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMRG9999
.
PMRG0230  MATCH     PMRGESTD,SP70           * Est Due Date
          GOTO      PMRG9999 IF EQUAL
          UNPACK    PMRGESTD,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMRG9999
.
PMRG0240  MOVE      "PL",CATEGORY           * Est Due Date Based On
          MOVE      PMRGEDDB,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0250  WRITE     HTMLFILE;PMRGHGHT;   * Height
          GOTO      PMRG9999
.
PMRG0260  WRITE     HTMLFILE;PMRGWGHT;   * Weight
          GOTO      PMRG9999
.
PMRG0270  WRITE     HTMLFILE;PMRGESGA;   * Est Gestation
          GOTO      PMRG9999
.
PMRG0280  MATCH     PMRGEGAS,SP70        * Est Gestation as at
          GOTO      PMRG9999 IF EQUAL
          UNPACK    PMRGEGAS,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMRG9999
.
PMRG0290  WRITE     HTMLFILE;PMRGNU14;   * No of Ultrasounds 10-14 weeks
          GOTO      PMRG9999
.
PMRG0300  WRITE     HTMLFILE;PMRGNU26;   * No of Ultrasounds 15-26 weeks
          GOTO      PMRG9999
.
PMRG0310  WRITE     HTMLFILE;PMRGNU27;   * No of Ultrasounds > 27 weeks
          GOTO      PMRG9999
.
PMRG0320  WRITE     HTMLFILE;PMRGML20;   * Maternal Smoking <20 weeks (no cigs)
          GOTO      PMRG9999
.
PMRG0330  WRITE     HTMLFILE;PMRGMG20;   * Maternal Smoking >20 weeks (no cigs)
          GOTO      PMRG9999
.
PMRG0340  MOVE      "PN",CATEGORY        * Antenatal Care Received
          MOVE      PMRGACRC,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0350  MOVE      "PX",CATEGORY        * Discipline of Antenatal Care Prov
          MOVE      PMRGDACP,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0360  PACK      GENPCODE,PMRGANCP,SP70
          CALL      HCPDET00              * Antenatal Care Provider
          GOTO      PMRG9999
.
PMRG0370  MOVE      "SB",CATEGORY        * Actual Setting of Birth
          MOVE      PMRGASBR,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0380  WRITE     HTMLFILE;PMRGASBF;   * Actual Setting of Birth Free Format
          GOTO      PMRG9999
.
PMRG0390  MOVE      "SV",CATEGORY        * Change of Intent of Birth Setting
          MOVE      PMRGCIBS,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0400  MOVE      "SX",CATEGORY        * Reason for Change Intent
          MOVE      PMRGCIBR,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0410  MOVE      "p1",CATEGORY        * UDF 1
          MOVE      PMRGUDF1,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0420  MOVE      "p2",CATEGORY        * UDF 2
          MOVE      PMRGUDF2,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0430  MOVE      "p3",CATEGORY        * UDF 3
          MOVE      PMRGUDF3,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0440  MOVE      "p4",CATEGORY        * UDF 4
          MOVE      PMRGUDF4,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0450  MOVE      "p5",CATEGORY        * UDF 5
          MOVE      PMRGUDF5,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0460  MOVE      "p6",CATEGORY        * UDF 6
          MOVE      PMRGUDF6,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0470  MOVE      "p7",CATEGORY        * UDF 7
          MOVE      PMRGUDF7,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0480  MOVE      "p8",CATEGORY        * UDF 8
          MOVE      PMRGUDF8,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0490  MOVE      "p9",CATEGORY        * UDF 9
          MOVE      PMRGUDF9,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0500  MOVE      "p0",CATEGORY        * UDF 10
          MOVE      PMRGUDF0,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0510  UNPACK    DIM127,D1,KEY1,DIM127     * .0   Web User ID rec. creator
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,PMRG0515
          WRITE     HTMLFILE;PMRGWEBC;
          GOTO      PMRG9999
PMRG0515  PACK      KEY10,PMRGWEBC,SP70       * .1
          CALL      RDWBSE1
          BRANCH    OVRCD,PMRG9999
          WRITE     HTMLFILE;WBSENAM;
          GOTO      PMRG9999
.
PMRG0520  MATCH     PMRGDATC,SP70             * Date Record Created
          GOTO      PMRG9999 IF EQUAL
          UNPACK    PMRGDATC,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      PMRG9999
.
PMRG0530  MATCH     PMRGTIMC,SP70             * Time Record Created
          GOTO      PMRG9999 IF EQUAL
          WRITE     HTMLFILE;PMRGTIMC;
          GOTO      PMRG9999
.
PMRG0540  CALL      RGNLS000                  * List of pmsrgnaf
          GOTO      PMRG9999
.
PMRG0550  CALL      AUDR0000                  * List of pmsrgnaf audit records
          GOTO      PMRG9999
.
PMRG0560  WRITE     HTMLFILE;BRTHUNIQ;   * Unique Birth ID
          GOTO      PMRG9999
.
PMRG0570  WRITE     HTMLFILE;SUPERFLG;   * Supervisor Flag
          GOTO      PMRG9999
.
PMRG0580  MOVE      "FY",CATEGORY           * Reason for Change (Cat FY)
          MOVE      PMRGREAS,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0590  MOVE      "FB",CATEGORY           * Completion Code (Cat FB)
          MOVE      PMRGCOMP,CODE
          CALL      CODITM00
          GOTO      PMRG9999
.
PMRG0600  MATCH     SP70,PBDATE
          GOTO      PMRG9999 IF EQUAL
          UNPACK    PBDATE,CCENT,CYEAR,CMON,CDAY
          MATCH     "00",CDAY
          GOTO      PMRG9999 IF EQUAL
.
          CALL      IBACLOCK
          IF        PCEASE=1
            MATCH     SP70,PDECDTE
            IF        @EQUAL
              PACK      AGEDATE,CCC,CYY,CMM,CDD    * Today's date
            ELSE
              MOVE      PDECDTE,AGEDATE            * Date of Death
            ENDIF
          ELSE
            PACK      AGEDATE,CCC,CYY,CMM,CDD    * Today's date
          ENDIF
          REP       " 0",AGEDATE
          CALL      CALCAGE
          IF        PSAGEYRS<10
            WRITE     HTMLFILE;ONE;
          ENDIF
          GOTO      PMRG9999
.
PMRG9999  RETURN
+
.------------------------------------------------------------
.   Set Parameters for Pregnancy Details table
.------------------------------------------------------------
SPMRG000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPMRG001,SPMRG002,SPMRG003,SPMRG004,SPMRG005:
                       SPMRG006,SPMRG007,SPMRG008,SPMRG009,SPMRG010:
                       SPMRG011,SPMRG012,SPMRG013,SPMRG014,SPMRG015:
                       SPMRG016,SPMRG017,SPMRG018,SPMRG019,SPMRG020:
                       SPMRG021,SPMRG022,SPMRG023,SPMRG024,SPMRG025:
                       SPMRG026,SPMRG027,SPMRG028,SPMRG029,SPMRG030:
                       SPMRG031,SPMRG032,SPMRG033,SPMRG034,SPMRG035:
                       SPMRG036,SPMRG037,SPMRG038,SPMRG039,SPMRG040:
                       SPMRG041,SPMRG042,SPMRG043,SPMRG044,SPMRG045:
                       SPMRG046,SPMRG047,SPMRG048,SPMRG049,SPMRG050:
                       SPMRG051,SPMRG052
.
          MOVE      ONE,EXIT
          GOTO      SPMRG999
. 
SPMRG001  PACK      PMRGN001,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG002  PACK      PMRGN002,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG003  PACK      PMRGN003,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG004  PACK      PMRGN004,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG005  PACK      PMRGN005,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG006  PACK      PMRGN006,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG007  PACK      PMRGN007,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG008  PACK      PMRGN008,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG009  PACK      PMRGN009,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG010  PACK      PMRGN010,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG011  PACK      PMRGN011,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG012  PACK      PMRGN012,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG013  PACK      PMRGN013,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG014  PACK      PMRGN014,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG015  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMRGN015,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRG999
.
SPMRG016  PACK      PMRGN016,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG017  PACK      PMRGN017,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG018  PACK      PMRGN018,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG019  PACK      PMRGN019,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG020  PACK      PMRGN020,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG021  PACK      PMRGN021,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG022  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMRGN022,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRG999
.
SPMRG023  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMRGN023,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRG999
.
SPMRG024  PACK      PMRGN024,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG025  PACK      PMRGN025,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG026  PACK      PMRGN026,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG027  PACK      PMRGN027,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG028  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      PMRGN028,CCENT,CYEAR,CMON,CDAY
          GOTO      SPMRG999
.
SPMRG029  PACK      PMRGN029,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG030  PACK      PMRGN030,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG031  PACK      PMRGN031,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG032  PACK      PMRGN032,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG033  PACK      PMRGN033,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG034  PACK      PMRGN034,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG035  PACK      PMRGN035,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG036  PACK      PMRGN036,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG037  PACK      PMRGN037,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG038  PACK      PMRGN038,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG039  PACK      PMRGN039,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG040  PACK      PMRGN040,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG041  PACK      PMRGN041,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG042  PACK      PMRGN042,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG043  PACK      PMRGN043,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG044  PACK      PMRGN044,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG045  PACK      PMRGN045,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG046  PACK      PMRGN046,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG047  PACK      PMRGN047,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG048  PACK      PMRGN048,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG049  PACK      PMRGN049,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG050  PACK      PMRGN050,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG051  PACK      PMRGN051,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG052  PACK      PMRGN052,QRYDATA,SP70
          GOTO      SPMRG999
.
SPMRG999  RETURN
+
.------------------------------------------------------------
.  Update pregnancy details file
.------------------------------------------------------------
MVPMRG00  MATCH     PMRGN001,Z70
          IF        !@EQUAL
            MOVE      PMRGN001,PMRGURNO
          ENDIF
.
          MATCH     PMRGN002,Z70
          IF        !@EQUAL
            MOVE      PMRGN002,PMRGUNIQ
          ENDIF
.
          MATCH     PMRGN003,Z70
          IF        !@EQUAL
            MOVE      PMRGN003,PMRGCNTR
          ENDIF
.
          MATCH     PMRGN004,Z70
          IF        !@EQUAL
            MOVE      PMRGN004,PMRGGRAV
          ENDIF
.
          MATCH     PMRGN005,Z70
          IF        !@EQUAL
            MOVE      PMRGN005,PMRGTOTL
          ENDIF
.
          MATCH     PMRGN006,Z70
          IF        !@EQUAL
            MOVE      PMRGN006,PMRGTOPL
          ENDIF
.
          MATCH     PMRGN007,Z70
          IF        !@EQUAL
            MOVE      PMRGN007,PMRGTOPB
          ENDIF
.
          MATCH     PMRGN008,Z70
          IF        !@EQUAL
            MOVE      PMRGN008,PMRGCURL
          ENDIF
.
          MATCH     PMRGN009,Z70
          IF        !@EQUAL
            MOVE      PMRGN009,PMRGTOPS
          ENDIF
.
          MATCH     PMRGN010,Z70
          IF        !@EQUAL
            MOVE      PMRGN010,PMRGTPND
          ENDIF
.
          MATCH     PMRGN011,Z70
          IF        !@EQUAL
            MOVE      PMRGN011,PMRGTPAS
          ENDIF
.
          MATCH     PMRGN012,Z70
          IF        !@EQUAL
            MOVE      PMRGN012,PMRGTPAI
          ENDIF
.
          MATCH     PMRGN013,Z70
          IF        !@EQUAL
            MOVE      PMRGN013,PMRGTPEO
          ENDIF
.
          MATCH     PMRGN014,Z70
          IF        !@EQUAL
            MOVE      PMRGN014,PMRGTPUO
          ENDIF
.
          MATCH     PMRGN015,Z70
          IF        !@EQUAL
            MOVE      PMRGN015,PMRGDATE
          ENDIF
.
          MATCH     PMRGN016,Z70
          IF        !@EQUAL
            MOVE      PMRGN016,PMRGOUTL
          ENDIF
.
          MATCH     PMRGN017,Z70
          IF        !@EQUAL
            MOVE      PMRGN017,PMRGLASM
          ENDIF
.
          MATCH     PMRGN018,Z70
          IF        !@EQUAL
            MOVE      PMRGN018,PMRGLASC
          ENDIF
.
          MATCH     PMRGN019,Z70
          IF        !@EQUAL
            MOVE      PMRGN019,PMRGTOTS
          ENDIF
.
          MATCH     PMRGN020,Z70
          IF        !@EQUAL
            MOVE      PMRGN020,PMRGPLVB
          ENDIF
.
          MATCH     PMRGN021,Z70
          IF        !@EQUAL
            MOVE      PMRGN021,PMRGISBR
          ENDIF
.
          MATCH     PMRGN022,Z70
          IF        !@EQUAL
            MOVE      PMRGN022,PMRGDATM
          ENDIF
.
          MATCH     PMRGN023,Z70
          IF        !@EQUAL
            MOVE      PMRGN023,PMRGESTD
          ENDIF
.
          MATCH     PMRGN024,Z70
          IF        !@EQUAL
            MOVE      PMRGN024,PMRGEDDB
          ENDIF
.
          MATCH     PMRGN025,Z70
          IF        !@EQUAL
            MOVE      PMRGN025,PMRGHGHT
          ENDIF
.
          MATCH     PMRGN026,Z70
          IF        !@EQUAL
            MOVE      PMRGN026,PMRGWGHT
          ENDIF
.
          MATCH     PMRGN027,Z70
          IF        !@EQUAL
            MOVE      PMRGN027,PMRGESGA
          ENDIF
.
          MATCH     PMRGN028,Z70
          IF        !@EQUAL
            MOVE      PMRGN028,PMRGEGAS
          ENDIF
.
          MATCH     PMRGN029,Z70
          IF        !@EQUAL
            MOVE      PMRGN029,PMRGNU14
          ENDIF
.
          MATCH     PMRGN030,Z70
          IF        !@EQUAL
            MOVE      PMRGN030,PMRGNU26
          ENDIF
.
          MATCH     PMRGN031,Z70
          IF        !@EQUAL
            MOVE      PMRGN031,PMRGNU27
          ENDIF
.
          MATCH     PMRGN032,Z70
          IF        !@EQUAL
            MOVE      PMRGN032,PMRGML20
          ENDIF
.
          MATCH     PMRGN033,Z70
          IF        !@EQUAL
            MOVE      PMRGN033,PMRGMG20
          ENDIF
.
          MATCH     PMRGN034,Z70
          IF        !@EQUAL
            MOVE      PMRGN034,PMRGACRC
          ENDIF
.
          MATCH     PMRGN035,Z70
          IF        !@EQUAL
            MOVE      PMRGN035,PMRGDACP
          ENDIF
.
          MATCH     PMRGN036,Z70
          IF        !@EQUAL
            MOVE      PMRGN036,PMRGANCP
          ENDIF
.
          MATCH     PMRGN037,Z70
          IF        !@EQUAL
            MOVE      PMRGN037,PMRGASBR
          ENDIF
.
          MATCH     PMRGN038,Z70
          IF        !@EQUAL
            MOVE      PMRGN038,PMRGASBF
          ENDIF
.
          MATCH     PMRGN039,Z70
          IF        !@EQUAL
            MOVE      PMRGN039,PMRGCIBS
          ENDIF
.
          MATCH     PMRGN040,Z70
          IF        !@EQUAL
            MOVE      PMRGN040,PMRGCIBR
          ENDIF
.
          MATCH     PMRGN041,Z70
          IF        !@EQUAL
            MOVE      PMRGN041,PMRGUDF1
          ENDIF
.
          MATCH     PMRGN042,Z70
          IF        !@EQUAL
            MOVE      PMRGN042,PMRGUDF2
          ENDIF
.
          MATCH     PMRGN043,Z70
          IF        !@EQUAL
            MOVE      PMRGN043,PMRGUDF3
          ENDIF
.
          MATCH     PMRGN044,Z70
          IF        !@EQUAL
            MOVE      PMRGN044,PMRGUDF4
          ENDIF
.
          MATCH     PMRGN045,Z70
          IF        !@EQUAL
            MOVE      PMRGN045,PMRGUDF5
          ENDIF
.
          MATCH     PMRGN046,Z70
          IF        !@EQUAL
            MOVE      PMRGN046,PMRGUDF6
          ENDIF
.
          MATCH     PMRGN047,Z70
          IF        !@EQUAL
            MOVE      PMRGN047,PMRGUDF7
          ENDIF
.
          MATCH     PMRGN048,Z70
          IF        !@EQUAL
            MOVE      PMRGN048,PMRGUDF8
          ENDIF
.
          MATCH     PMRGN049,Z70
          IF        !@EQUAL
            MOVE      PMRGN049,PMRGUDF9
          ENDIF
.
          MATCH     PMRGN050,Z70
          IF        !@EQUAL
            MOVE      PMRGN050,PMRGUDF0
          ENDIF
.
          MATCH     PMRGN051,Z70
          IF        !@EQUAL
            MOVE      PMRGN051,PMRGREAS
          ENDIF
.
          MATCH     PMRGN052,Z70
          IF        !@EQUAL
            MOVE      PMRGN052,PMRGCOMP
          ENDIF
.
MVPMRG99  RETURN
+
.------------------------------------------------------------
.   List of most recent records on pmsrgnaf
.------------------------------------------------------------
RGNLS000  MOVE      SP70,CURRUNIQ
.
          PACK      KEY21,URNUMBER,Z70
          CALL      RSPMRGN1
RGNLS100  CALL      RPPMRGN1
          BRANCH    OVRCD,RGNLS999
.
          MATCH     URNUMBER,PMRGURNO
          GOTO      RGNLS999 IF NOT EQUAL
.
          MATCH     SP70,CURRUNIQ
          GOTO      RGNLS200 IF EQUAL
.
          MATCH     CURRUNIQ,PMRGUNIQ
          GOTO      RGNLS200 IF NOT EQUAL
.
          GOTO      RGNLS100
.
RGNLS200  PACK      CURRUNIQ,PMRGUNIQ
          CLEAR     HTMLLINK
          APPEND    "javascript:ViewDetails('",HTMLLINK
          APPEND    URNUMBER,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMRGUNIQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMRGCNTR,HTMLLINK
          APPEND    "')",HTMLLINK
          RESET     HTMLLINK
          CLEAR     HTMLLNK2
          APPEND    "javascript:AuditDetails('",HTMLLNK2
          APPEND    URNUMBER,HTMLLNK2
          APPEND    "','",HTMLLNK2
          APPEND    PMRGUNIQ,HTMLLNK2
          APPEND    "','",HTMLLNK2
          APPEND    PMRGCNTR,HTMLLNK2
          APPEND    "')",HTMLLNK2
          RESET     HTMLLNK2
          PACK      TDESC,SP70
.
          MATCH     SP70,PMRGCOMP
          GOTO      RGNLS300 IF EQUAL
          PACK      KEY5,ANSF,ANSB,PMRGCOMP,SP70
          CALL      RDCODE1
          IF        OVRCD=1
            PACK      TDESC,SP70
          ENDIF
.
RGNLS300  WRITE     HTMLFILE;"t.addRow(#"",HTMLLINK,"#",":
                             "#"",PMRGUNIQ,"#",":
                             "#"",PMRGESTD,"#",":
                             "#"",PMRGEDDB,"#",":
                             "#"",PMRGTOTL,"#",":
                             "#"",HTMLLNK2,"#",":
                             "#"",TDESC,"#");"
.
          GOTO      RGNLS100
.
RGNLS999  RETURN
+
.------------------------------------------------------------
.   List of Audit records on pmsrgnaf
.------------------------------------------------------------
AUDR0000  MATCH     SP70,PREGUNIQ
          GOTO      AUDR9999 IF EQUAL
.
          PACK      KEY21,URNUMBER,PREGUNIQ,Z70
          CALL      RSPMRGN1
AUDR0100  CALL      RPPMRGN1
          BRANCH    OVRCD,AUDR9999
.
          MATCH     URNUMBER,PMRGURNO
          GOTO      AUDR9999 IF NOT EQUAL
.
          MATCH     PREGUNIQ,PMRGUNIQ
          GOTO      AUDR9999 IF NOT EQUAL
.
          PACK      CURRUNIQ,PMRGUNIQ
          CLEAR     HTMLLINK
          APPEND    "javascript:ViewDetails('",HTMLLINK
          APPEND    URNUMBER,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMRGUNIQ,HTMLLINK
          APPEND    "','",HTMLLINK
          APPEND    PMRGCNTR,HTMLLINK
          APPEND    "')",HTMLLINK
          RESET     HTMLLINK
.
          MATCH     SP70,PMRGCOMP
          GOTO      RGNLS300 IF EQUAL
          PACK      KEY5,ANSF,ANSB,PMRGCOMP,SP70
          CALL      RDCODE1
          IF        OVRCD=1
            PACK      TDESC,SP70
          ENDIF
.
          WRITE     HTMLFILE;"t.addRow(#"",HTMLLINK,"#",":
                             "#"",PMRGUNIQ,"#",":
                             "#"",PMRGESTD,"#",":
                             "#"",PMRGEDDB,"#",":
                             "#"",PMRGTOTL,"#",":
                             "#"",PMRGCNTR,"#",":
                             "#"",PMRGWEBC,"#",":
                             "#"",PMRGDATC,"#",":
                             "#"",PMRGTIMC,"#",":
                             "#"",TDESC,"#");"
.
          GOTO      AUDR0100
.
AUDR9999  RETURN
+

