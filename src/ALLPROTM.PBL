. *----------------------------------------------------------------------
. * Include Name  :   ALLPROTM.PBL
. *
. * Function      :   CGI variables for ALLPROFD - allproaf.dat
. *
. * Includes Needed :
. *
. *----------------------------------------------------------------------
.  Modifications Done :
.
.  V10.11.01  14/11/2017  Don Nguyen        TSK 0816814
.             Added ALPO0150 - Clinical Coding System Mappings Table
.  V10.06.00  06/05/2015  Ebon Clements     CAR 303890
.             Created include
. *----------------------------------------------------------------------
.------------------------------------------------------------------------
.   Clear Parameters for allied health department procedures
.------------------------------------------------------------------------
CPALPO00  MOVE      Z70,ALPRO001
          MOVE      Z70,ALPRO002
          MOVE      Z70,ALPRO003
          MOVE      Z70,ALPRO004
          MOVE      Z70,ALPRO005
          MOVE      Z70,ALPRO006
          MOVE      Z70,ALPRO007
          MOVE      Z70,ALPRO008
          MOVE      Z70,ALPRO009
          MOVE      Z70,ALPRO010
          MOVE      Z70,ALPRO011
          MOVE      Z70,ALPRO012
          MOVE      Z70,ALPRO013
.
CPALPO99  RETURN
.
.------------------------------------------------------------
. Allied health department procedure file
.------------------------------------------------------------
ALPO0000  BRANCH    FLDITMNO,ALPO0010,ALPO0020,ALPO0030,ALPO0040,ALPO0050:
                             ALPO0060,ALPO0070,ALPO0080,ALPO0090,ALPO0100:
                             ALPO0110,ALPO0120,ALPO0130,ALPO0140,ALPO0150
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      ALPO9999
.
ALPO0010  MOVE      "CG",CATEGORY           * Department Code
          MOVE      DEPARTMN,CODE
          CALL      CODITM00
          GOTO      ALPO9999
.
ALPO0020  WRITE     HTMLFILE;ALPOPROC;
          GOTO      ALPO9999
.
ALPO0030  WRITE     HTMLFILE;ALPODESC;
          GOTO      ALPO9999
.
ALPO0040  WRITE     HTMLFILE;ALPOICDC;
          GOTO      ALPO9999
.
ALPO0050  WRITE     HTMLFILE;ALPOACTV;
          GOTO      ALPO9999
.
ALPO0060  MATCH     ALPOCDAT,SP70
          GOTO      ALPO9999 IF EQUAL
.
          UNPACK    ALPOCDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALPO9999
.
ALPO0070  WRITE     HTMLFILE;ALPOCTIM;
          GOTO      ALPO9999
.
ALPO0080  MATCH     SP70,ALPOCUID
          GOTO      ALPO9999 IF EQUAL
.
          PACK      KEY10,ALPOCUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      ALPOCUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      ALPO9999
.
ALPO0090  MATCH     ALPOUDAT,SP70
          GOTO      ALPO9999 IF EQUAL
.
          UNPACK    ALPOUDAT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      ALPO9999
.
ALPO0100  WRITE     HTMLFILE;ALPOUTIM;
          GOTO      ALPO9999
.
ALPO0110  MATCH     SP70,ALPOCUID
          GOTO      ALPO9999 IF EQUAL
.
          PACK      KEY10,ALPOCUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      ALPOCUID,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
          GOTO      ALPO9999
.
ALPO0120  WRITE     HTMLFILE;ALPOMHDP;
          GOTO      ALPO9999
.
ALPO0130  WRITE     HTMLFILE;ALPOMHCP;
          GOTO      ALPO9999
.
ALPO0140  MATCH     SP70,ALPOICDC
          GOTO      ALPO9999 IF EQUAL
.
          PACK      KEY9,ALPOICDC,SP70
          CALL      RDPTICO1
          IF        OVRCD=1
            MOVE    ALPOICDC,ODESC
          ENDIF
          WRITE     HTMLFILE;ODESC;
          GOTO      ALPO9999
.
ALPO0150  PACK      MAPTBIND,ALPODEPT,ALPOPROC,SP70
          CALL      VMTTAB00           * Clinical Coding System Mappings Table
          GOTO      ALPO9999
.
ALPO9999  RETURN
.
.------------------------------------------------------------
. Set Parameters for allied health department procedure file
.------------------------------------------------------------
SPALP000  MOVE      ZERO,EXIT
          UNPACK    QRYNAME,KEY5,KEY3
          MOVE      KEY3,F3
          BRANCH    F3,SPALP001,SPALP002,SPALP003,SPALP004,SPALP005:
                       SPALP006,SPALP007,SPALP008,SPALP009,SPALP010:
                       SPALP011,SPALP012,SPALP013
.
          MOVE      ONE,EXIT
          GOTO      SPALP999 
.
SPALP001  PACK      ALPRO001,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP002  PACK      ALPRO002,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP003  PACK      ALPRO003,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP004  PACK      ALPRO004,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP005  PACK      ALPRO005,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP006  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALPRO006,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALP999
.
SPALP007  PACK      ALPRO007,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP008  PACK      ALPRO008,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP009  UNPACK    QRYDATA,CDAY,KEY1,MTHNAM3,KEY1,CCENT,CYEAR
          CALL      SETMTH00                *Set CMON from MTHNAM3
          PACK      ALPRO009,CCENT,CYEAR,CMON,CDAY
          GOTO      SPALP999
.
SPALP010  PACK      ALPRO010,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP011  PACK      ALPRO011,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP012  PACK      ALPRO012,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP013  PACK      ALPRO013,QRYDATA,SP70
          GOTO      SPALP999
.
SPALP999  RETURN
.
.------------------------------------------------------------
.  Update allied health department procedure file
.------------------------------------------------------------
MVALPO00  MATCH     ALPRO001,Z70
          IF        !@EQUAL
            MOVE      ALPRO001,ALPODEPT
          ENDIF
.
          MATCH     ALPRO002,Z70
          IF        !@EQUAL
            MOVE      ALPRO002,ALPOPROC
          ENDIF
.
          MATCH     ALPRO003,Z70
          IF        !@EQUAL
            MOVE      ALPRO003,ALPODESC
          ENDIF
.
          MATCH     ALPRO004,Z70
          IF        !@EQUAL
            MOVE      ALPRO004,ALPOICDC
          ENDIF
.
          MATCH     ALPRO005,Z70
          IF        !@EQUAL
            MOVE      ALPRO005,ALPOACTV
          ENDIF
.
          MATCH     ALPRO006,Z70
          IF        !@EQUAL
            MOVE      ALPRO006,ALPOCDAT
          ENDIF
.
          MATCH     ALPRO007,Z70
          IF        !@EQUAL
            MOVE      ALPRO007,ALPOCTIM
          ENDIF
.
          MATCH     ALPRO008,Z70
          IF        !@EQUAL
            MOVE      ALPRO008,ALPOCUID
          ENDIF
.
          MATCH     ALPRO009,Z70
          IF        !@EQUAL
            MOVE      ALPRO009,ALPOUDAT
          ENDIF
.
          MATCH     ALPRO010,Z70
          IF        !@EQUAL
            MOVE      ALPRO010,ALPOUTIM
          ENDIF
.
          MATCH     ALPRO011,Z70
          IF        !@EQUAL
            MOVE      ALPRO011,ALPOUUID
          ENDIF
.
          MATCH     ALPRO012,Z70
          IF        !@EQUAL
            MOVE      ALPRO012,ALPOMHDP
          ENDIF
.
          MATCH     ALPRO013,Z70
          IF        !@EQUAL
            MOVE      ALPRO013,ALPOMHCP
          ENDIF
.
MVALPO99  RETURN
