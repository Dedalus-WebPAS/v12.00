.******************************************************************************
.* System         : Patient Billing                                           *
.* Include Name   : CHKCMXPT.PBL                                              *
.* Author         : Pauline Hanson                                            *
.* Date           : 17/06/1997                                                *
.* Function       : Check if a casemix patient & get the episode type         *
.* Requires       : A valid admission record                                  *
.* Returns        : CMXFLAG   (0=patient classification,1=casemix)            *
.*                  PCFLAG    (0=casemix,1=patient classification)            *
.*                  CONTRCID  (Contract Id)                                   *
.* Modifications  :                                                           *
.*        V10.01.01 01/02/2010  J.Tan   CAR 233050                            *
.*                  Removed Contract ID from casemix funding file             *
.*        V10.00.01 13/08/2009  J.Tan   CAR 227873                            *
.*                  Fixed checking for expired contract ID                    *
.*        V9.12.02  12/10/2009  J.Tan   CAR 188108                            *
.*                  Fixed I*C on patcmxaf for Casepayment with No Casemix code*
.*        V9.12.01  04/09/2004  J.Tan   CAR 205303                            *
.*                  Added Contract ID                                         *
.*        V9.04.01  16/09/2004  J.Tan   CAR 52687                             *
.*                  Mods to use default claim code for charging               *
.*        V9.02.02  08/06/2002  J.Tan                                         *
.*                  Removed checking hospital type                            *
.*        V9.02.01  23/04/2002  J.Tan                                         *
.*                  Mods for changes done in release 6.09                     *
.*        V5.09.01  14/12/2000  Jill Habasque                                 *
.*                  Mods to use PTMICMXP instead of admission type to check   *
.*                  if a casemix patient                                      *
.******************************************************************************
+
CHKCMXPT
CCMXP000  MOVE      ZERO,EXIT
          MOVE      ZERO,CMXFLAG
          MOVE      ONE,PCFLAG
.
          OPEN      PATCMXA1,"patcmxaf"
          MATCH     SP9,CMCODE
          GOTO      CCMXP900 IF EQUAL       * No DRG code entered
.
          PACK      KEY24,ACLAIM,AFUNDH,CMCODE,CONTRCID,SP70
          CALL      RDPTCMX1
          COMPARE   ZERO,OVRCD
          GOTO      CCMXP600 IF EQUAL
.
          PACK      KEY24,ACLAIM,SP6,CMCODE,CONTRCID,SP70 
          CALL      RDPTCMX1
          COMPARE   ZERO,OVRCD
          GOTO      CCMXP600 IF EQUAL
.
          PACK      KEY24,PTCNDCLM,SP6,CMCODE,CONTRCID,SP70 
          CALL      RDPTCMX1
          BRANCH    OVRCD,CCMXP900
.
CCMXP600  MOVE      ONE,CMXFLAG             * casemix patient
          MOVE      ZERO,PCFLAG
          GOTO      CCMXP999
.
CCMXP900  MOVE      ONE,EXIT
CCMXP999  RETURN
+
.
