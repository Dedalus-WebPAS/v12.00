.----------------------------------------------------------------------
. Modifications
.
.----------------------------------------------------------------------
. V11.05.02  19.12.2024  DA Sarkies      Task 0954547
.            Commented out the <cat-c> codes to prevent potential browser
.            incapatibility
. V11.05.01  26.11.2024  Ebon Clements   Task 0954547
.            Added <cat-c> start and end tag to category=XX tag
. V11.04.03  17.06.2024  DA Sarkies      TSK 0948535
.            Created new tag to hold mobile phone number with label. Removed
.            label from original tag.
. V11.04.02  28.05.2024  DA Sarkies      TSK 0939978
.            Added code to display label after phone number
. V11.04.01  14.03.2024  DA Sarkies      TSK 0939978
.            Added subroutine to check for alternate id, and display it
.----------------------------------------------------------------------
. V11.03.01  14.03.2024  DA Sarkies      TSK 0939978
.            Added subroutine to check for alternate id, and display it
.----------------------------------------------------------------------
. V11.01.01  01/12/2021  Thanh T         TSK 0877055
.            Added MSXF7000, MSXF7100 and MSXF7200 to return last demographic
.            update details 
. V11.00.03  14/12/2020  Thanh T         TSK 0868699
.            Added MSXF6900 to return description of PTMXESPF
. V11.00.02  08/12/2020  Thanh T         TSK 0872840
.            Added MSXF6900 to return description of PTMXESPF 
. V11.00.01  08/10/2020  Ebon Clements   TSK 0898282
.            Restore logged in users WEBSECAF record
.            as the logged in hopsital could be incorrect - MSXF6300
.----------------------------------------------------------------------
. V10.13.01  06/09/2018  Tracey Nguyen      TSK 0861841
.            Added MSXF6800 - PTMXSLAC date format
. V10.10.01  29/03/2017  Ebon Clements      TSK 0833052
.            Added output for PTMXESPF
. V10.07.02  18/12/2015  Ebon Clements      CAR 294154 
.            Added output for PTMXOSMS
. V10.07.01  15/12/2015  Don Nguyen         TSK 0318657
.            Added output for PUYN2 (MSXF6500)
. V10.03.01  08/10/2013  Ebon Clements            CAR 275205
.            Added PSTAT tag
. V10.02.02  18/07/2011  Peter Vela        CAR 240067
.            Fixed OSEAS000
. V10.02.01  16/06/2011  Ebon Clements     CAR 239530 
.            Added PTMADCUD, PTMADCUT and PTMADCUU
. V10.01.02  21/03/2011  Mike Laming       CAR 240067 
.            Added MSXF6000 - Country Names Pulldown list - OSEAS000
. V10.01.01  30/11/2010  Jill Parkinson    CAR 227455 
.            Added MSXF5900 - PTMADCDT
. V9.11.02   13/08/2009  Jill Habasque      CAR 201265
.            Added MSXF5800 - PTMXSLAC - Year of last adm to psych
. V9.11.01   09/02/2009  Jill Habasque      CAR 186302
.            Added MSXF5700 - employment status
. V9.10.01   11/06/2008  Mike Laming        CAR 168794
.            Add NZ Domicile Description at MSXF5600, calls PROC NHIDOMDS
. V9.09.01   18/06/2007  Ebon Clements CAR 143550
.            Fixed trap on open of pmsrelaf in GETREL00
. V9.04.01   26/10/2005  Jill Habasque CAR 62834
.            Added output of PTMXDEAF
. v9.04.00   07.07.2005  Jill Habasque CAR 65602
.            Added outputs for relationship descriptions
. v9.02.00   17.12.2001  Pat Dirito     
.            Added field PTMXFILN.
.
.------------------------------------------------------------
. Add Patient Master Field
.------------------------------------------------------------
MSXF0000  BRANCH    FLDITMNO,MSXF0100,MSXF0200,MSXF0300,MSXF0400,MSXF0500:
                             MSXF0600,MSXF0700,MSXF0800,MSXF0900,MSXF1000:
                             MSXF1100,MSXF1200,MSXF1300,MSXF1400,MSXF1500:
                             MSXF1600,MSXF1700,MSXF1800,MSXF1900,MSXF2000:
                             MSXF2100,MSXF2200,MSXF2300,MSXF2400,MSXF2500:
                             MSXF2600,MSXF2700,MSXF2800,MSXF2900,MSXF3000:
                             MSXF3100,MSXF3200,MSXF3300,MSXF3400,MSXF3500:
                             MSXF3600,MSXF3700,MSXF3800,MSXF3900,MSXF4000:
                             MSXF4100,MSXF4200,MSXF4300,MSXF4400,MSXF4500:
                             MSXF4600,MSXF4700,MSXF4800,MSXF4900,MSXF5000:
                             MSXF5100,MSXF5200,MSXF5300,MSXF5400,MSXF5500:
                             MSXF5600,MSXF5700,MSXF5800,MSXF5900,MSXF6000:
                             MSXF6100,MSXF6200,MSXF6300,MSXF6400,MSXF6500:
                             MSXF6600,MSXF6700,MSXF6800,MSXF6900,MSXF7000:
                             MSXF7100,MSXF7200,MSXF7300,MSXF7400,MSXF7500

          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      MSXF9999
.
MSXF0100  CALL      SELPRT00
          GOTO      MSXF9999
.
MSXF0200  UNPACK    PTMXRDAT,CCENT,CYEAR,CMON,CDAY
          MATCH     SP70,PTMXRDAT
          GOTO      MSXF9999 IF EQUAL
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MSXF9999
.
MSXF0300  MATCH     SP70,PTMXMEAL
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXMEAL;
          GOTO      MSXF9999
MSXF0400  MATCH     SP70,PTMXLGA
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXLGA;
          GOTO      MSXF9999
.
MSXF0500  MOVE      "LS",CATEGORY
          MOVE      PTMXLS,CODE
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF0600  UNPACK    PTMXLSDT,CCENT,CYEAR,CMON,CDAY
          MATCH     SP70,PTMXLSDT
          GOTO      MSXF9999 IF EQUAL
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MSXF9999
.
MSXF0700  MATCH     "1",PTMXFHMD
          IF        @EQUAL
            WRITE     HTMLFILE;"Yes";
          ENDIF
          MATCH     "2",PTMXFHMD
          IF        @EQUAL
            WRITE     HTMLFILE;"No";
          ENDIF
          GOTO      MSXF9999
.
MSXF0800  MOVE      "V6",CATEGORY
          MOVE      PTMXMHU1,CODE
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF0900  MOVE      "V7",CATEGORY
          MOVE      PTMXMHU2,CODE
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF1000  MOVE      "V8",CATEGORY
          MOVE      PTMXMHU3,CODE
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF1100  MATCH     SP70,PTMXECNM
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECNM;
          GOTO      MSXF9999
MSXF1200  MATCH     SP70,PTMXECA1
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECA1;
          GOTO      MSXF9999
MSXF1300  MATCH     SP70,PTMXECA2
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECA2;
          GOTO      MSXF9999
MSXF1400  MATCH     SP70,PTMXECA3
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECA3;
          GOTO      MSXF9999
MSXF1500  MATCH     SP70,PTMXECA4
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECA4;
          GOTO      MSXF9999
MSXF1600  MATCH     SP70,PTMXECPC
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECPC;
          GOTO      MSXF9999
MSXF1700  MATCH     SP70,PTMXECPP
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECPP;
          GOTO      MSXF9999
MSXF1800  MATCH     SP70,PTMXECBP
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECBP;
          GOTO      MSXF9999
MSXF1900  MATCH     SP70,PTMXECRE
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXECRE;
          GOTO      MSXF9999
MSXF2000  MATCH     SP70,PTMXNRNM
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRNM;
          GOTO      MSXF9999
MSXF2100  MATCH     SP70,PTMXNRA1
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRA1;
          GOTO      MSXF9999
MSXF2200  MATCH     SP70,PTMXNRA2
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRA2;
          GOTO      MSXF9999
MSXF2300  MATCH     SP70,PTMXNRA3
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRA3;
          GOTO      MSXF9999
MSXF2400  MATCH     SP70,PTMXNRA4
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRA4;
          GOTO      MSXF9999
MSXF2500  MATCH     SP70,PTMXNRPC
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRPC;
          GOTO      MSXF9999
MSXF2600  MATCH     SP70,PTMXNRPP
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRPP;
          GOTO      MSXF9999
MSXF2700  MATCH     SP70,PTMXNRBP
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRBP;
          GOTO      MSXF9999
MSXF2800  MATCH     SP70,PTMXNRRE
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXNRRE;
          GOTO      MSXF9999
.
MSXF2900  UNPACK    PTMX3BEX,CCENT,CYEAR,CMON,CDAY
          MATCH     SP70,PTMX3BEX
          GOTO      MSXF9999 IF EQUAL
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MSXF9999
.
MSXF3000  MATCH     SP70,PTMXCARD
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXCARD;
          GOTO      MSXF9999
.
MSXF3100  UNPACK    PTMXCEXP,CCENT,CYEAR,CMON,CDAY
          MATCH     SP70,PTMXCEXP
          GOTO      MSXF9999 IF EQUAL
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MSXF9999
.
MSXF3200  MOVE      "XM",CATEGORY
          MOVE      PTMXCXMP,CODE
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF3300  MATCH     SP70,PTMXFMLY
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXFMLY;
          GOTO      MSXF9999
.
MSXF3400  MATCH     SP70,PTMXCHNM
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXCHNM;
          GOTO      MSXF9999
.
MSXF3500  MOVE      "DA",CATEGORY
          MOVE      PTMXDOFR,CODE
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF3600  PACK      GENPCODE,PTMXREGP,SP70
          CALL      HCPDET00
          GOTO      MSXF9999
.
MSXF3700  MOVE      ZERO,F2
          MOVE      PTMXGPPT,F2
          PACK      KEY10,PTMXGPPC,SP70
          PACK      GPPCCODE,KEY10,F2
          CALL      HCGDET00
          GOTO      MSXF9999
.
MSXF3800  MATCH     SP70,PTMXSPID
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXSPID;
          GOTO      MSXF9999
.
MSXF3900  MATCH     SP70,PTMXGPPT
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXGPPT;
          GOTO      MSXF9999
.
MSXF4000  UNPACK    PTMXOSDT,CCENT,CYEAR,CMON,CDAY
          MATCH     SP70,PTMXOSDT
          GOTO      MSXF9999 IF EQUAL
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MSXF9999
.
MSXF4100  MATCH     SP70,PTMXOPER
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXOPER;
          GOTO      MSXF9999
MSXF4200  MATCH     SP70,PTMXUKDO
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXUKDO;
          GOTO      MSXF9999
MSXF4300  MATCH     SP70,PTMXCELL
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXCELL;
          GOTO      MSXF9999
MSXF4400  MATCH     SP70,PTMXADD1
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXADD1;
          GOTO      MSXF9999
MSXF4500  MATCH     SP70,PTMXADD2
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXADD2;
          GOTO      MSXF9999
MSXF4600  MATCH     SP70,PTMXADD3
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXADD3;
          GOTO      MSXF9999
MSXF4700  MATCH     SP70,PTMXADD4
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXADD4;
          GOTO      MSXF9999
MSXF4800  MATCH     SP70,PTMXPOST
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXPOST;
          GOTO      MSXF9999
MSXF4900  MATCH     SP70,PTMXMCCD
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXMCCD;
          GOTO      MSXF9999
.
MSXF5000  MATCH     SP70,PTMXOPER
          GOTO      MSXF9999 IF EQUAL
          CALL      OPPASS1
          MOVE      PTMXOPER,KEY4
          CALL      RDPASS1
          BRANCH    OVRCD,MSXF9999
          WRITE     HTMLFILE;SECUSER;
          GOTO      MSXF9999
.
MSXF5100  MATCH     "Y",PTMXFILN    * Filing Required
          IF        @EQUAL
            WRITE     HTMLFILE;"Y";
          ELSE
            WRITE     HTMLFILE;"N";
          ENDIF
          GOTO      MSXF9999
.
MSXF5200  MATCH     SP70,PNKRELP
          GOTO      PMIX9999 IF EQUAL
          PACK      D10,PNKRELP,SP70
          PROC      GETREL00
          GOTO      PMIX9999
.
MSXF5300  MATCH     SP70,PTMXECRE
          GOTO      MSXF9999 IF EQUAL
          PACK      D10,PTMXECRE,SP70
          PROC      GETREL00
          GOTO      MSXF9999
.
MSXF5400  MATCH     SP70,PTMXNRRE
          GOTO      MSXF9999 IF EQUAL
          PACK      D10,PTMXNRRE,SP70
          PROC      GETREL00
          GOTO      MSXF9999
.
MSXF5500  MOVE      "DK",CATEGORY
          MOVE      PTMXDEAF,CODE
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF5600  MOVE      PPOST,KEY4
          PROC      NHIDOMDS                * output NHI Domicile Description
          GOTO      MSXF9999
.
MSXF5700  READ      CONTROLF,EIGHTY8;*237,PTCNEMPL
          MOVE      SP10,ACODE
          MOVE      ZERO,FORM1
          UNPACK    SP2,DIM1,D1
          UNPACK    PTCNEMPL,DIM1,D1
          MOVE      PTCNEMPL,CATEGORY
          MOVE      D1,FORM1
          MATCH     ANSU,DIM1
          IF        @EQUAL
            LOAD      CODE,FORM1,AUSR1,AUSR2,AUSR3,AUSR4,AUSR5,AUSR6,AUSR7
          ENDIF
.
          MATCH     ANSP,DIM1
          IF        @EQUAL
            LOAD      CODE,FORM1,PUSR1,PUSR2,PUSR3,PUSR4,PUSR5,PUSR6
          ENDIF
.
          CALL      CODITM00
          GOTO      MSXF9999
.
MSXF5800  MATCH     SP70,PTMXSLAC
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXSLAC;
          GOTO      MSXF9999
.
MSXF5900  MATCH     SP70,PTMADCDT
          GOTO      MSXF9999 IF EQUAL
.
          UNPACK    PTMADCDT,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      MSXF9999
.
MSXF6000  CALL      OSEAS000                * Overseas Countries Pulldown
          GOTO      MSXF9999
.
MSXF6100  MATCH     SP70,PTMADCUD
          GOTO      MSXF9999 IF EQUAL
.
          UNPACK    PTMADCUD,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      MSXF9999
.
MSXF6200  MATCH     SP70,PTMADCUT
          GOTO      MSXF9999 IF EQUAL
.
          WRITE     HTMLFILE;PTMADCUT;
          GOTO      MSXF9999
.
MSXF6300  MATCH     SP70,PTMADCUU,SP70
          GOTO      MSXF9999 IF EQUAL
.
          PACK      KEY10,PTMADCUU,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      PTMADCUU,WBSENAM
          ENDIF
          WRITE     HTMLFILE;WBSENAM;
.
          PACK      KEY10,USERID,SP70       * Restore logged in user
          CALL      RDWBSE1
.
          GOTO      MSXF9999
.
MSXF6400  WRITE     HTMLFILE;PSTAT;
          GOTO      MSXF9999
.
MSXF6500  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MSXF6510
.
          WRITE     HTMLFILE;PUYN2;
          GOTO      MSXF9999
.
MSXF6510  MOVE      SP10,YESNO
          IF        PUYN2=1
            MOVE      NO,YESNO
          ENDIF
          IF        PUYN2=2
            MOVE      YES,YESNO
          ENDIF
          WRITE     HTMLFILE;YESNO;
          GOTO      MSXF9999
.
MSXF6600  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MSXF6610
.
          MATCH     "1",PTMXOSMS
          IF        @EQUAL
            WRITE     HTMLFILE;YES;
          ELSE
            WRITE     HTMLFILE;No;
          ENDIF
          GOTO      MSXF9999
.
MSXF6610  WRITE     HTMLFILE;PTMXOSMS;
          GOTO      MSXF9999
.
.
MSXF6700  WRITE     HTMLFILE;PTMXESPF;
          GOTO      MSXF9999
.
MSXF6800  UNPACK    PTMXSLAC,CCENT,CYEAR,CMON,CDAY
          MATCH     SP70,PTMXSLAC
          GOTO      MSXF9999 IF EQUAL
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      MSXF9999
.
MSXF6900  MATCH     "0",PTMXESPF
          IF        @EQUAL
            WRITE     HTMLFILE;"No";
          ELSE
            MATCH     "1",PTMXESPF
            IF        @EQUAL
              WRITE     HTMLFILE;"Yes";
            ELSE
              MATCH     "2",PTMXESPF
              IF        @EQUAL
                WRITE     HTMLFILE;"Not Provided";
              ENDIF
            ENDIF
          ENDIF
          GOTO      MSXF9999
.
MSXF7000  MATCH     SP70,PCHGDTE
          GOTO      MSXF9999 IF EQUAL
.
          UNPACK    PCHGDTE,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR;
          GOTO      MSXF9999
.
MSXF7100  WRITE     HTMLFILE;PTMAUTIM;
          GOTO      MSXF9999
.
MSXF7200  UNPACK    DIM127,D1,KEY1,DIM127
          MATCH     SP70,PTMAUUID
          GOTO      MSXF9999 IF EQUAL
.
          MOVE      ZERO,F1
          MOVE      KEY1,F1
          BRANCH    F1,MSXF7250  
          WRITE     HTMLFILE;PTMAUUID;
          GOTO      MSXF9999
.
MSXF7250  PACK      KEY10,PTMAUUID,SP70
          CALL      RDWBSE1
          IF        OVRCD=1
            MOVE      PTMAUUID,WBSENAM
          ENDIF
          STRIP     WBSENAM
          WRITE     HTMLFILE;WBSENAM;
.
          PACK      KEY10,USERID,SP70       * Restore logged in user
          CALL      RDWBSE1
.
          GOTO      MSXF9999
.
MSXF7300  PROC      DISALTID
          GOTO      MSXF9999
.
MSXF7400  MATCH     SP70,PTELEP
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTELEP;
          WRITE     HTMLFILE;" (Home)";
          GOTO      MSXF9999
.
MSXF7500  MATCH     SP70,PTMXCELL
          GOTO      MSXF9999 IF EQUAL
          WRITE     HTMLFILE;PTMXCELL;
          WRITE     HTMLFILE;" (Mobile)";
          GOTO      MSXF9999
.
MSXF9999  RETURN
.
.------------------------------------------------------------
. Procedure to get the relationship description
.------------------------------------------------------------
          DEFPROC  GETREL00
.
          INC      PMSRELFD/INC
.
          MOVE     ZERO,OVRCD
          TRAP     OVERCOND IF IO
          OPEN     PMSRELA1,"pmsrelaf"
          TRAPCLR  IO
          BRANCH   OVRCD,GETREL95
.
          PACK     KEY10,D10,SP70
          CALL     RDPMREL1
          BRANCH   OVRCD,GETREL95
.
          WRITE    HTMLFILE;PMRLDESC;
.
          MOVE     ONE,EXIT
          GOTO     GETREL99
.
GETREL95  MOVE     ZERO,EXIT
          GOTO     GETREL99
.
          INC       PMSRELIO/INC
          INC       IBAOVRIO/INC
.
GETREL99  ENDPROC
.
.------------------------------------------------------------
.  Create Countries Pulldown List
.------------------------------------------------------------
OSEAS000  MOVE      SP70,TDESC
          MOVE      "C ",CATEGORY
          PACK      KEY5,CATEGORY,SP70
          CALL      RDCODE1
          IF        OVRCD=1
            MOVE      CATEGORY,TCODE
            MOVE      "Invalid Category",TDESC
          ENDIF
          REP       " _",TCODE
          REP       " _",THCSCOD
          WRITE     HTMLFILE;"<!--<cat-c category=#"",TCODE,"#" name=#"",TDESC:
                             "#" map=#"",THCSCOD,"#"></cat-c>-->"
.
          PACK      PTCDKEY2,CATEGORY,SP70
          CALL      RDSCODE2
OSEAS100  CALL      RDKCODE2
          BRANCH    OVRCD,OSEAS999
          MATCH     CATEGORY,TCODE
          GOTO      OSEAS999 IF NOT EQUAL
          MATCH     SP70,ACODE
          GOTO      OSEAS100 IF EQUAL
.
          MATCH     PADD4,TDESC
          IF        @EQUAL
            WRITE     HTMLFILE;"<option value=#"",TDESC,"#" selected>":
                               TDESC,"</option>"
          ELSE
            WRITE     HTMLFILE;"<option value=#"",TDESC,"#">",TDESC,"</option>"
          ENDIF
          GOTO      OSEAS100
OSEAS999  RETURN
.
.------------------------------------------------------------
. Procedure to check if a patient has an alternate ID
.------------------------------------------------------------
          DEFPROC   DISALTID
.
BLK1      DIM       4
BLK2      DIM       4
BLK3      DIM       4
BLK4      DIM       4
CATAI     INIT      "AI"
.
          INC       PMSAIDFD/INC
.
          OPEN      PMSAIDA1,"pmsaidaf"
.
          PACK      KEY31,PURNO,SP70
          CALL      RSPMAID1             * Read alternate id table
DISAID10  CALL      RKPMAID1
          BRANCH    OVRCD,DISAID99
.
          MATCH     PURNO,PMAIURNO
          GOTO      DISAID99 IF NOT EQUAL
.
          PACK      KEY5,CATAI,PMAITYPE,SP70
          CALL      RDCODE1
          BRANCH    OVRCD,DISAID10
.
          MATCH     "I",TCINDC2
          GOTO      DISAID10 IF NOT EQUAL
.
          SQUEEZE   PMAIALID
          UNPACK    PMAIALID,BLK1,BLK2,BLK3,BLK4
          WRITE     HTMLFILE;"IHI: ",BLK1," ",BLK2," ",BLK3," ",BLK4
          GOTO      DISAID99
.
          INC       PMSAIDIO/INC
          INC       IBAOVRIO/INC
.
DISAID99  CLOSE     PMSAIDA1
.
          ENDPROC
