.******************************************************************************
.*                                                                            *
.* System         : ALL                     Release 5.01                      *
.*                                                                            *
.* Include Name   : DXAAEDET.PBL                                              *
.*                                                                            *
.* Function       : To display the values from AAEDE1FD                       *
.*                  NOTE: the label numbers for this indicate the item number *
.*                        each variable is                                    *
.*                                                                            *
.* Author         : Justin Coates           29/10/1992                        *
.*                                                                            *
.* Parameters     : AAEDE1FD record for the data to display                   *
.*                  SCRSPTFD/SCRSBGFD records                                 *
.*                                                                            *
.* Includes Req'd : DXPATCOD      display a field from patcodfd               *
.*                                                                            *
.* Modifications  :                                                           *
.*        V5.08.01  06/06/2000  Jill Habasque                                 *
.*                  Changed from key10 to key14 for the health fund file      *
.*        V5.07.02  18/10/1999  Caleb Sharman  SRF 646133                     *
.*                  Mods to DAEDT006 & DAEDT010                               *
.*        V5.07.01  09/08/1999  Davin                                         *
.*                  Removed references to constants (CODExx & CATxx)          *
.******************************************************************************
.*        V5.01.01  11/02/1993  i chung           SRF 120620                  *
.*                  Fixed incorrect description displayed for "Board" when    *
.*                  going into Change mode in AAE01 - Label DAEDT037          *
.*        V5.01.02  16/09/1993    LOFTY          (DUDLEY changes)             *
.*                  allow for system parameters for priority description      *
.*                  added AEDADOIS, AEDACONS                                  *
.*        V5.01.03  04/11/1993    Justin Coates  QUOTE 440017 SRF 440204      *
.*                  allow for new GP practice file                            *
.*        V5.01.04  30/03/1994    Justin Coates                               *
.*                  added GP code - not related to a practice                 *
.*        V5.01.05  12/04/1994    Rob Leonard  Taranaki Mod (3.5.1)           *
.*                  Added AEDAPRTM - triage/priority time                     *
.*        V5.01.06  01/09/1994    Max White  SRF 600791  Quote 8041           *
.*                  Added AEDARDOC - Referred Doctor.                         *
.*        V5.02.01  11/12/1994  Graeme Williams                               *
.*                  Added option for a fifth priority code                    *
.*        V5.02.02  16/05/1995  Paul Howells         SRF 134950               *
.*                  Changed Priority Code to a hospital controlled code       *
.*        V5.04.01  24/05/1995  Paul Howells                                  *
.*                  added adanumb                                             *
.******************************************************************************
DXAAEDET  PACK      VAR,SP30,SP30,SP20
          MOVE      SCPSITM,FORM5
          BRANCH    FORM5,DAEDT001,DAEDT002,DAEDT003,DAEDT004,DAEDT005:
                          DAEDT006,DAEDT007,DAEDT008,DAEDT009,DAEDT010:
                          DAEDT011,DAEDT012,DAEDT013,DAEDT014,DAEDT015:
                          DAEDT016,DAEDT017,DAEDT018,DAEDT019,DAEDT020:
                          DAEDT021,DAEDT022,DAEDT023,DAEDT024,DAEDT025:
                          DAEDT026,DAEDT027,DAEDT028,DAEDT029,DAEDT030:
                          DAEDT031,DAEDT032,DAEDT033,DAEDT034,DAEDT035:
                          DAEDT036,DAEDT037,DAEDT038,DAEDT039,DAEDT040:
                          DAEDT041,DAEDT042,DAEDT043,DAEDT044,DAEDT045:
                          DAEDT046,DAEDT047,DAEDT048,DAEDT049,DAEDT050:
                          DAEDT051,DAEDT052,DAEDT053,DAEDT054,DAEDT055:
                          DAEDT056,DAEDT057,DAEDT058,DAEDT059,DAEDT060:
                          DAEDT061,DAEDT062,DAEDT063,DAEDT064,DAEDT065:
                          DAEDT066,DAEDT067,DAEDT068,DAEDT069,DAEDT070:
                          DAEDT071,DAEDT072,DAEDT073
          GOTO      DAEDT999
.
DAEDT001  UNPACK    ADADATE,CCENT,CYEAR,CMON,CDAY     * visit date
          CALL      PACDATE
          IF        SCPSLEN = 10
            PACK      VAR,CPCDATE,SP70,SP10
          ELSE
            PACK      VAR,CPDATE,SP70,SP10
          ENDIF
          GOTO      DAEDT995
.
DAEDT002  PACK      VAR,ADATIME,SP70,SP10             * visit time
          GOTO      DAEDT995
.
DAEDT003  PACK      VAR,ADACOMP,SP70,SP10             * compensation code
          GOTO      DAEDT995
.
DAEDT004  PACK      TCODE,ANSC,ANSL
          MOVE      ADACOMP,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT005  PACK      VAR,ADACLASS,SP70,SP10            * patient classification
          GOTO      DAEDT995
.
DAEDT006  PACK      TCODE,ANSA,SP1
          MOVE      ADACLASS,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT007  PACK      VAR,ADAINSUR,SP70,SP10            * insurance status
          GOTO      DAEDT995
.
DAEDT008  PACK      TCODE,ANSU,ONE
          MOVE      ADAINSUR,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT009  PACK      VAR,ADASRC,SP70,SP10              * source of referral
          GOTO      DAEDT995
.
DAEDT010  PACK      TCODE,ANSS,SP1
          MOVE      ADASRC,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT011  PACK      VAR,ADASIT,SP70,SP10              * situation
          GOTO      DAEDT995
.
DAEDT012  PACK      TCODE,ANSE,ANSS
          MOVE      ADASIT,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT013  PACK      VAR,ADAMODE,SP70,SP10             * mode of arrival
          GOTO      DAEDT995
.
DAEDT014  PACK      TCODE,ANSE,ANSA
          MOVE      ADAMODE,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT015  PACK      VAR,ADADOCT,SP70,SP10             * attending doctor
          GOTO      DAEDT995
.
DAEDT016  MOVE      ADADOCT,KEY6
          CALL      DXPATDOC
          GOTO      DAEDT999
.
DAEDT017  UNPACK    ADASDTE,CCENT,CYEAR,CMON,CDAY     * date actually seen
          CALL      PACDATE
          IF        SCPSLEN = TEN
            PACK      VAR,CPCDATE,SP70,SP10
          ELSE
            PACK      VAR,CPDATE,SP70,SP10
          ENDIF
          GOTO      DAEDT995
.
DAEDT018  PACK      VAR,ADASEEN,SP70,SP10             * time actually seen
          GOTO      DAEDT995
.
DAEDT019  MOVE      DNO,ACODE                         * admitted to hospital
          LOAD      ACODE,ADAADMIT,DYES,DNO
          PACK      VAR,ACODE,SP70,SP10
          GOTO      DAEDT995
.
DAEDT020  PACK      VAR,ADAUSR1,SP70,SP10             * UD field 1
          GOTO      DAEDT995
.
DAEDT021  PACK      TCODE,ANSA,ONE
          MOVE      ADAUSR1,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT022  PACK      VAR,ADAUSR2,SP70,SP10             * UD field 2
          GOTO      DAEDT995
.
DAEDT023  PACK      TCODE,ANSA,TWO
          MOVE      ADAUSR2,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT024  PACK      VAR,ADAUSR3,SP70,SP10             * UD field 3
          GOTO      DAEDT995
.
DAEDT025  PACK      TCODE,ANSA,THREE
          MOVE      ADAUSR3,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT026  PACK      VAR,ADAUSR4,SP70,SP10             * UD field 4
          GOTO      DAEDT995
.
DAEDT027  PACK      TCODE,ANSA,FOUR
          MOVE      ADAUSR4,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT028  PACK      VAR,ADAUSR5,SP70,SP10             * UD field 5
          GOTO      DAEDT995
.
DAEDT029  PACK      TCODE,ANSA,FIVE
          MOVE      ADAUSR5,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT030  PACK      VAR,ADADIAG,SP70,SP10             * diagnosis
          GOTO      DAEDT995
.
DAEDT031  PACK      VAR,ADAPRTY,SP70,SP10             * priority
          GOTO      DAEDT995
.
DAEDT032  PACK      VAR,ADAWAIT,SP70,SP10             * completion wait code
          GOTO      DAEDT995
.
DAEDT033  PACK      TCODE,ANSE,ANSW
          MOVE      ADAWAIT,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT034  PACK      VAR,ADAPREV,SP70,SP10             * previous A&E
          GOTO      DAEDT995
.
DAEDT035  PACK      TCODE,ANSE,ANSP
          MOVE      ADAPREV,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT036  PACK      VAR,AEDAFUND,SP70,SP10            * health fund
          GOTO      DAEDT995
.
DAEDT037  PACK      KEY14,AEDAFUND,ZERO,ZERO,ZERO,ZERO,SP10
          MOVE      "Invalid Health Fund",HFNAME
          CALL      RDFUND1
          PACK      VAR,HFNAME,SP70,SP10
          GOTO      DAEDT995
.
DAEDT038  PACK      VAR,AEDATBLE,SP70,SP10            * health fund table
          GOTO      DAEDT995
.
DAEDT039  PACK      KEY14,AEDAFUND,AEDATBLE,SP10
          MOVE      "Invalid Health Fund Table",HFNAME
          CALL      RDFUND1
          PACK      VAR,HFNAME,SP70,SP10
          GOTO      DAEDT995
.
DAEDT040  PACK      VAR,AEDAPVIS,SP70,SP10            * number of prev. visits
          GOTO      DAEDT995
.
.
DAEDT041  PACK      TCODE,ANSA,ANSA
          MOVE      ADAPRTY,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT042  PACK      VAR,PTVKCARD,SP70,SP10            * card number
          GOTO      DAEDT995
.
DAEDT043  UNPACK    PTVKCEXP,CCENT,CYEAR,CMON,CDAY    * card exp. date
          CALL      PACDATE
          IF        SCPSLEN = TEN
            PACK      VAR,CPCDATE,SP70,SP10
          ELSE
            PACK      VAR,CPDATE,SP70,SP10
          ENDIF
          GOTO      DAEDT995
.
DAEDT044  PACK      VAR,PTVKCXMP,SP70,SP10            * exemption code
          GOTO      DAEDT995
.
DAEDT045  PACK      TCODE,ANSX,ANSM
          MOVE      PTVKCXMP,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT046  PACK      VAR,PTVKFMLY,SP70,SP10            * family id
          GOTO      DAEDT995
.
DAEDT047  PACK      VAR,PTYPE,SP70,SP10               * patient type
          GOTO      DAEDT995
.
DAEDT048  PACK      TCODE,ANST,SP1
          MOVE      PTYPE,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT049  PACK      VAR,AEDARFGP,SP70,SP10
          GOTO      DAEDT995
.
DAEDT050  PACK      KEY10,AEDARFGP,SP70
          MOVE      "Invalid Code",PMHCSNAM
          MOVE      SP35,PMHCGNAM
          CALL      RDPMHCP1
          PACK      VAR,PMHCSNAM,SP70,SP10
          STRIP     VAR
          ENDSET    VAR
          APPEND    SP1,VAR
          APPEND    PMHCGNAM,VAR
          APPEND    SP70,VAR
          RESET     VAR
          GOTO      DAEDT995
.
DAEDT051  MOVE      "-",ANS
          MATCH     SP2,AEDAGPPT
          IF        @EQUAL
            MOVE      SP1,ANS
          ENDIF
          PACK      VAR,AEDAGPPC,ANS,AEDAGPPT,SP70,SP10
          GOTO      DAEDT995
.
DAEDT052  PACK      KEY10,AEDAGPPC,SP70
          PACK      KEY12,KEY10,AEDAGPPT,SP70
          MOVE      "Invalid Code",PMHGPNAM
          CALL      RDPMHCG1
          PACK      VAR,PMHGPNAM,SP70,SP10
          GOTO      DAEDT995
.
DAEDT053  PACK      VAR,AEDATIAS,SP70,SP10
          GOTO      DAEDT995
.
DAEDT054  PACK      VAR,AEDADTAT,SP70,SP10
          GOTO      DAEDT995
.
DAEDT055  PACK      VAR,AEDATESI,SP70,SP10
          GOTO      DAEDT995
.
DAEDT056  PACK      VAR,AEDAEMPL,SP70,SP10
          GOTO      DAEDT995
.
DAEDT057  PACK      VAR,AEDARTAS,SP70,SP10
          GOTO      DAEDT995
.
DAEDT058  PACK      TCODE,ANSA,ANSR
          MOVE      AEDARTAS,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT059  PACK      VAR,AEDAINIT,SP70,SP10       * initiator
          MOVE      SP1,TCINDC1
          PACK      KEY5,ANSA,ANSI,AEDAINIT
          CALL      RDCODE1
          MOVE      TCINDC1,IND1AI          * set up indicator
          GOTO      DAEDT995
.
DAEDT060  PACK      TCODE,ANSA,ANSI
          MOVE      AEDAINIT,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT061  PACK      VAR,AEDAPLIN,SP70,SP10       * place of incident
          GOTO      DAEDT995
.
DAEDT062  PACK      TCODE,ANSA,ANSP
          MOVE      AEDAPLIN,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT063  MOVE      "AE",TCODE                   * time elapsed description
          MOVE      AEDATESI,ACODE
          CALL      DXPATCOD
          GOTO      DAEDT999
.
DAEDT064  UNPACK    AEDADIAS,CCENT,CYEAR,CMON,CDAY    * date of initial ass.
          CALL      PACDATE
          IF        SCPSLEN = TEN
            PACK      VAR,CPCDATE,SP70,SP10
          ELSE
            PACK      VAR,CPDATE,SP70,SP10
          ENDIF
          GOTO      DAEDT995
.
DAEDT065  PACK      VAR,AEDACONS,SP70,SP10             * consultant on take
          GOTO      DAEDT995
.
DAEDT066  MOVE      AEDACONS,KEY6
          CALL      DXPATDOC
          GOTO      DAEDT999
.
DAEDT067  PACK      VAR,AEDARFGP,SP70,SP10             * GP Code
          GOTO      DAEDT995
.
DAEDT068  PACK      VAR,AEDAPRTM,SP70,SP10             * triage/priority time
          GOTO      DAEDT995
.
DAEDT069  PACK      VAR,AEDARDOC,SP70,SP10             * Referred Doctor   
          GOTO      DAEDT995
.
DAEDT070  MOVE      AEDARDOC,KEY6
          CALL      DXPATDOC
          GOTO      DAEDT999
.
DAEDT071  PACK      VAR,AEDAOPER,SP70,SP10    * security code         
          GOTO      DAEDT995
.
DAEDT072  MOVE      SP70,SECUSER
          MATCH     SP4,AEDAOPER
          IF        !@EQUAL
            CALL      OPPASS1
            PACK      KEY4,AEDAOPER,SP6
            CALL      RDPASS1  
          ENDIF
          PACK      VAR,SECUSER,SP70,SP10
          GOTO      DAEDT995
.
DAEDT073  PACK      VAR,ADANUMB,SP70,SP10    * a&e number            
          GOTO      DAEDT995
.
. ******* actually display the variable *******
.
DAEDT995  CALL      DISPITEM 
.
DAEDT999  RETURN
+
