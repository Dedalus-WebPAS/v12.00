.------------------------------------------------------------
. Legacy Patient Discharge Fields
.------------------------------------------------------------
. Modifications :          
. V9.10.01  21/05/2008  Mike Laming   CAR 168959
.           Changed READ to 'legdgwaf' to READS & READP for latest DRG code
. V9.03.00  06/05/2004  Davin         CAR 49209
.           Created from PATDSCTM
.------------------------------------------------------------
LDSC0000  BRANCH    FLDITMNO,LDSC0100,LDSC0200,LDSC0300,LDSC0400,LDSC0500:
                       LDSC0600,LDSC0700,LDSC0800,LDSC0900,LDSC1000:
                       LDSC1100,LDSC1200,LDSC1300,LDSC1400,LDSC1500:
                       LDSC1600,LDSC1700,LDSC1800,LDSC1900,LDSC2000:
                       LDSC2100,LDSC2200,LDSC2300,LDSC2400,LDSC2500:
                       LDSC2600,LDSC2700,LDSC2800,LDSC2900
.
          WRITE     HTMLFILE;"Invalid IBA Tag";
          GOTO      LDSC9999
.
LDSC0100  MATCH     SP6,LDDATE
          GOTO      LDSC0150 IF EQUAL 
          IF        @EOS
            GOTO      LDSC0150
          ENDIF
.
          UNPACK    LDDATE,CCENT,CYEAR,CMON,CDAY
          MOVE      CMON,F2
          LOAD      MTHNAM3,F2,JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC
          WRITE     HTMLFILE;CDAY,SP1,MTHNAM3,SP1,CCENT,CYEAR
          GOTO      LDSC9999
.
LDSC0150  MOVE      SP3,MTHNAM3
          MOVE      SP2,CCENT
          MOVE      SP2,CYEAR
          MOVE      SP2,CMON
          MOVE      SP2,CDAY
          GOTO      LDSC9999
.
LDSC0200  WRITE     HTMLFILE;LDTIME;
          GOTO      LDSC9999
.
LDSC0300  MOVE      "D ",CATEGORY
          MOVE      LDSTAT,CODE
          CALL      LCDITM00
          GOTO      DOCF9999
.
LDSC0400  MOVE      "DD",CATEGORY
          MOVE      LDDEST,CODE
          CALL      LCDITM00
          GOTO      DOCF9999
.
LDSC0500  WRITE     HTMLFILE;LDDIAG;
          GOTO      LDSC9999
.
LDSC0600  WRITE     HTMLFILE;LDDIAG2;
          GOTO      LDSC9999
.
LDSC0700  MOVE      "D1",CATEGORY
          MOVE      LDUSD1,CODE
          CALL      LCDITM00
          GOTO      LDSC9999
.
LDSC0800  MOVE      "D2",CATEGORY
          MOVE      LDUSD2,CODE
          CALL      LCDITM00
          GOTO      LDSC9999
.
LDSC0900  MOVE      "D3",CATEGORY
          MOVE      LDUSD3,CODE
          CALL      LCDITM00
          GOTO      LDSC9999
.
LDSC1000  MOVE      "D4",CATEGORY
          MOVE      LDUSD4,CODE
          CALL      LCDITM00
          GOTO      LDSC9999
.
LDSC1100  MOVE      "D5",CATEGORY
          MOVE      LDUSD5,CODE
          CALL      LCDITM00
          GOTO      LDSC9999
.
LDSC1200  WRITE     HTMLFILE;LDFMBS;
          GOTO      LDSC9999
.
LDSC1300  WRITE     HTMLFILE;LPDSDMDC;
          GOTO      LDSC9999
.
LDSC1400  UNPACK    DIM127,DIM1,KEY1,DIM127
          MOVE      KEY1,F1
          BRANCH    F1,LDSC1410
          WRITE     HTMLFILE;LPDSDDRG;
          GOTO      LDSC9999
.
LDSC1410  PACK      KEY4,LPDSDDRG,SP70                                *C-168959
          PACK      KEY7,LPDSDDRG,ZED10
          CALL      RSLGDGW1
LDSC1415  CALL      RPLGDGW1
          BRANCH    OVRCD,LDSC9999
.
          MATCH     LPTDWDRG,LPDSDDRG
          GOTO      LDSC9999 IF NOT EQUAL
.
          WRITE     HTMLFILE;LPTDWDES;
          GOTO      LDSC9999
.
LDSC1500  WRITE     HTMLFILE;LPDSSIDX;
          GOTO      LDSC9999
.
LDSC1600  WRITE     HTMLFILE;LPDSVOGU;
          GOTO      LDSC9999
.
LDSC1700  
          GOTO      LDSC9999
.
LDSC1800  
.>>>>     WRITE     HTMLFILE;DWLREASN;
          GOTO      LDSC9999
.
LDSC1900  
.>>>>     WRITE     HTMLFILE;PTDSOPER;
          GOTO      LDSC9999
.
LDSC2000  
.>>>>     WRITE     HTMLFILE;PTDSUYN1;
          GOTO      LDSC9999
.
LDSC2100  
.>>>>     WRITE     HTMLFILE;PTDSUYN2;
          GOTO      LDSC9999
.
LDSC2200  
.>>>>     WRITE     HTMLFILE;PTDSUYN3;
          GOTO      LDSC9999
.
LDSC2300  
.>>>>     WRITE     HTMLFILE;PTDSUYN4;
          GOTO      LDSC9999
.
LDSC2400  
.>>>>     WRITE     HTMLFILE;PTDSDWRD;
          GOTO      LDSC9999
.
LDSC2500  
.>>>>     WRITE     HTMLFILE;PTDSDLOS;
          GOTO      LDSC9999
.
LDSC2600  WRITE     HTMLFILE;LPDSSREF;
          GOTO      LDSC9999
.
LDSC2700  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
.
          PACK      KEY8,LEGADMNO,SP70
          CALL      RDLGDAD1
          IF        OVRCD<>0
            MOVE      SP70,LPTDADCT
          ENDIF
.
          MATCH     SP70,LPTDADCT
          GOTO      LDSC9999 IF EQUAL
.
          BRANCH    F1,LDSC2710
.
          WRITE     HTMLFILE;LPTDADCT;
          GOTO      LDSC9999
.
LDSC2710  PACK      KEY5,LPTDADCT
          CALL      RDPTVAD1
          BRANCH    OVRCD,LDSC9999
.
          WRITE     HTMLFILE;PTVADESC;
          GOTO      LDSC9999
.
LDSC2800  READ      CONTROLF,HUND09;*195,PTCNACAS
          LOAD      CATEGORY,PTCNACAS,CATD1,CATD2,CATD3,CATD4,CATD5:
                                      CATU6,CATU7
.
          LOAD      CODE,PTCNACAS,LDUSD1,LDUSD2,LDUSD3,LDUSD4,LDUSD5:
                                  LAUSR6,LAUSR7
          CALL      LCDITM00
          GOTO      LDSC9999
.
LDSC2900  UNPACK    DIM127,D1,KEY1,DIM127
          MOVE      ZERO,F1
          MOVE      KEY1,F1
.
          PACK      KEY30,LEGADMNO,Z70
          CALL      RDLGTRN2
LDSC2910  CALL      RPLGTRN2
          BRANCH    OVRCD,LDSC9999
.
          MATCH     LDTADMN,LEGADMNO
          GOTO      LDSC9999 IF NOT EQUAL
.
          MATCH     ANSD,LTMOVE
          GOTO      LDSC9999 IF NOT EQUAL
.
          BRANCH    F1,LDSC2920
.
          WRITE     HTMLFILE;LTWARD;         * 0
          GOTO      LDSC9999
LDSC2920  WRITE     HTMLFILE;LTBED;          * 1
          GOTO      LDSC9999
.
LDSC9999  RETURN
