.----------------------------------------------------------------------
.  CHKOCREF - Check Whether the referral is an External Referral (EOC)
.----------------------------------------------------------------------
           DEFPROC   CHKOCREF
.
           INC       EOCREFFD/INC
.
EREF0000  MOVE      ZERO,EXIT 
          MOVE      KEY8,OTRLOUTN
.
          READ      CONTROLF,SEVENTY9;*120,PTCNUEOC
.
          COMPARE   ONE,PTCNUEOC
          GOTO      EREF9999 IF NOT EQUAL
.
          OPEN      EOCREFA2,"eocrefaf"
.
          PACK      KEY15,OTRLURNO,CHOSPNUM,SP30
          CALL      RSECREF2
EREF1000  CALL      RKECREF2
          BRANCH    OVRCD,EREF9999
.
          MATCH     OTRLURNO,ECRFURNO
          GOTO      EREF9999 IF NOT EQUAL
.
          COMPARE   CHOSPNUM,ECRFHOSP
          GOTO      EREF9999 IF NOT EQUAL
.
          MOVE      ECRFREFN,KEY8
          MATCH     OTRLOUTN,KEY8
          GOTO      EREF1000 IF NOT EQUAL
.
          MOVE      ONE,EXIT
.
EREF9999  GOTO      ENDCHREF
.
          INC       EOCREFIO/INC
          INC       IBAOVRIO/INC
.
ENDCHREF  ENDPROC
