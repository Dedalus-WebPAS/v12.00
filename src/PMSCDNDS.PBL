. *----------------------------------------------------------------------
. * Include Name  :   PMSCDNDS
. *
. * Function      :   Dispay visit based CDM icons
. *
. * Requires      :   A valid read of the visit file
. *
. * Modifications :
. * V9.12.02 22/09/2009 Ebon Clements       CAR 202965
. *                     Added display of icon if status is zero
. * V9.12.01 26/08/2009 Ebon Clements       CAR 202965
. *                     Created include
. *----------------------------------------------------------------------
VCDM0000  PACK      KEY8,PVIBILL,SP70
          CALL      RDPMCDN1
          BRANCH    OVRCD,VCDM9999
.
          MATCH     "0",PMDNSTAT
          IF        @EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,SP70
            REP       " +",KEY31
            WRITE     HTMLFILE;"<img src=../images/CDME0.jpg class=Icon":
                               " alt=CDME0":
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
          MATCH     "1",PMDNSTAT
          IF        @EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,SP70
            REP       " +",KEY31
            WRITE     HTMLFILE;"<img src=../images/CDME1.jpg class=Icon":
                               " alt=CDME1":
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
          MATCH     "2",PMDNSTAT
          IF        @EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,SP70
            REP       " +",KEY31
            WRITE     HTMLFILE;"<img src=../images/CDME2.jpg class=Icon":
                               " alt=CDME1":
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
          MATCH     SP70,PMDNPW01
          IF        !@EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,PMDNPW01,SP70
            REP       " +",KEY31
            STRIP     PMDNPW01
            WRITE     HTMLFILE;"<img src=../images/CDME",*+,PMDNPW01:
                               ".jpg class=Icon alt=CDME",PMDNPW01:
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
          MATCH     SP70,PMDNPW02
          IF        !@EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,PMDNPW02,SP70
            REP       " +",KEY31
            STRIP     PMDNPW02
            WRITE     HTMLFILE;"<img src=../images/CDME",*+,PMDNPW02:
                               ".jpg class=Icon alt=CDME",PMDNPW02:
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
          MATCH     SP70,PMDNPW03
          IF        !@EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,PMDNPW03,SP70
            REP       " +",KEY31
            STRIP     PMDNPW03
            WRITE     HTMLFILE;"<img src=../images/CDME",*+,PMDNPW03:
                               ".jpg class=Icon alt=CDME",PMDNPW03:
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
          MATCH     SP70,PMDNPW04
          IF        !@EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,PMDNPW04,SP70
            REP       " +",KEY31
            STRIP     PMDNPW04
            WRITE     HTMLFILE;"<img src=../images/CDME",*+,PMDNPW04:
                               ".jpg class=Icon alt=CDME",PMDNPW04:
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
          MATCH     SP70,PMDNPW05
          IF        !@EQUAL
            PACK      KEY31,URNUMBER,ADMISSNO,PVIDATE,PTVITYPE,PMDNPW05,SP70
            REP       " +",KEY31
            STRIP     PMDNPW05
            WRITE     HTMLFILE;"<img src=../images/CDME",*+,PMDNPW05:
                               ".jpg class=Icon alt=CDME",PMDNPW05:
                               " onClick=javascript:VisitCDM('",KEY31,"');>";
          ENDIF
.
VCDM9999  RETURN
