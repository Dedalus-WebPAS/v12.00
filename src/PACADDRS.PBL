.****************************************************************************
.*                            PACADDRS                                      *
.* Function  :  Formats the patient address into a single field.            *
.* Author    :  Steve Armstrong   02/10/1997                                *
.* Parameters:  PADD1, PADD2, PSUBRB, PADD4, PPOST                          *
.* Returns   :  PACADDRS (Formatted Patient Address)                        *
.* Mods      :                                                              *
.****************************************************************************
.
PACADDRS  PACK      PACADDRS,SP30,SP30
          CLEAR     PACADDRS
          MOVE      ONE,COMMFLAG
          MATCH     SP35,PADD1
          IF        !@EQUAL
            MOVE      ZERO,COMMFLAG
            APPEND    PADD1,PACADDRS
.
PACADD10    CMATCH    SP1,PACADDRS
            IF        @EQUAL
              BUMP      PACADDRS,-1
              GOTO      PACADD10
            ENDIF
          ENDIF
.
          MATCH     SP35,PADD2
          IF        !@EQUAL
            IF        COMMFLAG = 0
              APPEND    COMMA,PACADDRS
              APPEND    SP1,PACADDRS
            ELSE
              MOVE      ZERO,COMMFLAG
            ENDIF
.
            APPEND    PADD2,PACADDRS
.
PACADD20    CMATCH    SP1,PACADDRS
            IF        @EQUAL
              BUMP      PACADDRS,-1
              GOTO      PACADD20
            ENDIF
          ENDIF
.
          MATCH     SP35,PSUBRB
          IF        !@EQUAL
            IF        COMMFLAG = 0
              APPEND    COMMA,PACADDRS
              APPEND    SP1,PACADDRS
            ELSE
              MOVE      ZERO,COMMFLAG
            ENDIF
.
            APPEND    PSUBRB,PACADDRS
.
PACADD30    CMATCH    SP1,PACADDRS
            IF        @EQUAL
              BUMP      PACADDRS,-1
              GOTO      PACADD30
            ENDIF
          ENDIF
.
          MATCH     SP35,PADD4
          IF        !@EQUAL
            IF        COMMFLAG = 0
              APPEND    COMMA,PACADDRS
              APPEND    SP1,PACADDRS
            ELSE
              MOVE      ZERO,COMMFLAG
            ENDIF
.
            APPEND    PADD4,PACADDRS
.
PACADD40    CMATCH    SP1,PACADDRS
            IF        @EQUAL
              BUMP      PACADDRS,-1
              GOTO      PACADD40
            ENDIF
          ENDIF
.
          MATCH     SP8,PPOST
          IF        !@EQUAL
            IF        COMMFLAG =0
              APPEND    COMMA,PACADDRS
              APPEND    SP1,PACADDRS
            ENDIF
.
            APPEND    PPOST,PACADDRS
          ENDIF
          RESET     PACADDRS
.
PACADD99  RETURN
