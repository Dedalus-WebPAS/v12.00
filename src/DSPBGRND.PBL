.******************************************************************************
.* System         : ALL with screen painting                                  *
.*                                                                            *
.* Include Name   : DSPBGRND.PBL                                              *
.*                                                                            *
.* Function       : Display background for any screen painted screen.         *
.*                                                                            *
.* Author         : Phantom and Desert Storm (12/11/1991)                     *
.*                                                                            *
.* Paramaters     : PRGID - Program Id                                        *
.*                  SCRID - Screen Id                                         *
.*                                                                            *
.* Returns        : EXIT = 1      no screen set up                            *
.*                                                                            *
.* Modifications  :                                                           *
.*                  10/11/1995 MATT                                           *
.*                  Made ~ be replaced with space. This is for putting blank  *
.*                  lines on labels.                                          *
.*                  10/04/1996    Justin Coates                               *
.*                  put a suspend and flush around the display to speed it up *
.******************************************************************************
DSPBGRND  SUSPEND 
          MOVE      ONE,EXIT                * set as no screen
          PACK      KEY12,PRGID,SCRID,SP20
          CALL      RSSCSB1
.
DBACK100  CALL      RKSCSB1                 * next read on background file
          BRANCH    OVRCD,DBACK995          * end of file
.
          MATCH     PRGID,SCSBPID
          GOTO      DBACK995 IF NOT EQUAL   * different program id
.
          MATCH     SCRID,SCSBSID
          GOTO      DBACK995 IF NOT EQUAL   * different screen id
.
          MOVE      SCSBLIN,CVERT
          REP       "~ ",SCSBDAT
          PUTVAR    SCSBDAT,SCSBATT,1,CVERT
          MOVE      ZERO,EXIT               * screen exists
          GOTO      DBACK100
.
DBACK995  FLUSH
.
DBACK999  RETURN
...............................................................................
