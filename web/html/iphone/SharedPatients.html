<!DOCTYPE HTML>
<head>
<link rel="stylesheet" href="iphone.css" type="text/css">
<script type="text/javascript" src="iphone.js"> </script>
<script type="text/javascript">
var ListLocation;
function init() {
 var h  = document.getElementsByTagName("head")[0];
 ListLocation=document.getElementById("WidgetTable1")
 xmlHttp = new XMLHttpRequest(); // Firefox, Opera 8.0+, Safari
 theURL = "../../cgi-bin/patweb97.pbl?reportno=1&template=17"
 xmlHttp.open("GET", theURL, false);
 xmlHttp.send();
 if (xmlHttp.responseText!="") {
   var s = document.createElement("script");
   s.type="text/javascript";
   h.appendChild(s);
   s.text=xmlHttp.responseText;
   PatientListTable()
 }
 else {
   ListLocation.innerHTML="<h4 align=center>Web Service Not Available</h4><br>" +
                          "<p align=center>Please Contact System Administrators</p>"
 }
}
function AddFavList() {
 theURL="../../cgi-bin/patweb02.php?reportno=1&webpd002=999"
 xmlHttp=new XMLHttpRequest(); // Firefox, Opera 8.0+, Safari
 xmlHttp.open("GET", theURL, false);
 xmlHttp.send();
 if (xmlHttp.responseText!=""&&xmlHttp.status == 200) {
  h = document.getElementsByTagName("head")[0];
  s = document.createElement("script");
  s.type="text/javascript";
  s.text=xmlHttp.responseText;
  if(s.text.match(/function/g) != null) {
    h.appendChild(s);
    AddRows();
  }
 } else {
   alertify.alert("Favourite Patient Service Not Available.");
 }
}
//----------------------------------------------------------------------------
// Patient List Display
//---------------------------------------------------------------------------
function PatientListTable() {
 t = new Table("patient-list","patient-item");
 t.addColumn("Patient Image","PatientImage",0,0,"../../cgi-bin/","","","")
 t.addColumn("Patient","PatientBlock",3,3,"30","","15","")
 t.addColumn("Doctor","CenterSubscript",17,17,"","","","")
 t.addColumn("Ward/Bed","CenterSubscript",4,4,"","","","")
 t.addColumn("","CenterSubscript",8,8,"","","","")
// t.addColumn("","LeftSubscript",6,6,"","","","")
// t.addColumn("","RightSubscript",7,7,"","","","")
 t.addColumn("","CloseBlock",3,3,"","","","")
 PatientList();
 AddFavList();
 TableOutput(2,1);
}
function LinkTo(urnumber,admissno) {
  mScreen=top.document.getElementById("mainScreen")
  mScreen.style.display = "none";
  pFrame=top.document.getElementById("patientFrame")
  pScreen=top.document.getElementById("patientScreen")
  pScreen.style.position = "absolute";
  pScreen.style.top = "0px";
  pScreen.style.left = "0px";
  pScreen.style.width = "100%";
  pFrame.src="LoadingPage.html";
  pScreen.style.display = "";
  top.setCookie("PatientPageURL","","1")
  top.setCookie("PatientPageTitle","","1")
  pFrame.src = "../../cgi-bin/patweb98.pbl?reportno=1&template=081"+
                                "&urnumber="+urnumber.replace(/ /g,"+") +
                                "&admissno="+admissno.replace(/ /g,"+") 
}
function GoBack() {
  backPage=top.getCookie('HomePageURL');
  backPage=backPage.replace(/.*iphone\//,"");
  location.href=backPage;
}
</script>
</head>
<body class=PatientList onload="init();">
<div class=HeadingDiv>
<table border=0 padding=0 style='width:100%;border:0;margin:0;padding:4px 0px'>
<tr><td class=HeadLeft><span class="goBack"
    onclick="GoBack();">Back</span></td>
    <td class=HeadTitle>Patients</td>
    <td class=HeadRight>
    </td>
</tr></table>
</div>

<div id=pageBucket>
<div id=WidgetTable1 class=w-table></div>
</div>
<div id=footer></div>
</body>
