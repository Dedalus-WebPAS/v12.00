<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="socq">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>
<script type="text/javascript">
function LookupPostCode(AddressLine) {
if(AddressLine=="") {
  alert("Enter a Suburb");
//  suburb.focus();
  return; }
SelectPC.length = 0;
//
//  Remove trailing spaces from Address Line
//
AddressLine=AddressLine.split(/\s/);
var theaddress="";
for (var inc=0; inc<AddressLine.length; inc++) {
  theaddress=theaddress + AddressLine[inc];
  if (inc<(AddressLine.length-1)){
    theaddress=theaddress + " ";
  }
}
AddressLine=theaddress;
var expression = "," + AddressLine;
var pattern = new RegExp(expression.toUpperCase());
for(var i =0; i<PC.length & SelectPC.length<50; i++) {
  if (PC[i].match(pattern)) { SelectPC[SelectPC.length] = PC[i] }}
SetPostCodeHeading()
for(var i =0; i < SelectPC.length; i++)  {
  PCFields=SelectPC[i].split(",");
  SelectPostCode += "<tr><td align=center>" +
                     "<a href=javascript:parent.UpdateFields(" + i + ");>" +
                     PCFields[0]  + "</a></td>" +
                     "<td>" + PCFields[1] + "</td>"+
                     "<td>" + PCFields[2] + "</td></tr>" }
if (SelectPC.length==0) {
  alert("Postcode not found for " + AddressLine);
  suburb.select();
  return }
if (SelectPC.length==1) {
  UpdateFields(0);
  return }
ShowPostCodes();
}
function CheckCode(code,selectlist)  {
var found=0
strvar=code.value+"   "         // format as three characters space filled
code.value=strvar.substr(0,3)
for (var i =0 ; i < selectlist.length; i++) {
  if (selectlist.options[i].value.substr(0,3)==code.value) {
         found=1
         selectlist.selectedIndex=i } }
if (found==0) { alert("Invalid Code Entered")
                selectlist.selectedIndex=0
                code.focus() }
}
//
function UpdateCode(code,selectlist) {
  code.value=selectlist.value.substr(0,3);
}
function SetFields1() {
 suburb = pat89acc.ptmsx013;
 state = pat89acc.ptmsx014;
 postcode = pat89acc.ptmsx015;
}
function SetFields2() {
 suburb = pat89acc.ptmas052;
 state = pat89acc.ptmas053;
 postcode = pat89acc.ptmas054;
}
function SetFieldsPRA() {
 suburb = pat89acc.ptpra004;
 state = pat89acc.ptpra005;
 postcode = pat89acc.ptpra006;
}
function SetFieldsNRL() {
 suburb = pat89acc.ptmsx022;
 state = pat89acc.ptmsx023;
 postcode = pat89acc.ptmsx024;
}
function setRedirect() {
  document.pat89acc.submit();
}
function PRASelf() {
  document.pat89acc.ptpra002.value=document.hiddenvalues.padd1.value
  document.pat89acc.ptpra003.value=document.hiddenvalues.padd2.value
  document.pat89acc.ptpra004.value=document.hiddenvalues.psubrb.value
  document.pat89acc.ptpra005.value=document.hiddenvalues.padd4.value
  document.pat89acc.ptpra006.value=document.hiddenvalues.ppost.value
  document.pat89acc.ptpra007.value=document.hiddenvalues.ptelep.value
  document.pat89acc.ptpra008.value=document.hiddenvalues.pteleb.value
}
function PRAClear() {
  document.pat89acc.ptpra001.value="";
  document.pat89acc.ptpra002.value="";
  document.pat89acc.ptpra003.value="";
  document.pat89acc.ptpra004.value="";
  document.pat89acc.ptpra005.value="";
  document.pat89acc.ptpra006.value="";
  document.pat89acc.ptpra007.value="";
  document.pat89acc.ptpra008.value="";
  document.pat89acc.ptpra009.value="";
}
function NOKSelf() {
  document.pat89acc.ptmas050.value=document.hiddenvalues.padd1.value
  document.pat89acc.ptmas051.value=document.hiddenvalues.padd2.value
  document.pat89acc.ptmas052.value=document.hiddenvalues.psubrb.value
  document.pat89acc.ptmas053.value=document.hiddenvalues.padd4.value
  document.pat89acc.ptmas054.value=document.hiddenvalues.ppost.value
  document.pat89acc.ptmas055.value=document.hiddenvalues.ptelep.value
  document.pat89acc.ptmas056.value=document.hiddenvalues.pteleb.value
}
function NOKClear() {
  document.pat89acc.ptmas049.value="";
  document.pat89acc.ptmas050.value="";
  document.pat89acc.ptmas051.value="";
  document.pat89acc.ptmas052.value="";
  document.pat89acc.ptmas053.value="";
  document.pat89acc.ptmas054.value="";
  document.pat89acc.ptmas055.value="";
  document.pat89acc.ptmas056.value="";
  document.pat89acc.ptmas057.value="";
}
function ECSelf() {
  document.pat89acc.ptmsx011.value=document.hiddenvalues.padd1.value
  document.pat89acc.ptmsx012.value=document.hiddenvalues.padd2.value
  document.pat89acc.ptmsx013.value=document.hiddenvalues.psubrb.value
  document.pat89acc.ptmsx014.value=document.hiddenvalues.padd4.value
  document.pat89acc.ptmsx015.value=document.hiddenvalues.ppost.value
  document.pat89acc.ptmsx016.value=document.hiddenvalues.ptelep.value
  document.pat89acc.ptmsx017.value=document.hiddenvalues.pteleb.value
}
function ECClear() {
  document.pat89acc.ptmsx010.value="";
  document.pat89acc.ptmsx011.value="";
  document.pat89acc.ptmsx012.value="";
  document.pat89acc.ptmsx013.value="";
  document.pat89acc.ptmsx014.value="";
  document.pat89acc.ptmsx015.value="";
  document.pat89acc.ptmsx016.value="";
  document.pat89acc.ptmsx017.value="";
  document.pat89acc.ptmsx018.value="";
}
function NRSelf() {
  document.pat89acc.ptmsx020.value=document.hiddenvalues.padd1.value
  document.pat89acc.ptmsx021.value=document.hiddenvalues.padd2.value
  document.pat89acc.ptmsx022.value=document.hiddenvalues.psubrb.value
  document.pat89acc.ptmsx023.value=document.hiddenvalues.padd4.value
  document.pat89acc.ptmsx024.value=document.hiddenvalues.ppost.value
  document.pat89acc.ptmsx025.value=document.hiddenvalues.ptelep.value
  document.pat89acc.ptmsx026.value=document.hiddenvalues.pteleb.value
}
function NRClear() {
  document.pat89acc.ptmsx019.value="";
  document.pat89acc.ptmsx020.value="";
  document.pat89acc.ptmsx021.value="";
  document.pat89acc.ptmsx022.value="";
  document.pat89acc.ptmsx023.value="";
  document.pat89acc.ptmsx024.value="";
  document.pat89acc.ptmsx025.value="";
  document.pat89acc.ptmsx026.value="";
  document.pat89acc.ptmsx027.value="";
}
function PrintScreen(linkurl) {
  PrintWindow=open(linkurl,"PrintScreen",
    "width=400,height=150,top=50,left=50," +
    "titlebar=no,scrollbars=yes,status=no,toolbar=no,menubar=no");
}
function setCancel() {
  if(top.location.pathname.match(/EmergencyMap/g)) {
    top.menu.location.reload();
  } else {
    location.href="patweb98.pbl?reportno=1&template=1"
     + "&urnumber=" + document.pat89acc.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.pat89acc.admissno.value.replace(/ /g,"+");
  }
}
function init() {
// Refresh traige page to load pmi changes - patient folder
  PageLocation="?reportno=1&template=4" +
               "&urnumber=" + PatientURN.replace(/ /g,"+") +
               "&admissno=" + PatientVIS.replace(/ /g,"+")
  if(top.content.location.search.substring(1,23)!="reportno=1&template=16"&&
     top.content.location.search.substring(1,23)!="reportno=1&template=17"){
    if (top.content.location.search!=this.location.search) {
      if (top.content.location.search==PageLocation) {
      top.content.location.href="emrweb02.pbl" + PageLocation } }
  }
  setTimeout('pat89acc.ptmas049.focus()',1000);
}
</script>
</head>
%START.OF.PAGE
<BODY onLoad="PageLoad(event);self.focus();pat89acc.ptmas049.focus();InitPostCodes()">
<div>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<form name=pat89acc action=patweb89.pbl style="margin:0">
  <input type=hidden name=reportno value="2">
  <input type=hidden name=template value="014">
  <input type=hidden name=urnumber value="%PATWEB89.01.003">
  <input type=hidden name=admissno value="%PATWEB89.01.081"> 
  <input type="hidden" name="updatety" value="4">
  <input type="hidden" name="redirect" value="%PATWEB89.01.001.patweb98.01.001">
  <input type="hidden" name="dummy">
  <input type="hidden" name="ptmas029" value="">
  <input type=hidden name=pmpmi067 value="%PATWEB89.01.867.0">
  <input type=hidden name=pmpmi068 value="%PATWEB89.01.868.0">
  <input type=hidden name=ptmas046>
  <input type=hidden name=ptmas061 value="%PATWEB89.01.064">
  <input type=hidden name=ptmas067 value="%PATWEB89.01.079.0">
  <input type=hidden name=pmpmi006 value="%PATWEB89.01.806">
  <input type=hidden name=pmpmi009 value="%PATWEB89.01.809">
  <input type=hidden name=pmpmi012 value="%PATWEB89.01.812.0">
  <input type=hidden name=pmpmi015 value="%PATWEB89.01.815">
  <input type=hidden name=pmpmi036 value="">
  <input type=hidden name=pmpmi037 value="%PATWEB89.01.837">
  <input type=hidden name=pmpmi052 value="">
  <input type=hidden name=pmpmi053 value="%PATWEB89.01.853">
  <input type=hidden name=pmpmi062 value="%PATWEB89.01.862">
  <input type=hidden name=pmpmi063 value="%PATWEB89.01.863">
  <input type=hidden name=pmpmi064 value="%PATWEB89.01.864">
  <input type=hidden name=pmpmi067 value="%PATWEB89.01.867.0">
  <input type=hidden name=pmpmi068 value="%PATWEB89.01.868.0">

<table border=1  cellpadding=0 cellspacing=0 width=100%>
  <tr valign=top>
    <td class=HeadingCell align=center>Senior Available Next-of-Kin</td>
    <td class=HeadingCell align=center>Emergency Contact</td></tr>
  <tr valign=top>
    <td>
    <table border=0 width=100% cellspacing=0>
    <tr><td class=DataLabel>Name </td>
        <td><input type=text size=20 max=20 name=ptmas049 tabindex=1
         value="%PATWEB89.01.053" onchange="UpCase(this);"></td>
        <td class=DataLabel>Relationship </td>
        <td><select name=ptmas057 tabindex=8>
              <option value=""></option>
              %STANDARD.01.030
            </select>
        </td></tr>
    <tr valign=top>
        <td class=DataLabel>Address</td>
        <td><input type="text" size="26" maxlength="35" name="ptmas050"
         value="%PATWEB89.01.054" tabindex=2 onchange="UpCase(this);"></td>
        <td class=DataLabel>Home Phone</td>
        <td><input type="text" size="15" maxlength="20" name="ptmas055"
         value="%PATWEB89.01.059" tabindex=8></td></tr>
    <tr valign=top>
        <td class=DataLabel></td>
        <td><input type="text" size="26" maxlength="35" name="ptmas051"
         value="%PATWEB89.01.055" tabindex=3 onchange="UpCase(this);"></td>
        <td class=DataLabel>Work Phone</td>
        <td><input type="text" size="15" maxlength="20" name="ptmas056"
         value="%PATWEB89.01.060" tabindex=9></td></tr>
    <tr valign=top>
        <td class=DataLabel>Suburb</td>
        <td><input type="text" size="26" maxlength="35" name="ptmas052"
         value="%PATWEB89.01.056" tabindex=4 onchange="UpCase(this);"
         onblur="SetFields2();LookupPostCode(pat89acc.ptmas052.value);"></td>
        <td class=DataLabel>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptmas054" tabindex=5
        value="%PATWEB89.01.058"></td></tr>
    <tr valign=top>
        <td class=DataLabel>State</td>
        <td><input type="text" size="26" maxlength="35" name="ptmas053"
        value="%PATWEB89.01.057" tabindex=6 onchange="UpCase(this);">
        <td align=right colspan=2>
        <input type=button class="button" value="Clear" onclick="NOKClear();">
        <input type=button class="button" value="Default" onclick="NOKSelf();">
        </td></tr>
    </table></td>
    <td>
    <table border=0 width=100% cellspacing=0>
    <tr><td class=DataLabel>Name </td>
        <td><input type=text size=20 max=20 name=ptmsx010 tabindex=10
         value="%PATWEB89.01.611" onchange="UpCase(this);"></td>
        <td class=DataLabel>Relationship </td>
        <td><select name=ptmsx018 tabindex=15>
              <option value=""></option>
              %STANDARD.01.030
             </select>
         </td></tr>
    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx011"
         value="%PATWEB89.01.612" tabindex=11 onchange="UpCase(this);"></td>
        <td class=DataLabel>Home Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx016"
         value="%PATWEB89.01.617" tabindex=16></td></tr>
    <tr><td class=DataLabel></td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx012"
         value="%PATWEB89.01.613" tabindex=12 onchange="UpCase(this);"></td>
        <td class=DataLabel>Work Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx017"
         value="%PATWEB89.01.618" tabindex=17></td></tr>
    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx013"
         value="%PATWEB89.01.614" tabindex=13 onchange="UpCase(this);"
         onblur="SetFields1();LookupPostCode(pat89acc.ptmsx013.value);"></td>
        <td class=DataLabel>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptmsx015"
         value="%PATWEB89.01.616" tabindex=14></td></tr>
    <tr><td class=DataLabel>State</td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx014"
         value="%PATWEB89.01.615" tabindex=14 onchange="UpCase(this);"></td>
        <td colspan=2 align=right>
        <input type=button class="button" value="Clear" onclick="ECClear();">
        <input type=button class="button" value="Default" onclick="ECSelf();">
        </td></tr>
    </table>
</td></tr>
<tr valign=top>
    <td class=HeadingCell align=center>Preferred Next-of-Kin </td>
    <td class=HeadingCell align=center>Person Responsible for Account</td></tr>
<tr><td>
    <table border=0 width=100% cellspacing=0>
    <tr><td class=DataLabel>Name </td>
        <td><input type=text size=20 max=20 name=ptmsx019
         value="%PATWEB89.01.620" tabindex=30 onchange="UpCase(this);"></td>
        <td class=DataLabel>Relationship </td>
        <td><select name=ptmsx027 tabindex=36>
              <option value=""></option>
              %STANDARD.01.030
            </select>
        <td></tr>
    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx020"
         value="%PATWEB89.01.621" tabindex=31 onchange="UpCase(this);"></td>
        <td class=DataLabel>Home Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx025"
         value="%PATWEB89.01.626" tabindex=37></td></tr>
    <tr><td class=DataLabel></td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx021"
         value="%PATWEB89.01.622" tabindex=32 onchange="UpCase(this);"></td>
        <td class=DataLabel>Work Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx026"
         value="%PATWEB89.01.627" tabindex=38></td></tr>
    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx022"
         value="%PATWEB89.01.623" tabindex=33 onchange="UpCase(this);"
        onblur="SetFieldsNRL();LookupPostCode(pat89acc.ptmsx022.value);"></td>
        <td class=DataLabel>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptmsx024"
         value="%PATWEB89.01.625" tabindex=34></td></tr>
    <tr><td class=DataLabel>State</td>
        <td><input type="text" size="26" maxlength="35" name="ptmsx023"
         value="%PATWEB89.01.624" tabindex=35 onchange="UpCase(this);"></td>
        <td colspan=2 align=right>
        <input type=button class="button" value="Clear" onclick="NRClear();">
        <input type=button class="button" value="Default" onclick="NRSelf();">
        </td></tr>
    </table>
</td>
<td><table border=0 width=100% >
    <tr><td class=DataLabel>Name</td>
        <td><input type="text" size="33" name="ptpra001" tabindex=20
        maxlength="30" value="%PATWEB89.01.166" onchange="UpCase(this);"></td>
        <td class=DataLabel>Relationship </td>
        <td><select name=ptpra009 tabindex=26>
              <option value=""></option>
              %STANDARD.01.030
            </select>
        </td></tr>
    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="26" maxlength="35" name="ptpra002" 
            value="%PATWEB89.01.167" tabindex=21 onchange="UpCase(this);"></td>
        <td class=DataLabel>Home Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptpra007"
            value="%PATWEB89.01.171" tabindex=27></td></tr>
    <tr><td class=DataLabel></td>
        <td><input type="text" size="26" maxlength="35" name="ptpra003"
            value="%PATWEB89.01.168" tabindex=22 onchange="UpCase(this);"></td>
        <td class=DataLabel>Work Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptpra008"
            value="%PATWEB89.01.172" tabindex=28></td></tr>
    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="26" maxlength="35" name="ptpra004"
         value="%PATWEB89.01.169" tabindex=23 onchange="UpCase(this);"
        onblur="SetFieldsPRA();LookupPostCode(pat89acc.ptpra004.value);">
        <td class=DataLabel>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptpra006"
         value="%PATWEB89.01.170" tabindex=24></td></tr>
    <tr><td class=DataLabel>State</td>
        <td><input type="text" size="26" maxlength="35" name="ptpra005"
        value="%PATWEB89.01.182" tabindex=25 onchange="UpCase(this);">
        <td colspan=2 align=right>
        <input type=button class="button" value="Clear" onclick="PRAClear();">
        <input type=button class="button" value="Default" onclick="PRASelf();">
        </td></tr>
    </table>
</tr>
<tr>
    <td colspan=4 align=center>
    <input type=button value="Update" tabindex=40
     id="pat89sub" onclick="tempDisable(this);setRedirect()" class="button">
    <input type=button value="Cancel" onclick="setCancel();" class="button">
    </td>
<div id=SelectHeading></div>
<div id=SelectLocation></div>
</tr>
</table>
</form>
</div>

<form name=hiddenvalues>
<input type=hidden name=padd1 value="%PATWEB89.01.012">
<input type=hidden name=padd2 value="%PATWEB89.01.013">
<input type=hidden name=psubrb value="%PATWEB89.01.014">
<input type=hidden name=padd4 value="%PATWEB89.01.015">
<input type=hidden name=ppost value="%PATWEB89.01.016">
<input type=hidden name=ptelep value="%PATWEB89.01.017">
<input type=hidden name=pteleb value="%PATWEB89.01.018">
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<script type="text/javascript">
 MergePsych="%PATWEB89.01.050";
 if ( MergePsych == "Yes") {
   document.pat89acc.ptmas046.value=1;
 }
if (PatientALT.substr(6,1)=="1") {
document.pat89acc.ptmas029.value=1;
}
else{
document.pat89acc.ptmas029.value=0;
}
//
   for (var i =0 ; i < document.pat89acc.ptmas057.length; i++) {
     if (document.pat89acc.ptmas057.options[i].value=="%PATWEB89.01.061.0") {
         document.pat89acc.ptmas057.selectedIndex=i } };
//
   for (var i =0 ; i < document.pat89acc.ptmsx018.length; i++) {
     if (document.pat89acc.ptmsx018.options[i].value=="%PATWEB89.01.619") {
         document.pat89acc.ptmsx018.selectedIndex=i } };
//
   for (var i =0 ; i < document.pat89acc.ptmsx027.length; i++) {
     if (document.pat89acc.ptmsx027.options[i].value=="%PATWEB89.01.628") {
         document.pat89acc.ptmsx027.selectedIndex=i } };
//
   for (var i =0 ; i < document.pat89acc.ptpra009.length; i++) {
     if (document.pat89acc.ptpra009.options[i].value=="%PATWEB89.01.173") {
         document.pat89acc.ptpra009.selectedIndex=i } };
//
</script>
