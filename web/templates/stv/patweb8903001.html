<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="stv">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/preadmission.js"></script>
<script type="text/javascript" src="../js/ndis.js"></script>

<script type="text/javascript">
function SubmitAdm() {
  MandatoryOk=true;
  if (!validateMandatory(document.UpdateForm)) {
     return;
  }
  if (!isWhitespace(UpdateForm.ptmis001.value)) {
    if(document.UpdateForm.ptmis001.value.substring(7,9)!="20"){
        confirm("Warning: Please check admission date - Century is not equal to 20XX");
        FocusDelay(ptmis001);
        return;
    }
  }
  if (!isWhitespace(UpdateForm.ptmis013.value)) {
    if (!validateHFT(20,UpdateForm.ptmis013,UpdateForm.ptmis014,
                     UpdateForm.funddesc,UpdateForm.tabldesc)) {
      ans=confirm("Select another active health fund table? ");
      if (ans==true) {
        return;
      }
    }
  }
  if (document.UpdateForm.mvmedre1.checked == true) {
     document.UpdateForm.mvmedrec.value="1";
  } else {
     document.UpdateForm.mvmedrec.value="0";
  }
  if (document.UpdateForm.admitbox.checked == true) {
    if (checkMultipleAdmission(UpdateForm)){
      return;
    }
  }
  
  if (MyHlthRecFlag=="0") {
      document.UpdateForm.ptvis115.value=MyHlthRecFlag;
  } else {
      document.UpdateForm.ptvis115.value=document.UpdateForm.ptvis115.value;
  }
 
  if (MandatoryOk) {
    setRedirect();
    UpdateForm.ptmis004.value=UpdateForm.ptmis068.value;
    UpdateForm.ptmis005.value=UpdateForm.ptmis076.value;
    SubmitHidden(UpdateForm);
  }
}
function valDoctorUnit() {
  validateCode(31,UpdateForm.ptmis007,UpdateForm.doctnam2);
  selectOptions("30",UpdateForm.ptmis007,UpdateForm.ptmis024);
  UpdateForm.ptmis024.selectedIndex=1
}
function AdmitMandatory() {
  if (document.UpdateForm.admitbox.checked == true) {
     document.UpdateForm.admitbox.value="1";
     UpdateForm.ptmis011.className="Mandatory";  //admission type
     UpdateForm.ptmis009.className="Mandatory";  //admission source
     UpdateForm.ptvis041.className="Mandatory";  //criteria for admission
     UpdateForm.ptmis012.className="Mandatory";  //care type
     UpdateForm.ptmis007.className="Mandatory";  //Admitting Doctor
     UpdateForm.ptmis024.className="Mandatory";  //Unit
     UpdateForm.ptmis027.className="Mandatory";  //Financial Class
     UpdateForm.ptmis010.className="Mandatory";  //CMBS Class
     UpdateForm.ptvis043.className="Mandatory";  //Intended Stay
     UpdateForm.ptvis046.className="Mandatory";  //Admitting Point

  } else {
     document.UpdateForm.admitbox.value="0";
     UpdateForm.ptmis011.className="";  //admission type
     UpdateForm.ptmis009.className="";  //admission source
     UpdateForm.ptvis041.className="";  //criteria for admission
     UpdateForm.ptmis012.className="";  //care type
     UpdateForm.ptmis007.className="";  //Admitting Doctor
     UpdateForm.ptmis024.className="";  //Unit
     UpdateForm.ptmis027.className="";  //Financial Class
     UpdateForm.ptmis010.className="";  //CMBS Class
     UpdateForm.ptvis043.className="";  //Intended Stay
     UpdateForm.ptvis046.className="";  //Admitting Point
  }
  UpdateForm.ptmis001.focus();
}
function valClaimCode() {
  validateCode(41,UpdateForm.urnumber,UpdateForm.claimc);
  for (var i =0 ; i < document.UpdateForm.ptmis027.length; i++) {
    if (document.UpdateForm.claimc.value==
        trim(document.UpdateForm.ptmis027.options[i].value.substr(0,3))){
          document.UpdateForm.ptmis027.selectedIndex=i;
    }
  }
}
function defProgramID() {
  if (trim(PatientSPF)=="1") {
    for (var i =0 ; i < document.UpdateForm.ptvis110.length; i++) {
      if (trim(document.UpdateForm.ptvis110.options[i].value.substr(14,4))=="07"){
        document.UpdateForm.ptvis110.selectedIndex=i;
      }
    }
  }
}
 
function MyHealthRec() {
  document.getElementById('MyhealthRecLebel1').innerHTML=MyHealthRecDescription;
  document.UpdateForm.ptvis115.title=MyHealthRecDescription;
} 

function getLOSDefault() {
  UpdateForm.ptmis030.value="0";
  var serverURL = "../cgi-bin/comweb80.pbl?reportno=99&remoteno=1" +
                  "&valdcode="+UpdateForm.ptmis011.value.replace(/ /g,"+");
  var returnValue = RSExecute(serverURL);
  if (returnValue.status!=0) {
    return true;
  }
  ReturnValues=returnValue.return_value.split("|")
  UpdateForm.ptmis030.value=ReturnValues[0];
  if (trim(UpdateForm.ptmis030.value)=="") { UpdateForm.ptmis030.value="0"; }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayContractSTV(); DisplayTrnSrc();
              document.UpdateForm.ptmis001.focus();valClaimCode();
              displayRegime();defProgramID();MyHealthRec();ShowNdisPart();"> 
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.03.003";
PatientVIS="%PATWEB89.03.081";
PatientNAM="%PATWEB89.03.002";
PatientSTA="%PATWEB89.03.086.078";
PatientALT="%PATWEB89.03.084";
PatientSEX="%PATWEB89.03.019";
PatientDOB="%PATWEB89.03.020";
PatientAGE="%PATWEB89.03.021";
PatientLOC="%PATWEB89.03.083";
PatientPRI="%PATWEB89.03.086.066.1";
PatientUNT="%PATWEB89.03.066.0";
DoctorCOD="%PATWEB89.03.082.003";
DoctorNAM="%PATWEB89.03.082.002";
PatientAID="%PATWEB89.03.086.090";
PatientIND="%PATWEB89.03.086.091";
PatientCUR="%PATWEB89.03.086.092";
PatientCLC="%PATWEB89.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.03.086.094";
PatientCDM="%PATWEB89.03.086.095";
PatientVDH="%PATWEB89.03.086.099.015";
PatientSPF="%PATWEB89.03.085.067";
InsertPatientHeader()
</script>
<div id="PatientMenu"></div>
<div id="PageBodySection">
 <form name="linkForm" action="patweb89.pbl" method="post" style=margin:0>
  <input type="hidden" name="reportno" value="1">
  <input type="hidden" name="template" value="1">
  <input type="hidden" name="urnumber" value="%PATWEB89.03.003">
  <input type="hidden" name="admissno" value="%PATWEB89.03.081">
 </form>
 <form name="UpdateForm" method="post" action="patweb89.pbl" style=margin:0>
  <input type="hidden" name="urnumber" value="%PATWEB89.03.003">
  <input type="hidden" name="admissno" value="%PATWEB89.03.081">
  <input type="hidden" name="reportno" value="2">
  <input type="hidden" name="template" value="001">
  <input type="hidden" name="updatety" value="1">
  <input type="hidden" name="redirect">
  <input type="hidden" name="allocate" value="1">
  <input type="hidden" name="chckname" value="0">
  <input type="hidden" name="emradmit" value="0">
  <input type="hidden" name="emradmis" value="0">
  <input type="hidden" name="admitnow" value="1">
  <input type="hidden" name="newbmand" value="0">
  <input type="hidden" name="agebmand" value="0">
  <input type="hidden" name="tmotfrst" value="10">
  <input type="hidden" name="tmotnext" value="10">
  <input type="hidden" name="ptmas046" value="0">
  <input type="hidden" name="mvmedrec">
  <input type="hidden" name="cfinan" value="%PATWEB89.03.932">
  <input type="hidden" name="claimc">
  <input type="hidden" name="exstward" value="%PATWEB89.03.449.1">
  <input type="hidden" name="ptmis073" value=" ">
  <input type="hidden" name="ptmis075" value="N">
  <input type="hidden" name="pswdindc">
  <input type="hidden" name="dummy" id=dummy>
  <input type="hidden" name="leavhosp">
  <input type="hidden" name="leavadmn">
  <input type="hidden" name="leavtype">
  <input type="hidden" name="dontcurr" value="1">
  <input type="hidden" name="contmult" value="1">
  <input type=hidden name=ptcnhdps id=ptcnhdps
        value="%STANDARD.01.025.080.250.1.1">

  <input type="hidden" name="ptcndigp" id="ptcndigp"
        value="%STANDARD.01.025.124.122.0.1">
  <input type="hidden" name="ptcndumh" id="ptcndumh"
        value="%STANDARD.01.025.124.240.0.1">

  <table border="0" width="100%" cellspacing="0" cellpadding="0">
   <tr><td class="HeadingCell" align="center" colspan="4">
           Patient Pre-Admission Details (New)</td></tr>

   <tr><td colspan="2">&nbsp;</td>
       <td><strong>Admit Now?</strong></td>
       <td><input type="checkbox" name="admitbox" value="0" tabindex="1"
                  onclick="AdmitMandatory();"></td></tr>

   <tr><td class="DataLabel">Admission Date</td>
       <td><input type="text" size="12" name="ptmis001" tabindex="1"
                  class="Mandatory Date" title="Admission Date"
                  id=ptmis001 value="%STANDARD.01.015">
             <img src="../images/DateLookup.gif" class="Icon" tabindex=-1
                  onclick="DateLookupFrame(ptmis001);">
           Time &nbsp;
           <input class="Mandatory" type="text" name="ptmis002" size="8"
                  id=ptmis002
                  tabindex="2" value="%STANDARD.01.016" title="Admission Time">
             <img src="../images/DateTimeStamp.gif" class="Icon" tabindex=-1
                  onclick="SetCurrentDateTime(null,ptmis002);">
             <img src="../images/TimeLookup.gif" class="Icon" tabindex=-1
                  onclick="TimeLookupFrame(ptmis002);"></td>
       <td>Admitting Point</td>
       <td><select name="ptvis046" tabindex="20" title="Admitting Point"
                   onchange="defaultWard();">
             <option></option>
               %PATWEB89.03.290.2
           </select></td></tr>

   <tr><td class="DataLabel">%STANDARD.01.017.P </td>
       <td><select name="ptmis011" tabindex="3" title="%STANDARD.01.017.P "
             onchange="getLOSDefault();">
             <option> </option>
               %PATWEB89.03.112.2
           </select></td>
       <td class=DataLabel>Ward / Bed</td>
       <td><input type="hidden" name="bedstat1" id=bedstat1>
           <input type="hidden" name="ptmis004" id=ptmis004>
           <input type="hidden" name="ptmis005" title="Bed" id=ptmis005>
           <input type="hidden" name="warddesc" id=warddesc>
           <select name="ptmis068" tabindex="21" id=ptmis068
            title="Ward" class="Mandatory">
             <option> </option>
               %PATWEB89.03.449.2
           </select>
           <input type="text" name="ptmis076" title="Bed" maxlength="3" size="3"
                  id=ptmis076 class="Readonly" readonly tabindex=-1>
             <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
                  onclick="WardBedSearchFrame(ptmis068,warddesc,ptmis076,
                                              bedstat1);"></td></tr>

   <tr><td class="DataLabel">Admission Source</td>
       <td><select name="ptmis009" tabindex="4" title="Admission Source"
                   onchange="DisplayTrnSrc();">
             <option> </option>
               %PATWEB89.03.110.2
           </select></td>
       <td class="DataLabel">Admitting Doctor</td>
       <td><input type="text" size="8" maxlength="6" name="ptmis007"
                  id=ptmis007 tabindex="22" title="Admitting Doctor"
                  onblur="UpCase(this);valDoctorUnit();">
           <input type="text" readonly size="25" tabindex=-1 name="doctnam2"
                  title="Admitting Doctor Name" id=doctnam2 class="Readonly">
             <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
                  onclick="DoctorSearchFrame(ptmis007,doctnam2);"></td></tr>

   <tr><td class="DataLabel"><div id="TranSrcHeading"></div></td>
       <td><div id="TranSrc"></div></td>
       <td class="DataLabel">Unit</td>
       <td><select name="ptmis024" tabindex="23" title="Unit">
             <option> </option>
               %PATWEB89.03.124.2
           </select></td></tr>

   <tr><td>Prior Days Hospitalisation</td>
       <td><input type="text" name="ptmis031" class="Integer" size="5"
                  maxlength="4" title="Prior Days Hospitalisation"
                  tabindex="6" onblur="checkInteger(this,this.title);"></td>
       <td class="DataLabel">Diagnosis</td>
       <td><input tabindex="24" type="text" name="ptmis020" size="50"
                  maxlength="80"></td></tr>

   <tr><td class="DataLabel">Mode of Arrival</td>
       <td><select name="ptvis054" tabindex="7">
             <option></option>
               %PATWEB89.03.257.2
           </select></td>
       <td class="DataLabel">Provisional DRG</td>
       <td><input type="text" name="ptmis066" size="5" maxlength="4" tabindex="25"
                  id=ptmis066 onblur="validateCode(5,ptmis066,drgdesc1)">
           <input type="text" readonly name="drgdesc1" size="35" value=""
                  id=drgdesc1 class="Readonly" tabindex=-1>
             <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
                  onclick="DrgSearchFrame(ptmis066,drgdesc1);"></td></tr>

   <tr><td class="DataLabel">Admission Criteria</td>
       <td><select name="ptvis041" tabindex="8" title="Criteria for Admission">
             <option> </option>
               %PATWEB89.03.244.2
           </select></td>
       <td class="DataLabel">Diet Code</td>
       <td><select name="ptmis028" tabindex="26">
             <option> </option>
               %PATWEB89.03.127.4
           </select></td></tr>

   <tr><td class="DataLabel">Care Type</td>
       <td>
        <table width=100%  border=0 class=TableBody cellpadding=0 cellspacing=0>
        <tr><td>
             <select name="ptmis012" tabindex="9" title="Care Type"
                   onchange="displayRegime();">
             <option> </option>
               %PATWEB89.03.113.2
           </select>
            </td>
          </tr>
          </table>
       </td>
       <td class="DataLabel">Referring GP</td>
       <td><input type="text" size="10" maxlength="10" name="ptvis028"
            id=ptvis028
                  tabindex="27" onblur="ValidateHCP(18,0,ptvis028,doctnam1);">
           <input type="text" size="25" readonly name="doctnam1"
                  id=doctnam1 class="Readonly" tabindex=-1>
             <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
                  onclick="HCPSearchFrame(ptvis028,doctnam1,0);"><td></tr>

   <tr><td class="DataLabel">Intended Stay</td>
       <td><select name="ptvis043" tabindex="10" title="Intended Stay">
             <option> </option>
               %PATWEB89.03.246.2
           </select></td>
       <td class="DataLabel">Inform GP</td>
       <td><select name="ptvis022" tabindex="28">
             <option value="0">No</option>
             <option value="1">Yes</option>
           </select></td></tr>

   <tr><td class="DataLabel">Planned Length of Stay</td>
       <td><input type="text" size="5" maxlength="5" name="ptmis030"
                  tabindex="11" title="Planned Length of Stay"
                  class=Integer onblur="checkInteger(this,this.value);"></td>
       <td><div id=MyhealthRecLebel1 title="Consent to upload Episode documents/results to MyHR"></div></td>
       <td class=Datafield> 
           <select name=ptvis115 tabindex=28>
           <option value="1">Yes</option>
           <option value="0">No</option>
           </select>
       </td></tr>

   <tr><td class="DataLabel">%STANDARD.01.017.PK</td>
       <td><select name=ptvis110 tabindex="12">
             <option></option>
               %STANDARD.01.007.PK
            </select></td>
       <td class="DataLabel">Religious Visit</td>
       <td><select name="ptmis017" tabindex="29">
             <option value="2">No</option>
             <option value="1">Yes</option>
           </select></td></tr>

   <tr><td>&nbsp;</td>
       <td>&nbsp;</td>
       <td class="DataLabel">Valuables Location</td>
       <td><input type="text" size="40" maxlength="40" name="ptvis020"
                  tabindex="30" value=""></td></tr>

   <tr><td colspan="2">&nbsp;</td>
       <td class=DataLabel>Program</td>
       <td><input type=text size=8 maxlength=8 name=ptvis099
                  title="Program" tabindex=31 value="%PATWEB89.03.298.021.1"
                  onchange="findPrgmdesc();">
           <select name=prgmcode readonly class="Readonly" tabindex=32
                   onchange="savePrgmcode();">
             <option> </option>
               %PATWEB89.03.298.021.2
           </select></td></tr>

  <tr id=ndispart style="display:none"><td>&nbsp;</td>
      <td>&nbsp;</td>
      <td class=DataLabel>%STANDARD.01.035.N </td>
      <td><select name=ptvis121 id=ptvis121 title="%STANDARD.01.017.N "
           tabindex=34>
          <option> </option>
           %PATWEB89.03.298.066.9.2
          </select></td></tr>

   <tr><td align="center" colspan="4"><hr></td></tr>

   <tr><td class="DataLabel">%STANDARD.01.017.CL</td>
       <td><select name="ptmis027" title="%STANDARD.01.017.CL" tabindex="40">
             <option> </option>
               %PATWEB89.03.126.9.1.10.2.X
           </select></td>
      <td colspan="2">&nbsp;</td></tr>

   <tr><td class="DataLabel">%STANDARD.01.017.A </td>
       <td><select name="ptmis010" tabindex="41" title="%STANDARD.01.017.A "
                   onchange="DisplayContractSTV();">
             <option> </option>
               %PATWEB89.03.111.2
           </select></td>
       <td class="DataLabel"><div id="Contrac2Heading"></div></td>
       <td><div id="ContractId"></div></td></tr>

   <tr><td class="DataLabel"><div id="ContractHeading"></div></td>
       <td><div id="ContractType"></div></td>
       <td class="DataLabel"><div id="Contrac1Heading"></div></td>
       <td><div id="ContractRole"></div></td></tr>

   <tr><td class="DataLabel">Health Fund</td>
           <input type="hidden" name="ptmis013" value="%PATWEB89.03.040.0"
            id=ptmis013></td>
       <td class="DataLabel" colspan="2">
           <input type="text" size="35" name="funddesc" maxlength="30"
                  id=funddesc value="%PATWEB89.03.040.1" readonly class="Readonly" tabindex=-1>
           Level &nbsp;
           <input type="hidden" id=ptmis014 name="ptmis014" value="%PATWEB89.03.041.0">
           <input type="text" size="20" maxlength="30" name="tabldesc" id=tabldesc
                  value="%PATWEB89.03.041.1" readonly class="Readonly" tabindex=-1>
             <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
                  onclick="HealthFundSearchFrameNoFocus(ptmis013,funddesc,
                                                        ptmis014,tabldesc);">
             <img src="../images/erase.gif" class="Icon" tabindex=-1
                  onclick="clrFields(ptmis013,funddesc,ptmis014,tabldesc);"></td>
       <td>&nbsp;</td></tr>

   <tr><td class="DataLabel">Member Number</td>
       <td><input type="text" size="20" maxlength="19" name="ptmis015"
                  tabindex="43" value="%PATWEB89.03.042"></td>
       <td class="DataLabel">Move Medical Record</td>
       <td><input type="checkbox" name="mvmedre1" value="1"
                  tabindex="52"></td></tr>

   <tr><td colspan="2">&nbsp;</td>
       <td class=DataLabel><div id=RegimeHead1></div></td>
       <td><div id=RegimeCode1></div></td></tr>

   <tr><td class=DataLabel><div id=UserNameHead></div></td>
       <td><div id=UserNameCode></div></td>
       <td class=DataLabel><div id=RegimeHead2></div></td>
       <td><div id=RegimeCode2></div></td></tr>

   <tr><td class=DataLabel><div id=PasswordHead></div></td>
       <td><div id=PasswordCode></div></td>
       <td class=DataLabel><div id=RegimeHead3></div></td>
       <td><div id=RegimeCode3></div></td></tr>

   <tr><td colspan="2">&nbsp;</td>
       <td class=DataLabel><div id=RegimeHead4></div></td>
       <td><div id=RegimeCode4></div></td></tr>

   <tr><td colspan="4" align="center"><br>
           <input tabindex="60" type="button" value="Ok" class="button"
                  id="pat89sub"
                  onclick="tempDisable(this);checkBedStatus(ptmis068.value,
                           ptmis076.value,ptmis001.value,ptmis030.value,
                           ptmis002.value,ptrgm001.value,ptrgm002.value,
                           ptrgm003.value,SubmitAdm);">
           <input tabindex="61" type="button" value="Cancel" class="button"
                  onclick="PatientLinkTo('patweb98.pbl',1,1,0);"></td></tr>
  </table>
 </form>
 <form name="PatientLinks" method="get">
  <input type="hidden" name="reportno" value="1">
  <input type="hidden" name="template" value="004">
  <input type="hidden" name="urnumber" value="%PATWEB89.03.003">
  <input type="hidden" name="admissno" value="%PATWEB89.03.101">
  <input type="hidden" name="MenuType" value="%PATWEB89.03.088">
  <input type="hidden" name="ptcnbman" value="%STANDARD.01.025.112.107.0.1">
 </form>
</div>

<span id="WaitingList" style="display:none">
 <table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
  <tr><td class="DataLabel" width="37%">Date of Referral</td>
      <td><input type="text" size="12" name="ptmis058" tabindex="19"
                 id=ptmis058 title="Referral Date">
            <img src="../images/DateLookup.gif" class="Icon" tabindex=-1
                 onclick="DateLookupFrame(ptmis058);"></td></tr>
  <tr><td class="DataLabel">Date of 1st Spec Consult</td>
      <td><input type="text" size="12" name="ptmis059" tabindex="20"
                 id=ptmis059 title="Consultation Date">
            <img src="../images/DateLookup.gif" class="Icon" tabindex=-1
                  onclick="DateLookupFrame(ptmis059);"></td></tr>
 </table>
</span>

<span id="BabyAge" style="display:none">
 <table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
  <tr><td class="DataLabel" width="37%">Admission Weight</td>
      <td><input type="text" name="ptmis051" size="8" maxlength="6"
                 onchange="justifyRight(this);">grams</td></tr>
 </table>
</span>

<span id="NewBorn" style="display:none">
 <table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
  <tr><td class="DataLabel" width="37%">Gestation Period</td>
      <td><input type="text" name="ptmis041" maxlength="3" size="4" tabindex="21">
      weeks</td></tr>
 </table>
</span>

<span id="transferhd" style="display:none">Transfer Source</span>

<span id="transfersrc" style="display:none">
  <input type="text" size="7" maxlength="5" name="trnsfsrc" class="Mandatory"
         id=trnsfsrc title="Transfer Source" tabindex="5"
         onchange="validateCode(9,trnsfsrc,trandesc);">
  <input type="text" size="27" name="trandesc" tabindex=-1 class="Readonly"
         readonly id=trandesc>
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="TransferSourceFrame(trnsfsrc,trandesc);">
</span>

<span id="transferblank" style="display:none">
   <input type="hidden" name="trnsfsrc">
</span>

<span id="contracihd" style="display:none">Contract Id</span>

<span id="contractid" style="display:none">
  <input type="text" size="7" maxlength="5" name="ptasf003" title="Contract Id"
        id=ptasf003 tabindex="50" onblur="validateCode(9,ptasf003,d_ptasf003);">
  <input type="text" size="27" name="d_ptasf003" tabindex=-1 class="Readonly" 
         readonly id=d_ptasf003>
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="TransferSourceFrame(ptasf003,d_ptasf003);">
</span>

<span id="contracthd" style="display:none">Contract Type</span>

<span id="contracttype" style="display:none">
  <input type="text" name="ptasf001" size="2" maxlength="1" class="Mandatory"
         value="%PATWEB89.03.199.001" tabindex="42" title="Contract Type"
         onblur="ContType(this);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="ContTypeAlert();">
</span>

<span id="contracrhd" style="display:none">Contract Role</span>

<span id="contractrole" style="display:none">
  <input type="text" name="ptasf002" size="2" maxlength="1" class="Mandatory"
         value="%PATWEB89.03.199.002" tabindex="51" title="Contract Role"
         onblur="ContRole(this);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="ContRoleAlert();">
</span>

<span id="blanklabel" style="display:none">&nbsp;</span>

<span id=regimehd1 style="display:none">Regime Code 1</span>

<span id=regimecod1 style="display:none">
  <input type="text" size=15 maxlength=10 name=ptrgm001 tabindex=53 id=ptrgm001
         onblur="validateCode(75,UpdateForm.ptrgm001,UpdateForm.dummy);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="RegimeSearchFrame(ptrgm001,dummy);">
    <img src="../images/erase.gif" class=Icon onclick="clrFields(ptrgm001,dummy);">
</span>

<span id=regimehd2 style="display:none">Regime Code 2</span>

<span id=regimecod2 style="display:none">
  <input type="text" size=15 maxlength=10 name=ptrgm002 tabindex=54 id=ptrgm002
         onblur="validateCode(75,UpdateForm.ptrgm002,UpdateForm.dummy);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="RegimeSearchFrame(ptrgm002,dummy);">
    <img src="../images/erase.gif" class=Icon onclick="clrFields(ptrgm002,dummy);">
</span>

<span id=regimehd3 style="display:none">Regime Code 3</span>

<span id=regimecod3 style="display:none">
  <input type="text" size=15 maxlength=10 name=ptrgm003 tabindex=55 id=ptrgm003
         onblur="validateCode(75,UpdateForm.ptrgm003,UpdateForm.dummy);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="RegimeSearchFrame(ptrgm003,dummy);">
       <img src="../images/erase.gif" class=Icon onclick="clrFields(ptrgm003,dummy);">
</span>

<span id=regimeblank1 style="display:none">
  <input type=hidden name=ptrgm001 value="">
</span>

<span id=regimeblank2 style="display:none">
  <input type=hidden name=ptrgm002 value="">
</span>

<span id=regimeblank3 style="display:none">
  <input type=hidden name=ptrgm003 value="">
</span>

<span id=usernamehd style="display:none">User Name</span>

<span id=usernamcd style="display:none">
  <input size=12 type=text name=username class=Mandatory title="UserName"
         tabindex=45>
</span>

<span id=passwordhd style="display:none">Password</span>

<span id=passwordcd style="display:none">
  <input size=12 type=password name=password onblur="checkPass();"
         class=Mandatory title="Password" tabindex=46>
</span>

<span id=regimeblank4 style="display:none">
  <input type=hidden name=ptmis057 value="">
</span>

<span id=regimehd4 style="display:none">%STANDARD.01.035.DA</span>

<span id=regimecod4 style="display:none">
  <select name=ptmis057 title="%STANDARD.01.035.DA" tabindex="56">
    <option></option>
      %PATWEB89.03.148.2
  </select>
</span>

<script type="text/javascript">
 MergePsy="%PATWEB89.03.050"
 if (MergePsy=="Yes"){
   document.UpdateForm.ptmas046.value="1"
 }
 if (MergePsy=="No "){
   document.UpdateForm.ptmas046.value="0"
 }
 if ("%PATWEB89.03.903" == "1") {
   alert("Warning: Patient has a Waiting List Procedure");
 }
 if ("%PATWEB89.03.904" == "1") {
   alert("Warning: Patient has a Booking");
 }
 if ("%PATWEB89.03.905" == "1") {
   alert("Warning: Patient is currently admitted");
 }
 if ("%PATWEB89.03.908" == "1") {
   alert("Warning: Patient has a pre-admission record");
 }
 Day=document.UpdateForm.ptmis001.value.substr(0,2).replace(/ /g,"0")
 Dat=document.UpdateForm.ptmis001.value.substr(2)
 document.UpdateForm.ptmis001.value=Day + Dat

 var p = document.UpdateForm;

 var PCEHR = trim("%PATWEB89.03.298.037"); //pmsvx125/ptvis115
 
 var MyHlthRecFlag="%PATWEB89.03.086.099.046";
 valMYHR(p.ptvis115,MyHlthRecFlag,p.ptcndumh.value);

 var informGP = "%PATWEB89.03.225.0";      //ptvis022
 valInformGP(p.ptvis022,informGP,p.ptcndigp.value);
 
   for (var i =0 ; i < document.UpdateForm.ptvis115.length; i++) {
    if (document.UpdateForm.ptvis115.options[i].value == MyHlthRecFlag) {
        document.UpdateForm.ptvis115.selectedIndex=i } };

  if (MyHlthRecFlag=="0") {
      document.getElementById("ptvis115").disabled = true;
  }

  if (p.ptcndumh.value > 2){
    p.ptvis115.className="Mandatory";}
    else{
    p.ptvis115.className="";}

</script>
