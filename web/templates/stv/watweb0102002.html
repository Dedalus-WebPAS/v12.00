<meta name="TemplateVersion" content="V12.00.01">
<meta name="TemplateHome" content="stv">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function autoUpdate() {
  var timestamp1 = document.getElementById('timestamp');
  var watsu002 = document.getElementById('watsu002');

  timestamp1.onclick = function(){
      ImageClickHandler(this);
      checkTheNRFCField();
  };

  watsu002.onblur = function(){
    checkTheNRFCField();
    checkDate(watsu002,'Date')
    validateNRFCdate(watsu002);
  }
}

function checkTheNRFCField(){
  var watsu002 = document.getElementById('watsu002');
  var watsu005 = document.getElementById('watsu005');
  if (watsu002.value.replace(/ /g,"").length != 0) {
     watsu005.checked = true;
  } else {
     watsu005.checked = false;
  }
}

function SubForm(AddForm) {
  if (!isWhitespace(document.AddForm.wattx028.value)){
     if (isWhitespace(document.AddForm.wattr022.value)){
	alert("Preadmission Time requires a Preadmission Date")
	return;
     }
  }
//
  datechk=validateOpDate();
  if (!datechk) { 
      return
  };
//
  datechk1=validatePreDate();
  if (!datechk1) {
      return
  }

  if (!validateReferalAcctptDate()) {return;}

 procCodechk=isValidInput();
 if (!procCodechk) {
    alert("Procedure Code has characters other than Aa-Zz and 0-9 ")
     return;
 } 

//
  result=validateTime();
  if (result) {
    var serverURL = "../cgi-bin/watweb01.pbl?reportno=12&valdtype=1" +
                   "&urnumber="+document.AddForm.urnumber.value.replace(/ /g,"+") +
                   "&proccode="+document.AddForm.wattr001.value.replace(/ /g,"+");
    var returnValue = RSExecute(serverURL);
    if (returnValue.return_value == -1) {
     if (!confirm("Waiting list entry already exists.\nOK will create a duplicate.")) {
       return false; 
      } 
    }
      document.AddForm.nextpage.value="6";
      document.AddForm.redirect.value="watweb01.pbl?reportno=02&template=001"+
                             "&showcomm=1&urnumber=" +
                              PatientLinks.urnumber.value.replace(/ /g,"+");
   if(document.getElementById('d_wattx032').checked==true){
      document.getElementById('wattx032').value="1"
   } else {
      document.getElementById('wattx032').value="0"}
   if(document.getElementById('wattx032').value=="1"
         && trim(document.AddForm.wattr013.value)!="0"){
     alert("Cannot have a length of stay > 0 if planned 23 hour stay.")
     return;}
     SubmitHidden(document.AddForm);
     return true;
  }
}

function validateReferalAcctptDate() {
  date1=AddForm.wattr006.value;
  date2=AddForm.wattr059.value;
  date3=AddForm.date_keyed.value;

  if (isWhitespace(date1)) {return true;}
  if (isWhitespace(date2)) {return true;}

  if (ChkDateTime2(date1,date2)) {
     message="Referral Accepted Date should be equal to or greater than ";
     message+="Date On List";
     alert(message);
     return false;
  }

  if (isWhitespace(date3)) {return true;}

  if (ChkDateTime2(date2,date3)) {
     message="Referral Accepted Date should be equal to or less than ";
     message+="Date Keyed";
     alert(message);
     return false;
  }

  return true;

}

function UpdateUnit(){
  for (var i =0 ; i < document.AddForm.wattr011.length; i++) {
    if (trim(AddForm.unit.value.substr(0,3))==trim(AddForm.wattr011.options[i].value.substr(0,3))) {
      document.AddForm.wattr011.selectedIndex=i;
    }
  };
}

function valUnit() {
  if (document.AddForm.wattr012.value != "") {
    validateCode(31,AddForm.wattr012,AddForm.name_wattr012)
    AddForm.unit.value=AddForm.wattr011.value
    selectOptions("30",AddForm.wattr012,AddForm.wattr011);
    UpdateUnit();
    if(document.AddForm.wattr011.selectedIndex==0) {
      AddForm.wattr011.selectedIndex=1
      AddForm.unit.value=AddForm.wattr011.value
    }
  }
}

function valProc() {
  validateCode(27,AddForm.wattr001,AddForm.dummy1,AddForm.wpgrp,AddForm.wattr013,AddForm.wattr002);
  AddForm.wattr003.value=AddForm.dummy1.value;
}

function valDoc() {
  var serverURL = "../cgi-bin/watweb01.pbl?reportno=13&valdtype=1" +
                  "&wattr011="+document.AddForm.wattr011.value +
                  "&wattr012="+document.AddForm.wattr012.value;
  var returnValue = RSExecute(serverURL);
  if (returnValue.return_value == -1) {
    return true;
  }
  return false;
}

function hourstay(){
   if(document.getElementById('currdate').value>'20160630'){
     document.getElementById('div23hourstayLabel').style.display="none";
     document.getElementById('div23hourstay').style.display="none";
   } else {
     document.getElementById('div23hourstayLabel').innerHTML=
     document.getElementById('23hourstayLabel').innerHTML;
     document.getElementById('div23hourstay').innerHTML=
     document.getElementById('23hourstay').innerHTML;
  }
}

function validatePreDate(){
  date2=AddForm.wattr008.value;
  date1=AddForm.wattr022.value;
  if (isWhitespace(AddForm.wattr008.value) ||
      isWhitespace(AddForm.wattr022.value)) {
    return true;
  } else {
    if (ChkDateTime2(date1,date2)) {
      message=" \"Proposed Admission Date\" Can't be Less than ";
      message+="\"Preadmission Date\"";
      alert(message);
      return false;
    }
    return true;
  }
}

function RemoveQuote(Field) {
  Field.value=Field.value.replace(/\"/g,"");
}

function validateNRFCdate(dateObject){
  zT=document.AddForm.zeroTime
  NRFCDate=document.getElementById('watsu002');
  ListDate=document.AddForm.wattr006;

  if (NRFCDate.value==""||ListDate.value=="") {
    return;
  }

  if (ChkDateTime(NRFCDate,zT,ListDate,zT)&&(NRFCDate.value!=ListDate.value)){
    alert((NRFCColDescription) + " To Date must not be less than " +
          (DoLDescription));
    dateObject.focus();
    dateObject.value="";
  }
  if (NRFCDate.value==ListDate.value){
    alert((NRFCColDescription) + " To Date cannot be equal to " +
          (DoLDescription));
    dateObject.focus();
    dateObject.value="";
  }
}
function isValidInput() {
    var pattern = /^[A-Za-z0-9-]+$/;
    
    procCode=trim(AddForm.wattr001.value);
    return pattern.test(procCode);
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%WATWEB01.02.003";
PatientVIS="%WATWEB01.02.081";
PatientNAM="%WATWEB01.02.002";
PatientSTA="%WATWEB01.02.086.078";
PatientALT="%WATWEB01.02.084";
PatientSEX="%WATWEB01.02.019";
PatientDOB="%WATWEB01.02.020";
PatientAGE="%WATWEB01.02.021";
PatientLOC="%WATWEB01.02.083";
DoctorCOD="%WATWEB01.02.082.003";
DoctorNAM="%WATWEB01.02.082.002";
PatientAID="%WATWEB01.02.086.090";
PatientIND="%WATWEB01.02.086.091";
PatientCUR="%WATWEB01.02.086.092";
PatientCLC="%WATWEB01.02.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%WATWEB01.02.086.094";
PatientCDM="%WATWEB01.02.086.095";
PatientVDH="%WATWEB01.02.086.099.015";
PatientUNT="%WATWEB01.02.066.0";
PatientPRI="%WATWEB01.02.086.066.1";
InsertPatientHeader();
</script>

<div id=PatientMenu></div>
<div id=PageBodySection style="overflow: auto;">

<form name=AddForm action="watweb01.pbl" method=post>
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=001>
<input type=hidden name=updttype value="A">
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=dummy id=dummy value="">
<input type=hidden name=dummy1 value="">
<input type=hidden name=unit value="">
<input type=hidden name=wpgrp value="">
<input type=hidden name=redirect value="">
<input type=hidden name=nextpage value="1">
<input type=hidden name=claimc>
<input type=hidden name=wattr038 value="%STANDARD.01.032">
<input type=hidden name=zeroTime value="00:00:00">

<table border=0 width=100% cellspacing="0" cellpadding="1" align=center>
<tr><td align=center class=HeadingCell>Add Waiting List Entry</td></tr>

<table border=0 width=95% cellspacing=0 cellpadding=1 align=center>
<tr><td class=DataLabel>Consultant</td>
    <td class=DataField>
    <input type=text name=wattr012 size=6 maxlength=8 title="Consultant" 
     class=Mandatory tabindex=1 onBlur="UpCase(this);valUnit();">
    <input type=text name=name_wattr012 tabindex=-1 size=40 maxlength=30
     title="Consultant Name">
    <img src=../images/SearchIcon.gif class=Icon
    onclick="WaitConSearchFrame(AddForm.wattr012,
                               AddForm.name_wattr012,
                               AddForm.wattr011);">
    </td>
    <td class=DataLabel>
      <script type="text/javascript">DoLDesc();</script>
    </td>
    <td class=DataField>
    <input type=text name=wattr006 size=12 tabindex=1 colspan=3
     onblur="checkDate(this,'Date');validateNRFCdate(this);"
     value="%STANDARD.01.015" class="PastDate Mandatory" title="Date on List">
    <img src=../images/DateTimeStamp.gif class=Icon date=AddForm.wattr006
     time=null>
    <img src=../images/DateLookup.gif class=Icon date=AddForm.wattr006>
    </td>
</tr>

<tr><td class=DataLabel>Unit</td>
    <td class=DataField>
    <select name=wattr011 title="Unit" class="Mandatory selectBig" tabindex=2>
    <option></option>
    %WATWEB01.02.114.2
    </select></td>

    <td class=DataLabel>Referral Accepted Date</td> 
    <td class=DataField>
     <input type=text name=wattr059 size=12 tabindex=3 colspan=3
      onblur="checkDate(this,'Date');" 
      title="Referral Accepted Date">
     <img src=../images/DateTimeStamp.gif class=Icon date=AddForm.wattr059
      time=null>
     <img src=../images/DateLookup.gif class=Icon date=AddForm.wattr059>
    </td></tr>

<tr><td class=DataLabel>Procedure Code</td>
    <td class=DataField>
    <input type=text name=wattr001 id=wattr001 class=Mandatory tabindex=4 maxlength=9
     title="Procedure Code" onblur='RemoveAmbersand(this); valProc()'>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="WaitProSearchFrame(AddForm.wattr001,
                                 AddForm.wattr003,
                                 AddForm.wattr013,
                                 AddForm.dummy)"></td>

    <td class=DataLabel>Listing Status</td>
    <td class=DataField>
    <select name=wattx004 class="selectBig Mandatory"
            title="Listing Status" onchange="ChgStat();" tabindex=5>
    <option></option>
     %WATWEB01.02.504.4
    </select></td></tr>

<tr><td class=DataLabel>Diagnosis</td>
    <td class=DataField width=35%>
    <input type=text name=wattr004 size=80 maxlength=80 tabindex=6
     onblur="RemoveQuote(this);"></td>

    <td class=DataLabel>%STANDARD.01.017.TP</td>
    <td class=DataField>
   <select name=wattr014 class=Mandatory tabindex=7 title="%STANDARD.01.017.TP">
    <option></option>
    %WATWEB01.02.117.2
    </select></td></tr>

<tr><td class=DataLabel>Procedure</td>
    <td class=DataLabel>
    <input type=text name=wattr003 size=80 maxlength=80 tabindex=8
     onblur="RemoveQuote(this);"></td>

    <td class=DataLabel>Planned Length of Stay</td>
    <td class=DataLabel colspan=3>
    <input type=text name=wattr013 size=5 maxlength=5 tabindex=9
     class="Mandatory Integer" min=0 title="Planned Length of Stay">(days)</td>
    </tr>

<tr><td class=DataLabel>%STANDARD.01.017.CL</td>
    <td class=DataField>
    <select name=wattx026 tabindex=10 title="" class=selectBig >
    <option></option>
    %WATWEB01.02.526.9.1.10.2.X
    </select></td>
    <input type=hidden name=wattx032 id=wattx032>
    <td class=DataLabel>%STANDARD.01.017.As</td>
    <td class=DataField>
      <select name=wattx057 tabindex=10 title="%STANDARD.01.017.As" 
      class="selectBig Mandatory" >
      <option></option>
      %WATWEB01.02.560.9.5
      </select>
    </td></tr>

<tr><td><div id=div23hourstayLabel></div></td>
    <td><div id=div23hourstay></div></td></tr>

<tr> <td class=DataLabel>Referral Source</td>
    <td class=DataField>
    <select name=wattr050 tabindex=11 title="Referral Source"
     class="Mandatory selectBig" onchange="DisplayTrnSrc(this)">
    <option></option>
    %WATWEB01.02.187.2
    </select></td>
    <td><div id=divTransferLabel></div></td>
    <td><div id=divTransferSource></div></td>
</tr>
<input type=hidden name=currdate id=currdate value="%STANDARD.01.013">

<tr id="previous_twt" style="display:none">
   <td></td><td></td></td>
  <td> Previous Total Waiting Time</td>
  <td><input type=text size=10 maxlength=4 name=prevtt01 id=prevtt01
   min=0 title="Previous Total Waiting Days" tabindex=13
   onblur="checkInteger(this,this.title);">
 </td></tr>

<tr><td class=DataLabel>Admitting Point  </td>
    <td class=DataField>
    <select name=wattx006  tabindex=13 class="Mandatory selectBig"
     title="Admitting Point">
    <option></option>
     %WATWEB01.02.506.2
    </select></td>
    <td class=DataLabel>Exp. Post Op Ward  </td>
    <td class=DataField>
    <select name=wattx005 tabindex=14 class="Mandatory selectBig"
     title="Exp. Post Op Ward" >
    <option></option>
     %WATWEB01.02.505.2
    </select></td></tr>


<tr><td class=DataLabel>Estimated Op Time  </td>
    <td class=DataField>
    <input type=text name=wattr002 size=10 tabindex=15 maxlength=5 
     title="Estimated Operating time" class=Integer min=0
       onBlur="TextBlurHandler(this)"></td>
    <td class=DataLabel>Short Notice </td>
    <td class=DataField>
    <select name=wattr015 tabindex=16 class=selectBig >
    <option></option>
    %WATWEB01.02.118.2
    </select></td></tr>

<tr><td class=DataLabel>Consent Obtained </td>
    <td class=DataField>
    <select name=wattr054 tabindex=21 maxlength=3 class="Mandatory"
     title="Consent Obtained" onchange="changeConsent()">
    <option></option>
    <option value="No "> No </option>
    <option value="Yes"> Yes </option>
    </select></td>

    <td class=DataLabel>Consent Date</td>
    <td class=DataField>
    <input type=text name=wattr055 size=12 tabindex=22
     onblur="checkDate(this,'Date')" value=""
     class= "PastDate" title="Consent Date">
    <img src=../images/DateTimeStamp.gif class=Icon date=AddForm.wattr055
     time=null>
    <img src=../images/DateLookup.gif class=Icon date=AddForm.wattr055>
    </td></tr>


<tr><td class=DataLabel>Proposed Adm. Date</td>
    <td class=DataLabel >
    <input type=text name=wattr008 size=12 maxlength=12 tabindex=23
       onblur="checkDate(this,'Date')"> 
    <img src=../images/DateLookup.gif class=Icon date=AddForm.wattr008>

    Time
    <input type=text name=wattx015 size=8 maxlength=8 tabindex=24 title="Time">
    <img src=../images/DateTimeStamp.gif class=Icon
     date=AddForm.wattr008 time=AddForm.wattx015>
    <img src=../images/TimeLookup.gif class=Icon  time=AddForm.wattx015>

    </td>
    <td class=DataLabel>Equipment 1 </td>
    <td class=DataField >
    <select name=wattx010 tabindex=25 class="selectBig">
    <option></option>
    %WATWEB01.02.510.2
    </select>
    </td></tr>

<tr><td class=DataLabel>Proposed Op. Date</td>
    <td class=DataLabel >
    <input type=text name=wattr028 size=12 maxlength=12 tabindex=26
      title="Date" onblur="checkDate(this,'Date')"> 
    <img src=../images/DateLookup.gif class=Icon date=AddForm.wattr028>

    Time
    <input type=text name=wattx029 size=8 maxlength=8 tabindex=27 title="Time">
    <img src=../images/DateTimeStamp.gif class=Icon
     date=AddForm.wattr028 time=AddForm.wattx029>
    <img src=../images/TimeLookup.gif class=Icon  time=AddForm.wattx029>

    </td>
    <td class=DataLabel>Equipment 2 </td>
    <td class=DataField >
    <select name=wattx011 tabindex=28 class="selectBig">
    <option></option>
    %WATWEB01.02.511.2
    </select></td></tr>
<tr><td></td><td></td>
    <td class=DataLabel>Equipment 3 </td>
    <td class=DataField >
    <select name=wattx027 tabindex=29 class="selectBig">
    <option></option>
    %WATWEB01.02.527.2
    </select></td></tr>

<tr><td><div id=NRFCLabel1></div></td>
    <td><div id=NRFCField1></div></td>
    <td><div id=NRFCLabel2></div></td>
    <td><div id=NRFCField2></div></td></tr>

<tr><td><div id=NRFCLabel3></div></td>
    <td><div id=NRFCField3></div></td></tr>

<tr><td class=DataLabel>Preadmission Status </td>
    <td class=DataField>
    <select name=wattx012 tabindex=35>
    <option></option> 
    %WATWEB01.02.308.2
    </select></td>
    <td class=DataLabel>Preadmission Date </td>
    <td class=DataLabel>
    <input type=text name=wattr022 size=12 maxlength=12 tabindex=36 
    onblur="checkDate(this,'Date')"> 
    <img src=../images/DateLookup.gif class=Icon date=AddForm.wattr022>
    Time 
    <input type=text name=wattx028 size=8 maxlength=8 tabindex=37 title="Time">
    <img src=../images/DateTimeStamp.gif class=Icon
     date=AddForm.wattr022 time=AddForm.wattx028>
    <img src=../images/TimeLookup.gif class=Icon  time=AddForm.wattx028>
    </td></tr>

<tr><td class=DataLabel>
    <script type="text/javascript">DaKDesc();</script>
    </td>      
    <td class=DataField><input type=text size=12 maxlength=12 readonly
     name=date_keyed id=date_keyed title="Date Keyed"
     tabindex=38 class=ReadOnly value="%STANDARD.01.015"></td>

<td class=DateLabel>Operator ID</td>
    <td class=DataField><input type=text size=12 maxlength=12 readonly
     tabindex=39 class=ReadOnly value='%WATWEB01.02.310' ></td></tr>

<tr><td class=DataLabel>Referring Clinician </td>
    <td class=DataField>
        <input type=text name=wattx046 id=wattx046 tabindex=37
         size=12 maxlength=10 title="Referring Clinician"
         onblur="validateCode(18,wattx046,n_wattx046,dummy,dummy,dummy);">
        <input type=text name=n_wattx046 id=n_wattx046 title="Clinician Name"
         size=35 class=Readonly readonly >
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCPSearchFrame(wattx046,n_wattx046,dummy,dummy,dummy,
                  dummy,0);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(wattx046,n_wattx046);"></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td></tr>

<tr><td colspan=8>&nbsp;</td></tr>

<tr><td colspan=8 align=center>
    <input type=button id=subBtn class=button value="Ok" tabindex=40 
     onclick="tempDisable(this); return SubForm(this);">
    <input type=button value="Cancel" class=button 
     tabindex=41 onclick='PatientLinkTo("watweb01.pbl",2,10,0,0,0);'>
    </td></tr>

</table>
</form>

<span id=InNRFCField1 style="display: none">
  <input type=text name=watsu002 id=watsu002 size=12 maxlength=12
   title="ToDate" class="Mandatory" tabindex=32>
  <img src=../images/DateTimeStamp.gif class=Icon 
  date=AddForm.watsu002 time=null id=timestamp>
  <img src=../images/DateLookup.gif class=Icon date=AddForm.watsu002>
</span>

<span id=InNRFCField2 style="display: none">
  <input type=checkbox name=watsu005 id=watsu005 value="1" tabindex=33>
</span>

<span id=InNRFCField3 style="display: none">
  <select name=watsu003 id=watsu003 tabindex=34>
    <option></option>
    %WATWEB01.02.605.2
  </select>
</span>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=admissno value="%WATWEB01.02.081">
<input type=hidden name=MenuType value="%WATWEB01.02.088">
</form>

<script type="text/javascript">
function init(){
  setTimeout('DefStat();',50);
  setTimeout('valClaimCode()',50);
  setTimeout('hourstay();',50);

  if("%STANDARD.01.013" >= DOYR2021){
    AddForm.wattr059.className="Mandatory";
  }
}
function valClaimCode() {
  validateCode(41,PatientLinks.urnumber,AddForm.claimc);
  for (var i =0 ; i < document.AddForm.wattx026.length; i++) {
    if (document.AddForm.claimc.value==
        trim(document.AddForm.wattx026.options[i].value.substr(0,3))){
          document.AddForm.wattx026.selectedIndex=i;
    }
}
}
function ChkDateTime1(strtDate,endDate) {
  var strtDay  = strtDate.substring(0,2);
  var strtMon  = strtDate.substring(3,6);
  var strtYear = strtDate.substring(7,11);

  var endDay   = endDate.substring(0,2);
  var endMon   = endDate.substring(3,6);
  var endYear  = endDate.substring(7,11);

  strtMon = GetMonthNumber(strtMon);
  endMon  = GetMonthNumber(endMon);

  var strtDateTime = strtYear + strtMon + strtDay 
  var endDateTime  = endYear + endMon + endDay 
  if (endDateTime <= strtDateTime ) return false;
  return true;
}

function validateTime(){
   date1=AddForm.wattr008.value;
   date2=AddForm.wattr006.value;
   if(ChkDateTime1(date1,date2)) {
     message=" \"Proposed Admission Date\" cannot be before";
     message+="\"(DoLDescription)\"";
     alert(message);
     return false;
   }
  return true;
}

function validateOpDate(){
   date1=AddForm.wattr008.value;
   date2=AddForm.wattr028.value;
   if(ChkDateTime2(date1,date2)) {
     message=" \"Proposed Operation Date\" should be equal to or greater than ";
     message+="\"Proposed Admission Date\"";
     alert(message);
     return false;
   }
  return true;
}

function ChkDateTime2(strtDate,endDate) {
  var strtDay  = strtDate.substring(0,2);
  var strtMon  = strtDate.substring(3,6);
  var strtYear = strtDate.substring(7,11);

  var endDay   = endDate.substring(0,2);
  var endMon   = endDate.substring(3,6);
  var endYear  = endDate.substring(7,11);

  strtMon = GetMonthNumber(strtMon);
  endMon  = GetMonthNumber(endMon);

  var strtDateTime = strtYear + strtMon + strtDay
  var endDateTime  = endYear + endMon + endDay
  if (endDateTime >= strtDateTime ) {
     return false;
  }
  return true;
}

function DisplayTrnSrc(field) {
  i=field.selectedIndex;
  ind=field.options[i].value.substring(4,5)
  if (ind!="1") {
   document.getElementById('divTransferSource').innerHTML=
     document.getElementById('spTransferBlank').innerHTML;
   document.getElementById('divTransferLabel').innerHTML="";
   document.getElementById('previous_twt').style.display="none";
   document.getElementById('prevtt01').value="";
   document.getElementById('prevtt01').className="";
  } else {
   document.getElementById('divTransferSource').innerHTML=
     document.getElementById('spTransfer').innerHTML;
   document.getElementById('divTransferLabel').innerHTML=
     document.getElementById('spTransferLabel').innerHTML;
   if(document.getElementById('currdate').value>'20160630'){
     document.getElementById('previous_twt').style.display="";
     document.getElementById('prevtt01').className="Mandatory";
   }
  }
}

function changeConsent() {
  if (AddForm.wattr054.value == "Yes") {
    document.AddForm.wattr055.value="%STANDARD.01.015";
    AddForm.wattr055.select();
    AddForm.wattr055.focus();
  }
  else {
    document.AddForm.wattr055.value="";
    AddForm.wattr002.focus();
  }
}

document.AddForm.wattr006.title=DoLDescription;

function DefStat(){
  ChgStat();
}


function ChgStat() {
  var ind=document.AddForm.wattx004.value.substr(3,1)
  if (ind == "C"|| ind =="D" || ind =="S") {
    document.getElementById('NRFCLabel1').innerHTML=
      (NRFCColDescription) + " To Date";
    document.getElementById('NRFCLabel2').innerHTML=
      "Auto Update " + (RFCColDescription);
    document.getElementById('NRFCLabel3').innerHTML=
      (NRFCColDescription) + " Reason";
    document.getElementById('NRFCField1').innerHTML=
      document.getElementById('InNRFCField1').innerHTML
    document.getElementById('NRFCField2').innerHTML=
      document.getElementById('InNRFCField2').innerHTML
    document.getElementById('NRFCField3').innerHTML=
      document.getElementById('InNRFCField3').innerHTML
    AddForm.watsu003.className="Mandatory";
  }
  else {
    document.getElementById('NRFCLabel1').innerHTML="";
    document.getElementById('NRFCLabel2').innerHTML="";
    document.getElementById('NRFCLabel3').innerHTML="";
    document.getElementById('NRFCField1').innerHTML="";
    document.getElementById('NRFCField2').innerHTML="";
    document.getElementById('NRFCField3').innerHTML="";
  }
  if (ind == "S"){
    autoUpdate();
    for (var i =0 ; i < document.AddForm.watsu003.length; i++) {
      if(trim(AddForm.watsu003.options[i].value.substr(4,1))=="S") {
        document.AddForm.watsu003.selectedIndex=i
      }
    };
  }

  if (ind == "C"){
    autoUpdate();
    for (var i =0 ; i < document.AddForm.watsu003.length; i++) {
      if(trim(AddForm.watsu003.options[i].value.substr(4,1))=="C") {
        document.AddForm.watsu003.selectedIndex=i
      }
    };
  }

  if (ind == "D"){
    autoUpdate();
    for (var i =0 ; i < document.AddForm.watsu003.length; i++) {
      if(trim(AddForm.watsu003.options[i].value.substr(4,1))=="D") {
        document.AddForm.watsu003.selectedIndex=i
      }
    };
  }
}


</script>
<span id=23hourstayLabel style="display:none">Planned 23 Hour Stay </span>
<span id=23hourstay style="display:none">
    <input type=checkbox name=d_wattx032 id=d_wattx032 value="1" tabindex=10
     title="Planned 23 hour stay" notab>
</span>

<span id=spTransferLabel style="display:none">
Transfer Source
</span>

<span id=spTransfer style="display:none">
  <input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc
   class=Mandatory title="Transfer Source" tabindex=11
   onchange="validateCode(9,trnsfsrc,trandesc);">
  <input type=text size=20 name=trandesc id=trandesc notab
   class=Readonly readonly>
  <img src="../images/SearchIcon.gif" class=Icon
   onclick="TransferSourceFrame(trnsfsrc,trandesc)">&nbsp;Previous ID
  <input type=text size=15 maxlength=9 name=previd01 id=previd01
   class=Mandatory min=1 title="Previous ID" tabindex=12
   onblur="checkInteger(this,this.title);">
</span>


<span id=spTransferBlank style="display:none">
  <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>
