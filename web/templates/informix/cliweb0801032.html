<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="informix">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src=../js/TableSort.js></script>
<script type="text/javascript" src=../js/PatientHeader.js></script>
<link rel="stylesheet" href="../html/gallery.css" type="text/css">
</head>
%START.OF.PAGE
<script type="text/javascript" src="%CLIWEB08.01.001.patweb98.01.103"></script>
<body onload="LoadHead();PageLoad();showGallery()">
<div id=PatientHeading></div>
<div id=PatientBannerEx1 class=PatientBannerEx></div>
<div id=PatientMenu></div>
<div id=PageBodySection>
<table cellspacing=0 cellpadding=0 border=0 width=100%>
<tr style="height:25px;">
    <td class=HeadingCell width=30%>
    Add Document :
    <select name=docttype onchange="PMenuLinkTo(this);">
    <option></option>
    <option value="patweb98.pbl|01|320|0|0|0">Create Document</option>
    <option value="newImageGallery()|||7|800|600">Create Illustration</option>
    <option value="cliweb08.pbl|01|040|1|640|520">Capture Photo ID </option>
    <option value="cliweb08.pbl|01|043|1|1024|768">HTML5 Capture Photo ID </option>
    <option value="cliweb08.pbl|01|002|1|500|300">Upload Image</option>
    <option value="cliweb08.pbl|01|009|1|500|300">Upload Result</option>
    </select>
    </td>
    <td class=HeadingCell align=center>Patient Images Gallery</td>
    <td class=HeadingCell align=right width=30%>
    <select id=filterType onchange='filterGallery();'>
    <option value="">All Document Types</option>
    %CLIWEB08.01.107.2
    </select>
    </td></tr></table>

<div id="box_gallery" class="box_gallery"></div> 
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=033>
<input type=hidden name=urnumber value="%CLIWEB08.01.003">
<input type=hidden name=admissno value="%CLIWEB08.01.081">
</form>
</div>
<script type="text/javascript">
var imgTitle = [];
var imgName = [];
var imgFile = [];
var imgPath = [];
var imgType = [];
var imgKey = [];
var imageSpace = 50;
function filterGallery() {
  var el = document.getElementById('box_gallery');
  el.innerHTML="";
  showGallery();
}
function showGallery() {
  var el=document.getElementById("filterType");
  var codeFilter=el.options[el.selectedIndex].value;
  codeFilter=codeFilter.substr(0,3);
  for (i = 1; i < imgName.length; i++) {
    if (imgType[i]==codeFilter||codeFilter=="") {
      addElement(i, 'img');
    }
  }
}
function openImageView(imgId) {
  var f=0.8;
  var tw=window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
  var th=window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
  var h=Math.round(th*f);
  var t=(th-h)/2;
  var w=Math.round(tw*f);
  var l=(tw-w)/2;
  l=l+window.screenLeft;  // Dual Screen Offset
  var linkURL= 'cliweb08.pbl?reportno=1&template=33'+ 
               '&urnumber='+document.PatientLinks.urnumber.value.replace(/ /g,"+")+
               '&admissno='+document.PatientLinks.admissno.value.replace(/ /g,"+")+
               '&detailky='+imgKey[imgId];
  var newWin=window.open('','_blank','top='+t+',left='+l+',width='+w+',height='+h+',scrollbars=yes');
  newWin.location.href=linkURL;
}
function newImageGallery() {
  var linkURL= 'cliweb08.pbl?reportno=1&template=34'+ 
               '&urnumber='+document.PatientLinks.urnumber.value.replace(/ /g,"+")+
               '&admissno='+document.PatientLinks.admissno.value.replace(/ /g,"+")
  var f=0.8;
  var tw=window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
  var th=window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
  var h=Math.round(th*f);
  var t=(th-h)/2;
  var w=Math.round(tw*f);
  var l=(tw-w)/2;
  l=l+window.screenLeft;  // Dual Screen Offset
  var newWin=window.open('','_blank','top='+t+',left='+l+',width='+w+',height='+h+',scrollbars=yes');
  newWin.location.href=linkURL;
}
function addElement(imgId, type) {
  var addDiv = document.createElement('div');
  content = '<div onclick="openImageView('+imgId+
            ')" onmouseover="this.className=\'innerboximg_hover\';'+
            '" onmouseout="this.className=\'innerboximg\';"'+
            ' class="innerboximg">'+imgTitle[imgId]+
            '<div class="thumbimgbox">'+
            '<img class="thumb" width=180px height=135px alt="" '+
            'src="' + imgPath[imgId].replace(/ /g,"") + imgFile[imgId].replace(/ /g,"") + '"></div></div>';
  addDiv.innerHTML = content;
  addDiv.className = 'thumbbox';
  var el = document.getElementById('box_gallery');
  el.appendChild(addDiv);
}
%CLIWEB08.01.153     // Array from Server
</script>
</html>
