Content-Type: text/html
Cache-Control: no-cache

<!DOCTYPE html>
<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="informix">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src=../js/Standard.js></script>
<script type="text/javascript" src=../js/Custom.js></script>
<script type="text/javascript" src="../js/cliweb0801043.js"></script>
<link rel="stylesheet" href="../html/standard.css" type="text/css">
<link rel="stylesheet" href="../html/custom.css" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" href="../html/gallery.css" type="text/css">
<style type=text/css>
.SaveForm {
  display:none;
  background-color:white;
  border:2px solid #ccc;
}
.CC {
  width:50px;
  height:50px;
  border:0px;
}
.drawTools {
  background:white;
  text-align:center;
}
.drawTool {
  color:blue;
  margin:2px;
  padding:12px;
  border:1px solid #ccc;
  background-color:white;
  display:inline-block;
  text-align:center;
  vertical-align:middle;
}
#pictureBase {
  max-width:640px;
  max-height:480px;
}
</style>
</head>
%START.OF.PAGE
<body style='background-color:white;'>
<br>
<table border=0 cellpadding=0 cellspacing=0 align=center>
<form name=uploadForm method=post enctype='multipart/form-data' action='CanvasToImage.php'>
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="1">
<input type=hidden name=urnumber value="%CLIWEB08.01.003">
<input type=hidden name=admissno value="%CLIWEB08.01.103">
<input type=hidden name=nextpage value="0">
<input type=hidden name=updttype value="A">
<input type=hidden name=corsp001 id='image_data'>
<tr><td>
</td></tr>
<tr><td class=drawTools>
<span class=drawTool onclick='DrawFreehand()'>
  <i class="fa fa-pencil fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("plus")'>
  <i class="fa fa-plus fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("cross")'>
  <i class="fa fa-times fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("dot")'>
  <i class="fa fa-circle fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("circle")'>
  <i class="fa fa-circle-o fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("arrowUp")'>
  <i class="fa fa-arrow-up fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("arrowDown")'>
  <i class="fa fa-arrow-down fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("arrowRight")'>
  <i class="fa fa-arrow-right fa-2x"></i></span>
<span class=drawTool onclick='MarkPicture("arrowLeft")'>
  <i class="fa fa-arrow-left fa-2x"></i></span>
<span class=drawTool onclick='undoStep()'>
  <i class="fa fa-undo fa-2x"></i></span>
<span class=drawTool onclick='redoStep()'>
  <i class="fa fa-repeat fa-2x"></i></span>
</td></tr>
<tr><td class=drawTools>
<table align=center cellpadding=5 border=0 style='font-size:12pt;'>
<tr><td style='font-size:12pt;'>Size</td>
<td><select id=lineSize style='font-size:12pt;'>
     <option value="1">1px</option>
     <option value="2">2px</option>
     <option value="4">4px</option>
     <option value="8" selected>8px</option>
     <option value="16" >16px</option>
     <option value="32">32px</option>
     <option value="64">64px</option>
     </select></td>
<td style='font-size:12pt;'>Text</td>
<td><input type=text onkeydown='TextPicture();' 
    id=AddText name=AddText style='font-size:12pt;'>
</td>
<td style='font-size:12pt;'>Font Size</td>
<td> <select id=fontSize style='font-size:12pt;'>
     <option value="16px Arial" selected>16px</option>
     <option value="18px Arial">18px</option>
     <option value="20px Arial">20px</option>
     <option value="30px Arial">30px</option>
     <option value="40px Arial">40px</option>
     </select>
     </td></tr></table>
</td></tr>
<tr style='vertical-align:top;'>
<td>
<canvas id="pictureThis" width="640" height="480"  
 style='background-color:rgba(0,0,0,0);border:1px solid #ccc;'>
Your browser does not support the canvas element.
</canvas>
<video style='display:none;' id="video" width="640" height="480" autoplay></video>
</td></tr>
<tr><td style='background-color:white;text-align:center;height:50px'>
<input type=button class=button onclick='StartVideo()'  value="Start Camera">
<input type=button class=button onclick='SnapImage()'  value="Take Picture">
<input type=button class=button onclick='ShowForm()'     value=Save>
<input type=button class=button onclick='ClearPicture()' value=Clear>
<input type=button class=button onclick='LoadPicture();' value=Cancel>
</td></tr>
<tr>
<td style='text-align:center;'>
<table border=0 cellspacing=0 cellpadding=0>
<tr align=center>
    <td class=CC style="background-color:#990000" onClick=setColor("990000");></td>
    <td class=CC style="background-color:#CC0000" onClick=setColor("CC0000");></td>
    <td class=CC style="background-color:#FF0000" onClick=setColor("FF0000");></td>
    <td class=CC style="background-color:#990099" onClick=setColor("990099");></td>
    <td class=CC style="background-color:#CC00CC" onClick=setColor("CC00CC");></td>
    <td class=CC style="background-color:#FF00FF" onClick=setColor("FF00FF");></td>
    <td class=CC style="background-color:#000099" onClick=setColor("000099");></td>
    <td class=CC style="background-color:#0000CC" onClick=setColor("0000CC");></td>
    <td class=CC style="background-color:#0000FF" onClick=setColor("0000FF");></td>
    <td class=CC style="background-color:#009999" onClick=setColor("009999");></td>
    <td class=CC style="background-color:#00CCCC" onClick=setColor("00CCCC");></td>
    <td class=CC style="background-color:#00FFFF" onClick=setColor("00FFFF");></td>
</tr>
<tr align=center>
    <td class=CC style="background-color:#009900" onClick=setColor("009900");></td>
    <td class=CC style="background-color:#00CC00" onClick=setColor("00CC00");></td>
    <td class=CC style="background-color:#00FF00" onClick=setColor("00FF00");></td>
    <td class=CC style="background-color:#999900" onClick=setColor("999900");></td>
    <td class=CC style="background-color:#CCCC00" onClick=setColor("CCCC00");></td>
    <td class=CC style="background-color:#FFFF00" onClick=setColor("FFFF00");></td>
    <td class=CC style="background-color:#000000" onClick=setColor("000000");></td>
    <td class=CC style="background-color:#333333" onClick=setColor("333333");></td>
    <td class=CC style="background-color:#666666" onClick=setColor("666666");></td>
    <td class=CC style="background-color:#999999" onClick=setColor("999999");></td>
    <td class=CC style="background-color:#CCCCCC" onClick=setColor("CCCCCC");></td>
    <td class=CC style="background-color:#FFFFFF" onClick=setColor("FFFFFF");></td>
</tr>
</table>
</td></tr>
</table>
<div id=SaveFormData class=SaveForm>
<table width=100% cellpadding=5 cellspacing=0>
<tr><td colspan=2 align=center class=HeadingCell>Save Image Detail</td></tr>
<tr><td class=DataLabel>Date</td>
    <td><input type="text" name="corsp002" size="12" value="%STANDARD.01.015"
          maxlength="11" onBlur="checkDate(this,'Date')" class="PastDate">
       <img notab src="../images/DateLookup.gif" class="Icon"
        alt="Calendar" date="AddForm.corsp002"></td></tr>
<tr><td class=DataLabel>Time</td>
    <td><input type="text" name="corsp004" size="08" value="%STANDARD.01.016"
         onBlur="checkTime(this,'Time')">
       <img notab src="../images/DateTimeStamp.gif" class="Icon"
        alt="Current" date="AddForm.corsp002" time="AddForm.corsp004">
       <img notab src="../images/TimeLookup.gif" class="Icon"
        alt="Select Time" time="AddForm.corsp004"></td></tr>
<tr><td class=DataLabel >Document Type</td>
    <td><select name=corsp003 class=Mandatory>
        <option></option>
        %CLIWEB08.01.107.2
        </select></td></tr>
<tr valign=top><td class=DataLabel>Comment</td>
    <td><input type=text name=corsp007 size=45 maxlength=40><br>
        <input type=text name=corsp008 size=45 maxlength=40></td></tr>
<tr><td>&nbsp;</td><tr>
<tr valign=top><td colspan=2 align=center>
    <input class=button type=button onclick="SavePicture();" value=Ok>
    <input class=button type=button onclick="HideForm();" value=Cancel></td></tr>
</table>
</div>
</form>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%CLIWEB08.01.003">
<input type=hidden name=admissno value="%CLIWEB08.01.081">
</form>
</div>
<img id="pictureBase" src="">

<script type=text/javascript>
function StartVideo() {
// Grab elements, create settings, etc.
  var canvas = document.getElementById("pictureThis");         
  canvas.style.display="none";
  var video = document.getElementById("video");
  video.style.display="";
  videoObj = { "video": true },
  errBack = function(error) {
    console.log("Video capture error: ", error.code); 
  };
  // Put video listeners into place
  if(navigator.getUserMedia) { // Standard
    navigator.getUserMedia(videoObj, function(stream) {
      video.src = stream;
      video.play();
    }, errBack);
  } else {
     if(navigator.webkitGetUserMedia) { // WebKit-prefixed
       navigator.webkitGetUserMedia(videoObj, function(stream){
         video.src = window.webkitURL.createObjectURL(stream);
         video.play();
       }, errBack);
     }
  }
}
function SnapImage() {
  var video = document.getElementById("video");
  var canvas = document.getElementById("pictureThis");         
  context = canvas.getContext("2d");
  context.drawImage(video, 0, 0, 640, 480);
  video.style.display="none";
  canvas.style.display="";
}
</script>` 
</html>
