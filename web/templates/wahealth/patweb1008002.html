<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function DefCons() {
if(trim(document.AddForm.d_ptvitype.value)!="1") {
 if(AddForm.pmbrq004.value.substr(5,1)!="D" &&
    !isWhitespace(AddForm.pmbrq004.value)) {
    AddForm.pmbrq005.value=trim(AddForm.defconcd.value);
    AddForm.n_pmbrq005.value=trim(AddForm.defconnm.value);
 } else {   
    //AddForm.pmbrq005.value="";
    //AddForm.n_pmbrq005.value="";
  }
 }
}
function valDoctorUnit() {
  ValidateHCP(18,14,AddForm.pmbrq005,AddForm.n_pmbrq005);
  selectOptions4("45",AddForm.pmbrq005,AddForm.dummy,AddForm.pmbrq004);
  if(document.AddForm.pmbrq004.length=="2"){
    AddForm.pmbrq004.selectedIndex=1
  }
  valDoctorUnitTeam();
}
function valDoctorUnitTeam() {
  selectOptions4("46",AddForm.pmbrq005,AddForm.pmbrq004,AddForm.pmbrq018);
  if(document.AddForm.pmbrq018.length=="2"){
    AddForm.pmbrq018.selectedIndex=1
  }
}

function AddReq() {
 if(trim(document.AddForm.d_ptvitype.value)=="1") {
   document.AddForm.pmbrq014.value=document.AddForm.userhosp.value; 
 } else {
   document.AddForm.pmbrq014.value=document.AddForm.d_pmbrq014.value;
 }
 SubmitForm();
}

function IcdDiagnosisSearch() {
  if(trim(AddForm.d_ptvitype.value)=="1") {
    EmrDiagnosisSearch2(AddForm.pmbrq008,AddForm.n_pmbrq008,AddForm.dummy);
  }
  else {
    Icd10DisSearchFrame(AddForm.pmbrq008,AddForm.n_pmbrq008);
  }
}
function EmrDiagnosisSearch2(ReturnCode,ReturnName,ReturnDesc) {
  DFrameStart();
  linkURL="emrweb05.pbl?reportno=7&template=7";
  window.ReturnCode=ReturnCode;
  window.ReturnName=ReturnName;
  document.getElementById('PopUpFrame').src=linkURL;
  SearchFrameShow();
}
function ValidateIcdDiagnosisCode () {
  if(trim(AddForm.d_ptvitype.value)=="1") {
    validateCode3(18,AddForm.pmbrq008,AddForm.n_pmbrq008);
  }
  else {
    validateCode(6,AddForm.pmbrq008,AddForm.n_pmbrq008);
  }
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DefCons();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
<script type="text/javascript">document.write('Ward/Bed Request');</script>
</span>
<form name=AddForm method=post action=patweb10.pbl style="margin:0">
<input type=hidden name=reportno value="8">
<input type=hidden name=template value="002">
<input type=hidden name=updttype value="A">
<input type=hidden name=urnumber value="%PATWEB10.08.003">
<input type=hidden name=admissno value="%PATWEB10.08.081">
<input type=hidden name=pmbrq001 value="%PATWEB10.08.081">
<input type=hidden name=pmbrq007 value="1">
<input type=hidden name=defconcd value="%PATWEB10.08.126.1">
<input type=hidden name=defconnm value="%PATWEB10.08.126.0">
<input type=hidden name=ibcnmhos value="%STANDARD.01.025.000.043.1.1">
<input type=hidden name=pmbrq014 value="">
<input type=hidden name=userhosp value="%STANDARD.01.032">
<input type=hidden name=d_ptvitype value="%PATWEB10.08.315">
<input type=hidden name=dummy>

<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Request Date</td>
    <td><input type=text size=12 name=pmbrq002 class="Mandatory Date" 
         title="Admission Date" value="%STANDARD.01.015">
        <img notab src=../images/DateLookup.gif class="Icon"
         onclick="DateLookupFrame(AddForm.pmbrq002);">
         Time
        <input class=Mandatory type=text name=pmbrq003 size=8
         value="%STANDARD.01.016" title="Request Time">
        <img notab src=../images/DateTimeStamp.gif class="Icon"
         onclick="SetCurrentDateTime(AddForm.pmbrq002,AddForm.pmbrq003);">
        <img notab src=../images/TimeLookup.gif class="Icon"
         onclick="TimeLookupFrame(AddForm.pmbrq003);">
    </td></tr>
</table>

<div id="AdmitDetail"></div>

<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Type of Bed Required</td>
    <td><select name=pmbrq006 class=Mandatory title="Type of Bed Required">
        <option></option>
        %PATWEB10.08.106.2
        </select>
    </td></tr>
</table>

<div id="SpecialDetail"></div>

<div id="Hospital"></div>

<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Diagnosis</td>
    <td><input type=text size=12 maxlength=10 name=pmbrq008
         value="%PATWEB10.08.131.1"
     onchange="ValidateIcdDiagnosisCode();">
    <input type=text name=n_pmbrq008 readonly class=Readonly size=50
     tabindex=-1 value="%PATWEB10.08.131.0">
    <img src=../images/SearchIcon.gif class=Icon
     onclick="IcdDiagnosisSearch();">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(AddForm.pmbrq008,AddForm.n_pmbrq008);">
    </td></tr>

<tr><td class=DataLabel valign=top>Notes</td>
    <td>
    <textarea name=bedrqcom wrap=hard rows=5 cols=70></textarea>
    </td></tr>

</table>

<table align=center width=100% border=0>
<tr><td align=center><br>
   <input type=button value="Add" class="button" 
    id="pat10sub" onclick="tempDisable(this);AddReq();">
   <input type=button value=Close class="button" 
    onclick="DFrameCloseRefresh();">
</td></tr>
</table>
</form>

<span id="ShowHospital" style="display: none">
<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Preferred Hospital</td>
    <td><select name=d_pmbrq014 class=Mandatory title="Preferred Hospital">
        <option></option>
        %PATWEB10.08.129.1
        </select>
    </td></tr>
</table>
</span> 

<span id="ShowReq" style="display: none">
<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Requesting Department</td>
    <td><select name=pmbrq004 class=Mandatory title="Requesting Department"
         onchange="DefCons();">
        <option></option>
        %PATWEB10.08.104.9.1.02.2.R
        </select>
    </td></tr>

<tr><td class=DataLabel>Requesting Ward</td>
    <td><select name=pmbrq012 title="Requesting Ward">
        <option></option>
        %PATWEB10.08.127
        </select>
    </td></tr>
<tr><td class=DataLabel>Admitting Dr/Unit</td>
   <td><input type=text name=pmbrq005 size=10 maxlength=8
        title="Admitting Dr/Unit" value="%PATWEB10.08.325.0" class=Mandatory  
        onchange="UpCase(this); ValidateHCP(18,14,AddForm.pmbrq005,
                  AddForm.n_pmbrq005);">
       <input type=text name=n_pmbrq005 size=35 readonly title="HCP Name"
        class=Readonly tabindex=-1 value="%PATWEB10.08.325.1">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(AddForm.pmbrq005,AddForm.n_pmbrq005,1);">
        <img src="../images/ClearIcon.gif" class=Icon
        onclick="clrFields(AddForm.pmbrq005,AddForm.n_pmbrq005);">
       </td></tr>
</table>
</span> 


<span id="ShowAdm" style="display: none">
<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Admitting Dr</td>
   <td><input type=text name=pmbrq005 size=10 maxlength=8
        title="Admitting Dr" class=Mandatory  
        onchange="UpCase(this); valDoctorUnit();">
       <input type=text name=n_pmbrq005 size=35 readonly title="HCP Name"
        class=Readonly tabindex=-1>
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(AddForm.pmbrq005,AddForm.n_pmbrq005,1,valDoctorUnit);">
        <img src="../images/ClearIcon.gif" class=Icon
        onclick="clrFields(AddForm.pmbrq005,AddForm.n_pmbrq005,
                 AddForm.pmbrq004,AddForm.pmbrq018);">
       </td></tr>

<tr><td class=DataLabel>Admitting Unit</td>
    <td><select name=pmbrq004 class=Mandatory title="Admitting Unit"
         onchange="valDoctorUnitTeam();">
        <option></option>
        </select>
    </td></tr>

<tr><td class=DataLabel>Admitting Team</td>
    <td><select name=pmbrq018 title="Admitting Team">
        <option> </option>
        </select>
    </td></tr>

</table>
</span> 

<span id="ShowSpeciality" style="display: none">
<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Speciality Bed Required</td>
    <td><select name=pmbrq013 title="Speciality Bed Required">
        <option></option>
        %PATWEB10.08.128.2
        </select>
    </td></tr>
</table>
</span> 


<script type="text/javascript">
if(trim(document.AddForm.d_ptvitype.value)=="1") {
  document.getElementById('AdmitDetail').innerHTML=ShowAdm.innerHTML
  document.getElementById('AdmitDetail').style.display="";
  document.getElementById('SpecialDetail').innerHTML="";
  document.getElementById('SpecialDetail').style.display="none";
  document.AddForm.pmbrq006.className="";
} else {
  if(document.AddForm.ibcnmhos.value=="1") {
   document.getElementById('Hospital').innerHTML=ShowHospital.innerHTML
   document.getElementById('Hospital').style.display="";

   for(var i =0 ; i < document.AddForm.d_pmbrq014.length; i++) {
   if (document.AddForm.d_pmbrq014.options[i].value=="%STANDARD.01.032") {
       document.AddForm.d_pmbrq014.selectedIndex=i } };
  }
  document.getElementById('AdmitDetail').innerHTML=ShowReq.innerHTML
  document.getElementById('AdmitDetail').style.display="";
  document.getElementById('SpecialDetail').innerHTML=ShowSpeciality.innerHTML
  document.getElementById('SpecialDetail').style.display="";
}

ValidateIcdDiagnosisCode();
</script>
