<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/IBA_Category_C_.js"></script>
<script type="text/javascript" src="../js/IBA_Category_LA.js"></script>
<script type="text/javascript" src="../js/patweb89.js"></script>
<script type="text/javascript" src="../js/CustomMyhrConsent.js"></script>
%START.OF.PAGE
<script type="text/javascript">
//-----------------------------------------------------------------------
// check iba parameter to turn on second name textfield
//-----------------------------------------------------------------------
function turnOnSecondGivenName(isSecondNameParamON,gName,fName,secName)
{
  var str = gName.value

  // trim all start and trailing spaces
  if(str!="")
    gName.value = str.replace(/^\s+|\s+$/g,'');
  str = fName.value;
  if(str !="")
    fName.value = str.replace(/^\s+|\s+$/g,'');

  var item = document.getElementById("givenNameLabel");

  //on - allow first and second name fields
  if(isSecondNameParamON==1)
  {
    item.innerHTML = "First Given Name";
    var secondGivenNameLabel = document.getElementById("secondGivenNameLabel");
    secondGivenNameLabel.style.visibility = "visible";
    secName.style.visibility = "visible";
    fName.maxLength = "30";
    secName.maxLength = "30";
    gName.value = fName.value+" "+secName.value;
  }
  //off - allow only given name fields only
  else if(isSecondNameParamON==0)
  {
    item.innerHTML = "Given Name";
    var secondGivenNameLabel = document.getElementById("secondGivenNameLabel");
    secondGivenNameLabel.style.visibility = "hidden";
    secName.style.visibility = "hidden";
    fName.maxLength = "25";
    fName.value = gName.value;
  }
}

function checkOverseas() {
  if (trim(document.UpdateForm.ptmas012.value)=="8888") {
    document.UpdateForm.oseasflg.checked=true;       
  } else {
    document.UpdateForm.oseasflg.checked=false;
  } 
  setAddrLine4(UpdateForm);
}


function clickUpdateButton() {
  p = document.UpdateForm;

  if(!CheckValidGPAndPractice()) {
     return;
  }
 
  if(!CheckValPostCode()) {
     return;
  }
  if(!checkDateSV(document.UpdateForm.pmpmi016,'Valid to')){
     return false;
  }

  if(checkMedicare(document.UpdateForm.ptmas023)) {
   checkSecondName(document.UpdateForm.ptcnusgn,document.UpdateForm.ptmas006,
                  document.UpdateForm.pmpmi084,document.UpdateForm.pmpmi085);
   ind=document.UpdateForm.ptmas021.value.substr(5,1)
   if (ind=="S") {
     if (isWhitespace(document.UpdateForm.admissno.value)) {
    document.UpdateForm.redirect.value="patweb89.pbl?reportno=12&template=002" +
       "&urnumber=" + document.UpdateForm.urnumber.value
     } else {
    document.UpdateForm.redirect.value="patweb89.pbl?reportno=12&template=002" +
       "&urnumber=" + document.UpdateForm.urnumber.value +
       "&admissno=" + document.UpdateForm.admissno.value 
     }
   } else {
    if (ind=="O") {
      if (isWhitespace(document.UpdateForm.admissno.value)) {
    document.UpdateForm.redirect.value="patweb89.pbl?reportno=12&template=006" +
           "&urnumber=" + document.UpdateForm.urnumber.value
      } else {
    document.UpdateForm.redirect.value="patweb89.pbl?reportno=12&template=006" +
           "&urnumber=" + document.UpdateForm.urnumber.value  +
           "&admissno=" + document.UpdateForm.admissno.value 
      }
    }
   }

   validateDemographicsConfirmedDate();

   enableMedicare();
   if(checkLastUpdate(p.urnumber,p.opendate,p.opentime)){
      checkAge(p.ptmas017.value,p.maxage.value);
      UpdHealthFund();

     if (PatientMyhrConsentCode != UpdateForm.ptmas039.value.substring(0,3)) {
       clearMyHRfuture(document.UpdateForm.urnumber.value)
     }
      
   // document.UpdateForm.ptmas069.focus();
   // document.UpdateForm.ptmas069.blur();
     submitForm01();
   }
  }
}

function validateDemographicsConfirmedDate() {
  f = document.UpdateForm;
  if (f.ptcnavcd.value == "1") {
    if (hasFormChanged()) {
      f.ptmas069.value = f.currdate.value;
    }
    return;
  }
  else {
    if (f.ptcnavcd.value == "2") {
      if (!isWhitespace(f.ptmas069.value)) {
        if (f.ptmas069.value != f.currdate.value ) {
          alert("Warning: Confirm Demographics date has not been updated");
          f.ptmas069.value = f.ptmas069.defaultValue;
        }
      }
    } 
    return;
  }
}

function hasFormChanged() {
  var has_changed = false;
  var elements = getAllFormElements();

  for (var i = 0; i < elements.length; i++) {
    if (elements[i].type != 'hidden' &&
        elements[i].name != 'ptmas069' &&
//      elements[i].name != 'ptmas029' &&
      trim(elements[i].value) != trim(initial_values[i])) {
      has_changed = true;
      break;
    }
  }

  return has_changed;
}

var initial_values = new Array();

// Gets all form elements from the entire document.
function getAllFormElements() {
    // Return variable.
    var all_form_elements = Array();

    // The form.
    //var form_activity_report = document.getElementById('UpdateForm');
    var form_activity_report = document.forms["UpdateForm"];

    // Different types of form elements.
    var inputs = form_activity_report.getElementsByTagName('input');
    var textareas = form_activity_report.getElementsByTagName('textarea');
    var selects = form_activity_report.getElementsByTagName('select');

    // We do it this way because we want to return an Array, not a NodeList.
    var i;
    for (i = 0; i < inputs.length; i++) {
        all_form_elements.push(inputs[i]);
    }
    for (i = 0; i < textareas.length; i++) {
        all_form_elements.push(textareas[i]);
    }
    for (i = 0; i < selects.length; i++) {
        all_form_elements.push(selects[i]);
    }

    return all_form_elements;
}

// Sets the initial values of every form element.
function setInitialFormValues() {
    var inputs = getAllFormElements();
    for (var i = 0; i < inputs.length; i++) {
        initial_values.push(inputs[i].value);
    }
}

var validMedicareNo = false;
var promptedWarning = false;

function resetPromptedFlg() {
  window.setTimeout(function () { promptedWarning = false; }, 100);
}

function checkMedRef(ev) {
  if (!validMedicareNo || promptedWarning) {
    CancelEvent(ev);
    return false;
  }

  if ((!isWhitespace(UpdateForm.ptmas023.value)) &&
      (isWhitespace(UpdateForm.ptmsx045.value))) {
    if (!confirm("WARNING: Medicare reference Number is required field. \n" +
                 "Click OK to enter it now, or CANCEL to return to the " +
                 "medicare number field")) {
      FocusDelay(UpdateForm.ptmas023);
    } else {
      FocusDelay(UpdateForm.ptmsx045);
    }
    promptedWarning = true;
    return;
  }

  checkRefNumber(UpdateForm.ptmsx045);
}

function checkRefNumber(ref) {
  if (isWhitespace(ref.value)) { return true; }

  chknum=ref.value - 0; // Convert to Numeric
  if (chknum > 0 && chknum <= 9) {
     return;
  }

  if (chknum == 0 ) {
    alert(ref.title + " must be greater than 0 and less than 9");
    FocusDelay(ref);
  } else {
    alert(ref.title + " must be numeric");
    FocusDelay(ref);
  }
}

function checkMedicareWa(ev) {
  if (isWhitespace(UpdateForm.ptmas023.value)) {
    UpdateForm.ptmsx045.value="";
    UpdateForm.ptmsx045.disabled=true;
    UpdateForm.ptmsx045.className="ReadOnly";
    return;
  }

  if (checkMedicare(UpdateForm.ptmas023,UpdateForm.pmpmi016)) {
    validMedicareNo = true;
    UpdateForm.ptmsx045.disabled=false;
    UpdateForm.ptmsx045.className="Mandatory";
    FocusDelay(UpdateForm.ptmsx045);
  }
  else {
    validMedicareNo = false;
    CancelEvent(ev);
    return false;
  }
}

function enableMedicare() {
  if(isWhitespace(UpdateForm.ptmas023.value)) {
    UpdateForm.ptmsx045.disabled=false;
    UpdateForm.ptmsx045.value="";
  }
}

function SetFocus() {
  document.UpdateForm.ptmas001.focus();
}

function valAgeMaritalStatus() {
  p=document.UpdateForm
  var serverURL = "../cgi-bin/comweb80.pbl?reportno=77" +
                  "&valddobe="+p.ptmas017.value.replace(/ /g,"+") +
                  "&valdcod2="+p.ptmas016.value.replace(/ /g,"+") +
                  "&valddate="+p.currdate.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0){
    ReturnValue=returnValue.return_value.split("|");
    if((parseInt(ReturnValue[0])<=parseInt(ReturnValue[1]))&&
       (parseInt(ReturnValue[2])!="1")){
      alert("Please check marital status for age of this patient. ");
    }
    return true;
  } else {
    return false;
  }
}


function CheckValidGPAndPractice(){
 
  p=document.UpdateForm;
  var check=false;

  if(isWhitespace(trim(document.UpdateForm.pmpmi059.value)) && 
        isWhitespace(trim(document.UpdateForm.pmpmi060.value))){
    return true;
  }

  var serverURL = "../cgi-bin/comweb81.pbl?reportno=38" +
                  "&valddctr="+p.pmpmi059.value.replace(/ /g,"+") +
                  "&valdcode="+p.pmpmi060.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0){
    ReturnValue=returnValue.return_value;
    switch(ReturnValue){
      case "0":
        check=true;
        break;
      case "1":
        alert("The Local GP is inactive. " +
              "Please ensure a valid GP is recorded.");  
        break;
      case "2":
        alert("The Local GP has an End Date prior to today. " +
              "Please ensure a valid GP is recorded.");
        break;
      case "3":
        alert("The GP Practice is inactive. Please ensure a valid GP Practice "
          + "is recorded.");
        break;
      case "4":
        alert("The GP Practice has a Dissolved Date prior to today. " +
            "Please ensure a valid GP Practice is recorded.");
        break;
      case "5":
        alert("The GP is no longer at this Practice. " +
          "Please ensure a valid GP and Practice are recorded.");
        break;
      case "6":
        alert("The GP is no longer at this Practice. "+
            "Please ensure a valid GP and Practice are recorded."); 
        break;   
    }
  } 
  return check;
}


function checkContactCorrespondence() {
  if (document.UpdateForm.pmpmi095.value.substring(3,4)=='E') {
     document.UpdateForm.pmpmi005.className="Mandatory";
  } else {
    if (document.UpdateForm.pmpmi096.value.substring(3,4)=='E') {
       document.UpdateForm.pmpmi005.className="Mandatory";
    } else {
       document.UpdateForm.pmpmi005.className="";
    }
  }

  if (document.UpdateForm.pmpmi095.value.substring(3,4)=='H') {
     document.UpdateForm.ptmas013.className="Mandatory";
  } else {
     document.UpdateForm.ptmas013.className="";
  }

  if (document.UpdateForm.pmpmi095.value.substring(3,4)=='M') {
     document.UpdateForm.ptmsx039.className="Mandatory";
  } else {
    if (document.UpdateForm.pmpmi095.value.substring(3,4)=='S') {
       document.UpdateForm.ptmsx039.className="Mandatory";
    } else {
       document.UpdateForm.ptmsx039.className="MobilePhone";
    }
  }

  if (document.UpdateForm.pmpmi095.value.substring(3,4)=='W') {
     document.UpdateForm.ptmas014.className="Mandatory";
  } else {
     document.UpdateForm.ptmas014.className="";
  }

}
function EthnicityLanguageSpokenAtHome() {
  f = document.UpdateForm;
  if (VariableNameExists('Ethnicity1Mandatory')) {
    if (Ethnicity1Mandatory == true) {
      AddClassName(f.pmpmi139,"Mandatory");
    }
  }
  if (VariableNameExists('HomeLanguage1Mandatory')) {
    if (HomeLanguage1Mandatory == true) {
      AddClassName(f.pmpmi141,"Mandatory");
    }
  }
}
</script>
</head>
<body onload="PageLoad(event);setInitialFormValues();
              SetPostCode01();InitPostCodes();
              ChkIdentifyGenderPronounTitle1(document.UpdateForm);
              turnOnSecondGivenName(document.UpdateForm.ptcnusgn.value,
                                    document.UpdateForm.ptmas006,
                                    document.UpdateForm.pmpmi084,
                                    document.UpdateForm.pmpmi085);
              valAgeMaritalStatus();SetFocus();
              checkContactCorrespondence();
              EthnicityLanguageSpokenAtHome();
              displayPrefNames(document.UpdateForm.ptcnnmpr.value);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
PatientMyhrConsentCode="%PATWEB89.01.043.1";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<script>
function valPostCode(){
  var suburb=trim("%PATWEB89.01.014");
  if(document.UpdateForm.ptmas010.value==suburb){
    return;
    }
    UpCase(UpdateForm.ptmas010);
    if(trim(UpdateForm.ptmas012.value)!="8888"){
      LookupPostCode(UpdateForm.ptmas010.value);
      checkAdd01();
      }
}
</script>

<div id=PatientMenu></div>

<div id=PageBodySection>

<form name=UpdateForm action=patweb89.pbl method=post
 onsubmit="return validateDeath01(this)">
<input type=hidden name=opendate value="%STANDARD.01.015">
<input type=hidden name=opentime value="%STANDARD.01.016">
<input type=hidden name=reportno value="2">
<input type=hidden name=template value="002">
<input type=hidden name=updatety value="4">
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=praflag value="0">
<input type=hidden name=redirect value="%PATWEB89.01.001.patweb98.01.001">
<input type=hidden name="savealia" value="0">
<input type=hidden name="aliasset" value="0">
<input type=hidden name="prevaddr" value="0">
<input type=hidden name="preaddset" value="0">
<input type=hidden name="oldaddre" value="%PATWEB89.01.014">
<input type=hidden name="dummy" value="">
<input type=hidden name="ptcnhdps" id="ptcnhdps" value="%PATWEB89.01.929">
<input type=hidden name="ptcnusgn"  value="%STANDARD.01.025.114.219.0.1">
<input type=hidden name="ptcnnewc"  value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=pmpmi017 value="%PATWEB89.01.817.1">
<input type=hidden name=ptmas067 value="%PATWEB89.01.079.0">
<input type=hidden name=ptmas029>
<input type=hidden name=oldpcode value="%PATWEB89.01.016">
<input type=hidden name=confdemo value="0">
<input type=hidden name=cpmiskey value="%PATWEB89.01.999.001">
<input type=hidden name=currdate value="%STANDARD.01.015">
<input type=hidden name=maxage value="%PATWEB89.01.092">
<input type=hidden name=updhfund value="">
<input type=hidden name=admhfund value="%PATWEB89.01.114.0">
<input type=hidden name=admhftab value="%PATWEB89.01.115.0">
<input type=hidden name=admnstat value="%PATWEB89.01.199.020">
<input type=hidden name=admninvc value="%PATWEB89.01.950">
<input type=hidden name=ptcnvshf id=ptcnvshf
 value="%STANDARD.01.025.124.158.0.1">
<input type=hidden name=multbrth value="%PATWEB89.01.999.109">
<input type=hidden name=ptcnavcd value="%STANDARD.01.025.125.183.0.1">
<input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">
<input type=hidden name=sjogaudt value="1">
<input type=hidden name=aliassts value="">

<table border=0 width=100% cellspacing=0 cellpadding=1>
  <tr><td colspan=6 class=HeadingCell align=center >
      Demographic Details </td></tr> 

  <tr>
    <td class=DataLabel>Title</td>
    <td><select title="Patient Title"
        name=ptmas001 tabindex=1 id=ptmas001>
        <option></option>
        %STANDARD.01.029
        </select>
    </td>
    <td class=DataLabel>Overseas Address</td>
    <td><input type=checkbox name=oseasflg tabindex=6
         onclick='setAddrLine4(UpdateForm);'>
    </td>
    <td class=DataLabel>Home Phone</td>
    <td><input type=text size=23 maxlength=20 
        name=ptmas013 title="Home Phone No" tabindex=11
        value="%PATWEB89.01.017" onchange="checkAdd01();"></td></tr>

<tr><td class=DataLabel> Surname</td>
    <td><input type=text size=40 name=ptmas005 
        title="Patient Surname" maxlength=40 class="Mandatory AlphanumSpec3"
        value="%PATWEB89.01.009" tabindex=2 onchange="UpCase(this);checkAlias01();"></td>

    <td class=DataLabel>Address</td>
    <td><input type=text size=35 maxlength=35  tabindex=7
        name="ptmas008" title="Address Line 1" class=Mandatory
        value="%PATWEB89.01.012" onchange="checkAdd01();UpCase(this);"></td>

    <td class=DataLabel>Work Phone</td>
    <td><input type=text size=23 maxlength=20 onchange="checkAdd01();"
        name=ptmas014 title="Work Phone No" tabindex=12
        value="%PATWEB89.01.018" ></td></tr>

<tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpmi082
       title="Preferred Surname" value="%PATWEB89.01.897"
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel id="givenNameLabel">Given Names</td>
    <td><input type=hidden name=ptmas006 title="Given Name"
         value="%PATWEB89.01.010">
        <input type=text size=42 maxlength=30
        title="First Given Name" class="Mandatory AlphanumSpec3" tabindex=3
        name=pmpmi084 value="%PATWEB89.01.899.001"
        onchange="checkAlias01();UpCase(this);">
    </td>

    <td class=DataLabel></td>
    <td><input type=text size=35 maxlength=35 
        name=ptmas009 title="Address Line 2" tabindex=8
        value="%PATWEB89.01.013" onchange="checkAdd01();UpCase(this);"></td>

    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text size=23 maxlength=20 name=ptmsx039 
         onchange="checkAdd01();" title="Mobile Phone No" tabindex=13 
         class=MobilePhone value="%PATWEB89.01.643" ></td></tr>

<tr><td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=42 maxlength=30 id="secondGivenName"
        title="Second Given Name" tabindex=4 class="AlphanumSpec3"
        name=pmpmi085 value="%PATWEB89.01.899.002"
        onchange="checkAlias01();UpCase(this);">
    </td>

    <td class=DataLabel>Suburb</td>
    <td><input type=text size=35 maxlength=35 title="Suburb"
       name=ptmas010 class=Mandatory tabindex=9
        value="%PATWEB89.01.014" onchange="valPostCode();">
    </td>
    <td class=DataLabel>Email</td>
    <td><input type=text size=23 maxlength=80 onchange="checkAdd01();"
        name=pmpmi005 title="E-Mail" tabindex=13
        value="%PATWEB89.01.805" ></td>
</tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpmi083
       title="Preferred Given Name" value="%PATWEB89.01.898"
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
     <td><select name="ptmas015" tabindex=4
          title="%STANDARD.01.017.G " class=Mandatory 
          onchange="ChkIdentifyGenderPronounTitle(document.UpdateForm);
                    checkAlias01();">
         <option></option>
          %PATWEB89.01.086.099.061.9.1.19.3.H 
         </select></td>

    <td><div id=AddressLine4H></div></td>
    <td><div id=AddressLine4></div></td>

    <td class=DataLabel>%STANDARD.01.035.Pn</td>
    <td><select name=pmpmi095 tabindex=13 title="%STANDARD.01.035.Pn"
         class="SelectBig" onchange="checkContactCorrespondence();">
         <option></option>
          %PATWEB89.01.899. 12.2
         </select></td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type=text size=16 name=ptmas017 title="Date of Birth"
         value="%PATWEB89.01.020" tabindex=5 class="Mandatory PastDate"
         onblur="if (checkDate(this,this.title)) { checkAlias01();
         checkAge(this.value,'%PATWEB89.01.092');valAgeMaritalStatus(); }"></td>  
 <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4
        name=ptmas012 title="Post Code" class=Mandatory tabindex=10
        value="%PATWEB89.01.016" 
        onchange="checkOverseas();LookupSuburb(ptmas012.value);"></td>

    <td class=DataLabel>%STANDARD.01.035.Pr</td>
    <td><select name=pmpmi096 tabindex=13 title="%STANDARD.01.035.Pr"
         class="SelectBig" onchange="checkContactCorrespondence();">
         <option></option>
          %PATWEB89.01.899. 13.2
         </select></td></tr>

<tr><td><div id=MultBirthLblSpan></div></td>
    <td><div id=MultBirthTxtSpan></div></td>
    <td></td>
    <td></td>
    <td class=DataLabel><font color=red>Demographics Confirmed Date</font></td>
    <td><input type="text" class="PastDate" name="ptmas069" id=ptmas069
       title="Demographics Confirmed Date" 
       onblur="checkDate(this,this.title);document.UpdateForm.confdemo.value=1"
       tabindex=14 value="%PATWEB89.01.085.059">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(ptmas069,null);
                  CheckValidGPAndPractice();" />
    </td>
    <td>&nbsp;</td> 
    <td>&nbsp;</td> 
</tr>

<tr id=GenderExtra>
  <td><div id=IdenGenLbl></div></td>
  <td><div id=IdenGenDetail></div></td>
  <td><div id=IdenProLbl></div></td>
  <td><div id=IdenProDetail></div></td>
</tr>

<tr><td colspan=6 class=HeadingCell align=center >
      PMI Details </td></tr> 

<tr><td class=DataLabel>Marital Status</td>
    <td><select  name=ptmas016 tabindex=14 class="select120 Mandatory"
                 title="Marital Status" onblur="valAgeMaritalStatus();">
        <option></option>
         %PATWEB89.01.069.2
        </select></td>
    <td class=DataLabel>Medicare Number</td>
    <td><input type=text size=10 maxlength=50 name=ptmas023 id=ptmas023
         tabindex=20 value="%PATWEB89.01.027" title="Medicare Number"
         onblur="checkMedicareWa(event);">
       <input type=text size=1 maxlength=1 name=ptmsx045 id=ptmsx045 tabindex=21
         onblur="checkMedRef(event);" onfocus="resetPromptedFlg();"
         value="%PATWEB89.01.649" title="Medicare Reference Number"></td>
<td><input type=hidden name=pmpmi067 value="%PATWEB89.01.867.0">
</tr>
 
<tr><td class=DataLabel>Religion</td>
    <td><select name=ptmas020  class="select120" tabindex=15 
        title="Religion">
        <option></option>
        %PATWEB89.01.023.2
        </select></td>
    <td class=DataLabel>Valid to</td>
    <td><input type=text size=12 name=pmpmi016 id=pmpmi016 title="Valid to"
         value="%PATWEB89.01.816" tabindex=22 
        onblur="checkDateSV(this,'Valid to');" >
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(pmpmi016);"></td>
    <td class=DataLabel>Privacy Indicator</td>
    <td><select name=pmpmi066 class=select120 tabindex=31>
        <option></option>
         %PATWEB89.01.866.2
        </select></td></tr>

<tr><td class=DataLabel>Country of Birth</td>
    <td><select name="ptmas019" tabindex=16 class="select120 Mandatory"
         title="Country of Birth">
        <option></option>
        </select>
        <script type="text/javascript"> {
         SetCategoryC_(document.UpdateForm.ptmas019,"%PATWEB89.01.022.1") }
        </script></td>
    <td class=DataLabel>Health Fund </td>
    <td><input type=hidden name=ptmas036 id=ptmas036 value="%PATWEB89.01.040.0">
        <input type=text size=25 name="funddesc" id=funddesc maxlength="30" 
         readonly tabindex=23 value="%PATWEB89.01.040.1"></td>
    <td class=DataLabel>Local GP </td>
    <td width=20%>
        <input type=hidden name=pmpmi059 id=pmpmi059
         value="%PATWEB89.01.884.001">
        <input type=text readonly name=genpname id=genpname
         value="%PATWEB89.01.884.081" tabindex=32>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCPSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,genpprac,pmpmi061,3)">
       <img src="../images/erase.gif" class=Icon
         onclick="clrFields(pmpmi059,genpname);"></td></tr>

<tr><td class=DataLabel>Indigenous Status</td>
    <td><select name=pmpmi065 class="select120 Mandatory" tabindex=17
         title="Aboriginality">
        <option></option>
         %PATWEB89.01.865.2
        </select></td>
    <td class=DataLabel>Health Fund Level</td>
    <td width=22%><input type=hidden name="ptmas037" id=ptmas037
        value="%PATWEB89.01.041.0">
        <input type="text" size=15 maxlength=22 name="tabldesc" id=tabldesc
         readonly value="%PATWEB89.01.041.1" tabindex=24>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HealthFundSearchFrameNoFocus(ptmas036,funddesc,
                                               ptmas037,tabldesc);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrDoc(ptmas036,funddesc);clrDoc(ptmas037,tabldesc);"></td>

    <td class=DataLabel>Practice</td>
    <td width=20%><input type=hidden name=pmpmi060 id=pmpmi060
        value="%PATWEB89.01.885.001">
        <input type=text readonly name=genpprac id=genpprac
         value="%PATWEB89.01.885.005" tabindex=33>
        <input type=hidden name=pmpmi061 id=pmpmi061
         value="%PATWEB89.01.861">
        <input type=hidden name=genpprov id=genpprov
         value="">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCGSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,genpprac,pmpmi061)">
        <img src="../images/erase.gif" class=Icon 
         onclick="clrFields(pmpmi060,genpprac,pmpmi061,genpprov);"></td>
</tr>

<tr><td class=DataLabel>Resident</td>
    <td><select name=ptmas021 tabindex=18 class=Mandatory title="Resident">
         <option></option>
         %PATWEB89.01.024.2
        </select></td>
    <td class=DataLabel> Member Number </td>
    <td><input type=text size=20 maxlength=19 name=ptmas038 tabindex=25
         value="%PATWEB89.01.042"></td>
    <td class=DataLabel>Folder Selection</td>
    <td><select name=pmpmi077 tabindex=34 title="Folder Selection">
         <option></option>
         %PATWEB89.01.879.2
         </select></td>
</tr>


<tr><td class=DataLabel>Interpreter Required</td>
    <td><select title="Interpreter Required" name=pmpmi001 class=Mandatory
         onchange="ShowSpan(this);" tabindex=19>
        <option value="">Not Stated</option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select>
        </td>

    <td class=DataLabel>Health Fund Contributor Name</td>
    <td><input type=text size=42 maxlength=40
        name=pmpmi093 title="Health Fund Contributor Name" tabindex=26
        value="%PATWEB89.01.899.010"></td>
    <td class=DataLabel>Consent upload to My Health Record?</td>
    <td><select name=ptmas039 tabindex=35 title="Consent MyHR Upload">
         <option></option>
         %PATWEB89.01.043.2
         </select>&nbsp;(<a href="javascript:patientMyhrConsentForm();">form</a>)
    </td>

</tr>

<tr><td><div id=divLangHed></div></td>
    <td><div id=divLangSel></div></td>
</tr>

<tr><td class=DataLabel>Ancestry/Ethnicity 1</td>
    <td><select name=pmpmi139 id=pmpmi139 tabindex=19
         title="Ancestry/Ethnicity 1">
         <option></option>
          %PATWEB89.01.899.082.9.5
        </select>
    </td>
    <td class=DataLabel>Main Language Spoken at Home 1</td>
    <td><select name=pmpmi141 id=pmpmi141 tabindex=26
         title="Main Language Spoken at Home 1">
         <option></option>
          %PATWEB89.01.899.084.9.5
        </select>
    </td>
    <td></td>
    <td></td>
</tr>
<tr><td class=DataLabel>Ancestry/Ethnicity 2</td>
    <td><select name=pmpmi140 id=pmpmi140 tabindex=19
         title="Ancestry/Ethnicity 2">
         <option></option>
          %PATWEB89.01.899.083.9.2
        </select>
    </td>
    <td class=DataLabel>Main Language Spoken at Home 2</td>
    <td><select name=pmpmi142 id=pmpmi142 tabindex=26
         title="Main Language Spoken at Home 2">
         <option></option>
          %PATWEB89.01.899.085.9.2
        </select>
    </td>
    <td></td>
    <td></td>
</tr>

<tr><td colspan=6 class=HeadingCell align=center >
   <script type="text/javascript">URDesc();</script> Comments </td></tr>
<tr><td valign=top>
     <input type=button value="Add Comments" class="button"
      name="AddComm" id="AddComm" tabindex=36
      onclick="tempDisable(this);AddURComment();"></td>
    <td colspan=4><textarea wrap=hard name=urcommna class=Readonly readonly
         rows=4 cols=70>%PATWEB89.01.068.005</textarea>
    </td>
</tr>

<tr><td>&nbsp;</td></tr>

<tr><td colspan=6 align=center>
    <input type=button value="Update" class="button" id="pat89sub"
     onclick="tempDisable(this);clickUpdateButton();" tabindex=37>
    <input type=button class="button" name="aliasbut" value="Alias" tabindex=38
     onclick='PatientLinkTo("patweb89.pbl",6,1,1,700,400);'>
    <input type=button class="button" name="alternatebut" 
     value="Alternate ID" tabindex=38
     onclick='PatientLinkTo("patweb07.pbl",1,1,1,550,300);'>
    <input type=button class="button" name="linksbut" value="Links" tabindex=39 
     onclick='PatientLinkTo("patweb96.pbl",2,1,1,780,600);'>
    <input type=button class="button" name="emergbut" value="All Contacts"
     tabindex=40 onclick="contacts()">
    <input type=button class="button" name="preadbut" value="Prev Address"
     tabindex=41 onclick='PatientLinkTo("patweb98.pbl",1,38,1,900,400);'>
    <input type=button class="Bigbutton" name="concebut" value="Concession Card"
     tabindex=42 onclick="concession();" style="width:110px">
    <input type=button class=Bigbutton name=multbbut value="Multiple Birth"
     tabindex=43 style="width:110px" onclick="MultiBirthFrame();">
    <input type=button class="button"  value="Cancel" tabindex=43
     onclick="CancelButtonRedirect();">
    </td></tr>
</table>
</form>

<div id=SelectHeading></div>
<div id=SelectLocation></div>
</div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
<input type=hidden name=cpmiskey value="%PATWEB89.01.999.001">
</form>

<span id=LanguageHed style="display:none">
Language
</span>

<span id=LanguageNoHead style="display:none">&nbsp;</span>

<span id=LanguageSel style="display:none">
  <select name=pmpmi002 id=pmpmi002 class="select120 Mandatory" 
   tabindex=19 title="Preferred Language">
    <option></option>
  </select>
</span>

<span id=LanguageNul style="display:none">
  <input type=hidden name=pmpmi002 id=pmpmi002 value="">
</span>

<script type="text/javascript">
 if (document.UpdateForm.urnumber.value.substring(0,1)=="T") {
  document.UpdateForm.ptmas021.className="";
  }
//
//
function init() {
 if ("%PATWEB89.01.033" == "Yes") {
  document.UpdateForm.ptmas029.value=1;
  alert("Warning: Patient is Deceased");
 }
 InterpReq="%PATWEB89.01.801.0";
 for (var i =0 ; i < document.UpdateForm.pmpmi001.length; i++) {
  if (document.UpdateForm.pmpmi001.options[i].value==InterpReq.substr(0,1)) {
       document.UpdateForm.pmpmi001.selectedIndex=i } };
 ShowSpan(document.UpdateForm.pmpmi001);
//
 if ("%PATWEB89.01.091" == "1") {
  alert("Warning: Invalid permissible age");
 }
//
//
 for (var i=0; i < document.UpdateForm.ptmas001.length; i++) {
  if (document.UpdateForm.ptmas001.options[i].value=="%PATWEB89.01.005.0"){
      document.UpdateForm.ptmas001.selectedIndex=i;
  }
 }
//
// PatientSex="%PATWEB89.01.086.082";
// for (var i =0 ; i < document.UpdateForm.ptmas015.length; i++) {
//  if (document.UpdateForm.ptmas015.options[i].value==PatientSex.substr(0,1)) {
//       document.UpdateForm.ptmas015.selectedIndex=i } };
//
 AltIDIndicator="%PATWEB89.01.086.083";
 if ( AltIDIndicator =="1" ) {
    document.UpdateForm.alternatebut.className="RedButton";
 }
//
 AliasIndicator="%PATWEB89.01.093";
 if ( AliasIndicator =="1" ) {
    document.UpdateForm.aliasbut.className="RedButton";
 }
//
 LinksIndicator="%PATWEB89.01.094";
 if ( LinksIndicator =="1" ) {
    document.UpdateForm.linksbut.className="RedButton";
 }
//
 PreAddIndicator="%PATWEB89.01.095";
 if ( PreAddIndicator =="1" ) {
    document.UpdateForm.preadbut.className="RedButton";
 }
//
 EmergeIndicator="%PATWEB89.01.096";
 if ( EmergeIndicator =="1" ) {
    document.UpdateForm.emergbut.className="RedButton";
 }
//
 if(!isWhitespace(document.PatientLinks.cpmiskey.value)) {
    document.UpdateForm.emergbut.disabled=true;
 }
//
 ConcessIndicator="%PATWEB89.01.999.016";
 if ( ConcessIndicator =="1" ) {
    document.UpdateForm.concebut.className="RedButton";
 }
//
 f = document.UpdateForm;
 if (f.multbrth.value=="1") {
   MultBirthLblSpan.innerHTML = lblMultBirth.innerHTML;
   MultBirthTxtSpan.innerHTML = txtMultBirth.innerHTML;
 }
 else {
   MultBirthLblSpan.innerHTML = "";
   MultBirthTxtSpan.innerHTML = "";
 }
 if (f.multbrth.value=="1" ) {
    document.UpdateForm.multbbut.className="RedButton";
 }

}
function contacts() {
 if(document.UpdateForm.ptcnnewc.value=='1'){
 location.href='patweb07.pbl?reportno=06&template=004&urnumber=%PATWEB89.01.003&admissno=%PATWEB89.01.081&othrcont=0'
 } else {
 location.href='patweb89.pbl?reportno=01&template=022&urnumber=%PATWEB89.01.003&admissno=%PATWEB89.01.081&othrcont=0'
 }
}
function ShowSpan(showoption) {
  if (showoption.value=="1") {
    divLangHed.innerHTML=LanguageHed.innerHTML;
    divLangSel.innerHTML=LanguageSel.innerHTML;
    document.UpdateForm.pmpmi002.options.length=1;
    SetCategoryLA(document.UpdateForm.pmpmi002,"%PATWEB89.01.802.1","");
  } else {
    divLangHed.innerHTML=LanguageNoHead.innerHTML;
    divLangSel.innerHTML=LanguageNul.innerHTML;
  }
}
function concession() {
  SetCookie("ConcessionCardCookie",'1');
  location.href='patweb07.pbl?reportno=04&template=004&urnumber=%PATWEB89.01.003&admissno=%PATWEB89.01.081' + 
    "&cpmiskey=" + PatientLinks.cpmiskey.value.replace(/ /g,"+");
}
function MultiBirthFrame() {
  linkurl = "../cgi-bin/patweb07.pbl?reportno=21&template=001" +
            "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+");
  Left=(document.body.clientWidth-900)/2;
  DFrameLink(linkurl,50,Left,900,500);
}

</script>

<span id=AustStateH style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=0 cellpadding=0>
    <td class=DataLabel>&nbsp;</td>
</table>
</span>
<span id=AustState style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=0 cellpadding=0>
    <td><input type=text size=35 maxlength=35
       name=ptmas011 id=ptmas011 title="Address Line 4" tabindex=10
       value="%PATWEB89.01.015"
       onchange="checkAdd01();UpCase(this);">
    </td>
</table>
</span>
<span id=OseasCountryH style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=0 cellpadding=0>
    <td class=DataLabel>Country</td>
</table>
</span>
<span id=OseasCountry style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=0 cellpadding=0>
    <td><select name="ptmas011" id=ptmas011 tabindex=10 
         class="select120 Mandatory" title="Country Address">
        <option></option>
        </select>
        <input type=hidden name="osc_name_js" id="osc_name_js" 
         value="%PATWEB89.01.015">
    </td>
</table>
</span>
<span id=lblMultBirth style="display:none">
<td class=DataLabel>%STANDARD.01.035.mX</td>
</span>
<span id=txtMultBirth style="display:none">
<td class=DataLabel>%PATWEB89.01.999.110</td>
</span>

<span id=idenGenLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gi</td>
</span>
<span id=idenGenDetailShow style="display:none">
  <td><select name=pmpmi125 id=pmpmi125 class=Mandatory tabindex=5
       title="%STANDARD.01.035.Gi"
       onchange="IdenGenderChange(document.UpdateForm);">
      <option></option>
       %PATWEB89.01.086.099.063.9.2
      </select><br>
      <span id=IdenGenFreeTxt></span>
  </td>
</span>
<span id=idenGenDetailBlank style="display:none">
  <td><input type=hidden name=pmpmi125 id=pmpmi125 value=""></td>
  <td><input type=hidden name=pmpmi126 id=pmpmi126 value=""></td>
</span>
<span id=idenGenFreeTxtShow style="display:none">
  <input type=text name=pmpmi126 id=pmpmi126 size=80 maxlength=80
   class=Mandatory tabindex=5
   title="Identifying Gender Free Text"
   value="%PATWEB89.01.086.099.065">
</span>
<span id=idenGenFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpmi126 id=pmpmi126 value=""></td>
</span>

<span id=idenProLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gp</td>
</span>
<span id=idenProDetailShow style="display:none">
  <td><select name=pmpmi127 id=pmpmi127 class=Mandatory tabindex=10
       title="%STANDARD.01.035.Gp"
       onchange="IdenPronounChange(document.UpdateForm);">
      <option></option>
       %PATWEB89.01.086.099.064.9.2
      </select><br>
      <span id=IdenProFreeTxt></span>
  </td>
</span>
<span id=idenProDetailBlank style="display:none">
  <td><input type=hidden name=pmpmi127 id=pmpmi127 value=""></td>
  <td><input type=hidden name=pmpmi128 id=pmpmi128 value=""></td>
</span>
<span id=idenProFreeTxtShow style="display:none">
  <input type=text name=pmpmi128 id=pmpmi128 size=80 maxlength=80
   class=Mandatory tabindex=10
   title="Identifying Pronoun Free Text"
   value="%PATWEB89.01.086.099.066">
</span>
<span id=idenProFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpmi128 id=pmpmi128 value=""></td>
</span>

