<meta name="TemplateVersion" content="V12.00.01">
<meta name="TemplateHome" content="wahealth">
<!-- $Id: patweb8903001.html 4223 2018-11-20 08:10:33Z  $ -->
<!-- $URL: http://lxfm700sub/svn/webpas/trunk/web/custom/patweb8903001.html $ -->
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/preadmission.js">   </script>
<script type="text/javascript" src="../js/admissionRequest.js"></script>
<script type="text/javascript" src="../js/CustomMyhrConsent.js"></script>

<script type="text/javascript">
function CheckBabyWeight() {
  if(daysold <= UpdateForm.ptcnbage.value) {
    BabyAge.style.display="";
    document.UpdateForm.ptmis051.className="Number";
    document.UpdateForm.ptmis051.min="1";
    document.UpdateForm.agebmand.value=1;
  }
}
function SubmitAdm() {
    p=document.UpdateForm
    MandatoryOk=true;
// validate responsible clinician
 if(!isWhitespace(p.ptmis007.value)){
 if(!ValidateHCPDateHospital(18,1,p.ptmis007,p.doctnam2,p.ptmis001,p.wbsehosp)){
    HideWaitScreen();
    return;
  }
 }
// validate registrar
 if(!isWhitespace(p.ptvis062.value)){
 if(!ValidateHCPDateHospital(18,2,p.ptvis062,p.d_ptvis062,p.ptmis001,p.wbsehosp)){
    HideWaitScreen();
    return;
  }
 }
// validate resident
 if(!isWhitespace(p.ptvis061.value)){
 if(!ValidateHCPDateHospital(18,2,p.ptvis061,p.d_ptvis061,p.ptmis001,p.wbsehosp)){
    HideWaitScreen();
    return;
  }
 }
    if(p.offdutyb!=undefined){
      if(p.offdutyb.checked==true){
        alert("Error: " + document.UpdateForm.CLdesc.value + 
              " invalid for 'Off Duty' personnel.")
        HideWaitScreen();
        return;
      }
    }
    if(p.ptmis027.value.substr(3,1)=="P"&&p.dvacardc.value=="1"){
      if(!confirm("\t\tPublic patient with DVA details.\n" +
                  "Select Ok to continue," +
                  " select Cancel to return to page and change Claim " +
                  " Type.")){
        HideWaitScreen();
        return;
      }
    }
    if(p.ptmis027.value.substr(14,2)=="21"&&p.pmifundh.value!==""){
     if(!confirm("Warning: Public patient with Private Health Fund details.\n" +
                  "Select Ok to continue admission," +
                  " select Cancel to return to current admission page" +
                  " to update Claim Type.")){
        HideWaitScreen();
        return;
      }
    }
// Validate Cat.A/Cat.CC combination
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=69" +
                    "&valdcode="+p.ptmis012.value.replace(/ /g,"+") +
                    "&valdcod2="+p.ptmis010.value.replace(/ /g,"+") +
                    "&valdcod3="+p.urnumber.value.replace(/ /g,"+") +
                    "&valddate="+p.ptmis001.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       HideWaitScreen();
       return false;
    }
// Validate Cat.BT/Cat.CG combination (rehab ward)
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=70" +
                    "&valdcode="+p.ptmis012.value.replace(/ /g,"+") +
                    "&valdcod2="+p.ptmis068.value.replace(/ /g,"+") +
                    "&valdcod3="+p.ptmis076.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       HideWaitScreen();
       return false;
    }
// Validate Cat.KD/Age combination
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=71" +
                    "&valdcode="+p.ptvis104.value.replace(/ /g,"+") +
                    "&valdcod2="+p.urnumber.value.replace(/ /g,"+") +
                    "&valddate="+p.ptmis001.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       HideWaitScreen();
       return false;
    }
// Validate Category CL and Ambulatory Ward
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=72" +
                    "&valdcode="+p.ptmis068.value.replace(/ /g,"+") +
                    "&valdcod2="+
                    "&valdcod3="+p.ptmis027.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       HideWaitScreen();
       return false;
    }
// Validate transfer hospital / current hospital
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=73" +
                    "&valdcode="+p.ptmis068.value.replace(/ /g,"+") +
                    "&valdcod2="+p.trnsfsrc.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       HideWaitScreen();
       return false;
    }

    if (!validateMandatory(document.UpdateForm)) {
       HideWaitScreen();
       return;
    }

  if (!isWhitespace(document.UpdateForm.dispt001.value)) {
    var serverURL   = "../cgi-bin/comweb80.pbl?reportno=44" +
                    "&valdcode=" + UpdateForm.dispt001.value.replace(/ /g,"+") +
                    UpdateForm.ptmis001.value.replace(/ /g,"+");
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0) {
      HideWaitScreen();
      return;
    }
  }


    if(document.UpdateForm.mvmedre1.checked == true) {
       document.UpdateForm.mvmedrec.value="1";
    } else {
       document.UpdateForm.mvmedrec.value="0";
    }
    if(document.UpdateForm.admitbox.checked == true) {
      if(isWhitespace(p.ptmis020.value)&&isWhitespace(p.ptvis075.value)){
         alert("Diagnosis is a required field.")
         HideWaitScreen();
         return;
      }
      if(checkMultipleAdmission(UpdateForm)){
        HideWaitScreen();
        return;
      }
    }
  if (MandatoryOk) {
    setRedirect();
    if(p.prevhosp.checked==true){
      document.UpdateForm.redirect.value="patweb07.pbl?reportno=15&template=001"
      if(document.UpdateForm.pmext049.value == "1") {
        document.UpdateForm.redirect.value+= "&mvithmva=1"+
        "&chckcomp="+document.UpdateForm.ptmis027.value.substr(3,1);
      }
      document.UpdateForm.redirect.value +=
      "&urnumber=" + document.UpdateForm.urnumber.value
      + "&mvmedrec=" + document.UpdateForm.mvmedrec.value + "&admissno=";
    }
    UpdateForm.ptmis004.value=UpdateForm.ptmis068.value;
    UpdateForm.ptmis005.value=UpdateForm.ptmis076.value;

    SubmitHidden(UpdateForm);
    }
}
function valDoctorUnit() {
  validateCode(31,UpdateForm.ptmis007,UpdateForm.doctnam2);
  selectOptions4("45",UpdateForm.ptmis007,UpdateForm.dummy,UpdateForm.ptmis024);
  if(document.UpdateForm.ptmis024.length=="2"){
    UpdateForm.ptmis024.selectedIndex=1
  }
  valDoctorUnitTeam();
}
function valDoctorUnitTeam() {
  selectOptions4("46",UpdateForm.ptmis007,UpdateForm.ptmis024,UpdateForm.ptvis124);
  if(document.UpdateForm.ptvis124.length=="2"){
    UpdateForm.ptvis124.selectedIndex=1
  }
  if (UpdateForm.ptvis124.length>1) {
    UpdateForm.ptvis124.className = "Mandatory"; }
  else { UpdateForm.ptvis124.className = ""; }
}
function AdmitMandatory() {
 p=document.UpdateForm
 if(document.UpdateForm.admitbox.checked == true) {
     p.admitbox.value="1";
     p.ptmis007.className="Mandatory";  //responsible clinician
     p.ptmis011.className="Mandatory";  //admission type
     p.ptmis009.className="Mandatory";  //admission source
     p.ptmis024.className="Mandatory";  //Speciality
     p.ptmis012.className="Mandatory";  //care type
     p.ptmis010.className="Mandatory";  //Patient type
     p.ptmis027.className="Mandatory";  //Financial Class
     p.ptvis046.className="Mandatory";  //Admitting Point
     p.ptvis093.className="Mandatory";  //Preferred Accommodation
     p.ptvis104.className="Mandatory";  //Employment Status
     p.ptvis043.className="Mandatory";  //Intended Stay
     p.ptvis022.className="Mandatory";  //Inform GP
     p.ptvis125.className="Mandatory";  //Non WA Hospital Contact
     p.ptvis095.className="Mandatory";  //Usual Accommdation

  } else {
     p.admitbox.value="0";
     p.ptmis007.className="";  //responsible clinician
     p.ptmis011.className="";  //admission type
     p.ptmis009.className="";  //admission source
     p.ptmis024.className="";  //Speciality
     p.ptmis012.className="";  //care type
     p.ptmis010.className="";  //Patient type
     p.ptmis027.className="";  //Financial Class
     p.ptvis046.className="";  //Admitting Point
     p.ptvis093.className="";  //Preferred Accommodation
     p.ptvis104.className="";  //Employment Status
     p.ptvis043.className="";  //Intended Stay
     p.ptvis043.className="";  //Intended Stay
     p.ptvis022.className="";  //Inform GP
     p.ptvis125.className="";  //Non WA Hospital Contact
     p.ptvis095.className="";  //Usual Accommdation
  }
}
function valClaimCode() {
  p=document.UpdateForm
  if (p.d_newbornf.value!=1) {
    validateCode(41,UpdateForm.urnumber,UpdateForm.claimc);
    for (var i =0 ; i < document.UpdateForm.ptmis027.length; i++) {
      if (document.UpdateForm.claimc.value==
          trim(document.UpdateForm.ptmis027.options[i].value.substr(0,3))){
            document.UpdateForm.ptmis027.selectedIndex=i;
      }
    }
  }
}
function LoadWardBeds() {
  var p=document.UpdateForm;
  WardBedSelection(p.ptmis068,p.ptmis076,'A',p.d_ptmis076)
}
function checkAdmRequest() {
  getAdmRequest(document.UpdateForm.admreqno,defaultPreAdmFields);
}
function CancelButton() {
  if(!isWhitespace(document.UpdateForm.admreqno.value)) {
    PatientLinkTo("patweb15.pbl",1,1,0,0,0);
  } else {
    PatientLinkTo('patweb98.pbl',1,1,0);
  }
}
function DisplayCatLS() {
  CChdp = trim(UpdateForm.ptmis012.value.substr(14,2));
  CCind14 = trim(UpdateForm.ptmis012.value.substr(30,1));

  if ((CChdp == "32" || CChdp == "33") && CCind14 == "M") {
    document.getElementById("catLStitle").innerHTML =
        document.getElementById("catLStitleSPAN").innerHTML;
    document.getElementById("catLSfield").innerHTML =
        document.getElementById("catLSfieldSPAN").innerHTML;
  } else {
    document.getElementById("catLStitle").innerHTML = "";
    document.getElementById("catLSfield").innerHTML = "";
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);document.UpdateForm.ptmis001.focus();
              valClaimCode();valDoctorUnit();LoadWardBeds();
              showFundingSource();checkAdmRequest();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.03.003";
PatientVIS="%PATWEB89.03.081";
PatientNAM="%PATWEB89.03.002";
PatientSTA="%PATWEB89.03.086.078";
PatientALT="%PATWEB89.03.084";
PatientSEX="%PATWEB89.03.019";
PatientDOB="%PATWEB89.03.020";
PatientAGE="%PATWEB89.03.021";
PatientLOC="%PATWEB89.03.083";
PatientPRI="%PATWEB89.03.086.066.1";
PatientUNT="%PATWEB89.03.066.0";
DoctorCOD="%PATWEB89.03.082.003";
DoctorNAM="%PATWEB89.03.082.002";
PatientAID="%PATWEB89.03.086.090";
PatientIND="%PATWEB89.03.086.091";
PatientCUR="%PATWEB89.03.086.092";
PatientCLC="%PATWEB89.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.03.086.094";
PatientCDM="%PATWEB89.03.086.095";
PatientVDH="%PATWEB89.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=UpdateForm method=post action=patweb89.pbl style="margin:0">
<input type=hidden name=urnumber value="%PATWEB89.03.003">
<input type=hidden name=admissno value="%PATWEB89.03.081">
<input type=hidden name=reportno value=2>
<input type=hidden name=template value="001">
<input type=hidden name=wbsehosp value="%STANDARD.01.032">
<input type=hidden name="updatety" value="1">
<input type=hidden name="redirect">
<input type=hidden name="allocate" value="1">
<input type=hidden name="chckname" value="0">
<input type=hidden name="emradmit" value="0">
<input type=hidden name="emradmis" value="0">
<input type=hidden name="admitnow" value="1">
<input type=hidden name="newbmand" value="0">
<input type=hidden name="agebmand" value="0">
<input type=hidden name="tmotfrst" value="10">
<input type=hidden name="tmotnext" value="10">
<input type=hidden name=ptmas046 value="0">
<input type=hidden name="mvmedrec">
<input type=hidden name="cfinan" value="%PATWEB89.03.932">
<input type=hidden name="claimc" value="">
<input type=hidden name="exstward" value="%PATWEB89.03.449.1">
<input type=hidden name=ptcnwauc value="%STANDARD.01.025.103.245.0.1">
<input type=hidden name="mhadmflg">
<input type=hidden name="leavhosp">
<input type=hidden name="leavadmn">
<input type=hidden name="leavtype">
<input type=hidden name="contmult" value="1">
<input type=hidden name="ptcnbage" value="%STANDARD.01.025.021.046.1.3">
<input type=hidden name="pbdate"   value="%PATWEB89.03.020">
<input type=hidden name="dvacardc" value="%PATWEB89.03.999.002">
<input type=hidden name="restatus" value="%PATWEB89.03.024.3">
<input type=hidden name="visatype" value="%PATWEB89.03.999.003.007.3">
<input type=hidden name="ptcnxcom" value="%STANDARD.01.025.116.222.0.1">
<input type=hidden name="ptmis013" value="%PATWEB89.03.040.0">
<input type=hidden name="ptmis014" value="%PATWEB89.03.041.0">
<input type=hidden name="ptmis015" value="%PATWEB89.03.042">
<input type=hidden name="pmsvx142" value="%PATWEB89.03.899.010">
<input type=hidden name="CLdesc"   value="%STANDARD.01.017.CL">
<input type=hidden name=d_newbornf value="%PATWEB89.03.941">
<input type=hidden name="ismrtmas" value="%PATWEB89.03.999.021">
<input type=hidden name=ptmis050   value="%PATWEB89.03.982">
<input type=hidden name="pmifundh" value="%PATWEB89.03.040.0">
<input type=hidden name="admreqno" value="%PATWEB89.03.999.037">
<input type=hidden name=bedstat1 id=bedstat1>
<input type=hidden name=ptmis004>
<input type=hidden name=ptmis005>
<input type=hidden name=warddesc id=warddesc>
<input type=hidden name=d_ptmis076>
<input type=hidden name=ptcnhdps id=ptcnhdps 
       value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=inclcin1>

<table border=0 width=100% cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell align=center>
    Patient Pre-Admission Details (New) </td></tr>
</table>
<table width=100%  border=0 cellpadding=0 cellspacing=0>
<tr><td align=left><b>Admit Now?</b></td>
    <td align=left><input type="checkbox" name="admitbox" value="0" tabindex=1
        onclick='AdmitMandatory()';></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td></tr>

<tr><td class=DataLabel>Admission Date </td>
    <td><input type=text size=12 name=ptmis001 id=ptmis001 tabindex=1 
         class="Mandatory Date" title="Admission Date" 
         value="%STANDARD.01.015">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(ptmis001);">     
         Time 
        <input class=Mandatory type=text name=ptmis002 size=8 tabindex=2
         value="%STANDARD.01.016" title="Admission Time" id=ptmis002>
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(null,ptmis002);">
        <img notab src="../images/TimeLookup.gif" class=Icon 
         onclick="TimeLookupFrame(ptmis002);"></td>
    <td>Admitting Point</td>
    <td><select name=ptvis046 tabindex=50 title="Admitting Point"
         onChange="defaultWard()">
         <option></option>
          %PATWEB89.03.290.2
        </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.P </td>
    <td><select name=ptmis011 tabindex=3 
         title="%STANDARD.01.017.P ">
         <option> </option>
          %PATWEB89.03.112.2
         </select>
         <span id=BabyAge style="display:none">
          Admission Weight
         <input type=text name=ptmis051 size=5 maxlength=4 value=""
          title="Admission Weight" tabindex=4>grams
         </span></td>
    <td class=DataLabel>Ward / Bed </td>
    <td><select name=ptmis068 id=ptmis068 tabindex=55 title="Ward" 
         class=Mandatory 
         onchange="LoadWardBeds();">
         <option> </option>
          %PATWEB89.03.449.2
        </select>
        <select name=ptmis076 id=ptmis076 title="Bed" notab>
        </select>
        <img notab src="../images/SearchIcon.gif" class=Icon
         onclick="WardBedSearchFrame(ptmis068,warddesc,ptmis076,bedstat1,
                                     LoadWardBeds);"></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.S </td>
    <td><select name=ptmis009 tabindex=5 
         onchange="DisplayTransfer();" title="%STANDARD.01.017.S ">
         <option> </option>
          %PATWEB89.03.110.2
         </select></td>
    <td class=DataLabel>%STANDARD.01.017.BP</td>
    <td><select name=ptvis093 title="%STANDARD.01.017.BP" 
         tabindex=60 >
        <option> </option>
         %PATWEB89.03.298.012.2
        </select></td></tr>

<tr id="transferxx" style="display:none">
    <td class=DataLabel>Transfer Source</td>
    <td><input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc
         title="Transfer Source" tabindex=5
         onchange="validateCode(9,trnsfsrc,trandesc);">
        <input type=text size=27 name=trandesc id=trandesc notab
         class=Readonly readonly>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="TransferSourceFrame(trnsfsrc,trandesc)"></td></tr>

<tr><td class=DataLabel>Referring Clinician</td>
    <td><input type="text" size=10 maxlength=10 name=ptvis028 tabindex=7
         value="%PATWEB89.03.231.1" id=ptvis028
         onchange="ReadDoc(18,0,ptvis028,genpname,ptvis029,genpprac,ptvis030,
                           genpprov);">
        <input type=text size=25 notab readonly name=genpname id=genpname
         value="%PATWEB89.03.231.0">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCPSearchFrame(ptvis028,genpname,genpprov,ptvis029,
                                   genpprac,ptvis030,0)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(ptvis028,genpname);"></td>
    <td class=DataLabel>Post Op Ward</td>
    <td><input type=hidden name=popwdesc>
        <input type=hidden name=popbstat>
        <select name=ptvis048 tabindex=65>
         <option></option>
          %PATWEB89.03.251.2
        </select>
        <input type=hidden name=dummy></td></tr>

<tr><td class=DataLabel>Practice</td>
    <td><input type=text name=genpprac id=genpprac size=35 readonly
         value="%PATWEB89.03.232.0" notab>
        <input type=hidden name=ptvis029 id=ptvis029 value="%PATWEB89.03.232.1">
        <input type=hidden name=ptvis030 id=ptvis030 value="%PATWEB89.03.233.1">
        <input type=hidden name=genpprov id=genpprov value="">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCGSearchFrame(ptvis028,genpname,genpprov,ptvis029,
                                   genpprac,ptvis030)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(ptvis029,genpprac,ptvis030,genpprov);"></td>
    <td class=DataLabel>%STANDARD.01.035.cw</td>
    <td><select name=ptvis125 title="%STANDARD.01.035.cw" 
         tabindex=100>
         <option> </option>
          %PATWEB89.03.298.047.9.2
         </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.SI</td>
    <td><select name=ptvis103 tabindex=8 
         title="%STANDARD.01.017.SI">
         <option></option>
          %PATWEB89.03.298.025.4
        </select></td>
    <td align=left>Hosp Last 7 Days</td>
    <td align=left><input type="checkbox" name="prevhosp" value="1" 
        tabindex=105></td></tr>

<tr><td class=DataLabel>Responsible Clinician</td>
    <td><input type=text size=8 maxlength=6 name=ptmis007 id=ptmis007 
         tabindex=10 title="Responsible Clinician" value="%PATWEB89.03.108.003"
         onchange="UpCase(this);valDoctorUnit();">
        <input type=text readonly size=25 notab name=doctnam2 id=doctnam2
         value="%PATWEB89.03.108.002"
         title="Responsible Clinician">
        <img notab src="../images/SearchIcon.gif" class=Icon
         onclick="DoctorSearchFrame(ptmis007,doctnam2,valDoctorUnit)"></td>
    <td class=DataLabel>%STANDARD.01.035.KP</td>
    <td><select name=ptvis095 tabindex=107
         title="%STANDARD.01.035.KP">
         <option></option>
          %PATWEB89.03.298.017.9.5
         </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.AC</td>
    <td><select name=ptmis024 tabindex=15 
         title="%STANDARD.01.017.AC" onchange="valDoctorUnitTeam();">
         <option> </option>
        </select></td>
    <td class=DataLabel>%STANDARD.01.017.KD</td>
    <td><select name=ptvis104 tabindex=110
         title="%STANDARD.01.017.KD">
         <option></option>
          %PATWEB89.03.298.026.2
         </select></td></tr>

<tr><td class=DataLabel>Team</td>
    <td><select name=ptvis124 tabindex=25 
         title="Team">
         <option> </option>
        </select></td>
    <td class=DataLabel>Diagnosis(text) </td>
    <td><input tabindex=115 type=text name="ptmis020" size=50 maxlength=80
         value="%PATWEB89.03.121"></td></tr>

<tr><td class=DataLabel>Registrar</td>
    <td><input type=hidden name=ptvis062 id=ptvis062 value="%PATWEB89.03.265.1">
        <input type=text size=20 maxlength=30 name=d_ptvis062 id=d_ptvis062
         value="%PATWEB89.03.265.0" readonly notab>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(ptvis062,d_ptvis062,8);">
        <img src="../images/erase.gif" class=Icon 
         onclick="clrFields(ptvis062,d_ptvis062);"></td>
    <td class=DataLabel>Diagnosis(ICD)</td>
    <td><input type=text name=ptvis075 id=ptvis075 size=10 tabindex=120
         value="%PATWEB89.03.291" title="ICD Code"
         onblur="validateCode(6,UpdateForm.ptvis075,UpdateForm.drgdesc1);">
        <input type=text size=30 name=drgdesc1 title="ICD Description"
         id=drgdesc1 value="" readonly>
        <img src=../images/SearchIcon.gif alt="Disease Search" class=Icon
         onclick="Icd10DisSearchFrame(UpdateForm.ptvis075,UpdateForm.drgdesc1,
                  UpdateForm.drgdesc2);"></td></tr>

<tr><td class=DataLabel>Resident</td>
    <td><input type=hidden name=ptvis061 id=ptvis061 value="%PATWEB89.03.264.1">
        <input type=text size=20 maxlength=30 name=d_ptvis061 id=d_ptvis061
         value="%PATWEB89.03.264.0" readonly notab>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(ptvis061,d_ptvis061,8);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(ptvis061,d_ptvis061);"></td>
    <td class=DataLabel>%STANDARD.01.017.VI</td>
    <td class=DataLabel><select name=ptvis043 tabindex=125 
        title="%STANDARD.01.017.VI">
        <option> </option>
         %PATWEB89.03.246.2
        </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.CC</td>
    <td><select name=ptmis012 tabindex=35 title="%STANDARD.01.017.CC"
         onchange="checkUnq();DisplayCatLS();">
         <option></option>
          %PATWEB89.03.113.2
         </select></td>
    <td class=DataLabel> Planned Length of Stay</td>
    <td><input type=text size=5 maxlength=5 name=ptmis030
         tabindex=135 title='Planned Length of Stay' min=0
         class=Integer onblur="checkInteger(this,this.value);"></td></tr>

<tr><td><div id=catLStitle></div></td>
    <td><div id=catLSfield></div></td>
    <td class=DataLabel>Inform GP</td>
    <td><select name=ptvis022 tabindex=145 title="Inform GP">
        <option value=" "></option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        <option value="2">Unknown</option>
        </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.A </td>
    <td><select name=ptmis010 tabindex=40  
         title="%STANDARD.01.017.A " 
         onchange="DisContractWAhealth();" >
         <option> </option>
          %PATWEB89.03.111.2
         </select></td>
    <td class=DataLabel>Consent upload visit to My Health Record?</td>
    <td><select name=ptmis037 tabindex=146 title="Upload to MyHR?">
         <option></option>
          %STANDARD.01.018.U1.000.4
        </select>&nbsp;
         (<a href="javascript:patientMyhrConsentForm();">form</a>)</td></tr>

<tr id="contractxx" style="display:none">
    <td>Contract ID</td>
    <td><input type="text" size=7 maxlength=5 name=ptasf003 title="Contract ID"
         tabindex=40 id=ptasf003 onblur="validateCode(9,ptasf003,d_ptasf003);">
        <input type=text size=27 name=d_ptasf003 id=d_ptasf003 notab
         class=Readonly readonly>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="TransferSourceFrame(ptasf003,d_ptasf003)"></td>
    <td></td>
    <td></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.CL</td>
    <td><table cellspacing=0 cellpadding=0>
        <td><select name=ptmis027 title="%STANDARD.01.017.CL" 
         tabindex=45 onchange="showFundingSource();">
         <option> </option>
          %PATWEB89.03.126.2
         </select></td>
        <td><div id=FundingHeading></div></td>
        <td><div id=FundingId></div></td>
        </table></td>
    <td class=DataLabel>Mailing List</td>
    <td><select name=ptmis072 tabindex=170>
        <option value="2"></option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select></td></tr>

<tr>
    <td class=DataLabel>
      Has the patient been in a Motor Vehicle Accident?
    </td>
    <td>
      <select class="Mandatory" name=pmext049 tabindex=1
       title="Has the patient been in a Motor Vehicle Accident?">
        %PATWEB89.03.999.125.099.050
      </select>
    </td>
  </tr>

<tr><td align=left>Move Medical Record</td>
    <td align=left><input type="checkbox" name="mvmedre1" value="1" 
        tabindex=185></td>
    <td>Disaster Code</td>
    <td><select name=dispt001 tabindex=175 title="Disaster Code"
         onchange="displayDisasterID();">
         <option></option>
          %PATWEB89.03.995
        </select></td></tr>

<tr><td></td>
    <td></td>
    <td class=DataLabel><div id=disasteridnumbertitleDIV></div></td>
    <td><div id=disasteridnumberDIV></div></td></tr>
 
<tr><td class=DataLabel> Admission Comments </td>
    <td colspan=6 align=left>
    <textarea wrap=hard name=adcommnt rows=3 cols=70 tabindex=195>
    </textarea></td></tr>

<tr align=center>
    <td colspan=4 align=center><br>
    <input tabindex=200 type=button value="Ok" class="button" id="pat89sub"
        onclick="tempDisable(this);ShowWaitScreen();
                 checkBedStatus(UpdateForm.ptmis068.value,
                 UpdateForm.ptmis076.value,UpdateForm.ptmis001.value,
                 UpdateForm.ptmis030.value,UpdateForm.ptmis002.value,
                 SubmitAdm,UpdateForm.admitbox);
                 window.setTimeout(HideWaitScreen, 30000);">
    <input tabindex=205 type=button value="Cancel" class="button"
        onclick="CancelButton();"></td></tr>
</table>
</form>

<form name=linkForm action=patweb89.pbl method=post>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%PATWEB89.03.003">
<input type=hidden name=admissno value="%PATWEB89.03.081">
</form>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.03.003">
<input type=hidden name=admissno value="%PATWEB89.03.101">
<input type=hidden name=MenuType value="%PATWEB89.03.088">
</form>
</div>

<span id=NewBorn style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Gestation Period</td>
    <td><input type=text name=ptmis041 id=ptmis041 maxlength=3 size=4 
         tabindex=21> weeks</td></tr>
</table>
</span>

<span id=WaitBoxDisplay class=WaitBox style="display:none">
<img class=WaitImage src="../images/wait.gif">
<p>Please Wait ...</p>
</span>
<div id=PageLayer class=DimmedLayer style="display:none"></div>

<script type="text/javascript">
ShowAdmissionWeight(UpdateForm);
MergePsy="%PATWEB89.03.050"
  if(MergePsy=="Yes"){
    document.UpdateForm.ptmas046.value="1"
  }
 if(MergePsy=="No "){
    document.UpdateForm.ptmas046.value="0"
  }
 if ("%PATWEB89.03.903" == "1") {
  alert("Warning: Patient has a Waiting List Procedure");
 }
 if ("%PATWEB89.03.904" == "1") {
  alert("Warning: Patient has a Booking");
 }
 currhosp=trim("%PATWEB89.03.999.017")
 curradmn="%PATWEB89.03.999.018"
 if ("%PATWEB89.03.905" == "1") {
  alert("Patient Currently admitted at "+currhosp+" under Admission - "+curradmn);
 }
 if ("%PATWEB89.03.908" == "1") {
  alert("Warning: Patient has a pre-admission record");
 }
  Day=document.UpdateForm.ptmis001.value.substr(0,2).replace(/ /g,"0")
  Dat=document.UpdateForm.ptmis001.value.substr(2)
  document.UpdateForm.ptmis001.value=Day + Dat

if (!isWhitespace(document.UpdateForm.ptvis075.value)){
 validateCode(6,UpdateForm.ptvis075,UpdateForm.drgdesc1)
}
for (var i=0;i<document.UpdateForm.ptvis022.length;i++){
if (document.UpdateForm.ptvis022.options[i].value=="%PATWEB89.03.225.0"){
    document.UpdateForm.ptvis022.selectedIndex=i}
};

if (document.UpdateForm.ismrtmas.value!="1"){
    document.UpdateForm.mvmedre1.disabled=true;
}

  var codeList = document.UpdateForm.ptmis027.options;
  for (var i = 0; i < codeList.length; i++) {
    if (isWhitespace(codeList[i].value)) continue;
    var codeSingle = codeList[i].value.substr(3, 5); 
    if (codeSingle.match(/M/g) != null) {
      document.UpdateForm.ptmis027.options[i].remove(i);
      i--;
    }
  }

</script>

<span id=disasteridnumbertitleSPAN style="display:none">
Disaster Identification #
</span>

<span id=disasteridnumberSPAN style="display:none">
<input type="text" name=dispt002 id=dispt002 size=20 maxlength=19 
   tabindex=19 title="Disaster Identification Number">
</span>

<span id=offdutyhd style="display:none">
 Off Duty
</span>

<span id=offdutyid style="display:none">
 <input type="checkbox" name="offdutyb" value="0">
</span>

<span id=blanklabel style="display:none">&nbsp;</span>
<span id=fundinghd style="display:none">
Funding Source
</span>

<span id=fundingid style="display:none">
  <select name=ptvis131 id=ptvis131 title="%STANDARD.01.017.cx" tabindex=46>
    <option> </option>
    %PATWEB89.03.298.053.4
  </select>
</span>

<span id="catLStitleSPAN" style="display:none">
  %STANDARD.01.017.LS
</span>

<span id="catLSfieldSPAN" style="display:none">
  <select name=ptvis074 id=ptvis074 class=Mandatory
          title="Mental Health Legal Status"
          tabindex=36 value="">
    <option></option>
      %PATWEB89.03.289.2
  </select>
</span>

