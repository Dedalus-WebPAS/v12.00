<meta name="TemplateVersion" content="V12.00.09">
<meta name="TemplateHome"    content="wahealth">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true"> 
<script type="text/javascript" src="../js/OutExtraTemplates.js"></script>
<script type="text/javascript" src="../js/outweb0203003.js"></script>
<script type="text/javascript" src="../js/outweb02.js"></script>
<script type="text/javascript" src="../js/CustomMyhrConsent.js"></script>
<script type="text/javascript">
function validateLSDoc() {
  validateLinkedSDoc(document.getElementsByName("clinprac")[0],
                     document.getElementsByName("outbb031")[0],
                     document.getElementsByName("doctname")[0]);
}
function CheckBatch() {
  if (document.UpdateForm.clinindc.value=="P" &&
      document.UpdateForm.ibcnumci.value=="1" &&
      document.UpdateForm.otmaumci.value=="1") {
    // if batched then Actual doctor seen is readonly
      if (document.UpdateForm.btchflag.value == "1") {
        document.UpdateForm.outbb031.readOnly=true;
        document.UpdateForm.outbb031.className="Readonly";
      }
  }
}
function CheckFundingSource() {
  if(UpdateForm.offdutyb!=undefined){
    if(UpdateForm.offdutyb.checked==true){
      alert("Error: Claim Type invalid for 'Off Duty' personnel.")
      return;
    }
  }

if (document.UpdateForm.outbb035.value.substr(3,1)=="2" ||
    document.UpdateForm.outbb035.value.substr(3,1)=="3" ||
    document.UpdateForm.outbb035.value.substr(3,1)=="4") {
    if (!isWhitespace(document.UpdateForm.deprtred.value)) {
    SetCookie("DeprtRedCookie",document.UpdateForm.deprtred.value);

      document.UpdateForm.redirect.value=
         "outweb02.pbl?reportno=03&template=006" +
         "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+") +
         "&admissno=" + document.UpdateForm.deprtred.value;

      document.UpdateForm.nextpage.value="1";

    }

  }

  if (document.UpdateForm.outbb035.selectedIndex > 0) {
    var selOutcome = document.UpdateForm.outbb035;
    var refvistcheck = PatientLinks.refrvisn.value;
    var indc4 = selOutcome.value.substr(6,1);  // Outcome indicator 4
    if ((indc4 == "C")&& refvistcheck) {
      // Redirect to 'Close Referral' screen
      //ExpireCookiePath("OutpatientList");
      document.UpdateForm.redirect.value="allweb02.pbl?reportno=2&template=004"+
           "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
           "&admissno=" + PatientLinks.refrvisn.value.replace(/ /g,"+") +
           "&deptcode=" + PatientLinks.refrdept.value.replace(/ /g,"+");
      document.UpdateForm.nextpage.value="1";
    }
  }

  if (document.UpdateForm.opwamvny.value == '1') {
    var redirectPage = document.getElementById('redirect').value;
    redirectPage = "patweb89.pbl?reportno=1&template=352" +
         "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
         "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+") +
         "&casekeys=" + PatientLinks.casekeys.value.replace(/ /g,"+") +
         "&pmext049=" + document.UpdateForm.opwamvny.value + 
         "&chckcomp=" + document.UpdateForm.outbb002.value[3]+"O";

    document.UpdateForm.nextpage.value="1";

    var outcome = CheckOutcome();
    if (outcome.length>0){
      redirectPage+="&scrname="+outcome;
      if (outcome=="OCR"){
        SetCookie("AddSlotFollowUp");
      }
    }

    document.getElementById('redirect').value = redirectPage;
    if(validateMandatory(UpdateForm)) {
      UpdateForm.submit();
    }
  } else {
    document.UpdateForm.redirect.value = setFundingRedirect();
    UpdateRecords();
  }
}
function getDeprtRedCookie() {
  if (GetCookieData("DeprtRedCookie")!="unknown") {
    document.UpdateForm.deprtred.value=GetCookieData("DeprtRedCookie");
  }

  ExpireCookiePath("DeprtRedCookie"); 
}
function DisplayWarning(){
  if(UpdateForm.outbb070.value.substr(3,1)=="W"){
     alert("Warning: This code is only to be used \n"
           +"when the patient or carer is not present.");
  }
}
function DisabledFields(){
  f = document.UpdateForm;
  f.outbb068.disabled = true;
  f.outbb072.disabled = true;
  f.outbb069.disabled = true;
}
function ReEnableFields(){
  f = document.UpdateForm;
  f.outbb068.disabled = false;
  f.outbb072.disabled = false;
  f.outbb069.disabled = false;
}
function valReferralClaim() {
  var claimCodeVal = UpdateForm.outbb002.value.substr(0,3);
  var serverURL = "../cgi-bin/outweb02.pbl?reportno=9&updatety=19" +
                  "&admissno="+PatientLinks.admissno.value.replace(/ /g,"+") +
                  "&outbb002="+claimCodeVal +
                  "&urnumber="+PatientLinks.urnumber.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");
    if (ReturnValue[0] === '1') {
      var categoryName = ReturnValue[3].trim();
      var ans=confirm("The Outpatient Appointment " + categoryName +
      " does not match the Referral " + categoryName + ".\n\n" +
      "Outpatient Appointment " + categoryName + " = " + ReturnValue[2] +
      "\n" +
      "Referral " + categoryName + " = " + ReturnValue[1] + "\n\n" +
      "Press OK to update the Referral " + categoryName + " code.\n" +
      "Press Cancel to leave the Referral " +categoryName+ " code unchanged.");
      if (ans) {

        var fundingSourceVal = " ";
        if (UpdateForm.pmsvx141 !== undefined) {
          fundingSourceVal = UpdateForm.pmsvx141.value.substr(0,3);
        }
        var serverURL = "../cgi-bin/outweb02.pbl?reportno=9&updatety=20" +
                        "&admissno="+PatientLinks.admissno.value.replace(/ /g,"+") +
                        "&outbb002="+claimCodeVal+"&pmsvx141="+fundingSourceVal +
                        "&urnumber="+PatientLinks.urnumber.value.replace(/ /g,"+");
        var returnValue = RSExecute(serverURL);
      }
    }
  }
}
</script>

</head>
%START.OF.PAGE
<body onload="PageLoad(event);
              CheckBatch();
              setTimeout('SetDefaultField()',100);
              showFundingSource(UpdateForm);
              getDeprtRedCookie();
              DisabledFields();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Enter/Update Attendance Details - %OUTWEB02.03.303.1 - %OUTWEB02.03.605.0
- %OUTWEB02.03.618.1 - %OUTWEB02.03.002
</span>
<div id=PageBodySection style="overflow: auto;">
<form action=outweb02.pbl name=UpdateForm id=UpdateForm method=post 
 onsubmit="return validateMandatory(this);">
<input type=hidden name=reportno id=reportno value="4">
<input type=hidden name=redirect id=redirect value="%OUTWEB02.03.001.outweb02.03.003">
<input type=hidden name=updatety id=updatety value="1">
<input type=hidden name=casekeys id=casekeys value="%OUTWEB02.03.366">
<input type=hidden name=nextpage id=nextpage value="0">
<input type=hidden name=otcnocrd id=otcnocrd value="%OUTWEB02.03.612">
<input type=hidden name=otcnocdd id=otcnocdd value="%OUTWEB02.03.613">
<input type=hidden name=deptflag id=deptflag value="%OUTWEB02.03.617">
<input type=hidden name=clinctyp id=clinctyp value="%OUTWEB02.03.605.1">
<input type=hidden name=CurrTime id=CurrTime value="1">
<input type=hidden name=CurrDate id=CurrDate value="1">
<input type=hidden name=startdate id=startdate value="%OUTWEB02.03.304">
<input type=hidden name=dumdate id=dumdate value="">
<input type=hidden name=dumInput id=dumInput value="">
<input type=hidden name=clinindc id=clinindc value="%OUTWEB02.03.628">
<input type=hidden name=ptcnuebb id=ptcnuebb value="">
<input type=hidden name=defclmty id=defclmty value="%OUTWEB02.03.321.1">
<input type=hidden name=obacompd id=obacompd value="%OUTWEB02.03.321.3">
<input type=hidden name=clinprac id=clinprac value="%OUTWEB02.03.637">
<input type=hidden name=dateclin id=dateclin value="%OUTWEB02.03.304">
<input type=hidden name=ibcnumci id=ibcnumci value="%STANDARD.01.025.000.132.0.1">
<input type=hidden name=otmaumci id=otmaumci value="%OUTWEB02.03.634">
<input type=hidden name=btchflag id=btchflag value="%OUTWEB02.03.638">
<input type=hidden name=othekdoc id=othekdoc value="%OUTWEB02.03.640.031">
<input type=hidden name=c_othedefd id=c_othedefd value="%OUTWEB02.03.640.032.1">
<input type=hidden name=n_othedefd id=n_othedefd value="%OUTWEB02.03.640.032.0">
<input type=hidden name=s_othedefd id=s_othedefd value="%OUTWEB02.03.640.032.2">
<input type=hidden name=todaydat id=todaydat value="%STANDARD.01.015">
<input type=hidden name=deprtred id=deprtred value="">
<input type=hidden name=opclcin1>

<table cellspacing=0 cellpadding=1 border=0 width=95% align=center >
<tr><td width=15% class=DataLabel>Date </td>
    <td class=DataLabel>
    <input type=text size=11 value="%OUTWEB02.03.304" readonly class=Readonly>
    <td class=DataLabel>Check in Time</td>
    <td class=DataField>
    <input type=text name=outbb032 id=outbb032 value="%OUTWEB02.03.351" size=8
     title="Check In Time" onblur="ChkChkIn();">
    <img src="../images/DateTimeStamp.gif" class=Icon
    onclick="SetCurrentDateTimeMin(null,outbb032);">
    <img src=../images/TimeLookup.gif class=Icon
    onclick="TimeLookupFrameMin(outbb032);">
</td></tr>
<tr><td class=DataLabel>Time Seen </td>
    <td class=DataField>
    <input type=text name=outbb033 id=outbb033 
     value="%OUTWEB02.03.352" size=8 title="Time Seen" onblur="ChkTimSn();">
    <img src=../images/DateTimeStamp.gif class=Icon
    onclick="SetCurrentDateTimeMin(null,outbb033);">
    <img src=../images/TimeLookup.gif class=Icon
    onclick="TimeLookupFrameMin(outbb033);"> </td>
    <td class=DataLabel>Departure Time </td>
    <td class=DataField>
    <input type=text name=outbb034 id=outbb034 value="%OUTWEB02.03.307" size=8
     title="Departure Time" class="Mandatory" onblur="ChkTimDp();">
    <img src=../images/DateTimeStamp.gif class=Icon
    onclick="SetCurrentDateTimeMin(null,outbb034);">
    <img src=../images/TimeLookup.gif class=Icon
    onclick="TimeLookupFrameMin(outbb034);">
</td></tr>
<tr><td class=DataLabel>Outcome </td>
    <td class=DataField>
    <select name=outbb035 id=outbb035 class="Mandatory SelectBig" title="Outcome">
    <option></option>
       %OUTWEB02.03.354.5
    </select></td>
    <td class=DataLabel>Referring GP</td>
    <td class=DataField><input type=text readonly name=genpname id=genpname class=Readonly
     tabindex=-1>
    </td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.CL</td>
    <td><table cellspacing=0 cellpadding=0>
        <tr><td>
        <select name=outbb002 id=outbb002 class="Mandatory SelectBig"
        title="%STANDARD.01.017.CL" onchange="showFundingSource(UpdateForm);">
        <option></option>
        %OUTWEB02.03.321.9.1.10.2.X
        </select>
        </td>
        <td><div id=FundingHeading></div></td>
        <td><div id=FundingId></div></td>
        </table>
     </td>
     <td class=DataLabel>&nbsp;</td>
     <td class=DataField>&nbsp;</td>
     </tr>

<tr>
    <td class=DataLabel>
      Has this patient been in a Motor Vehicle Accident?
    </td>
    <td>
      <select class="Mandatory" name=opwamvny tabindex=1
       title="Has this patient been in a Motor Vehicle Accident?">
        %OUTWEB02.03.699.012.099.050
      </select>
    </td>
  </tr>

<tr><td class=DataLabel>NMDS Code</td>
    <td class=DataField><select name=outbb068 id=outbb068 class=SelectBig>
        <option></option>
        %OUTWEB02.03.327.004.2
        </select>
    </td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataField>&nbsp;</td>
    </tr>

<tr><td class=DataLabel>Tier 2 Code</td>
    <td class=DataField><select name=outbb072 id=outbb072 
        class="SelectBig" title="Tier 2 Code">
        <option></option>
        %OUTWEB02.03.327.012.2
        </select>
    </td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataField>&nbsp;</td>
    </tr>

<tr><td class=DataLabel>Care Type</td>
    <td class=DataField><select name=outbb069 id=outbb069 class=SelectBig>
        <option></option>
        %OUTWEB02.03.327.005.2
        </select>
    </td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataField>&nbsp;</td>
    </tr>

<tr><td class=DataLabel>Service Delivery Mode</td>
    <td class=DataField><select name=outbb070 id=outbb070 class=SelectBig 
     onchange="DisplayWarning();">
        <option></option>
        %OUTWEB02.03.327.006.2
        </select>
        </td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataField>&nbsp;</td>
    </tr>

<tr><td class=DataLabel>Consent MyHR upload?</td>
    <td><select name=outbb017 id=outbb017 tabindex=10 title="Consent MyHR Upload" class="DataField">
         <option></option>
         %OUTWEB02.03.336.2
         </select>&nbsp;(<a href="javascript:patientMyhrConsentForm();">form</a>)
    </td>
    <td></td>
    <td></td>
    </tr>

<tr valign=top>
    <td class=DataLabel>Presenting Complaint</td>
    <td class=DataField colspan=3>
    <input type=text name=pmsvx052 id=pmsvx052 size=50 maxlength=50                        
      value="%OUTWEB02.03.852">
</td></tr>

<tr valign=top>
    <td class=DataLabel>Diagnosis</td>
    <td class=DataField colspan=3>
    <input type=text size=15 name=outbb045 id=outbb045 value="%OUTWEB02.03.364"
     onblur="validateCode(6,UpdateForm.outbb045,UpdateForm.outbb046);">
    <input type=text name=outbb046 id=outbb046 size=80 class=Readonly readonly maxlength=50
     value="%OUTWEB02.03.365" tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="Icd10DisSearchFrame(UpdateForm.outbb045,UpdateForm.outbb046);">
    <img src=../images/LookupIcon.gif class=Icon
     onclick="CtypediagSearchFrame(UpdateForm.outbb045,UpdateForm.outbb046);">
    </td></tr>

<tr><td>&nbsp;</td>
    <td class=DataField colspan=3>
    <input type=text size=15 name=outbb055 id=outbb055 value="%OUTWEB02.03.379"
     onblur="validateCode(6,UpdateForm.outbb055,UpdateForm.outbb056);">
    <input type=text name=outbb056 id=outbb056 size=80 class=Readonly readonly maxlength=50 
     value="%OUTWEB02.03.380" tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="Icd10DisSearchFrame(UpdateForm.outbb055,UpdateForm.outbb056);">
    <img src=../images/LookupIcon.gif class=Icon
     onclick="CtypediagSearchFrame(UpdateForm.outbb055,UpdateForm.outbb056);">
    </td></tr>

<tr><td>&nbsp;</td>
   <td class=DataField colspan=3>
   <input type=text size=15 name=outbb057 id=outbb057 value="%OUTWEB02.03.381"
    onblur="validateCode(6,UpdateForm.outbb057,UpdateForm.outbb058);">
   <input type=text size=80 maxlength=50 name=outbb058 id=outbb058 
    class=Readonly readonly value="%OUTWEB02.03.382" tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="Icd10DisSearchFrame(UpdateForm.outbb057,UpdateForm.outbb058);">
    <img src=../images/LookupIcon.gif class=Icon
     onclick="CtypediagSearchFrame(UpdateForm.outbb057,UpdateForm.outbb058);">
    </td></tr>

<tr><td>&nbsp;</td><td class=DataField colspan=3>
    <input type=text size=15 name=outbb059 id=outbb059 value="%OUTWEB02.03.383"
     onblur="validateCode(6,UpdateForm.outbb059,UpdateForm.outbb060);">
    <input type=text size=80 maxlength=50 name=outbb060 id=outbb060  
     class=Readonly readonly value="%OUTWEB02.03.384" tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="Icd10DisSearchFrame(UpdateForm.outbb059,UpdateForm.outbb060);">
    <img src=../images/LookupIcon.gif class=Icon
     onclick="CtypediagSearchFrame(UpdateForm.outbb059,UpdateForm.outbb060);">
    </td></tr>

      <tr>
        <td>
          <table border=0 width=100% class=TableBody cellpadding=0
                 cellspacing=0>
            <tr><td class=DataLabel>Appointment Comments</td></tr>
            <tr><td colspan=6 align=left>
                <input type=button value="Add" class="button"
                 name="AddComm" id="AddComm"
                 onclick="tempDisable(this);AddComment();"></td></tr>
            <tr><td>&nbsp;</td></tr>
            <tr><td>&nbsp;</td></tr>
          </table>
        </td>
        <td colspan=6 align=left>
          <textarea wrap=hard name=outptcoa id=outptcoa class=Readonly readonly
           rows=4 cols=70>%OUTWEB02.03.327.016.005</textarea>
        </td>
      </tr>

<tr valign=top><td class=DataLabel>Patient Instructions (Printable)</td>
<td class=DataField colspan=3>
<textarea name=patinstr id=patinstr wrap=hard cols=60 rows=4 class=Readonly Readonly>
%OUTWEB02.03.680</textarea>
</td></tr>

</table>

<div id=ShowXCmbs></div>

<table border=0 width=95% cellspacing=0 cellpadding=1 align=center>
<tr><td colspan=4 align=center>
    <input type=button class="button" value="Ok" id="out02sub"
     onclick="tempDisable(this);CheckFundingSource();">
    <input type=button class="button" Value="Cancel"
     onclick="DFrameCloseRefresh();">
    </td></tr>
</table>
</form>
</div>

<span id=extracmbs style="display:none">
<table border=0 width=95% cellspacing=0 cellpadding=1 align=center>

<tr><td width=15% class=DataLabel>CMBS Code</td>
    <td class=DataField>
    <input type=hidden name=otbit001 id=otbit001 title="Item Type"
     value="%OUTWEB02.03.624. 1.0">
    <input type=text size=9 name=otbit002 id=otbit002 title="Item Code"
     value="%OUTWEB02.03.625. 1"
     onchange="validatePMBS(otbit002,mbsdesc1,otbit001,otbit003,dateclin,mbsamnt1);">
    <input type=text size=3 name=otbit003 id=otbit003 title="Sub-Item Code"
     value="%OUTWEB02.03.626. 1"
     onchange="validatePMBS(otbit002,mbsdesc1,otbit001,otbit003,dateclin,mbsamnt1);">
    <input type=text size=30 name=mbsdesc1 id=mbsdesc1
     value="%OUTWEB02.03.627. 1.0" readonly class=Readonly tabindex=-1>
    <input type=text size=11 name=mbsamnt1 id=mbsamnt1
     value="%OUTWEB02.03.627. 1.1" readonly class=Readonly tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="PriMbsSearchFrame(otbit001,otbit002,otbit003,dumdate,mbsdesc1,dumInput,TypeDesc1);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(otbit002,otbit003,mbsdesc1,mbsamnt1,otbit016);">
    <input type=text maxlength=20 size=22 name=otbit016 id=otbit016 title="Provider Usage" 
     tabindex=91 value="%OUTWEB02.03.635. 1">
    </td>
    </tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td class=DataField>
    <input type=hidden name=otbit004 id=otbit004 title="Item Type 2"
     value="%OUTWEB02.03.624. 2.0">
    <input type=text size=9 name=otbit005 id=otbit005 title="Item Code 2"
     value="%OUTWEB02.03.625. 2"
     onchange="validatePMBS(otbit005,mbsdesc2,otbit004,otbit006,dateclin,mbsamnt2);">
    <input type=text size=3 name=otbit006 id=otbit006 title="Sub-Item Code 2"
     value="%OUTWEB02.03.626. 2"
     onchange="validatePMBS(otbit005,mbsdesc2,otbit004,otbit006,dateclin,mbsamnt2);">
    <input type=text size=30 name=mbsdesc2 id=mbsdesc2
     value="%OUTWEB02.03.627. 2.0" readonly class=Readonly tabindex=-1>
    <input type=text size=11 name=mbsamnt2 id=mbsamnt2
     value="%OUTWEB02.03.627. 2.1" readonly class=Readonly tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
    onclick="PriMbsSearchFrame(otbit004,otbit005,otbit006,dumdate,mbsdesc2,dumInput,TypeDesc2);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(otbit005,otbit006,mbsdesc2,mbsamnt2,otbit017);">
    <input type=text maxlength=20 size=22 name=otbit017 id=otbit017 title="Provider Usage 2"
     tabindex=92 value="%OUTWEB02.03.635. 2">
    </td>
    </tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td class=DataField>
    <input type=hidden name=otbit007 id=otbit007 title="Item Type 3"
     value="%OUTWEB02.03.624. 3.0">
    <input type=text size=9 name=otbit008 id=otbit008 title="Item Code 3"
     value="%OUTWEB02.03.625. 3"
     onchange="validatePMBS(otbit008,mbsdesc3,otbit007,otbit009,dateclin,mbsamnt3);" >
    <input type=text size=3 name=otbit009 id=otbit009 title="Sub-Item Code 3"
     value="%OUTWEB02.03.626. 3"
     onchange="validatePMBS(otbit008,mbsdesc3,otbit007,otbit009,dateclin,mbsamnt3);" >
    <input type=text size=30 name=mbsdesc3 id=mbsdesc3
     value="%OUTWEB02.03.627. 3.0" readonly class=Readonly tabindex=-1>
    <input type=text size=11 name=mbsamnt3 id=mbsamnt3
     value="%OUTWEB02.03.627. 3.1" readonly class=Readonly tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
    onclick="PriMbsSearchFrame(otbit007,otbit008,otbit009,dumdate,mbsdesc3,dumInput,TypeDesc3);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(otbit008,otbit009,mbsdesc3,mbsamnt3,otbit018);">
    <input type=text maxlength=20 size=22 name=otbit018 id=otbit018 title="Provider Usage 3"
     tabindex=93 value="%OUTWEB02.03.635. 3">
    </td>
    </tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td class=DataField>
    <input type=hidden name=otbit010 id=otbit010 title="Item Type 4"
     value="%OUTWEB02.03.624. 4.0">
    <input type=text size=9 name=otbit011 id=otbit011 title="Item Code 4"
     value="%OUTWEB02.03.625. 4"
     onchange="validatePMBS(otbit011,mbsdesc4,otbit010,otbit012,dateclin,mbsamnt4);" >
    <input type=text size=3 name=otbit012 id=otbit012 title="Sub-Item Code 4"
     value="%OUTWEB02.03.626. 4"
     onchange="validatePMBS(otbit011,mbsdesc4,otbit010,otbit012,dateclin,mbsamnt4);" >
    <input type=text size=30 name=mbsdesc4 id=mbsdesc4
     value="%OUTWEB02.03.627. 4.0" readonly class=Readonly tabindex=-1>
    <input type=text size=11 name=mbsamnt4 id=mbsamnt4
     value="%OUTWEB02.03.627. 4.1" readonly class=Readonly tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
    onclick="PriMbsSearchFrame(otbit010,otbit011,otbit012,dumdate,mbsdesc4,dumInput,TypeDesc4);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(otbit011,otbit012,mbsdesc4,mbsamnt4,otbit019);">
    <input type=text maxlength=20 size=22 name=otbit019 id=otbit019 title="Provider Usage 4"
     tabindex=94 value="%OUTWEB02.03.635. 4">
    </td>
    </tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td class=DataField>
    <input type=hidden name=otbit013 id=otbit013 title="Item Type 5"
     value="%OUTWEB02.03.624. 5.0">
    <input type=text size=9 name=otbit014 id=otbit014 title="Item Code 5"
     value="%OUTWEB02.03.625. 5"
     onchange="validatePMBS(otbit014,mbsdesc5,otbit013,otbit015,dateclin,mbsamnt5);" >
    <input type=text size=3 name=otbit015 id=otbit015 title="Sub-Item Code 5"
     value="%OUTWEB02.03.626. 5"
     onchange="validatePMBS(otbit014,mbsdesc5,otbit013,otbit015,dateclin,mbsamnt5);" >
    <input type=text size=30 name=mbsdesc5 id=mbsdesc5
     value="%OUTWEB02.03.627. 5.0" readonly class=Readonly tabindex=-1>
    <input type=text size=11 name=mbsamnt5 id=mbsamnt5
     value="%OUTWEB02.03.627. 5.1" readonly class=Readonly tabindex=-1>
    <img src=../images/SearchIcon.gif class=Icon
    onclick="PriMbsSearchFrame(otbit013,otbit014,otbit015,dumdate,mbsdesc5,dumInput,TypeDesc5);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(otbit014,otbit015,mbsdesc5,mbsamnt5,otbit020);">
    <input type=text maxlength=20 size=22 name=otbit020 id=otbit020 title="Provider Usage 5"
     tabindex=95 value="%OUTWEB02.03.635. 5">
    </td>
    </tr>

<tr><td class=DataLabel>Seen By</td>
    <td><input type=text name=outbb031 id=outbb031 title="Seen By" class="Mandatory"
         value="%OUTWEB02.03.350.001" size=10
          onblur="UpCase(this);validateLinkedSDoc(clinprac,outbb031,doctname);">
          <input type=text class=Readonly readonly size=25 notab name=doctname id=doctname
           value="%OUTWEB02.03.350.081" title="Service HCP">
          <img notab src="../images/SearchIcon.gif" class=Icon
          onclick="MPDoctorSearchRF(clinprac,outbb031,doctname,validateLSDoc)">
          <img src="../images/erase.gif" class=Icon
          onclick="clrFields(outbb031,doctname);">
         </td>
    </tr>

<tr><td>Use CMBS Template</td>
    <td><input type=checkbox value=1 name=cmbsload id=cmbsload onclick="TemplateCmbs();">
    &nbsp;
    <select class="SelectBig" name=cmbstemp id=cmbstemp title="CMBS Template"
         onchange="TemplateCmbs();">
          <option></option>
          %OUTWEB02.03.629
          </select></td>
    </tr>

<tr><td>Print Medicare Claims</td>
    <td><input type=checkbox value=1 name=claimprt id=claimprt>
    &nbsp;
    <select class="SelectBig" name=claimpsl id=claimpsl title="Printer">
          <option></option>
          %STANDARD.01.001.OUTCLAIM.03
          </select></td>
    </tr>
</table>
</span>

<span id=seenbydoctor style="display:none">
<table border=0 width=95% cellspacing=0 cellpadding=1 align=center>
<tr><td class=DataLabel width=15%>Seen By</td>
    <td><input type=text name=outbb031 id=outbb031 title="Seen By" class="Mandatory"
         value="%OUTWEB02.03.350.001" size=10 maxlength=10
          onblur="ValidateHCP(18,0,outbb031,name_outbb031);">
        <input type=text class=Readonly readonly size=25 notab
           name=name_outbb031 id=name_outbb031
           value="%OUTWEB02.03.350.081" title="Seen By">
       <img src="../images/SearchIcon.gif"
       onclick="HCPSearchFrame(outbb031,name_outbb031,0);">
        <img src="../images/erase.gif" class=Icon
          onclick="clrFields(outbb031,name_outbb031);">
         </td>
    </tr>
</table>
</span>

<span id=offdutyhd style="display:none">
&nbsp;Off Duty&nbsp;
</span>

<span id=offdutyid style="display:none">
<input type="checkbox" name="offdutyb" id="offdutyb" value="0">
</span>

<span id=blanklabel style="display:none">
<input type=hidden name=pmsvx141 id=pmsvx141 value=" ">
</span>

<span id=fundinghd style="display:none">
&nbsp;Funding Source&nbsp;
</span>

<span id=fundingid style="display:none">
<select name=pmsvx141 id=pmsvx141 title="%STANDARD.01.017.cx">
<option> </option>
%OUTWEB02.03.899.009.5
</select>
</span>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno id=reportno value=1>
<input type=hidden name=template id=template value=004>
<input type=hidden name=urnumber id=urnumber value="%OUTWEB02.03.003">
<input type=hidden name=admissno id=admissno value="%OUTWEB02.03.081">
<input type=hidden name=MenuType id=MenuType value="%OUTWEB02.03.088">
<input type=hidden name=casekeys id=casekeys value="%OUTWEB02.03.366">
<input type=hidden name=refrvisn id=refrvisn value="%OUTWEB02.03.682">
<input type=hidden name=refrdept id=refrdept value="%OUTWEB02.03.683">
</form>
<script type="text/javascript">
DisplayXCmbsAttend();
 var title = '%OUTWEB02.03.348.003'
 var gname  = '%OUTWEB02.03.348.004'
 var surname = '%OUTWEB02.03.348.005'

 UpdateForm.genpname.value = trim(title)+" "+trim(gname)+" "+trim(surname);

// Convert a blank visit-level consent to the implied consent from patient level
patientConsentMyHR = "%OUTWEB02.03.043.3";
visitConsentMyHR   = "%OUTWEB02.03.336.3";
yesConsentMyHR     = "%STANDARD.01.018.O1.001.3";

if (visitConsentMyHR.substring(0,3)=="   ") {
  if (patientConsentMyHR.substring(0,3)=="   ") {
    document.getElementById("outbb017").value = yesConsentMyHR.substring(0,43);
  } else {
    document.getElementById("outbb017").value = patientConsentMyHR.substring(0,43); 
  }
}

var codeList = document.UpdateForm.outbb002.options;
var codeVal = document.UpdateForm.defclmty.value;
for (var i = 0; i < codeList.length; i++) {
  if (isWhitespace(codeList[i].value)) continue;
  var codeSingle = codeList[i].value.substr(3, 5);
  var codeVal2 = codeList[i].value.substr(0, 3);
  if (!isWhitespace(codeVal)) {
    if (codeVal == codeVal2) {
      var codeInd1 = codeSingle.substr(0, 1);
      if (codeInd1=="M") {
        document.UpdateForm.opclcin1.value = codeInd1;
        continue;
      }
    }
  }
  if (codeSingle.match(/M/g) != null && codeList[i].selected !=true) {
    document.UpdateForm.outbb002.options[i].remove(i);
    i--;
  }
}
</script>
