<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/rcpweb03.js"></script>
<script type="text/javascript">
function selRegister() {
   for (var i=0; i < document.AddForm.rcpde004.length; i++) {
     x=document.AddForm.rcpde004.options[i].value.substring(0,3);
     x=x.replace(/ /g,'');
     y=document.AddForm.code_rcpde004.value;
     y=y.replace(/ /g,'');
//alert("|"+x+"| |"+y+"|");
     if (x==y) {
       document.AddForm.rcpde004.selectedIndex=i;
     }
   }
   document.AddForm.rcpde004.focus();
}
function init() {
  GetCookieCashierPassword();
  self.onbeforeunload=AlertIncomplete;

   AddForm.printinv.disabled=false;
   AddForm.printcod.disabled=false;
   AddForm.printflg.disabled=false;
   AddForm.selprint.disabled=false;
   AddForm.nocopies.disabled=false;

  if (AddForm.allctotl.value>0) {
    AddForm.rcpde004.tabIndex=1;
    AddForm.finishbt.tabIndex=2;
    AddForm.changebt.tabIndex=3;
    AddForm.cancelbt.tabIndex=4;
    AddForm.printflg.tabIndex=5;
    AddForm.selprint.tabIndex=6;
    AddForm.nocopies.tabIndex=7;
    AddForm.finishbt.className="RedButton";
    document.AddForm.rcpde004.focus();
  }
}

function GoUpdatePayment(receiptno,trncount,systemcd) {
     AddForm.printinv.disabled=true;
     AddForm.printcod.disabled=true;
     AddForm.printflg.disabled=true;
     AddForm.selprint.disabled=true;
     AddForm.nocopies.disabled=true;
     UpdatePayment(receiptno,trncount,systemcd);
}

function AlertIncomplete() {
  if (AddForm.incmpflg.value==0) {
    return "Receipt is Incomplete."
  }
}

function SetPrint() {
    AddForm.updttype.value="P";
    AddForm.submit();
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);document.AddForm.code_rcpde004.focus();">
<form name=AddForm method=get action=rcpweb03.pbl>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=001>
<input type=hidden name=incmpflg value=0>
<input type=hidden name=updttype>
<input type=hidden name=nextpage value=1>
<input type=hidden name=redirect value="rcpweb03.pbl?reportno=3&template=1">
<input type=hidden name=allctotl value="%RCPWEB03.03.308">
<input type=hidden name=rcpbk001 value="%RCPWEB03.03.001">
<input type=hidden name=rcpbk003 value="%RCPWEB03.03.003">
<input type=hidden name=rcpbk004 value="%RCPWEB03.03.004.0">
<input type=hidden name=rcpbk007 value="%RCPWEB03.03.007">

<table width=100% align=center border=0 cellspacing=0>
<tr><td class=HeadingCell align=center colspan=2>Payments</td></tr>
</table>
<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=8>&nbsp;</td></tr>
<tr><td width=15%>Receipt Number</td>
    <td><b>%RCPWEB03.03.001</b></td></tr>
<tr><td class=DataLabel width=15%>Cash Drawer</td>
    <td><input size=30 type=text name=cashdrwr title="Cash Drawer" 
               value="%RCPWEB03.03.302"
               class=readonly readonly tabindex=-1></td>
    <td class=DataLabel>Password</td>
    <td><input size=12 type=password name=password title="Password"
               class=readonly readonly tabindex=-1></td>
</tr>
<tr><td class=DataLabel>Cashier</td>
    <td><input size=30 type=text name=wusrname title="Cashier" 
               value="%RCPWEB03.03.303" class=readOnly readonly tabindex=-1>
    </td>
</tr>
</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=3 align=center><hr width=100%></td></tr>
    <tr><td class=HeadingCell width=15%>&nbsp;Payment Type</td>
    <td class=HeadingCell width=10% align=right>Amount&nbsp;</td>
    <td class=HeadingCell width=75%>&nbsp;Reference</td></tr>
    %RCPWEB03.03.305.0
</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td class=DataLabel width=15%><b>Total to be Allocated</b></td>
    <td width=10% align=right><b>$%RCPWEB03.03.003&nbsp;</b></td>

    <td width=15% class=DataLabel>&nbsp;Print Non-Balanced Invoices</td>
    <td><select id=printinv name=printinv onchange="SetPrint();">
       <option value="0">No</option>
       <option value="1">Yes</option>
       </select></td>
    <td width=10% class=DataLabel>Select Printer </td>
    <td><select id=printcod name=printcod onchange="SetPrint();">
        %STANDARD.01.001.RCPWEB03.08
        </select></td>
</tr>
</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=8 align=center><hr width=100%></td></tr>
<tr>
    <td class=DataLabel width=15%><b>Total Allocated</b></td>
    <td width=10% align=right><b>$%RCPWEB03.03.308&nbsp;</b></td>
    <td class=DataLabel>&nbsp;Print Receipt</td>
    <td><select name=printflg>
       <option value="1">Yes</option>
       <option value="0">No</option>
       </select></td>     
    <td class=DataLabel>Select Printer </td>
    <td><select name=selprint>
        %STANDARD.01.001.RCPWEB03.03
        </select></td>
    <td class=DataLabel>Copies</td>
    <td><select name=nocopies>
       <option value=" 1">1</option>
       <option value=" 2">2</option>
       <option value=" 3">3</option>
       <option value=" 4">4</option>
       <option value=" 5">5</option>
       <option value=" 6">6</option>
       <option value=" 7">7</option>
       <option value=" 8">8</option>
       <option value=" 9">9</option>
       <option value=" 10">10</option>
       </select></td>     
</tr>
</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=8 align=center><hr width=100%></td></tr>
    <tr><td class=HeadingCell width=14%>&nbsp;Register</td>
    <td class=HeadingCell width=14%>&nbsp;U/R Number</td>
    <td class=HeadingCell width=14%>&nbsp;Invoice Number</td>
    <td class=HeadingCell width=14%>&nbsp;Reference</td>
    <td class=HeadingCell width=10% align=right>&nbsp;Balance</td>
    <td class=HeadingCell width=10% align=right>&nbsp;Amount</td>
    <td class=HeadingCell width=10% align=right>&nbsp;Discount</td>
    <td class=HeadingCell width=8% align=right>&nbsp;Re-Print Inv.</td></tr>
<tr><td><input type=text id=code_rcpde004 name=code_rcpde004 size=5 maxlength=3
         onblur="selRegister();">
    </td>
    <td><input type=text id=display name=display size=12 class=Readonly
                           readonly tabindex=-1>
        <img src="../images/SearchIcon.gif" class=Icon
          onclick="RCPPatAllSearchFrame(rcpde007,patientn,visitinv,
                                         systemcd);">
        <input type=hidden name=visitinv>
        <input type=hidden name=rcpde007>
        <input type=hidden name=patientn>
        <input type=hidden name=systemcd value=0>
    </td>
    <td colspan=2>&nbsp;</td>
</tr>
<tr>
<td><select name=rcpde004 title="Register" class=Mandatory
                onblur="AddPayment();
                        document.AddForm.code_rcpde004.value=
        document.AddForm.rcpde004.options[selectedIndex].value.substring(0,3);">
        <option value=""></option>
        %RCPWEB03.03.310
        </select>
    </td>
</tr>
<tr>
     %RCPWEB03.03.311
</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td align=center>
    <input type=button value=Finish class="button" id=btnAdd name=finishbt
     onclick='tempDisable(this); ProcessPayment();'>
    <input type=button value="Change Payments" class="Bigbutton" name=changebt
     onclick='ChangePayment();'>
    <input type=button value=Cancel class="button" name=cancelbt
     onclick='CancelReceipt2();' >
    </td>
</tr>
<tr><td>&nbsp;</td></tr>
</table>

</form>


<script type="text/javascript">
printflag="%RCPWEB03.03.336";
for (var i=0; i<AddForm.printflg.length; i++) {
  if (AddForm.printflg.options[i].value==printflag){
        AddForm.printflg.selectedIndex=i; }
}
selectprinter="%RCPWEB03.03.337";
for (var i=0; i<AddForm.selprint.length; i++) {
  if (AddForm.selprint.options[i].value==selectprinter){
        AddForm.selprint.selectedIndex=i; }
}
numbercopies="%RCPWEB03.03.338";
for (var i=0; i<AddForm.nocopies.length; i++) {
  if (parseInt(AddForm.nocopies.options[i].value)==parseInt(numbercopies)){
        AddForm.nocopies.selectedIndex=i; }
}

printinv="%RCPWEB03.03.360";
for (var i=0; i<AddForm.printinv.length; i++) {
  if (AddForm.printinv.options[i].value==printinv){
        AddForm.printinv.selectedIndex=i; }
}

printcod="%RCPWEB03.03.361";
for (var i=0; i<AddForm.printcod.length; i++) {
  if (AddForm.printcod.options[i].value==printcod){
        AddForm.printcod.selectedIndex=i; }
}

</script>
