<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script language=javascript src="../js/nhiweb96.js"> </script>
<script language=javascript>
function SubmitHiddenNew(theForm) {
  DFrameClear();
  theForm.target="PopUpFrame1"
  theForm.submit();
}
function validateMandatory (theForm) {
if(!checkDate(theForm.nzsrh006,'Date of Birth')) {
  return false;
}
if(document.search.urnumber.value!="") {
  parent.LinkForm.newurnum.value=document.search.urnumber.value;
  document.search.urnumber.value=document.search.urnumber.value.replace(/ /,"");
  location.href='patweb04.pbl?reportno=3&template=002'  
         + '&oldurnum=' + parent.LinkForm.oldurnum.value
         + '&newurnum=' + parent.LinkForm.newurnum.value
         + '&sesskeys=' + parent.AddForm.sesskeys.value.replace(/ /g,"+")
    return false;
  } 
else { return (
  checkString(theForm.elements["nzsrh004"],"Surname")&&
  checkString(theForm.elements["nzsrh005"],"Given Name")&&
  checkSex(theForm.elements["nzsrh009"],"Sex")&&
  checkAge()
  );
  }
}
function checkSex(theField,s) {
  if (theField[0].checked) {
    alert("Please Specify Sex of Patient");
    return false; }
  else { return true; }
}
function checkAge() {
   if (isWhitespace(document.search.nzsrh006.value)) {
     if (isWhitespace(document.search.nzsrh007.value)) {
       alert("Please Specify Date of Birth or Age of Patient");
       return false;
     }
     else { return true; }
   }
   else { return true; }
}
function UpCase(str){
  str.value=str.value.toUpperCase()
}
function NextPage(ContinuePointer) {
    if(isWhitespace(ContinuePointer)){
       alert("No Records Remaining")
       return;}
    document.search.nzsrh001.value=2
    document.search.nzsrh002.value=ContinuePointer
    document.search.submit()
}
function PatientSelected(NationalNo,LocalNo,LocalStatus) {
//if (LocalStatus=="0") {
  parent.LinkForm.newurnum.value=" "+NationalNo;
  LinkURL='patweb04.pbl?reportno=3&template=002'  
         + '&oldurnum=' + parent.LinkForm.oldurnum.value
         + '&newurnum=' + parent.LinkForm.newurnum.value
  location.href=LinkURL;   
}
//if (LocalStatus=="1") {
//   alert("Patient not on the local system.");
//}
//}
function newRegistration() {
  newreg.updttype.value="N"
  newreg.nextpage.value="7"
  newreg.oldurnum.value=parent.LinkForm.oldurnum.value
  newreg.redirect.value="oprweb01.pbl?reportno=9&template=002"
   + "&sesskeys=" + parent.AddForm.sesskeys.value.replace(/ /g,"+")
   + "&urnumber="
  SubmitHiddenNew(newreg);
//  newreg.submit();
//  DFrameExit();
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
<script type="text/javascript">document.write(self.document.title);</script>
</span>
<div id=PageBodySection style="overflow: auto;">

<form name=newreg method="post" action="patweb04.pbl"
      style="margin:0">
<input type=hidden name=reportno value=03>
<input type=hidden name=template value=002>
<input type=hidden name=oldurnum value="">
<input type=hidden name=updttype value="">
<input type=hidden name=redirect value="">
<input type=hidden name=nextpage value="">
<input type=hidden name=override value="   ">
<input type=hidden name=duplwarn value=" ">
<input type=hidden name=addrwarn value=" ">
<input type=hidden name=updkwarn value=" ">
</form>

 <form name=search method=get action=nhiweb96.pbl style="margin:0" 
  onsubmit='return validateMandatory(this)'>
 <input type=hidden name=reportno value=1>
 <input type=hidden name=template value=13>
 <input type=hidden name=nzsrh001 value=1>
 <input type=hidden name=nzsrh002 value="">
 <input type=hidden name=norecord value=10>

<table align="center" width=100% border=0 cellspacing=1 cellpadding=1 
 bgcolor=#cccccc>

<tr><td align=center colspan=6 class=HeadingCell>
     National Health Index Search</td></tr>
<tr><td class=DataLabel>NHI No<br>
     <input type=text name=urnumber OnChange="UpCase(this)" size=10></td>
 <td class=DataLabel colspan=2>Surname<br>
     <input type=text name=nzsrh004 class=Mandatory
            OnChange="UpCase(this);Ckfeild(this)" size=15></td>
 <td class=DataLabel>Given Name<br>
     <input type=text name=nzsrh005 class=Mandatory
            OnChange="UpCase(this);Ckfeild(this)" size=15></td>
 <td rowspan=2>
     <input type=radio name=nzsrh009 value=" " checked> Unknown <br>
     <input type=radio name=nzsrh009 value="M"> Male <br>
     <input type=radio name=nzsrh009 value="F"> Female<br>
     <input type=radio name=nzsrh009 value="O"> Gender Diverse</td>
 <td align=center valign=middle rowspan=2>

  <input type=button value="Registration" class="button"
      onClick="newRegistration()"><br>
  <input type=submit value=Search class="button"><br>
  <input type=reset value=" Reset " class="button"></td>
</tr><tr>
 <td class=DataLabel>Date of Birth<br>
     <input type="text" size="12" name="nzsrh006" id="nzsrh006"
     onChange="checkDate(this,'Date of Birth')" >
     <img src=../images/DateLookup.gif border=0 hspace=4 align=absmiddle
      onclick="DateLookupFrame(nzsrh006);">
     </td>
 <td class=DataLabel>Age<br>
     <input type=text name=nzsrh007 size=4 ></td>
 <td class=DataLabel>Range<br>
     <select name=nzsrh008 > 
      <option value=1 selected>2 years</option>
      <option value=2>4 years</option>
      <option value=3>6 years</option>
      <option value=4>8 years</option>
      <option value=5>10 years</option>
     </select></td>
 <td class=DataLabel>Search Type<br>
     <select name=nzsrh003>
     <option value=2>Sound-Ex </option>
     <option value=1>Strict Surname</option>
     <option value=3>Direct Match</option>
     <option value=4>Fast Search</option>
     <option value=5>Normal Search</option>
     <option value=6>Wide Search</option>
     </select></td></tr>
</table>
<table border=1 cellspacing=0 style="table-layout: fixed;" width=100%>
<tr><td class=HeadingCell width=100>NHI No</td>
    <td class=HeadingCell>Patient</td>
    <td class=HeadingCell width=50>Sex</td>
    <td class=HeadingCell width=80>D.O.B.</td></tr>
%NHIWEB96.01.012
</table>
<!--</div>
<div id=PageBodySection>-->
<table width=100% bgcolor=#CCCCCC><tr>
  <td align=center>
  <input type=button value="<< Previous" class="button"
   onClick='%NHIWEB96.01.010'>
  <td align=center class=DataField>Records Remaining %NHIWEB96.01.007</td>
  <td align=center colspan=2>
  <input type=button value="Next >>" class="button"
   onclick='%NHIWEB96.01.009'>
</td></tr>
</table>
</form>
</div>
<!--</div>-->

<script language=javascript>
   document.search.nzsrh004.value="%NHIWEB96.01.002";
   document.search.nzsrh005.value="%NHIWEB96.01.003";
   document.search.nzsrh006.value="%NHIWEB96.01.004";
   document.search.nzsrh007.value="%NHIWEB96.01.005";
   for (var i =0 ; i < document.search.nzsrh008.length; i++) {
     SelectNo=parseInt(document.search.nzsrh008.options[i].value)
     ServerNo=%NHIWEB96.01.006 
     if (SelectNo==ServerNo) {
         document.search.nzsrh008.selectedIndex=i } };
   for (var i =0 ; i < document.search.nzsrh003.length; i++) {
     if (document.search.nzsrh003.options[i].value=="%NHIWEB96.01.001") {
         document.search.nzsrh003.selectedIndex=i } };
   for (var i =0 ; i < document.search.nzsrh009.length; i++) {
     if (document.search.nzsrh009[i].value=="%NHIWEB96.01.008") {
         document.search.nzsrh009[i].checked="1" } };
</script>
