<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
 function init() {
   if (document.pat96olv.mehvisfl.value == "1") {
     document.pat96olv.trnsretn.className="Mandatory FutureDate";  //exp return
     document.pat96olv.trnlvtyp.selectedIndex="0";
   }
 }
 function checkLegalStatus() {
   if (document.pat96olv.mehvisfl.value == "0") {
     return;
   }
   legstat=document.pat96olv.mehlegst.value.substr(3,1)
   leavtyp=document.pat96olv.trnlvtyp.value.substr(3,1)
   if (leavtyp=="H" && legstat!="I") {
     alert("Invalid legal status for type of leave.")
   }
   if (leavtyp=="A") {
     document.pat96olv.trnsretn.className="FutureDate";
   } else {
     document.pat96olv.trnsretn.className="Mandatory FutureDate"; }
 }
 function SubmitTransfer() {
   if (validateMandatory(pat96olv)) {
     leavtyp=document.pat96olv.trnlvtyp.value.substr(3,1)
     legstat=document.pat96olv.mehlegst.value.substr(3,1)
     if (document.pat96olv.mehvisfl.value == "1") {
       if (leavtyp=="H"||leavtyp=="T") {
         document.pat96olv.redirect.value="mehweb01.pbl?reportno=05&template=001"
            + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
            + "&admissno=" + document.PatientLinks.admissno.value
            + "&trandate=" + document.pat96olv.trandate.value
            + "&trantime=" + document.pat96olv.trantime.value
       }
       if (leavtyp=="H" && legstat!="I") {
         alert("Invalid legal status for type of leave.")
         return;
       }
       if (leavtyp=="T" && legstat!="S" && legstat!="X") {
         alert("Invalid legal status for type of leave.")
         return;
       }
     } else {
       if (leavtyp=="T" || leavtyp=="A" || leavtyp=="H") {
         alert("Invalid status for type of leave.")
         return;
       }
     }
     SubmitHidden(pat96olv);
   }
 }
function FilterLeaveType() {
 if(document.pat96olv.mh_visit.value == "1") {
   filterCatCodeList(pat96olv.trnlvtyp,"6","G","1");  // MH Visit
 } else {
   filterCatCodeList(pat96olv.trnlvtyp,"6","M","1");  // Non MH Visit
 }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);FilterLeaveType();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.03.003";
PatientVIS="%PATWEB96.03.081";
PatientNAM="%PATWEB96.03.002";
PatientSTA="%PATWEB96.03.086.078";
PatientALT="%PATWEB96.03.084";
PatientSEX="%PATWEB96.03.019";
PatientDOB="%PATWEB96.03.020";
PatientAGE="%PATWEB96.03.021";
PatientLOC="%PATWEB96.03.083";
PatientPRI="%PATWEB96.03.086.066.1";
PatientUNT="%PATWEB96.03.066.0";
DoctorCOD="%PATWEB96.03.082.003";
DoctorNAM="%PATWEB96.03.082.002";
PatientAID="%PATWEB96.03.086.090";
PatientIND="%PATWEB96.03.086.091";
PatientCUR="%PATWEB96.03.086.092";
PatientCLC="%PATWEB96.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.03.086.094";
PatientCDM="%PATWEB96.03.086.095";
PatientVDH="%PATWEB96.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
 <form name=pat96olv id=pat96olv %PATWEB96.03.201.001
  <input type=hidden name=urnumber id=urnumber value="%PATWEB96.03.003">
  <input type=hidden name=admissno id=admissno value="%PATWEB96.03.081">
  <input type=hidden name=trnleave id=trnleave value="1">
  <input type=hidden name=redirect id=redirect value="%PATWEB96.03.001.patweb96.03.004">
  <input type=hidden name=nextpage id=nextpage value="7">
  <input type=hidden name=formactn id=formactn value="OnLeave">
  <input type=hidden name=mehvisfl id=mehvisfl value="%PATWEB96.03.219">
  <input type=hidden name=mehlegst id=mehlegst value="%PATWEB96.03.085.005.3">
  <input type=hidden name=mh_visit id=mh_visit value="%PATWEB96.03.263">

  <table border=0 width=100% cellspacing=1 cellpadding=0 >
   <tr><td class=HeadingCell align=center colspan=4 width=100%>
           Bed Transfer &amp; Leave Maintenance</td></tr>

   <tr><td class=HeadingCell align=center colspan=2>Current Status</td>
       <td class=HeadingCell align=center colspan=2>Transfer Patient On Leave
           </td></tr>

   <tr><td class=DataLabel>Ward / Bed</td>
       <td><input type=text size=25 readonly class=ReadOnly tabindex=-1
                  value="%PATWEB96.03.105.0">
           <input type=text size=15 readonly class=ReadOnly tabindex=-1
                  value="%PATWEB96.03.106"></td>
       <td class=DataLabel>On-Leave Date</td>
       <td><select name=trandate id=trandate class=Mandatory title="On-Leave date" tabindex=1>
            %PATWEB96.03.202
           </select></td><tr>

   <tr><td class=DataLabel>Transfer In Date &amp; Time</td>
       <td><input type=text size=11 readonly class=ReadOnly tabindex=-1
                  value="%PATWEB96.03.204" >
           <input type=text size=5 readonly class=ReadOnly tabindex=-1
                  value="%PATWEB96.03.205"></td>
      <td class=DataLabel>On-Leave Time</td>
      <td><input type=text size=8 name=trantime id=trantime class=Mandatory
           tabindex=2 title="On-Leave Time" value="%STANDARD.01.016">
            <img src="../images/DateTimeStamp.gif" class=Icon
                 onclick="SetCurrentDateTime(null,trantime);">
            <img src="../images/TimeLookup.gif" class=Icon
                 onclick="TimeLookupFrame(trantime);"></td></tr>

   <tr><td class=DataLabel>Attending Doctor</td>
       <td><input type=text size=35 readonly class=ReadOnly tabindex=-1
                  value="%PATWEB96.03.108.002">
       <td class=DataLabel>Type of Leave</td>
       <td><select name=trnlvtyp id=trnlvtyp tabindex=3
                   onchange="checkLegalStatus();">
            <option> </option>
             %PATWEB96.03.206.4
           </select></td></tr>

   <tr><td class=DataLabel>%STANDARD.01.017.A </td>
        <td><input type=text name=specialt id=specialt size=30 tabindex=-1
             readonly class=ReadOnly value="%PATWEB96.03.111.0"></td>
        <td class=DataLabel>Expected Return Date &amp; Time</td>
        <td><input type=text size=12 name=trnsretn id=trnsretn
             class="FutureDate" title="Expected Return Date" tabindex=4>
            <img src="../images/DateLookup.gif" class=Icon
             onclick="DateLookupFrame(trnsretn);">
            <input type=text size=8 name=trnsrett id=trnsrett
             title="Expected Return Time" value="" tabindex=5>
            <img src="../images/TimeLookup.gif" class=Icon
             onclick="TimeLookupFrame(trnsrett);"></td></tr>

   <tr><td class=DataLabel>Care Type</td>
       <td><input type=text name=trnacare id=trnacare size=30
            readonly class=ReadOnly value="%PATWEB96.03.113.0" tabindex=-1></td>
       <td align=center colspan=2>
           <input type=button class="button" value="Update" tabindex=20
                  onclick="SubmitTransfer(this.form,'OnLeave');">
           <input type=button value=Cancel class="button" tabindex=21
                  onclick="PatientLinkTo('patweb96.pbl',3,4,0);"></td></tr>

   <tr><td class=DataLabel>Unit</td>
       <td><input type=text name=chngunit id=chngunit size=30
            readonly class=ReadOnly value="%PATWEB96.03.124.0" tabindex=-1></td>
       <td colspan=2>&nbsp;</td></tr>

   <tr><td class=DataLabel> %STANDARD.01.017.CL</td>
       <td><input type=text name=traclaim id=traclaim tabindex=-1
                  value="%PATWEB96.03.126.0"></td>
       <td colspan=2>&nbsp;</td></tr>

   <tr><td class=DataLabel>Health Fund</td>
       <td><input type=hidden name="tranfund" id="tranfund"
            value="%PATWEB96.03.114.0">
           <input type=text size=35 name="funddesc" id="funddesc" maxlength="30"
            tabindex=-1 value="%PATWEB96.03.114.1"></td>
       <td colspan=2>&nbsp;</td></tr>

   <tr><td>Table</td>
       <td><input type=hidden name="trantabl" id="trantabl"
            value="%PATWEB96.03.115.0">
           <input type="text" size=20 maxlength=30 name="tabldesc" id="tabldesc"
            tabindex=-1 value="%PATWEB96.03.115.1"></td>
       <td colspan=2>&nbsp;</td></tr>
  </table>
 </form>
</div>

<form name=PatientLinks id=PatientLinks method=get>
 <input type=hidden name=reportno id=reportno value=1>
 <input type=hidden name=template id=template value=004>
 <input type=hidden name=urnumber id=urnumber value="%PATWEB96.03.003">
 <input type=hidden name=admissno id=admissno value="%PATWEB96.03.081">
 <input type=hidden name=MenuType id=MenuType value="%PATWEB96.03.088">
 <input type=hidden name=alert001 id=alert001 value="">
 <input type=hidden name=mehpatnt id=mehpatnt value="%PATWEB96.03.219">
 <input type=hidden name=caretype value="%PATWEB96.03.113.3">
</form>

<script type="text/javascript">
if (document.PatientLinks.mehpatnt.value == "1") {
  document.pat96olv.redirect.value="%PATWEB96.03.001.mehweb01.09.001";
}
function init(){
 if(PatientLinks.caretype.value.substr(71,1)!=" "){
       location.href="patweb96.pbl?reportno=03&template=022"
             + "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+")
             + "&admissno=" + PatientLinks.admissno.value;
 }
}
</script>
