<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script language=javascript src="../js/nhiweb96.js"> </script>
<script language=javascript>
function validateMandatory (theForm) {
if(!checkDate(theForm.nzsrh006,'Date of Birth')) {
  return false;
}
if(document.search.urnumber.value!="") {
  document.search.urnumber.value=document.search.urnumber.value.replace(/ /,"");
  location.href="nhiweb99.pbl?reportno=1&template=003&urnumber=" +
                    document.search.urnumber.value;
    return false;
  } 
else { return (
  checkString(theForm.elements["nzsrh004"],"Surname")&&
  checkString(theForm.elements["nzsrh005"],"Given Name")&&
  checkSex(theForm.elements["nzsrh009"],"Sex")&&
  checkAge()
  );
  }
}
function checkSex(theField,s) {
  if (theField[0].checked) {
    alert("Please Specify Sex of Patient");
    return false; }
  else { return true; }
}
function checkAge() {
   if (isWhitespace(document.search.nzsrh006.value)) {
     if (isWhitespace(document.search.nzsrh007.value)) {
       alert("Please Specify Date of Birth or Age of Patient");
       return false;
     }
     else { return true; }
   }
   else { return true; }
}
function UpCase(str){
  str.value=str.value.toUpperCase()
}
function NextPage(ContinuePointer) {
    if(isWhitespace(ContinuePointer)){
       alert("No Records Remaining")
       return;}
    document.search.nzsrh001.value=2
    document.search.nzsrh002.value=ContinuePointer
    document.search.submit()
}
function PatientSelected(NationalNo,LocalNo,LocalStatus) {
if (LocalStatus=="0") {
  parent.LinkForm.urnumber.value=LocalNo;
  parent.LinkForm.submit()
  DFrameExit()
}
if (LocalStatus=="1") {
   alert("Patient not on the local system.");
}
}
function newRegistration() {
  document.newreg.srchsnam.value=document.search.nzsrh004.value;
  document.newreg.srchgnam.value=document.search.nzsrh005.value;
  document.newreg.srchpage.value=document.search.nzsrh007.value;
  document.newreg.srchpdob.value=document.search.nzsrh006.value;
  for (var i =0 ; i < document.search.nzsrh009.length; i++) {
    if (document.search.nzsrh009[i].checked=="1" ) {
      document.newreg.srchpsex.value=document.search.nzsrh009[i].value;
    }
  }
  document.newreg.submit();
}
</script>
%START.OF.PAGE
<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="SearchFrameExit();">
<script type="text/javascript">document.write(self.document.title);</script>
</span>
<div style="background-color:#cccccc;height:100%">

<form name=newreg method=post action=nhiweb99.pbl style="margin:0">
<input type=hidden name=reportno value=01>
<input type=hidden name=template value=008>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
</form>

 <form name=search method=get action=nhiweb96.pbl target=SearchResults
  onsubmit='return validateMandatory(this)' style="margin:0">
 <input type=hidden name=reportno value=1>
 <input type=hidden name=template value=5>
 <input type=hidden name=nzsrh001 value=1>
 <input type=hidden name=nzsrh002 value="">
 <input type=hidden name=norecord value=10>
 <input type=hidden name=patfname value=20>
 <input type=hidden name=admissno value=10>


<table align="center" width=100% border=0 cellspacing=1 cellpadding=1 
 bgcolor=#cccccc >
<tr><td align=center colspan=6 class=HeadingCell>
     National Health Index Search</td></tr>
<tr><td class=DataLabel>NHI No<br>
     <input type=text name=urnumber OnChange="UpCase(this)" size=10></td>
 <td class=DataLabel colspan=2>Surname<br>
     <input type=text name=nzsrh004 class=Mandatory
            OnChange="UpCase(this);Ckfeild(this)" size=15></td>
 <td class=DataLabel>Given Name<br>
     <input type=text name=nzsrh005 class=Mandatory
            OnChange="UpCase(this);Ckfeild(this)" size=15></td>
 <td rowspan=2>
     <input type=radio name=nzsrh009 value=" " checked> Unknown <br>
     <input type=radio name=nzsrh009 value="M"> Male <br>
     <input type=radio name=nzsrh009 value="F"> Female<br>
     <input type=radio name=nzsrh009 value="O"> Gender Diverse</td>
 <td align=center valign=middle rowspan=2>

<!--
  <input type=button value="Registration" class="button"
      onClick="newRegistration()"><br>
-->
  <input type=submit value=Search class="button"><br>
  <input type=reset value=" Reset " class="button"></td>
</tr><tr>
 <td class=DataLabel>Date of Birth<br>
     <input type="text" size="12" name="nzsrh006" id="nzsrh006"
     onChange="checkDate(this,'Date of Birth')" >
     <img src=../images/DateLookup.gif border=0 hspace=4 align=absmiddle
      onclick="DateLookupFrame(nzsrh006);">
     </td>
 <td class=DataLabel>Age<br>
     <input type=text name=nzsrh007 size=4 ></td>
 <td class=DataLabel>Range<br>
     <select name=nzsrh008 > 
      <option value=1 selected>2 years</option>
      <option value=2>4 years</option>
      <option value=3>6 years</option>
      <option value=4>8 years</option>
      <option value=5>10 years</option>
     </select></td>
 <td class=DataLabel>Search Type<br>
     <select name=nzsrh003>
     <option value=2>Sound-Ex </option>
     <option value=1>Strict Surname</option>
     <option value=3>Direct Match</option>
     <option value=4>Fast Search</option>
     <option value=5>Normal Search</option>
     <option value=6>Wide Search</option>
     </select>
 </td>
</tr>
</table>
</form>
</div>
<script language=javascript>
   document.search.nzsrh004.value="%NHIWEB96.01.002";
   document.search.nzsrh005.value="%NHIWEB96.01.003";
   document.search.nzsrh006.value="%NHIWEB96.01.004";
   document.search.nzsrh007.value="%NHIWEB96.01.005";
   for (var i =0 ; i < document.search.nzsrh008.length; i++) {
     SelectNo=parseInt(document.search.nzsrh008.options[i].value)
     ServerNo=%NHIWEB96.01.006 
     if (SelectNo==ServerNo) {
         document.search.nzsrh008.selectedIndex=i } };
   for (var i =0 ; i < document.search.nzsrh003.length; i++) {
     if (document.search.nzsrh003.options[i].value=="%NHIWEB96.01.001") {
         document.search.nzsrh003.selectedIndex=i } };
   for (var i =0 ; i < document.search.nzsrh009.length; i++) {
     if (document.search.nzsrh009[i].value=="%NHIWEB96.01.008") {
         document.search.nzsrh009[i].checked="1" } };
</script>
