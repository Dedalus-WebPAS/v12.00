<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="kids">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/ReportStandard.js"></script>
<script type="text/javascript">
function ProcessReport(update_print) {
  document.ReportForm.keystr10.value=update_print;
  document.ReportForm.keystr03.value=
  document.ReportForm.d_keystr03.value.substr(0,3); 
  document.ReportForm.keystr05.value=document.ReportForm.keystr03.value;
  if (document.ReportForm.keystr02.value==document.ReportForm.keystr04.value) {
    alert("The From an To Consultants must not be the same.");
    return;
  }
  if (validateMandatory(ReportForm)) {
    if(document.ReportForm.disp_keystr06.checked==false) {
      document.ReportForm.keystr06.value="N";
    } else {
      document.ReportForm.keystr06.value="Y";
    }
    if(document.ReportForm.disp_keystr07.checked==false) {
      document.ReportForm.keystr07.value="N";
    } else {
      document.ReportForm.keystr07.value="Y";
    }
    if(document.ReportForm.disp_keystr08.checked==false) {
      document.ReportForm.keystr08.value="N";
    } else {
      document.ReportForm.keystr08.value="Y";
    }
    if(document.ReportForm.disp_keystr09.checked==false) {
      document.ReportForm.keystr09.value="N";
    } else {
      document.ReportForm.keystr09.value="Y";
    }
    if(document.ReportForm.keystr06.value=="N" &&
      document.ReportForm.keystr07.value=="N" &&
      document.ReportForm.keystr08.value=="N") {
      alert("Please select at least one type of inclusion.");
      return;
    }
    SubmitReport(ReportForm) 
  }
}
function UpdateUnit(){
//if(document.ReportForm.d_keystr03.selectedIndex==0) {
for (var i =0 ; i < document.ReportForm.d_keystr03.length; i++) {
if(trim(document.ReportForm.unit.value.substr(0,3))==
   trim(document.ReportForm.d_keystr03.options[i].value.substr(0,3))) {
       document.ReportForm.d_keystr03.selectedIndex=i } };
// }
}

function valUnit() {
  validateCode(31,document.ReportForm.keystr02,
               document.ReportForm.name_keystr02)
  document.ReportForm.unit.value=document.ReportForm.d_keystr03.value
  selectOptions("30",document.ReportForm.keystr02,
                document.ReportForm.d_keystr03);
  UpdateUnit();
  if(document.ReportForm.d_keystr03.selectedIndex==0) {
    document.ReportForm.d_keystr03.selectedIndex=1
    document.ReportForm.unit.value=document.ReportForm.d_keystr03.value
  }
  valToDoc(document.ReportForm.keystr04,document.ReportForm.d_keystr03,
           document.ReportForm.name_keystr04);
}

function valUnitTo() {
  validateCode(31,document.ReportForm.keystr02,
               document.ReportForm.name_keystr02);
}

function valToDoc(Doctor,Unit,DoctorName) {
  if (isWhitespace(Doctor.value)) return;;
  if (isWhitespace(Unit.value)) return;;
  var serverURL   = "../cgi-bin/patweb80.pbl?reportno=29" + 
                    "&valdfund=" + Doctor.value.replace(/ /g,"+") +
                    "&valdtabl=" + Unit.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|")
    DoctorName.value=trim(ReturnValue[0])
  } else {
    Doctor.select();
    return false;
  }
}
</script>
</head>
<body onload=PageLoad(event);ReportLoad();document.ReportForm.schddate.focus();>
%START.OF.PAGE
<form name=ReportForm method=post action=rshweb02.pbl>
<input type=hidden name=reportno value=4>
<input type=hidden name=template value=001>
<input type=hidden name=updttype value="A">
<input type=hidden name=setdfprg value="IBAWAT06">
<input type=hidden name=setdfrep value="01">
<input type=hidden name=schdpgid value="IBAWAT06">    
<input type=hidden name=schddesc value="Waiting List Bulk Transfer Report">    
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="rshweb02.pbl?reportno=1&template=1">
<input type=hidden name=dummy value="">
<input type=hidden name=unit value="">
<input type=hidden name=unitto value="">
<input type=hidden name=keystr01 value="1">

<table width=100% align=center border=0 cellspacing=0>
<tr><td class=HeadingCell align=center colspan=2>Patient Review Report</td></tr>
</table>

<table width=80% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td class=DataLabel width=25%>Schedule Date</td>
    <td class=DataLabel>
    <input type=text name=schddate size=12 title="Schedule Date"
    value="%STANDARD.01.015"
    onblur="checkDate(this,'Schedule Date');">
    <img notab src="../images/DateLookup.gif" class="Icon" 
     alt="Show Calendar" date="document.ReportForm.schddate">
    Time
    <input type=text name=schdtime size=12 title="Schedule Time"
    value="%STANDARD.01.016">
    <img notab src="../images/DateTimeStamp.gif" class="Icon"
     alt="Current" date="document.ReportForm.schddate" time="document.ReportForm.schdtime">
    <img notab src="../images/TimeLookup.gif" class="Icon" 
     alt="Time Select" time="document.ReportForm.schdtime">
    </td></tr>

<tr><td class=DataLabel>Printer</td>
    <td><select name=schdprnt title="Printer" class=Mandatory>
        <option></option>
        %STANDARD.01.001.IBAWAT20.01
        </select>
    </td></tr>
 
<tr><td class=DataLabel>Number of Copies</td>
    <td><select name=schdcopy title='Number of Copies' class=Mandatory>
        </select>
    </td></tr>
 
<tr><td class=DataLabel>Re-schedule Type</td> 
    <td class=DataLabel colspan=3> 
    <select name=schdrdat title="Schedule Type" onchange=SetReportDates()> 
    <option></option> 
    </select> 
    </td></tr> 
 
<tr><td class=DataLabel>Re-schedule Until Date</td> 
    <td class=DataLabel colspan=3> 
    <input type=text name=schdrend size=12 
     onblur="checkDate(this,'Re-schedule Until Date');"> 
    <img notab src="../images/DateTimeStamp.gif" class="Icon"
     alt="Current" date="document.ReportForm.schdrend">
    <img notab src="../images/DateLookup.gif" class="Icon" 
     alt="Show Calendar" date="document.ReportForm.schdrend">
    </td></tr>

<tr><td colspan=2 align=center><hr width=80%></td></tr>

<tr><td>Consultant From</td>
    <td class=DataField colspan=3>
    <input type=text name=keystr02 size=6 maxlength=8 title="Consultant From" 
     class=Mandatory tabindex=1 onBlur="UpCase(this);valUnit();">
    <input type=text name=name_keystr02 size=20 maxlength=30
     title="Consultant Name" class=Readonly readonly notab>
    <img src=../images/SearchIcon.gif class=Icon
    onclick="WaitConSearchFrame(document.ReportForm.keystr02,
                                document.ReportForm.name_keystr02,
                                document.ReportForm.d_keystr03);"></td></tr>

<tr><td class=DataLabel>Unit</td>
    <input type=hidden name=keystr03 value="">
    <td class=DataField>
    <select name=d_keystr03 title="Unit" tabindex=2 class="Mandatory selectBig">
    <option></option>
    %WATWEB01.02.114.2
    </select></td></tr>

<tr><td>Consultant To</td>
    <td class=DataField colspan=3>
    <input type=text name=keystr04 size=6 maxlength=8 title="Consultant To" 
     class=Mandatory tabindex=3 
   onBlur="UpCase(this);
   validateCode(3,document.ReportForm.keystr04,
                document.ReportForm.name_keystr04);
   valToDoc(document.ReportForm.keystr04,document.ReportForm.keystr03,
            document.ReportForm.name_keystr04);
   valUnitTo();">
    <input type=text name=name_keystr04 size=20 maxlength=30
     title="Consultant Name" class=Readonly readonly notab>
    <img src=../images/SearchIcon.gif class=Icon
    onclick="WaitConSearchFrame(document.ReportForm.keystr04,
                                document.ReportForm.name_keystr04,
                                document.ReportForm.dummy,valUnitTo);">
    </td></tr>

    <input type=hidden name=keystr05 value="">

<tr><td class=DataLabel>Include Unscheduled Patients</td>
    <td><input type=checkbox name=disp_keystr06 title="Update Records"
         value="Y" tabindex=4></td>
    </tr>

<tr><td class=DataLabel>Include Scheduled Patients</td>
    <td><input type=checkbox name=disp_keystr07 title="Update Records"
         value="Y" tabindex=5></td>
    </tr>

<tr><td class=DataLabel>Include Pre-Admitted Patients</td>
    <td><input type=checkbox name=disp_keystr08 title="Update Records"
         value="Y" tabindex=6></td>
    </tr>

<tr><td class=DataLabel>Create Export File</td>
    <td><input type=checkbox name=disp_keystr09 title="Update Records"
         value="Y" tabindex=7></td>
    </tr>
<!--
<tr><td class=DataLabel>Update Records</td>
    <td><input type=checkbox name=disp_keystr10 title="Update Records"
         value="Y" tabindex=7></td>
    </tr>
-->

    <input type=hidden name=keystr06 value="">
    <input type=hidden name=keystr07 value="">
    <input type=hidden name=keystr08 value="">
    <input type=hidden name=keystr09 value="">
    <input type=hidden name=keystr10 value=" ">
    <input type=hidden name=keystr11 value="Y">
    <input type=hidden name=keystr12 value="">

<tr><td align=center colspan=2><br>
    <input type=button value="Print Report Only" class="Bigbutton" tabindex=8
     onclick='ProcessReport("N");'>
    <input type=button value="Update Records" class="Bigbutton" tabindex=8
     onclick='ProcessReport("Y");'>
    <input type=button value=Cancel class="button" tabindex=9
     onclick='location.href="../lookups/blank.html"' >
    </td></tr>
</table>
</form>
