<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="sjog-standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>
<script type="text/javascript" src="../js/patweb8907001.js"></script>
<script type="text/javascript" src="../js/MentalHealthClinicId.js"></script>
<script type="text/javascript" src="../js/patweb89.js"></script>
<script type="text/javascript">
function SubmitAdm() {
  patntdob = UpdateForm.patntdob;
  patntdbt = UpdateForm.patntdbt;
  strtDate = UpdateForm.mehvs012;
  strtTime = UpdateForm.mehvs051;
  currdate = UpdateForm.currdate;
  currtime = UpdateForm.currtime;

  SetCurrentDateTimeNoFocus(currdate,currtime);

  if (!ChkDateTime(strtDate,strtTime,currdate,currtime)) {
    alert("Start Date/Time must be equal or before Current Date/Time.");
    UpdateForm.mehvs012.select();
    return;
  }

  if (!ChkDateTime(patntdob,patntdbt,strtDate,strtTime)) {
    alert("Start Date/Time must be equal or after Patient's Date of Birth.");
    UpdateForm.mehvs012.select();
    return;
  }

  if (!isWhitespace(document.UpdateForm.hrefuniq.value)){
   document.UpdateForm.redirect.value="mehweb01.pbl?reportno=09&template=003"+
           "&urnumber=" + document.UpdateForm.urnumber.value +
           "&admissno=" + document.UpdateForm.admissno.value +
           "&uniqnumb=" + document.UpdateForm.hrefuniq.value
  }
  SetCookie("AdmScreen","1");
  MandatoryOk=validateMandatory(document.UpdateForm)
  if (MandatoryOk) {
    SubmitHidden(document.UpdateForm);
  }
}
function defaultReceival() {
  if (document.UpdateForm.d_mehvs049.checked==true) {
    document.UpdateForm.mehvs014.className="Readonly PastDate";
    document.UpdateForm.mehvs041.className="Readonly";
    document.UpdateForm.mehvs014.readOnly=true;
    document.UpdateForm.mehvs041.readOnly=true;
  } else {
    document.UpdateForm.mehvs014.className="PastDate";
    document.UpdateForm.mehvs041.className="";
    document.UpdateForm.mehvs014.readOnly=false;
    document.UpdateForm.mehvs041.readOnly=false;
  }
}
function mandatoryReceival() {
  if (document.UpdateForm.d_mehvs049.checked==true) {
    document.UpdateForm.mehvs014.className="Readonly PastDate";
    document.UpdateForm.mehvs041.className="Readonly"; 
    document.UpdateForm.mehvs014.readOnly=true;
    document.UpdateForm.mehvs041.readOnly=true;
    document.UpdateForm.mehvs052.className = "PastDate Mandatory";
    document.UpdateForm.mehvs053.className = "Mandatory";
  } else {
    document.UpdateForm.mehvs014.className="PastDate";
    document.UpdateForm.mehvs041.className="";
    document.UpdateForm.mehvs014.readOnly=false;
    document.UpdateForm.mehvs041.readOnly=false;
    document.UpdateForm.mehvs052.className = "PastDate";
    document.UpdateForm.mehvs053.className = "";
  }
}
function Assignmehvs047() {
  if (document.UpdateForm.d_mehvs049.checked==true) {
    document.UpdateForm.mehvs049.value="1";
  } else {
     document.UpdateForm.mehvs049.value=" ";
  }
}
function CancelLink() {
  if (isWhitespace(document.UpdateForm.hrefuniq.value)){
    PatientLinkTo('patweb98.pbl',1,1,0);
  } else {
    var linkURL="mehweb01.pbl?reportno=09&template=003"+
             "&urnumber=" + document.UpdateForm.urnumber.value +
             "&admissno=" + document.UpdateForm.admissno.value +
             "&uniqnumb=" + document.UpdateForm.hrefuniq.value

    location.href=linkURL;
  }
}
function SetFields1() {
  if (isWhitespace(document.UpdateForm.mehvs007.value)) {
    return;
  }
  var OldSuburb=trim("%PATWEB89.07.308")
  if (document.UpdateForm.mehvs007.value!=OldSuburb) {
    suburb = document.UpdateForm.mehvs007;
    state = document.UpdateForm.mehvs008;
    postcode = document.UpdateForm.mehvs009;
    LookupPostCode(document.UpdateForm.mehvs007.value);
  }
}
</script>

</head>
%START.OF.PAGE
<body onload="PageLoad(event);InitPostCodes();
                         SetMentalHealthClinicId(document.UpdateForm.mehvs045,
                                         document.UpdateForm.n_mehvs045.value,
                                         document.UpdateForm.outpsite.value);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.07.003";
PatientVIS="%PATWEB89.07.081";
PatientNAM="%PATWEB89.07.002";
PatientSTA="%PATWEB89.07.086.078";
PatientALT="%PATWEB89.07.084";
PatientSEX="%PATWEB89.07.019";
PatientDOB="%PATWEB89.07.020";
PatientAGE="%PATWEB89.07.021";
PatientLOC="%PATWEB89.07.083";
PatientPRI="%PATWEB89.07.086.066.1";
PatientUNT="%PATWEB89.07.066.0";
DoctorCOD="%PATWEB89.07.082.003";
DoctorNAM="%PATWEB89.07.082.002";
PatientAID="%PATWEB89.07.086.090";
PatientIND="%PATWEB89.07.086.091";
PatientCUR="%PATWEB89.07.086.092";
PatientCLC="%PATWEB89.07.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.07.086.094";
PatientCDM="%PATWEB89.07.086.095";
PatientVDH="%PATWEB89.07.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<form name=UpdateForm id=UpdateForm action="patweb89.pbl" method=post>
<input type=hidden name=urnumber id=urnumber value="%PATWEB89.07.003">
<input type=hidden name=admissno id=admissno value="%PATWEB89.07.101">
<input type=hidden name=updatety id=updatety value="4">
<input type=hidden name=reportno id=reportno value="7">
<input type=hidden name=nextpage id=nextpage value="1">
<input type=hidden name=redirect id=redirect>
<input type=hidden name=outpsite id=outpsite value="%PATWEB89.07.493">
<input type=hidden name=admndate id=admndate value="%PATWEB89.07.102">
<input type=hidden name=admntime id=admntime value="%PATWEB89.07.103">
<input type=hidden name=hrefuniq id=hrefuniq value="%PATWEB89.07.499.056">
<input type=hidden name=mehvs049 id=mehvs049 value="%PATWEB89.07.351">
<input type=hidden name=clinrefr id=clinrefr value="%PATWEB89.07.231.1">
<input type=hidden name=updtmhhl id=updtmhhl value="1">
<input type=hidden name=orgntype id=orgntype value="A">
<input type=hidden name=dummy    id=dummy>
<input type=hidden name=patntdob id=patntdob value="%PATWEB89.07.020">
<input type=hidden name=patntdbt id=patntdbt value="00:00:00">
<input type=hidden name=currdate id=currdate>
<input type=hidden name=currtime id=currtime>
<input type=hidden name=n_mehvs045 id=n_mehvs045 value="%PATWEB89.07.499.024">
<input type=hidden name=CAT_rm   id=CAT_rm value="rm">

<table border=0 width=100% cellspacing=1 cellpadding=1>
<tr><td class=HeadingCell align=center colspan=4>
    Mental Health Admission Details </tr>
<tr><td>
    <table width=100% border=0 class=TableBody cellpadding=0 cellspacing=0>

    <tr>
      <td class=DataLabel>
        Received Under MH Act?
      </td>
      <td>
        <input type=checkbox name=d_mehvs049 id=d_mehvs049 tabindex=1 
         onclick="mandatoryReceival();">
      </td>
          <td class=DataLabel>
            Referral Date
          </td>
          <td class=DataLabel>
            <input type="text" size="12" name="mehvs012" id="mehvs012" title="Referral Date"
             value="%PATWEB89.07.313" class="Mandatory PastDate"
             onblur="checkDate(this,'Referral Date')" tabindex=20>
            <img src="../images/DateLookup.gif" class=Icon
             onclick='DateLookupFrame(mehvs012);'
             onfocus='DisableIcon(mehvs012);'>
          Time
        <input type=text name=mehvs051 id=mehvs051 size=8 class="Mandatory"
          value="%PATWEB89.07.353" title="Referral Time" tabindex=21>
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(mehvs012,mehvs051);"
         onfocus="DisableIconTime(mehvs051);" tabindex=-1>
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick='TimeLookupFrame(mehvs051);'
        onfocus='DisableIconTime(mehvs051);' tabindex=-1>
          </td>

    </tr>

    <tr><td class=DataLabel>Clinician Referring Under MH Act</td>
          <td class=DataLabel>
            <a href='javascript:HCPViewFrame("%PATWEB89.07.231.1")' tabindex=2>
            %PATWEB89.07.231.0
            </a>
          </td>
      <td class=DataLabel>Receival Date</td>
        <td class=DataLabel>
        <input type="text" size="12" name="mehvs014" id="mehvs014" title="Receival Date"
         value="%PATWEB89.07.315" class="PastDate"
         onblur="checkDate(this,'Receival Date');checkAdm72(this);" 
         tabindex=22>
        <img src="../images/DateLookup.gif" class=Icon
         onclick='DateLookupFrame(mehvs014);'
         onfocus='DisableIcon(mehvs014);'>
          Time
        <input type=text name=mehvs041 id=mehvs041 size=8
          value="%PATWEB89.07.343" title="Receival Time" tabindex=23
          onblur="checkTime(this,this.title);checkAdm72(this);">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(mehvs014,mehvs041);"
         onfocus="DisableIconTime(mehvs041)" tabindex=-1>
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick='TimeLookupFrame(mehvs041);'
        onfocus='DisableIconTime(mehvs041);'
        tabindex=-1>
          </td>
    </tr>
    <tr>
        <td class=DataLabel>Clinician Referring Under MH Act (Role)</td>
        <td><select name=mehvs050 id=mehvs050 tabindex=3 
             title="Clinician Referring Under MH Act (Role)" class=SelectBig>
            <option> </option>
            </select>
        </td>
          <td class=DataLabel>
            Admit MH Act
          </td>
          <td class=DataLabel>
            <input type="text" size="12" name="mehvs052" id="mehvs052" 
             title="Admit MH Act Date"
             value="%PATWEB89.07.354" class="PastDate"
             onblur="checkDate(this,'Admit MH Act Date');checkAdmAct(this);" 
             tabindex=24>
            <img src="../images/DateLookup.gif" class=Icon
             onclick='DateLookupFrame(mehvs052);'
                             onfocus='DisableIcon(mehvs052);'>
          Time
        <input type=text name=mehvs053 id=mehvs053 size=8
          value="%PATWEB89.07.355" title="Admit MH Act Time" tabindex=25
          onblur="checkTime(this,this.title);checkAdmAct(this);">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(mehvs052,mehvs053);"
         onfocus="DisableIconTime(mehvs053)" tabindex=-1>
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick='TimeLookupFrame(mehvs053);'
        onfocus='DisableIconTime(mehvs053);' tabindex=-1>
          </td>

    </tr>

    <tr>
        <td class=DataLabel>Source of Referral to Psychiatric Care</td>
        <td><select name=mehvs028 id=mehvs028 tabindex=4 class="Mandatory SelectBig" 
             title="Source of Referral to Psychiatric Care">
            <option> </option>
               %PATWEB89.07.329.2
            </select>
        </td>
        <td class=DataLabel>Planned Discharge Date</td>
        <td class=DataLabel>
     <input type="text" size="12" name="mehvs042" id="mehvs042" title="Planned Discharge Date"
         value="%PATWEB89.07.344" tabindex=25 class=FutureDate
         onblur="checkDate(this,'Planned Discharge Date');checkPlnDis(this);">
        <img src="../images/DateLookup.gif" class=Icon
         onclick='DateLookupFrame(mehvs042);'
         onfocus='DisableIcon(mehvs042);'>
          Time
        <input type=text name=mehvs043 id=mehvs043 size=8 tabindex=26
          value="%PATWEB89.07.345" title="Planned Discharge Time"
          onblur="checkTime(this,this.title);checkPlnDis(this);">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(mehvs042,mehvs043);"
         onfocus="DisableIconTime(mehvs043)" tabindex=-1>
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick='TimeLookupFrame(mehvs043);'
        onfocus='DisableIconTime(mehvs043);' tabindex=-1>
          </td>

    </tr>
    <tr>
        <td class=DataLabel>First Time in this Hospital</td>
        <td><select name=mehvs021 id=mehvs021 tabindex=5 
             title="First Time in this Hospital" class=SelectBig>
            <option> </option>
               %PATWEB89.07.322.2
            </select>
        </td>
      <td><hr></td>
      <td><hr></td>
    </tr>

    <tr>
          <td class=DataLabel>Case Manager / Key Worker</td>
          <td><input type="text" size=8 maxlength=6 name="mehvs044" id="mehvs044"
              title="Case Manager" value="%PATWEB89.07.346.1" tabindex=6
              onblur="UpCase(this);ValidateHCP(18,0,mehvs044,doctnam2);">
              <input type=text readonly size=25 notab name=doctnam2 id=doctnam2
               title="Case Manager" value="%PATWEB89.07.346.2">
              <img notab src="../images/SearchIcon.gif" class=Icon
             onclick="HCPSearchFrame(mehvs044,doctnam2)">
      <img src="../images/erase.gif" class=Icon
       onclick="clrFields(mehvs044,doctnam2);">
          </td>
          <td class=DataLabel>Residential Address</td>
    <td><input type=text size=35 maxlength=35
        title="Address Line 1" class=Readonly readonly 
        value="%PATWEB89.07.012"></td>
    </tr>

    <tr>
        <td class=DataLabel>Patient Escort</td>
        <td><select name=mehvs022 id=mehvs022 tabindex=7
             title="Patient Escort" class=SelectBig>
            <option> </option>
               %PATWEB89.07.323.2
            </select>
        </td>
    <td class=DataLabel></td>
    <td><input type=text size=35 maxlength=35 class=Readonly readonly
        title="Address Line 2" value="%PATWEB89.07.013"></td>
    </tr>

    <tr>
         <td class=DataLabel>Attending MH - OP Clinic?</td>
        <td><select name=mehvs023 id=mehvs023 tabindex=8
             title="Attending MH - OP Clinic?" class=SelectBig>
            <option> </option>
               %PATWEB89.07.324.2
            </select>
        </td>
    <td class=DataLabel>Suburb</td>
    <td><input type=text size=35 maxlength=35 title="Suburb"
         class=Readonly readonly value="%PATWEB89.07.014">
    </td>

    </tr>

    <tr><td class=DataLabel>MH Clinic Name</td>
        <td><select name=mehvs045 id=mehvs045 tabindex=8
             title="MH Clinic Name" class=SelectBig>
            <option> </option>
            </select>
        </td>
          <td></td>
    <td><input type=text size=35 maxlength=35
       title="Address Line 4" class=Readonly readonly
       value="%PATWEB89.07.015">
    </td>
    </tr>

  <tr><td class=DataLabel>External MH Clinic Name</td>
      <td><input type=hidden name=mehvs054 id=mehvs054 value="%PATWEB89.07.356.1">
          <input type=text name=n_mehvs054 id=n_mehvs054 tabindex=10 readonly
           title="External MH Clinic Name" value="%PATWEB89.07.356.0">
        <img src="../images/SearchIcon.gif" class=Icon
   onclick="ExOrgSearchFrame(mehvs054,n_mehvs054,orgntype,dummy,dummy);">
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(mehvs054,n_mehvs054);">
      </td>
    <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4
        title="Post Code" class=Readonly readonly
        value="%PATWEB89.07.016"></td>
    </tr>

    <tr>
          <td class=DataLabel>Release Order</td>
          <td><select name=mehvs024 id=mehvs024 tabindex=10
             title="Release Order" class=SelectBig>
            <option> </option>
               %PATWEB89.07.325.2
            </select></td>
        <td class=DataLabel>Accommodation Description</td>
        <td><select name=mehvs048 id=mehvs048 tabindex=27
             title="Accommodation Description" class=SelectBig>
            <option> </option>
               %PATWEB89.07.350.9.1.01.1.1
            </select>
        </td>
    </tr>

    <tr>
        <td class=DataLabel>Return Order</td>
        <td><select name=mehvs025 id=mehvs025 tabindex=11
             title="Return Order" class=SelectBig>
            <option> </option>
               %PATWEB89.07.326.2
            </select>
        </td>
      <td><hr></td>
      <td><hr></td>
    </tr>

    <tr>
        <td class=DataLabel>CTO?</td>
        <td>
            <select name=mehvs030 id=mehvs030 tabindex=12
             title="CTO?" class=SelectBig>
            <option> </option>
               %PATWEB89.07.331.2
            </select>
        &nbsp;&nbsp;&nbsp; Expiry Date &nbsp;&nbsp;&nbsp;
        <input type="text" size="12" name="mehvs033" id="mehvs033" title="Expiry Date"
         value="%PATWEB89.07.334" tabindex=13
         onblur="checkDate(this,'Expiry Date')">
        <img src="../images/DateLookup.gif" class=Icon
         onclick='DateLookupFrame(mehvs033);'
         onfocus='DisableIcon(mehvs033);'>
        </td>
        <td class=DataLabel>Staying with Address </td>
        <td class=DataField>
        <input name="mehvs005" id="mehvs005" maxlength=35 size=35 tabindex=28
             title="Staying with Address Line 1" value="%PATWEB89.07.306"
             onchange="UpCase(this)">
        </td>
    </tr>

    <tr>
        <td class=DataLabel>Transport Order</td>
        <td>
            <select name=mehvs046 id=mehvs046 tabindex=14
             title="Transport Order" class=SelectBig>
            <option> </option>
               %PATWEB89.07.348.2
            </select>
        </td>
        <td class=DataLabel></td>
        <td class=DataField>
        <input name="mehvs006" id="mehvs006" maxlength=35 size=35 tabindex=29
             title="Staying with Address Line 2" value="%PATWEB89.07.307"
             onchange="UpCase(this)">
        </td>
    </tr>

    <tr>
     <td class=DataLabel>Previous Specialised Treatment?</td>
     <td>
      <select name=mehvs027 id=mehvs027 tabindex=15
           title="Previous Specialised Treatment?" class="SelectBig Mandatory">
            <option> </option>
               %PATWEB89.07.328.2
            </select>
     </td>
        <td class=DataLabel>Suburb</td>
        <td class=DataField>
        <input type="text" name="mehvs007" id="mehvs007" maxlength=35 size=35 
             title="Staying with Address Line 3" value="%PATWEB89.07.308"
             tabindex=30 onchange="UpCase(this)" onblur="SetFields1();">
        </td>
    </tr>

    <tr>
     <td class=DataLabel></td>
     <td>
     </td>
        <td class=DataLabel></td>
        <td class=DataField>
        <input type="text" name="mehvs008" id="mehvs008" maxlength=35 size=35 tabindex=31 
             title="Staying with Address Line 4" value="%PATWEB89.07.309"
             onchange="UpCase(this)">
    </tr>

    <tr>
        <td class=DataLabel></td>
        <td>
        </td>
    <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4
        name=mehvs009 id=mehvs009 title="Post Code" tabindex=32 
        value="%PATWEB89.07.310"></td>
    </tr>

    <tr>
        <td class=DataLabel></td>
        <td>
        </td>
        <td class=DataLabel>Accommodation Description</td>
        <td><select name=mehvs011 id=mehvs011 tabindex=33
             title="Accommodation Description" class=SelectBig>
            <option> </option>
               %PATWEB89.07.312.9.1.01.1.2
            </select>
        </td>
    </tr>

  <tr><td class=DataLabel></td>
     <td>
     </td>
     <td><hr></td>
     <td><hr></td>
  </tr>

      <tr>
        <td>
          <table border=0 width=100% class=TableBody cellpadding=0
                 cellspacing=0>
            <tr><td class=DataLabel> Admission Comments </td></tr>
            <tr><td colspan=6 align=left>
                <input type=button value="Add" class="button" tabindex=35
                 name="AddComm" id="AddComm"
                 onclick="tempDisable(this);AddComment();"></td></tr>
            <tr><td>&nbsp;</td></tr>
            <tr><td>&nbsp;</td></tr>
          </table>
        </td>
        <td colspan=6 align=left>
          <textarea wrap=hard name=adcommna id=adcommna class=Readonly readonly
           rows=4 cols=70>%PATWEB89.07.199.021.005</textarea>
        </td>
      </tr>

<tr align=center>
  <td align=center colspan=6><br>
   <input type=button value="OK" class="button" tabindex=36 
    id="pat89sub" onclick="tempDisable(this);Assignmehvs047();SubmitAdm()">
   <input tabindex=37 type=button value="Cancel" class="button"
    onclick="CancelLink();">
</table>
</td></tr>
</table>
</form>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno id=reportno value=1>
<input type=hidden name=template id=template value=004>
<input type=hidden name=urnumber id=urnumber value="%PATWEB89.07.003">
<input type=hidden name=admissno id=admissno value="%PATWEB89.07.101">
<input type=hidden name=MenuType id=MenuType value="%PATWEB89.07.088">
</form>
</div>

<script type="text/javascript">
document.UpdateForm.redirect.value="%PATWEB89.07.001.mehweb01.09.001";

if (document.UpdateForm.mehvs049.value=="1") {
  document.UpdateForm.d_mehvs049.checked=true;
} else {
  document.UpdateForm.d_mehvs049.checked=false;
}

defaultReceival();

// If there's a Referring Clinician then we populate the 'Role' selection list
if (!isWhitespace(document.UpdateForm.clinrefr.value)) {
  selectOptions3('15',document.UpdateForm.CAT_rm, document.UpdateForm.mehvs050);
}

ClinRole="%PATWEB89.07.359";
if (document.UpdateForm.mehvs050.length > 1) {
  for (var i=0 ; i < document.UpdateForm.mehvs050.length; i++) {
    if (document.UpdateForm.mehvs050.options[i].value.substr(0,3) == 
          ClinRole) {
        document.UpdateForm.mehvs050.selectedIndex = i;
    }
  }
}
</script>
