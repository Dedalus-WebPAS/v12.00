<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="sjog-standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/mehweb0109.js"></script>
<script type="text/javascript">
function FormSubmit() {
  if(!validateMandatory(UpdateForm)){
     return;
  }
  if(document.UpdateForm.mhhlsend.value != "") {
     if(isWhitespace(document.UpdateForm.mhdls017.value)) {
        alert("Legal Status Header has ended. End date required.")
        return;
     }
  }

  if(!isWhitespace(document.UpdateForm.mhdls018.value) &&
     isWhitespace(document.UpdateForm.mhdls017.value)) {
     alert("End Time is not blank, End Date must be entered");
     return;
  }

 if (document.forms['PatientLinks'].superlev.value == "1") {
  if (document.UpdateForm.d_mhdls015.checked==true) {
    document.UpdateForm.mhdls015.value="1";
  } else {
     document.UpdateForm.mhdls015.value="0";
  }
 }

 if (document.UpdateForm.mnhlrdck.value=="1") {
   document.UpdateForm.redirect.value="mrtweb01.pbl?reportno=09&template=004" +
   "&urnumber=" + document.UpdateForm.urnumber.value +
   "&admissno=" + document.UpdateForm.admissno.value +
   "&dischflg=1";
   document.UpdateForm.nextpage.value="4";
 }

 if (document.UpdateForm.mnhlckie.value=='1') {
   document.UpdateForm.redirect.value=
   'patweb98.pbl?reportno=1&template=43&urnumber=' +
   document.UpdateForm.urnumber.value.replace(/ /g,'+') +
   '&admissno=' + document.UpdateForm.admissno.value.replace(/ /g,'+');
   document.UpdateForm.nextpage.value="4";
 }

  document.UpdateForm.submit();
}

function DelRec() {
  ans=confirm("Are you sure you want to Delete ?")
  if (ans) {
    document.UpdateForm.updttype.value="D";
    document.UpdateForm.submit();
  }
  DFrameExitRefresh();
}

function CheckVisit() {
  if(document.UpdateForm.visittyp.value=="3") {
      Psychiatrist.innerHTML=DefaultPsyc.innerHTML;
  } else {
      Psychiatrist.innerHTML=InputPsyc.innerHTML;
      document.UpdateForm.mhdls008.focus();
  } 

  if (document.forms['PatientLinks'].superlev.value == "1") {
     RemoveLS1.innerHTML=RemoveDesc.innerHTML;
     RemoveLS2.innerHTML=RemoveFld.innerHTML;
     if (document.UpdateForm.mhdls015.value=="1") {
       document.UpdateForm.d_mhdls015.checked=true;
     } else {
       document.UpdateForm.d_mhdls015.checked=false;
     }
  } else {
     RemoveLS1.innerHTML="";
     RemoveLS2.innerHTML=NoRemove.innerHTML;
  }

  if (GetCookieData("mentalhealthcookie")=="1") {
    document.UpdateForm.mnhlckie.value="1";
    SetCookie("mentalhealthcookie","");
  }

}
function MenHlthRedirect() {
  var  mnhlrdck = GetCookieData("medreccookie");
  SetCookie("medreccookie","");
  if (!isWhitespace(mnhlrdck) && mnhlrdck!="unknown") {
    document.UpdateForm.mnhlrdck.value="1";
  }
}
</script>
</head>

%START.OF.PAGE
<body onload="PageLoad(event);CheckStatusUpdate(UpdateForm);CheckVisit();
              MenHlthRedirect();">
<span class=DFrameTitleBar>
<img align=right alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Legal Status Details
</span>
<div id=PageBodySection style="overflow: auto;">
<form name=UpdateForm action="mehweb01.pbl" method=post style="margin:0"
 onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno value="9">
<input type=hidden name=updttype value="C">
<input type=hidden name=urnumber value="%MEHWEB01.09.003">
<input type=hidden name=admissno value="%MEHWEB01.09.081">
<input type=hidden name=uniqnumb value="%MEHWEB01.09.201">
<input type=hidden name=opendate value="%MEHWEB01.09.303">
<input type=hidden name=opentime value="%MEHWEB01.09.203">
<input type=hidden name=resident value="%MEHWEB01.09.213.0">
<input type=hidden name=mhhlsend value="%MEHWEB01.09.104">
<input type=hidden name=mhhltend value="%MEHWEB01.09.105">
<input type=hidden name=mhdls004 value="%MEHWEB01.09.204.3">
<input type=hidden name=mhdls012 value="">
<input type=hidden name=mhdls013 value="">
<input type=hidden name=mhdls015 value="%MEHWEB01.09.215.0">
<input type=hidden name=courtdat value="%MEHWEB01.09.204.3">
<input type=hidden name=nextpage value="0">
<input type=hidden name=precdate value="%MEHWEB01.09.418">
<input type=hidden name=prectime value="%MEHWEB01.09.419">
<input type=hidden name=visittyp value="%MEHWEB01.09.605">
<input type=hidden name=mnhlrdck value="">
<input type=hidden name=redirect>
<input type=hidden name=mnhlckie value="">

<table align=center cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td width=18% class=DataLabel>Legal Status</td>
    <td><input type=text class=Readonly tabindex=-1
     title="Legal Status" readonly
     value="%MEHWEB01.09.204.0" size=20 maxlength=22>
    </td>
    <td width=18% class=DataLabel>Psychiatrist</td>
    <td><div id="Psychiatrist"></div></td>
</tr>

<tr><td class=DataLabel>LS Start Date</td>
    <td><input name="mhdls002" class="Date readonly" readonly  tabindex=-1
     value="%MEHWEB01.09.202" size=12>
    <img src="../images/DateLookup.gif" class=Icon date=date1
     onclick="">
    <class=DataLabel>Time
    <input name="mhdls003" class=readonly readonly
     value="%MEHWEB01.09.203" size=8>
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="">
    </td>
    <td class=DataLabel>Supervising Psychiatrist</td>
    <td><input type="text" size=10 maxlength=10 name="mhdls028" 
       value="%MEHWEB01.09.228.1" tabindex=2
       onblur="UpCase(this);ValidateHCP(18,18,UpdateForm.mhdls028,
               UpdateForm.doctnam2);">
       <input type="text" size=20 notab readonly name="doctnam2"
       value="%MEHWEB01.09.228.0">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(UpdateForm.mhdls028,UpdateForm.doctnam2,9);">
       <img src="../images/erase.gif" class="Icon"
        onclick="clrFields(UpdateForm.mhdls028,UpdateForm.doctnam2);">
    </td>
</tr>

<tr><td width=20% class=DataLabel>LS Expiry Date</td>
    <td><input size=12 title="LS Expiry Date" name=e_mhdls006 tabindex=-1
     class="Date readonly" readonly>
    <img src="../images/DateLookup.gif" class=Icon date=date1
     onclick="">
    <class=DataLabel>Time
    <input type=text size=8 title="End Time" name=e_mhdls007 
     class=readonly readonly>
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="">
    </td>
    <td class=DataLabel>Responsible Practitioner</td>
    <td><input type="text" size=10 maxlength=10 name="mhdls029" 
         value="%MEHWEB01.09.229.1" tabindex=3
         onblur="UpCase(this);ValidateHCP(18,18,UpdateForm.mhdls029,
                 UpdateForm.doctnam3);">
       <input type="text" size=20 notab readonly name="doctnam3" 
         value="%MEHWEB01.09.229.0">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(UpdateForm.mhdls029,UpdateForm.doctnam3,9);">
       <img src="../images/erase.gif" class="Icon"
        onclick="clrFields(UpdateForm.mhdls029,UpdateForm.doctnam3);">
    </td>
</tr>

<tr><td class=DataLabel>LS End Date</td>
    <td class=DataLabel>
    <input type=text name=mhdls017 title="End Date" class="date"
     size=12 value="%MEHWEB01.09.217" tabindex=4
     onblur="if(checkDate(this,'Date'))
             {checkLSDate(UpdateForm.mhdls017,UpdateForm.mhdls018,0,
              UpdateForm.mhdls002,UpdateForm.e_mhdls006);
             setEndTime();
             checkRefDate(UpdateForm.mhdls017,UpdateForm.mhdls018,'2',
             UpdateForm.mhhlsend,UpdateForm.mhhltend,
             UpdateForm.e_mhdls006,UpdateForm.e_mhdls007);}">
    <img src="../images/DateLookup.gif" class=Icon date=date1
     onclick="DateLookupFrame(UpdateForm.mhdls017);">
     Time  
    <input type=text size=8  title="End Time" name=mhdls018
     value="%MEHWEB01.09.218" class="Time" tabindex=5
     onblur="checkLSTime(UpdateForm.mhdls017,UpdateForm.mhdls018,0,
             UpdateForm.mhdls002,UpdateForm.e_mhdls006,
             UpdateForm.mhdls003,UpdateForm.e_mhdls007);
     checkRefTime(UpdateForm.mhdls017,UpdateForm.mhdls018,'2',
             UpdateForm.mhhlsend,UpdateForm.mhhltend,
             UpdateForm.e_mhdls006,UpdateForm.e_mhdls007);">
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(UpdateForm.mhdls017,UpdateForm.mhdls018);">
    <img src="../images/TimeLookup.gif" class=Icon 
     onclick="TimeLookupFrame(UpdateForm.mhdls018);">
    </td>
    <td class=DataLabel>Locum Doctor</td>
    <td><input type="text" size=10 maxlength=10 name="mhdls030" 
       value="%MEHWEB01.09.230.1" tabindex=6
       onblur="UpCase(this);ValidateHCP(18,18,UpdateForm.mhdls030,
               UpdateForm.doctnam4);">
       <input type="text" size=20 notab readonly name="doctnam4"
        value="%MEHWEB01.09.230.0">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(UpdateForm.mhdls030,UpdateForm.doctnam4,9);">
       <img src="../images/erase.gif" class="Icon"
        onclick="clrFields(UpdateForm.mhdls030,UpdateForm.doctnam4);">
    </td>
</tr>

<tr><td width=20% class=DataLabel>Review Date</td>
    <td class=DataLabel>
    <input type=text name=mhdls006 title="Review Date" tabindex=10
     size=12 value="%MEHWEB01.09.206" class="Date" 
     onblur="checkLSDate(UpdateForm.mhdls006,UpdateForm.mhdls007,1,
             UpdateForm.mhdls002,UpdateForm.e_mhdls006);">
    <img src="../images/DateLookup.gif" class=Icon date=date1
     onclick="DateLookupFrame(UpdateForm.mhdls006);">
     Time
    <input type=text size=8 title="Review Time" name=mhdls007
     value="%MEHWEB01.09.207" class="Time" tabindex=11
     onblur="checkLSTime(UpdateForm.mhdls006,UpdateForm.mhdls007,1,
             UpdateForm.mhdls002,UpdateForm.e_mhdls006,
             UpdateForm.mhdls003,UpdateForm.e_mhdls007);">
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(UpdateForm.mhdls006,UpdateForm.mhdls007);">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="TimeLookupFrame(UpdateForm.mhdls007);">
    </td>
    <td><div id="RemoveLS1"></div></td>
    <td><div id="RemoveLS2"></div></td>
<tr>

<tr><td class=DataLabel>Collected At</td>
    <td><select name=mhdls010 title="Collected At" class="SelectBig Mandatory" tabindex=12>
        <option></option>
        %MEHWEB01.09.210.9.1.01.1.L
        </select></td>
</tr>

<tr><td class=DataLabel>Pt Documentation given?</td>
    <td><select name=mhdls027 title="Pt Documentation given?" tabindex=13 class="SelectBig">
        <option></option>
        %MEHWEB01.09.227.2
        </select></td>
</tr>
</table>

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel> Document Name</td>
<td colspan=6 align=left>
<textarea wrap=hard name=doconame rows=2 cols=100 tabindex=20
 style="font-family:Arial; font-size:11px;">
%MEHWEB01.09.416
</textarea></td></tr>

<tr><td class=DataLabel>Comments 1</td>
    <td><input type="text" size="120" maxlength="100" name=mhdls016
         tabindex=21 title="Comments" value="%MEHWEB01.09.216">
    </td>
</tr>
<tr><td class=DataLabel>Comments 2</td>
    <td><input type="text" size="120" maxlength="100" name=mhdls026
         tabindex=22 title="Comments" value="%MEHWEB01.09.226"> 
    </td>
</tr>

<tr><td colspan=10 align=center><br>
    <input type=button value="Update" class="button" tabindex=23 id="meh01upd"
     onclick="tempDisable(this);FormSubmit();">
    <input type=button Value="Cancel" class="button"  tabindex=24
     onclick="DFrameClose();">
    </td>
</tr>
</table>

</form>

<form name="PatientLinks" method="get" style="margin:0">
<input type="hidden" name="reportno" value="9">
<input type="hidden" name="template" value="006">
<input type="hidden" name="urnumber" value="%MEHWEB01.09.003">
<input type="hidden" name="admissno" value="%MEHWEB01.09.081">
<input type="hidden" name="MenuType" value="%MEHWEB01.09.088">
<input type="hidden" name="uniqnumb" value="%MEHWEB01.09.101">
<input type="hidden" name="superlev" value="%MEHWEB01.09.417">
</form>

<div id="InputPsyc" style="display:none">
    <input type="text" size=10 maxlength=10 name="mhdls008" tabindex=1
     value="%MEHWEB01.09.208.1" 
     onblur="UpCase(this);ValidateHCP(18,18,UpdateForm.mhdls008,
             UpdateForm.doctnam1);">
    <input type="text" size=20 notab readonly name="doctnam1" 
     value="%MEHWEB01.09.208.0">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="HCPSearchFrame(UpdateForm.mhdls008,UpdateForm.doctnam1,9);">
    <img src="../images/erase.gif" class="Icon"
     onclick="clrFields(UpdateForm.mhdls008,UpdateForm.doctnam1);">
</div>

<div id="DefaultPsyc" style="display:none">
    <input type=text size=40 class=readonly readonly name=d_mhdls008
     value="%MEHWEB01.09.122.0" title="Psychiatrist" tabindex=-1>
</div>

<div id="RemoveDesc" style="display:none">
    Remove Legal Status Record
</div>

<div id="RemoveFld" style="display:none">
    <input type=checkbox name=d_mhdls015 value="0">
</div>

<div id="NoRemove" style="display:none">
    <input type=hidden name=d_mhdls015 value="0">
</div>

<script type="text/javascript">
function setEndTime() {
  checkDate(document.UpdateForm.mhdls017,'Date');
  if (!isWhitespace(document.UpdateForm.mhdls017.value)) {
      document.UpdateForm.mhdls018.className="Mandatory";
   } else {
      document.UpdateForm.mhdls018.className="";
  }
}
</script>
