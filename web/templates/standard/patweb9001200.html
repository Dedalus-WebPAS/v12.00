<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<script type="text/javascript" src="../js/patweb90.js"></script>
<script type="text/javascript" src="../js/patweb69.js"></script>
<script type="text/javascript">
function checkUR() {
if(document.search.aisearch.value>1){
    return;}
if (!isWhitespace(search.urnumber.value)) {
  validateCode(8,search.urnumber,search.patfname);
  linkForm.template.value="1";
  linkForm.urnumber.value=search.urnumber.value;
  linkForm.admissno.value="";
  linkForm.casekeys.value=parent.UpdateStatus.casekeys.value
  linkForm.target="content"
  linkForm.submit()
}
}
function ProcessSubmit() {
  var p = document.search;
  if (p.ptcnuepm.value == "1") {
    p.showblhd.value = "1";  // show LHD search button on submit return
  }

  setUR();

  if (document.search.aisearch.value>1) {
    return true;
  }
  if (!isWhitespace(search.urnumber.value)) {
    checkUR();
    return false;
  } else {
    search.srchsnam.value.replace(/\'/g,"~")
    checkDate(search.srchpdob,'Date of Birth');
    setBirth(search.srchpdob);
    return true;
  }
}
function NewUR(admissno) {
  reply=confirm("A new Patient Master Record will be" +
                " created for this zero U/R patient. Proceed? ");
  if (reply) {
     location.href="emrweb02.pbl?reportno=1&template=102&admissno=" + admissno;
   }
}
function UpCase(str){
  str.value=str.value.toUpperCase()
}
function newreg(){
  Registration.srchsnam.value=document.search.srchsnam.value;
  Registration.srchgnam.value=document.search.srchgnam.value;
  Registration.srchpage.value=document.search.srchpage.value;
  Registration.srchpdob.value=document.search.srchpdob.value;
  for (var i =0 ; i < document.search.srchpsex.length; i++) {
    if (document.search.srchpsex[i].checked=="1" ) {
      Registration.srchpsex.value=document.search.srchpsex[i].value;
    }
  }
  Registration.casekeys.value=parent.UpdateStatus.casekeys.value
  Registration.target="content"
  Registration.submit()
//  DFrameExit()
}
function tmpreg(){
  TmpRegistration.srchsnam.value=document.search.srchsnam.value;
  TmpRegistration.srchgnam.value=document.search.srchgnam.value;
  TmpRegistration.srchpage.value=document.search.srchpage.value;
  TmpRegistration.srchpdob.value=document.search.srchpdob.value;
  for (var i =0 ; i < document.search.srchpsex.length; i++) {
    if (document.search.srchpsex[i].checked=="1" ) {
      TmpRegistration.srchpsex.value=document.search.srchpsex[i].value;
    }
  }
  TmpRegistration.casekeys.value=parent.UpdateStatus.casekeys.value
  TmpRegistration.target="content"
  TmpRegistration.submit()
//  DFrameExit()
}
function updateParent(fpatname,urnumber,admissno) {
  linkForm.template.value="1";
  linkForm.urnumber.value=urnumber;
  linkForm.admissno.value="";
  linkForm.casekeys.value=parent.UpdateStatus.casekeys.value
  linkForm.target="content"
  linkForm.submit()
}
function NewPatient() {
  linkForm.template.value="3";
  linkForm.urnumber.value="        ";
  linkForm.admissno.value="";
  linkForm.casekeys.value=parent.UpdateStatus.casekeys.value
  linkForm.submit()
}
function FinaliseReset() {
  document.getElementById('spLHDSrchBtn').innerHTML = "";
}
function disableEnterKey(e)
{
  var key = (window.event) ? window.event.keyCode : e.which;
  return (key != 13);
}
function submitOnEnter(e)
{
  var key = (window.event) ? window.event.keyCode : e.which;

  if (key == 13 &&
      checkDate(document.search.srchpdob,'Date of Birth') &&
      ProcessSubmit())
  {
    document.search.submit();
  }
  return true;
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);setUR();checkType();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
<script type="text/javascript">document.write(self.document.title);</script>
</span>

<form name=search method=post action=patweb90.pbl style="margin:0"
  onsubmit="return ProcessSubmit();"
  onkeydown="return disableEnterKey(event);"
  onkeyup="return submitOnEnter(event);">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="200">
<input type=hidden name=norecord value="%PATWEB90.01.032">
<input type=hidden name=patfname value=10>
<input type=hidden name=srchadmn value="%PATWEB90.01.013">
<input type=hidden name=ptcnualt value="%PATWEB90.01.023">
<input type=hidden name=alternid value="">
<input type=hidden name=aisearch value="">
<input type=hidden name=ptcnuepm value="%STANDARD.01.025.125.155.0.1">
<input type=hidden name=showblhd value="%PATWEB90.01.036">

<table align="center" width=100% border=0 cellspacing=3 cellpadding=2 bgcolor=#CCCCCC>
<tr><td>

<table width=100% border=0 cellpadding=0 cellspacing=0 bgcolor=#CCCCCC>
<tr><td class=DataLabel>Surname<br>
    <input type=text name=srchsnam size=15
     onblur="UpCase(this);TextBlurHandler(this);"></td>
    <td class=DataLabel colspan=2>Given Name<br>
    <input type=text name=srchgnam size=15
     onblur="UpCase(this);TextBlurHandler(this);"></td>
    <td class=DataLabel>U/R Number<br>
    <input type=text name=urnumber onblur="setUR()" size=10
     maxlength=8 style="text-align:right"></td>
    <td rowspan=2>
    <input type=radio name=srchpsex value=" " checked> All <br>
    <input type=radio name=srchpsex value="M"> Male <br>
    <input type=radio name=srchpsex value="F"> Female</td>
    <td align=center valign=middle rowspan=2>
    <input type=submit class="button" value=Search name=SearchButton><br> 
    <span id=spLHDSrchBtn></span>
    <input type=button class="button" value="Close" onclick="DFrameExit();">
    <br>
    <input type=reset class="button" value="Reset"
     onclick='FinaliseReset()'></td></tr>
<tr><td class=DataLabel>Date of Birth<br>
    <input type="text" size="12" name="srchpdob"
    onblur="checkDate(this,'Date of Birth')" ></td>
    <td class=DataLabel>Age<br>
    <input type=text name=srchpage size=4 class="JustifyLeft Integer"></td>
    <td class=DataLabel>Range<br>
    <select name=srcharan > 
    <option value=1 selected>2 years</option>
    <option value=4>4 years</option>
    <option value=6>6 years</option>
    <option value=8>8 years</option>
    <option value=10>10 years</option>
    </select></td>
    <td class=DataLabel>Search Type<br>
    <select name=srchtype onchange="checkType();">
    <option value=1>Surname</option>
    <option value=2>Sound-Ex</option>
    <option value=3>Date of Birth</option>
    <option value=4>U/R Number</option>
    </select></td></tr>
</table>

      %PATWEB90.01.011.100.0

<table width=100% bgcolor=#CCCCCC cellspacing=0 cellpadding=0 border=2>
  <tr><td>
  <table width=100% bgcolor=#CCCCCC><tr>
    <td align=center>
    <input type=button value="<< Previous" class="button"
    onclick='location.href="%PATWEB90.01.002.200"'></td>
    <td width=20%><div id=RegOption></div></td>
    <td align=center>
    <input type=button value="Next >>" class="button"
    onclick='location.href="%PATWEB90.01.001.200"'></td></tr>
   </table>
</td></tr>
</table>

</td></tr>
</table>
</form>

<form name=Registration method=get action="patweb89.pbl">
<input type=hidden name=reportno value=05>
<input type=hidden name=template value=001>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
<input type=hidden name=temporar value="0">
<input type=hidden name=casekeys>
<input type=hidden name=otptflag value="1">
</form>

<form name=TmpRegistration method=get action="patweb89.pbl">
<input type=hidden name=reportno value=05>
<input type=hidden name=template value=004>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
<input type=hidden name=temporar value="0">
<input type=hidden name=casekeys>
<input type=hidden name=otptflag value="1">
</form>

<form name=linkForm action="outweb02.pbl" method=get>
<input type=hidden name=reportno value="5">
<input type=hidden name=template value="2">
<input type=hidden name=urnumber>
<input type=hidden name=admissno>
<input type=hidden name=casekeys>
<input type=hidden name=slotbtyp value=" ">
</form>

<div id=YesReg style="display:none">
     <input type=button value="New Registration" class="Bigbutton"
      onclick="newreg();">
     <input type=button value="Temp Registration" class="Bigbutton"
      onclick="tmpreg();">
</div>

<span id=NewReg style="display:none">
  <input type=button value="New Registration" class="Bigbutton"
   onclick="newreg();">
</span>

<span id=spLHDSrch style="display:none">
  <input type=button value="%PATWEB90.01.035" class="button"
   onclick="LHDSearchFrame('RegOption','NewReg','patweb90.pbl?reportno=1&template=200',SRCH_MODE_OP);"><br>
</span>

<script type="text/javascript">
function init() {
  if(document.search.ptcnualt.value=="1"){
    document.search.urnumber.maxLength=20;
    document.search.urnumber.size=20;
  }
  document.search.srchsnam.value="%PATWEB90.01.003";
  document.search.srchgnam.value="%PATWEB90.01.004";
  document.search.srchpage.value="%PATWEB90.01.006";
  document.search.srchpdob.value="%PATWEB90.01.007";
  for (var i =0 ; i < document.search.srcharan.length; i++) {
    if (document.search.srcharan.options[i].value==trim("%PATWEB90.01.008")) {
        document.search.srcharan.selectedIndex=i } };
  for (var i =0 ; i < document.search.srchtype.length; i++) {
    if (document.search.srchtype.options[i].value=="%PATWEB90.01.009.2") {
        document.search.srchtype.selectedIndex=i } };
  for (var i =0 ; i < document.search.srchpsex.length; i++) {
    if (document.search.srchpsex[i].value=="%PATWEB90.01.005") {
        document.search.srchpsex[i].checked="1" } };

  if (document.search.ptcnuepm.value == "1") {
    if (document.search.showblhd.value == "1") {
      document.getElementById('spLHDSrchBtn').innerHTML =
       document.getElementById('spLHDSrch').innerHTML;
    }
    else {
      document.getElementById('spLHDSrchBtn').innerHTML = "";
    }
  }
  else {
    if (isWhitespace(document.search.srchsnam.value)) {
      RegOption.innerHTML="";
    }
    else {
      RegOption.innerHTML=YesReg.innerHTML;
    }
  }

  var BodyDivision = document.getElementById('BodyDivision');
  if (BodyDivision != undefined) {
    var hd_height = 75;

    if (document.search.showblhd.value == "1") {
      hd_height += 20;
    }
    BodyDivision.style.height = document.body.clientHeight - hd_height -
                                 BodyDivision.offsetTop + "px";
  }
}
</script>
