<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/TableSort.js></script>
<script type="text/javascript" src="../js/OutpatientSelect.js"></script>
<script type="text/javascript" src="../js/OutpatientTypeClinic.js"></script>
<script type="text/javascript">
//----------------------------------------------------------------------------
// Create New Table Object
// Border, Cellspacing, Cellpadding, Width, Align, Heading Height, Row Height
//----------------------------------------------------------------------------
// Add Columns in Order Required
// Heading,Type,Display Column,Sort Column, Align, Icon, Link Column
// Columns Available
//  0 - HTML Link  
//  1 - Patient Name
//  2 - Sex
//  3 - DOB
//  4 - U/R
//  5 - Referral Date
//  6 - Last EOC
//  7 - Problem
//  8 - Healthcare Professional
//---------------------------------------------------------------------------
function InitTable(TableView) {
 t = new Table(1,0,2,"100%","center");
 t.addColumn("Booking Status","String",12,12,"left","EditIcon.gif","0",60)
 t.addColumn("Patient","String",1,1,"left","","",110)
 t.addColumn("Must Be Seen By Date","Date",13,13,"left nowrap","","",70)
 t.addColumn("Referring HCP","String",8,8,"left","","",80)
 t.addColumn("Clinic Type","String",15,15,"left","","",80)
 t.addColumn("Clinic Id","String",16,16,"left","","",80)
 t.addColumn("Presenting Complaint","String",14,14,"left","","",80)
 if(document.SelectPeriod.alcndtrg.value=="1") {
   t.addColumn("Triage Status","String",23,23,"left","","",60)
 }
 t.addColumn("Priority","String",11,11,"left","","",60)
 AddTableRows()
 TableOutput(0,1);    // Order Column,Asc Dsc
 }
//
function SelectPeriodSubmit() {
 SelectPeriod.submit();
}
//
function UpdateReferral(urn,adn,dpc) {
   PatientLinks.urnumber.value=urn;
   PatientLinks.admissno.value=adn;
   PatientLinks.deptcode.value=dpc;
   PatientLinks.submit();
}
//
function AddNewReferral() {
   AddReferral.doctcode.value=SelectPeriod.doctcode.value;
   Left=(document.body.clientWidth-1000)/2;
   DFrameSubmit(AddReferral,0,Left,1000,550);
}
function AddUserReferral() {
   if(isWhitespace(document.PatientLinks.wbsedall.value)) {
     alert("User does not have a default department.");
     return;
   }
   document.AddReferral.allrf001.value=document.PatientLinks.wbsedall.value;
   Left=(document.body.clientWidth-1000)/2;
   DFrameSubmit(AddReferral,0,Left,1000,550);
}
function HospitalFilter() {
  if(document.SelectPeriod.alcndhos.value=="1") {
    document.getElementById("HospTitle").innerHTML=
    document.getElementById("DisplayHospitalTitle").innerHTML;
    document.getElementById("HospField").innerHTML=
    document.getElementById("DisplayHospitalField").innerHTML;
    document.getElementById("SiteTitle").innerHTML=
    document.getElementById("DisplaySiteTitle").innerHTML;
    document.getElementById("SiteField").innerHTML=
    document.getElementById("DisplaySiteField").innerHTML;
    document.getElementById('MultiHospDetail').style.display = "";
  } else {
    document.getElementById('MultiHospDetail').style.display = "none";
  }
}
function SetClinicTypeList() {
  p=SelectPeriod;
  SetClinicType(p.filtctyp,p.defctype.value,p.usersite.value);
  if (isWhitespace(p.deftclid.value)) {
     p.deftclid.value=p.wbseclid.value; }
  SetClinicIDList();
}
function SetClinicIDList() {
  p=SelectPeriod;
  p.filtclid.options.length=1;
  SetTypeClinic(p.filtclid,p.deftclid.value,p.usersite.value,p.filtctyp.value);
}
function displayTriageStatus() {
  x=document.SelectPeriod.alcndtrg.value;
  if(x=="1") {
    document.getElementById("TrgsHead").innerHTML=
    document.getElementById("trgshead").innerHTML;
    document.getElementById("TrgsOptn").innerHTML=
    document.getElementById("trgsoptn").innerHTML;
  } else {
    document.getElementById("TrgsHead").innerHTML="";
    document.getElementById("TrgsOptn").innerHTML=
    document.getElementById("trgsblank").innerHTML;
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);HospitalFilter();InitTable(0);
              displayTriageStatus();
              setTimeout('SetClinicTypeList();',100);">
<div id="HeadingSection"> 
<div id="PHeadingSection">

<form name=PatientLinks action=allweb02.pbl method=get style="margin:0">
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=2>
<input type=hidden name=urnumber>
<input type=hidden name=admissno>
<input type=hidden name=deptcode>
<input type=hidden name=wbsedall value="%STANDARD.01.028">
</form>

<form name=SelectPeriod action=allweb02.pbl method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=14>
<input type=hidden name=viewtype value="%ALLWEB02.01.008">
<input type=hidden name=usersite value="%STANDARD.01.023">
<input type=hidden name=wbseclid value="%STANDARD.01.026">
<input type=hidden name=defctype value="%ALLWEB02.01.028">
<input type=hidden name=deftclid value="%ALLWEB02.01.027">
<input type=hidden name=alcndhos value="%STANDARD.01.025.106.224.0.1">
<input type=hidden name=alcndtrg value="%STANDARD.01.025.121.125.0.1">

<table width=100% cellspacing=0 border=0 bgcolor=#cccccc>
<tr><td>Department</td>
    <td>
    <select class=PMenuSelectList name=deptcode 
    onchange="SelectPeriodSubmit()">
    <option></option>
    %ALLWEB02.01.012
    </select></td>

<td class=DataLabel>Referring HCP</td>
    <td><input type=text name=doctcode value="%ALLWEB02.01.020.0"
         class=DataField size=10 maxlength=10
         onchange="ValidateHCP(18,0,SelectPeriod.doctcode,
         SelectPeriod.psevt000,SelectPeriodSubmit);">
        <input type=text name=psevt000 title="Attending HCP" readonly
         size=24 value="%ALLWEB02.01.020.1">
        <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(SelectPeriod.doctcode,SelectPeriod.psevt000,
                 7,SelectPeriodSubmit);">
        <img src="../images/ClearIcon.gif" class=Icon
        onclick="clrFields(SelectPeriod.doctcode,SelectPeriod.psevt000,
                 SelectPeriodSubmit);">
</td>

    <td>Must Be Seen By Date</td>
    <td><input type=button value="<<" class=SmallButton
        onclick='location.href="%ALLWEB02.01.002"'>
        %ALLWEB02.01.007
        <input type=button value=">>" class=SmallButton
        onclick='location.href="%ALLWEB02.01.001"'></td>
    <td align=right>
        <a href='javascript:SelectDateFrame();'>
        <img src="../images/DateLookup.gif" class="Icon"
         alt="Select Date"></a>
        <a href='javascript:SelectView("0");'>
        <img src=../images/DayIcon.gif class="Icon"
         alt="View Today"></a>
        <a href='javascript:SelectView("1");'>
        <img src=../images/WeekIcon.gif class="Icon"
         alt="View This Week"></a>
        <a href='javascript:SelectView("2");'>
        <img src=../images/MonthIcon.gif class="Icon"
         alt="View This Month"></a>
        </td>
   </tr>

<tr><td class=DataLabel>Clinic Type</td>
    <td><select name=filtctyp class=SelectBig
                onchange="SetClinicIDList();SelectPeriodSubmit();">
           <option value="  ">Select Clinic Type</option>
        </select></td>

    <td class=DataLabel>Clinic ID</td>
    <td><select name=filtclid onchange="SelectPeriodSubmit();"
                class=SelectBig>
           <option value="zzzzzz">Select Clinic ID</option>
        </select></td>
    <td>Priority</td>
    <td><select name=priority onchange="SelectPeriodSubmit();" >
       <option value="  ">All</option>
       %ALLWEB02.01.010.2
       </select></td>
</tr>

<tr>
  <td class=DataLabel>Status</td>
  <td>
    <select name=filtstat onchange='SelectPeriod.submit();'>
      <option value="0">Waiting</option>
      <option value="1">Active</option>
      <option value="9" selected>All</option>
    </select>
  </td>
  <td class=DataLabel>&nbsp;</td>
  <td>&nbsp;</td>
  <td><div id=TrgsHead></div></td>
  <td><div id=TrgsOptn></div></td>
</tr>

<tr id=MultiHospDetail>
    <td><div id="HospTitle"></div></td>
    <td><div id="HospField"></div></td>
    <td><div id="SiteTitle"></div></td>
    <td><div id="SiteField"></div></td>
    <td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
</tr>

</table>
</form>
</div>

<form name=AddReferral method=get action=allweb02.pbl style="margin:0">
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=2>
<input type=hidden name=doctcode value="">
<table width=100% cellspacing=0 border=1 bgcolor=#cccccc>
<tr><td align=right class=HeadingCell colspan=2 >Add Referral
    <input type=button class=SlimButton value="Add"
     title="Add referral for users department" onclick="AddUserReferral();">
        <select class=PMenuSelectList name=allrf001 
         onmouseover='MenuOver(event,this)'
         onchange="AddNewReferral();">
        <option></option>
         %ALLWEB02.01.012
        </select></td></tr>
<tr><td width=95% class=HeadingCell align=center> 
        %ALLWEB02.01.023  Referrals - Must be seen by</td> </tr>

</table>
</form>
</div>

<div id=DisplayHospitalTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>Hospital</td>
    </tr>
</table>
</div>

<div id=DisplayHospitalField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td><select name=filthosp onchange="SelectPeriod.submit();" >
        <option></option>
        %ALLWEB02.01.039
        </select></td>
</table>
</div>

<div id=DisplaySiteTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>Preferred Site</td>
    </tr>
</table>
</div>

<div id=DisplaySiteField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>
    <select name=filtpsit onchange="SelectPeriod.submit();" >
    <option></option>
     %ALLWEB02.01.040
    </select>
    </td></tr>
</table>
</div>

<div id=TableLocation></div>
<script type="text/javascript">
function AddTableRows() {
%ALLWEB02.01.026.1.00
}

var idx = "%ALLWEB02.01.035";
// Database Status of 9 does not exist. 9 is used to show all records.
// Status of 9 must be changed back to 2 to set the filtstat index correctly
if(idx=="9"|idx==" "){
   idx="2";
}
document.SelectPeriod.filtstat.selectedIndex=idx;

</script>
<span id=trgshead style="display:none">
<tr><td>Triage Status</td></tr>
</span>
<span id=trgsoptn style="display:none">
    <td><select name=filttrgs id=filttrgs onchange="SelectPeriodSubmit();">
        <option value="  ">All</option>
         %ALLWEB02.01.277.2
        </select></td>
</span>
<span id=trgsblank style="display:none"></span>
