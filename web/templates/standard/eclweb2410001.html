<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="CrossBrowser" content="true">
<meta name="HelpFileName" content="NoContextSet.html">
<script type="text/javascript" src="../js/TableSort.js"> </script>
<script type="text/javascript">
function displayClaim(batchnum,uniqnumb,urnumber,invoicen,module,
                      prhre001,prhre002,prhre003) {
  document.cookie = "EclipseBBClaimPath=" + escape(location.href) + ";"
//alert("eclweb01.pbl?reportno=2" +
//                "&template=001" +
//                "&urnumber=" + urnumber +
//                "&uniqnumb=" + uniqnumb +
//                "&mavbatch=" + batchnum +
//                "&mavinvce=" + invoicen +
//                "&prhre001=" + prhre001 +
//                "&prhre002=" + prhre002 +
//                "&prhre003=" + prhre003);
  location.href="eclweb24.pbl?reportno=9" +
                "&template=001" +
                "&urnumber=" + urnumber +
                "&uniqnumb=" + uniqnumb +
                "&mavbatch=" + batchnum +
                "&mavinvce=" + invoicen +
                "&mavmodul=" + module +
                "&prhre001=" + prhre001 +
                "&prhre002=" + prhre002 +
                "&prhre003=" + prhre003;  
}
function JSONPopupFrame(mavbatch,mavinvce,mavmodul,urnumber,uniqnumb,
                        prhre001,prhre002,prhre003) {
  DFrameStart()

  linkurl="../cgi-bin/eclweb24.pbl?reportno=09&template=007"+
          "&mavbatch=" + mavbatch +
          "&mavinvce=" + mavinvce +
          "&mavmodul=" + mavmodul +
          "&urnumber=" + urnumber +
          "&uniqnumb=" + uniqnumb +
          "&prhre001=" + prhre001 +
          "&prhre002=" + prhre002 +
          "&prhre003=" + prhre003;
  Left=(document.body.clientWidth-1300)/2
  DFrameLink(linkurl,0,Left,1300,1000)
}
function delWaitn(delcheckbox) {

  if(!confirm("WARNING: Clicking OK will completely remove this claim from Eclipse. \Are you sure you want to continue ?")) {
   FilterSubmit();
   return;
  }

  document.SelectPeriod.updattyp.value="D";
  document.SelectPeriod.mavbatch.value=delcheckbox.value.substring(0,8);
  document.SelectPeriod.mavinvce.value=delcheckbox.value.substring(8,16);
  document.SelectPeriod.mavmodul.value=delcheckbox.value.substring(16,17);
  FilterSubmit();
}
function reSubmit(rsbcheckbox) {
  document.SelectPeriod.updattyp.value="R";
  document.SelectPeriod.mavbatch.value=rsbcheckbox.value.substring(0,8);
  document.SelectPeriod.mavinvce.value=rsbcheckbox.value.substring(8,16);
  document.SelectPeriod.mavmodul.value=rsbcheckbox.value.substring(16,17);
  FilterSubmit();
}
function MarkAsViewed(mavcheckbox) {
  document.SelectPeriod.updattyp.value="V";
  document.SelectPeriod.mavbatch.value=mavcheckbox.value.substring(0,8);
  document.SelectPeriod.mavinvce.value=mavcheckbox.value.substring(8,16);
  document.SelectPeriod.mavmodul.value=mavcheckbox.value.substring(16,17);
  FilterSubmit();
}
//function resetStatus(rstcheckbox) {
//  document.SelectPeriod.updattyp.value="S";
//  document.SelectPeriod.mavbatch.value=rstcheckbox.value.substring(0,8);
//  document.SelectPeriod.mavinvce.value=rstcheckbox.value.substring(8,16);
//  FilterSubmit();
//}
function DemogrPatient() {
}
function exdtblankchange () {
  document.SelectPeriod.exdtblnk.value=0;
  if (document.SelectPeriod.lastdate!=undefined) {
    if (isWhitespace(document.SelectPeriod.lastdate.value)) {
      document.SelectPeriod.exdtblnk.value=1;
    }
  }
  if (document.SelectPeriod.vyearmth!=undefined) {
    if (isWhitespace(document.SelectPeriod.vyearmth.value)) {
      document.SelectPeriod.exdtblnk.value=1;
    }
  }
}
//function healthfundchange () {
// if (document.SelectPeriod.healthfd!=undefined) {
//   document.SelectPeriod.hlthfund.value=document.SelectPeriod.healthfd.value;
// } else {
//   if (document.SelectPeriod.claimtyp!=undefined) {
//     document.SelectPeriod.hlthfund.value=
//     document.SelectPeriod.claimtyp.value.substring(0,3);
//   } else {
//     document.SelectPeriod.hlthfund.value="      ";
//   }
// }
//}
function exclwaitclick() {
 if (document.SelectPeriod.t_exclwait.checked==true) {
   document.SelectPeriod.exclwait.value="1";
 } else {
   document.SelectPeriod.exclwait.value="0";
 }
}
function exclcloseclick() {
 if (document.SelectPeriod.t_exclclos.checked==true) {
   document.SelectPeriod.exclclos.value="1";
 } else {
   document.SelectPeriod.exclclos.value="0";
 }
}
//======================================================================
// Standard Date Select View Functions
//  SelectView(ViewType)   0=by day 1 =by week 2=by month
//======================================================================
function SelectView(ViewType)
{
  document.SelectPeriod.viewtype.value=ViewType
  if (document.SelectPeriod.lastdate!=undefined)
    document.SelectPeriod.lastdate.value="";
 
  if (document.SelectPeriod.vyearmth!=undefined)
    document.SelectPeriod.vyearmth.value="";
 
//  document.SelectPeriod.submit();
  FilterSubmit();
}
//function PatientInvSearchPP(ReturnUR,ReturnName,ReturnInv) {
//  ReturnFunction="" ;
//  for (var i=4; i < PatientInvSearchPP.arguments.length; i++) {
//    if (typeof(PatientInvSearchPP.arguments[i]) == 'function') {
//      ReturnFunction=PatientInvSearchPP.arguments[i] }
//  }
//  window.ReturnName=ReturnName ;
//  window.ReturnUR=ReturnUR ;
//  window.ReturnCode=ReturnInv ;
//  window.ReturnForm=SelectPeriod ;
//  DFrameStart()
//  window.IBASystem=2 ;
//  linkurl="patweb90.pbl?reportno=1&template=18"
//  Left=(document.body.clientWidth-900)/2
//  DFrameLink(linkurl,130,Left,900,440);
//}
function PatientInvSearchEMR(ReturnUR,ReturnName,ReturnInv) {
  ReturnFunction="" ;
  for (var i=4; i < PatientInvSearchEMR.arguments.length; i++) {
    if (typeof(PatientInvSearcEMR.arguments[i]) == 'function') {
      ReturnFunction=PatientInvSearchEMR.arguments[i] }
  }
  window.ReturnName=ReturnName ;
  window.ReturnUR=ReturnUR ;
  window.ReturnCode=ReturnInv ;
  window.ReturnForm=SelectPeriod ;
  DFrameStart()
  window.IBASystem=6 ;
  linkurl="patweb90.pbl?reportno=1&template=18"
  Left=(document.body.clientWidth-900)/2
  DFrameLink(linkurl,130,Left,900,440);
}
function validateInvoice(invoicen) {
 if (isWhitespace(invoicen.value)) {
   return false;
 }
 var Url = "../cgi-bin/patweb80.pbl?reportno=51" +
           "&valdcode="+invoicen.value.replace(/ /g,"+") +
           "&valdtype=5";
 var returnValue = RSExecute(Url);    //Remote Script To validate invoice no
 if (returnValue.status==0) {
   ReturnValue=returnValue.return_value.split("|");
   invoicen.value=ReturnValue[0];
   justifyRight(invoicen);
//   admissno=ReturnValue[1];
//   urnumber=ReturnValue[2];
//   alert("admission="+admissno+"\nurnumber="+urnumber);
   FilterSubmit();
   return true;
 }
 else {
  invoicen.value="";
  invoicen.focus();
  return false;
 }
}
//------------------------------------------------------------
// Function : Validate Batch Number
//------------------------------------------------------------
function validateBatch(ReturnCode) {
  var serverURL ="../cgi-bin/eclweb24.pbl?reportno=06&valdtype=3" +
                 "&batchnum=" + ReturnCode.value.replace(/ /g,"+");

  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|")
  } else {
    ReturnCode.select();
    return false;
  }
  return true;
}
function checkBatchNo(batchno) {
  if(isWhitespace(batchno.value)) { return; }
//if ((event.keyCode == 13) || (event.keyCode == 9)) {  // Carriage Return
    if (validateMandatory(SelectPeriod)) {
      ans=validateBatch(batchno);
      if(!ans) { return }
      document.SelectPeriod.batchnum.value=batchno.value;
//    document.SelectPeriod.submit();
//alert();
      FilterSubmit();
    }
//}
}
function BatchNumSearchFrame(ReturnCode) {
  DFrameStart()
  window.ReturnCode=ReturnCode ;

  window.ReturnHosp="";
  if (document.SelectPeriod.hospcode!=undefined) {
    window.ReturnHosp=document.SelectPeriod.hospcode.value; 
  }

  window.ReturnFunction="" ;
  for (var i=1; i < BatchNumSearchFrame.arguments.length; i++) {
    if (typeof(BatchNumSearchFrame.arguments[i]) == 'function') {
      window.ReturnFunction=BatchNumSearchFrame.arguments[i]
    }
  }

  linkurl="../cgi-bin/eclweb24.pbl?reportno=10&template=002&btschosp="+window.ReturnHosp;
  Left=(document.body.clientWidth-750)/2
//alert(linkurl);
  DFrameLink(linkurl,100,Left,750,400)
}
function validateUnique(ReturnCode) {
  var serverURL ="../cgi-bin/eclweb24.pbl?reportno=04&valdtype=7" +
                 "&uniqnumb=" + ReturnCode.value.replace(/ /g,"+");

  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|")
  } else {
    ReturnCode.select();
    return false;
  }
  return true;
}
//
function checkUniq(uniqnumb) {
  if(isWhitespace(uniqnumb.value)) { return; }
//if ((event.keyCode == 13) || (event.keyCode == 9)) {  // Carriage Return
    if (validateMandatory(SelectPeriod)) {
      justifyRight(uniqnumb)
      p = document.SelectPeriod
      ans=validateUnique(uniqnumb);
      if(!ans) { return }
      document.SelectPeriod.filtadmn.value=uniqnumb.value;
//    document.SelectPeriod.submit();
      FilterSubmit();
    }
//}
}
function checkUR(urnum) {
  if(isWhitespace(urnum.value)) { return; }
//if ((event.keyCode == 13) || (event.keyCode == 9)) {  // Carriage Return
    if (validateMandatory(SelectPeriod)) {
      justifyRight(urnum)
      ans=validateUR(urnum);
      if(!ans) { return }
      document.SelectPeriod.filturno.value=urnum.value;
//    document.SelectPeriod.submit();
      document.SelectPeriod.filtadmn.value="";
      FilterSubmit();
    }
//}
}
//------------------------------------------------------------
// Function : Validate U/R Number
//------------------------------------------------------------
function validateUR(ReturnCode) {
  var serverURL ="../cgi-bin/patweb80.pbl?reportno=33" +
                 "&valdcode=" + ReturnCode.value.replace(/ /g,"+");

  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    var urflag=returnValue.return_value.split("|")
    if (urflag[0]=="1") {
      var dummy=1;  // Dummy return
      return true;
    } else {
      setTimeout('document.SelectPeriod.filturno.select();',100);
      alert("Invalid Patient U/R - " + ReturnCode.value);
      return false;
    }
  } 
}
function PatientSearchFrame(ReturnName,ReturnUR,ReturnVisit) {
  ReturnFunction="" ;
  SearchType="" ;
  for (var i=3; i < PatientSearchFrame.arguments.length; i++) {
    if (typeof(PatientSearchFrame.arguments[i]) == 'function') {
      ReturnFunction=PatientSearchFrame.arguments[i] }
    else {
      SearchType=PatientSearchFrame.arguments[i].value
    } }
  window.ReturnName=ReturnName ;
  window.ReturnUR=ReturnUR ;
  window.ReturnVisit=ReturnVisit ;
  var PopUpFrameDoc = DFrameStart();
  PopUpFrameDoc.location.href= "../lookups/PatientSearchFrame"+SearchType+".html";
  SearchFrameShow();
}
//function ShowHLCTSpan() {
//  HealthFund.innerHTML="";
//  if (document.SelectPeriod.hlfdclty.value=="0" ||
//      document.SelectPeriod.hlfdclty.value=="1") {
//    HealthFund.innerHTML=HlthFd.innerHTML;
//  }
////  if (document.SelectPeriod.hlfdclty.value=="1") {
////    HealthFund.innerHTML=ClmTyp.innerHTML;
////  }
//}
function UpdatePatient() {
}
function FilterSubmit() {
// if (document.SelectPeriod.healthfd!=undefined) {
//   document.SelectPeriod.hlthfund.value=document.SelectPeriod.healthfd.value;
// } else {
//   if (document.SelectPeriod.claimtyp!=undefined) {
//     document.SelectPeriod.hlthfund.value=
//     document.SelectPeriod.claimtyp.value.substring(0,3);
//   } else {
//     document.SelectPeriod.hlthfund.value="      ";
//   }
// }

// if (document.SelectPeriod.t_exclwait.checked==true) {
//  document.SelectPeriod.exclwait.value="1";
// } else {
//   document.SelectPeriod.exclwait.value="0";
// }

// document.SelectPeriod.allhflag.value=1;

// if(validateMandatory(SelectPeriod)) {
// alert(document.SelectPeriod.hlthfund.value);
   document.SelectPeriod.submit();
// }
}
//----------------------------------------------------------------------------
// Create New Table Object
// Border, Cellspacing, Cellpadding, Width, Align, Heading Height, Row Height
//----------------------------------------------------------------------------
// Add Columns in Order Required
// Heading,Type,Display Column,Sort Column, Align, Icon, Link Column
// Columns Available
//---------------------------------------------------------------------------
function InitTable(TableView) {
switch (TableView) {
case 0: {
 t = new Table(1,0,2,"100%","center");
// t.addColumn("Batch #","ImageText",0,0,"left","InvoiceIcon","10",50,11)
 t.addColumn("Batch&nbsp;#","String",17,17,"left","","",40)
 t.addColumn("User ID Created/Updated","String",20,20,"left","","",65)
 t.addColumn("Unique/Adm Num","String",1,1,"left","","",40)
 t.addColumn("Invoice Number","String",2,2,"left","","",40)
 t.addColumn("Patient&nbsp;Details","ImageText",3,3,"left","PatientFolder","12",130,16)
// t.addColumn("Health&nbsp;Fund<br>Claim&nbsp;Code","String",4,4,"left","","",60)
 t.addColumn("Claimed Amt","String",5,5,"left","","",30)
 t.addColumn("Claim Status","String",18,18,"left","","",50)
 t.addColumn("Transaction Id","String",19,19,"left","","",90)
 t.addColumn("Batch #<br>Previous","String",7,7,"left","","",40)
 t.addColumn("Batch #<br>Next","String",8,8,"left","","",40)
 t.addColumn("Mark as Viewed","String",13,13,"middle","","",50)
 t.addColumn("Resubmit","String",14,14,"middle","","",40)
 t.addColumn("Delete","String",15,15,"middle","","",30)
 //t.addColumn("Reset<br>Status","String",18,18,"middle","","",30)
 AddTableRows()
 TableOutput(0,1);    // Order Column,Asc Dsc
 break; 
  }
 }
}
</script>
</head>
%START.OF.PAGE
<body onload=PageLoad(event);InitTable(0);document.SelectPeriod.allhflag.value=1;
 onunload="document.cookie = 'EclipseClaimPath=' + escape(location.href) + ';'">

<div id=HeadingSection>
<form name=SelectPeriod action=eclweb24.pbl method=get style="margin:0">
  <input type=hidden name=reportno value=10>
  <input type=hidden name=template value=1>
  <input type=hidden name=ibcnmhos value="%ECLWEB24.10.002">
  <input type=hidden name=allhflag value=0>
  <input type=hidden name=hlthfund value="%ECLWEB24.10.016">
  <input type=hidden name=dummy id=dummy>
  <input type=hidden name=exclwait value="%ECLWEB24.10.007">
  <input type=hidden name=viewtype value="%ECLWEB24.10.014">
  <input type=hidden name=exdtblnk value="%ECLWEB24.10.015">
  <input type=hidden name=mavbatch value=" ">
  <input type=hidden name=mavinvce value=" ">
  <input type=hidden name=mavmodul value=" ">
  <input type=hidden name=updattyp value=" ">
  <input type=hidden name=nextpage value="6">
  <input type=hidden name=exclclos value="%ECLWEB24.10.025">
  
<table cellpadding=0 cellspacing=0 bgcolor=#CCCCCC border=0 width=100%>
<tr><td><span id=HospitalID></span></td>
    <td class=DataLabel></td>
    <td></td>
    <td align=right>
    <input type=button value=Search class="button" 
     onclick="FilterSubmit();"><br>
    <input type=button value=Reset class="button"
     onclick='location.href="eclweb24.pbl?reportno=10&template=1&viewtype=2&exdtblnk=0"'>
    </td>
</tr>
</table>
<table cellpadding=0 cellspacing=0 bgcolor=#CCCCCC border=0 width=100%>
<tr><td class=DataLabel>Batch #<br>
    <input type=text name=batchnum id=batchnum size=8 maxlength=8
     class="JustifyLeft"
     onblur="justifyRight(this);checkBatchNo(this);" value="%ECLWEB24.10.010">
    <img src=../images/SearchIcon.gif class=Icon notab
     onclick="BatchNumSearchFrame(batchnum,FilterSubmit);">
    <img src="../images/erase.gif" alt="Clear" class="Icon"
     onclick='batchnum.value="";FilterSubmit();'>
    </td>
    <td class=DataLabel>Unique #<br>
    <input type=text name=filtadmn id=filtadmn size=8 maxlength=8
     class="JustifyLeft"
     onblur="checkUniq(this);" value="%ECLWEB24.10.009">
    <img src="../images/erase.gif" alt="Clear" class="Icon"
     onclick='filtadmn.value="";FilterSubmit();'>
    </td>
    <td>Invoice #<br>
    <input type=text size=10 maxlength=8 name=invnumbr id=invnumbr
    class="" title="Invoice #" value="%ECLWEB24.10.012"
    onblur="validateInvoice(this);">
<!--    <img src="../images/SearchIcon.gif" class=Icon name=srchinvn
    onclick="PatientInvSearchPP(filturno,dummy,invnumbr);">-->
    <img src="../images/SearchIcon.gif" class=Icon name=srchinvn id=srchinvn
    onclick="PatientInvSearchEMR(filturno,dummy,invnumbr);">
    <img src="../images/erase.gif" alt="Clear" class="Icon"
     onclick='invnumbr.value="";FilterSubmit();'>
    </td>
    <td>U/R #<br>
    <input type=text name=filturno id=filturno size=8 maxlength=8
     class="JustifyLeft"
     onblur="checkUR(this);" value="%ECLWEB24.10.008">
    <img src=../images/SearchIcon.gif class=Icon notab
     onclick="PatientSearchFrame(dummy,filturno,dummy,FilterSubmit);">
    <img src="../images/erase.gif" alt="Clear" class="Icon"
     onclick='filturno.value="";FilterSubmit();'>
    </td>
    <td class=DataLabel>Status<br>
    <select name=claimsta id=claimsta title="Status"
         onchange="FilterSubmit();">
    <option value="  ">All</option>
    <option value=" 0">Not Sent/Waiting</option>
    <option value=" 1">Error (PAS Validation)</option> 
    <option value=" 2">Extracted</option>
    <option value=" 3">Error (SA Validation)</option>
    <option value=" 4">Posted</option>
    <option value=" 5">Received</option>
    <option value=" 6">Assessment Complete reported</option>
    <option value=" 7">Remittance Reported</option>
    <option value=" 8">Closed</option>
    </select>
    </td>
    <td class=DataLabel align=center>All (Excl. Wait) <br>
    <input type=checkbox name=t_exclwait title="All (Excl. Wait)" value="1" 
     onclick="exclwaitclick();FilterSubmit();">
    </td>
    <td class=DataLabel align=center>All (Excl. Closed) <br>
    <input type=checkbox name=t_exclclos title="All (Excl. Closed)" value="1" 
     onclick="exclcloseclick();FilterSubmit();">
    </td>
    <td>Extraction Date<br>
    <input type=button value="<<" class=SmallButton
     onclick='location.href="%ECLWEB24.10.017"'>
    %ECLWEB24.10.013
    <input type=button value=">>" class=SmallButton
     onclick='location.href="%ECLWEB24.10.018"'>
    <a href='javascript:document.SelectPeriod.exdtblnk.value=0;SelectDateFrame();'>
    <img src="../images/DateLookup.gif" border=0 class=Icon
     alt="Select Date" align=absmiddle></a>
    <a href='javascript:document.SelectPeriod.exdtblnk.value=0;SelectView("0");'>
    <img src=../images/DayIcon.gif border=0 class=Icon
     alt="View Today" align=absmiddle></a>
    <a href='javascript:document.SelectPeriod.exdtblnk.value=0;SelectView("1");'>
    <img src=../images/WeekIcon.gif border=0 class=Icon
     alt="View This Week" align=absmiddle></a>
    <a href='javascript:document.SelectPeriod.exdtblnk.value=0;SelectView("2");'>
    <img src=../images/MonthIcon.gif border=0 class=Icon
     alt="View This Month" align=absmiddle></a>
    </td>
</tr>
</table>
</form>

</div>
<div id=TableLocation></div>
<script type="text/javascript">
function AddTableRows() {
%ECLWEB24.10.001.patweb98.01.001
%ECLWEB24.10.028.patweb98.01.001
}
</script>

<span id=HospID style="display:none;">
<table width=100% align=center border=0 cellspacing=2 cellpadding=1>
    <tr><td class=DataLabel>Hospital ID</td>
    <td><select name=hospcode id=hospcode title="Hospital ID "
                    onchange="FilterSubmit();">
    <option value="      ">All</option>
    %ECLWEB24.10.003
    </select>
    </td></tr>
</table>
</span>

//<span id=HlthFd style="display:none;">
//<table width=100% align=center border=0 cellspacing=2 cellpadding=1>
//    <tr><td class=DataLabel>Health Fund</td>
//    <td><select name=healthfd id=healthfd title="Health Fund" 
//                onchange="healthfundchange();FilterSubmit();">
//    <option value="      ">All</option>
//     ECLWEB01.03.004     
//    </select>
//    </td></tr>
//</table>
//</span>

<!--<span id=ClmTyp style="display:none;">
<table width=100% align=center border=0 cellspacing=2 cellpadding=1>
    <tr><td class=DataLabel>Claim Type</td>
    <td><select name=claimtyp id=claimtyp title="ClaimType" 
         onchange="healthfundchange();FilterSubmit();">
    <option value="   ">All</option>
     PATWEB93.14.006.2
    </select>
    </td></tr>
</table>
</span>-->

<script type="text/javascript">
if (document.SelectPeriod.ibcnmhos.value==1) {
  HospitalID.innerHTML = HospID.innerHTML;
}
//HealthFundClaimType="ECLWEB01.03.005";
// for (var i =0 ; i < document.SelectPeriod.hlfdclty.length; i++) {
//  if (document.SelectPeriod.hlfdclty.options[i].value==HealthFundClaimType) {
//       document.SelectPeriod.hlfdclty.selectedIndex=i } };

//ShowHLCTSpan();

if (document.SelectPeriod.exclwait.value=="1") {
  document.SelectPeriod.t_exclwait.checked=true;
}
if (document.SelectPeriod.exclclos.value=="1") {
  document.SelectPeriod.t_exclclos.checked=true;
}

ClaimStatus="%ECLWEB24.10.011"
 for (var i =0 ; i < document.SelectPeriod.claimsta.length; i++) {
  if (document.SelectPeriod.claimsta.options[i].value==ClaimStatus) {
       document.SelectPeriod.claimsta.selectedIndex=i } };

//alert(location.href);
</script>
