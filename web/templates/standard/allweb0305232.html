<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="">
<meta name="CrossBrowser" content="true">
<script language="javascript" src="../js/allweb03.js"></script>
<script type="text/javascript">
function AddEncounter(theForm){
    if(!isWhitespace(theForm.alreudt1.value)) {
      if(SetDateYYYYMMDD(theForm.alenc005.value) < theForm.alreudt1.value) {
        alert("Contact Date cannot be before Episode Start Date.");
        return;
      }
    } else {
      if(!isWhitespace(theForm.alredact.value)) {
        if(SetDateYYYYMMDD(theForm.alenc005.value) < theForm.alredact.value) {
          alert("Contact Date cannot be before Episode Start Date.");
          return;
        }
      }
    }

    if(!CheckDateTimeRange(theForm.alenc005,
                           theForm.alenc006,
                           theForm.alenc017,
                           theForm.alenc018)) {
      alert('Contact Start Date/Time cannot be after Contact End Date/Time');
      return;
    }

    //Display alert it NDIS Flag set and claim type NDIS
    if ((theForm.alenc115.value.charAt(28)=="D") &&
        (theForm.ndisvald.value=="0")){
       NDISRedirect();
    }

    SubmitHiddenNew(theForm)
}
//------------------------------------------------------------------------
// Function : Referral Number Search Frame
//------------------------------------------------------------------------
function RefSearchFrame(ReturnRefe,ReturnName,ReturnName1) {
  DFrameStart();
  window.ReturnFunction="";
  window.ReturnRefe=ReturnRefe ;
  window.ReturnName=ReturnName ;
  window.ReturnName1=ReturnName1 ;
//
  if (RefSearchFrame.arguments.length > 2) {
    window.ReturnFunction=RefSearchFrame.arguments[3] }
//
  document.getElementById('PopUpFrame').src="../lookups/RefSearchFrame.html"
  SearchFrameShow();
}
//-------------------------------------------------------------------------
 
function ToggleCombo(){

if(AddForm.checkbx2.checked==false){
   AddForm.checkbx1.disabled=false;
   AddForm.checkbx2.value=0;
   AddForm.alref006.className="DataField";
  }
else{
   AddForm.checkbx1.disabled=true; // disable Waiting List
   AddForm.checkbx1.checked=false;
   AddForm.alref006.className="Mandatory";//make the class mandatory 
   AddForm.checkbx2.value=1;
  }

}

function ShowHideBill(){

var PatientType;

if (AddForm.alenc009!=undefined) {
  PatientType=AddForm.alenc009.value.substr(4,1);
}

CompensationCode=AddForm.alenc115.value.substr(13,1);
flag=AddForm.flag.value;
if(flag==1&&(PatientType==1 || PatientType==2)&&(CompensationCode=="C" || CompensationCode=="E")){
   Units.style.display=""
   Units.innerHTML=BillableUnits.innerHTML; }
 else{
   Units.style.display="none"
   Units.innerHTML="";}
if(CompensationCode=="E")
  if(AddForm.itemn001!=undefined) {
    AddForm.itemn001.className="Mandatory";
  }
else
  if(AddForm.itemn001!=undefined) {
    AddForm.itemn001.className=""; 
   }
}

function PackComments(){
AddForm.alenc107.value=AddForm.comments.value.substring(0,80); 
AddForm.alenc108.value=AddForm.comments.value.substring(80,160);
}
//
function ShowHideWaitingList(){
if(document.AddForm.status.value=="0") {
  Wait.style.display='';}
else {
  Wait.style.display='none';}
}
//
function ShowVACS() {
   VacsFlag=document.AddForm.alenc010.value.substring(6,7)
   if(VacsFlag==0) {
      Vacs.innerHTML="";
      Vacs.style.display="none";
      Activity.style.display="";
      Activity.innerHTML=DisplayActivity.innerHTML;
//    Items.innerHTML="";
//    Items.style.display="none";
      Units.innerHTML="";
      Units.style.display="none";
   } else {
      Vacs.style.display="";
      Vacs.innerHTML=DisplayVacs.innerHTML;
      Activity.innerHTML="";
      Activity.style.display="none";
//    Items.innerHTML=DisplayItems.innerHTML;
//    Items.style.display="";
      ShowHideBill();
//    
      DClaim=AddForm.deftclmc.value
      for (var i=0; i < document.AddForm.alenc115.length; i++) {
      if (document.AddForm.alenc115.options[i].value.substr(0,3)==DClaim.substr(0,3)){
      document.AddForm.alenc115.selectedIndex=i; } }
//
DClin=AddForm.deftclin.value
for (var i=0; i < document.AddForm.alenc003.length; i++) {
if (document.AddForm.alenc003.options[i].value.substr(0,6)==DClin.substr(0,6)){
      document.AddForm.alenc003.selectedIndex=i; } }
//


   }
}
function LinkedVisit() {
p=AddForm
CheckReferral(9,p.admissno,p.deptcode,p.namedesc,
            p.alenc008,p.deftclmc,p.deftclin,
            p.status,p.dummy2,p.dummy2,p.dummy2,p.alreudt1,p.alredact);
}
</script>
</head>

%START.OF.PAGE
<body onload="PageLoad(event);ShowVACS();CommonContact(AddForm);">

<span class=DFrameTitleBar>
<img border=0 align=right src=../images/ExitIcon.gif 
 onclick=DFrameExitRefresh()>
<script language=javascript>document.write(self.document.title);</script>
</span>
<div id=PageBodySection>
<form name=AddForm action="allweb03.pbl" method=post>
<input type=hidden name=reportno value=1>
<input type=hidden name=updatety value="A">
<input type=hidden name=urnumber value="">
<input type=hidden name=alenc004 value="%ALLWEB03.05.032.0">
<input type=hidden name=deptcode value="%ALLWEB03.05.017">
<input type=hidden name=alenc107 value="">
<input type=hidden name=alenc108 value="">
<input type=hidden name=flag value="%ALLWEB03.05.022">
<input type=hidden name=deftclmc >
<input type=hidden name=deftclin >
<input type=hidden name=status value="">
<input type=hidden id=dummyret name=dummyret value="">
<input type=hidden id=dummysit name=dummysit value="">
<input type=hidden id=dummydat name=dummydat value="">
<input type=hidden name=dummy1>
<input type=hidden name=dummy2>
<input type=hidden id=mbs name=mbs value="M">
<input type=hidden name=alenc010 value="">
<input type=hidden name=alreudt1 value="">
<input type=hidden name=alredact value="">
<input type=hidden name=deptlcod value="%ALLWEB03.05.601.3">
<input type=hidden name=ndisvald value="%ALLWEB03.05.636">
<input type=hidden name=CATEG_CL value="CL">

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel width=15%> Department </td>
      <td> <input type=text name=department size=40 class=Readonly readonly  
      title="Department" value="%ALLWEB03.05.018"></td> </tr>     

<tr><td class=DataLabel width=15%>Health Care Provider</td>
    <td colspan=3><input type=text name=SProvider size=40 
       class=Readonly readonly title="Health Care Provider" 
       value="%ALLWEB03.05.019"> <td></tr>

<tr><td class=DataLabel width=15%>Contact Start Date</td>
    <td><input type=text class=Readonly readonly id=alenc005 name=alenc005 
      value="%ALLWEB03.05.016" title="Contact Start Date" Size=13 
      onblur="CalcDirectUnitStartDate(AddForm);"></td>
    <td class=DataLabel width=15%>Start Time</td>
    <td class=DataField>
      <input type=text size=8 value="" class=Mandatory 
        title="Contact Start Time" id=alenc006 name=alenc006
        onblur="CalcDirectUnitStartTime(AddForm);"> 
      <img src=../images/DateTimeStamp.gif class=Icon 
        onclick='SetCurrentDateTime(null,AddForm.alenc006)'>
      <img src=../images/TimeLookup.gif class=Icon 
        onclick='TimeLookupFrame(AddForm.alenc006)'>
    </td></tr>

<tr><td class=DataLabel width=15%>Contact End Date</td>
    <td><input type=text class=Readonly readonly id=alenc017 name=alenc017
      value="%ALLWEB03.05.016" title="Contact End Date" Size=13></td>
    <td class=DataLabel width=15%>End Time</td>
    <td class=DataField>
    <input type=text size=8 value="" class=Mandatory
      title="Contact End Time" id=alenc018 name=alenc018
      onblur="CalcDirectUnitEndTime(AddForm);">
    <img src=../images/DateTimeStamp.gif class=Icon
      onclick='SetCurrentDateTime(null,AddForm.alenc018)'>
    <img src=../images/TimeLookup.gif class=Icon 
      onclick='TimeLookupFrame(AddForm.alenc018)'>
    </td></tr>

<tr> <td class=DataLabel width=15%>Referral Number</td>
    <td class=DataField width=40%>
    <input type=text size=10 class=Mandatory title="Referral Number" 
    id=admissno name=admissno maxLength=8  onblur="justifyRight(this);
    CheckReferral(9,admissno,deptcode,namedesc,alenc008,
          deftclmc,deftclin,status,dummy2,dummy2,dummy2,
          alreudt1,alredact);
    ShowHideWaitingList();">
    <input type=text size=25 class=Readonly title="Name" name=namedesc
     id=namedesc readonly>
    <img src=../images/SearchIcon.gif class=Icon 
     onclick=RefSearchFrame(admissno,namedesc,alenc008,LinkedVisit);>
     </td>
    <td class=DataLable width=10%>Linked Visit</td>
    <td class=DataField colspan=3>
      <input type=text size=10 name=alenc008 value="" maxlength=8
         id=alenc008 onblur="justifyRight(this);
                 ValidateVisit(AddForm.alenc008,AddForm.urnumber,dummy1);"> 
    <img src=../images/SearchIcon.gif class=Icon
     onclick=VisitSearchFrame(urnumber,alenc008) >
     </td></tr>

</table>

<div id=Vacs></div>
<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>

<tr><td class=DataLabel width=15%>%STANDARD.01.017.CL</td>
    <td width=40%><select class="Mandatory SelectBig" name=alenc115
         id=alenc115 title="%STANDARD.01.017.CL" onchange="ShowHideBill();">
         <option></option>
         %ALLWEB03.05.013.9.1.10.2.X
         </select>
    </td>
    <td class=DataLabel width=10%></td>
    <td class=DataField></td>
    </tr>
</table>
<div id=Activity></div>
<div id="Units"></div>
<div id=Items></div>


<div id="Wait" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel width=15%>Stay as Waiting Referral</td>
    <td class=DataField>
    <input type=checkbox name=checkbx1 value="1"></td>
    <td></td>
    <td></td>
    </tr>
</table>
</div>

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr valign=top><td class=DataLabel width=15%> Comments </td>
    <td class=DataField colspan=3>
    <textarea rows=3 cols=60 onblur=PackComments() name=comments> </textarea>
    </td></tr>
</table>
<div id="HCPcheckbox">
<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel width=15%>Additional HCP</td>
    <td><input type=checkbox id=addithcp name=addithcp value="1"
         onclick="CheckAddHCP();"></td></tr>
</table>
</div>

<div id=AdditionalHCP></div>

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td colspan=4 align=center><br>
<input type=button id=btnAdd name=formactn value="Add" class="button" 
    onclick="AddEncounter(AddForm);tempDisable(this)">
    <input type=button Value="Cancel" class="button" 
     onclick="DFrameCloseRefresh();">
    </td></tr>
</table>
</form>
</div>
<span id="DisplayVacs" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel width=15%>Clinic Type</td>
    <td class=DataField><select  name=alenc003 class="SelectBig Mandatory"
     title="Clinic Type">
    <option></option>
    %ALLWEB03.05.011 
    </select></td></tr>

<tr><td class=DataLabel width=15%>Patient Type</td>
    <td><select class="Mandatory SelectBig" name=alenc009 title=" Patient Type"
         id=alenc009 onchange="ShowHideBill();">
        <option></option>
        %ALLWEB03.05.012.2
        </select></td></tr>

<tr><td class=DataLabel width=15%>Direct Units</td>
  <td class=DataField width=40%>
      <input type=text size=12 name=alenc011 id=alenc011
        title="Direct Units" min=0 class=Mandatory maxLength=6
        onblur="CalcContactEndDateTime(AddForm);"></td>
  <td class=DataLabel width=10%>Indirect Units</td>
      <td class=DataField>
      <input type=text size=12 name=alenc013 title="Indirect Units" min=0
      id=alenc013 maxLength=6 onblur=checkInteger(this,this.title)></td></tr>
</table>
</span>
<span id="DisplayActivity" style="display:none;">
  <table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
  <tr><td class=DataLabel width=15%>Direct Units</td>
  <td class=DataField width=40%>
      <input type=text size=12 name=alenc011 id=alenc011
        title="Direct Units" min=0 class=Mandatory maxLength=6
        onblur="CalcContactEndDateTime(AddForm);"></td>
    <td class=DataLabel width=10%>Indirect Units</td>
    <td class=DataField>
    <input type=text size=12 maxsize=5 name=alenc013 title="Indirect Units" 
     min=0
    onblur=checkInteger(this,this.title)></td></tr>

</table>
</span>
<span id="BillableUnits" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel width=15%>Direct Billable Units</td>
    <td class=DataField width=40%>
    <input type=text size=12 name=alenc012 title="Direct Billable Units" min=0
     id=alenc012 onblur=checkInteger(this,this.title) ></td>
    <td class=DataLabel width=10%>Indirect Billable Units</td>
    <td class=DataLable>
    <input type=text size=12 title="Indirect Billable Units" min=0
    onblur=checkInteger(this,this.title) id=alenc014 name=alenc014>
    </td></tr>

<tr><td class=DataLabel width=15%>Bulk Billing Code</td>
    <td DataField>
    <select name=alenc015 class="SelectBig" title="Bulk Billing Code">
    <option></option>
    %ALLWEB03.01.215.2
    </select></td></tr>
</table>
</span>
<span id="DisplayItems" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel width=15%>Item Code 1</td>
    <td class=DataField width=40%>
    <input type=text size=10 id=itemn001 name=itemn001 title="Item Code 1"
     onblur="validatePMBS(itemn001,dummy);" >
    <input type=text size=20 name=dummy value="" readonly class=Readonly
    id=dummy>
    <img src=../images/SearchIcon.gif class=Icon
     onclick='PriMbsSearchFrame(dummyret,itemn001,dummysit,dummyret,dummy,mbs)'>
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(itemn001,dummy);">
    </td>
    <td class=DataLabel width=10%>&nbsp;</td>
    <td class=DataField>&nbsp;
    </td></tr>
</table>
</span>

<span id="ShowAdditionalHCP" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel width=15%>Additional HCP 1</td>
    <td><input type=text id=alenc025 name=alenc025 size=10 maxlength=10
         title="Additional HCP 1"
         onblur="ValidateHCP(18,0,alenc025,d_alenc025);">
        <input type=text name=d_alenc025 size=20 class=Readonly readonly
         id=d_alenc025 title="Additional HCP 1">
        <img src=../images/SearchIcon.gif class=Icon
         onclick=HCPSearchFrame(alenc025,d_alenc025,0) >
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(alenc025,d_alenc025);">
    </td>
    <td class=DataLabel width=15%>Additional HCP 2</td>
    <td><input type=text id=alenc026 name=alenc026 size=10 maxlength=10
         title="Additional HCP 2"
         onblur="ValidateHCP(18,0,alenc026,d_alenc026);">
        <input type=text name=d_alenc026 size=20 class=Readonly readonly
         id=d_alenc026 title="Additional HCP 2">
        <img src=../images/SearchIcon.gif class=Icon
         onclick=HCPSearchFrame(alenc026,d_alenc026,0) >
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(alenc026,d_alenc026);">
    </td></tr>

<tr><td class=DataLabel width=15%>Additional HCP 3</td>
    <td><input type=text name=alenc027 size=10 maxlength=10
         id=alenc027 title="Additional HCP 3"
         onblur="ValidateHCP(18,0,alenc027,d_alenc027);">
        <input type=text name=d_alenc027 size=20 class=Readonly readonly
         id=d_alenc027 title="Additional HCP 3">
        <img src=../images/SearchIcon.gif class=Icon
         onclick=HCPSearchFrame(alenc027,d_alenc027,0) >
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(alenc027,d_alenc027);">
    </td>
    <td class=DataLabel width=15%>Additional HCP 4</td>
    <td><input type=text name=alenc028 size=10 maxlength=10
         id=alenc028 title="Additional HCP 4"
         onblur="ValidateHCP(18,0,alenc028,d_alenc028);">
        <input type=text name=d_alenc028 size=20 class=Readonly readonly
         id=d_alenc028 title="Additional HCP 4">
        <img src=../images/SearchIcon.gif class=Icon
         onclick=HCPSearchFrame(alenc028,d_alenc028,0) >
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(alenc028,d_alenc028);">
    </td></tr>
</table>
</span>
<script type="text/javascript">
if(%ALLWEB03.05.400.12!=1){
  document.getElementById("HCPcheckbox").style.display="none";
}
</script>
