<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function nurseName(nurse){
  if (isWhitespace(nurse.value)) { return;;}
  nurse=nurse.value.toUpperCase()
  admissno=document.PatientLinks.admissno.value;
  user=document.PatientLinks.webuseid.value;

  var hcpnurse = chkHcpEDNurse();
  if  (hcpnurse==true){
      var serverURL   = "../cgi-bin/patweb80.pbl?reportno=18" +
                        "&valdcode=" + nurse.replace(/ /g,"+");
  }
  else {
      var serverURL   = "../cgi-bin/patweb80.pbl?reportno=17" +
                        "&valdcode=" + nurse.replace(/ /g,"+");
  }
  var returnValue = RSExecute(serverURL);
  if (returnValue.status!=0) {  
    NurseForm.emvis007.value="";
    NurseForm.emvis007.focus();
    return;
  }
  else {
    ReturnValue=returnValue.return_value.split("|");
    NurseForm.dummy3.value=trim(ReturnValue[1]) + " " + trim(ReturnValue[0]);
  }
}
function UpdNurse(nurse) {
  if (isWhitespace(nurse.value)) { return;;}
  nurse=nurse.value.toUpperCase()
  admissno=document.PatientLinks.admissno.value;
  user=document.PatientLinks.webuseid.value;   
  datevald=document.PatientLinks.datevald.value;

  var hcpnurse = chkHcpEDNurse();
  if  (hcpnurse==true){
      var serverURL   = "../cgi-bin/patweb80.pbl?reportno=18" +
                        "&valdcode=" + nurse.replace(/ /g,"+");
  }
  else {
      var serverURL   = "../cgi-bin/patweb80.pbl?reportno=17" +
                        "&valdcode=" + nurse.replace(/ /g,"+");
  }
  var returnValue = RSExecute(serverURL);
  if (returnValue.status!=0) {  return; }

  var serverURL   = "../cgi-bin/emrweb08.pbl?reportno=4" +
                    "&admissno=" + admissno.replace(/ /g,"+") +
                    "&webuseid=" + user.replace(/ /g,"+") +    
                    "&updttype=ALNUR" +    
                    "&doctcode=" + nurse.replace(/ /g,"+") +
                    "&datevald=" + datevald.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  DFrameExitRefresh();
}
function GetDateVLCookie() {
  datevlcookie = GetCookieData('DateVLCookie');
  if (!isWhitespace(datevlcookie) && datevlcookie != 'unknown') {
    document.cookie="DateVLCookie=;";
    document.PatientLinks.datevald.value=datevlcookie;
  }
}
//C-0825792 - Check parameter to Use pmshcpaf/oprnuraf for ED Nurse
function chkHcpEDNurse(){
  if (document.getElementById('emcnurse')) {
      if (document.getElementById('emcnurse').value == "1") {
        return true;
       }
      else {
        return false;
      }
  }
  else {
      return false;
  }
}
//C-0825792 - Search Nurse from pmshcpaf/oprnuraf for ED Nurse
function SearchEDNurse(NurseId,ReturnNurseName) {
  var hcpnurse = chkHcpEDNurse();
  if (hcpnurse==true){
     HCPSearchFrame(NurseId,ReturnNurseName,20);
  }
  else {
     NurseSearchFrame(NurseId,ReturnNurseName);
  }
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);GetDateVLCookie();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
Nurse Handover, Current Nurse : %EMRWEB02.01.164.0
</span>

<div id=PageBodySection>
<form name=NurseForm style="margin:0">
<input type=hidden name=gnm id=gnm>
<input type=hidden name=emcnurse id=emcnurse
       value="%STANDARD.01.025.122.008.0.1">

<table border=1 width=100% cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell align=center colspan=3>
     Attending Nurse History</td></tr>
<tr><td class=HeadingCell align=left>Arrival Date & Time</td>
    <td class=HeadingCell align=left>Attending Nurse</td>
    <td class=HeadingCell align=left>Seen Date & Time</td></tr>
%EMRWEB02.01.408
</table>
<table border=0 width=100% cellspacing=0 cellpadding=0>
<tr align=center><td class=DataLabel>Nurse
      <input type=text size=6 name=emvis007 id=emvis007 title="Nurse Code"
       onblur="UpCase(this);nurseName(NurseForm.emvis007);">
      <input type=text size=30 name=dummy3 id=dummy3 title="Nurse Name"
      value="" readonly class=Readonly>                                         
      <img class=Icon src="../images/SearchIcon.gif"
       onclick="SearchEDNurse(NurseForm.emvis007,NurseForm.dummy3)">

</td></tr>
<tr><td align=center><input type=button class="button" value="Change"
     name="changeButton" id="changeButton"
     onclick="tempDisable(this);UpdNurse(NurseForm.emvis007);">
     <input type=button class="button" value="Close"
     onclick="DFrameExitRefresh();">
</td></tr>
</table>
</form>
</div>
<form name=PatientLinks method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=webuseid value="%STANDARD.01.008">
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=MenuType value="%EMRWEB02.01.088">
<input type=hidden name=datevald value=" ">
</form>
