%START.OF.PAGE
<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3&key=%STANDARD.01.044.124.161.050"></script>
<script type="text/javascript" src="../js/GoogleLibrary.js"> </script>
<style type=text/css>
.InformationIcon {
  background: url("../images/AlertSprite.png") -0px -140px no-repeat;
  width:20px;
  height:20px;
}
</style>
<script type="text/javascript">
function InitTable() {
  el=document.getElementById("MapLocation");
  el.innerHTML="<span style='font-size:12px;background-color:#111;color:eee;"+
               "border:1px solid grey;position:absolute;"+
               "text-align:center;height:50px;width:300px;"+
               "margin-left:200px;margin-top:100px;padding:50px;'>"+
               "<img src='../images/loading.gif'><br><br>Geo Coding in Progress<br>Please Wait</span>";
  setTimeout(function(){ DisplayTable(); }, 100);

}
function DisplayTable() {
 t = new Table();    // Create New Table Object
 el=document.SelectWard;
 wardcode=el.wardcode.options[el.wardcode.selectedIndex].value;
 theURL="geocod01.php?reportno=1&wardcode="+wardcode
 var xmlHttp = createHttpObject();
 xmlHttp.open("GET", theURL, false);
 xmlHttp.send();
 if (xmlHttp.responseText!=""&&xmlHttp.status == 200) {
    h = document.getElementsByTagName("head")[0];
    s = document.createElement("script");
    s.type="text/javascript";
    h.appendChild(s);
    s.text=xmlHttp.responseText;
    AddRows();
 }
 ShowList();
 DisplayMap();
}
function ShowList() {
 var OS = "<dl>";
 LinkFlag=false;
 for(var i = 0; i < t.rows.length; i++) {
   markerColor=markerColors[Math.floor(i/26)]
   markerNo=i-(26*Math.floor(i/26));
   sAlpha=markerColor+String.fromCharCode(65+markerNo);
   OS += "<dt onclick='LinkPatient(\""+i+"\");'>" + 
         "<span style='padding:5px;display:inline-block;vertical-align:top'><img "+
         "src='https://maps.gstatic.com/mapfiles/marker"+sAlpha+".png'></span>"+
         "<span style='width:80%;padding:5px;display:inline-block;vertical-align:top'>"+t.rows[i][2] + 
         "<br>"+t.rows[i][3] 
   if (t.rows[i][6]=="1") {
      OS += "<span class=InformationIcon title='Partial Address Match\n"+t.rows[i][7]+"'></span>"
   }
   OS += "<br>Diagnosis : "+t.rows[i][8] + "</span><dt>" 
 }
 if (t.rows.length==0) {
    OS+="<dt style='text-align:center;color:darkred;'>"+
        "No Patients Currently in this Ward."+
        "</dt>";
 }
 OS += "</dl>";
 document.getElementById("TableLocation").innerHTML=OS;
}
function FormatPatientIconSpan(Indicators) {
  ImageStr="<span class=PatientFolder"+ Indicators.substr(0,3) + "></span>"
  return ImageStr;
}
function LinkPatient(rowNo) {
   alert(t.rows[rowNo][2]+"\n"+t.rows[rowNo][3]);
}
</script>
</head>
<body onload="PageLoad(event);InitTable();">
<table width=100% cellspacing=0 border=0>
<form name=SelectWard action=patweb93.pbl method=get>
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="22">
<tr><td class=HeadingCell style='width:90px;'>Select Ward</td>
    <td class=HeadingCell>
     <select name=wardcode onchange="SelectWard.submit();" >
      %PATWEB93.01.001
     </select>
<td></tr>
</form>
</table>
<table width=100% border=1 cellpadding=0 cellspacing=0 style='border:1px solid #ccc;'>
<tr valign=top><td width=30%><div id="TableLocation"></div></td>
    <td><div id=MapLocation style='width:100%;height:600px;'></div></td>
</table>
</body>
</html>
