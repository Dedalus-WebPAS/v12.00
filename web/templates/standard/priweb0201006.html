<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome"    content="standard">
<meta name="CrossBrowser" content="true">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>

<!--WORKERS COMP-->

<script type="text/javascript">

function setInsurance() {
  document.getElementById('InsuranceDIV').innerHTML=
                document.getElementById('InsuranceSPAN1').innerHTML;
  if (InsuranceKeywordSearch){
    document.getElementById('InsuranceDIV').innerHTML=
                document.getElementById('InsuranceSPAN2').innerHTML;
  }
}

function SetFields() {
  suburb = UpdateForm.prcom003;
  state = UpdateForm.prcom004;
  postcode = UpdateForm.prcom005;
}

function CheckSuburb(Address) {
  if (Address!="") {
    LookupPostCode(Address);
  }
}

function SubmitClaim() {
  if (document.UpdateForm.prcnrdoc.value==1) {
    document.UpdateForm.redirect.value="priweb02.pbl?reportno=01&template=020"
    + "&urnumber=" + UpdateForm.urnumber.value.replace(/ /g,"+"); 
  }
  else {
    if (UpdateForm.progflag.value=="1") {
      document.UpdateForm.redirect.value="patweb76.pbl?reportno=01&template=001"
      + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+") 
      + "&visittyp=4" 
    }
    else if (UpdateForm.progflag.value=="2") {
      document.UpdateForm.redirect.value="priweb02.pbl?reportno=01&template=013"
      + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+") 
    } 
    else if (UpdateForm.progflag.value=="9") {
      document.UpdateForm.redirect.value="priweb02.pbl?reportno=01&template=013"
      + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+") 
      + "&additmsc=" + document.UpdateForm.additmsc.value;
    } 
    else {
      document.UpdateForm.redirect.value="priweb02.pbl?reportno=01&template=001"
      + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+") 
      + "&additmsc=" + document.UpdateForm.additmsc.value;
    }
  }

  document.UpdateForm.updttype.value="W";
  document.UpdateForm.progflag.value="2";
  UpdateForm.submit();
}

function lookUpWC() {
  var p = document.UpdateForm;

  WCRefNoSearchFrame(p.urnumber,p.prcom001,p.prcom002,p.d_addln2,p.prcom003,
                     p.prcom004,p.prcom005,p.prcom006,p.d_injdat,p.accepted,
                     document.getElementById('prcom008'),
                     p.prcom009,p.d_commt1,p.d_commt2,p.d_accloc,
                     p.d_cauinj,p.d_codinj,p.d_contnm,p.d_injcau,p.d_injcod,
                     p.prcom007);
}

function WCRefNoSearchFrame(URNumber,RetEName,RetAdd1,RetAdd2,RetAdd3,
                            RetAdd4,RetPost,RetTele,RetCDat,RetAccPt,
                            RetInsCod,RetClmNo,RetComn1,RetComn2,RetAloc,
                            RetCInj,RetInjCod,RetCName,RetCInjSel,RetInjCodSel,
                            RetAccPtSel) {
  DFrameStart();
  window.urnumber = URNumber;
  window.RetEName = RetEName;
  window.RetAdd1 = RetAdd1;
  window.RetAdd2 = RetAdd2;
  window.RetAdd3 = RetAdd3;
  window.RetAdd4 = RetAdd4;
  window.RetPost = RetPost;
  window.RetTele = RetTele;
  window.RetCDat = RetCDat;
  window.RetAccPt = RetAccPt;
  window.RetInsCod = RetInsCod;
  window.RetClmNo = RetClmNo;
  window.RetComn1 = RetComn1;
  window.RetComn2 = RetComn2;
  window.RetAloc = RetAloc;
  window.RetCInj = RetCInj;
  window.RetInjCod = RetInjCod;
  window.RetCName = RetCName;
  window.RetCInjSel = RetCInjSel;
  window.RetInjCodSel = RetInjCodSel;
  window.RetAccPtSel = RetAccPtSel;

  window.RetFunctn = InsurClaimSel;

  document.getElementById('PopUpFrame').src="../lookups/WCRefNoSearchFrame.html";
  SearchFrameShow();
}

// Function to be executed on selection of Workers Comp. Claim Details (Lookup)
function InsurClaimSel() {
  var p = document.UpdateForm;

  // Flip the value of 'Accepted by Insurance Company'
  var sAccept = (window.RetAccPt.value == 1)? 0 : 1;

  for (var i =0 ; i < p.prcom007.length; i++) {
    if (p.prcom007.options[i].value == sAccept) {
      p.prcom007.selectedIndex = i;
    }
  }

  // Append WC Address Line 2 onto Address Line 1
  p.prcom002.value = trim(p.prcom002.value) + " " + trim(p.d_addln2.value);
  p.prcom002.value = p.prcom002.value.substr(0,25);  // since it's only 25 chars
}

</script>
%START.OF.PAGE
<body onLoad="PageLoad(event);InitPostCodes();SetFields();
              document.UpdateForm.prcom001.focus();
              setInsurance();">
<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PRIWEB02.01.003";
PatientVIS="%PRIWEB02.01.081";
PatientNAM="%PRIWEB02.01.002";
PatientSTA="%PRIWEB02.01.086.078";
PatientALT="%PRIWEB02.01.084";
PatientSEX="%PRIWEB02.01.019";
PatientDOB="%PRIWEB02.01.020";
PatientAGE="%PRIWEB02.01.021";
PatientLOC="%PRIWEB02.01.083";
PatientPRI="%PRIWEB02.01.086.066.1";
PatientUNT="%PRIWEB02.01.066.0";
DoctorCOD="%PRIWEB02.01.082.003";
DoctorNAM="%PRIWEB02.01.082.002";
PatientAID="%PRIWEB02.01.086.090";
PatientIND="%PRIWEB02.01.086.091";
PatientCUR="%PRIWEB02.01.086.092";
PatientCLC="%PRIWEB02.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PRIWEB02.01.086.094";
PatientCDM="%PRIWEB02.01.086.095";
PatientVDH="%PRIWEB02.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>

<div id=PageBodySection>
<form name=UpdateForm action="priweb02.pbl" method=post
 onsubmit='return validateMandatory(this);' style="margin:0">
<input type=hidden name=reportno value="01">
<input type=hidden name=template value="006">
<input type=hidden name=updttype value=" ">
<input type=hidden name=urnumber value="%PRIWEB02.01.003">
<input type=hidden name=invoicen value="%PRIWEB02.01.213">
<input type=hidden name=uniqnumb value="%PRIWEB02.01.207">
<input type=hidden name=prhre001 value="%PRIWEB02.01.208">
<input type=hidden name=prhre002 value="%PRIWEB02.01.209">
<input type=hidden name=prhre003 value="%PRIWEB02.01.210">
<input type=hidden name=progflag value="%PRIWEB02.01.225">
<input type=hidden name=nextpage value=1>
<input type=hidden name=additmsc value="%PRIWEB02.01.228">
<input type=hidden name=prcnrdoc value="%PRIWEB02.01.206">
<input type=hidden name=redirect>
<input type=hidden name=accepted>
<input type=hidden name=d_addln2>
<input type=hidden name=d_injdat>
<input type=hidden name=d_commt1>
<input type=hidden name=d_commt2>
<input type=hidden name=d_accloc>
<input type=hidden name=d_cauinj>
<input type=hidden name=d_codinj>
<input type=hidden name=d_contnm>
<input type=hidden name=d_injcau>
<input type=hidden name=d_injcod>

<table align=center border=1 width=100% cellspacing=1 cellpadding=2>
<tr><td class=HeadingCell align=center>
    Workers Compensation Claim Details</td>
</tr>
</table>

<table width=100% border=0>
<tr><td class=DataLabel>Employer<br></td>
    <td><input type="text" size="40" name="prcom001" tabindex=1
         maxlength="30" value="%PRIWEB02.01.301" title="Employer Name"></td>

    <td class=DataLabel>Time of Accident</td>
    <td><input type="text" size="12" maxlength="5" tabindex=9 name=prcom010
         value="%PRIWEB02.01.310" title="Accident time"
         onblur="checkTimeMin(this, 'Time of Accident');">
        <img src=../images/TimeLookup.gif class=Icon time=UpdateForm.prcom010>
    </td>
</tr>

<tr valign=top><td class=DataLabel>Address</td>
    <td><input type="text" size="30" maxlength="25" tabindex=2  name="prcom002"
         value="%PRIWEB02.01.302" title="Employer Address"></td>

        <td class=DataLabel>Insurance<br></td>
        <td><div id="InsuranceDIV"></div></td>    
</tr>

<tr valign=top><td class=DataLabel>Suburb</td>
    <td><input type="text" size="30" maxlength="25" tabindex=3 name="prcom003"
         value="%PRIWEB02.01.303" title="Suburb"
         onblur="CheckSuburb(UpdateForm.prcom003.value);"></td>

    <td class=DataLabel>Insurance Claim No.<br>
    <td><input type="text" name="prcom009" size=25 maxlength="20"
         tabindex=11 value="%PRIWEB02.01.309" title="Insurance Claim Number">
        <img src="../images/SearchIcon.gif" class=Icon onclick="lookUpWC();">
    </td>
</tr>

<tr><td class=DataLabel>State</td>
    <td><input type="text" size="30" maxlength="25" tabindex=4  
         name="prcom004" value="%PRIWEB02.01.304" title="State"> Post code 
        <input type="text" size="8" maxlength="8" tabindex=5
         name="prcom005" value="%PRIWEB02.01.305" title="Post code"></td>
    <td class=DataLabel>Claim Accepted Insurance</td>
    <td><select name="prcom007" tabindex=12>
          <option></option>
          %PRIWEB02.01.307.2
        </select>
    </td>
</tr>

<tr><td valign="bottom" class=DataLabel>Employer Phone
    <td><input type="text" size="14" maxlength="12" tabindex=6
         name="prcom006" value="%PRIWEB02.01.306" title="Employer Phone">
    </td>
</tr>
</table>

<table width=100% border=0>
<tr><td colspan=4 align=center>
      <input type=button value="Update" tabindex=15 class="button" id="updbtn"
       onclick="tempDisable(this);SubmitClaim();">
      <input type=button value="Cancel" tabindex=16 class="button"
       onclick="SetCancel()" >
</td></tr>
</table>
</form>
</div>

<div id=SelectHeading></div>
<div id=SelectLocation></div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=006>
<input type=hidden name=urnumber value="%PRIWEB02.01.003">
<input type=hidden name=MenuType value="%PRIWEB02.01.088">
<input type=hidden name=uniqnumb value="%PRIWEB02.01.207">
<input type=hidden name=prhre001 value="%PRIWEB02.01.208">
<input type=hidden name=prhre002 value="%PRIWEB02.01.209">
<input type=hidden name=prhre003 value="%PRIWEB02.01.210">
</form>

<span id="InsuranceSPAN1" style="display:none">
  <select name="prcom008" id="prcom008" tabindex=10 title="Insurance">
              <option> </option>
              %PRIWEB02.01.308.2
  </select>
</span>

<span id="InsuranceSPAN2" style="display:none">
  <input type="text" size="6" name="prcom008" id="prcom008" tabindex=10
      value="%PRIWEB02.01.308.0" title="Insurance">
    
  <input type="text" size="35" name="d_prcom008" id="d_prcom008"
         maxlength="30" value="%PRIWEB02.01.308.1"
      title="Insurance">
    <img src="../images/SearchIcon.gif" class=Icon
        onclick="InsuranceSearchFrame(prcom008,d_prcom008);">
        <img src="../images/ClearIcon.gif" class=Icon
                onclick="clrFields(prcom008,d_prcom008);">
</span>

<script type="text/javascript">
function SetCancel() {
  var urnumber = "%PRIWEB02.01.003";
  var link = "priweb02.pbl?reportno=01&template=001&urnumber="+urnumber;
  location.href = link;
}

PmiPatientFolder="%PRIWEB02.01.679.3"
PTCNCOMF="%STANDARD.01.025.110.243.0.1"

if (PmiPatientFolder.substr(3,1) != "3" && PTCNCOMF == "2") {
  alert("Patient folder conflict - " +
        "Patient folder details will be updated.");
}

for (var i =0 ; i < document.UpdateForm.prcom007.length; i++) {
  if (document.UpdateForm.prcom007.options[i].value=="%PRIWEB02.01.307.0") {
    document.UpdateForm.prcom007.selectedIndex=i } };

for (var i =0 ; i < document.getElementById('prcom008').length; i++) {
if(document.getElementById('prcom008').options[i].value=="%PRIWEB02.01.308.0") {
    document.getElementById('prcom008').selectedIndex=i } };

</script>
