<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<script  type="text/javascript">
function UpdatePayer() {
  if (validateMandatory(UpdateForm)) {
    if (!isWhitespace(UpdateForm.pmpyr019.value)) {
      if (!CheckDateRange(UpdateForm.pmpyr018,UpdateForm.pmpyr019)) {
        return;
      }
    }
    setFormactn('U');
  }
}

function DeletePayer() {
  if (confirm("This will delete Admission Payer details too. \n" +
              " Are you sure you want to Delete this Payer?")) {
    document.UpdateForm.updttype.value="D";
    document.UpdateForm.submit()
  }
}

function valPostCode(){
  if (isWhitespace(UpdateForm.pmpyr010.value)){
    return;
  }

  UpCase(UpdateForm.pmpyr010);

  if (trim(UpdateForm.pmpyr012.value)!="8888"){
    suburb   = UpdateForm.pmpyr010;
    state    = UpdateForm.pmpyr011;
    postcode = UpdateForm.pmpyr012;
    LookupPostCode(UpdateForm.pmpyr010.value);
  }
}

function SetPostVars() {
  suburb   = UpdateForm.pmpyr010;
  state    = UpdateForm.pmpyr011;
  postcode = UpdateForm.pmpyr012;
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line 1 - 'pmpyr008'
  // line 2 - 'pmpyr009'
  // suburb - 'pmpyr010'
  // state - 'pmpyr011'
  // postcode - 'pmpyr012'

  InitAddressSearchFields('trAddrSrch','pmpyr008','pmpyr009','pmpyr010','pmpyr011','pmpyr012');
}
function ShowAddressSearch() {
  OpenAddressSearch('1',PopulateAddress,EnableAddressFields);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('pmpyr008', true);
  ToggleFieldReadOnly('pmpyr009', false);
  ToggleFieldReadOnly('pmpyr010', true);
  ToggleFieldReadOnly('pmpyr011', true);
  ToggleFieldReadOnly('pmpyr012', true);

  SetFieldValue('pmpyr008',StreetLine);
  SetFieldValue('pmpyr009','');
  SetFieldValue('pmpyr010',Suburb);
  SetFieldValue('pmpyr011',State);
  SetFieldValue('pmpyr012',Postcode);
}
function EnableAddressFields() {
  ToggleFieldReadOnly('pmpyr008', false);
  ToggleFieldReadOnly('pmpyr009', false);
  ToggleFieldReadOnly('pmpyr010', false);
  ToggleFieldReadOnly('pmpyr011', false);
  ToggleFieldReadOnly('pmpyr012', false);

  SetFieldValue('pmpyr008','');
  SetFieldValue('pmpyr009','');
  SetFieldValue('pmpyr010','');
  SetFieldValue('pmpyr011','');
  SetFieldValue('pmpyr012','');
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);InitPostCodes();InitAddressSearch();">

<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Update Payer
</span>

<form name=UpdateForm method=post action=patweb07.pbl style="margin:0">
<input type=hidden name=reportno value="16">
<input type=hidden name=template value="003">
<input type=hidden name=updttype value="">
<input type=hidden name=urnumber value="%PATWEB07.16.003">
<input type=hidden name=pmpyr001 value="%PATWEB07.16.003">
<input type=hidden name=pmpyr003 value="%PATWEB07.16.103.1">
<input type=hidden name=pmpyr018 value="%PATWEB07.16.118">
<input type=hidden name=ptcnuadv id=ptcnuadv
value="%STANDARD.01.025.123.247.0.1">

<table align=center width=100% border=0>
<tr><td>

<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td class=DataLabel width=18%>Default Payer</td>
    <td><input type=checkbox name=d_pmpyr002 id=d_pmpyr002 disabled></td>
    <td class=DataLabel>%STANDARD.01.017.CL</td>
    <td><input type=text title="%STANDARD.01.017.CL"
     class="Readonly" readonly value="%PATWEB07.16.103.0">
    </td>
</tr>

<tr><td class=DataLabel>Title</td>
    <td><select title="Title" name=pmpyr004 id=pmpyr004 tabindex=3>
        <option></option>
        %STANDARD.01.029
        </select></td>
    <td class=DataLabel>Relationship</td>
    <td><select name=pmpyr013 id=pmpyr013 tabindex=20 title="Relationship">
        <option value=""></option>
        %STANDARD.01.030
        </select>
    </td>
</tr>

<tr><td class=DataLabel>Surname</td>
    <td><input type=text name=pmpyr005 id=pmpyr005 title="Surname"
         size=35 maxlength=35 tabindex=3 value="%PATWEB07.16.105" tabindex=4
         onchange="UpCase(this);">
    </td>
    <td class=DataLabel>Private Phone</td>
    <td><input type=text name=pmpyr014 id=pmpyr014 title="Private Phone"
         value="%PATWEB07.16.114" size=12 maxlength=12 tabindex=21>
    </td>
</tr>

<tr><td class=DataLabel>Given Name</td>
    <td><input type=text name=pmpyr006 id=pmpyr006 title="Given Name"
         size=35 maxlength=35 tabindex=5 value="%PATWEB07.16.106"
         onchange="UpCase(this);">
    </td>
    <td class=DataLabel>Work Phone</td>
    <td><input type=text name=pmpyr015 id=pmpyr015 title="Work Phone" size=22
         maxlength=20 tabindex=22 value="%PATWEB07.16.115">
    </td>
</tr>

<tr><td class=DataLabel nowrap>Second Given Name</td>
    <td><input type=text name=pmpyr007 id=pmpyr007 title="Second Given Name"
         size=35 maxlength=35 tabindex=6 value="%PATWEB07.16.107"
         onchange="UpCase(this);">
    </td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text name=pmpyr016 id=pmpyr016 title="Mobile Phone" size=22
         maxlength=20 tabindex=23 value="%PATWEB07.16.116">
    </td>
</tr>

<tr id=trAddrSrch style="display:none">
    <td class=DataLabel nowrap>Search Address</td>
    <td><input type=text readonly size=42 tabindex="-1"
         style="cursor:pointer;text-align:center;"
         value="Click here to search for an address"
         title="Click here to search for an address"
         onclick="ShowAddressSearch();">
    </td>
</tr>

<tr><td class=DataLabel>Address</td>
    <td><input type=text size=42 maxlength=35 tabindex=7
         name=pmpyr008 id=pmpyr008 title="Address Line 1"
         value="%PATWEB07.16.108" onchange="UpCase(this);">
    </td>
</tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td><input type=text size=42 maxlength=35 tabindex=8
         name=pmpyr009 id=pmpyr009 title="Address Line 2"
         value="%PATWEB07.16.109" onchange="UpCase(this);">
    </td>
</tr>

<tr><td class=DataLabel>Suburb</td>
    <td><input type=text size=42 maxlength=35 title="Suburb"
         name=pmpyr010 id=pmpyr010 title="Address Line 3" tabindex=9 
         value="%PATWEB07.16.110" onchange="valPostCode();">
    </td>
    <td class=DataLabel nowrap>Effective Date</td>
    <td><input type=text size=12 maxlength=12 class=Readonly readonly
         value="%PATWEB07.16.118" title="Effective Date">
    </td>
</tr>

<tr><td class=DataLabel>State</td>
    <td><input type=text size=42 maxlength=35 title="State"
         name=pmpyr011 id=pmpyr011 tabindex=10
         value="%PATWEB07.16.111" onchange="UpCase(this);">
    </td>
    <td class=DataLabel nowrap>Effective To Date</td>
    <td><input type=text size=12 name=pmpyr019 id=pmpyr019 tabindex=25
         title="Effective To Date"  value="%PATWEB07.16.119"
         onblur="checkDate(this,'Effective To Date');">
        <img notab src="../images/DateLookup.gif" class="Icon"
         alt="Show Calendar" date="UpdateForm.pmpyr019">
        <img align=absmiddle src="../images/erase.gif"
         onclick="clrFields(pmpyr019);">
    </td>
</tr>

<tr><td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4 tabindex=11
         name=pmpyr012 id=pmpyr012 title="Post Code" value="%PATWEB07.16.112"
         onchange="SetPostVars();LookupSuburb(this.value);">
    </td>
</tr>

<tr><td class=DataLabel>Email</td>
    <td colspan=3>
      <input type=text name=pmpyr017 id=pmpyr017 title="Email" size=80
       maxlength=80 tabindex=12 value="%PATWEB07.16.117">
    </td>
</tr>
</table>

<table align=center cellspacing=2 cellpadding=1 width=95% border=0>
<tr><td colspan=2 align=center>
      <input type=button class="button" value="Update" tabindex=30
       onclick="UpdatePayer();">
      <input type=button class="button" value="Delete" tabindex=31
       onclick="DeletePayer();">
      <input type=button class="button" value="Cancel" tabindex=32
       onclick="DFrameClose();">
    </td>
</tr>
</table>

</td></tr>
</table>
</form>

<script type="text/javascript">
if ("%PATWEB07.16.102.0" == "1")
{
  document.UpdateForm.d_pmpyr002.checked=1
}
Relationship="%PATWEB07.16.113"
for (var i =0 ; i < document.UpdateForm.pmpyr013.length; i++) {
  if (document.UpdateForm.pmpyr013.options[i].value==Relationship.substr(0,10)){
    document.UpdateForm.pmpyr013.selectedIndex=i } };

PatientTitle="%PATWEB07.16.104"
for (var i =0 ; i < document.UpdateForm.pmpyr004.length; i++) {
  if (document.UpdateForm.pmpyr004.options[i].value==PatientTitle.substr(0,4)){
    document.UpdateForm.pmpyr004.selectedIndex=i } };

</script>

