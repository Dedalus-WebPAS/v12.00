<meta name="TemplateVersion" content="V12.00.01">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"      content="true">
<script type="text/javascript" src="../js/ReportStandard.js"></script>
<script type="text/javascript">
function SubmitForm() {
  if (validateMandatory(AddForm)) {
//     if (!validateAmt()) {
//         return;
//     }
     AddForm.osdbt003.value = AddForm.admissno.value;
     AddForm.osdbt004.value = AddForm.urnumber.value;
     AddForm.osdbt009.disabled=false;
     if (p.ibcnmhos.value==1) {
        p.osdbt010.disabled=false; 
     }
     AddForm.redirect.value = AddForm.redirect.value 
                     + "&osdbt001=" + AddForm.osdbt001.value.replace(/ /g,"+")
                     + "&osdbt002=" + AddForm.osdbt002.value.replace(/ /g,"+");
     AddForm.submit();
  }
}
function validateAdmissno() {
  p=document.AddForm

  if (isWhitespace(p.admissno.value)) {
    return;
  }

  if (!isNaN(p.admissno.value) && !isNaN(parseFloat(p.admissno.value))) {
    p.admissno.min=1;
    p.admissno.max=99999999;

    if (!checkInteger(p.admissno,"Admission Number")){

       return;}
  } else {
    if (p.admissno.value.length === 8 && 
        /[a-zA-Z]/.test(p.admissno.value)) {

      // Passed Validation for Alphnumeric Visit Number

    } else {
      alert("Invalid Admission Number Format.");
      p.admissno.value="";
      return; 
    }
  }

  p=document.AddForm
  justifyRight(p.admissno)

  if (checkAdmn(p.osdbt013,p.admissno,p.fnam,p.urnumber,p.claimcd,p.temphosp)) {
      for (var i=0; i<p.osdbt009.length;i++) {
          if (p.osdbt009.options[i].value.substr(0,3) == p.claimcd.value) {
              p.osdbt009.selectedIndex=i;
          }
      }
      if  (!isWhitespace(p.urnumber.value)) {
           p.urnumber.disabled=true;
           p.urnumber.className="Readonly";
           p.osdbt009.disabled=true; 
           p.patsrchfrm.disabled=true;
           p.patsrchfrm.className="Readonly";
      }
      else {
           p.osdbt009.selectedIndex=0;
           p.urnumber.disabled=false;
           p.urnumber.className="Mandatory";
           p.urnumber.value="";
           p.urnumber.focus();
           p.osdbt009.disabled=false;
           p.patsrchfrm.disabled=false;
           p.patsrchfrm.className="Icon";
      }
      if (p.ibcnmhos.value==1) {
        if (!isWhitespace(p.temphosp.value)) {
          for (var i=0; i<p.osdbt010.length;i++) {
            if (p.osdbt010.options[i].value == p.temphosp.value) {
              p.osdbt010.selectedIndex=i;
            }
          }
          p.osdbt010.disabled=true; 
        }
        else {
          p.osdbt010.disabled=false; 
          if (p.osdbt010.selectedIndex!=0) { // hospital already selected
            setHospital();                   // so retain 
          }
        }
      }
  }
  else {
      p.osdbt009.selectedIndex=0;
      p.urnumber.disabled=false;
      p.urnumber.className="Mandatory";
      p.urnumber.focus();
      p.osdbt009.disabled=false;
      p.patsrchfrm.disabled=false;
      p.patsrchfrm.className="Icon";
      if (p.ibcnmhos.value==1) {
        p.osdbt010.disabled=false; 
      }
  }
}
function checkAdmn(patsyst,admissno,pname,urnumber,claimcode,hospid) {
  if (isWhitespace(patsyst.value)) return;;
  var serverURL   = "../cgi-bin/patweb80.pbl?reportno=50" +
                    "&valdtype=" + patsyst.value.replace(/ /g,"+") +
                    "&valdcode=" + admissno.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|")
    pname.value=trim(ReturnValue[0])
    urnumber.value=ReturnValue[1]
    claimcode.value=ReturnValue[2]
    hospid.value=ReturnValue[3]
    return true;
    }
  else {
    admissno.value="";
    admissno.select();
    admissno.focus();
    return false;
     }
}

function validateAmt() {
  if  ((parseFloat(AddForm.osdbt007.value + AddForm.osdbt008.value)) > 0) { 
      return true;
  }
  else {
      alert("Invalid Invoice Amounts ");
      AddForm.osdbt007.focus();
      return false;
  }
}
function validateInv() {
  p=document.AddForm
  p.osdbt005.min=1;
  p.osdbt005.max=99999999;

  if (!checkInteger(p.osdbt005,"Invoice Number")){
     return;}

  validateCode(51,p.osdbt005,p.dummy);
}
function setHospital() {
  p=document.AddForm
  if (p.ibcnmhos.value==1) {
    p.temphosp.value=p.osdbt010.value
  }
}
  
</script>
</head>
%START.OF.PAGE
<body onload=PageLoad(event);>
<form name=AddForm method=post action=patweb75.pbl>
<table width=100% align=center border=0 cellspacing=0>
<input type=hidden name=reportno value=8>
<input type=hidden name=template value=001>
<input type=hidden name=updttype value="A">
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="patweb75.pbl?reportno=8&template=1">
<input type=hidden name=osdbt003>
<input type=hidden name=osdbt004>
<input type=hidden name=admno>
<input type=hidden name=claimcd>
<input type=hidden name=dummy>
<input type=hidden name=temphosp value="   ">
<input type=hidden name=ibcnmhos value="%PATWEB75.08.003">

<tr><td class=HeadingCell align=center colspan=2>
        Take Up Outstanding Debts </td></tr>

<tr><td>&nbsp;</td></tr>

<table width=80% align=center border=0 cellspacing=2 cellpadding=1>

<tr><td colspan=2 align=center><hr width=100%></td></tr>

<tr><td class=DataLabel>Miscellaneous Debt</td>
    <td><input type=text name=osdbt001 size=9 maxlength=9
         value="%PATWEB75.08.001.0"
         class="SelectBig Mandatory" title="Miscellaneous Debt Code" 
         onblur='validateMisc(AddForm.osdbt001,
                              AddForm.miscdesc1,
                              AddForm.temphosp);'>
        <input type=text class=readonly readonly name=miscdesc1 size=50
         value="%PATWEB75.08.001.1"
         title="Miscellaneous Charge Code Description" tabindex=-1>
        <img src=../images/SearchIcon.gif class=Icon
         onclick="DefMiscChargeSearchFrame(AddForm.osdbt001,
                                           AddForm.miscdesc1,
                                           AddForm.temphosp);">
</td></tr>
<tr><td class=DataLabel>Miscellaneous H.F Debt</td>
    <td><input type=text name=osdbt002 size=9 maxlength=9
         value="%PATWEB75.08.002.0"
         class="SelectBig Mandatory" title="Miscellaneous Debt Code" 
         onblur='validateMisc(AddForm.osdbt002,
                              AddForm.miscdesc2,
                              AddForm.temphosp);'>
        <input type=text class=readonly readonly name=miscdesc2 size=50
         value="%PATWEB75.08.002.1"
         title="Miscellaneous Charge Code Description" tabindex=-1>
        <img src=../images/SearchIcon.gif class=Icon
         onclick="DefMiscChargeSearchFrame(AddForm.osdbt002,
                                           AddForm.miscdesc2,
                                           AddForm.temphosp);">
</td></tr>

<tr><td colspan=2 align=center><hr width=100%></td></tr>

<tr><td class=DataLabel>System</td>
        <td class=DataField>
        <select name=osdbt013 title="System" class=Mandatory>
          <option value="3">Inpatient</option>
          <option value="1">Emergency</option>
        </select></td>
</tr>

<tr><td class=DataLabel>Admission Number </td>
    <td><input type=text name=admissno class=Mandatory size=10 maxlength=8
         class="Mandatory" title="Admission Number" 	
         onblur=validateAdmissno();>
</td></tr>

<tr><td class=DataLabel>U/R Number</td>
    <td><input name=urnumber type=text size=10 maxlength=8 
         title="U/R Number" class="Mandatory"
         onblur='justifyRight(this);validateCode(8,AddForm.urnumber,
                                                   AddForm.fnam);'>
        <input type=text name=fnam value="" class=readonly readonly size=50 
         value="" tabindex=-1>
        <img src="../images/SearchIcon.gif" class="Icon" alt="Search" 
         name=patsrchfrm
         onclick='PatientSearchFrame(AddForm.fnam,
                                     AddForm.urnumber,
                                     AddForm.admno);'>
</td></tr>

<!-- Field osdbt010 - Display Hospital Field when (IBCNMHOS=1)-->
%PATWEB75.08.004

<tr><td class=DataLabel>Invoice Number</td>
    <td><input type=text size=10 maxlength=8 name=osdbt005
         class="Mandatory" title="Invoice Number" 
         onblur='validateInv();'> 
</td></tr>

<tr><td class=DataLabel width=25%>Invoice Date</td>
    <td><input type=text size=15 maxlength=12 name=osdbt006
         onblur="checkDate(this,'Date')"
         class="Mandatory PastDate" title="Invoice Date">
        <img notab src="../images/DateTimeStamp.gif" class="Icon"
         alt="Current" date="AddForm.osdbt006">
        <img notab src="../images/DateLookup.gif" class="Icon"
         alt="Calendar" date="AddForm.osdbt006">
</td></tr>
<tr><td class=DataLabel>Debt (1) Amount </td>
    <td><input type=text name=osdbt007 class="Mandatory Number" size=10 
         maxlength=10 min=-9999999999.99 max=99999999.99 title="Debt Amount 1" 
         onblur='RoundNumber(this,2);'> 
</td></tr>

<tr><td class=DataLabel>Debt (2) Amount </td>
    <td><input type=text name=osdbt008 class="Mandatory Number" size=10 
         maxlength=10 min=-99999999.99 max=99999999.99 title="Debt Amount 2"
         onblur='RoundNumber(this,2);'> 
</td></tr>

<tr><td class=DataLabel width=25%>%STANDARD.01.017.CL</td>
    <td><select name=osdbt009 class=Mandatory title="%STANDARD.01.017.CL">
        <option value=" "></option>
         %STANDARD.01.007.CL
        </select>
</td></tr>

<tr><td class=DataLabel>Health Fund</td>
    <td><input type="hidden" name=osdbt011>
        <class=DataLabel>
        <input type=text size=35 name=funddesc maxlength="30"
         notab readonly>
</td></tr>

<tr><td>Table</td>
    <td><input type="hidden" name=osdbt012>
        <class=DataLabel>
        <input type="text" size=20 maxlength=30 name=tabldesc
         notab readonly>
        <img src=../images/SearchIcon.gif border=0 hspace=0 align=absmiddle
         class=Icon
         onclick="HealthFundSearchFrameNoFocus(AddForm.osdbt011,
                                               AddForm.funddesc,
                                               AddForm.osdbt012,
                                               AddForm.tabldesc);">
        <img src="../images/erase.gif" align=absmiddle
         class=Icon
         onclick="clrDoc(AddForm.funddesc,
                         AddForm.tabldesc); clrDoc(AddForm.osdbt011,
                                                   AddForm.osdbt012);">
</td></tr>


<tr><td colspan=2 align=center><hr width=100%></td></tr>
<tr><td align=center colspan=2>
    <input type=button value=Ok class="button" 
     name="okaybutt" id="okaybutt"
     onclick="tempDisable(this);SubmitForm();">
    <input type=button value=Cancel class="button"
     name="closbutt" id="closbutt"
     onclick='tempDisable(this);location.href="../lookups/blank.html"' >
</td></tr>

</table>
</table>
</form>
