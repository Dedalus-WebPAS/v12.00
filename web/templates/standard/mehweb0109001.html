<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/TableSort.js></script>
<script type="text/javascript">
function ReferralLink(ReferralKey) {
  var uno=PatientLinks.urnumber.value.replace(/ /g,"+");
  var adm=PatientLinks.admissno.value.replace(/ /g,"+");
  var rno=ReferralKey.replace(/ /g,"+");
  Location="../cgi-bin/mehweb01.pbl?reportno=09&template=003&urnumber="+uno+"&uniqnumb="+rno+"&admissno="+adm;
  location.href=Location
}
function RefHistory() {
  linkurl="mehweb01.pbl?reportno=09&template=010" +
           "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
           "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+");
  Left=(document.body.clientWidth-900)/2
  DFrameLink(linkurl,100,Left,900,400);
}

function SectHistory() {
  linkurl="mehweb01.pbl?reportno=09&template=011" +
           "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
           "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+");
  Left=(document.body.clientWidth-1200)/2
  DFrameLink(linkurl,100,Left,1200,400);
}

function AddRef() {
 AnyOpenLS = document.AddReferral.d_openls.value;

 if(AnyOpenLS=="1") {
  if (!confirm("                          There is an Existing Open Referral." +
               "\n\n Select 'Ok' to continue to add referral,or select" +
               "'Cancel' to view existing referrals")) {
    return;
  }
 }
  linkurl="mehweb01.pbl?reportno=09&template=002" +
           "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
           "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+");
   Left=(document.body.clientWidth-900)/2
   DFrameLink(linkurl,100,Left,900,450);

}

function RefCmnts() {
  linkurl="mehweb01.pbl?reportno=09&template=008" +
           "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
           "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+");
  Left=(document.body.clientWidth-900)/2
  DFrameLink(linkurl,100,Left,900,400);
}

function ShowRef(){
  var uno=PatientLinks.urnumber.value.replace(/ /g,"+");
  var adm=PatientLinks.admissno.value.replace(/ /g,"+");
  Location="../cgi-bin/mehweb01.pbl?reportno=09&template=015&urnumber="+uno+"&admissno="+adm+"&superlev=1";
  location.href=Location
}

//----------------------------------------------------------------------------
// Create New Table Object
// Border, Cellspacing, Cellpadding, Width, Align, Heading Height, Row Height
//----------------------------------------------------------------------------
// Add Columns in Order Required
// Heading,Type,Display Column,Sort Column, Align, Icon, Link Column
// Columns Available
// 0. Referral Link
// 1. Referral Date/Time Opened
// 2. Referral Date/Time Closed
// 3. Referral Name
// 4. Lawyer 
// 5. Prisoner
// 6. Current 
// 7. Responsible HCP
// 8. Case Team 
// 9. Origin of Referral  
//10. Update Web User Mame 
//11. Case Team Description 
//12. Responsible DHB 
//---------------------------------------------------------------------------
function InitTable(TableView) {
switch (TableView) {
case 0: {
document.title="Legal Status Management";
 t = new Table(1,0,2,"100%","center",30,30);
 if(document.AddReferral.mhcnrdhb.value=="1") {
   t.addColumn("Date/Time Opened","DateTime",1,1,"left","EditIcon.gif","0",100)
   t.addColumn("Date/Time Closed","DateTime",2,2,"left","","",100)
   t.addColumn("Responsible DHB","String",12,12,"left","","",100)
   t.addColumn("Responsible Clinician","String",7,7,"left","","",150)
   t.addColumn("Lawyer","String",4,4,"left","","",100)
   t.addColumn("Prisoner","String",5,5,"left","","",50)
   t.addColumn("Current","String",6,6,"left","","",50)
 }
 else {
   t.addColumn("Date/Time Opened","DateTime",1,1,"left","EditIcon.gif","0",150)
   t.addColumn("Date/Time Closed","DateTime",2,2,"left","","",150)
   t.addColumn("Responsible Clinician","String",7,7,"left","","",150)
   t.addColumn("Lawyer","String",4,4,"left","","",100)
   t.addColumn("Prisoner","String",5,5,"left","","",50)
   t.addColumn("Current","String",6,6,"left","","",50)
 }
 AddTableRows()
 TableOutput(0,2);    // Order Column,Asc Dsc
 break; }
 }
}
</script>
</head>
%START.OF.PAGE
<body onload='PageLoad(event);InitTable(0);SetCookiePath("RefList");'>
<div id="HeadingSection"> 
<div id="PageHeadingSection">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%MEHWEB01.09.003";
PatientVIS="%MEHWEB01.09.081";
PatientNAM="%MEHWEB01.09.002";
PatientSTA="%MEHWEB01.09.086.078";
PatientALT="%MEHWEB01.09.084";
PatientSEX="%MEHWEB01.09.019";
PatientDOB="%MEHWEB01.09.020";
PatientAGE="%MEHWEB01.09.021";
PatientLOC="%MEHWEB01.09.083";
PatientPRI="%MEHWEB01.09.086.066.1";
PatientUNT="%MEHWEB01.09.066.0";
DoctorCOD="%MEHWEB01.09.082.003";
DoctorNAM="%MEHWEB01.09.082.002";
PatientAID="%MEHWEB01.09.086.090";
PatientIND="%MEHWEB01.09.086.091";
PatientCUR="%MEHWEB01.09.086.092";
PatientCLC="%MEHWEB01.09.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%MEHWEB01.09.086.094";
PatientCDM="%MEHWEB01.09.086.095";
PatientVDH="%MEHWEB01.09.086.099.015";
InsertPatientHeader()
</script>
<div id="PatientMenu"></div> 
</div>
<form name=AddReferral method=get action=mehweb01.pbl style="margin:0">
<input type=hidden name=reportno value=9>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%MEHWEB01.09.003">
<input type=hidden name=admissno value="%MEHWEB01.09.081">
<input type=hidden name=prevdate value="%MEHWEB01.09.320.1">
<input type=hidden name=prevtime value="%MEHWEB01.09.320.2">
<input type=hidden name=d_openls value="%MEHWEB01.09.320.3">
<input type=hidden name="usrsvrsl" value="%STANDARD.01.042.MEHWEB01">
<input type=hidden name=mhcnrdhb id="mhcnrdhb"
 value="%STANDARD.01.025.069.192.0.1">

<table cellspacing=0 cellpadding=0 border=1 width=100% class=HeadingCell>
<tr><td>
    <table cellspacing=0 cellpadding=0 border=0 width=100% >
    <tr align=right bgcolor=#CCCCCC>
    <td><input type=button class="Bigbutton" value="LS Mng.Supervisor"
         onclick="ShowRef();">
        <input type=button class="Bigbutton" value="Add LS Management"
         onclick="AddRef();">
        <input type=button class="Bigbutton" value="Management History"
         onclick="RefHistory();">
        <input type=button class="button" value="Status History"
         onclick="SectHistory();">
    </td></tr>
    </table>
</td></tr>
</table>

</form>
</div>

<div id=TableLocation></div>
<script type="text/javascript">
function AddTableRows() {
%MEHWEB01.09.301
}
</script>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="009">
<input type=hidden name=urnumber value="%MEHWEB01.09.003">
<input type=hidden name=admissno value="%MEHWEB01.09.081">
<input type=hidden name=MenuType value="%MEHWEB01.09.088">
</form>

