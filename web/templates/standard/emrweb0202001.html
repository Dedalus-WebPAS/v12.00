<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/EmrMandatory.js"></script>
<script type="text/javascript">
function SplitComplaint()  {
words=UpdateForm.comptext.value.split(/\s+/);
UpdateForm.emvis004.value=""
UpdateForm.emvis005.value=""
firstflag=0
for (i=0 ; i<words.length ; i++) {
  if (UpdateForm.emvis004.value.length+words[i].length < 50 && firstflag==0 ) {
    UpdateForm.emvis004.value+=words[i] + " " }
  else { 
    UpdateForm.emvis005.value+=words[i] + " " 
    firstflag=1 } 
  }
UpdateForm.comptext.value=UpdateForm.emvis004.value+UpdateForm.emvis005.value
}
function CheckCode(code,selectlist)  {
 var found=0
 strvar=code.value+"   "         // format as three characters space filled
 code.value=strvar.substr(0,3)
 for (var i =0 ; i < selectlist.length; i++) {
   if (selectlist.options[i].value.substr(0,3)==code.value) {
     found=1; selectlist.selectedIndex=i } }
 if (found==0) { alert("Invalid Code Entered");code.focus() }
}
function UpdateCode(code,selectlist) {
  code.value=selectlist.value.substr(0,3)
  UpdateForm.comptext.focus()
}
function setRedirect() {
  if (window.name == "content") {                                              
     document.UpdateForm.redirect.value="emrweb01.pbl?reportno=1&template=2"
   }
  else {
     document.UpdateForm.redirect.value="emrweb01.pbl?reportno=1&template=1"     
  }
}
function setFormactn() {
  if (validateMandatory(UpdateForm)) {
    document.UpdateForm.formactn.value="N1"
    document.UpdateForm.updttype.value="REGIS"
    UpdateWin=window.open("","HideUpdateWindow",
    "width=10,height=10,top=1024,directories=no,location=no" +
    ",scrollbars=no,status=no,toolbar=no,menubar=no,resizable=no")
    document.UpdateForm.target="HideUpdateWindow";
    document.UpdateForm.submit()
    }
}
function checkTime(triageTime) {
    var Today = new Date()
    var ThisHrs=Today.getHours();
    var ThisMin=Today.getMinutes();
    var ThisSec=Today.getSeconds();

    var ThisTime=ThisHrs+":"+ThisMin+":"+ThisSec
   if (triageTime.value > ThisTime) {                                          
                alert("Invalid Triage Time")                                   
                return false }                                                 
    else { return true }                                                       
}
</script>
</head>
%START.OF.PAGE
<body onLoad="PageLoad(event);">
<form name=UpdateForm action="emrweb02.pbl" method=post>
  <input type=hidden name=reportno value="02">
  <input type=hidden name=template value="001">
  <input type=hidden name=formactn>
  <input type=hidden name=updttype>
  <input type=hidden name=updateky value="%EMRWEB02.02.700">
  <input type=hidden name=nextpage value="1">
  <input type=hidden name=redirect>
<table align=center width=100% border=1 cellspacing=0 cellpadding=2>
<tr><td class=HeadingCell colpsan=2 width=100% align=center>
    Triage Emergency Patient</td></tr>
<tr><td>
<table align=center width=100% border=0 cellspacing=0 cellpadding=0>
<tr><td>Presenting Complaint </td>
    <td><input type=text name=emvis060 maxlength=3 size=3 
         value="%EMRWEB02.02.220.1"  tabindex=1
         onchange="CheckCode(UpdateForm.emvis060,UpdateForm.v060name);">
        <select name=v060name tabindex=2
         onchange="UpdateCode(UpdateForm.emvis060,UpdateForm.v060name);">
        <option></option>
         %EMRWEB02.02.220.2
        </select>
        </td></tr>

<tr><td></td>
    <td><input type=text size=100 maxlength=100 name=comptext tabindex=3
         onblur="SplitComplaint();"><br>
        <input type=hidden name=emvis004>
        <input type=hidden name=emvis005>
        <input type=hidden name=nocodes >
    </td></tr>

<tr><td>Surname </td>
    <td><input type=text size=25 maxlength=20 name=emvis111 tabindex=4>
    </td></tr>

<tr><td>Given Name </td>
    <td><input type=text size=25 maxlength=25 name=emvis112 tabindex=5>
    </td></tr>

<tr><td>Triage Nurse </td>
    <td><select name=emvis127 tabindex=6
         class=Mandatory title="Triage Nurse">
        <option></option>
        %EMRWEB02.02.161.2
        </select></td></tr>
    <tr><td>Triage Category</td>
     <td><table border=0 cellspacing=0>
     <tr>
     <td bgcolor=red><i>1</i>
     <input type=radio name=emvis003 value=1 tabindex=7 checked
      title="Triage Category"
    onfocus="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);"
    onclick="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);"></td>
    <td bgcolor=orange><i>2</i><input type=radio name=emvis003 value=2
    onclick="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);"></td>
    <td bgcolor=green><i>3</i><input type=radio name=emvis003 value=3
    onclick="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);"></td>
    <td bgcolor=blue><i>4</i><input type=radio name=emvis003 value=4
    onclick="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);"></td>
    <td bgcolor=white><i>5</i><input type=radio name=emvis003 value=5
    onclick="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);"></td>
    <td bgcolor=black><font color=white><i>6</i></font>
    <input type=radio name=emvis003 value=6
    onclick="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);"></td>
     </tr></table>
     </td></tr>

<tr><td class=DataLabel>Triage Date </td>
    <td><input type="text" name=emvis128 size="12"  tabindex=8
         class="Mandatory CurrentDate" readonly title="Triage Date"
         onblur="checkDate(UpdateForm.emvis128,'Triage Date')" 
         value="%STANDARD.01.015">
        <img src=../images/DateLookup.gif class="Icon"
         onclick="DateLookupFrame(UpdateForm.emvis128);">
    Time
    <input type="text" name=emvis129 size="8"  tabindex=9
     class=Mandatory readonly title="Triage Time"
     onblur="checkTime(UpdateForm.emvis129,'Triage Time')" 
     value="%STANDARD.01.016" onchange="checkTime(this)">
        <img src=../images/TimeLookup.gif class="Icon"
         onclick="TimeLookupFrame(UpdateForm.emvis129);">
    <img src="../images/stopwat1.gif" class="Icon"
     onclick="SetCurrentDateTime(UpdateForm.emvis128,UpdateForm.emvis129);">
    </td></tr>

<tr><td class=DataLabel>Location</td>
    <td><input type=hidden name=name_emvis006>
        <select name=emvis006 tabindex=10>
        <option></option>
        %EMRWEB02.02.106.3
        </select>
        <img src=../images/SearchIcon.gif class="Icon"
         onclick="LocationSearchFrame(UpdateForm.emvis006,
                  UpdateForm.name_emvis006);">
</td></tr>

<tr><td colspan=4 align=center><br>
    <input type=button value="Add" class="button" tabindex=11 id="emr02a"
     onclick="setRedirect();tempDisable(this);setFormactn()">
    <input type=button value="Cancel" class="button" onclick="history.go(-1)">
    </td></tr>
</table>
</td></tr>
</table>
</form>
