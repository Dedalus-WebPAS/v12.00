<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
//---------------------------------------------------------------------
// This function validate and do the subtraction (fee1-fee2=total)
//---------------------------------------------------------------------

function GenBFee() {
   DispBFee.submit();
}

function DailyFee(sbfeekey,bfecolno,bfeeamnt,addfamnt,pporamnt,rporamnt,totalfee,discamnt,edayrang,raddamnt,paddamnt)
 {
  var serverURL = "../cgi-bin/patweb71.pbl?reportno=6" +
                  "&sbfeekey=" + sbfeekey.value.replace(/ /g,"+") +
                  "&multhosp=" + DispBFee.multhosp.value.replace(/ /g,"+") +
                  "&bfecolno=" + bfecolno.value.replace(/ /g,"+");

  var returnValue = RSExecute(serverURL);    //Remote Script To get daily fees

  if (returnValue.status==0) {
   ReturnValue=returnValue.return_value.split("|")
   pporamnt.value=ReturnValue[0];
   rporamnt.value=ReturnValue[1];
   edayrang.value=ReturnValue[2];


   AddTotal(bfeeamnt,pporamnt,rporamnt);

   DailyTot(totalfee,bfeeamnt,addfamnt,discamnt,pporamnt,paddamnt);

   }
}

function AddnFee(sbfeekey,addcolno,bfeeamnt,addfamnt,pporamnt,rporamnt,totalfee,discamnt,adayrang,raddamnt,paddamnt) 
{
  addcolno.value=addcolno.value.replace(/ /g,"")
  var serverURL = "../cgi-bin/patweb71.pbl?reportno=7" +
                  "&sbfeekey=" + sbfeekey.value.replace(/ /g,"+") +
                  "&multhosp=" + DispBFee.multhosp.value.replace(/ /g,"+") +
                  "&newbtype=" + DispBFee.newbtype.value.replace(/ /g,"+") +
                  "&addcolno=" + addcolno.value.replace(/ /g,"+");

  var returnValue = RSExecute(serverURL); //Remote Script To get additional fees

  if (returnValue.status==0) {
   ReturnValue=returnValue.return_value.split("|")
   paddamnt.value=ReturnValue[0];
   raddamnt.value=ReturnValue[1];
   adayrang.value=ReturnValue[2];

   AddTotal(addfamnt,paddamnt,raddamnt);

   DailyTot(totalfee,bfeeamnt,addfamnt,discamnt,pporamnt,paddamnt);

   }
}

function DailyTot(totalfee,fee1,fee2,discamnt,pporamnt,paddamnt) {

  if (parseFloat(DispBFee.discamnt.value)>parseFloat(totalfee.value)) {
    alert("Discount can not be greater than Patient Portion.");
      discamnt.focus();
      return;
   }

  totalfee.value=0;
  if(!isWhitespace(fee1.value)) {
    if (checkNumber(fee1)) {
      RoundNumber(fee1,2);
      totalfee.value=parseFloat(totalfee.value) +
                  parseFloat(fee1.value)
    }
    else {
      fee1.value="";
      fee1.focus();
      return;
    }
  }
  if(!isWhitespace(fee2.value)) {
    if (checkNumber(fee2)) {
      totalfee.value=parseFloat(totalfee.value) +
                  parseFloat(fee2.value) 
    }
    else {
      fee2.value="";
      fee2.focus();      
      return;
    }
  }

  if(!isWhitespace(DispBFee.discamnt.value)) {
    if (checkNumber(DispBFee.discamnt)) {
      totalfee.value=parseFloat(totalfee.value) -
                  parseFloat(DispBFee.discamnt.value) 
    }
    else {
      DispBFee.discamnt.value="";
      discamnt.focus();      
      return;
    }
  }

  RoundNumber(totalfee,2);
  justifyRight(totalfee);
  justifyRight(fee1);
  justifyRight(fee2);
  justifyRight(discamnt);

}

function SubmitForm() {
   document.DispBFee.nextpage.value=1;
   document.DispBFee.redirect.value="patweb96.pbl?reportno=03&template=004"
     + "&urnumber=" + document.DispBFee.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.DispBFee.admissno.value.replace(/ /g,"+");
   document.DispBFee.updatety.value="3";
   document.DispBFee.tranflag.value="1";
   DispBFee.submit();
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB71.04.003";
PatientVIS="%PATWEB71.04.081";
PatientNAM="%PATWEB71.04.002";
PatientSTA="%PATWEB71.04.086.078";
PatientALT="%PATWEB71.04.084";
PatientSEX="%PATWEB71.04.019";
PatientDOB="%PATWEB71.04.020";
PatientAGE="%PATWEB71.04.021";
PatientLOC="%PATWEB71.04.083";
PatientPRI="%PATWEB71.04.086.066.1";
PatientUNT="%PATWEB71.04.066.0";
DoctorCOD="%PATWEB71.04.082.003";
DoctorNAM="%PATWEB71.04.082.002";
PatientAID="%PATWEB71.04.086.090";
PatientIND="%PATWEB71.04.086.091";
PatientCUR="%PATWEB71.04.086.092";
PatientCLC="%PATWEB71.04.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB71.04.086.094";
PatientCDM="%PATWEB71.04.086.095";
PatientVDH="%PATWEB71.04.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<form name=DispBFee action=patweb71.pbl method=get style="margin:0">
    <input type=hidden name=reportno value="4">
    <input type=hidden name=template value="015">
    <input type=hidden name=nextpage value="0">
    <input type=hidden name=updatety value="0">
    <input type=hidden name=tranflag value="">
    <input type=hidden name=redirect value="">
    <input type=hidden name=urnumber value="%PATWEB71.04.003">
    <input type=hidden name=admissno value="%PATWEB71.04.081">
    <input type=hidden name=multhosp id=multhosp value="%PATWEB71.04.598.013.1">
    <input type=hidden name=dummy1 id=dummy1 value="0.00">
    <input type=hidden name=dummy2 id=dummy2 value="0.00">
    <input type=hidden name=totdisc id=totdisc value="0">
    <input type=hidden name=chngdate id=chngdate value="%PATWEB71.04.411">
    <input type=hidden name=chngtime id=chngtime value="%PATWEB71.04.412">
    <input type=hidden name=pporamnt id=pporamnt value="%PATWEB71.04.413">
    <input type=hidden name=rporamnt id=rporamnt value="%PATWEB71.04.414">
    <input type=hidden name=paddamnt id=paddamnt value="%PATWEB71.04.427">
    <input type=hidden name=raddamnt id=raddamnt value="%PATWEB71.04.428">
    <input type=hidden name=edayrang id=edayrang value="%PATWEB71.04.415">
    <input type=hidden name=adayrang id=adayrang value="%PATWEB71.04.426">
    <input type=hidden name=sbfeekey id=sbfeekey value="%PATWEB71.04.441">
    <input type=hidden name=cmixflag id=cmixflag value="%PATWEB71.04.434">

<table align=center width=99% border=0>
<tr><td class=HeadingCell align=center>Bed Transfer Casepayment</td></tr>
</table>

<table cellspacing=0 cellpadding=1 border=0 width=100%>
%PATWEB71.04.401.1
</table>

<table cellspacing=0 cellpadding=1 border=0 width=90%>
<tr><td width=75% align=right class=DataLabel>No of days of hospitalisation</td>
    <td align=right><input type=text name=newdhosp id=newdhosp 
     title='No of days of hospitalisation' class=ReadOnly readonly size=5 
     maxlength=3 value="%PATWEB71.04.130"></td>
    <td width=75% align=right class=DataLabel>Bed Type</td>
    <td align=right><select name=newbtype id=newbtype title="Bed Type" 
     class=Mandatory value="%PATWEB71.04.404" onchange="GenBFee();">
         <option></option>
         %PATWEB71.04.417.2
         </select></td></tr>
</table>

<table cellspacing=0 cellpadding=1 border=0 width=99%>
%PATWEB71.04.418.0
</table>

<table cellspacing=0 cellpadding=1 border=0 width=99%>
%PATWEB71.04.419
</table>

<table cellspacing=0 cellpadding=1 border=0 width=99%>
%PATWEB71.04.418.1
</table>

<table cellspacing=0 cellpadding=1 border=0 width=99%>
%PATWEB71.04.419
</table>

<table cellspacing=0 cellpadding=1 border=0 width=99%> 
%PATWEB71.04.403
</table>

<table width=50% align=center cellspacing=0 cellpadding=1 border=0>
<tr><td class=DataLabel>Lumpsum :</td>
    <td><input type=text name=lumpamnt id=lumpamnt size=10
     class="JustifyRight readonly" readonly value="%PATWEB71.04.420"></td>
    <td class=DataLabel>Daily (Column No) :</td>
    <td><input type=text name=bfecolno id=bfecolno title="Column No" size=2  
     class="JustifyRight ReadOnly" readonly value="%PATWEB71.04.421.1"></td>
    <td><input type=text name=bfeeamnt id=bfeeamnt class="JustifyRight readonly"
     size=10 value="%PATWEB71.04.423"></td></tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td>&nbsp</td>
    <td class=DataLabel>Additional (Column No) :</td>
    <td><input type=text name=addcolno id=addcolno title="Column No" size=2 
     class="JustifyRight ReadOnly" readonly value="%PATWEB71.04.422.1"></td>
    <td><input type=text name=addfamnt id=addfamnt class="JustifyRight readonly"
     size=10 value="%PATWEB71.04.424"></td></tr>

<!--
<tr><td class=DataLabel>&nbsp;</td>
    <td>&nbsp</td>
    <td class=DataLabel>New Discount :</td>
    <td>&nbsp</td>
    <td><input type=text name=discamnt id=discamnt class="JustifyRight Readonly" readonly
           size=10 value="PATWEB71.04.407">
        </td></tr>
 -->

<tr><td class=DataLabel>&nbsp;</td>
    <td>&nbsp</td>
    <td class=DataLabel>Daily rate :</td>
    <td>&nbsp</td>
    <td><input type=text name=totalfee id=totalfee size=10 readonly
     class="Readonly JustifyRight" value="%PATWEB71.04.425"></td></tr>

<tr><td>&nbsp;</td></tr>

</table>

<table border=0 align=center width=90% align=center cellspacing=0>
<tr valign=bottom><td align=center colspan=2>
    <input type=button value=Ok class="button" name=okbuttn
     onclick="SubmitForm();">
    <input type=button value=Cancel class="button" 
     onclick="PatientLinkTo('patweb96.pbl',3,4,0);"></td></tr>
</table>

</form>
</div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB71.04.003">
<input type=hidden name=admissno value="%PATWEB71.04.101">
<input type=hidden name=MenuType value="%PATWEB71.04.088">
</form>


<script type="text/javascript">

document.DispBFee.bfeeamnt.value="%PATWEB71.04.423"
document.DispBFee.addfamnt.value="%PATWEB71.04.424"
</script>
