<meta name="TemplateVersion" content="V12.00.01">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/OutpatientSelect.js"></script>
<script type="text/javascript" src="../js/OutpatientTypeClinic.js"></script>
<script type="text/javascript">
function FilterSubmit() {
 Filter.submit();
}
function AddNewReferral(urn,adn,dpc) {
   AddReferral.doctcode.value=Filter.doctcode.value;
   Left=(document.body.clientWidth-1000)/2;
   DFrameSubmit(AddReferral,0,Left,1000,550);
}
function AddUserReferral() {
   if(isWhitespace(document.PatientLinks.wbsedall.value)) {
     alert("User does not have a default department.");
     return;
   }
   document.AddReferral.allrf001.value=document.PatientLinks.wbsedall.value;
   Left=(document.body.clientWidth-1000)/2;
   DFrameSubmit(AddReferral,0,Left,1000,550);
}
function UpdateReferral(urn,adn,dpc) {

   if (document.Filter.ptcolumn.value=="1") {

     var hiddenptcolumn = document.createElement("input");
     hiddenptcolumn.setAttribute("type", "hidden");
     hiddenptcolumn.setAttribute("name", "ptcolumn");
     hiddenptcolumn.setAttribute("value","1");
     document.getElementById("PatientLinks").appendChild(hiddenptcolumn);
   }

   PatientLinks.urnumber.value=urn;
   PatientLinks.admissno.value=adn;
   PatientLinks.deptcode.value=dpc;
   PatientLinks.submit();
}
function ListReferral(urn) {
  linkUrl="allweb02.pbl?reportno=02&template=021" +
          "&urnumber=" + urn.replace(/ /g,"+");
  Left=(document.body.clientWidth-750)/2;
  DFrameLink(linkUrl,50,Left,750,520);
}
function HospitalFilter() {
  if(document.Filter.alcndhos.value=="1") {
    document.getElementById("HospTitle").innerHTML=
    document.getElementById("DisplayHospitalTitle").innerHTML;
    document.getElementById("HospField").innerHTML=
    document.getElementById("DisplayHospitalField").innerHTML;
    document.getElementById("SiteTitle").innerHTML=
    document.getElementById("DisplaySiteTitle").innerHTML;
    document.getElementById("SiteField").innerHTML=
    document.getElementById("DisplaySiteField").innerHTML;
  }
}
function SetClinicTypeList() {
  p=Filter;
  SetClinicType(p.filtctyp,p.defctype.value,p.usersite.value);
  if (isWhitespace(p.deftclid.value)) {
     p.deftclid.value=p.wbseclid.value; }
  SetClinicIDList();
}
function SetClinicIDList() {
  p=Filter;
  p.filtclid.options.length=1;
  SetTypeClinic(p.filtclid,p.deftclid.value,p.usersite.value,p.filtctyp.value);
}
function TriageFilter() {
  if(document.Filter.alcndtrg.value=="1") {
    document.getElementById("TriageTitle").innerHTML=
    document.getElementById("DisplayTriageTitle").innerHTML;
    document.getElementById("TriageField").innerHTML=
    document.getElementById("DisplayTriageField").innerHTML;
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);HospitalFilter();TriageFilter();
      setTimeout('SetClinicTypeList();',100);">
<div id="HeadingSection"></div>
<div id="PHeadingSection">

<form name=PatientLinks id=PatientLinks action=allweb02.pbl method=get style="margin:0">
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=2>
<input type=hidden name=norecord value=5>
<input type=hidden name=urnumber>
<input type=hidden name=admissno>
<input type=hidden name=deptcode>
<input type=hidden name=wbsedall value="%STANDARD.01.028">
</form>

<form name=Filter action=allweb02.pbl method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=indexkey value="">
<input type=hidden name=usersite value="%STANDARD.01.023">
<input type=hidden name=wbseclid value="%STANDARD.01.026">
<input type=hidden name=defctype value="%ALLWEB02.01.028">
<input type=hidden name=deftclid value="%ALLWEB02.01.027">
<input type=hidden name=alcndhos value="%STANDARD.01.025.106.224.0.1">
<input type=hidden name=ptcolumn id=ptcolumn value="%ALLWEB02.01.272">
<input type=hidden name=alcndtrg value="%STANDARD.01.025.121.125.0.1">

<table width=100% cellspacing=0 border=0 bgcolor=#cccccc>
<tr><td>Department </td>
    <td><select class=PMenuSelectList name=deptcode onchange="FilterSubmit();">
        <option></option>     
        %ALLWEB02.01.012.2
        </select></td>
    <td class=DataLabel>HCP</td>
    <td><input type=text name=doctcode value="%ALLWEB02.01.020.0"
         class=DataField size=10 maxlength=10
         onchange="ValidateHCP(18,13,Filter.doctcode,Filter.psevt000,
                   FilterSubmit);">
        <input type=text name=psevt000 title="Attending HCP" readonly
         size=24 value="%ALLWEB02.01.020.1">

        <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(Filter.doctcode,Filter.psevt000,4,
                                FilterSubmit);">
        <img src="../images/ClearIcon.gif" class=Icon
        onclick="clrFields(Filter.doctcode,Filter.psevt000,FilterSubmit);"></td>

    <td>Priority</td>
    <td><select name=priority onchange="Filter.submit();" >
       <option value="  ">All</option>
       %ALLWEB02.01.010.2
       </select></td></tr>

<tr><td class=DataLabel>Clinic Type</td>
   <td><select name=filtctyp class=SelectBig
               onchange="SetClinicIDList();FilterSubmit();" >
          <option value="  ">Select Clinic Type</option>
       </select></td>

   <td class=DataLabel>Clinic ID</td>
   <td><select name=filtclid onchange="FilterSubmit();"
               class=SelectBig>
          <option value="zzzzzz">Select Clinic ID</option>
       </select></td>

   <td class=DataLabel>Case Team</td>
   <td><input type=text name=filtteam size=10 maxlength=10 title="Case Team"
        value="%ALLWEB02.01.025.1"
        onblur="validateCode2(7,Filter.filtteam,Filter.n_filtteam,
                              FilterSubmit)">
       <input type=text name=n_filtteam size=25 readonly 
        value="%ALLWEB02.01.025.0"
        class=Readonly tabindex=-1 title="Team Description">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="TeamSearchFrame(Filter.filtteam,Filter.n_filtteam,
                 FilterSubmit)">
        <img src="../images/ClearIcon.gif" class=Icon
        onclick="clrFields(Filter.filtteam,Filter.n_filtteam,
                 FilterSubmit);">
       </td>
  </tr>

<tr><td><div id="HospTitle"></div></td>
    <td><div id="HospField"></div></td>
    <td><div id="SiteTitle"></div></td>
    <td><div id="SiteField"></div></td>
    <td><div id="TriageTitle"></div></td>
    <td><div id="TriageField"></div></td>
    </tr>
</table>
</form>
</div>

    <form name=AddReferral method=get action=allweb02.pbl style="margin:0">
    <input type=hidden name=reportno value=3>
    <input type=hidden name=template value=2>
    <input type=hidden name=doctcode value="">
<table width=100% cellspacing=0 border=1 >
    <tr><td colspan=2 align=right class=HeadingCell>Add Referral
       <input type=button class=SlimButton value="Add"
        title="Add referral for users department" onclick="AddUserReferral();">
       <select class=PMenuSelectList name=allrf001 
       onmouseover='MenuOver(event,this)'
       onchange="AddNewReferral();">
       <option></option>
       %ALLWEB02.01.012
      </select></td></tr>
   <tr><td width=95% class=HeadingCell align=center> 
                   %ALLWEB02.01.023.0 Referrals - On Waiting List</td>
      <td class=HeadingCell align=right><img src='../images/PrinterIcon.gif' 
        class=Icon alt='Print Page' onclick='print();'></td>
    </tr>
</table>
   </form>

<table width=100% cellspacing=0 border=1 >
<tr id=trPat>
    <td class=HeadingCell>Patient</td>
    <td class=HeadingCell>Sex</td>
    <td class=HeadingCell>DOB</td>
    <td class=HeadingCell>U/R</td>
    <td class=HeadingCell>Referral Date</td>
    <td class=HeadingCell>Healthcare Professional</td>
    <td class=HeadingCell>Problem</td>
    <td id=tdPresCompl class=HeadingCell>Presenting Complaint</td>

    <script type="text/javascript">
    if(document.Filter.alcndtrg.value=="1") {
      document.write("<td class=HeadingCell>Triage Status</td>");
    }
    </script>

    <td class=HeadingCell>Priority</td>
    <td class=HeadingCell>List Days</td>
    <td class=HeadingCell>Active Refs</td>
    <td class=HeadingCell>Appointment<br>Type</td>
</tr>
%ALLWEB02.01.013
</table>

<table width=100% bgcolor=#CCCCCC><tr>
  <td align=center>
  <input type=button value="<< Previous" class="button"
   onclick='location.href="%ALLWEB02.01.019.001"'>
  <input type=button value="Next >>" class="button"
   onclick='location.href="%ALLWEB02.01.018.001"'>
</td></tr>
</table>

<div id=DisplayHospitalTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>Hospital</td>
    </tr>
</table>
</div>

<div id=DisplayHospitalField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td><select name=filthosp onchange="FilterSubmit();" >
        <option></option>
        %ALLWEB02.01.039
        </select></td>
</table>
</div>

<div id=DisplaySiteTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>Preferred Site</td>
    </tr>
</table>
</div>

<div id=DisplaySiteField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>
    <select name=filtpsit onchange="FilterSubmit();" >
    <option></option>
     %ALLWEB02.01.040
    </select>
    </td></tr>
</table>
</div>

<div id=DisplayTriageTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>Triage Status</td>
    </tr>
</table>
</div>

<div id=DisplayTriageField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr><td>
    <select name=filttrgs onchange="FilterSubmit();" >
    <option value="   ">All</option>
     %ALLWEB02.01.277.2
    </select>
    </td></tr>
</table>
</div>

<script type="text/javascript">
if (document.Filter.ptcolumn.value != "1") {
  var tr = document.getElementById('trPat');
  var td = document.getElementById('tdPresCompl');

  if (tr && td) {
    tr.removeChild(td);
  }
}
</script>
