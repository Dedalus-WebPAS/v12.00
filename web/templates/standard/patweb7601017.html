<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"      content="true">
<script type="text/javascript" src="../js/mrtweb04.js"></script>
<script type="text/javascript">

function valInvNo(InvoiceNo) {

//  Check for Carriage Return and Tab

 if ((event.keyCode == 13) || (event.keyCode == 9)) {

  if (!isWhitespace(InvoiceNo.value)) {
   var Url = "../cgi-bin/patweb80.pbl?reportno=51" +
             "&valdcode="+InvoiceNo.value.replace(/ /g,"+") +
             "&valdtype=1"

   var returnValue = RSExecute(Url);    //Remote Script To validate invoice no
   if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");

    ServerPage="patweb76.pbl?reportno=01&template=001" +
       "&invoicen="+ReturnValue[0].replace(/ /g,"+") +
       "&admissno="+ReturnValue[1].replace(/ /g,"+") +
       "&urnumber="+ReturnValue[2].replace(/ /g,"+") +
       "&visittyp="+ReturnValue[3].replace(/ /g,"+") +
       "&updatety=1"

    document.UpdateForm.urnum.value=ReturnValue[2];

// alert(ServerPage);
    location.href=ServerPage 
  }
  else {
  InvoiceNo.select();  }
  }   
 }
}
function DummyPost(InvoiceNo) {
 if(validateMandatory(UpdateForm)) {
  if (!isWhitespace(InvoiceNo.value)) {
   var Url = "../cgi-bin/patweb80.pbl?reportno=51" +
             "&valdcode="+InvoiceNo.value.replace(/ /g,"+") +
             "&valdtype=1"

   var returnValue = RSExecute(Url);    //Remote Script To validate invoice no
   if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");

    ServerPage="patweb76.pbl?reportno=01&template=001" +
       "&invoicen="+ReturnValue[0].replace(/ /g,"+") +
       "&admissno="+ReturnValue[1].replace(/ /g,"+") +
       "&urnumber="+ReturnValue[2].replace(/ /g,"+") +
       "&visittyp="+ReturnValue[3].replace(/ /g,"+") +
       "&updatety=1"

    document.UpdateForm.urnum.value=ReturnValue[2];
    location.href=ServerPage
   }
  }
 }
}
</script>

%START.OF.PAGE
</head>
<body onload="PageLoad(event);">
<form name=UpdateForm method=post action=patweb76.pbl>
<table width=100% align=center border=1 cellspacing=0>
   <input type=hidden name=reportno value="1">
   <input type=hidden name=template value="017">
   <input type=hidden name=urnumber value="%PATWEB76.01.003">
   <input type=hidden name=nextpage value="2">
   <input type=hidden name=redirect value="%PATWEB76.01.001.patweb76.01.001">
   <input type=hidden name=updatety value="5">

<tr><td align=center class=HeadingCell>
    Invoice Search</td></tr>
</table>
<br>

<table width=95% align=center border=0 cellspacing=0>
<tr><td class=DataLabel width=20%>Invoice Number </td>
    <td class=DataField>
    <input type=text title="Invoice Number"
     name=invoicen class=Mandatory length=8 size=10 
     onKeyDown='valInvNo(UpdateForm.invoicen);'>
    </td>

    <td class=DataLabel width=20%>U/R Number </td>
    <td class=DataField><input type=text size=10 name=urnum
        class=readonly ReadOnly>
    </td></tr>

<tr><td>&nbsp;</td></tr>

<tr><td colspan=4 align=center>
       <input type=button class="button" value="Ok" 
        name="okaybutt" id="okaybutt"
        onclick='DummyPost(UpdateForm.invoicen);'>
    </td></tr>

</table>
</form>

