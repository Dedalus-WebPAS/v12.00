<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script language=javascript src="../js/TableSort.js"></script>
<script language="Javascript">
function ReferralLink(ReferralKey) {
  var uno=PatientLinks.urnumber.value.replace(/ /g,"+");
  var rno=ReferralKey.replace(/ /g,"+");
  Location="../cgi-bin/allweb02.pbl?reportno=02&template=002&urnumber="+uno+
           "&admissno="+rno;
  location.href=Location;
}
function BookingLink(vs,ur,sit) {
  if(sit != PatientLinks.wbsesite.value) {
   // alert("Referral preferred outpatient site mismatch with user id.");
    alert("Can't book an appointment from a Master Referral.");
    return;
  }
  Location="../cgi-bin/patweb98.pbl?reportno=01&template=001" + 
           "&urnumber=" + ur.replace(/ /g,"+") +
           "&admissno=" + vs.replace(/ /g,"+") +
           "&bookflag=2";
  location.href=Location;
}
function AddNewReferral() {
   Left=(document.body.clientWidth-900)/2;
   DFrameSubmit(AddReferral,50,Left,900,550);
}
function AddUserReferral() {
   if(isWhitespace(document.PatientLinks.wbsedall.value)) {
     alert("User does not have a default department.");
     return;
   }
   document.AddReferral.allrf001.value=document.PatientLinks.wbsedall.value;
   Left=(document.body.clientWidth-900)/2;
   DFrameSubmit(AddReferral,50,Left,900,550);
}
//----------------------------------------------------------------------------
// Create New Table Object
// Border, Cellspacing, Cellpadding, Width, Align, Heading Height, Row Height
//----------------------------------------------------------------------------
// Add Columns in Order Required
// Heading,Type,Display Column,Sort Column, Align, Icon, Link Column
// Columns Available
// 0. Referral Link
// 1. Department Description
// 2. Referral Date
// 3. Status Description
// 4. Referred By
// 5. Problem Description
// 6. Referral/Visit Number
// 7. Last Encounter Date
// 8. Priority
// 9. Compensation
//---------------------------------------------------------------------------
function InitTable(TableView) {
document.title="Referral Management Referrals - Outpatient View"
switch (TableView) {
case 0: {
 t = new Table(1,0,2,"100%","center",35,45);
 t.addColumn("Referral Status","String",3,3,"left","EditIcon.gif","0",70)
 t.addColumn("Booking Status","String",19,19,"left","AppointmentIcon.gif","20",70)
 t.addColumn("Date of Referral","Date",2,2,"left nowrap","","",65)
 t.addColumn("Referring HCP","String",18,18,"left","","",80)
 t.addColumn("Presenting Complaint","String",10,10,"left","","",75)
 t.addColumn("Clinic Type","String",12,12,"left","","",80)
 t.addColumn("Clinic Id","String",11,11,"left","","",80)
 t.addColumn("Expiry Indicator","Image",15,15,"center","ExpiryIcon","",50)
 t.addColumn("Referral Expiry Date","Date",14,14,"left","","",70)
 AddTableRows()
 t.sortTable(2,0);    // Sort by date
 TableOutput(0,0);    // Order Column,Asc Dsc
 break; }
 }
}
</script>
%START.OF.PAGE
<body onload=PageLoad(event);InitTable(0);>
<div id="HeadingSection"> 
<div id="PageHeadingSection">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%ALLWEB02.02.003";
PatientVIS="%ALLWEB02.02.081";
PatientNAM="%ALLWEB02.02.002";
PatientSTA="%ALLWEB02.02.086.078";
PatientALT="%ALLWEB02.02.084";
PatientSEX="%ALLWEB02.02.019";
PatientDOB="%ALLWEB02.02.020";
PatientAGE="%ALLWEB02.02.021";
PatientLOC="%ALLWEB02.02.083";
PatientPRI="%ALLWEB02.02.086.066.1";
PatientUNT="%ALLWEB02.02.066.0";
DoctorCOD="%ALLWEB02.02.082.003";
DoctorNAM="%ALLWEB02.02.082.002";
PatientAID="%ALLWEB02.02.086.090";
PatientIND="%ALLWEB02.02.086.091";
PatientCUR="%ALLWEB02.02.086.092";
PatientCLC="%ALLWEB02.02.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%ALLWEB02.02.086.094";
PatientCDM="%ALLWEB02.02.086.095";
PatientVDH="%ALLWEB02.02.086.099.015";
InsertPatientHeader()
</script>
<div id="PatientMenu"></div> 
</div>
<form name=AddReferral method=get action=allweb02.pbl style="margin:0">
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%ALLWEB02.02.003">
<table cellspacing=0 cellpadding=0 border=1 width=100% class=HeadingCell>
<tr><td>
    <table cellspacing=0 cellpadding=0 border=0 width=100% >
    <tr><td width=50% align=right class=HeadingCell></td>
       <td align=right colspan=2 class=HeadingCell>Add Referral
       <input type=button class=SlimButton value="Add"
        title="Add referral for users department" onclick="AddUserReferral();">
       <select class=PMenuSelectList name=allrf001 
              onmouseover='MenuOver(event,this)' 
              onchange="AddNewReferral();">
       <option></option>
       %ALLWEB02.02.208
       </select></td></tr>
    </table>
</td></tr>
</table>
</form>
</div>
<div id=TableLocation></div>
<script language="Javascript">
function AddTableRows() {
%ALLWEB02.02.201
}
</script>

<form name=PatientLinks method=get style="margin:0">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="004">
<input type=hidden name=urnumber value="%ALLWEB02.02.003">
<input type=hidden name=admissno value="%ALLWEB02.02.081">
<input type=hidden name=MenuType value="%ALLWEB02.02.088">
<input type=hidden name=wbsesite value="%STANDARD.01.023">
<input type=hidden name=wbsedall value="%STANDARD.01.028">
</form>
