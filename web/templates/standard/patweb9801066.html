<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function Merge() {
 if(!isWhitespace(document.UpdateForm.d_emvipadm.value)) {
    if(!confirm("Warning - Linked Pre-Admission/Admission " +
          document.UpdateForm.d_emvipadm.value +
          " exists. The linked Pre-Admission/Admission " +
          "will be moved to the new U/R." +
          "\nPress Ok to continue, Cancel to Abort.")) {
        return;
    }
  }
  AddForm.admissno.value=UpdateForm.admissno.value;
  AddForm.newurnum.value=UpdateForm.urnumber.value;
  AddForm.edlinkip.value=UpdateForm.d_emvipadm.value;
  AddForm.redirect.value="emrweb02.pbl?reportno=1&template=104" + 
                       "&admissno=" + AddForm.admissno.value.replace(/ /g,"+") +
                       "&urnumber=" + AddForm.newurnum.value.replace(/ /g,"+");
//
 if(!top.location.pathname.match(/EmergencyMap/g)) {
    if(top.content.location.search.substring(1,25)!=
       "reportno=01&template=104") {
       AddForm.redirect.value="emrweb02.pbl?reportno=1&template=017" + 
                       "&admissno=" + AddForm.admissno.value.replace(/ /g,"+") +
                       "&urnumber=" + AddForm.newurnum.value.replace(/ /g,"+");
    }
 }
//
  SubmitHidden(document.AddForm);
 }

function validateRecordID() {
 p=document.UpdateForm;
 UpCase(p.urnumber);
 if(p.urnumber.value!="") {
   LenUR=p.urnumber.value.length;
   if (LenUR < 9) { 
      Count= 8 - LenUR ;
      Blanks="";
      for (i=0; i < Count;i++) { Blanks+=" ";}
      p.urnumber.value=Blanks + p.urnumber.value }
   validateCode(13,p.urnumber,p.fna,UpdateUR,p.sex,p.dob,p.pce,p.dum,p.dum1,
         p.da,p.typ,p.age,p.medi,p.adda,p.addb,p.sub,p.addc,p.post)}
}
function UpdateUR() {
  if (document.UpdateForm.dum.value != document.UpdateForm.urnumber.value) {
     alert("UR Number Merged with " + document.UpdateForm.dum.value );
     document.UpdateForm.urnumber.value = document.UpdateForm.dum.value }
}
function init() {
 if(document.UpdateForm.d_visittype.value != "1") {
    alert("Error - Invalid visit type. " +
          "The visit in context must be an emergency visit." );
    DFrameExit();
 }
}
</script>
%START.OF.PAGE
</head>

<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
 Change U/R
</span>

<form action=patweb83.pbl name=UpdateForm type=post style="margin:0">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="41">
<input type=hidden name=admissno value="%PATWEB98.01.081">
<input type=hidden name=dum value="">
<input type=hidden name=da value="">
<input type=hidden name=pce value="">
<input type=hidden name=dum1 value="">
<input type=hidden name=typ value="1">
<input type=hidden name=d_emvipadm value="%PATWEB98.01.363">
<input type=hidden name=d_visittype value="%PATWEB98.01.905">

<table width=95% align=center border=0 cellspacing=0>
<tr><td class=DataLabel>U/R Number (to keep)</td> 
    <td class=DataField>
    <input type=text title="U/R No" name=urnumber class=Mandatory size=20
     onblur='validateRecordID();'></td></tr>

<tr><td class=DataLabel>Name</td>
    <td class=DataField>
    <input type=text name=fna size=50 readonly></td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td class=DataLabel>
    <input type=text name=dob size=20 readonly>
    Age <input type=text name=age size=10 readonly></td></tr>

<tr><td class=DataLabel>Sex</td>
    <td class=DataField>
    <input type=text name=sex size=10 readonly></td></tr>

<tr><td class=DataLabel>Medicare Number</td>
    <td class=DataField>
    <input type=text name=medi size=10 readonly></td></tr>

<tr><td class=DataLabel>Address 1</td>
    <td class=DataField>
    <input type=text name=adda size=35 readonly></td></tr>

<tr><td class=DataLabel>Address 2</td>
    <td class=DataField>
    <input type=text name=addb size=35 readonly></td></tr>

<tr><td class=DataLabel>Address 3</td>
    <td class=DataField>
    <input type=text name=sub size=35 readonly></td></tr>

<tr><td class=DataLabel>Address 4</td>
    <td class=DataField>
    <input type=text name=addc size=35 readonly></td></tr>

<tr><td class=DataLabel>Postcode</td>
    <td class=DataField>
    <input type=text name=post size=8 readonly></td></tr>

<tr><td colspan=3 align=center>
    <input type=button value=Ok class="button" id="pat98ok" 
     onclick="tempDisable(this);Merge();">
    <input type=reset value=Cancel class="button">
    <input type=button value=Close class="button" onclick="DFrameExit();">
    </td></tr>
</table>
</form>

<form action=patweb83.pbl name=AddForm type=post>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=001>
<input type=hidden name=nextpage value="2">
<input type=hidden name=redirect>
<input type=hidden name=admissno>
<input type=hidden name=newurnum>
<input type=hidden name=edlinkip>
</form>
