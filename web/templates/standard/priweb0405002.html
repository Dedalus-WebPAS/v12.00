<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/TableSort.js"></script>
<script type="text/javascript">
function linkInvoice(urnumber,uniqueno,praccode,doctcode,patind) {
  f = document.PatientLinks;
  f.action="priweb02.pbl";
  f.reportno.value="1";
  f.template.value="013";
  f.urnumber.value=urnumber;
  f.uniqnumb.value=uniqueno;
  f.prhre001.value=praccode;
  f.prhre002.value=doctcode;
  f.prhre003.value=patind;
  f.prhtr001.value="````````";
  f.frmpplst.value="1"
  SetCookiePath("PPPendingListURL");
  f.submit()
}

// showflag=0 - initial Page Load will NOT list All invoice Pending patients
// showflag=1 - initial Page Load will list All Invoice Pending patients

function newSearch() {
  f = document.UpdateForm;
  f.showflag.value = "1";
  f.submit();
}
function InitialSetup() {
  f = document.UpdateForm;
  if(f.showflag.value != "1") {
    InitialSetupFstTime();
    return;
  }

  selectOptionsDoctUserId(f.pridc002.value,
                          f.webuseri.value,
                          f.pridc001,
                          f.praccode.value)
}
function InitialSetupFstTime() {
  f = document.UpdateForm;
  if(!isWhitespace(f.webdoctc.value)) {
    for (var i =0 ; i < f.pridc002.length; i++) {
      var doctcode = f.pridc002.options[i].value.substr(0,10);
      if (trim(doctcode)==trim(f.webdoctc.value)) {
        f.pridc002.selectedIndex=i
      }
    }
  }

  selectOptionsDoctUserId(f.pridc002.value,
                          f.webuseri.value,
                          f.pridc001,
                          f.praccode.value)

  if(!isWhitespace(f.prseprac.value)) {
    for (var i =0 ; i < f.pridc001.length; i++) {
      var practice = f.pridc001.options[i].value.substr(0,10);
      if (trim(practice)==trim(f.prseprac.value)) {
        f.pridc001.selectedIndex=i
      }
    }
  }
}
function ResetPracCode(PracCode) {
  f = document.UpdateForm;
  if(!isWhitespace(PracCode)) {
    for (var i =0 ; i < f.pridc001.length; i++) {
      var prac = f.pridc001.options[i].value.substr(0,6);
      if (prac==PracCode) {
        f.pridc001.selectedIndex=i
      }
    }
  }
}
function PostFilter() {
  document.UpdateForm.submit();
  document.UpdateForm.showflag.value= "1";
  document.UpdateForm.selmprac.value=document.UpdateForm.pridc001.value;
}

//----------------------------------------------------------------------
// Get Private practice list for doctor code, user id and defaulted 
// practice code
//----------------------------------------------------------------------
function selectOptionsDoctUserId(DoctCode,UserId,ReturnSelect,PracCode) {
  var serverURL   = "../cgi-bin/comweb81.pbl?reportno=35" +
                    "&valdcode=" + DoctCode.replace(/ /g,"+") +
                    "&valdcod2=" + UserId.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnSelect.options.length=0
    ReturnSelect.options[ReturnSelect.options.length]=new Option("All","");
    ReturnValue=returnValue.return_value.split("|");
    for (var j=0; j < ReturnValue.length; j++) {
      if (!isWhitespace(ReturnValue[j])) {
        SelectValue=ReturnValue[j].split(",");
        ReturnSelect.options[ReturnSelect.options.length]=
        new Option(SelectValue[1],SelectValue[0]);
      }
    }
    ResetPracCode(PracCode);
  }
}

function MPServDoctorSearch(MediPrac,ReturnCode,ReturnName) {
  var PopUpFrameDoc = DFrameStart();

  window.MediPrac=MediPrac;
  window.ReturnCode=ReturnCode ;
  window.ReturnName=ReturnName ;
  PopUpFrameDoc.location.href="../cgi-bin/" +
                              "priweb01.pbl?reportno=2&template=8&pridc001="+
                               MediPrac.value + 
                              "&selmprac=" + MediPrac.value +
                              "&norecord=10";
  SearchFrameShow();
 }

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);initTable(0)">
<div id="HeadingSection">
<form name=UpdateForm id=UpdateForm action="priweb04.pbl" method=get
 style="margin:0">
<input type=hidden name=reportno id=reportno value="5">
<input type=hidden name=template id=template value="002">
<input type=hidden name=updttype id=updttype value=" ">
<input type=hidden name=catCLdes id=catCLdes value="%STANDARD.01.017.CL">
<input type=hidden name=webuseri value="%STANDARD.01.008">
<input type=hidden name=webdoctc value="%STANDARD.01.010">
<input type=hidden name=showflag id=showflag value="%PRIWEB04.05.204">
<input type=hidden name=praccode id=praccode value="%PRIWEB04.05.205">
<input type=hidden name=prseprac id=prseprac value="%PRIWEB04.05.206">
<input type=hidden name=selmprac id=updttype value="">

<table width=100% cellpadding=1 cellspacing=1 border=0 bgcolor=#CCCCCC>
<tr><td class=DataLabel>Medical Practice</td>
    <td class=DataField>
      <select name=pridc001 id=pridc001 class="SelectBig"
       title="Medical Practice" onchange="PostFilter();">
      </select></td>
    <td class=DataLabel>Service HCP</td>
       <td><input type=hidden name=pridc002 id=pridc002
            value="%PRIWEB04.05.002.0">
           <input type="text" readonly size="30" maxlength="30"
                  name="doctname" id=doctname value="%PRIWEB04.05.002.1"
                  title="Service HCP" tabindex=-1>
           <img src="../images/SearchIcon.gif" class=Icon
             onclick="MPServDoctorSearch(pridc001,pridc002,doctname);">
           <img src="../images/erase.gif" class=Icon
             onclick="clrFields(showflag,pridc001,pridc002,doctname);
                      PostFilter();"></td>

    <td class=DataLabel>%STANDARD.01.017.CL</td>
    <td class=DataField>
      <select name=filtclam id=filtclam class="SelectBig"
       title="%STANDARD.01.017.CL">
       <option value="">All</option>
        %PRIWEB04.05.202.2
      </select></td>
    <td class=DataLabel>Health Fund</td>
    <td class=DataField>
      <select name="filthfnd" id="filthfnd" class="SelectBig"
       title="Health Fund">
       <option value="">All</option>
        %PRIWEB04.05.201.2
      </select></td>
    <td><input type=button value="Go" class=button
      onclick="newSearch();"></td>
</tr>
</table>

</form>
</div>

<div id=TableLocation></div>
<form name=PatientLinks id=PatientLinks method="get">
 <input type=hidden name=reportno value="1">
 <input type=hidden name=template value="013">
 <input type=hidden name=urnumber value="">
 <input type=hidden name=uniqnumb value="">
 <input type=hidden name=prhre001 value="">
 <input type=hidden name=prhre002 value="">
 <input type=hidden name=prhre003 value="">
 <input type=hidden name=prhtr001 value="">
 <input type=hidden name=frmpplst value="">
</form>

<script type="text/javascript">
function initTable(TableView) {
 switch (TableView) {
 case 0: {
  document.title="Private Practice Invoice Pending"
  t = new Table(1,0,1,"100%","center",35,35); // Create New Table Object
// Add Columns in Order Required

// Heading,Type,Display Column,Sort Column,Align
  t.addColumn("Visit U/R No","String",1,1,"left","EditIcon.gif","0",50)
  t.addColumn("Name","String",2,2,"left","","",100)
  t.addColumn("Visit Date","Date",3,3,"left","","",50)
  t.addColumn("Doctor","String",4,4,"left","","",80)
  t.addColumn("Medical Practice","String",5,5,"left","","",80)
  t.addColumn(document.UpdateForm.catCLdes.value,"String",6,6,"left","","",60)
  t.addColumn("Health Fund","String",7,7,"left","","",60)
  t.addColumn("Patient Indicator","String",8,8,"left","","",60)
  t.addColumn("Type of IMC","String",9,9,"left","","",60)

// Add Rows to Table (Output from Web Server)
//
  AddTableRows();
  t.sortTable(0,1);                              // Patient Name
  OrderColumn=0;
  AscDsc=1;
  TableOutput(OrderColumn,AscDsc);
  break; }
 }
}
function AddTableRows() {
  %PRIWEB04.05.203
}

  InitialSetup();
  
</script>
