<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/DefaultOnline.js"> </script>
<!--TAC FORM-->
<script type="text/javascript">
function ChkClaim() {
  if ((document.UpdateForm.ptclm015.value=="c-u") ||
      (document.UpdateForm.ptclm015.value=="c-U") ||
      (document.UpdateForm.ptclm015.value=="C-u")) {
    document.UpdateForm.ptclm015.value="C-U"
  }
}
function SearchPage(returnName,LookupPage) {
  window.returnName=returnName ;
  Lookup=open(LookupPage, "LookupWindow",
              "width=450,height=300,top=100,left=100,scrollbars=yes,status=no,toolbar=no,menubar=no") ;
}
function chgName()  {
  if (document.UpdateForm.chckname.value==0) {
  ans=confirm("Save old Name as Alais ?");
  if (ans) {
    document.UpdateForm.chckname.value="1"
    }
  }
}
function SubmitClaim() {
  ReturnPath=GetCookieData('InvoiceReturn');
  if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
    document.cookie="InvoiceReturn=;"              // clear cookie
    document.UpdateForm.redirect.value=ReturnPath; // return to invoice screen
 } else if(document.UpdateForm.mvmedrec.value == "1") {
    document.UpdateForm.redirect.value="mrtweb01.pbl?reportno=09&template=004"
    + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
    + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
 } else if (document.UpdateForm.returncd.value == "MEH") {
     document.UpdateForm.redirect.value="patweb89.pbl?reportno=07&template=001"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+");
 } else {
     document.UpdateForm.redirect.value="patweb98.pbl?reportno=01&template=043"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+");
  }
  SubmitHidden(UpdateForm);
}
function CheckFund(fund,selectlist)  {
  var found=0
  strvar=fund.value;
  if (!isWhitespace(strvar)) {
    for (var i = 0 ; i < selectlist.length; i++) {
      strvar=fund.value+"      "   // format as three characters space filled
      fund.value=strvar.substr(0,6)
      if (selectlist.options[i].value.substr(0,6)==fund.value) {
        found=1
        selectlist.selectedIndex=i }
    }
    if (found==0) { alert("Invalid Fund Entered")
      fund.focus() }
  }
}
function UpdateFund(fund,selectlist) {
  fund.value=selectlist.value.substr(0,6);
}
function valTAC() {
  //alert(UpdateForm.ptclm032.length);
  validateTAC(42,UpdateForm.urnumber,UpdateForm.admissno,UpdateForm.ptclm015,
                 UpdateForm.ptclm016,UpdateForm.ptclm030,UpdateForm.ptclm019,
                 UpdateForm.ptclm017,UpdateForm.ptclm020,UpdateForm.ptclm018,
                 UpdateForm.ptclm021,UpdateForm.drvrpass,UpdateForm.ptclm022,
                 UpdateForm.ptclm024,UpdateForm.ptclm025,UpdateForm.ptclm026,
                 UpdateForm.ptclm027,UpdateForm.ptclm028,UpdateForm.ptclm029,
                 UpdateForm.dummy);
  
  for (var i =0 ; i < document.UpdateForm.ptclm032.length; i++) {
    if (document.UpdateForm.drvrpass.value==
       trim(document.UpdateForm.ptclm032.options[i].value.substr(0,3))) {
            document.UpdateForm.ptclm032.selectedIndex=i;
    }
  }
}
function CheckACT() {
  if(document.UpdateForm.ptcnhdps.value=="9" &&
     document.UpdateForm.ptclm016.value=="01 Jan 1901") {
       document.UpdateForm.ptclm016.value="";
  }
}
function init() {
  if(document.UpdateForm.chostyp.value=="0"){
    document.UpdateForm.ptclm016.className="PastDate";
  }
}
function lookUpMAB() {
  MABRefNoSearchFrame(UpdateForm.urnumber,UpdateForm.ptclm015,UpdateForm.ptclm016,
                      UpdateForm.ptclm030,
                      UpdateForm.ptclm019,UpdateForm.ptclm017,UpdateForm.ptclm020,
                      UpdateForm.ptclm018,UpdateForm.ptclm021,UpdateForm.drvrpass,
                      UpdateForm.ptclm022,UpdateForm.ptclm024,UpdateForm.ptclm025,
                      UpdateForm.ptclm026,UpdateForm.ptclm027,UpdateForm.ptclm028,
                      UpdateForm.ptclm029,UpdateForm.dummy,UpdateForm.ptclm032,
                      UpdateForm.ptclm023);
}
function MABRefNoSearchFrame(urnumber,RetMABNo,RetDat,RetLoc,RetOthDrv,
                             RetPolRep,RetDet1,
                             RetCRegInv,RetDet2,RetDrvPas,RetMode,RetEng,
                             RetInjWhn,RetMechInj,RetRegInj,RetSoli,RetSNo,
                             RetInd,RetDrvPasSel,RetIndSel) {
  //alert(RetMABNo.value);
  DFrameStart();
  window.urnumber=urnumber;
  window.RetMABNo=RetMABNo;     window.RetDat=RetDat;
  window.RetLoc=RetLoc;         window.RetOthDrv=RetOthDrv;
  window.RetPolRep=RetPolRep;   window.RetDet1=RetDet1;
  window.RetCRegInv=RetCRegInv; window.RetDet2=RetDet2;
  window.RetDrvPas=RetDrvPas;   window.RetMode=RetMode;
  window.RetEng=RetEng;         window.RetInjWhn=RetInjWhn;
  window.RetMechInj=RetMechInj; window.RetRegInj=RetRegInj;
  window.RetSoli=RetSoli;       window.RetSNo=RetSNo;
  window.RetInd=RetInd;         window.RetDrvPasSel=RetDrvPasSel;
  window.RetIndSel=RetIndSel;
  //alert(window.RetDrvPas.value);
  document.getElementById('PopUpFrame').src="../lookups/MABRefNoSearchFrame.html";
  SearchFrameShow();
}
function checkFields() {
  alert("Post Field Processing");
}
function OnlinePreadmission() {
  AdmissionID=GetCookieData("AdmissionID")
  if (!isWhitespace(AdmissionID) && AdmissionID != "unknown") {
/* Any Post Preadmission Default Field Processing the following call back function  */
    var cb = function() {
    }
    DefaultOnline("webPASDefaultTAC",AdmissionID,cb);
  }
}
</script>
</head>
%START.OF.PAGE
<body onLoad="PageLoad(event);CheckACT();OnlinePreadmission();">
<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>
<div id=PageBodySection>
 <form name=UpdateForm action="patweb89.pbl" method=post style="margin:0">
  <input type=hidden name=reportno value="02">
  <input type=hidden name=template value="006">
  <input type=hidden name=updatety value="5">
  <input type=hidden name=urnumber value="%PATWEB89.01.003">
  <input type=hidden name=admissno value="%PATWEB89.01.101">
  <input type=hidden name=chckname>
  <input type=hidden name=redirect value="%PATWEB89.01.001.patweb98.01.001">
  <input type=hidden name=claimtyp value="M">
  <input type=hidden name=nextpage value=2>
  <input type=hidden name=mvmedrec value="%PATWEB89.01.902">
  <input type=hidden name=drvrpass>
  <input type=hidden name=dummy value=0>
  <input type=hidden name=ptclm023>
  <input type=hidden name=returncd value="%PATWEB89.01.933">
  <input type=hidden name=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
  <input type=hidden name=chostyp value="%STANDARD.01.025.013.245.0.1">

  <table align=center width=100% border=0 cellspacing=0 cellpadding=1>

   <tr><td class=HeadingCell align=center colspan=6>
           Motor Vehicle (TAC) Claim Details</td></tr>

   <tr><td class=DataLabel>TAC Claim Number</td>
       <td><input type="text" size="9" name="ptclm015" tabindex=1
                  class=Mandatory maxlength="8" title="TAC Claim Number"
                  value="%PATWEB89.01.312"
                  onchange="ChkClaim();">
             <img src="../images/SearchIcon.gif" class=Icon
                  onclick="lookUpMAB();"></td>
       <td class=DataLabel>Date Of Accident</td>
       <td><input type="text" size="11" maxlength="25" tabindex=2
                  name="ptclm016" class="Mandatory PastDate"
                  value="%PATWEB89.01.313" title="Accident Date"
                  onblur="checkDate(this,'Accident Date')">
             <img src="../images/DateLookup.gif" class=Icon
              onclick="DateLookupFrame(UpdateForm.ptclm016);"></td>
       <td class=DataLabel>Acc. Location</td>
       <td><input type="text" size="45" maxlength="40" name="ptclm030"
                  tabindex=30 value="%PATWEB89.01.327"></td></tr>

   <tr><td class=DataLabel>Other Driver</td>
       <td><input type="text" size="35" maxlength=30 tabindex=4
                  name="ptclm019" value="%PATWEB89.01.316"></td>
       <td colspan=2>&nbsp;</td>
       <td class=DataLabel>Police Station Rep.</td>
       <td><input type="text" name="ptclm017" size=25 maxlength=20
                  tabindex=32 value="%PATWEB89.01.314"></td></tr>

   <tr><td class=DataLabel>Details</td>
       <td><input type="text" size="35" maxlength=30 tabindex=6
                  name="ptclm020" value="%PATWEB89.01.317"></td>
       <td colspan=2>&nbsp;</td>
       <td class=DataLabel>Car Reg. Inv.</td>
       <td><input type="text" size="25" maxlength=20 name="ptclm018"
                  tabindex=34 value="%PATWEB89.01.315"></td></tr>

   <tr><td class=DataLabel></td>
       <td><input type="text" size="35" maxlength=30 tabindex=8
                  name="ptclm021" value="%PATWEB89.01.318"></td>
       <td colspan=2>&nbsp;</td>
       <td class=DataLabel>Driver/Passenger</td>
       <td><select name=ptclm032 tabindex=36>
             <option value=" "></option>
               %PATWEB89.01.331.2
           </select></td></tr>

   <tr><td class=DataLabel>Mode of transport</td>
       <td><input type="text" name="ptclm022" size=15 maxlength=10
                  tabindex=10 value="%PATWEB89.01.319"></td>
       <td class=DataLabel>While engaged in</td>
       <td><input type="text" name="ptclm024" size=25 maxlength=20
                  value="%PATWEB89.01.321" tabindex=20></td>
       <td colspan=2>&nbsp;</td></tr>

   <tr><td class=DataLabel>Injured when</td>
       <td><input type="text" name="ptclm025" size=35 maxlength=30 tabindex=12
                  value="%PATWEB89.01.322"></td>
       <td class=DataLabel>Mech of Severest Inj. </td>
       <td><input type="text" name="ptclm026" size=35 maxlength=30 tabindex=22
                  value="%PATWEB89.01.323"></td>
       <td class=DataLabel>Region of Severest Inj. </td>
       <td><input type="text" name="ptclm027" size=25 maxlength=20 tabindex=38
                  value="%PATWEB89.01.324"></td></tr>

   <tr><td class=DataLabel>Solicitor </td>
       <td><input type="text" name="ptclm028" size=35 maxlength=30 tabindex=14
                  value="%PATWEB89.01.325"></td>
       <td class=DataLabel>Solicitor Phone Number</td>
       <td><input type="text" name="ptclm029" size=20 maxlength=12 tabindex=24
                  value="%PATWEB89.01.326"></td>
       <td colspan=2>&nbsp;</td></tr>

   <tr><td class=DataLabel>Insurance Company</td>
       <td><select name="ptclm082" tabindex=16>
              <option></option>
                %PATWEB89.01.385.2
            </select></td>
       <td colspan=4>&nbsp;</td></tr>

   <tr><td colspan=6 align=center>
           <input type=button value="Update" tabindex=50 class="button"
                  id="pat89sub" onclick="tempDisable(this);SubmitClaim();">
           <input type=button value="Cancel" tabindex=51 class="button"
                  onclick="SetCancel();"></td></tr>
  </table>
 </form>
</div>

<form name=PatientLinks method=get>
 <input type=hidden name=reportno value=1>
 <input type=hidden name=template value=004>
 <input type=hidden name=regexstm value=102>
 <input type=hidden name=newstand value=1>
 <input type=hidden name=urnumber value="%PATWEB89.01.003">
 <input type=hidden name=admissno value="%PATWEB89.01.081">
 <input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<script type="text/javascript">
 for (var i=0;i<document.UpdateForm.ptclm020.length;i++) {
   if (document.UpdateForm.ptclm020[i].value=="%PATWEB89.01.320") {
       document.UpdateForm.ptclm020[i].checked=true
   }
 }
 function SetCancel() {
   if (!confirm("Warning: Injury/Accident Data will not be Updated!\n Ok to Continue ?")) {
     return; }
   ReturnPath=GetCookieData('InvoiceReturn');
   if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
     document.cookie="InvoiceReturn=;"   // clear cookie
     location.href=ReturnPath;           // return to raise invoice screen
   } else {
     var urnumber ="%PATWEB89.01.003";
     var admissno ="%PATWEB89.01.101";
     var link = "patweb98.pbl?reportno=01&template=001&urnumber="+urnumber+
                "&admissno="+admissno;
     location.href= link;
   }
 }
 PmiPatientFolder="%PATWEB89.01.879.3"
 PTCNCOMF="%STANDARD.01.025.110.243.0.1"
 if (PmiPatientFolder.substr(3,1) != "2" && PTCNCOMF=="2") {
   alert("Patient folder conflict - " +
         "Patient folder details will be updated.");
 }
 if (document.UpdateForm.ptcnhdps.value=="9") {
     document.UpdateForm.ptclm015.className="";
 }
</script>
