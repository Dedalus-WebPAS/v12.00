Content-Type: text/html
Cache-Control: no-cache

<!doctype html>
<html>
<head>	
<!--"TemplateVersion"  : "V12.00.00"
    "TemplateHome"     : "mobile"-->
<script type="text/javascript" src="../html/ipad/ipad.js"> </script>
<script type="text/javascript" src="../html/ipad/ipadform.js"> </script>
<link   rel="stylesheet" href="../html/ipad/ipad.css" type="text/css">
<script type="text/javascript">
function setButtons() {
  var actionBtn = parent.document.getElementById('actionButton');
  if(actionBtn) {
    actionBtn.className = actionBtn.className.replace(/SpanButton/g,"");
    actionBtn.className = actionBtn.className.replace(/Blue/g,"");
    actionBtn.className = actionBtn.className + " SpanButtonBlue";
    actionBtn.innerText = "Save";
    actionBtn.onclick = function() { submitUpdate() }
  }
}
function submitUpdate() {
  var bool = validateMandatory(document.AddForm);
  if(bool) {
    theURL=document.AddForm.action;
    document.AddForm.updttype.value='A';
    var postStr=AJAXPostString2(document.AddForm)
    var xmlHttp = createHttpObject();
    xmlHttp.open("POST", theURL, false);
    xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xmlHttp.send(postStr);
    if (xmlHttp.status=="200") {
      if (xmlHttp.responseText.match(/PROCESSING|OK/i)) {
        parent.document.location.reload();
      } else {
        alertify.alert(xmlHttp.responseText.replace(/.*alert../i,"").replace(/.\).*/i,""));
      }
    } else {
      alertify.alert("Web Service Not Available. Check your Connection and Try Again.");
    }
  }
  return bool
}
function dateSelection(el,defaultDate,noDays) {
  var now = new Date();
  if (isWhitespace(defaultDate)) {
    defaultDate=document.getElementById("currdate").value;
  }
  defaultDay=defaultDate.substr(0,2)
  defaultMonth=Mth3Num(defaultDate.substr(3,3))-1 
  defaultYear=defaultDate.substr(7,4) 
  now = new Date(defaultYear,defaultMonth,defaultDay,0,0,0);       // midnight
  var today = new Date(defaultYear,defaultMonth,defaultDay,0,0,0); // midnight
  var tomorrow = new Date(today.getTime()+(1*24*60*60*1000));
  var weekday=new Array(7);
  weekday[0]="Sun";
  weekday[1]="Mon";
  weekday[2]="Tue";
  weekday[3]="Wed";
  weekday[4]="Thu";
  weekday[5]="Fri";
  weekday[6]="Sat";
  for (var i=0;i<noDays;i++) {
     var theDay = new Date(now.getTime()-(i*24*60*60*1000));
     dayVal = "0"+theDay.getDate();
     mthVal = "0"+(theDay.getMonth()+1);
     dayVal=dayVal.substr(dayVal.length-2,2);
     mthVal=mth3Name(mthVal.substr(mthVal.length-2,2));
     dateVal = dayVal+' ' + mthVal + ' ' +  theDay.getFullYear();
     dateName=weekday[theDay.getDay()] + ' ' + dateVal;
     if (i==0) { dateName="Today"; }
     if (i==1) { dateName="Yesterday"; }
     el.options[el.options.length]=new Option(dateName,dateVal);
  }
  var maxIndex=1;
  for (i=0;i<7;i++) {
    cookieName="orderSelectDateIndex"+i;
    usageCount=parseInt(getCookie(cookieName),10);
    if (isNaN(usageCount)) {
      usageCount=0;
      setCookie(cookieName,"0",90);
    }
    if (usageCount>maxIndex) {
      maxIndex=usageCount;
      //document.AddForm.selectOrderdte.selectedIndex=i;
    }
  }
}
function setDefaultTime(el,defaultTime) {
  for (i=el.options.length-1;i>0;i--) {
    if (el.options[i].value>defaultTime) {
      el.selectedIndex=i
    }
  }
}
function timeSelection(el,defaultTime,timeInterval) {
  var hr=0;
  var mn=0;
  var defaultOption=0;
  var setCurrent=true;
  if (isWhitespace(defaultTime)) {
    defaultTime=document.getElementById("currtime").value;
  }
  for (var hr=0;hr<24;hr++) {
    for (var mi=0;mi<60;mi=mi+timeInterval) {
      hrVal="00"+hr;
      miVal="00"+mi;
      timeVal=hrVal.substr(hrVal.length-2,2)+":"+miVal.substr(miVal.length-2,2)
      if (timeVal!="00:00") {
        el.options[el.options.length]=new Option(timeVal,timeVal);
        if ((timeVal>defaultTime.substr(0,5))&&setCurrent) {
          defaultOption=el.options.length-1;
          setCurrent=false;
        }
      }
    }
  }
  el.selectedIndex=defaultOption;
}
</script>
</head>
%START.OF.PAGE
<body onload="setButtons();init();">
<form name=AddForm method=post action=patweb12.pbl>
<input type=hidden name=reportno value="5">
<input type=hidden name=template value="007">
<input type=hidden name=updttype value="A">
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="PROCESSING|OK">
<input type=hidden name=pmhrd001 value="%STANDARD.01.032">
<input type=hidden id=currdate name=currdate value="%STANDARD.01.015">
<input type=hidden id=currtime name=currtime value="%STANDARD.01.016">

<ul class=sectionList>
  <li class=sectionItem>
  <span class="labelText">Ward</span>
  <span class="sectionText">
    <select name=pmhrd002 title="Ward" class=Mandatory
     onchange="selectOptions2('31',document.AddForm.pmhrd002,document.AddForm.pmhrd003);">
    <option></option>
    %PATWEB12.05.102.2
    </select>
    </span></li>
  <li class=sectionItem>
  <span class="labelText">Bed</span>
  <span class="sectionText">
    <select name=pmhrd003 title="Bed" class=Mandatory>
    <option></option>
    </select> 
    </span></li>

  <li class=sectionItem>
  <span class="labelText">Request Date</span>
  <span class="sectionText">
    <select class=Mandatory name=pmhrd004 title="Request Date" ></select>
    </span></li>
  <li class=sectionItem>
  <span class="labelText">Request Time</span>
  <span class="sectionText">
    <select class=Mandatory name=pmhrd005 title="Request Time" ></select>
    </span></li>

    

  <li class=sectionItem>
  <span class="labelText">Requested Housekeeping Status</span>
  <span class="sectionText">
    <select name=pmhrd006 title="Request Housekeeping Status" class=Mandatory>
    <option></option>
    %PATWEB12.05.106.2
    </select>
    </span></li>

  <li class=sectionItem>
  <span class="labelText">Comment</span>
  <span class="sectionText">
    <input type=text name=pmhrd012 value="" size=52 maxlength=50>
    <input type=text name=pmhrd013 value="" size=52 maxlength=50>
    </span></li>
</ul>
</form>
<script type="text/javascript">
function init() {
 dateSelection(document.AddForm.pmhrd004,'%STANDARD.01.015',7)
 timeSelection(document.AddForm.pmhrd005,'%STANDARD.01.016',5)
}
</script>
</body>
