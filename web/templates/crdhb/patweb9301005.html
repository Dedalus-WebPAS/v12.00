<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript">
// 01 : CTAS : Added isReadOnly
function isReadOnly() {
	return (document.getElementById("occGroup").value.replace(/ /g,"")  === "GE");
}

function UpdateCondition(urnumber,admissno) {
	if (!isReadOnly()) {
	  linkurl="patweb93.pbl?reportno=5&template=001" +
			  "&urnumber=" + urnumber + "&admissno=" + admissno
	  // mw PAS-587
	  // DFrameLink(linkurl,50,250,410,300)
	  DFrameLink(linkurl,50,250,600,500)
  }
}
function UpdateDiet(urnumber,admissno) { 
	if (!isReadOnly()) {
	  linkurl="patweb98.pbl?reportno=4&template=003" +
			  "&urnumber=" + urnumber + "&admissno=" + admissno
	  DFrameLink(linkurl,0,75,300,175)
  }
}
function PatientAlerts(urnumber,admissno) { 
	if (!isReadOnly()) {
	  linkurl="patweb98.pbl?reportno=1&template=003" +
			  "&urnumber=" + urnumber + "&admissno=" + admissno
	  location.href=linkurl
  }
}
function PatientResults(urnumber,admissno) { 
	if (!isReadOnly()) {
	  linkurl="cliweb03.pbl?reportno=1&template=001" +
			  "&urnumber=" + urnumber + "&admissno=" + admissno
	  location.href=linkurl
	 }
}
function BedAllocation(urnumber,admissno) {
	if (!isReadOnly()) {
	  linkurl="patweb96.pbl?reportno=3&template=005" +
			  "&urnumber=" + urnumber + "&admissno=" + admissno
	  DFrameLink(linkurl,50,250,300,120)
  }
}
function InitTable(TableView) {
  ward=document.SelectWard.wardcode.value;
  bed=document.SelectWard.wbedtype.value;
  if (TableView==0) {
      linkurl="patweb93.pbl?reportno=1&template=005" +
              "&wardcode=" + ward +
              "&wbedtype=" + bed 
      }
  location.href=linkurl;
}
function ModBeds() {
	if (!isReadOnly()) {
	  document.cookie = "WardListPath=" + escape(location.href) + ";";
	  var ward = document.SelectWard.wardcode.value.replace(/ /g,"+");
	  location.href="patweb95.pbl?reportno=5&template=001&wardcode=" + ward;
	}
}
function MHLegStat(urnumber,admissno) {
	if (!isReadOnly()) {
	  linkurl="mehweb01.pbl?reportno=9&template=001" +
			  "&urnumber=" + urnumber + "&admissno=" + admissno
	  location.href=linkurl
	}
}
// end of change 
// 01 : CTAS added SetReadOnly
function SetReadOnly() {
	if (isReadOnly()) {
		document.getElementById("ModAvailBeds").style.visibility = "hidden";
		//var btnlinks = document.getElementsByClassName("ListIcon");
		var btnlinks = document.getElementsByTagName("img");
		for (var i=0; i<btnlinks.length; i++) {
			if (btnlinks[i].getAttribute("onclick")) {
				if (/UpdateDiet/.test(btnlinks[i].getAttribute("onclick"))
				//if ((btnlinks[i].getAttribute("onclick").indexOf("UpdateDiet") != -1)
					|| /BedAllocation/.test(btnlinks[i].getAttribute("onclick")))
				//	|| (btnlinks[i].getAttribute("onclick").indexOf("BedAllocation") != -1))
				////	|| (btnlinks[i].getAttribute("onclick").indexOf("UpdateCondition") != -1))
				{
					btnlinks[i].style.visibility = "hidden";
				}
				else if (/patweb98.pbl/.test(btnlinks[i].getAttribute("onclick"))) {
				//else if (btnlinks[i].getAttribute("onclick").indexOf("patweb98.pbl") != -1) {
					btnlinks[i].onclick = "javascript:void(0);";
					btnlinks[i].className = "";
				}
			}
		}
		var anchors = document.links;
		for (var i=0; i<anchors.length; i++) {
			anchors[i].setAttribute("href", "javascript:void(0);");
	//		anchors[i].style.visibility = "hidden";
			
	//		var dr = document.createElement("div");
	//		dr.innerHTML = anchors[i].text;
	//		anchors[i].parentNode.insertBefore(dr, anchors[i]);
		}
	}
}
</script>
%START.OF.PAGE
<!-- 01 : CTAS : Added call to SetReadOnly -->
<body onload="PageLoad(event);SetCount();SetReadOnly();">
<!-- end of change -->

<form name=SelectWard action=patweb93.pbl method=get style="margin:0">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="5">
<!-- 01 : CTAS : Added hidden value -->
<input type=hidden name=occGroup id=occGroup value="%STANDARD.01.012.1">
<!-- end of change -->
<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell>
        <img src=../images/TableViewIcon.gif  class=Icon
             alt="Default View" border=0 onclick='InitTable(0);'></td>
    <td class=HeadingCell align=center>
        Current Admission for %PATWEB93.01.102 </td>
<!-- 01 : CTAS : added id -->
    <td class=HeadingCell width=10%><input type=button id="ModAvailBeds" value="Mod Avail Beds"
        class="button" onclick="ModBeds();"></td>
<!-- end of change -->
    </tr>
</table>
<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell> Ward
        <select name=wardcode onchange="SelectWard.submit();" >
         %PATWEB93.01.001
        </select></td>

    <td class=HeadingCell> Type of Bed
        <select name=wbedtype onchange="SelectWard.submit();" >
                <option value="0">All Beds</option>
                <option value="1">Open Beds</option>
                <option value="2">Empty Beds Only</option>
    </select></td>

    <td class=HeadingCell> Number of Patients 
        <input type=text readonly name=numofpat size=3></td>

    <td class=HeadingCell>Patients in Un-Allocated Beds
        <input type=text readonly name=numunbed size=3></td>
</tr>
</table>
</form>

<table cellspacing=0 cellpadding=2 border=1 width=100%>

%PATWEB93.01.009.patweb98.01.001.patweb99.01.001.0.0.0.0.1.1

</table>
<tr><td colspan=7>
    <table border=0 align=center width=100%>
       <tr align=center height=35>
           <td width=25%></td>     
           <td width=10% class=AvailableCell align=center>
               Available Bed</td>
           <td width=10% class=ClosedCell align=center bgcolor=gray>
               Closed Bed</td>
           <td width=10% class=StandbyCell align=center>
               Standby Patient</td>
           <td width=10% class=PastDischDate align=center>
               Past Date </td>
           <td width=10% class=CurrDischDate align=center>
               Current Date </td>
           <td width=25%></td></tr>
    </table></td></tr>

<script type="text/javascript">
function SetCount() {
  document.SelectWard.numofpat.value="%PATWEB93.01.012" 
  document.SelectWard.numunbed.value="%PATWEB93.01.010" 
}
BedType="%PATWEB93.01.013"
for (var i =0 ; i < document.SelectWard.wbedtype.length; i++) {
  if (document.SelectWard.wbedtype.options[i].value==BedType.substr(0,1)) {
       document.SelectWard.wbedtype.selectedIndex=i } };
</script>
