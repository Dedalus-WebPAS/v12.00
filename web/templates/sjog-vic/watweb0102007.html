<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome" content="sjog-vic">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
%START.OF.PAGE
<script type="text/javascript"> 

function SetPortalCookie() {
  if (sjogprtl == "1") {
    SetCookie("sjogwaPortalCOOKIE","");
  }
}

function getPortalCookie() {
  if (GetCookieData("sjogwaPortalCOOKIE") != 'unknown') {
    ExpireCookiePath("sjogwaPortalCOOKIE");
    sjogprtl = "1";
  }
}

var sjogprtl = "";
getPortalCookie();

if("%STANDARD.01.025.119.182.0.1" == "1" &&
   sjogprtl != "1") {  // ptcnepis
  var src="../js/eAdmissionReg.js"
  var script = document.createElement("script");
               script.setAttribute("src", src);
               script.setAttribute("type", "text/javascript");
  document.getElementsByTagName("head")[0].appendChild(script);
}
  function CheckBooking() {
     displayRegime();
    if (AddForm.bkrec008.value.substr(14,3)=="THE") {
     DOCTCODE=AddForm.bkrec002.value;
     LinkUrl="oprweb01.pbl?reportno=2&template=3&doctcode="+DOCTCODE+
             "&admisnid="+AddForm.admisnid.value.replace(/ /g,"+");
     DFrameLink(LinkUrl,0,0,740,390);
    }
  }

function valClaimCode() {
  if (AddForm.bkrec023.value=="") {
  validateCode(41,LinkForm.urnumber,AddForm.claimc);
  for (var i =0 ; i < document.AddForm.bkrec023.length; i++) {
    if (document.AddForm.claimc.value==
        trim(document.AddForm.bkrec023.options[i].value.substr(0,3))){
          document.AddForm.bkrec023.selectedIndex=i;
    }
  } }
}
function submitForm(){
    if (!validateMandatory(document.AddForm)) {
      return;
    }
    p=document.AddForm
    validateSuspension(p.urnumber,p.bkrec004,p.datefrom,p.dateto);
    if(p.datefrom.value!='0'){
         ans=confirm("Warning : Patient has a Suspension record for period \n" +
               "\t" + p.datefrom.value  + " - " + p.dateto.value);
         if (ans!=true) {
            return;
            }
         } 

    if(document.getElementById("ptcnepis").value=="1" &&
       sjogprtl != "1") {
      if (document.AddForm.admisnid != undefined ) {
         if (!isWhitespace(AddForm.admisnid.value)) {
            eAdmCookie=GetContentCookie("eAdmission");
            if (eAdmCookie!="unknown") {
               ExpireCookiePath("eAdmission");
               document.AddForm.nextpage.value="6";
               document.AddForm.redirect.value=eAdmCookie;
            }
         }
      }
    }

    document.AddForm.submit();
}
function displayRegime() {
    x=document.AddForm.bkrec008.value.substring(3,4);
    if(x=="O") {
      RegimeHead1.innerHTML=regimehd1.innerHTML;
      RegimeCode1.innerHTML=regimecod1.innerHTML;
      RegimeHead2.innerHTML=regimehd2.innerHTML;
      RegimeCode2.innerHTML=regimecod2.innerHTML;
      RegimeHead3.innerHTML=regimehd3.innerHTML;
      RegimeCode3.innerHTML=regimecod3.innerHTML;
    if (isWhitespace(AddForm.ptrgm001.value)) AddForm.ptrgm001.value="";
    if (isWhitespace(AddForm.ptrgm002.value)) AddForm.ptrgm002.value="";
    if (isWhitespace(AddForm.ptrgm003.value)) AddForm.ptrgm003.value="";
    } else {
      RegimeHead1.innerHTML="";
      RegimeCode1.innerHTML=regimeblank1.innerHTML;
      RegimeHead2.innerHTML="";
      RegimeCode2.innerHTML=regimeblank2.innerHTML;
      RegimeHead3.innerHTML="";
      RegimeCode3.innerHTML=regimeblank3.innerHTML;
    }
}
</script>
</head>
<body onload="PageLoad(event);valClaimCode();displayRegime();
              OnlinePreadmission();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Booking Details
</span>

<div id=PageBodySection style="overflow: auto;">
<form name=LinkForm action=oprweb01.pbl method=get target=content>
<input type=hidden name=reportno value=9>
<input type=hidden name=template value=2>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=sesskeys value="">
<input type=hidden name=wattrkey value="%WATWEB01.02.101">
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="%WATWEB01.02.001.patweb98.01.001">
</form>

<form name=AddForm action=oprweb01.pbl method=post
 onsubmit="return validateMandatory(this);">
<input type=hidden name=reportno value=7>
<input type=hidden name=template value=4>
<input type=hidden name=setbookf value=1>
<input type=hidden name=updttype value=A>
<input type=hidden name=datefrom>
<input type=hidden name=dateto>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=claimc>
<input type=hidden name=ibcnmhos value="%STANDARD.01.025.000.043.1.1">
<input type=hidden name=nextpage value="0">
<input type=hidden name=redirect value="%WATWEB01.02.001.watweb01.02.007">
<input type=hidden name="admisnid" id=admisnid value="%WATWEB01.02.360" />
<input type="hidden" name="eautoadd" value="eAutoAdd" />
<input type="hidden" name="ptcnepis" id="ptcnepis"
 value="%STANDARD.01.025.119.182.0.1" />
<input type=hidden name=firstbok value="1">

<table border=0 width="95%" cellspacing="0" cellpadding="1" align=center>
<tr><td class=DataLabel>Booking Type</td>
   <td class=DataField >
   <select name=bkrec008 id=bkrec008 onchange="CheckBooking();"
    class=Mandatory title="Booking Type">
   <option></option>
    %WATWEB01.02.301.BK
   </select></td>
   <td><div id=RegimeHead1></div></td>
   <td><div id=RegimeCode1></div></td>
</tr>

<tr><td class=DataLabel>Diagnosis</td>
   <td class=DataField colspan=7>
   <input type=text size=12 name=bkrec035 id=bkrec035 value="%WATWEB01.02.103">
   <input type=text name=bkrec036 id=bkrec036 
             size=70 maxlength=50 value="%WATWEB01.02.106">
   <a href="javascript:Icd10DisSearchFrame(AddForm.bkrec035,AddForm.bkrec036);">
   <img src=../images/SearchIcon.gif class=Icon>
   </a></td></tr>

<tr><td class=DataLabel>Pre-Assessment</td>
    <td class=DataLabel>
    <input type=text name=bkrec006 size=12 id=bkrec006
     title="Pre-Assessment Date">
    <img src=../images/DateLookup.gif class=Icon date=AddForm.bkrec006>
    Time
    <input type=text name=bkrec007 id=bkrec007 size=6 
     title="Pre-Assessment Time">
    <img src=../images/DateTimeStamp.gif class=Icon date=AddForm.bkrec006
     time=AddForm.bkrec007>  
    <img src=../images/TimeLookup.gif class=Icon time=AddForm.bkrec007>  
    </td>
    <td><div id=RegimeHead2></div></td>
    <td><div id=RegimeCode2></div></td>
</tr>

<tr><td class=DataLabel>Scheduled Admission</td>
    <td class=DataLabel>
    <input type=text name=bkrec004 id=bkrec004 
               size=12 value="%WATWEB01.02.111"  
     class=Mandatory title="Scheduled Admission Date">
    <img src=../images/DateLookup.gif class=Icon date=AddForm.bkrec004>
    Time
    <input type=text name=bkrec005 id=bkrec005 size=6  
    class=Mandatory title="Scheduled Admission Time">
    <img src=../images/DateTimeStamp.gif class=Icon date=AddForm.bkrec004
     time=AddForm.bkrec005>  
    <img src=../images/TimeLookup.gif class=Icon time=AddForm.bkrec005>  
    </td>
    <td><div id=RegimeHead3></div></td>
    <td><div id=RegimeCode3></div></td>
    </tr>

<tr><td class=DataLabel>Expected Ward/Bed</td>
    <td class=DataField><input type=hidden name=bedstat1 id=bedstat1>
                        <input type=hidden name=warddesc id=warddesc>
    <select name=bkrec015 id=bkrec015 class=Mandatory
    onchange="document.AddForm.bkrec018.value='';">
    <option></option>
     %WATWEB01.02.302
    </select>
    <input type=text name=bkrec018 id=bkrec018 
               readonly maxlength=3 size=3 title="Bed">
    <img notab src=../images/SearchIcon.gif border=0 class=Icon
     onclick="WardBedSearchFrame(bkrec015,warddesc,bkrec018,bedstat1,bkrec004,bkrec005);">
    </td>
    <td class=DataLabel>Intended Length of Stay </td>
    <td class=DataLabel>
    <input type=text name=bkrec033 id=bkrec033 size=4 maxlength=5
     value="%WATWEB01.02.116">(days)</td></tr>

<tr><td class=DataLabel>Consultant</td>
    <td class=DataField colspan=3>
    <input type=text name=bkrec002 id=bkrec002 size=8 maxlength=8 
     value="%WATWEB01.02.115.003"
     onblur="UpCase(this);validateCode(3,AddForm.bkrec002,AddForm.n_bkrec002);">
    <input type=text name=n_bkrec002 id=n_bkrec002 size=40 readonly notab
     value="%WATWEB01.02.115.002">
    <a href="javascript:DoctorSearchFrame(AddForm.bkrec002,AddForm.n_bkrec002)">
    <img src=../images/SearchIcon.gif class=Icon></a></td>
    <td><div id=UserNameHead></div></td>
    <td><div id=UserNameCode></div></td>
</tr>

<tr><td class=DataLabel>Referring GP</td>
    <td class=DataField colspan=3>
    <input type=text name=bkrec024 id=bkrec024 size=10 maxlength=10
     onblur="ValidateHCP(18,0,bkrec024,n_bkrec024);">
    <input type=text name=n_bkrec024 id=n_bkrec024 size=40 readonly notab>
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="HCPSearchFrame(AddForm.bkrec024,AddForm.n_bkrec024,0);">
    </a></td>
    <td><div id=PasswordHead></div></td>
    <td><div id=PasswordCode></div></td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.P </td>
    <td class=DataField>
    <select name=bkrec019>
    <option></option>
     %WATWEB01.02.301.P 
    </select></td>
<td class=DataLabel>Unit</td>
    <td class=DataField>
    <select name=bkrec021>
    <option></option>
     %WATWEB01.02.114.2
    </select></td>
    </tr>
<tr><td class=DataLabel>%STANDARD.01.017.CL</td>
    <td class=DataField colspan=3>
    <select name=bkrec023 id=bkrec023>
    <option></option>
    %WATWEB01.02.133.9.1.10.2.X
    </select></td></tr>

<tr><td class=DataLabel>Admitting Point</td>
    <td class=DataField>
    <select name=bokrx003 id=bokrx003>
    <option></option>
    %WATWEB01.02.403.2
    </select></td></tr>

<tr valign=top><td class=DataLabel>Comments</td>
    <td class=DataField colspan=3>
    <input type=text name=bkrec038 id=bkrec038  size=50 maxlength=40 >
    </td></tr>
<tr><td>

<tr><td>&nbsp;</td></tr>

<tr><td colspan=4 align=center> 
    <input type=button value=Ok class="button" onclick='submitForm();'>
    <input type=button value=Cancel class="button" onclick='DFrameExit();'>
    </td></tr>
</table>
</form>
</div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=admissno value="%WATWEB01.02.081">
<input type=hidden name=MenuType value="%WATWEB01.02.088">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
</form>


<script type="text/javascript" >
  ExpireCookiePath("CasePath");
if(document.AddForm.ibcnmhos.value=="1"){
   AddForm.bkrec015.className="Mandatory"}
</script>

<span id=regimehd1 style="display:none">
<td class=DataLabel>Regime Code 1</td>
</span>
<span id=regimecod1 style="display:none">
<td><input type="text" size=5 maxlength=10 title="Regime Code 1"
     name=ptrgm001 id=ptrgm001 tabindex=30 class=Mandatory
     onblur=validateCode(75,AddForm.ptrgm001,AddForm.t_ptrgm001);>
     <input type=text name=t_ptrgm001 id=t_ptrgm001 size=15 readonly
      class=Readonly title="Regime Description">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="RegimeSearchFrame(ptrgm001,t_ptrgm001);">
    <img src="../images/erase.gif" onclick="clrFields(ptrgm001,t_ptrgm001);"
         class=Icon >
</td>
</span>

<span id=regimehd2 style="display:none">
<td class=DataLabel>Regime Code 2</td>
</span>
<span id=regimecod2 style="display:none">
<td><input type="text" size=5 maxlength=10
     name=ptrgm002 id=ptrgm002 tabindex=30
     onblur=validateCode(75,AddForm.ptrgm002,AddForm.t_ptrgm002);>
     <input type=text name=t_ptrgm002 id=t_ptrgm002 size=15 readonly
      class=Readonly title="Regime Description">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="RegimeSearchFrame(ptrgm002,t_ptrgm002);">
    <img src="../images/erase.gif" onclick="clrFields(ptrgm002,t_ptrgm002);"
      class=Icon>
</td>
</span>

<span id=regimehd3 style="display:none">
<td class=DataLabel>Regime Code 3</td>
</span>
<span id=regimecod3 style="display:none">
<td><input type="text" size=5 maxlength=10
     name=ptrgm003 id=ptrgm003 tabindex=30
     onblur=validateCode(75,AddForm.ptrgm003,AddForm.t_ptrgm003);>
     <input type=text name=t_ptrgm003 id=t_ptrgm003 size=15 readonly
      class=Readonly title="Regime Description">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="RegimeSearchFrame(ptrgm003,t_ptrgm003);">
    <img src="../images/erase.gif" onclick="clrFields(ptrgm003,t_ptrgm003);"
       class=Icon>
</td>
</span>

<span id=regimeblank1 style="display:none">
<td><input type=hidden name=ptrgm001 id=ptrgm001 value=""></td>
</span>

<span id=regimeblank2 style="display:none">
<td><input type=hidden name=ptrgm002 id=ptrgm002 value=""></td>
</span>

<span id=regimeblank3 style="display:none">
<td><input type=hidden name=ptrgm003 id=ptrgm003 value=""></td>
</span>


<span id=usernamehd style="display:none">
<td class=DataLabel>User Name</td>
</span>

<span id=usernamcd style="display:none">
<td><input size=12 type=text name=username id=username 
               class=Mandatory title="UserName">
</td>
</span>

<span id=passwordhd style="display:none">
<td class=DataLabel>Password</td>
</span>

<span id=passwordcd style="display:none">
<td><input size=12 type=password name=password id=password onblur=checkPass(); 
     class=Mandatory  title="Password"></td>
</span>
