<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome"    content="hea">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/IBA_Category_C_.js"></script>
<script type="text/javascript" src="../js/IBA_Category_LA.js"></script>
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/EmrRegistration.js"></script>
<script type="text/javascript" src="../js/emrweb0201102.js"></script>
<script type="text/javascript" src="../js/patweb69.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<script type="text/javascript">
function ReadDocOnly(OptionNumber,OptionType,ReturnCode,ReturnName) {
  ReturnName.value="";
  if (isWhitespace(ReturnCode.value)) return;;
  var serverURL  = "../cgi-bin/patweb80.pbl?reportno=" + OptionNumber +
               "&returnfm=2" + "&valdtype=" + OptionType +
               "&valdcode=" + ReturnCode.value.replace(/ /g,"+")

  var returnValue = RSExecute(serverURL);

  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");
    ReturnName.value=trim(ReturnValue[0]); }
 else {
    ReturnCode.value="";
    ReturnCode.select();
    return false; }
}
// Copy of HCPSearchFrame without all clears that effect GPHCGSearchFrame //
function HCPSearchFrame(ReturnCode,ReturnName,ReturnProv,ReturnPrac,ReturnDesc,ReturnCntr) {
  DFrameStart()
  SearchType="" ;
  window.ReturnFunction="" ;
  for (var i=6; i < HCPSearchFrame.arguments.length; i++) {
    if (typeof(HCPSearchFrame.arguments[i]) == 'function') {
      window.ReturnFunction=HCPSearchFrame.arguments[i] }
    else {
      SearchType=HCPSearchFrame.arguments[i]
    } }

  window.ReturnCode=ReturnCode ;
  window.ReturnName=ReturnName ;
  window.ReturnProv=ReturnProv ;
  window.ReturnPrac=ReturnPrac ;
  window.ReturnDesc=ReturnDesc ;
  window.ReturnCntr=ReturnCntr ;
  document.getElementById('PopUpFrame').src="../lookups/HCPSearchFrame"+SearchType+".html"
  SearchFrameShow()
}
function MediMandfield() {
  if(document.UpdateForm.medicard.value=="1") {
    document.UpdateForm.ptmas022.className="Mandatory";
    document.UpdateForm.ptmsx048.className="Mandatory";
    document.UpdateForm.pmpxi016.className="Mandatory";
  } else {
    document.UpdateForm.ptmas022.value="";
    document.UpdateForm.ptmsx048.value="";
    document.UpdateForm.pmpxi016.value="";
    document.UpdateForm.ptmas022.className="";
    document.UpdateForm.ptmsx048.className="";
    document.UpdateForm.pmpxi016.className="";
  }
}
function init() {
  SetFields();
  InitPostCodes();
  SetCategoryC_(document.UpdateForm.ptmas018,HiddenFields.cob.value);
  SetCategoryLA(document.UpdateForm.pmpxi002,HiddenFields.pl1.value);
  if (isWhitespace(top.menu.location.search)) { }
  else {
  PageLocation="?reportno=1&template=4" +
               "&urnumber=" + PatientURN.replace(/ /g,"+") +
               "&admissno=" + PatientVIS.replace(/ /g,"+") 
  if (top.content.location.search!=PageLocation) {
    if(!top.content.location.search.match(/regiflag/)) {
      top.content.location.href="emrweb02.pbl" + PageLocation }
    } 
  }
  checkReferred();
  CheckAmbTypeOnload();

  if (document.UpdateForm.ptcnhdps.value=="3") {
    CheckAmbTypeArrival();
  }

  CheckAccom();
  MandatoryGP();

//T0879283-start
  valClaimCode();
  DisplayFieldsHEA();
  turnOnSecondGivenName(document.UpdateForm.ptcnusgn.value,
                        document.UpdateForm.ptmas006,
                        document.UpdateForm.pmpxi084,
                        document.UpdateForm.pmpxi085);
  checkContactCorrespondenceHEA(UpdateForm);
  displayAmbulanceFields();
  displayReferralFields();
  defaultDisasterCode();
  enableOEC();
  valPatTypeHEA(document.getElementById('pdecease').value);
  NoEmailOptOutHEA();
//T0879283-end

  DefpmiHFHEA(); // Default PMI HF if first time
  ShowOptOutSMS();
}
function CheckAmbTypeOnload() {
  if(document.UpdateForm.emvis013.value.substr(3,1)=="A") {
    document.UpdateForm.emvis034.readOnly=false;
    if(document.UpdateForm.emvis013.value.substr(4,1)=="N") {
      document.UpdateForm.emvis034.className="";
    } else {
      document.UpdateForm.emvis034.className="Mandatory";
    }
  } else {
//    document.UpdateForm.emvis034.value="";
    document.UpdateForm.emvis034.className="ReadOnly";
    document.UpdateForm.emvis034.readOnly=true;
  }
}
function CheckAmbType() {
  if(document.UpdateForm.emvis013.value.substr(3,1)=="A") {
    document.UpdateForm.emvis034.readOnly=false;
    if(document.UpdateForm.emvis013.value.substr(4,1)=="N") {
      document.UpdateForm.emvis034.className="";
    } else {
      document.UpdateForm.emvis034.className="Mandatory";
    }
  } else {
//  document.UpdateForm.emvis034.value="";
    document.UpdateForm.emvis034.className="ReadOnly";
    document.UpdateForm.emvis034.readOnly=true;
  }
}
function checkLang01() {
  if(document.UpdateForm.pmpxi001.checked == true) {
    document.UpdateForm.pmpxi002.className="Mandatory";
    document.UpdateForm.pmpxi002.focus();
  } else {
    document.UpdateForm.pmpxi002.className="";
  }
}
function valClaimCode() {
// Do not default the claim code if one has already been entered
  if(!isWhitespace(document.UpdateForm.deftclam.value)) {
    return;                      
  }
  validateCode(41,UpdateForm.urnumber,UpdateForm.claimc);
  for (var i =0 ; i < document.UpdateForm.emvis008.length; i++) {
    if (document.UpdateForm.claimc.value==
        trim(document.UpdateForm.emvis008.options[i].value.substr(0,3))){
          document.UpdateForm.emvis008.selectedIndex=i;
    }
  }
}
// Do VEMD Error 132 check
//   If Referred by is a 5 - Emergency department review from this hospital
//   then Type of visit must be either 2 - return visit-planned
//                                  or 4 - outpatient/outpatient clinic
//   AND vis versa
//   Do VEMD E142
//   Display warning if Type of visit is 10 - Dead on Arrival
//
function valEmrVisit() {
  p=document.UpdateForm;
  var x=true;
  x=ValidateHCP(18,0,p.pmpxi059,p.genpname);
  if(x==false)
  {
    p.pmpxi059.value="";
    p.genpname.value="";
    p.pmpxi060.value="";
    p.genpprac.value="";
    p.pmpxi061.value="";
    p.genpprov.value="";

    return;
  }
  var y=true;
  y=ValidateHCG(70,0,p.pmpxi060,p.pmpxi059,p.genpprac,p.pmpxi061);
  if(y==false)
  {

    p.pmpxi059.value="";
    p.genpname.value="";
    p.pmpxi060.value="";
    p.genpprac.value="";
    p.pmpxi061.value="";
    p.genpprov.value="";

    return;
  }
   checkSecondName(document.UpdateForm.ptcnusgn,document.UpdateForm.ptmas006,
                  document.UpdateForm.pmpxi084,document.UpdateForm.pmpxi085);

  i=document.UpdateForm.emvis061.selectedIndex;
  SrcInd=trim(document.UpdateForm.emvis061.options[i].value.substr(14,4));
  j=document.UpdateForm.emvis053.selectedIndex;
  TypInd=trim(document.UpdateForm.emvis053.options[j].value.substr(14,4));
  if (TypInd=="10") {
    if (!confirm("Warning: Patient is Dead on Arrival.")) {
      return;
    }
  }
  if (!ValMedicare01()) {
    return;
  }
  if (document.getElementById('ptcnuadv').value != "1" &&
      !CheckValPostCode()) {
    return;
  }
  if (document.UpdateForm.ptcnhdps.value=="3") {
    if(!isWhitespace(document.UpdateForm.emvis154.value) &&
        isWhitespace(document.UpdateForm.emvis155.value)){
      alert("Amb Arrival Date/Time must both be completed");
      return;
    }
    if(!isWhitespace(document.UpdateForm.emvis155.value) &&
        isWhitespace(document.UpdateForm.emvis154.value)){
      alert("Amb Arrival Date/Time must both be completed");
      return;
    }
  }

  if (document.UpdateForm.oecchbox != undefined) {
    if (document.UpdateForm.oecchbox.checked==true) {
      if (!validateOECRequired(document.UpdateForm)) {
         return;
      }
    }
  }

  //T0879283 - Set No Email/Opt-out value
  SetNoEmailOptoutValHEA();
  CheckVerifiedAddr();
 
  SetOptOutSMS();
  UpdatePage();
}
function MandatoryGP() {
  if(isWhitespace(document.UpdateForm.pmpxi059.value) &&
     isWhitespace(document.UpdateForm.pmpxi060.value)) {
     document.UpdateForm.genpname.className="Mandatory";
     document.UpdateForm.genpprac.className="Mandatory";
     return;
  }
  if(!isWhitespace(document.UpdateForm.pmpxi059.value)) {
    document.UpdateForm.genpname.className="Mandatory";
    document.UpdateForm.genpprac.className="";
    return;
  }
  if(!isWhitespace(document.UpdateForm.pmpxi060.value)) {
    document.UpdateForm.genpname.className="";
    document.UpdateForm.genpprac.className="Mandatory";
    return;
  }
}
function PageLoadExtended()
{
  PageLoad();
  checkAdmittingDrCheckBox();

}
function checkAdmittingDrCheckBox()
{
  var emvis091  = document.getElementById("emvis091");
  if(AdmittingDrCheckBox.replace(/ /g,"") == "No")
    emvis091.value = 0;
  else 
    emvis091.value = 1;
}
function UsingNewContRedirect() {

  if (document.UpdateForm.emvis008.value.substr(3,1) == "M" ||
      document.UpdateForm.emvis008.value.substr(3,1) == "V" ||
      document.UpdateForm.emvis008.value.substr(3,1) == "W") {
    return;
  }
}
function DisplayFieldsHEA() {
  if(document.getElementById("PMIDef1L")) {
    if(isWhitespace(document.getElementById("PMIDef1L").innerHTML)) {
      document.getElementById("PMIDef1L").innerHTML="";
      document.getElementById("PMIDef1F").innerHTML="";
    }
  }
  if(document.getElementById("PMIDef2L")) {
    if(isWhitespace(document.getElementById("PMIDef2L").innerHTML)) {
      document.getElementById("PMIDef2L").innerHTML="";
      document.getElementById("PMIDef2F").innerHTML="";
    }
  }
  if(document.getElementById("PMIDef3L")) {
    if(isWhitespace(document.getElementById("PMIDef3L").innerHTML)) {
      document.getElementById("PMIDef3L").innerHTML="";
      document.getElementById("PMIDef3F").innerHTML="";
    }
  }
  if(document.getElementById("PMIDef4L")) {
    if(isWhitespace(document.getElementById("PMIDef4L").innerHTML)) {
      document.getElementById("PMIDef4L").innerHTML="";
      document.getElementById("PMIDef4F").innerHTML="";
    }
  }
  if(document.getElementById("PMIDef5L")) {
    if(isWhitespace(document.getElementById("PMIDef5L").innerHTML)) {
      document.getElementById("PMIDef5L").innerHTML="";
      document.getElementById("PMIDef5F").innerHTML="";
    }
  }

  if((document.getElementById("PMIDef1L").innerHTML=="") &&
     (document.getElementById("PMIDef2L").innerHTML=="") &&
     (document.getElementById("PMIDef3L").innerHTML=="") &&
     (document.getElementById("PMIDef4L").innerHTML=="") &&
     (document.getElementById("PMIDef5L").innerHTML==""))
    {
     document.getElementById("headerline").style.display="none";
    }
}
function genderName(){
  if (document.UpdateForm.ptcnhdps.value=="3") {
    intersexoption = document.createElement("option");
    intersexoption.text = "Other";
    intersexoption.value = "R";
    document.UpdateForm.ptmas014.add(intersexoption);
  } else {
    intersexoption = document.createElement("option");
    intersexoption.text = "Intersex";
    intersexoption.value = "R";
    document.UpdateForm.ptmas014.add(intersexoption);
  }
}
function clrMandatory(Sname,Gname,Sex,Dob) {
  p=document.UpdateForm;
  if (p.quickreg.checked) {
    if (document.getElementById('ptcnuadv').value == "1") {
      ToggleSearchAddressFields(false);  // not readonly
    }
    for (i=0; i<p.elements.length; i++) {
      el=p.elements[i];

      if (el.className.match(/Mandatory/)) {
        if (el.className.match(/MobilePhnospaces/)) {
          el.className="MobilePhnospaces";
        }
        else {
          if (el.className.match(/Phonenumnospaces/)) {
            el.className="Phonenumnospaces";
          }
          else if (el.name != "ptmas014") {
            el.className="";
          }
        }
      }
    }
    if (isWhitespace(p.ptmas016.value)){
      checkDefDOB(p.ptmas016,p.d_cwebDDOB);
//  p.ptmas016.focus(); T0879283
//  p.ptmas016.blur();  T0879283
//  p.ptmas016.className="Mandatory PastDate"; T0879283
    }

    if (!isWhitespace(Sex)) {
      //p.ptmas014.value=Sex.substr(0,1);
    }

    if (isWhitespace(Sname)) {
      if (isWhitespace(p.ptmas005.value)) {
      p.ptmas005.value="Unknown";
      }
    }
    if (isWhitespace(Gname)) {
      if (isWhitespace(p.pmpxi084.value)) {
        p.pmpxi084.value="Unknown";
      }
    }

    if (isWhitespace(Dob)) {
      if (isWhitespace(p.ptmas016.value)) {
      p.ptmas016.value="";
      }
    }
    else {
      p.ptmas016.value=Dob;
    }
  } else {
    location.reload();
  }
}
function SearchRedirect() {
  var p = document.UpdateForm;

  var sURL = "patweb69.pbl?reportno=01&template=001" +
             "&srchsnam=" + p.ptmas005.value +
             "&srchgnam=" + p.pmpxi084.value +
             "&srchmnam=" + p.pmpxi085.value +
             "&srchpsex=" + p.ptmas014.value +
             "&srchpdob=" + p.ptmas016.value +
             "&srchmedi=" + p.ptmas022.value + "&srchtype=1";

  var sRedirectURL = "emrweb02.pbl?reportno=01&template=001" +
                     "&urnumber=" + p.urnumber.value.replace(/ /g,"+") +
                     "&admissno=" + p.admissno.value.replace(/ /g,"+");

  sURL += "&redirect=" + encodeURIComponent(sRedirectURL);

  document.location.href = sURL; 
}
function displayAmbulanceFields() {
 if (document.UpdateForm.emvis013.value.substr(3,1) != "A" ||
     document.UpdateForm.emvis013.value.substr(5,1) != "C") {

  AmbCaseNoTimeDateTitleDIV.innerHTML = "";
  AmbCaseNoTimeDateFieldDIV.innerHTML = AmbCaseNoTimeDateHiddenSPAN.innerHTML;

 } else {
  AmbCaseNoTimeDateTitleDIV.innerHTML = AmbCaseNoTimeDateTitleSPAN.innerHTML;
  AmbCaseNoTimeDateFieldDIV.innerHTML = AmbCaseNoTimeDateFieldSPAN.innerHTML;
 }
}
function displayReferralFields() {
//Display referral fields only if Eclipse Store and Forward parameter is
//turned on and the Source of Referral (cat em) has indicator4 = R
  if (document.getElementById('ptcnuesf') != null &&
      document.getElementById('ptcnuesf').value == "1" &&
      document.UpdateForm.emvis061.value.substr(6,1) == "R") {
      emvis174TitleDIV.innerHTML = emvis174TitleSPAN.innerHTML;
//    emvis175TitleDIV.innerHTML = emvis175TitleSPAN.innerHTML;
      emvis176TitleDIV.innerHTML = emvis176TitleSPAN.innerHTML;
      emvis174FieldDIV.innerHTML = emvis174FieldSPAN.innerHTML;
//    emvis175FieldDIV.innerHTML = emvis175FieldSPAN.innerHTML;
      emvis176FieldDIV.innerHTML = emvis176FieldSPAN.innerHTML;
      emvis020TitleDIV.innerHTML = emvis020TitleSPAN.innerHTML;
      emvis020FieldDIV.innerHTML = emvis020FieldSPAN.innerHTML;

      displaycatRF();
  }
  else {
       emvis174TitleDIV.innerHTML = "";
       emvis175TitleDIV.innerHTML = "";
       emvis176TitleDIV.innerHTML = "";
       emvis174FieldDIV.innerHTML = "";
       emvis175FieldDIV.innerHTML = "";
       emvis176FieldDIV.innerHTML = "";
       emvis020TitleDIV.innerHTML = "";
       emvis020FieldDIV.innerHTML = "";
  }
}
function displaycatRF() {
    if (document.UpdateForm.emvis174.value.substr(3,1) == "N") {
      emvis175TitleDIV.innerHTML = emvis175TitleSPAN.innerHTML;
      emvis175FieldDIV.innerHTML = emvis175FieldSPAN.innerHTML;
    } else {
      emvis175TitleDIV.innerHTML = "";
      emvis175FieldDIV.innerHTML = "";
    }
}
function displayDisasterID() {
  p=document.UpdateForm
  if (!isWhitespace(document.UpdateForm.dispt001.value)) {
    disasteridnumbertitleDIV.innerHTML=disasteridnumbertitleSPAN.innerHTML;
    disasteridnumberDIV.innerHTML=disasteridnumberSPAN.innerHTML;
  } else {
    disasteridnumbertitleDIV.innerHTML="";
    disasteridnumberDIV.innerHTML="";
  }

  if (!isWhitespace(disasteridnumberDIV.innerHTML)) {
    var serverURL   = "../cgi-bin/patweb80.pbl?reportno=98" +
                    "&valdcode=" + UpdateForm.urnumber.value.replace(/ /g,"+") +
                    UpdateForm.dispt001.value.replace(/ /g,"+");
    var returnValue = RSExecute(serverURL);
    if (returnValue.status==0) {
      ReturnValue=returnValue.return_value.split("|");
      if (!isWhitespace(ReturnValue[0])) {
        p.dispt002.value=ReturnValue;
        p.dispt002.className="Readonly";
        p.dispt002.readOnly=true;
      }
    }
  }
}
function defaultDisasterCode() {
  if (document.UpdateForm.urnumber.value=="       0") {
     document.UpdateForm.dispt001.disabled=true;
     return;
  }

  if (!isWhitespace(document.UpdateForm.disacode.value)) {
  for (var i =0 ; i < document.UpdateForm.dispt001.length; i++) {
     if (document.UpdateForm.dispt001.options[i].value==
         document.UpdateForm.disacode.value) {
         document.UpdateForm.dispt001.selectedIndex=i
     }
    }
  }

  displayDisasterID();

  if (!isWhitespace(document.UpdateForm.dispt001.value)) {
    document.UpdateForm.dispt001.className = "Readonly";
    document.UpdateForm.dispt001.onfocus =
    function () {this.defaultIndex=this.selectedIndex};
    document.UpdateForm.dispt001.onchange =
    function () {this.selectedIndex=this.defaultIndex};
  }

}
function enableOEConblur() {

  if (document.UpdateForm.oecchbox == undefined) {return;}

  if (isWhitespace(document.UpdateForm.emvis017.value)) {
    document.getElementById('oecchbox').checked=false;
    document.getElementById('oecchbox').disabled=true;
    displayOECfields();
    OECRequired();
    return;
  }

  var serverURL   = "../cgi-bin/emrweb08.pbl?reportno=61" +
                    "&valdcode=" + UpdateForm.emvis017.value.replace(/ /g,"+");
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    if (returnValue.return_value == "1") {
      document.getElementById('oecchbox').disabled=false;
      document.getElementById('oecchbox').checked=true;
    } else {
      document.getElementById('oecchbox').checked=false;
      document.getElementById('oecchbox').disabled=true;
    }
    if (document.getElementById('existoec').value=="1") {
      document.getElementById('oecchbox').checked=false;
      document.getElementById('oecchbox').disabled=true;
      OEC_oecchbox_DIV.innerHTML="Yes"
    }
    displayOECfields();
    OECRequired();
  }
}
function enableOEC() {

  if (document.UpdateForm.oecchbox == undefined) {return;}

  if (document.getElementById('emoecind').value=="1") {
    document.getElementById('oecchbox').disabled=false;
    document.getElementById('oecchbox').checked=true;
  } else {
    document.getElementById('oecchbox').checked=false;
    document.getElementById('oecchbox').disabled=true;
    enableOEConblur();
    return;
  }
  if (document.getElementById('existoec').value=="1") {
    document.getElementById('oecchbox').checked=false;
    document.getElementById('oecchbox').disabled=true;
    OEC_oecchbox_DIV.innerHTML="Yes"
  }
  displayOECfields();
  OECRequired();
}
function displayOECfields() {

  if (document.UpdateForm.oecchbox == undefined) {return;}

  if (document.getElementById('oecchbox').disabled==true || 
      document.getElementById('oecchbox').checked==false) {

    OEC_peaind_title_DIV.innerHTML="";
    OEC_peaind_field_DIV.innerHTML="";
    OEC_emradm_title_DIV.innerHTML="";
    OEC_emradm_field_DIV.innerHTML="";
    OEC_swimbs_title_DIV.innerHTML="";
    OEC_swimbs_field_DIV.innerHTML="";
    OEC_preill_title_DIV.innerHTML="";
    OEC_preill_field_DIV.innerHTML="";
    OEC_presco_title_DIV.innerHTML="";
    OEC_presco_field_DIV.innerHTML="";
    OEC_intsty_title_DIV.innerHTML="";
    OEC_intsty_field_DIV.innerHTML="";
    OEC_plnsty_title_DIV.innerHTML="";
    OEC_plnsty_field_DIV.innerHTML="";

    return;
  }

  OEC_peaind_title_DIV.innerHTML=OEC_peaind_title_SPAN.innerHTML;
  OEC_peaind_field_DIV.innerHTML=OEC_peaind_field_SPAN.innerHTML;
  OEC_emradm_title_DIV.innerHTML=OEC_emradm_title_SPAN.innerHTML;
  OEC_emradm_field_DIV.innerHTML=OEC_emradm_field_SPAN.innerHTML;
  OEC_swimbs_title_DIV.innerHTML=OEC_swimbs_title_SPAN.innerHTML;
  OEC_swimbs_field_DIV.innerHTML=OEC_swimbs_field_SPAN.innerHTML;
  OEC_preill_title_DIV.innerHTML=OEC_preill_title_SPAN.innerHTML;
  OEC_preill_field_DIV.innerHTML=OEC_preill_field_SPAN.innerHTML;
  OEC_presco_title_DIV.innerHTML=OEC_presco_title_SPAN.innerHTML;
  OEC_presco_field_DIV.innerHTML=OEC_presco_field_SPAN.innerHTML;
  OEC_intsty_title_DIV.innerHTML=OEC_intsty_title_SPAN.innerHTML;
  OEC_intsty_field_DIV.innerHTML=OEC_intsty_field_SPAN.innerHTML;
  OEC_plnsty_title_DIV.innerHTML=OEC_plnsty_title_SPAN.innerHTML;
  OEC_plnsty_field_DIV.innerHTML=OEC_plnsty_field_SPAN.innerHTML;

  for (var i =0 ; i < document.UpdateForm.ptelf016.length; i++) {
    if (document.UpdateForm.ptelf016.options[i].value.substr(0,3)==
        document.UpdateForm.emviuc20.value.substr(0,3)) {
        document.UpdateForm.ptelf016.selectedIndex=i 
    } 
  } 

  if (!isWhitespace(PatientTRI)) {
    document.UpdateForm.ptelf022.value=trim(document.UpdateForm.descuc20.value);
  }

}
function switchPresIll() {
  if (document.UpdateForm.presilsw.checked==true) {
    OEC_preill_title_DIV.innerHTML=OEC_preillnum_title_SPAN.innerHTML;
    OEC_preill_field_DIV.innerHTML=OEC_preillnum_field_SPAN.innerHTML;
    validateCode(4,document.UpdateForm.ptelf017,document.UpdateForm.mbsdesc1);
  } else {
    OEC_preill_title_DIV.innerHTML=OEC_preill_title_SPAN.innerHTML;
    OEC_preill_field_DIV.innerHTML=OEC_preill_field_SPAN.innerHTML;

    for (var i =0 ; i < document.UpdateForm.ptelf016.length; i++) {
      if (document.UpdateForm.ptelf016.options[i].value.substr(0,3)==
          document.UpdateForm.emviuc20.value.substr(0,3)) {
          document.UpdateForm.ptelf016.selectedIndex=i 
      } 
    }

    if (!isWhitespace(PatientTRI)) {
      document.UpdateForm.ptelf022.value=trim(document.UpdateForm.descuc20.value);
    }
        
  }

}
function OECRequired() {

 if (document.UpdateForm.oecchbox == undefined) {return;}

 if(document.UpdateForm.oecchbox.checked == true &&
    document.UpdateForm.oecchbox.disabled == false) {
//   document.UpdateForm.ptmas001.className="OECRequired";
// document.UpdateForm.ptmas005.className="OECRequired"; T0879283
// document.UpdateForm.pmpxi084.className="OECRequired"; T0879283
// document.UpdateForm.ptmas016.className="OECRequired"; T0879283
// document.UpdateForm.ptmas014.className="OECRequired"; T0879283

   if (document.UpdateForm.emvis008.disabled==false) {
     document.UpdateForm.emvis008.className="OECRequired";
   }

   document.UpdateForm.funddesc.className="OECRequired"; 
   document.UpdateForm.tabldesc.className="OECRequired";
   document.UpdateForm.emvis124.className="OECRequired";

 } else {

   if (document.UpdateForm.quickreg.checked==true) {
//     document.UpdateForm.ptmas001.className="";
//   document.UpdateForm.ptmas005.className=""; T0879283
//   document.UpdateForm.pmpxi084.className=""; T0879283
//   document.UpdateForm.ptmas016.className=""; T0879283
//   document.UpdateForm.ptmas014.className="Mandatory"; T0879283

     if (document.UpdateForm.emvis008.disabled==false) {
       document.UpdateForm.emvis008.className="";
     }

     document.UpdateForm.funddesc.className="";
     document.UpdateForm.tabldesc.className="";
     document.UpdateForm.emvis124.className="";
   } else {
//     document.UpdateForm.ptmas001.className="Mandatory";
//   document.UpdateForm.ptmas005.className="Mandatory"; T0879283
//   document.UpdateForm.pmpxi084.className="Mandatory"; T0879283
//   document.UpdateForm.ptmas016.className="Mandatory"; T0879283
//   document.UpdateForm.ptmas014.className="Mandatory"; T0879283

     if (document.UpdateForm.emvis008.disabled==false) {
       document.UpdateForm.emvis008.className="Mandatory SelectMed";
     }

     document.UpdateForm.funddesc.className="";
     document.UpdateForm.tabldesc.className="";
     document.UpdateForm.emvis124.className=""; 
   }

 }

}
function HealthFundSearchFrameNoFocusFunc(ReturnCode,ReturnName,
                                      ReturnTCode,ReturnTName,ReturnFunc){
  window.ReturnHFTNoFocus=""; // Var to set no focus on UpdateParent()
  HealthFundSearchFrame(ReturnCode,ReturnName,ReturnTCode,
                        ReturnTName,ReturnFunc);
}
function alertOEC(OECpmifield) {
  alert("Online Eligibility Details Incomplete. Request Not Processed.\n"+
        OECpmifield.title+" is a required OEC PMI field.\n"+
        "Please enter it now.");
}
function checkOECString (theField, s, emptyOK) {
if (checkOECString.arguments.length == 2) emptyOK = false;
 if ((emptyOK == true) && (isEmpty(theField.value))) return true;
 if (isWhitespace(theField.value))
   return warnOECEmpty (theField, s);
 else return true;
}
function warnOECEmpty (theField, s) {
 alert("Online Eligibility Details Incomplete. Request Not Processed.\n"
       + s + " is a required OEC field.\nPlease enter it now." )
 theField.focus()
 return false
}
function validateOECRequired(theForm) {
  for (i=0; i<theForm.elements.length; i++) {
    el=theForm.elements[i]
    if (el.className.match(/OECRequired/)) {
      if (!checkOECString(el,el.title)) {
         return false } }
    }

    if (isWhitespace(document.UpdateForm.ptmas005.value)) {
      alertOEC(document.UpdateForm.ptmas005);
      return false;
    }

    if (isWhitespace(document.UpdateForm.pmpxi084.value)) {
      alertOEC(document.UpdateForm.pmpxi084);
      return false;
    }

    if (isWhitespace(document.UpdateForm.ptmas016.value)) {
      alertOEC(document.UpdateForm.ptmas016);
      return false;
    }
  return true;
}
//---------------------------------------------------------------------------
//T0879283-start - HEA functions for PMI templates
function DefPatFolderHEA(){
  catT  = document.getElementById('ptmas020');
  catFS = document.getElementById('pmpxi077');

  if ((catT == undefined) || (catFS == undefined)){
      return;}

  if (catT.selectedIndex < 1){
      return;}

  i = catT.selectedIndex;

  // If Resident Status - Cat T ind1=2 then
  // default Patient Folder Colour - Cat FS to the first code where ind1=6
  if (catT.options[i].value.substr(3,1) == "2") {
      for (var j =0 ; j < catFS.length; j++) {
        if (catFS.options[j].value.substr(3,1) == "6") {
            catFS.selectedIndex = j;
            return;} }
  }

  // If Resident Status - Cat T ind4=R then
  // default Patient Folder Colour - Cat FS to the first code where ind1=8
  if (catT.options[i].value.substr(6,1) == "R") {
      for (var j =0 ; j < catFS.length; j++) {
        if (catFS.options[j].value.substr(3,1) == "8") {
            catFS.selectedIndex = j;
            return;} }
  }
}

function NoEmailOptOutHEA(){
  emailaddress = document.getElementById('pmpxi005');
  emailoptout = document.getElementById('d_ptmas044');

  if ((emailaddress == undefined) || (emailoptout == undefined )){
      return;}

  if (emailoptout.checked==true){
     emailaddress.className="";}
  else{
     emailaddress.className="Mandatory";}
}

function SetNoEmailOptoutValHEA(){
  emailoptout = document.getElementById('d_ptmas044');
  emailoptoutField = document.getElementById('ptmas044');

  if ((emailoptout == undefined) || (emailoptoutField == undefined)){
      return;}

 //Set the value for patma1af.PUYN1
  if(emailoptout.checked==true){
     emailoptoutField.value="1"}
  else {
     emailoptoutField.value="0"}

}

function SetMedicardQHEA(deceased){

  catT  = document.getElementById('ptmas020');
  medicardQ = document.getElementById('medicard');

  if ((catT == undefined) || (medicardQ == undefined)){
      return;}

  // If patient is deceased then regardless of resident status then
  // do not prompt 'Does this patient have a Medicare Card?' question
  if (deceased=="Yes" || deceased=="true"){
      medicardQ.className="";
      return;}

  if (catT.selectedIndex < 1){
      medicardQ.className="Mandatory";
      return;}

  i = catT.selectedIndex;

  // If Resident Status - Cat T ind1=2 (Non-resident) then
  // do not prompt 'Does this patient have a Medicare Card?' question
  if (catT.options[i].value.substr(3,1) == "2") {
      medicardQ.className="";
  }
  else {
      medicardQ.className="Mandatory";
  }
}

function valPatTypeHEA(deceased){
  SetMedicardQHEA(deceased);
  DefPatFolderHEA();
}

//T0879283-end

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line1 - 'ptmas008'
  // line2 - 'ptmas009'
  // suburb - 'ptmas010'
  // state - 'ptmas085'
  // postcode - 'ptmas011'

  InitAddressSearchFields('trAddrSrch','ptmas008','ptmas009','ptmas010','ptmas085','ptmas011');
}
function ShowAddressSearch() {
  OpenAddressSearch('2',PopulateAddress,ClearSearchAddress);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptmas008', true);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', true);
  ToggleFieldReadOnly('ptmas085', true);
  ToggleFieldReadOnly('ptmas011', true);

  SetFieldValue('ptmas008',StreetLine);
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010',Suburb);
  SetFieldValue('ptmas085',State);
  SetFieldValue('ptmas011',Postcode);

  document.getElementById('verifiedLabl').style.display = "";

  checkAdd01();  // flag Previous Address save
}
function ClearSearchAddress() {
  ToggleFieldReadOnly('ptmas008', false);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', false);
  ToggleFieldReadOnly('ptmas085', false);
  ToggleFieldReadOnly('ptmas011', false);

  SetFieldValue('ptmas008','');
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010','');
  SetFieldValue('ptmas085','');
  SetFieldValue('ptmas011','');

  document.getElementById('verifiedLabl').style.display = "none";
}
function ToggleSearchAddressFields(ReadOnly) {
  ToggleFieldReadOnly('ptmas008', ReadOnly);
  ToggleFieldReadOnly('ptmas009', ReadOnly);
  ToggleFieldReadOnly('ptmas010', ReadOnly);
  ToggleFieldReadOnly('ptmas085', ReadOnly);
  ToggleFieldReadOnly('ptmas011', ReadOnly);
}
function CheckVerifiedAddr() {
  if (document.getElementById('ptcnuadv').value == "1") {
    if (document.getElementById('verifiedLabl').style.display == "") {
      document.getElementById('pmpxi113').value = "1";  // verified address
    }
    else {
      document.getElementById('pmpxi113').value = "0";  // address not verified
    }
  }
  else {
    document.getElementById('pmpxi113').disabled = true;
  }
}
function ClearVerified() {
  if (document.getElementById('ptcnuadv').value != "1")
    return;

  document.getElementById('verifiedLabl').style.display = "none";
}
</script>
%START.OF.PAGE
<!--T0879283-start
<body onLoad="PageLoadExtended();valClaimCode();DisplayFieldsHEA();
turnOnSecondGivenName(document.UpdateForm.ptcnusgn.value,
                      document.UpdateForm.ptmas006,
                      document.UpdateForm.pmpxi084,
                      document.UpdateForm.pmpxi085);
                      checkContactCorrespondenceHEA(UpdateForm);
                      displayAmbulanceFields();
                      displayReferralFields();
                      defaultDisasterCode();
                      enableOEC();">
 see function init()-->
<body onLoad="PageLoadExtended();
              ChkIdentifyGenderPronounTitle1(document.UpdateForm);
              InitAddressSearch();checkZeroUr();
              document.UpdateForm.ptmas001.focus();
              checkBasicCoverRate(document.UpdateForm.emvis008);
              FilterClaimType(document.UpdateForm.emvis008);">
<!--T0879283-end-->

<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%EMRWEB02.01.003";
PatientVIS="%EMRWEB02.01.081";
PatientNAM="%EMRWEB02.01.002";
PatientSTA="%EMRWEB02.01.086.078";
PatientALT="%EMRWEB02.01.084";
PatientSEX="%EMRWEB02.01.019";
PatientDOB="%EMRWEB02.01.020";
PatientAGE="%EMRWEB02.01.021";
PatientLOC="%EMRWEB02.01.083";
PatientPRI="%EMRWEB02.01.086.066.1";
PatientUNT="%EMRWEB02.01.066.0";
PatientIND="%EMRWEB02.01.086.091";
GpCOD="%EMRWEB02.01.086.084.001";
GpNAM="%EMRWEB02.01.086.084.081";
GpPRAC="%EMRWEB02.01.086.085.001";
GpPRACCNT="%EMRWEB02.01.086.085.002";
GpPRACNAM="%EMRWEB02.01.086.085.005";
PatientARR="%EMRWEB02.01.101.0 %EMRWEB02.01.102";
PatientSEE="%EMRWEB02.01.130.0 %EMRWEB02.01.131";
PatientTRI="%EMRWEB02.01.103.3";
PatientECLC="%EMRWEB02.01.484.1";
PatientCLH="%STANDARD.01.017.CL";
PatientEHFT="%EMRWEB02.01.485";
AdmittingDrCheckBox="%EMRWEB02.01.251";
InsertEmergencyHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="01">
<input type=hidden name=updatety value="4">
<input type=hidden name=formactn value="C1">
<input type=hidden name=updttype value="TRIAG">
<input type=hidden name=updateky value="%EMRWEB02.01.404">
<input type=hidden name=admissno value="%EMRWEB02.01.146">
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=emvis118 value="%EMRWEB02.01.003">
<input type=hidden name=emvis147>
<input type=hidden name=dummyadm>
<input type=hidden name=fpatname>
<input type=hidden name=chckname>
<input type=hidden name=redirflg value="1">
<input type=hidden name=mvmedrec>
<input type=hidden name=dontchec value=1>
<input type=hidden name=nextpage value="11">
<input type=hidden name=redirect value="patweb89.pbl?reportno=1&template=082">
<input type=hidden name=ptcnueoc value="%EMRWEB02.01.454">
<input type=hidden name=savealia value="0">
<input type=hidden name=aliasset value="0">
<input type=hidden name=prevaddr value="0">
<input type=hidden name=preaddset value="0">
<input type=hidden name=claimc>
<input type=hidden name=deftclam value="%EMRWEB02.01.108.1">
<input type=hidden name=ptcnhdps id=ptcnhdps 
       value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=ptcnusgn value="%STANDARD.01.025.114.219.0.1">
<input type=hidden name=emvis091 id=emvis091 value="" />
<input type=hidden name=ptcnnewc id=ptcnnewc
                                 value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=confdemo value="0">
<input type=hidden name=hidsname id=hidsname value="%EMRWEB02.01.009">
<input type=hidden name=hidgname id=hidgname value="%EMRWEB02.01.010">
<input type=hidden name=ptcnuepm value="%STANDARD.01.025.125.155.0.1">
<input type=hidden name="stfrefin" id="stfrefin"
                                 value="%EMRWEB02.01.919">
<input type=hidden name="disacode" value="%EMRWEB02.01.498">
<input type=hidden name=dummx id=dummx value="">
<input type=hidden name="ptcnuesf" id="ptcnuesf"
                                 value="%STANDARD.01.025.124.222.0.1">
<input type=hidden name=ptcndigp id=ptcndigp
                                 value="%STANDARD.01.025.124.122.0.1">
<input type=hidden name=ptcndumh id=ptcndumh
                                 value="%STANDARD.01.025.124.240.0.1">
<input type=hidden name="emoecind" id="emoecind" value="%EMRWEB02.01.933">
<input type=hidden name="emviuc20" id="emviuc20" value="%EMRWEB02.01.934">
<input type=hidden name="descuc20" id="descuc20" value="%EMRWEB02.01.220.9.3">
<input type=hidden name="existoec" id="existoec" value="%EMRWEB02.01.935">
<input type=hidden name=sjogaudt value="1">
<input type=hidden name=pdecease id=pdecease value="%EMRWEB02.01.033">
<input type=hidden name=ptcnuadv id=ptcnuadv
                                 value="%STANDARD.01.025.123.247.0.1">
<input type=hidden name=pmpxi113 id=pmpxi113 value="%EMRWEB02.01.699.049">
<input type=hidden name=d_pmihfund id=d_pmihfund value="%EMRWEB02.01.040.0">
<input type=hidden name=d_pmihftlv id=d_pmihftlv value="%EMRWEB02.01.041.0">
<input type=hidden name=d_pmihfdsc id=d_pmihfdsc value="%EMRWEB02.01.040.1">
<input type=hidden name=d_pmihftds id=d_pmihftds value="%EMRWEB02.01.041.1">
<input type=hidden name=d_pmihfmem id=d_pmihfmem value="%EMRWEB02.01.042">
<input type=hidden name="ptcnsmsn" id="ptcnsmsn"
                                   value="%STANDARD.01.025.120.243.0.1">
<input type=hidden name="ptmsx050" id="ptmsx050"
                                   value="%EMRWEB02.01.085.066.1">
<input type=hidden name=test value="%EMRWEB02.01.016">
<input type=hidden name="d_cwebDDOB" value="%STANDARD.01.025.101.098.0.8">
<table align=center width=100% border=0 cellspacing=0 cellpadding=0>
  <tr><td class=HeadingCell colspan=6 align=center>
      Demographics Details</td></tr>
  <tr><td colspan=4></td>
      <td class=DataLabel><font color=red>QUICK REGISTRATION</font></td>
      <td><input type=checkbox name=quickreg id=quickreg tabindex=-1
           value="1"
           onclick='clrMandatory(hidsname,hidgname,"%EMRWEB02.01.019",
                                 "%EMRWEB02.01.020");'></td></tr>

<tr id=trAddrSrch style="display:none">
  <td colspan=2>&nbsp;</td>
  <td class=DataLabel nowrap>Search Address</td>
  <td><input type=text readonly size=42
       style="cursor:pointer;text-align:center;"
       value="Click here to search for an address"
       title="Click here to search for an address"
       onclick="ShowAddressSearch();">
  </td>
</tr>

  <tr><td class=DataLabel>Title </td>
  <td><select title="Title" tabindex=1 name=ptmas001 id=ptmas001>
       <option></option>
       %STANDARD.01.029
       </select>
       </td>
      <td class=DataLabel>Residential Address&nbsp;
        <span id=verifiedLabl style="display:none;color:red">(Verified)</span>
      </td>
      <td><input type="text" size="42" maxlength="35" tabindex=16
           name="ptmas008" id="ptmas008" class=Mandatory
           title="Address Line 1" value="%EMRWEB02.01.012"
           onchange="checkAdd01();UpCase(this);ClearVerified();"></td>
      <td class=DataLabel>Home Phone</td>
      <td><input type="text" size="20" maxlength="20" tabindex=29
           name="ptmas012" id="ptmas012" class="Phonenumnospaces"
           title="Home Phone" value="%EMRWEB02.01.017"
           onchange="checkAdd01();"></td></tr>

 <tr><td class=DataLabel>Surname </td>
     <td><input type=text size=35 maxlength=40 tabindex=2
          name=ptmas005 id=ptmas005 class=Readonly readonly
          title="Surname" value="%EMRWEB02.01.009"></td>
     <td class=DataLabel></td>
     <td><input type="text" size="42" maxlength="35" tabindex=17
          name="ptmas009" id="ptmas009" title="Address Line 2"
          value="%EMRWEB02.01.013"
          onchange="checkAdd01();UpCase(this);"></td>
     <td class=DataLabel>Work Phone</td>
     <td><input type="text" size="20" maxlength="20" tabindex=30
          name="ptmas013" id="ptmas013" class="Phonenumnospaces"
          title="Work Phone" value="%EMRWEB02.01.018"
          onchange="checkAdd01();"></td></tr>

<tr><td class=DataLabel id="givenNameLabel">Given Names</td>
    <td><input type=hidden name=ptmas006 id=ptmas006 title="Given Name"
         value="%EMRWEB02.01.010">
        <input type=text size=35 maxlength=40 class=Readonly readonly tabindex=3
         name=pmpxi084 id=pmpxi084 title="First Given Name"
         value="%EMRWEB02.01.699.001">
    </td>
    <td class=DataLabel>Suburb</td>
    <td><input type="text" size="42" maxlength="35" tabindex=18
         name="ptmas010" id="ptmas010" class=Mandatory title="Suburb"
         value="%EMRWEB02.01.014"
         onchange="LookupPostCode(UpdateForm.ptmas010.value);
                   checkAdd01();ClearVerified();">
    </td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type="text" size="20" maxlength="20" tabindex=31
         name="ptmsx042" id="ptmsx042" class="MobilePhnospaces"
         title="Mob. Phone" value="%EMRWEB02.01.343" onchange="checkAdd01();">
      <span id=DisplaySMS style="display: none">
      Opt-Out SMS<input type=checkbox name="d_ptmsx050" id="d_ptmsx050" value=1
            tabindex=32 onclick="checkAdd01();">
      </span>
    </td></tr> 

<tr><td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=35 maxlength=40 
        title="Second Given Name" tabindex=4 class=Readonly readonly
        name=pmpxi085 id=pmpxi085 value="%EMRWEB02.01.699.002">
    </td>
    <td class=DataLabel>State</td>
    <td><input type="text" size="42" maxlength="35" tabindex=19
         name="ptmas085" id="ptmas085" title="State" value="%EMRWEB02.01.015"
         onchange="checkAdd01();ClearVerified();"></td>
    <td class=DataLabel>E-Mail</td>
    <td><input type=text size=20 maxlength=80 class=Mandatory
        name=pmpxi005 id=pmpxi005 title="E-Mail" tabindex=33
        value="%EMRWEB02.01.605" onchange="checkAdd01();">
        No email/Opt-out
        <input type=checkbox name=d_ptmas044 id=d_ptmas044 value="1"
         tabindex=34
         onclick="NoEmailOptOutHEA();">
        <input type=hidden name=ptmas044 id=ptmas044>
    </td>
    </tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
     <td><select name="ptmas014" id="ptmas014" size="1" tabindex=5 
         class=Readonly readonly disabled 
          title="%STANDARD.01.017.G "  
          onchange="ChkIdentifyGenderPronounTitle1(document.UpdateForm);">
         <option></option>
            %EMRWEB02.01.086.099.061.9.1.19.3.H 
         </select></td>
     <td class=DataLabel>Post Code</td>
     <td><input type="text" size="4" maxlength="4" name="ptmas011" id="ptmas011"
         class=Mandatory title="Post Code" value="%EMRWEB02.01.016" tabindex=20
         onchange="LookupSuburb(this.value);ClearVerified();"></td>
    <td class=DataLabel>Practice</td>
    <td><input type=hidden name=pmpxi060 id=pmpxi060
         value="%EMRWEB02.01.685.001">
        <input type=hidden name=pmpxi061 id=pmpxi061 value="%EMRWEB02.01.661">
        <input type=hidden name=genpprov id=genpprov value="">
        <input type=text name=genpprac id=genpprac readonly title="Practice"
         value="%EMRWEB02.01.685.005">
        <img src="../images/SearchIcon.gif" class=Icon tabindex=35
         onclick="GPHCGSearchFrame(pmpxi059,genpname,genpprov,pmpxi060,
                  genpprac,pmpxi061,MandatoryGP)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(pmpxi060,genpprac,pmpxi061,genpprov);
                  MandatoryGP();">
     </td></tr>

<tr><td class=DataLabel>Date of Birth</td>
     <td><input type="text" size="12" name="ptmas016" id="ptmas016" tabindex=6
          class=Readonly readonly title="Date of Birth"
          value="%EMRWEB02.01.020">
         <img notab src="../images/DateLookup.gif" class="Icon"
          alt="Show Calendar" date="UpdateForm.ptmas016">
         <img notab src="../images/DateTimeStamp.gif" class="Icon"
          alt="Current" date="UpdateForm.ptmas016">
          &nbsp;Estimated DOB&nbsp;
     <input type=hidden name=pmpxi006 id=pmpxi006>
     <input type=checkbox name=d_pmpxi006 id=d_pmpxi006 title="Est DOB"
         value="1" tabindex=7>
     </td>
    <td class=DataLabel>Does this patient have a Medicare Card?</td>
    <td><select name=medicard id=medicard
         title="Does this patient have a Medicare Card?"
         tabindex=21 onchange="MediMandfield();">
      <option>  </option>
      <option value="0"> No </option>
      <option value="1"> Yes </option>
    </select></td>
     <td class=DataLabel>Local GP </td>
     <td><input type=hidden name=pmpxi059 id=pmpxi059
          value="%EMRWEB02.01.684.001">
         <input type=text readonly name=genpname id=genpname title="Local GP"
          value="%EMRWEB02.01.684.081">
         <img src="../images/SearchIcon.gif" class=Icon tabindex=34
          onclick="GPHCPSearchFrame(pmpxi059,genpname,genpprov,pmpxi060,
                   genpprac,pmpxi061,3,MandatoryGP)">
         <img src="../images/erase.gif" class=Icon
          onclick="clrFields(pmpxi059,genpname);MandatoryGP();">
     </td></tr>

<tr><td class=DataLabel>Preferred Given Names</td>
    <td><input type=text size="25" maxlength=25 name="pmpxi083" id="pmpxi083"
         title="Preferred Given Names"
         value="%EMRWEB02.01.698" tabindex=8 onchange="UpCase(this);">
    </td>
    <td class=DataLabel>Medicare #</td>
    <td><input type=text size=12 maxlength=10 tabindex=22
         name=ptmas022 id=ptmas022 title="Medicare Number"
         onblur="checkMedicare(ptmas022);" value="%EMRWEB02.01.027">
        <input type=text size=3 maxlength=2 name=ptmsx048 id=ptmsx048
         tabindex=23 value="%EMRWEB02.01.349"></td>
    <td class=DataLabel>%STANDARD.01.035.PV</td>
    <td><select name=pmpxi066 id=pmpxi066 tabindex=37 class="SelectMed"
         title="%STANDARD.01.035.PV">
        <option></option>
         %EMRWEB02.01.666.2
        </select></td>
    </tr>

<tr><td class=DataLabel>%STANDARD.01.035.M </td>
    <td><select name=ptmas015 id=ptmas015 tabindex=9 class="Mandatory SelectMed"
         title="%STANDARD.01.035.M ">
        <option></option>
         %EMRWEB02.01.069.2
        </select></td>
    <td class=DataLabel>Valid to (Expiry Date)</td>
    <td><input type=text size=12 name=pmpxi016 id=pmpxi016
         title="Valid to (Expiry Date)" value="%EMRWEB02.01.616" tabindex=24
         onblur="checkDateSV(this,'Valid to');" ></td>
    <td class=DataLabel>%STANDARD.01.035.FS</td>
    <td><select name=pmpxi077 id=pmpxi077 tabindex=38
         class="SelectMed Mandatory" title="%STANDARD.01.035.FS">
         <option></option>
         %EMRWEB02.01.679.2
         </select></td>
    </tr>

<tr><td class=DataLabel>%STANDARD.01.035.R </td>
      <td><select class="Mandatory SelectMed" tabindex=10
           name=ptmas019 id=ptmas019 title="%STANDARD.01.035.R ">
        <option></option>
        %EMRWEB02.01.023.2
        </select></td>
    <td class=DataLabel>Occupation</td>
    <td><input type=text size=20 maxlength=14 tabindex=25
         name=ptmas021 id=ptmas021 value="%EMRWEB02.01.025"
         onchange="UpCase(this);"></td>
    <td class=DataLabel>Health Fund </td>
    <td><input type=hidden name=emvis017 id=emvis017 value="%EMRWEB02.01.040.0">
        <input type=text size=25 name=funddesc id=funddesc maxlength="30"
         readonly value="%EMRWEB02.01.040.1" ></td>
    </tr>

  <tr><td class=DataLabel>%STANDARD.01.035.C </td>
      <td><select class="Mandatory SelectMed" name=ptmas018 id=ptmas018 tabindex=11
           title="%STANDARD.01.035.C ">
          <option></option>
          </select>
      </td>
    <td class=DataLabel>Transport Required</td>
    <td><select name=pmpxi092 id=pmpxi092 title="Transport Required" tabindex=27>
        <option></option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select>
    </td>
    <td class=DataLabel>Health Fund Level</td>
    <td><input type=hidden name=emvis018 id=emvis018
        value="%EMRWEB02.01.041.0" >
        <input type="text" size=15 maxlength=22 name=tabldesc id=tabldesc
         readonly value="%EMRWEB02.01.041.1" >
        <img src=../images/SearchIcon.gif class=Icon tabindex=39
        onclick="HealthFundSearchFrameNoFocusFunc(emvis017,funddesc,
                              emvis018,tabldesc,enableOEConblur);">
        <img src="../images/erase.gif" class=Icon tabindex=40
          onclick="clrDoc(funddesc,tabldesc);clrDoc(emvis017,emvis018);
                   enableOEConblur();"></td>
    </tr>

<tr><td class=DataLabel>%STANDARD.01.035.T </td>
    <td><select class="Mandatory SelectMed" tabindex=12
         name=ptmas020 id=ptmas020 title="%STANDARD.01.035.T "
         onchange="CheckAccom();valPatTypeHEA('%EMRWEB02.01.033');">
         <option></option>
         %EMRWEB02.01.024.2
        </select></td>
    <td class=DataLabel>%STANDARD.01.035.Pn</td>
    <td><select name=pmpxi095 id=pmpxi095 tabindex=28
         title="%STANDARD.01.035.Pn"
         class="SelectMed"
         onchange="checkContactCorrespondenceHEA(UpdateForm);">
         <option></option>
          %EMRWEB02.01.699. 12.2
         </select></td>
      <td class=DataLabel>Member Number</td>
      <td><input type=text size=20 maxlength=19 name=emvis124 id=emvis124
           value="%EMRWEB02.01.042" tabindex=41 title="Member Number">
        &nbsp;Alias&nbsp;
        <input type=checkbox name=fndalias id=fndalias title="Health Fund Alias"
         tabindex=42 value="1" onclick="ShowFundAlias2(UpdateForm);">
      </td>
      </tr>  

  <tr><td class=DataLabel>%STANDARD.01.035.VA</td>
      <td><select class="Mandatory SelectMed" tabindex=13
           name=pmpxi065 id=pmpxi065 title="%STANDARD.01.035.VA">
          <option></option>
          %EMRWEB02.01.665.2
          </select></td>
    <td class=DataLabel></td>
    <td></td>
    <td class=DataLabel>
    <span id="HealthFundAlias" style="Display:none">
    Health Fund Surname
    <span>
    </td>
    <td>
    <span id="HealthFundAlias1" style="Display:none">
     <input type=text size=42 maxlength=40 
      title="Health Fund Surname" onblur="UpCase(this)" tabindex=43
      name=pmpxi087 id=pmpxi087 value="%EMRWEB02.01.699.004">
    </span>
    </td>
    </tr>

  <tr><td class=DataLabel>Interpreter Required</td>
      <td><select name=pmpxi001 id=pmpxi001 title="Interpreter Required"
           tabindex=14 class="SelectMed">
          %EMRWEB02.01.601.2
          </select></td>
    <td class=DataLabel></td>
    <td></td>
    <td class=DataLabel>
    <span id="HealthFundAlias2" style="Display:none">
    Health Fund Given Name
    </span>
    </td>
    <td>
    <span id="HealthFundAlias3" style="Display:none">
        <input type=text size=42 maxlength=40
        title="Health Fund Given Name" onblur="UpCase(this)" tabindex=44
        name=pmpxi086 id=pmpxi086 value="%EMRWEB02.01.699.003">
    </span>
    </td>
    </tr>

  <tr><td class=DataLabel>%STANDARD.01.035.LA</td>
      <td><select class="Mandatory SelectMed" name=pmpxi002 id=pmpxi002
           tabindex=15 title="%STANDARD.01.035.LA">
          <option></option>
          </select></td>
      <td>&nbsp;</td> 
      <td>&nbsp;</td> 
    <td class=DataLabel>
    <span id="HealthFundAlias4" style="Display:none">
    Health Fund UPI
    </span>
    </td>
    <td>
    <span id="HealthFundAlias5" style="Display:none">
    <input type=text size=3 maxlength=2 tabindex=45
        title="Health Fund UPI" class="Number"
        name=pmpxi088 id=pmpxi088 value="%EMRWEB02.01.699.005">
    </span>
    </td></tr>

<tr>
  <td><div id=IdenGenLbl></div></td>
  <td><div id=IdenGenDetail></div></td>
  <td><div id=IdenProLbl></div></td>
  <td><div id=IdenProDetail></div></td>
  <td class=DataLabel><font color=red>Demographics Confirmed Date</font></td>
  <td><input type="text" class="PastDate" name=ptmas086 id=ptmas086 tabindex=46
       title="Demographics Confirmed Date" value="%EMRWEB02.01.085.059"
       onblur="checkDate(this,this.title);document.UpdateForm.confdemo.value=1">
      <img notab src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(ptmas086,null);">
  </td></tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
    <td class="DataLabel"><font color=red>Demographics Confirmed By</font></td>
    <td class="DataField">%EMRWEB02.01.085.063
                          %EMRWEB02.01.085.061
                          %EMRWEB02.01.085.062
    </td></tr>

<tr><td colspan=6 align=center id="headerline"><hr></td></tr>

<tr><td class=DataLabel id="PMIDef1L">%STANDARD.01.035.P1</td>
    <td class=DataField id="PMIDef1F">
    <select title="%STANDARD.01.017.P1" name=ptmas039 id=ptmas039
         class="SelectMed" tabindex=48>
        <option></option>
        %EMRWEB02.01.043.2
        </select>
    </td>
    </tr>

<tr><td class=DataLabel id="PMIDef2L">%STANDARD.01.035.P2</td>
    <td class=DataField id="PMIDef2F">
    <select title="%STANDARD.01.017.P2" name=ptmas040 id=ptmas040
         class="SelectMed" tabindex=49>
        <option></option>
        %EMRWEB02.01.044.2
        </select>
    </td>
    </tr>

<tr><td class=DataLabel id="PMIDef3L">%STANDARD.01.035.P3</td>
    <td class=DataField id="PMIDef3F">
    <select title="%STANDARD.01.017.P3" name=ptmas041 id=ptmas041
         class="SelectMed" tabindex=50>
        <option></option>
        %EMRWEB02.01.045.2
        </select>
    </td>
    </tr>

<tr><td class=DataLabel id="PMIDef4L">%STANDARD.01.035.P4</td>
    <td class=DataField id="PMIDef4F">
    <select title="%STANDARD.01.017.P4" name=ptmas042 id=ptmas042
         class="SelectMed" tabindex=51>
        <option></option>
        %EMRWEB02.01.046.2
        </select>
    </td>
    </tr>

<tr><td class=DataLabel id="PMIDef5L">%STANDARD.01.035.P5</td>
    <td class=DataField id="PMIDef5F">
    <select title="%STANDARD.01.017.P5" name=ptmas043 id=ptmas043
         class="SelectMed" tabindex=52>
        <option></option>
        %EMRWEB02.01.047.2
        </select>
    </td>
    </tr>

<tr><td colspan=6 class=HeadingCell align=center >
    <script type="text/javascript">URDesc();</script> Comments </td></tr>
<tr><td valign=top>
     <input type=button value="Add Comments" class="button"
      name="AddComm" id="AddComm" tabindex=53
      onclick="tempDisable(this);AddURComment();"></td>
    <td colspan=5><textarea wrap=hard name=urcommna class=Readonly readonly
         rows=4 cols=70>%EMRWEB02.01.068.005</textarea>
    </td>
    </tr>

  <tr><td class=HeadingCell colspan=6 align=center>
     Emergency Visit Details </td></tr>
    <tr><td class=DataLabel>Arrival Date/Time </td>
        <td><input type=text size=11 max=11 name=emvis001 id=emvis001
             value="%EMRWEB02.01.101.0" readonly> 
            <input type=text size=8 max=8 name=emvis002 id=emvis002
             value="%EMRWEB02.01.102" readonly></td>

    <td class=DataLabel>Attendance Type</td>
    <td><select class="Mandatory SelectMed" name=emvis053 id=emvis053 tabindex=65
         title="Attendance Type">
     <option></option>
     %EMRWEB02.01.213.2
     </select></td>

    <td class=DataLabel>Usual Accommodation</td>
    <td><select class="Mandatory SelectMed" name=pmsvx091 id=pmsvx091 tabindex=75
         title="Usual Accommodation">
     <option></option>
     %EMRWEB02.01.507.2
     </select></td>
    </tr>

<tr><td class=DataLabel>%STANDARD.01.017.CL</td>
    <td><select class="Mandatory SelectMed" name=emvis008 id=emvis008 tabindex=60
         title="%STANDARD.01.017.CL">
         <option></option>
         %EMRWEB02.01.274.9.1.08.1.E
        </select></td>
     <td class=DataLabel>Attendance Source</td>
     <td><select class="Mandatory SelectMed" name=emvis061 id=emvis061 tabindex=66
         title="Attendance Source"
         onchange="checkReferred();displayReferralFields();">
         <option></option>
         %EMRWEB02.01.221.2
         </select></td>
     <td class=DataLabel><div id=TranSrcHeading></div></td>
     <td><div id=TranSrc></div></td>
     </tr>

<tr><td class=DataLabel>Arrival Transport</td>
    <td><select name=emvis013 id=emvis013 tabindex=61 class="Mandatory SelectMed"
         title="Arrival Transport"
         onchange="document.UpdateForm.emvis034.disabled=0;CheckAmbType();
                   displayAmbulanceFields();
    if (document.UpdateForm.ptcnhdps.value=='3') 
    {CheckAmbTypeArrival();}">
     <option></option>
     %EMRWEB02.01.113.2
     </select></td>
     <td class=DataLabel>Amb Case No</td>
     <td><input type=text size=10 maxlength=15 name=emvis034 id=emvis034 tabindex=67
         onFocus="CheckAmbType();" value="%EMRWEB02.01.134" title="Amb Case No"
         onblur="ValidateAmbCase();"></td>
     <td>
     <div id="AmbCaseNoTimeDateTitleDIV">
     </div>
     </td>
     <td>
     <div id="AmbCaseNoTimeDateFieldDIV">
     </div>
     </td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.et</td>
     <td><select class="SelectMed Mandatory " name=emvis068 id=emvis068 tabindex=62
          title="%STANDARD.01.017.et">
     <option></option>
     %EMRWEB02.01.228.2
     </select></td>
    <td class=DataLabel>Referring GP</td>
    <td>
    <input type=text name=emvis019 id=emvis019 class=DataField title="Referring GP"
     size=10 maxlength=10 value="%EMRWEB02.01.119.001" tabindex=68
     onblur="ValidateHCP(18,0,emvis019,name_emvis019);">
    <input type=text name=name_emvis019 id=name_emvis019 readonly class=ReadOnly
     tabindex=-1
     title="Referring GP" size=24 maxlength=24 value="%EMRWEB02.01.119.081">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="HCPSearchFrame(emvis019,name_emvis019,0);"> </td>
    <td class=DataLabel>%STANDARD.01.035.ae</td>
    <td class=DataField>
    <select name=pmsvx128 id=pmsvx128 tabindex=79 title="%STANDARD.01.035.ae"
         class="SelectBig">
          <option value=" "></option>
          %EMRWEB02.01.599.002.2
    </select>
    </td>
     </tr>

<tr><td class=DataLabel>%STANDARD.01.017.en</td>
    <td><input type=text size=3 maxlength=3 name=emvis062 id=emvis062 
         tabindex=63
         class=Mandatory title="%STANDARD.01.017.en"
     value="%EMRWEB02.01.222.1" onchange="CheckCode(emvis062,v062name)">
     <select name=v062name id=v062name class="Mandatory SelectMed" tabindex=64
      onchange="UpdateCode(emvis062,v062name)">
     <option></option>
     %EMRWEB02.01.222.2
     </select></td>
     <td class=DataLabel>Inform GP</td>
     <td><select name=pmsvx010 id=pmsvx010 title="Inform GP" tabindex=69>
         <option value="2">Unknown</option>
         <option value="0">No</option>
         <option value="1">Yes</option>
         </select></td>
    <td class=DataLabel>%STANDARD.01.035.af</td>
    <td class=DataField>
    <select name=pmsvx129 id=pmsvx129 tabindex=80 title="%STANDARD.01.035.af"
         class="SelectBig">
          <option value=" "></option>
          %EMRWEB02.01.599.003.2
    </select>
    </td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.KD</td>
    <td><select class="Mandatory SelectMed" name=pmsvx079 tabindex=64
      title="%STANDARD.01.017.KD">
        <option></option>
          %EMRWEB02.01.536.2
     </select>
    </td>
    <td class=DataLabel><div id=PCEHRTitleDIV></div></td>
    <td id="PCEHRFieldDIV">
         <select name=pmsvx125 id=pmsvx125 tabindex=70 title="Upload to PCEHR">
         <option value=" "></option>
         <option value="0">No</option>
         <option value="1">Yes</option>
         </select>
     </td>
    <td class=DataLabel>Disaster Code</td>
    <td><select name=dispt001 id=dispt001 title="Disaster Code"
         onchange="displayDisasterID();" tabindex=80>
        <option></option>
        %EMRWEB02.01.497
        </select>
    </td></tr>

<tr><td class=DataLabel></td>
    <td></td>
    <td class=DataLabel></td>
    <td></td>
    <td class=DataLabel><div id=disasteridnumbertitleDIV></div></td>
    <td><div id=disasteridnumberDIV></div></td>
    </tr>

<tr><td class=DataLabel></td>
    <td class=DataField></td>
    <td class=DataLabel><div id="AmbArrivalLabel"></div></td>
    <td class=DataField colspan=2><div id="AmbArrivalField"></div></td>
    <td class=DataField></td>
    </tr>

<tr><td class=DataLabel></td>
     <td>
     </td>
     <td class=DataLabel>
       <div id="emvis174TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis174FieldDIV">
       </div>
     </td>
     <td class=DataLabel>
       <div id="emvis176TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis176FieldDIV">
       </div>
     </td>
     </tr>

<tr><td class=DataLabel></td>
     <td></td>
     <td class=DataLabel>
       <div id="emvis175TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis175FieldDIV">
       </div>
     </td>
     <td class=DataLabel>
       <div id="emvis020TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis020FieldDIV">
       </div>
     </td>
</tr>
</table>

<table align=center width=100% border=0 cellspacing=0 cellpadding=0>
<tr><td>

<tr><td class=DataLabel width=30%><b>Patient OEC Consent</b>
     </td>
     <td><div id="OEC_oecchbox_DIV">
     <input type="checkbox" name=oecchbox id=oecchbox value="1" 
      onclick="displayOECfields();OECRequired();">
     </div>
     <td>
     </td>
     <td class=DataLabel>
     </td>
     <td>
     </td>
     <td class=DataLabel>
     </td>
     <td>
     </td>
</tr>

<tr><td class=DataLabel>
      <b>
        <div id="OEC_peaind_title_DIV">
        </div>
      </b>
    </td>
    <td>
        <div id="OEC_peaind_field_DIV">
        </div>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
</tr>

<tr><td class=DataLabel>
      <b>
        <div id="OEC_emradm_title_DIV">
        </div>
      </b>
    </td>
    <td>
        <div id="OEC_emradm_field_DIV">
        </div>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
</tr>

<tr><td class=DataLabel>
      <b>
        <div id="OEC_swimbs_title_DIV">
        </div>
      </b>
    </td>
    <td>
        <div id="OEC_swimbs_field_DIV">
        </div>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
</tr>

<tr><td class=DataLabel>
      <b>
        <div id="OEC_preill_title_DIV">
        </div>
      </b>
    </td>
    <td>
        <div id="OEC_preill_field_DIV">
        </div>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
</tr>

<tr><td class=DataLabel>
      <b>
        <div id="OEC_presco_title_DIV">
        </div>
      </b>
    </td>
    <td>
        <div id="OEC_presco_field_DIV">
        </div>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
</tr>

<tr><td class=DataLabel>
      <b>
        <div id="OEC_intsty_title_DIV">
        </div>
      </b>
    </td>
    <td>
        <div id="OEC_intsty_field_DIV">
        </div>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
</tr>

<tr><td class=DataLabel>
      <b>
        <div id="OEC_plnsty_title_DIV">
        </div>
      </b>
    </td>
    <td>
        <div id="OEC_plnsty_field_DIV">
        </div>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
    <td class=DataLabel>
    </td>
    <td>
    </td>
</tr>

</td></tr>
</table>

<table align=center width=100% border=0 cellspacing=0 cellpadding=0>
<tr><td colspan=6 align=center class=DataLabel>
    <input type=button name=UpdateButton id=UpdateButton value="Update" 
     tabindex=90 onclick="tempDisable(this);valEmrVisit()" class="button">
    <input type=button class="button" name="nameupdt" value="Update Name"
     tabindex=91 onclick='PatientLinkTo("patweb89.pbl",1,40,1,850,350);'>
    <input type=button value="Cancel" class="button" tabindex=92
    onclick='fnPatientLink("%EMRWEB02.01.003","%EMRWEB02.01.081");'>
    </td></tr>
</table>
</form>
</div>

<div id=SelectHeading></div>
<div id=SelectLocation></div>

<span id="PCEHRTitleSPAN" style="display:none">
Upload to PCEHR
</span>

<script type="text/javascript">

 for (var i=0; i < document.UpdateForm.ptmas001.length; i++) {
  if (document.UpdateForm.ptmas001.options[i].value=="%EMRWEB02.01.005.0"){
      document.UpdateForm.ptmas001.selectedIndex=i; } }

/* genderName();
 PatientSex="%EMRWEB02.01.086.082"
 for (var i =0 ; i < document.UpdateForm.ptmas014.length; i++) {
   if (document.UpdateForm.ptmas014.options[i].value==PatientSex.substr(0,1)) {
       document.UpdateForm.ptmas014.selectedIndex=i } };
*/
 InterpReq="%EMRWEB02.01.601.0";
 if ( InterpReq == "1") {
   document.UpdateForm.pmpxi001.checked=1;
   document.UpdateForm.pmpxi002.className="Mandatory";
 }
 CTypeAdm="%EMRWEB02.01.252";
 if ( CTypeAdm == "Yes") {
   document.UpdateForm.emvis147.value=1; }
 else { 
   document.UpdateForm.emvis147.value=0; }

 ChgClaim="%EMRWEB02.01.488"
 if ( ChgClaim == "1") {
   document.UpdateForm.emvis008.disabled=true;
   document.UpdateForm.emvis008.className=""; }

 Medicare="%EMRWEB02.01.027";
   if(!isWhitespace(Medicare)){
    document.UpdateForm.medicard.value="1";
    document.UpdateForm.ptmas022.className="Mandatory";
    document.UpdateForm.ptmsx048.className="Mandatory";
    document.UpdateForm.pmpxi016.className="Mandatory";
   } else {
    document.UpdateForm.medicard.value=" ";
    document.UpdateForm.ptmas022.className="";
    document.UpdateForm.ptmsx048.className="";
    document.UpdateForm.pmpxi016.className="";
   }

 EstDOB="%EMRWEB02.01.606"
 if ( EstDOB == "1") {
   document.UpdateForm.d_pmpxi006.checked=1;
 }
 Transport="%EMRWEB02.01.699.009"
 for (var i =0 ; i < document.UpdateForm.pmpxi092.length; i++) {
  if (document.UpdateForm.pmpxi092.options[i].value==Transport) {
       document.UpdateForm.pmpxi092.selectedIndex=i } };
 if(!isWhitespace("%EMRWEB02.01.699.003") ||
    !isWhitespace("%EMRWEB02.01.699.004") ||
    !isWhitespace("%EMRWEB02.01.699.005")) {
    document.UpdateForm.fndalias.checked=true;
    ShowFundAlias2(UpdateForm);
 }

 InformGP="%EMRWEB02.01.510";
 for (var i =0 ; i < document.UpdateForm.pmsvx010.length; i++) {
   if (document.UpdateForm.pmsvx010.options[i].value==InformGP) {
      document.UpdateForm.pmsvx010.selectedIndex=i } };

 if (document.UpdateForm.urnumber.value=='       0') {
    document.getElementById("PCEHRTitleDIV").innerHTML ="";
    document.getElementById("PCEHRFieldDIV").innerHTML ="";
 } else {
   if ((VariableNameExists('ScreenLabelMyHRConsent'))&&
       (ScreenLabelMyHRConsent!="")){
     document.getElementById("PCEHRTitleSPAN").innerHTML =
     ScreenLabelMyHRConsent;
     document.UpdateForm.pmsvx125.title = ScreenLabelMyHRConsent;
   }
   PCEHRTitleDIV.innerHTML=PCEHRTitleSPAN.innerHTML;
   PCEHR=trim("%EMRWEB02.01.599.001");
   for (var i=0;i<document.UpdateForm.pmsvx125.length;i++){
   if (document.UpdateForm.pmsvx125.options[i].value==PCEHR){
       document.UpdateForm.pmsvx125.selectedIndex=i}};
 }

 var classDIGP = (UpdateForm.ptcndigp.value >= 3) ? "Mandatory" : "";
 UpdateForm.pmsvx010.className = classDIGP;            //Inform GP
 if (document.UpdateForm.urnumber.value!='       0') {
   var classMYHR = (UpdateForm.ptcndumh.value >= 3) ? "Mandatory" : "";
   UpdateForm.pmsvx125.className = classMYHR;            //Upload MyHR
   var p = document.UpdateForm;
   if((p.pmsvx010.value!="0")&&(p.pmsvx010.value!="1")){
     DefaultInformGP(p.pmsvx010,p.ptcndigp.value);}      // inform gp default
   if((p.pmsvx125.value!="0")&&(p.pmsvx125.value!="1")){
     DefaultInformGP(p.pmsvx125,p.ptcndumh.value);}      // upload myhr default
 }

//T0879283-start
 EOPTOUT="%EMRWEB02.01.049";
 if (EOPTOUT == "Yes") {
   document.getElementById('d_ptmas044').checked=1; }
//T0879283-end

 if (document.getElementById('ptcnuadv').value == "1" &&
     document.getElementById('pmpxi113').value == "1") {  // Verified address
   document.getElementById('verifiedLabl').style.display = "";
 }

function DefpmiHFHEA(){
// Default PMI Health fund details if first time through
 p=document.UpdateForm; 

 if ((isWhitespace(p.emvis008.value) && isWhitespace(p.emvis017.value))) {
    p.emvis017.value=p.d_pmihfund.value;
    p.emvis018.value=p.d_pmihftlv.value;
    p.emvis124.value=p.d_pmihfmem.value;
    p.funddesc.value=p.d_pmihfdsc.value; 
    p.tabldesc.value=p.d_pmihftds.value;
 } 
}

function checkZeroUr() {
  if(document.UpdateForm.urnumber.value=='       0') {
    alert("This is a zero U/R visit. Please allocate a U/R.");
    fnPatientLink("%EMRWEB02.01.003","%EMRWEB02.01.081");
  }
}
</script>
<form name=HiddenFields method=get>
<input type=hidden name=cob value="%EMRWEB02.01.022.1">
<input type=hidden name=pl1 value="%EMRWEB02.01.602.1">
</form>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=MenuType value="%EMRWEB02.01.088">
<input type=hidden name=emrgflag value="Y">
<input type=hidden name=nextpage value="4">
</form>

<span id=transferhd style="display:none">
Transfer Source
</span>

<span id=transferblank style="display:none">
   <input type=hidden name=emvis032 id=emvis032 value="" notab>
</span>

<span id=transfersrc style="display:none">
<input type="text" size=8 maxlength=6 name="emvis032" id=emvis032 
 value="%EMRWEB02.01.132.1" title="Transfer Source" class=Mandatory
 onchange='validateCode(9,emvis032,trnsfsrc);' tabindex=76>
<input type=text size=25 name=trnsfsrc id=trnsfsrc readonly notab
 value="%EMRWEB02.01.132.0">
<img src="../images/SearchIcon.gif" notab class=Icon
 onclick=" TransferSourceFrame(emvis032,trnsfsrc)">
</span>

<span id="AmbCaseNoTimeDateTitleSPAN" style="display: none">
Date/Time Amb Case Created
</span>

<span id="AmbCaseNoTimeDateFieldSPAN" style="display: none">
<input type="text" size="12" name=emvis079 id=emvis079 tabindex=77
       title="Date Amb Case Created" class="Mandatory Date"
       value="%EMRWEB02.01.239.0" >
  <img notab src="../images/DateLookup.gif" id="Dategif" class=Icon
       onclick="DateLookupFrame(UpdateForm.emvis079);" />
       Time
  <input type="text" name=emvis089 id=emvis089 size="8" tabindex=78
   value="%EMRWEB02.01.249" title="Time Amb Case Created" class=Mandatory>
  <img notab src="../images/DateTimeStamp.gif" class=Icon id="CurrentTimegif"
   onclick="SetCurrentDateTime(UpdateForm.emvis079,UpdateForm.emvis089);" />
  <img notab src="../images/TimeLookup.gif" class=Icon
   onclick="TimeLookupFrame(UpdateForm.emvis089);" id="Calendargif"/>
</span>

<span id="AmbCaseNoTimeDateHiddenSPAN" style="display: none">
<input type=hidden name=emvis079 id=emvis079 value=" ">
<input type=hidden name=emvis089 id=emvis089 value=" ">
</span>

<span id=disasteridnumbertitleSPAN style="display:none">
Disaster Identification #
</span>

<span id=disasteridnumberSPAN style="display:none">
<input type="text" name=dispt002 id=dispt002 size=20 maxlength=19 tabindex=81
   title="Disaster Identification Number">
</span>

<span id="emvis174TitleSPAN" style="display:none">
  %STANDARD.01.017.RF
</span>
<span id="emvis174FieldSPAN" style="display:none">
  <select name=emvis174 id=emvis174 class="SelectMed" tabindex=73
   title="%STANDARD.01.017.RF" onchange="displaycatRF();">
    <option></option>
    %EMRWEB02.01.293.2
  </select>
</span>

<span id="emvis176TitleSPAN" style="display:none">
  Referral Date
</span>
<span id="emvis176FieldSPAN" style="display:none">
  <input type=text size=12 name=emvis176 id=emvis176 tabindex=82
   title="Referral Date" value="%EMRWEB02.01.295"
   onblur="checkDateSV(this,'Valid to');" >
  <img notab src="../images/DateLookup.gif" class="Icon"
   alt="Show Calendar" date="UpdateForm.emvis176">
</span>
<span id="emvis175TitleSPAN" style="display:none">
         Referral Period (Months)
</span>
<span id="emvis175FieldSPAN" style="display:none">
         <input type=text name=emvis175 id=emvis175 
          title="Referral Period (Months)"
          class=Number size=15 maxlength=2 min=1 max=98
          value="%EMRWEB02.01.294">
</span>

<span id="emvis020TitleSPAN" style="display:none">
 Referring HCP
</span>
<span id="emvis020FieldSPAN" style="display:none">
 <input type="text" size=8 maxlength=10 name=emvis020 id=emvis020 tabindex=83
  value="%EMRWEB02.01.120.001" onchange="ReadDocOnly(18,0,emvis020,doctnam1);">
 <input type=text size=20 readonly name=doctnam1 id=doctnam1 tabindex=-1
  value="%EMRWEB02.01.120.081">
 <img src="../images/SearchIcon.gif" class=Icon
  onclick="HCPSearchFrame(UpdateForm.emvis020,doctnam1,dummx,dummx,dummx,dummx);">
 <img src="../images/erase.gif" class=Icon
  onclick="clrFields(emvis020,doctnam1);">
</span>

<span id="ShowAmbArrivalLabel" style="display:none">
<td class=DataLabel>Ambulance at Destination Date/Time</td>
</span>

<span id="BlankAmbArrival" style="display:none">
   <input type=hidden name=emvis154 value=" " notab>
   <input type=hidden name=emvis155 value=" " notab>
</span>

<span id="ShowAmbArrivalField" style="display:none">
<td class=DataField>
   <input type=text size=11 max=11 name=emvis154 id=emvis154
    value="%EMRWEB02.01.275" onblur="checkDate(this,this.title);" tabindex=71
    title="Ambulance at Destination Date" class="PastDate">
   <img notab src="../images/DateLookup.gif" class="Icon"
    alt="Show Calendar" date="UpdateForm.emvis154">
   <input type=text size=8 max=8 name=emvis155 id=emvis155
    value="%EMRWEB02.01.276" onblur="checkTime(this,this.title);" tabindex=72
    title="Ambulance at Destination Time">
   <img notab src="../images/DateTimeStamp.gif" class="Icon"
    alt="Current" date="UpdateForm.emvis154" time="UpdateForm.emvis155">
   <img notab src="../images/TimeLookup.gif" class="Icon"
    alt="Time Select" time="UpdateForm.emvis155">
</td>
</span>

<span id="OEC_peaind_title_SPAN" style="display:none">
PEA Indicator
</span>

<span id="OEC_peaind_field_SPAN" style="display:none">
<select name=ptelf014 id=ptelf014 title="PEA Indicator" class="OECRequired">
  <option></option>
  <option value=0 selected>No</option>
  <option value=1>Yes</option>
  <option value=2>Query</option>
</select>
</span>

<span id="OEC_emradm_title_SPAN" style="display:none">
Emergency Admission
</span>

<span id="OEC_emradm_field_SPAN" style="display:none">
<select name=ptelf015 id=ptelf015 title="Emergency Admission" class="OECRequired">
  <option value=0>No</option>
  <option value=1 selected>Yes</option>
</select>
</span>

<span id="OEC_swimbs_title_SPAN" style="display:none">
Switch to MBS Presenting Illness Number
</span>

<span id="OEC_swimbs_field_SPAN" style="display:none">
<input type="checkbox" name=presilsw id=presilsw value="1"
 title="Presenting Illness MBS"
 onclick="switchPresIll();">
</span>

<span id="OEC_preill_title_SPAN" style="display:none">
Presenting Illness Code
</span>

<span id="OEC_preill_field_SPAN" style="display:none">
<select name=ptelf016 id=ptelf016 title="Presenting Illness" class="OECRequired">
<option value=" "></option>
  %STANDARD.01.007.il
</select>
</span>

<span id="OEC_preillnum_title_SPAN" style="display:none">
Presenting Illness Number (MBS)
</span>

<span id="OEC_preillnum_field_SPAN" style="display:none">
 <input type=text name=ptelf017 id=ptelf017 size=10 maxlength=9
  onblur='validateCode(4,ptelf017,mbsdesc1,emvis001)' class="OECRequired"
  title="Presenting Illness">
 <input type=text notab readonly name=mbsdesc1 id=mbsdesc1 size=35 class="Readonly">
 <img notab src="../images/SearchIcon.gif"
  onclick="MbsSearchFrame(ptelf017,mbsdesc1,emvis001)" name=mbsserch id=mbsserch>
 <img src="../images/erase.gif" align=absmiddle
  onclick="clrFields(ptelf017,mbsdesc1);" name=erasembs id=erasembs>
 <input type=hidden name=ptelf016 id=ptelf016 value=" ">
</span>

<span id="OEC_presco_title_SPAN" style="display:none">
Presenting Complaint
</span>

<span id="OEC_presco_field_SPAN" style="display:none">
<input type=text name=ptelf022 id=ptelf022 size=50 maxlength=50
 title="Presenting Complaint" class="OECRequired">
</span>

<span id="OEC_intsty_title_SPAN" style="display:none">
%STANDARD.01.017.VI
</span>

<span id="OEC_intsty_field_SPAN" style="display:none">
<select name=ptelf011 id=ptelf011 title="%STANDARD.01.017.VI" class="OECRequired">
  <option> </option>
    %STANDARD.01.018.VI.ON .5
</select>
</span>

<span id="OEC_plnsty_title_SPAN" style="display:none">
Planned Length of Stay
</span>

<span id="OEC_plnsty_field_SPAN" style="display:none">
<input type="text" size="5" maxlength="5" name=ptelf012 id=ptelf012 value="2"
 title="Planned Length of Stay" class="Integer OECRequired"
 onblur="checkInteger(this,this.value);">
</span>

<span id=idenGenLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gi</td>
</span>
<span id=idenGenDetailShow style="display:none">
  <td><select name=pmpxi125 id=pmpxi125 class=Mandatory tabindex=15
       title="%STANDARD.01.035.Gi"
       onchange="IdenGenderChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.01.086.099.063.9.2
      </select><br>
      <span id=IdenGenFreeTxt></span>
  </td>
</span>
<span id=idenGenDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi125 id=pmpxi125 value=""></td>
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>
<span id=idenGenFreeTxtShow style="display:none">
  <input type=text name=pmpxi126 id=pmpxi126 size=80 maxlength=80
   class=Mandatory tabindex=15
   title="Identifying Gender Free Text"
   value="%EMRWEB02.01.086.099.065">
</span>
<span id=idenGenFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>

<span id=idenProLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gp</td>
</span>
<span id=idenProDetailShow style="display:none">
  <td><select name=pmpxi127 id=pmpxi127 class=Mandatory tabindex=28
       title="%STANDARD.01.035.Gp"
       onchange="IdenPronounChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.01.086.099.064.9.2
      </select><br>
      <span id=IdenProFreeTxt></span>
  </td>
</span>
<span id=idenProDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi127 id=pmpxi127 value=""></td>
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>
<span id=idenProFreeTxtShow style="display:none">
  <input type=text name=pmpxi128 id=pmpxi128 size=80 maxlength=80
   class=Mandatory tabindex=28
   title="Identifying Pronoun Free Text"
   value="%EMRWEB02.01.086.099.066">
</span>
<span id=idenProFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>

