<meta name="TemplateVersion" content="V12.00.00">
<meta name="TemplateHome"    content="hea">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/emrweb0201100.js"></script>
<script type="text/javascript" src="../js/EmergencyPrimaryDiagSearch.js"></script>
<script type="text/javascript">
function DischargeSummary() {
  ScreenLink('emrweb02.pbl','01','210','1024','768');
}
function checkFirstSeen() {
 if (!isWhitespace(document.UpdateForm.frsndoct.value)) {
   document.UpdateForm.frsndoct.className="readonly";
   document.UpdateForm.frsndoct.readOnly=true;
   document.UpdateForm.frsndate.className="Date readonly";
   document.UpdateForm.frsndate.readOnly=true;
   document.UpdateForm.frsntime.className="readonly";
   document.UpdateForm.frsntime.readOnly=true;

   document.UpdateForm.FirstSeenDoctorButton.disabled=true;
 }
}
function AddClinNote() {
  document.PatientLinks.reportno.value="05"
  document.PatientLinks.template.value="001"
  document.PatientLinks.action="cliweb06.pbl"
  Left=(document.body.clientWidth-900)/2
  DFrameSubmit(document.PatientLinks,0,Left,900,300);
}
function submitFreeFormat() {
  if (isWhitespace(document.UpdateForm.emvcd005.value)&&
      !isWhitespace(document.UpdateForm.emvcd033.value)) {
    alert("Primary Diagnosis selection field is mandatory.");
  } else {
    submitPrimaryDiag();
  }
}
function submitPrimaryDiag() {
  var diagCookieName = "diagnosisCookie-" + trim(UpdateForm.admissno.value);

  document.UpdateForm.emvcd033.value = 
  document.UpdateForm.emvcd033.value.replace(/"/g,"'"); 

  if (isWhitespace(document.UpdateForm.diagnosisSearch.value)) {
    UpdateFieldVCD(UpdateForm.admissno,
      "          "+UpdateForm.emvcd003.value,
      " ",
      function () {
        SetCookie(diagCookieName,document.UpdateForm.diagnosisSearch.value);
        StdPageRefresh();
      }
    );
  } else {
    if (!isWhitespace(document.UpdateForm.emvcd005.value)) {
      validateEMRDiagnosis(validateEMRDiagnosisRetFuncTrue,validateEMRDiagnosisRetFuncFalse);
    }
  }
}
function validateEMRDiagnosisRetFuncTrue() {
  var diagCookieName = "diagnosisCookie-" + trim(UpdateForm.admissno.value);

  UpdateFieldVCD(UpdateForm.admissno,
    UpdateForm.emvcd005.value.substring(0,10)+UpdateForm.emvcd003.value,
    UpdateForm.emvcd033.value,
    function () {
      SetCookie(diagCookieName,document.UpdateForm.diagnosisSearch.value);
      StdPageRefresh();
    }
  );
}
function validateEMRDiagnosisRetFuncFalse() {
  document.UpdateForm.diagnosisSearch.focus();
}
function UpdateFieldVCD(Visit,ReturnCode,ReturnDesc) {
  ReturnFunction="" ;
  for (var i=3; i < UpdateFieldVCD.arguments.length; i++) {
    if (typeof(UpdateFieldVCD.arguments[i]) == 'function') {
      ReturnFunction=UpdateFieldVCD.arguments[i] }
    else {
      UpdateFieldVCD.arguments[i].value=""; }  }
  var serverURL  = "../cgi-bin/emrweb08.pbl?reportno=24" +
               "&admissno=" + Visit.value.replace(/ /g,"+") +
               "&valdcode=" + ReturnCode.replace(/ /g,"+") +
               "&valddesc=" + escape(ReturnDesc.replace(/ /g,"+"))
   
  if (IEBrowser) {
    var returnValue = RSExecute(serverURL);

    if (returnValue.status==0) {
      if (returnValue.return_value=="1") {
        alert("Only Free Format Description from Primary Diagnosis is defaulted to Bed Request.");
      }
    }
    else {
      ReturnCode.focus();
    }

    if (typeof(ReturnFunction) == 'function') { ReturnFunction() }
  }
  else {
    var returnValue = RSExecuteFetch(serverURL);

    returnValue.then(
      function (returnValue) {
        returnValue = ParseFetchData(returnValue);  // parse fetch() result

        if (returnValue.status==0) {
          if (returnValue.return_value=="1") {
            alert("Only Free Format Description from Primary Diagnosis is defaulted to Bed Request.");
          }
        }
        else {
          ReturnCode.focus();
        }

        if (typeof(ReturnFunction) == 'function') { ReturnFunction() }
      }
    );
  }
} 
function validateEMRDiagnosis(RetFuncTrue,RetFuncFalse) {
  var serverURL="../cgi-bin/emrweb08.pbl?reportno=23" +
                "&emvcd001="+UpdateForm.emvcd001.value.replace(/ /g,"+") +
                "&emvcd002="+UpdateForm.emvcd002.value.replace(/ /g,"+") +
                "&emvcd003="+UpdateForm.emvcd003.value.replace(/ /g,"+") +
       "&emvcd005="+UpdateForm.emvcd005.value.substring(0,10).replace(/ /g,"+");

  if (IEBrowser) {
    var returnValue = RSExecute(serverURL);

    if (returnValue.status==0) {
      if (returnValue.return_value==1) {
        alert("Error: Diagnosis Record already exists.");
        if (typeof(RetFuncFalse) == 'function') { RetFuncFalse() }
        return false;
      }
    }

    if (typeof(RetFuncTrue) == 'function') { RetFuncTrue() }
  }
  else {
    var returnValue = RSExecuteFetch(serverURL);

    returnValue.then(
      function (returnValue) {
        returnValue = ParseFetchData(returnValue);  // parse fetch() result

        if (returnValue.status==0) {
          if (returnValue.return_value==1) {
            alert("Error: Diagnosis Record already exists.");
            if (typeof(RetFuncFalse) == 'function') { RetFuncFalse() }
            return false;
          }
        }

        if (typeof(RetFuncTrue) == 'function') { RetFuncTrue() }
      }
    );
  }
}
function checkDateFunction(fieldvar,stringtitle) {
  if(isWhitespace(fieldvar.value)) {
    return;
  } else {
    checkDate(fieldvar,stringtitle);
  }
}
function AdmDoctor() {
 validateCode(31,UpdateForm.emvis106,UpdateForm.n_emvis106);
 UpdateFieldEMR(document.UpdateForm.admissno,1,UpdateForm.emvis106);
 UpdatePreAdmReq(document.UpdateForm.admissno);
}
function ClrAdmDoctor() {
 UpdateForm.emvis106.value="";
 UpdateForm.n_emvis106.value="";
 UpdateFieldEMR(document.UpdateForm.admissno,1,UpdateForm.emvis106);
 UpdatePreAdmReq(document.UpdateForm.admissno);
}
function updateCB() {
  if (document.UpdateForm.emvis091.checked==true) {
    document.UpdateForm.emvis091.value="1";
  } else {
    document.UpdateForm.emvis091.value="0";
  }
}


function PageLoadExtended(ev)
{
  PageLoad(ev);
}

function updateDrAdmitting()
{
 updateCB();
 UpdateFieldEMR(document.UpdateForm.admissno,3,document.UpdateForm.emvis091);
}
function enableFollowUp() {
  if (document.HiddenFields.DischargeComplete.value != "2" &&
      document.HiddenFields.DischargeComplete.value != "3") {
    return;
  }

  if (document.HiddenFields.DischargeDestinat.value.substr(3,1) != "H") {
    return;
  }

  document.UpdateForm.emvis076.disabled=false;
  document.UpdateForm.emvis086.disabled=false;
  document.UpdateForm.emvis171.disabled=false;
  document.UpdateForm.emvis080.disabled=false;
  document.UpdateForm.emvis090.disabled=false;
  document.UpdateForm.emvis168.disabled=false;
  document.UpdateForm.emvis078.disabled=false;
  document.UpdateForm.emvis088.disabled=false;
  document.UpdateForm.emvis169.disabled=false;
  document.UpdateForm.emvis170.disabled=false;
}
function CheckAmbHandover() {
  AmbulanceHandover.innerHTML=ShowAmbulanceHandover.innerHTML;
}
</script>
</head>
%START.OF.PAGE
<body onLoad="PageLoadExtended(event);checkFirstSeen();enableFollowUp();" 
      onunload="unlockClinNotes();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%EMRWEB02.01.003";
PatientVIS="%EMRWEB02.01.081";
PatientNAM="%EMRWEB02.01.002";
PatientSTA="%EMRWEB02.01.086.078";
PatientALT="%EMRWEB02.01.084";
PatientSEX="%EMRWEB02.01.019";
PatientDOB="%EMRWEB02.01.020";
PatientAGE="%EMRWEB02.01.021";
PatientLOC="%EMRWEB02.01.083";
PatientPRI="%EMRWEB02.01.086.066.1";
PatientUNT="%EMRWEB02.01.066.0";
PatientIND="%EMRWEB02.01.086.091";
GpCOD="%EMRWEB02.01.086.084.001";
GpNAM="%EMRWEB02.01.086.084.081";
GpPRAC="%EMRWEB02.01.086.085.001";
GpPRACCNT="%EMRWEB02.01.086.085.002";
GpPRACNAM="%EMRWEB02.01.086.085.005";
PatientARR="%EMRWEB02.01.101.0 %EMRWEB02.01.102";
PatientSEE="%EMRWEB02.01.130.0 %EMRWEB02.01.131";
PatientTRI="%EMRWEB02.01.103.3";
PatientECLC="%EMRWEB02.01.484.1";
PatientCLH="%STANDARD.01.017.CL";
PatientEHFT="%EMRWEB02.01.485";
InsertEmergencyHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<table width=100% align=center border=0 cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell align=center>
    Emergency Patient Clinical Details</td>
    <td class=HeadingCell align=right width=5%>
    <a href="javascript:NextPatient('%EMRWEB02.01.476.emrweb02.01.100');">
    <img src="../images/ShowIcon.gif" border=0 align=left
     alt="Select next emergency patient by visit date/time."
     title="Select next emergency patient by visit date/time."></a>
    <a href="javascript:print();">
    <img src="../images/PrinterIcon.gif" border=0 align=absmiddle
     alt='Print Page' title='Print Page'></a></td>
</tr>
</table>

<form name=SelectScreen id=SelectScreen action="emrweb02.pbl" method=post
 style="margin:0">
 <input type=hidden name=reportno id=reportno value=1>
 <input type=hidden name=template id=template value=1>
 <input type=hidden name=admissno id=admissno value="%EMRWEB02.01.081">
 <input type=hidden name=urnumber id=urnumber value="%EMRWEB02.01.003">
</form>

<form name=UpdateForm id=UpdateForm action="emrweb02.pbl" method=post
 style="margin:0" onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno id=reportno value="01">
<input type=hidden name=updttype id=updttype value="TRIAG">
<input type=hidden name=resavail id=resavail value="0">
<input type=hidden name=template id=template value="100">
<input type=hidden name=admissno id=admissno value="%EMRWEB02.01.081">
<input type=hidden name=urnumber id=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=emvis118 id=emvis118 value="%EMRWEB02.01.003">
<input type=hidden name=formactn id=formactn value=" "> 
<input type=hidden name=nextpage id=nextpage value=0>
<input type=hidden name=redirect id=redirect>
<input type=hidden name=updateky id=updateky value="%EMRWEB02.01.404">
<input type=hidden name=username id=username>
<input type=hidden name=password id=password>
<input type=hidden name=dummy1 id=dummy1>
<input type=hidden name=dummy2 id=dummy2>
<input type=hidden name=emvis004 id=emvis004>
<input type=hidden name=emvis005 id=emvis005>
<input type=hidden name=emvis135 id=emvis135>
<input type=hidden name=emvis136 id=emvis136>
<input type=hidden name=emvis137 id=emvis137>
<input type=hidden name=emvis138 id=emvis138>
<input type=hidden name=emvis147 id=emvis147>
<input type=hidden name=emdct001 id=emdct001>
<input type=hidden name=emdct002 id=emdct002>
<input type=hidden name=emdct003 id=emdct003>
<input type=hidden name=emdct004 id=emdct004>
<input type=hidden name=emdct005 id=emdct005>
<input type=hidden name=emdct006 id=emdct006>
<input type=hidden name=emdct007 id=emdct007>
<input type=hidden name=emdct008 id=emdct008>
<input type=hidden name=emdct009 id=emdct009>
<input type=hidden name=emvis026 id=emvis026 value=" ">
<input type=hidden name=emvis006 id=emvis006 value="%EMRWEB02.01.106.1">
<input type=hidden name=emvis007 id=emvis007 value="%EMRWEB02.01.107.001">
<input type=hidden name=temdiag id=temdiag value="">
<input type=hidden name=patdiag id=patdiag>
<input type=hidden name=emcndoct id=emcndoct value="%EMRWEB02.01.455">
<input type=hidden name=ptcnhdps id=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=emarrdte id=emarrdte value="%EMRWEB02.01.101.0">
<input type=hidden name=emarrtim id=emarrtim value="%EMRWEB02.01.102">
<input type=hidden name=emambdte id=emambdte value="%EMRWEB02.01.275">
<input type=hidden name=emambtim id=emambtim value="%EMRWEB02.01.276">
<input type=hidden name=emvcd001 id=emvcd001 value="%EMRWEB02.01.081">
<input type=hidden name=emvcd002 id=emvcd002 value="005">
<input type=hidden name=emvcd003 id=emvcd003 value="%EMRWEB02.01.197">
<input type=hidden name=emvcd004 id=emvcd004 value="5">
<input type=hidden name=emvcd006 id=emvcd006 value="   ">
<input type=hidden name=emvcd031 id=emvcd031 value="1">

<table width=98% align=center border=0 cellspacing=0 cellpadding=1>
<tr>
  <td></td>
  <td></td>
  <td align=right>
    <div id="AmbulanceHandover"></div>
  </td>
   

</tr>
<tr><td class=DataLabel width=20%>Triage Date </td>
    <td class=DataLabel width=40%><input type="text" name=emvis128 id=emvis128 size="12"
     title="Triage Data" value="%EMRWEB02.01.162.0" readonly>
    Time
    <input type="text" name=emvis129 id=emvis129 size="8"
     value="%EMRWEB02.01.163" readonly>
    </td>
    <td align=right>
    <input type=button class="button" 
     value="Dis. Summary" onclick='DischargeSummary();'>
    <input type=button class="Bigbutton" 
     value="Nurse Handover" onclick='DoctorDataHEA();'>
    <input type=button class="Bigbutton" value="Doctor Handover"
     onclick='NurseDataHEA();'>
    </td></tr>
<tr valign=top><td class=DataLabel>Presenting Complaint</td>
    <td colspan=4>
    <table width=100% cellspacing=0 cellpadding=0>
    <tr valign=top>
        <td><input type=hidden name=el id=el value="el">
        <input type=text name=emvis060 id=emvis060 max=3 readonly size=3
         title="Presenting Compliant"
         value="%EMRWEB02.01.220.1"
         onblur="validateCatCode(el,emvis060,v060name);">
        <input type=text name=v060name id=v060name readonly
         value="%EMRWEB02.01.220.0"></td>
        <td><textarea wrap=hard name=prcom001 id=prcom001 cols=50 readonly 
             rows=3 onchange="setPreXml('%EMRWEB02.01.081');"></textarea>
     <!-- disabled -->
        </td></tr>
    </table>
    </td></tr>

<tr valign=top><td class=DataLabel>Medical History </td>
    <td colspan=4>
    <table cellspacing=0 cellpadding=0>
    <tr valign=bottom>
          <td><textarea class=Readonly cols=70 rows=5 
                        name=medichis id=medichis readonly></textarea></td>
          <td><input type=button class="button" value="Add" 
               onclick='AddList();'>
          </td></tr>
    </table>
    </td></tr>

<tr valign=top><td class=DataLabel>Clinical Notes</td>
   <td colspan=4>
   <table cellspacing=0 cellpadding=0>
   <tr valign=bottom>
          <td><textarea name=discnote id=discnote rows=4 wrap=hard readonly
               cols=70>%EMRWEB02.01.453</textarea>
              </td>
          <td><input type=button class="button" value="Print" 
              onclick='PrintNotesSTV();'>
              <input type=button class="button" value="Add Notes"
               onclick='AddClinNote();'>
         </td></tr>
   </table>
   </td></tr>


<tr><td class=DataLabel>Primary&nbsp;Diagnosis&nbsp;Search</td>
    <td colspan=4>
      <input type=text
       onKeyUp='getDiagnosis(this,UpdateForm.emvcd005,UpdateForm.emvcd033);'
       onblur='submitPrimaryDiag();' class=SelectBig name=diagnosisSearch id=diagnosisSearch>
      <select name=emvcd005 id=emvcd005 class=SelectXlrg
       onchange="document.UpdateForm.emvcd033.value=trim(this.value.substring(9,80))+' ';submitPrimaryDiag();">
      </select>
      <input type=button class="button" value="Multi Diagnosis"
       onclick='DiagnosisLink();'>
    </td>
</tr>

<tr>
  <td class=DataLabel>Primary Diagnosis&nbsp;Free Format Desc</td>
  <td colspan=4><input type=text name=emvcd033 id=emvcd033 maxlength=100 size=100 
                 onblur="submitFreeFormat();">
</tr>

<tr valign=top>
    <td class=DataLabel>
    <input type=button class=SlimButton value="Billing" 
       onclick='ProcedureLink();'> </td>
    <td><textarea cols=40 rows=3 readonly>%EMRWEB02.01.402.004.0</textarea></td>
    <td colspan=3>
      <table width=100% border=0 cellspacing=0 cellpadding=0>
        <tr> <td class=DataLabel>%STANDARD.01.017.et</td>
          <td><select class="SelectMed" name=d_emvis068 id=d_emvis068
               title="%STANDARD.01.017.et"
               onchange="UpdateFieldEMR(document.UpdateForm.admissno,2,this);">
               <option></option>
               %EMRWEB02.01.228.2
              </select>
             <span id=InsertReqButton style="display: none">
             <input type=button class="button" value="Ward/Bed Req."
              name=reqbuttn id=reqbuttn onclick="BedReqLink();">
             </span>
             <input type=button class="button" value="Injury Data" name=injbuttn id=injbuttn onclick='InjuryData();'>
          </td>
        </tr>

        <tr>
          <td class=DataLabel>Admitting Doctor</td>
          <td><input type="text" size=8 maxlength=6 name="emvis106" id="emvis106"
               title="Admitting Doctor" value="%EMRWEB02.01.266.003"
               onblur="UpCase(this);AdmDoctor();">
              <input type=text readonly size=25 notab name=n_emvis106 id=n_emvis106
               title="Admitting Doctor" value="%EMRWEB02.01.266.002">
              <img notab src="../images/SearchIcon.gif" class=Icon
               onclick="DoctorSearchFrame(emvis106,n_emvis106,AdmDoctor)">
              <img src="../images/erase.gif" class=Icon
               onclick="ClrAdmDoctor();">
          </td>
        </tr>

        <tr>
          <td class=DataLabel>Admitting Dr Contacted</td>
          <td><input type=checkbox name=emvis091 id=emvis091 title="Admitting Dr Contacted"
               onblur="updateDrAdmitting();">
          <td colspan=2 align=left>
          </td>
        </tr>

        <tr>
          <td><span id=InsertReqTitle style="display: none">
               Expected Ward
              </span>
          </td>
          <td><span id=InsertReqDet style="display: none">
               %EMRWEB02.01.486
              </span>
          </td>
        </tr>
      </table>
    </td>
</tr>

<tr>
  <td>
    First Seen By Doctor
  </td>
  <td>
        <input type=text size=6 name=frsndoct id=frsndoct title="First Seen By Doctor"
         value="%EMRWEB02.01.526" onblur="getDoctorDescHEA();">
        <input type=text size=18 name=dummy3 id=dummy3 title="Doctor Name"
         readonly class=Readonly value="%EMRWEB02.01.527">
        <img src="../images/SearchIcon.gif" id="SearchIcongif" class=Icon
          onclick="SearchDoctorHEA();">
        &nbsp;&nbsp;&nbsp; &nbsp;
        <input type=button class="largebutton" id="FirstSeenDoctorButton"
         value="Add First Seen Doctor" onclick='UpdDoctorHEA();'>
  </td>
</tr>
</table>

<table width=98% align=center border=0 cellspacing=0 cellpadding=1>
<tr>
  <td width=20%>
    First Seen Date
  </td>
  <td width=40%><input type="text" size="12" name="frsndate" id="frsndate"
             class="Date" title="First Seen Date"
             value="%EMRWEB02.01.130.0" />
         <img notab src="../images/DateLookup.gif" id="Dategif" class=Icon 
          onclick="DateLookupFrame(UpdateForm.frsndate);" />
          Time
       <input type="text" name="frsntime" id="frsntime" size="8"
              value="%EMRWEB02.01.131" title="First Seen Time"
              >
     <img notab src="../images/DateTimeStamp.gif" class=Icon id="CurrentTimegif"
      onclick="SetCurrentDateTime(UpdateForm.frsndate,UpdateForm.frsntime);" />
     <img notab src="../images/TimeLookup.gif" class=Icon
      onclick="TimeLookupFrame(UpdateForm.frsntime);" id="Calendargif"/>
  </td>
  <td class=DataField>ED Patient Follow Up</td>
</tr>

<tr>
  <td></td>
  <td></td>
  <td class=DataLabel width=10%>Call Attempt 1</td> 
  <td><input type="text" size="12" name="emvis076" id="emvis076" disabled
       title="Call Attempt 1 Date"
       value="%EMRWEB02.01.236.0" 
       onblur="if (checkDate(this,this.title)) {
         if (!isWhitespace(document.UpdateForm.emvis086.value) &&
             !CheckDateTimeRange(document.HiddenFields.DischargeDate,
                                     document.HiddenFields.DischargeTime,
                                     document.UpdateForm.emvis076,
                                     document.UpdateForm.emvis086)) {
         alert('Call Attempt Date/Time cannot be prior to Discharge Date/Time');
             document.UpdateForm.emvis076.value='';
             document.UpdateForm.emvis086.value='';
             UpdateFieldEMR(document.UpdateForm.admissno,4,
                            document.UpdateForm.emvis076);
             UpdateFieldEMR(document.UpdateForm.admissno,5,this);
             return;
           }
               UpdateFieldEMR(document.UpdateForm.admissno,4,this);}" />
  <img notab src="../images/DateLookup.gif" id="Dategif" class=Icon
       onclick="DateLookupFrame(UpdateForm.emvis076);" />
       Time
  <input type="text" name="emvis086" id="emvis086" size="8" disabled
   value="%EMRWEB02.01.246" title="Call Attempt 1"
   onblur="if (checkTime(this,this.title)) {
             if (!CheckDateTimeRange(document.HiddenFields.DischargeDate,
                                     document.HiddenFields.DischargeTime,
                                     document.UpdateForm.emvis076,
                                     document.UpdateForm.emvis086)) {
         alert('Call Attempt Date/Time cannot be prior to Discharge Date/Time');
             document.UpdateForm.emvis076.value='';
             document.UpdateForm.emvis086.value='';
             UpdateFieldEMR(document.UpdateForm.admissno,4,
                            document.UpdateForm.emvis076);
             UpdateFieldEMR(document.UpdateForm.admissno,5,this);
             return;
           }
           UpdateFieldEMR(document.UpdateForm.admissno,5,this);}" >
  <img notab src="../images/DateTimeStamp.gif" class=Icon id="CurrentTimegif"
   onclick="SetCurrentDateTime(UpdateForm.emvis076,UpdateForm.emvis086);" />
  <img notab src="../images/TimeLookup.gif" class=Icon
   onclick="TimeLookupFrame(UpdateForm.emvis086);" id="Calendargif"/>
  <select class="SelectMed" name=emvis171 id=emvis171 title="%STANDARD.01.035.YR       "
   onchange="UpdateFieldEMR(document.UpdateForm.admissno,6,this);" disabled>
  <option></option>
   %EMRWEB02.01.292.2
  </select>
  </td>  
</tr>

<tr>
  <td></td>
  <td></td>
  <td class=DataLabel width=10%>Call Attempt 2</td>
  <td><input type="text" size="12" name="emvis080" id="emvis080" disabled
       title="Call Attempt 2 Date"
       value="%EMRWEB02.01.240.0"
       onblur="if (checkDate(this,this.title)) {
             if (!isWhitespace(document.UpdateForm.emvis090.value) &&
                 !CheckDateTimeRange(document.HiddenFields.DischargeDate,
                                     document.HiddenFields.DischargeTime,
                                     document.UpdateForm.emvis080,
                                     document.UpdateForm.emvis090)) {
         alert('Call Attempt Date/Time cannot be prior to Discharge Date/Time');
             document.UpdateForm.emvis080.value='';
             document.UpdateForm.emvis090.value='';
             UpdateFieldEMR(document.UpdateForm.admissno,7,
                            document.UpdateForm.emvis080);
             UpdateFieldEMR(document.UpdateForm.admissno,8,this);
             return;
           }
               UpdateFieldEMR(document.UpdateForm.admissno,7,this);}" />
  <img notab src="../images/DateLookup.gif" id="Dategif" class=Icon
       onclick="DateLookupFrame(UpdateForm.emvis080);" />
       Time
  <input type="text" name="emvis090" id="emvis090" size="8" disabled
   value="%EMRWEB02.01.250" title="Call Attempt 2"
   onblur="if (checkTime(this,this.title)) {
             if (!CheckDateTimeRange(document.HiddenFields.DischargeDate,
                                     document.HiddenFields.DischargeTime,
                                     document.UpdateForm.emvis080,
                                     document.UpdateForm.emvis090)) {
         alert('Call Attempt Date/Time cannot be prior to Discharge Date/Time');
             document.UpdateForm.emvis080.value='';
             document.UpdateForm.emvis090.value='';
             UpdateFieldEMR(document.UpdateForm.admissno,7,
                            document.UpdateForm.emvis080);
             UpdateFieldEMR(document.UpdateForm.admissno,8,this);
             return;
           }
           UpdateFieldEMR(document.UpdateForm.admissno,8,this);}" >
  <img notab src="../images/DateTimeStamp.gif" class=Icon id="CurrentTimegif"
   onclick="SetCurrentDateTime(UpdateForm.emvis080,UpdateForm.emvis090);" />
  <img notab src="../images/TimeLookup.gif" class=Icon
   onclick="TimeLookupFrame(UpdateForm.emvis090);" id="Calendargif"/>
  <select class="SelectMed" name=emvis168 id=emvis168 title="%STANDARD.01.035.YR       "
   onchange="UpdateFieldEMR(document.UpdateForm.admissno,9,this);" disabled>
  <option></option>
   %EMRWEB02.01.289.2
  </select>
  </td>
</tr>

<tr>
  <td></td>
  <td></td>
  <td class=DataLabel width=10%>Call Attempt 3</td>
  <td><input type="text" size="12" name="emvis078" id="emvis078" disabled
       title="Call Attempt 3 Date"
       value="%EMRWEB02.01.238.0"
       onblur="if (checkDate(this,this.title)) {
             if (!isWhitespace(document.UpdateForm.emvis088.value) &&
                 !CheckDateTimeRange(document.HiddenFields.DischargeDate,
                                     document.HiddenFields.DischargeTime,
                                     document.UpdateForm.emvis078,
                                     document.UpdateForm.emvis088)) {
         alert('Call Attempt Date/Time cannot be prior to Discharge Date/Time');
             document.UpdateForm.emvis078.value='';
             document.UpdateForm.emvis088.value='';
             UpdateFieldEMR(document.UpdateForm.admissno,10,
                            document.UpdateForm.emvis078);
             UpdateFieldEMR(document.UpdateForm.admissno,11,this);
             return;
           }
               UpdateFieldEMR(document.UpdateForm.admissno,10,this);}" />
  <img notab src="../images/DateLookup.gif" id="Dategif" class=Icon
       onclick="DateLookupFrame(UpdateForm.emvis078);" />
       Time
  <input type="text" name="emvis088" id="emvis088" size="8" disabled
   value="%EMRWEB02.01.248" title="Call Attempt 3"
   onblur="if (checkTime(this,this.title)) {
             if (!CheckDateTimeRange(document.HiddenFields.DischargeDate,
                                     document.HiddenFields.DischargeTime,
                                     document.UpdateForm.emvis078,
                                     document.UpdateForm.emvis088)) {
         alert('Call Attempt Date/Time cannot be prior to Discharge Date/Time');
             document.UpdateForm.emvis078.value='';
             document.UpdateForm.emvis088.value='';
             UpdateFieldEMR(document.UpdateForm.admissno,10,
                            document.UpdateForm.emvis078);
             UpdateFieldEMR(document.UpdateForm.admissno,11,this);
             return;
           }
           UpdateFieldEMR(document.UpdateForm.admissno,11,this);}" >
  <img notab src="../images/DateTimeStamp.gif" class=Icon id="CurrentTimegif"
   onclick="SetCurrentDateTime(UpdateForm.emvis078,UpdateForm.emvis088);" />
  <img notab src="../images/TimeLookup.gif" class=Icon
   onclick="TimeLookupFrame(UpdateForm.emvis088);" id="Calendargif"/>
  <select class="SelectMed" name=emvis169 id=emvis169 title="%STANDARD.01.035.YP       "
   onchange="UpdateFieldEMR(document.UpdateForm.admissno,12,this);" disabled>
  <option></option>
   %EMRWEB02.01.290.2
  </select>
  </td>
</tr>

<tr>
  <td></td>
  <td></td>
  <td class=DataLabel>%STANDARD.01.035.YQ           </td>
  <td>
  <select class="SelectMed" name=emvis170 id=emvis170 title="%STANDARD.01.035.YQ       "
   onchange="UpdateFieldEMR(document.UpdateForm.admissno,13,this);" disabled>
  <option></option>
   %EMRWEB02.01.291.9.2
  </select>
  </td>
</tr>
</table>
</form>
</div>

<span id="ShowAmbulanceHandover" style="display:none">
   Ambulance Handover Complete
   &nbsp;&nbsp;
   <input type=text size=11 max=11 name="emvis156" id="emvis156"
    value="%EMRWEB02.01.277" onblur="AmbHandoverDateHEA();"
    title="Ambulance Handover Date" class="PastDate">
   <img notab src="../images/DateLookup.gif" class="Icon"
    alt="Show Calendar" date="UpdateForm.emvis156">
   <input type=text size=8 maxlength=8 name="emvis157" id="emvis157"
    value="%EMRWEB02.01.278" title="Ambulance Handover Time"
    onblur="AmbHandoverTimeHEA();">
   <img notab src="../images/DateTimeStamp.gif" class="Icon"
    alt="Current" date="UpdateForm.emvis156" time="UpdateForm.emvis157">
   <img notab src="../images/TimeLookup.gif" class="Icon"
    alt="Time Select" time="UpdateForm.emvis157">
</span>

<form name=AddDiagnosis id=AddDiagnosis method=post action=emrweb06.pbl
 style="margin:0">
<input type=hidden name=reportno id=reportno value="2">
<input type=hidden name=template id=template value="002">
<input type=hidden name=updatety id=updatety value="A">
<input type=hidden name=nextpage id=nextpage value="1">
<input type=hidden name=redirect id=redirect value="%EMRWEB02.01.001.emrweb02.01.100">
<input type=hidden name=urnumber id=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno id=admissno value="%EMRWEB02.01.081">
<input type=hidden name=emvcd001 id=emvcd001 value="%EMRWEB02.01.081">
<input type=hidden name=emvcd002 id=emvcd002 value="005">
<input type=hidden name=emvcd004 id=emvcd004 value="5">
<input type=hidden name=emuty001 id=emuty001 value="EMRD">
<input type=hidden name=emvcd005 id=emvcd005 value="">
<input type=hidden name=emvcd006 id=emvcd006 value="   ">
<input type=hidden name=emvcd031 id=emvcd031 value="1">
<input type=hidden name=updateky id=updateky value="%EMRWEB02.01.449">
<input type=hidden name=webuseri id=webuseri value="%STANDARD.01.008">
</form>
<form name=PatientLinks id=PatientLinks method=get style="margin:0">
<input type=hidden name=reportno id=reportno value=1>
<input type=hidden name=template id=template value=004>
<input type=hidden name=regexstm id=regexstm value=102>
<input type=hidden name=newstand id=newstand value=1>
<input type=hidden name=urnumber id=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno id=admissno value="%EMRWEB02.01.081">
<input type=hidden name=nextpage id=nextpage value="4">
<input type=hidden name=emrgflag id=emrgflag value="Y">
<input type=hidden name=MenuType id=MenuType value="11">
<input type=hidden name=webuseid id=webuseid value="%STANDARD.01.008">
</form>
<form name=HiddenFields id=HiddenFields style="margin:0">
<input type=hidden name=InjuryIndicator id=InjuryIndicator
 value="%EMRWEB02.01.447">
<input type=hidden name=DoctorCode id=DoctorCode value="%EMRWEB02.01.107.001">
<input type=hidden name=DischargeComplete id=DischargeComplete
 value="%EMRWEB02.01.147">
<input type=hidden name=DischargeDestinat id=DischargeDestinat
 value="%EMRWEB02.01.126.3">
<input type=hidden name=DischargeDate id=DischargeDate value="%EMRWEB02.01.124.0">
<input type=hidden name=DischargeTime id=DischargeTime value="%EMRWEB02.01.125">
<input type=hidden name=Diag01 id=Diag01 value="%EMRWEB02.01.437">
<input type=hidden name=Diag02 id=Diag02 value="%EMRWEB02.01.438">
<input type=hidden name=Diag03 id=Diag03 value="%EMRWEB02.01.439">
<input type=hidden name=Diag04 id=Diag04 value="%EMRWEB02.01.440">
<input type=hidden name=Diag05 id=Diag05 value="%EMRWEB02.01.441">
<input type=hidden name=Diag06 id=Diag06 value="%EMRWEB02.01.442">
<input type=hidden name=Diag07 id=Diag07 value="%EMRWEB02.01.443">
<input type=hidden name=Diag08 id=Diag08 value="%EMRWEB02.01.444">
<input type=hidden name=Diag09 id=Diag09 value="%EMRWEB02.01.445">
<input type=hidden name=Pres01 id=Pres01 value="%EMRWEB02.01.104">
<input type=hidden name=Pres02 id=Pres02 value="%EMRWEB02.01.105">
<input type=hidden name=Pres03 id=Pres03 value="%EMRWEB02.01.174">
<input type=hidden name=Pres04 id=Pres04 value="%EMRWEB02.01.175">
<input type=hidden name=Pres05 id=Pres05 value="%EMRWEB02.01.176">
<input type=hidden name=Pres06 id=Pres06 value="%EMRWEB02.01.177">
<input type=hidden name=prcom001 id=prcom001>
<input type=hidden name=ptcnbedm id=ptcnbedm value="%STANDARD.01.025.112.106.0.1">
<input type=hidden name=PrimaryDiagnosis id=PrimaryDiagnosis
 value="%EMRWEB02.01.187">
<input type=hidden name=PrimaryDiagnCode id=PrimaryDiagnCode
 value="%EMRWEB02.01.196">
<input type=hidden name=PrimaryDiagnFtxt id=PrimaryDiagnFtxt
 value="%EMRWEB02.01.195">
<input type=hidden name=PrimaryDiagnKeyw id=PrimaryDiagnKeyw
 value="%EMRWEB02.01.490">
</form>
<script type="text/javascript">
  if (EmergencyFullScreens) {
    top.document.all.menu.height='744';
    top.document.all.content.height='0';
  }

  CTypeAdm="%EMRWEB02.01.252";
  if (CTypeAdm == "Yes") {
    document.UpdateForm.emvis147.value=1;
  }
  else { 
    document.UpdateForm.emvis147.value=0;
  }

  MedNoteLine="%EMRWEB02.01.436";
  NoteArray=MedNoteLine.split("|");
  NewNotes=NoteArray[0];

  for (var j=1; j < NoteArray.length; j++) {
    if (!isWhitespace(NoteArray[j])) {
      NewNotes=NewNotes+"\n"+NoteArray[j];
    }
  }
  document.UpdateForm.medichis.value=NewNotes;

  InjData="%EMRWEB02.01.188";
  if (InjData == "1") {
    document.UpdateForm.injbuttn.className="RedButton";
  }

  if (document.HiddenFields.ptcnbedm.value == "1") {
    InsertReqTitle.style.display="";
    InsertReqDet.style.display="";
    InsertReqButton.style.display="";
  } else {
    InsertReqTitle.style.display="none";
    InsertReqDet.style.display="none";
    InsertReqButton.style.display="none";
  }

  if ("%EMRWEB02.01.251" == "Yes") {
    document.UpdateForm.emvis091.checked=true;
    document.UpdateForm.emvis091.value="1";
  } else {
    document.UpdateForm.emvis091.checked=false;
    document.UpdateForm.emvis091.value="0";
  }

  var diagCookieName = "diagnosisCookie-" + trim(UpdateForm.admissno.value);
  var diagCookieVal = GetCookieData(diagCookieName);

  if (!isWhitespace(document.HiddenFields.PrimaryDiagnosis.value)) {
    document.UpdateForm.diagnosisSearch.value =
      document.HiddenFields.PrimaryDiagnKeyw.value.substring(0,1);

    if (diagCookieVal != "unknown") {
      document.UpdateForm.diagnosisSearch.value = diagCookieVal;
      ExpireCookiePath("diagnosisCookie-" + trim(UpdateForm.admissno.value));
    }

    getDiagnosis(UpdateForm.diagnosisSearch,
                 UpdateForm.emvcd005,
                 UpdateForm.emvcd033,
                 SelectDiagList);
  }

  if (document.UpdateForm.ptcnhdps.value=="3") {
    CheckAmbHandover();
  }

function SelectDiagList() {
  for (var i=0; i < document.UpdateForm.emvcd005.length; i++) {
    if (document.UpdateForm.emvcd005.options[i].value.substring(0,10)==
        document.HiddenFields.PrimaryDiagnCode.value) {
      document.UpdateForm.emvcd005.selectedIndex=i;
    }
  }

  document.UpdateForm.emvcd033.value =
    document.HiddenFields.PrimaryDiagnFtxt.value;
}
</script>
