.******************************************************************************
.*  System        : Operating Rooms                                           *
.*                                                                            *
.*  Include Name  : OPR013IO.PBL                                              *
.*                                                                            *
.*  Function      : Display all the fields for the User Defined Screens       *
.*                  The order of the variables are for the following FD's     *
.*                    PATMA1FD - Patient master                               *
.*                    BOKRC1FD - Booking details                              *
.*                    OPRDEAFD - Operation Details                            *
.*                    OPRDECFD - Operation Usage                              *
.*                    BOKDIAFD - Booking Diagnosis                            *
.*                                                                            *
.*  Author        : 14/11/90  J. Ceniza                                       *
.*                                                                            *
.*  Modifications :                                                           *
.*        V9.03.01  11/06/2004  Mike Laming   CAR 49016  July 2004 PRS/2      *
.*                  - Add Sex Description routine SEXDSC00 with Code "R" -    *
.*                  "Intersex" added                                          *
.*        V9.02.02  20/11/2002  J.Tan                                         *
.*                  Added Medicare expire date                                *
.*        V9.02.01  21/01/2002  Sai SRF 14832                                 *
.*                  Fixed displaying of Healthfund DHLFUN00 by                *
.*                  replacing KEY10 with KEY14 to read the fund table         *
.*        V5.08.02  29/09/2000  Tonii                                         *
.*                  Fixed displaying of patient sex description, was showing  *
.*                  leftover characters from previous entry                   *
.*        V5.08.01  01/09/2000  Tonii                                         *
.*                  Mods to accept Unknown and Indeterminate as valid patient *
.*                  sex description                                           *
.******************************************************************************
.*        V5.07.00  14/10/1998  Jim Stathopoulos                              *
.*                  507 Changes                                               *
.******************************************************************************
.*        V5.06.01  16/07/1998  Glenn Berry      SRF 644441 
.*                  Fixed display of Implant Codes.
.******************************************************************************
.*        V5.05.03  10/12/1997    Nick SRF 622924                             *
.*                  Fixed defaulting of Book. Date                            *
.*        V5.05.02  19/09/1997    Steve Armstrong                             *
.*                  Added display for BKREBKDT - Booking Date                 *
.*        V5.05.01  11/09/1997    Steve Armstrong   SRF 643248                *
.*                  Fixed NOK relationship to use PNKRELP instead of PNKTELP  *
.******************************************************************************
.*        V5.03.02  02/01/1996    Justin Coates  (SUHT mods)                  *
.*                  add keyin for expected length of stay                     *
.*        V5.03.01  15/08/1995  Greg Horvat      SRF 135349 611042 640637     *
.*                  Changed to not use PTCNPCDS when display the prov. item,  *
.*                  ICD9 & booking descriptions.                              *
.*        V5.02.01  05/05/1995    Justin Coates                               *
.*                  changed the way prov. items display                       *
.*                  made displays set up VAR & PRINTVAR for screen painter    *
.******************************************************************************
.*                  06/03/1991    Justin Coates                               *
.*                  Added display of Cancellation reason OPDACANC             *
.*                  Added display of Operating Theatre   OPDATHET             *
.*                  26/04/91      J.Tan      SRF   108347                     *
.*                  Fixed displaying sex description                          *
.*                  10/07/1991    Justin Coates  (Vic Health Dept Changes)    *
.*                  Add display of BKRECLSS, BKREATYP, BKREDEPT, BKRETDOC     *
.*                  16/09/91      J.Tan                                       *
.*                  Fixed I*C on patfn1af  SRF 110593                         *
.*                  01/10/91      J.Tan      SRF 110833                       *
.*                  Fixed displaying ICD description                          *
.*                  10/10/91      Justin Coates  (User Group Changes)         *
.*                  Added displaying of BKRECLMT - patient claim type         *
.*                  and booking diagnosis fields                              *
.*                  04/02/93      ROD                                         *
.*                  Added 6 New fields for Dudley (from Referring GP)         *
.*                  24/06/93      WHIRLPOOL                                   *
.*                  Fixed display of GP name                                  *
.*                  03/11/1993    Justin Coates  QUOTE 440017 SRF 440204      *
.*                  added display of practice count to practice code field    *
.*                  20/01/1994    Rob Leonard  SRF 122899                     *
.*                  Added option to display Proc Code with Proc Description   *
.*                  07/03/1994    Justin Coates  SRF 440719                   *
.*                  added display of district of residence                    *
.*                  18/03/1994    Rob Leonard  SRF 122899                     *
.*                  Controll display of desc+proc code with parameter PTCNPCDS*
.*                                                                            *
.******************************************************************************
.
. --------------------------------------
. ------- PMI Details - PATMA1FD -------
. --------------------------------------
.
DPTITL00  RESET     PTITL,OPSCSIZE
          LENSET    PTITL
          RESET     PTITL
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PTITL    * patient title
.
DPTITL99  RETURN
.***************************************************************************
DSURNA00  RESET     PSNAME,OPSCSIZE
          LENSET    PSNAME
          RESET     PSNAME
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PSNAME   * patient surname
.
DSURNA99  RETURN
.***************************************************************************
DGIVNA00  RESET     PGNAME,OPSCSIZE
          LENSET    PGNAME
          RESET     PGNAME
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PGNAME   * patient givenname
.
DGIVNA99  RETURN
.***************************************************************************
DPRVNA00  RESET     PPSNAME,OPSCSIZE
          LENSET    PPSNAME
          RESET     PPSNAME
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PPSNAME  * previous surname
.
DPRVNA99  RETURN
.***************************************************************************
DFADDR00  RESET     PADD1,OPSCSIZE
          LENSET    PADD1
          RESET     PADD1
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PADD1    * address 1
.
DFADDR99  RETURN
.***************************************************************************
DSADDR00  RESET     PADD2,OPSCSIZE
          LENSET    PADD2
          RESET     PADD2
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PADD2    * address 2
.
DSADDR99  RETURN
.***************************************************************************
DEADDR00  RESET     PADD4,OPSCSIZE
          LENSET    PADD4
          RESET     PADD4
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PADD4    * address 4
.
DEADDR99  RETURN
.***************************************************************************
DSUBUR00  RESET     PSUBRB,OPSCSIZE
          LENSET    PSUBRB
          RESET     PSUBRB
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PSUBRB   * suburb/address 3
.
DSUBUR99  RETURN
.***************************************************************************
DPOSTC00  RESET     PPOST,OPSCSIZE
          LENSET    PPOST
          RESET     PPOST
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PPOST    * post code
.
DPOSTC99  RETURN
.***************************************************************************
DPRTEL00  RESET     PTELEP,OPSCSIZE
          LENSET    PTELEP
          RESET     PTELEP
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PTELEP   * private phone
.
DPRTEL99  RETURN
.***************************************************************************
DBSTEL00  RESET     PTELEB,OPSCSIZE
          LENSET    PTELEB
          RESET     PTELEB
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PTELEB   * business phone
.
DBSTEL99  RETURN
.***************************************************************************
DGENDE00  RESET     PSEX,OPSCSIZE
          LENSET    PSEX
          RESET     PSEX
.
.* ****************************************** Start of Changes         *C-49016
          MOVE      PSEX,DSEXCHAR
          CALL      SEXDSC00                * get sex description (in IBACOMN)
.                                           *       returns DSEXDESC & DSEXNO
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,DSEXDESC     * sex
.* ******************************************   End of Changes         *C-49016
.
DGENDE99  RETURN
.***************************************************************************
DMARST00  COMPARE   ZERO,OPSCKCOL
          GOTO      DMARST50 IF EQUAL       * dont display code
.  
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PMSTAT
.
DMARST50  MOVE      "M ",TCODE
          MOVE      PMSTAT,ACODE
          CALL      DTHCD000
.
DMARST99  RETURN
.***************************************************************************
DDTBIR00  MATCH     SP8,PBDATE
          GOTO      DDTBIR99 IF EQUAL       * no date to display
.
          UNPACK    PBDATE,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          REP       " 0",CPCDATE
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,CPCDATE   * date of birth
.
DDTBIR99  RETURN
.***************************************************************************
DCOUNT00  COMPARE   ZERO,OPSCKCOL
          GOTO      DCOUNT50 IF EQUAL       * dont display code
.  
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PCONT
.
DCOUNT50  MOVE      "C ",TCODE
          MOVE      PCONT,ACODE
          CALL      DTHCD000
.
DCOUNT99  RETURN
.***************************************************************************
DRELIG00  COMPARE   ZERO,OPSCKCOL
          GOTO      DRELIG50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PREG
.
DRELIG50  MOVE      "R ",TCODE
          MOVE      PREG,ACODE
          CALL      DTHCD000
.
DRELIG99  RETURN
.***************************************************************************
DRESTA00  COMPARE   ZERO,OPSCKCOL
          GOTO      DRESTA50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PTYPE
.
DRESTA50  MOVE      "T ",TCODE
          MOVE      PTYPE,ACODE
          CALL      DTHCD000
.
DRESTA99  RETURN
.***************************************************************************
DOCCUP00  RESET     POCCUP,OPSCSIZE
          LENSET    POCCUP
          RESET     POCCUP
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,POCCUP   * occupation
.
DOCCUP99  RETURN
.***************************************************************************
DMEDCA00  RESET     PMEDI,OPSCSIZE
          LENSET    PMEDI
          RESET     PMEDI
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PMEDI    * medicare number
.
DMEDCA99  RETURN
.***************************************************************************
DMEDRF00  RESET     PTMXMCCD,OPSCSIZE
          LENSET    PTMXMCCD
          RESET     PTMXMCCD
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PTMXMCCD  * medicare Ref.no.
.
DMEDRF99  RETURN
.***************************************************************************
DMEDXD00  MATCH     SP8,PMPXMEDC
          GOTO      DMEDXD99 IF EQUAL       * no date to display
.
          UNPACK    PMPXMEDC,CCENT,CYEAR,CMON,CDAY
          PACK      CPCDATE,CDAY,SLASH,CMON,SLASH,CCENT,CYEAR,SP70
          REP       " 0",CPCDATE
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,CPCDATE    * medicare exp.date
.
DMEDXD99  RETURN
.***************************************************************************
DPENSN00  RESET     PPENNO,OPSCSIZE
          LENSET    PPENNO
          RESET     PPENNO
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PPENNO   * pension number
.
DPENSN99  RETURN
.***************************************************************************
DPENEX00  RESET     PMEDI,OPSCSIZE
          LENSET    PMEDI
          RESET     PMEDI
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PMEDI    * medicare number
.
DPENEX99  RETURN
.***************************************************************************
DREPAT00  RESET     PREPAT,OPSCSIZE
          LENSET    PREPAT
          RESET     PREPAT
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PREPAT   * repratriation no.
.
DREPAT99  RETURN
.***************************************************************************
DLOCDO00  RESET     PLOCDOC,OPSCSIZE
          LENSET    PLOCDOC
          RESET     PLOCDOC
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PLOCDOC  * local doctor
.
DLOCDO99  RETURN
.***************************************************************************
DHLFUN00  COMPARE   ZERO,OPSCKCOL
          GOTO      DHLFUN50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PFUNDH
.
DHLFUN50  COMPARE   ZERO,OPSCSIZE
          GOTO      DHLFUN99 IF EQUAL       * dont want to display description
.
          MOVE      SP30,HFNAME             * clear description
.
          MATCH     SP6,PFUNDH
          GOTO      DHLFUN99 IF EQUAL       * no code to display
.
          PACK      KEY14,PFUNDH,ZERO,ZERO,ZERO,ZERO,SP10
          OPEN      PATFN1A1,"patfn1af"
          CALL      RDFUND1                 * read fund file
          CLOSE     PATFN1A1
.
          RESET     HFNAME,OPSCSIZE
          LENSET    HFNAME
          RESET     HFNAME
.
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,HFNAME          * Health fund name
.
DHLFUN99  RETURN
.***************************************************************************
DFUNTB00  COMPARE   ZERO,OPSCKCOL
          GOTO      DFUNTB50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PFNDTB
.
DFUNTB50  COMPARE   ZERO,OPSCSIZE
          GOTO      DFUNTB99 IF EQUAL       * dont want to display description
.
          MOVE      SP30,HFNAME             * clear description
.
          MATCH     SP8,PFNDTB
          GOTO      DFUNTB99 IF EQUAL       * no code to display
.
          PACK      KEY14,PFUNDH,PFNDTB
          OPEN      PATFN1A1,"patfn1af"
          CALL      RDFUND1                 * read fund file
          CLOSE     PATFN1A1
.
          RESET     HFNAME,OPSCSIZE
          LENSET    HFNAME
          RESET     HFNAME
.
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,HFNAME          * Health table name
.
DFUNTB99  RETURN
.***************************************************************************
DFUNDN00  RESET     PFNDMM,OPSCSIZE
          LENSET    PFNDMM
          RESET     PFNDMM
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PFNDMM   * fund number
.
DFUNDN99  RETURN
.*******************************************************************************
DUSONE00  COMPARE   ZERO,OPSCKCOL
          GOTO      DUSONE50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PUSR1
.
DUSONE50  MOVE      "P1",TCODE
          MOVE      PUSR1,ACODE
          CALL      DTHCD000
.
DUSONE99  RETURN
.***************************************************************************
DUSTWO00  COMPARE   ZERO,OPSCKCOL
          GOTO      DUSTWO50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PUSR2
.
DUSTWO50  MOVE      "P2",TCODE
          MOVE      PUSR2,ACODE
          CALL      DTHCD000
.
DUSTWO99  RETURN
.***************************************************************************
DUSTHR00  COMPARE   ZERO,OPSCKCOL
          GOTO      DUSTHR50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PUSR3
.
DUSTHR50  MOVE      "P3",TCODE
          MOVE      PUSR3,ACODE
          CALL      DTHCD000
.
DUSTHR99  RETURN
.***************************************************************************
DUSFOU00  COMPARE   ZERO,OPSCKCOL
          GOTO      DUSFOU50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PUSR4
.
DUSFOU50  MOVE      "P4",TCODE
          MOVE      PUSR4,ACODE
          GOTO      DUSFOU99 IF EQUAL       * no code to display
.
DUSFOU99  RETURN
.***************************************************************************
DUSFIV00  COMPARE   ZERO,OPSCKCOL
          GOTO      DUSFIV50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PUSR5
.
DUSFIV50  MOVE      "P5",TCODE
          MOVE      PUSR5,ACODE
          CALL      DTHCD000
.
DUSFIV99  RETURN
.***************************************************************************
DUSSIX00  COMPARE   ZERO,OPSCKCOL
          GOTO      DUSSIX50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,PUSR6
.
DUSSIX50  MOVE      "P6",TCODE
          MOVE      PUSR6,ACODE
          CALL      DTHCD000
.
DUSSIX99  RETURN
.***************************************************************************
DYEARR00  MOVE      TDESC,PYRRES
          RESET     TDESC,OPSCSIZE
          LENSET    TDESC
          RESET     TDESC
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PYRRES   * years resident
.
DYEARR99  RETURN
.***************************************************************************
DNOKNA00  RESET     PNKNAME,OPSCSIZE
          LENSET    PNKNAME
          RESET     PNKNAME
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKNAME  * next of kin name
.
DNOKNA99  RETURN
.***************************************************************************
DNOKOA00  RESET     PNKADD1,OPSCSIZE
          LENSET    PNKADD1
          RESET     PNKADD1
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKADD1  * next of kin add1
.
DNOKOA99  RETURN
.***************************************************************************
DNOKTA00  RESET     PNKADD2,OPSCSIZE
          LENSET    PNKADD2
          RESET     PNKADD2
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKADD2  * next of kin add2
.
DNOKTA99  RETURN
.***************************************************************************
DNOKSU00  RESET     PNKSUBR,OPSCSIZE
          LENSET    PNKSUBR
          RESET     PNKSUBR
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKSUBR  * next of kin suburb
.
DNOKSU99  RETURN
.***************************************************************************
DNOKPO00  RESET     PNKPOST,OPSCSIZE
          LENSET    PNKPOST
          RESET     PNKPOST
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKPOST  * next of kin post
.
DNOKPO99  RETURN
.***************************************************************************
DNOKTP00  RESET     PNKTELP,OPSCSIZE
          LENSET    PNKTELP
          RESET     PNKTELP
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKTELP  * NOK private phone
.
DNOKTP99  RETURN
.***************************************************************************
DNOKTB00  RESET     PNKTELB,OPSCSIZE
          LENSET    PNKTELB
          RESET     PNKTELB
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKTELB  * NOK business phone
.
DNOKTB99  RETURN
.***************************************************************************
DNOKRE00  RESET     PNKRELP,OPSCSIZE
          LENSET    PNKRELP
          RESET     PNKRELP
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,PNKRELP  * NOK relationship
.
DNOKRE99  RETURN
.
. --------------------------------------------
. ------- Booking Variables - BOKRC1FD -------
. --------------------------------------------
.
DATTDO00  COMPARE   ZERO,OPSCKCOL
          GOTO      DATTDO50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREADOC
          PACK      VAR,BKREADOC,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DATTDO50  MOVE      BKREADOC,KEY6
          CALL      DTHDC000
.
DATTDO99  RETURN
.***************************************************************************
DREFDO00  COMPARE   ZERO,OPSCKCOL
          GOTO      DREFDO50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKRESDOC
          PACK      VAR,BKRESDOC,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DREFDO50  MOVE      BKRESDOC,KEY6
          CALL      DTHDC000
.
DREFDO99  RETURN
.***************************************************************************
DFUNME00  SETLPTR   BKREOMEM,OPSCSIZE
          RESET     BKREOMEM
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,BKREOMEM * 
          PACK      VAR,BKREOMEM,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DFUNME99  RETURN
.***************************************************************************
DPRVIN00  PACK      VAR,BKREPREV,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR * previous visits
          MOVE      VAR,PRINTVAR
.
DPRVIN99  RETURN
.***************************************************************************
DPREAC00  COMPARE   ZERO,OPSCKCOL
          GOTO      DPREAC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREACCM
          PACK      VAR,BKREACCM,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DPREAC50  MOVE      "BP",TCODE
          MOVE      BKREACCM,ACODE
          CALL      DTHCD000
.
DPREAC99  RETURN
.***************************************************************************
DDUEDT00  MATCH     SP8,BKREEDAT
          GOTO      DDUEDT99 IF EQUAL
.
          UNPACK    BKREEDAT,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          REP       " 0",CPCDATE
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,CPCDATE     * exp due date
          PACK      VAR,CPCDATE,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDUEDT99  RETURN
.***************************************************************************
DPASDT00  MATCH     SP8,BKREPDAT
          GOTO      DPASDT99 IF EQUAL       * no date to display
.
          UNPACK    BKREPDAT,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          REP       " 0",CPCDATE
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,CPCDATE     * pre-assessment date
          PACK      VAR,CPCDATE,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DPASDT99  RETURN
.***************************************************************************
DDUETM00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREATIM    * exp ass. time
          PACK      VAR,BKREATIM,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDUETM99  RETURN
.***************************************************************************
DPASTM00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREPTIM    * pre-ass. time
          PACK      VAR,BKREPTIM,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DPASTM99  RETURN
.***************************************************************************
DEXPWD00  COMPARE   ZERO,OPSCKCOL
          GOTO      DEXPWD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREWARD
          PACK      VAR,BKREWARD,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DEXPWD50  COMPARE   ZERO,OPSCSIZE
          GOTO      DEXPWD99 IF EQUAL       * dont want to display description
.
          MATCH     SP3,BKREWARD
          GOTO      DEXPWD99 IF EQUAL       * no code to display
.
          MOVE      "Invalid Code",WBDESC
          PACK      KEY6,BKREWARD,SP3
          CALL      RDWARD1                 * read ward file
.
          PACK      VAR,WBDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR          * Ward
          MOVE      VAR,PRINTVAR
.
DEXPWD99  RETURN
.***************************************************************************
DBKCLS00  COMPARE   ZERO,OPSCKCOL
          GOTO      DBKCLS50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKRECLSS
          PACK      VAR,BKRECLSS,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DBKCLS50  MOVE      "P ",TCODE
          MOVE      BKRECLSS,ACODE
          CALL      DTHCD000
.
DBKCLS99  RETURN
.***************************************************************************
DBKATP00  COMPARE   ZERO,OPSCKCOL
          GOTO      DBKATP50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREATYP
          PACK      VAR,BKREATYP,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DBKATP50  MOVE      "A ",TCODE
          MOVE      BKREATYP,ACODE
          CALL      DTHCD000
.
DBKATP99  RETURN
.***************************************************************************
DBKDPT00  COMPARE   ZERO,OPSCKCOL
          GOTO      DBKDPT50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREDEPT
          PACK      VAR,BKREDEPT,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DBKDPT50  MOVE      "AC",TCODE
          MOVE      BKREDEPT,ACODE
          CALL      DTHCD000
.
DBKDPT99  RETURN
.***************************************************************************
DASSDO00  COMPARE   ZERO,OPSCKCOL
          GOTO      DASSDO50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKRETDOC
          PACK      VAR,BKRETDOC,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DASSDO50  MOVE      BKRETDOC,KEY6
          CALL      DTHDC000
.
DASSDO99  RETURN
.******************************************************************************
DBKCLT00  COMPARE   ZERO,OPSCKCOL
          GOTO      DBKCLT50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKRECLMT
          PACK      VAR,BKRECLMT,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DBKCLT50  MOVE      "CL",TCODE
          MOVE      BKRECLMT,ACODE
          CALL      DTHCD000
.
DBKCLT99  RETURN
.
.******************************************************************************
.         expected ward and bed - BKREWARD/BKREEBED
.******************************************************************************
DBKEBD00  COMPARE   ZERO,OPSCKCOL
          GOTO      DBKEBD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREWARD;
          PACK      VAR,BKREWARD,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DBKEBD50  MOVE      SP20,WBDESC             * clear description
          MATCH     SP3,BKREEBED
          GOTO      DBKEBD80 IF EQUAL       * no bed to display
.
          DISPLAY   "/",*V2LON,BKREEBED
          MOVE      "/",ANS
          PACK      VAR,BKREWARD,ANS,BKREEBED,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DBKEBD80  COMPARE   ZERO,OPSCSIZE
          GOTO      DBKEBD99 IF EQUAL       * dont want to display description
.
          MOVE      "Invalid Code",WBDESC
          PACK      KEY6,BKREWARD,BKREEBED
          CALL      RDWARD1                 * read ward file
.
          PACK      VAR,WBDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR          * Ward
          MOVE      VAR,PRINTVAR
.
DBKEBD99  RETURN
.****************************************************************************
DREFGP00  COMPARE   ZERO,OPSCKCOL
          GOTO      DREFGP50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKRERFGP
          PACK      VAR,BKRERFGP,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DREFGP50  COMPARE   ZERO,OPSCSIZE
          GOTO      DREFGP99 IF EQUAL       * dont want to display description
.
          PACK      PACFNAME,SP30,SP30,SP5  * clear description
.
          MATCH     SP8,BKRERFGP
          GOTO      DREFGP99 IF EQUAL       * no code to display
.
          PACK      KEY10,BKRERFGP,SP70
          CALL      RDPMHCP1                * read doctor file
          BRANCH    OVRCD,DREFGP99          * invalid code
.
          MOVE      PMHCSNAM,PACFNAME
          STRIP     PACFNAME
          ENDSET    PACFNAME
          APPEND    SP1,PACFNAME
          APPEND    PMHCGNAM,PACFNAME
.
          PACK      VAR,PACFNAME,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * Referring GP
          MOVE      VAR,PRINTVAR
.
DREFGP99  RETURN
.****************************************************************************
DGPPCD00  COMPARE   ZERO,OPSCKCOL
          GOTO      DGPPCD50 IF EQUAL       * dont want to display code
.
          MOVE      "-",ANS
          MATCH     SP2,BKREGPPT
          IF        @EQUAL
            MOVE      SP1,ANS
          ENDIF
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREGPPC,ANS,BKREGPPT
          PACK      VAR,BKREGPPC,ANS,BKREGPPT,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DGPPCD50  COMPARE   ZERO,OPSCSIZE
          GOTO      DGPPCD99 IF EQUAL       * dont want to display description
.
          PACK      PMHGPNAM,SP30,SP30,SP5  * clear description
          MATCH     SP6,BKREGPPC
          GOTO      DGPPCD99 IF EQUAL       * no code to display
.
          PACK      KEY10,BKREGPPC,SP70
          PACK      KEY12,KEY10,BKREGPPT,SP70
          CALL      RDPMHCG1                * read doctor file
          BRANCH    OVRCD,DGPPCD99          * invalid code
.
          MOVE      PMHGPNAM,PACFNAME
          PACK      VAR,PACFNAME,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * GP practice code
          MOVE      VAR,PRINTVAR
.
DGPPCD99  RETURN
.***************************************************************************
DGPFHN00  PACK      VAR,BKREGPFA,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR  * GPFH Approval #
          MOVE      VAR,PRINTVAR
.
DGPFHN99  RETURN
.***************************************************************************
DRESID00  COMPARE   ZERO,OPSCKCOL
          GOTO      DRESID50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKRERESI
          PACK      VAR,BKRERESI,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DRESID50  MOVE      "T ",TCODE
          MOVE      BKRERESI,ACODE
          CALL      DTHCD000
.
DRESID99  RETURN
.***************************************************************************
DELADT00  COMPARE   ZERO,OPSCKCOL
          GOTO      DELADT50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREEATY
          PACK      VAR,BKREEATY,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DELADT50  MOVE      "CC",TCODE
          MOVE      BKREEATY,ACODE
          CALL      DTHCD000
.
DELADT99  RETURN
+
.***************************************************************************
DECRAP00  PACK      VAR,BKREECRA,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR      * ECR Approval #
          MOVE      VAR,PRINTVAR
.
DECRAP99  RETURN
.
.*********************************************************************
.         district of residence
.***************************************************************************
DBDOFR00  COMPARE   ZERO,OPSCKCOL
          GOTO      DBDOFR50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREDOFR
          PACK      VAR,BKREDOFR,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DBDOFR50  MOVE      "DA",TCODE
          MOVE      BKREDOFR,ACODE
          CALL      DTHCD000
.
DBDOFR99  RETURN
.****************************************************************************
DGPNPR00  COMPARE   ZERO,OPSCKCOL
          GOTO      DGPNPR50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKRERFGP
          PACK      VAR,BKRERFGP,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DGPNPR50  COMPARE   ZERO,OPSCSIZE
          GOTO      DREFGP99 IF EQUAL       * dont want to display description
.
          PACK      PACFNAME,SP30,SP30,SP5  * clear description
.
          MATCH     SP8,BKRERFGP
          GOTO      DGPNPR99 IF EQUAL       * no code to display
.
          PACK      KEY10,BKRERFGP,SP70
          CALL      RDPMHCP1                * read doctor file
          BRANCH    OVRCD,DGPNPR99          * invalid code
.
          MOVE      PMHCSNAM,PACFNAME
          STRIP     PACFNAME
          ENDSET    PACFNAME
          APPEND    SP1,PACFNAME
          APPEND    PMHCGNAM,PACFNAME
.
          PACK      VAR,PACFNAME,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * Referring GP
          MOVE      VAR,PRINTVAR
.
DGPNPR99  RETURN
.
. ------------------------------------------------------
. ------- Operation Details Variables - OPRDEAFD -------
. ------------------------------------------------------
.
DEXPDU00  COMPARE   ZERO,OPDAEXPD
          GOTO      DEXPDU99 IF EQUAL       * dur is zero so dont display
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,OPDAEXPD    * expected dur'n
          PACK      VAR,OPDAEXPD,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DEXPDU99  RETURN
.***************************************************************************
DTRANS00  COMPARE   ZERO,OPSCKCOL
          GOTO      DTRANS50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDATRAN
          PACK      VAR,OPDATRAN,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DTRANS50  MOVE      "OR",TCODE
          MOVE      OPDATRAN,ACODE
          CALL      DTHCD000
.
DTRANS99  RETURN
.***************************************************************************
DANAEC00  COMPARE   ZERO,OPSCKCOL
          GOTO      DANAEC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAANAE
          PACK      VAR,OPDAANAE,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DANAEC50  MOVE      "OA",TCODE
          MOVE      OPDAANAE,ACODE
          CALL      DTHCD000
.
DANAEC99  RETURN
.***************************************************************************
DOPTYP00  COMPARE   ZERO,OPSCKCOL
          GOTO      DOPTYP50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDATYPE
          PACK      VAR,OPDATYPE,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DOPTYP50  MOVE      "OY",TCODE
          MOVE      OPDATYPE,ACODE
          CALL      DTHCD000
.
DOPTYP99  RETURN
.***************************************************************************
DSTTIM00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,OPDAEXPS   * expected start
          PACK      VAR,OPDAEXPS,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DSTTIM99  RETURN
.***************************************************************************
DDA1US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDA1US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAUSR1
          PACK      VAR,OPDAUSR1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDA1US50  MOVE      "Y6",TCODE
          MOVE      OPDAUSR1,ACODE
          CALL      DTHCD000
.
DDA1US99  RETURN
.***************************************************************************
DDA2US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDA2US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAUSR2
          PACK      VAR,OPDAUSR2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDA2US50  MOVE      "Y7",TCODE
          MOVE      OPDAUSR2,ACODE
          CALL      DTHCD000
.
DDA2US99  RETURN
.***************************************************************************
DDA3US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDA3US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAUSR3
          PACK      VAR,OPDAUSR3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDA3US50  MOVE      "Y8",TCODE
          MOVE      OPDAUSR3,ACODE
          CALL      DTHCD000
.
DDA3US99  RETURN
.***************************************************************************
DDA4US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDA4US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAUSR4
          PACK      VAR,OPDAUSR4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDA4US50  MOVE      "Y9",TCODE
          MOVE      OPDAUSR4,ACODE
          CALL      DTHCD000
.
DDA4US99  RETURN
.***************************************************************************
DPR1TM00  MOVE      SP10,KEY9
          MATCH     SP9,OPDAPROV
          GOTO      DPR1TM99 IF EQUAL       * No item to display
.
          COMPARE   ZERO,OPSCKCOL
          GOTO      DPR1TM50 IF EQUAL       * Dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPROV    * Provisional item
          PACK      VAR,OPDAPROV,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DPR1TM50  COMPARE   ZERO,OPSCSIZE
          GOTO      DPR1TM99 IF EQUAL       * Dont want to display description
.
          PACK      KEY9,OPDAPROV
          IF        OPCNCODE=1
            CALL      RDITEM1               * Read MBS code file
            BRANCH    OVRCD,DPR1TM99
          ELSE
            CALL      RDICO1                * Read ICD operation file
            BRANCH    OVRCD,DPR1TM99
            MOVE      ODESC,IDESC           * Set up description
          ENDIF
.
          PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR   * Display desc
          MOVE      VAR,PRINTVAR
.
DPR1TM99  RETURN
.***************************************************************************
DPR2TM00  MATCH     SP9,OPDAPRV2
          GOTO      DPR2TM99 IF EQUAL       * No code to display
.
          COMPARE   ZERO,OPSCKCOL
          GOTO      DPR2TM50 IF EQUAL       * Dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPRV2   * Provisional item
          PACK      VAR,OPDAPRV2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DPR2TM50  COMPARE   ZERO,OPSCSIZE
          GOTO      DPR2TM99 IF EQUAL       * Dont want to display description
.
          PACK      KEY9,OPDAPRV2
          IF        OPCNCODE=1
            CALL      RDITEM1               * Read MBS code file
            BRANCH    OVRCD,DPR2TM99
          ELSE
            CALL      RDICO1                * Read ICD operation file
            BRANCH    OVRCD,DPR2TM99
            MOVE      ODESC,IDESC           * Set up description
          ENDIF
.
          PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR   * Display desc
          MOVE      VAR,PRINTVAR
.
DPR2TM99  RETURN
.***************************************************************************
DPR3TM00  MATCH     SP9,OPDAPRV3
          GOTO      DPR3TM99 IF EQUAL       * No code to display
.
          COMPARE   ZERO,OPSCKCOL
          GOTO      DPR3TM50 IF EQUAL       * Dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPRV3    * Provisional item
          PACK      VAR,OPDAPRV3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DPR3TM50  COMPARE   ZERO,OPSCSIZE
          GOTO      DPR3TM99 IF EQUAL       * Dont want to display description
.
          PACK      KEY9,OPDAPRV3
          IF        OPCNCODE=1
            CALL      RDITEM1               * Read MBS code file
            BRANCH    OVRCD,DPR3TM99
          ELSE
            CALL      RDICO1                * Read ICD operation file
            BRANCH    OVRCD,DPR3TM99
            MOVE      ODESC,IDESC           * Set up description
          ENDIF
.
          PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * Display Code
          MOVE      VAR,PRINTVAR
.
DPR3TM99  RETURN
.
.***************************************************************************
.         Operation Description 1
.***************************************************************************
DOP1DS00  PACK      VAR,OPDADES1,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR      * Op desc 1
          MOVE      VAR,PRINTVAR
.
DOP1DS99  RETURN
.***************************************************************************
.         Operation Description 2
.***************************************************************************
DOP2DS00  PACK      VAR,OPDADES2,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR      * Op desc 2
          MOVE      VAR,PRINTVAR
.
DOP2DS99  RETURN
.***************************************************************************
.         Operation Description 3
.***************************************************************************
DOP3DS00  PACK      VAR,OPDADES3,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR      * Op desc 3
          MOVE      VAR,PRINTVAR
.
DOP3DS99  RETURN
.
.***************************************************************************
.         Operation Comments
.***************************************************************************
DOPCOM00  PACK      VAR,OPDACOMM,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR    * comments
          MOVE      VAR,PRINTVAR
.
DOPCOM99  RETURN
.
.***************************************************************************
.         Pre-operation times 1 - 5
.***************************************************************************
DOP1PR00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPRE1    * pre-op time 1
          PACK      VAR,OPDAPRE1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP1PR99  RETURN
.
DOP2PR00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPRE2    * pre-op time 2
          PACK      VAR,OPDAPRE2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP2PR99  RETURN
.
DOP3PR00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPRE3    * pre-op time 3
          PACK      VAR,OPDAPRE3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP3PR99  RETURN
.
DOP4PR00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPRE4    * pre-op time 4
          PACK      VAR,OPDAPRE4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP4PR99  RETURN
.
DOP5PR00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPRE5    * pre-op time 5
          PACK      VAR,OPDAPRE5,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP5PR99  RETURN
.
.***************************************************************************
.         Post operation times 1-5
.***************************************************************************
DOP1PS00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPOS1    * post-op time 1
          PACK      VAR,OPDAPOS1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP1PS99  RETURN
.
DOP2PS00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPOS2    * post-op time 2
          PACK      VAR,OPDAPOS2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP2PS99  RETURN
.
DOP3PS00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPOS3    * post-op time 3
          PACK      VAR,OPDAPOS3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP3PS99  RETURN
.
DOP4PS00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAPOS4    * post-op time 4
          PACK      VAR,OPDAPOS4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DOP4PS99  RETURN
.
.***************************************************************************
.         Duration in theatre
.***************************************************************************
DDADUR00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDATDUR    * duration in theatre
          PACK      VAR,OPDATDUR,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DDADUR99  RETURN
.
.***************************************************************************
.         Known Infection
.***************************************************************************
DDAKNW00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDAKNW50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDAKNOW
          PACK      VAR,OPDAKNOW,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDAKNW50  MOVE      "OK",TCODE
          MOVE      OPDAKNOW,ACODE
          CALL      DTHCD000
.
DDAKNW99  RETURN
.
.***************************************************************************
.         Operation Room
.***************************************************************************
DDATHT00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDATHT50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDATHET
          PACK      VAR,OPDATHET,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDATHT50  COMPARE   ZERO,OPSCSIZE
          GOTO      DDATHT99 IF EQUAL       * dont want to display description
.
          MATCH     SP6,OPDATHET
          GOTO      DDATHT99 IF EQUAL       * no code to display
.
          MOVE      "Invalid Code",OPRMDESC
          MOVE      OPDATHET,KEY6
          CALL      RDOPOPR1                * read operating room file
.
          PACK      VAR,OPRMDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR        * operating room 
          MOVE      VAR,PRINTVAR
.
DDATHT99  RETURN
.
.***************************************************************************
.         Cancellation Reason
.***************************************************************************
DDACNC00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDACNC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDACANC
          PACK      VAR,OPDACANC,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDACNC50  MOVE      "SC",TCODE
          MOVE      OPDACANC,ACODE
          CALL      DTHCD000
.
DDACNC99  RETURN
.
. -------------------------------------------------
. ------- Operation Usage details - OPRDECFD ------
. -------------------------------------------------
.
.*********************************************************************
.         Operation times 1-4
.*********************************************************************
D1COTM00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCOTM1    * Op time 1
          PACK      VAR,OPDCOTM1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D1COTM99  RETURN
.
D2COTM00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCOTM2    * Op time 2
          PACK      VAR,OPDCOTM2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D2COTM99  RETURN
.
D3COTM00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCOTM3    * Op time 3
          PACK      VAR,OPDCOTM3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D3COTM99  RETURN
.
D4COTM00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCOTM4    * Op time 4
          PACK      VAR,OPDCOTM4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D4COTM99  RETURN
.
.*********************************************************************
.         ICD-9 / MBS codes 1-6
.*********************************************************************
D1CICD00  COMPARE   ZERO,OPSCKCOL
          GOTO      D1CICD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCICD1
          PACK      VAR,OPDCICD1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D1CICD50  COMPARE   ZERO,OPSCSIZE
          GOTO      D1CICD99 IF EQUAL       * dont want to display description
.
          BRANCH    OPCNCODE,D1CICD55
.
          MOVE      OPDCICD1,KEY9
          CALL      RDICO1
          BRANCH    OVRCD,D1CICD99                * ICD9CM code
          MOVE      ODESC,IDESC
          GOTO      D1CICD60
.
.         MBS code
.
D1CICD55  MOVE      OPDCICD1,KEY9
          CALL      RDITEM1
          BRANCH    OVRCD,D1CICD99
.
D1CICD60  PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * MBS/ICD 1
          MOVE      VAR,PRINTVAR
.
D1CICD99  RETURN
.*************************************************************************
D2CICD00  COMPARE   ZERO,OPSCKCOL
          GOTO      D2CICD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCICD2
          PACK      VAR,OPDCICD2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D2CICD50  COMPARE   ZERO,OPSCSIZE
          GOTO      D2CICD99 IF EQUAL       * dont want to display description
.
          BRANCH    OPCNCODE,D2CICD55
.
          MOVE      OPDCICD2,KEY9
          CALL      RDICO1
          BRANCH    OVRCD,D2CICD99          * ICD9CM code
          MOVE      ODESC,IDESC
          GOTO      D2CICD60
.
.         MBS code
.
D2CICD55  MOVE      OPDCICD2,KEY9
          CALL      RDITEM1
          BRANCH    OVRCD,D2CICD99
.
D2CICD60  PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * MBS/ICD 2
          MOVE      VAR,PRINTVAR
.
D2CICD99  RETURN
.*************************************************************************
D3CICD00  COMPARE   ZERO,OPSCKCOL
          GOTO      D3CICD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCICD3
          PACK      VAR,OPDCICD3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D3CICD50  COMPARE   ZERO,OPSCSIZE
          GOTO      D3CICD99 IF EQUAL       * dont want to display description
.
          BRANCH    OPCNCODE,D3CICD55
          MOVE      OPDCICD3,KEY9
          CALL      RDICO1
          BRANCH    OVRCD,D3CICD99          * ICD9CM code
          MOVE      ODESC,IDESC
          GOTO      D3CICD60
.
.         MBS code
.
D3CICD55  MOVE      OPDCICD3,KEY9
          CALL      RDITEM1
          BRANCH    OVRCD,D3CICD99
.
D3CICD60  PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * MBS/ICD 3
          MOVE      VAR,PRINTVAR
.
D3CICD99  RETURN
.*************************************************************************
D4CICD00  COMPARE   ZERO,OPSCKCOL
          GOTO      D4CICD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCICD4
          PACK      VAR,OPDCICD4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D4CICD50  COMPARE   ZERO,OPSCSIZE
          GOTO      D4CICD99 IF EQUAL       * dont want to display description
.
          BRANCH    OPCNCODE,D4CICD55
          MOVE      OPDCICD4,KEY9
          CALL      RDICO1
          BRANCH    OVRCD,D4CICD99          * ICD9CM code
          MOVE      ODESC,IDESC
          GOTO      D4CICD60
.
.         MBS code
.
D4CICD55  MOVE      OPDCICD4,KEY9
          CALL      RDITEM1
          BRANCH    OVRCD,D4CICD99
.
D4CICD60  PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * MBS/ICD 4
          MOVE      VAR,PRINTVAR
.
D4CICD99  RETURN
.*************************************************************************
D5CICD00  COMPARE   ZERO,OPSCKCOL
          GOTO      D5CICD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCICD5
          PACK      VAR,OPDCICD5,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D5CICD50  COMPARE   ZERO,OPSCSIZE
          GOTO      D5CICD99 IF EQUAL       * dont want to display description
.
          BRANCH    OPCNCODE,D5CICD55
          MOVE      OPDCICD5,KEY9
          CALL      RDICO1
          BRANCH    OVRCD,D5CICD99
          MOVE      ODESC,IDESC
          GOTO      D5CICD60
.
.         MBS code
.
D5CICD55  MOVE      OPDCICD5,KEY9
          CALL      RDITEM1
          BRANCH    OVRCD,D5CICD99
.
D5CICD60  PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * MBS/ICD 5
          MOVE      VAR,PRINTVAR
.
D5CICD99  RETURN
.*************************************************************************
D6CICD00  COMPARE   ZERO,OPSCKCOL
          GOTO      D6CICD50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCICD6
          PACK      VAR,OPDCICD6,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D6CICD50  COMPARE   ZERO,OPSCSIZE
          GOTO      D6CICD99 IF EQUAL       * dont want to display description
.
          BRANCH    OPCNCODE,D6CICD55
          MOVE      OPDCICD6,KEY9
          CALL      RDICO1
          BRANCH    OVRCD,D6CICD99
          MOVE      ODESC,IDESC
          GOTO      D6CICD60
.
.         MBS code
.
D6CICD55  MOVE      OPDCICD6,KEY9
          CALL      RDITEM1
          BRANCH    OVRCD,D6CICD99
.
D6CICD60  PACK      VAR,IDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    * MBS/ICD 6
          MOVE      VAR,PRINTVAR
.
D6CICD99  RETURN
.
.*********************************************************************
.         Count Correct   
.*********************************************************************
DDCCNT00  MATCH     "1",OPDCCONT           
          GOTO      DDCCNT50 IF NOT EQUAL
.
          MOVE      "Yes",KEY3
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,KEY3 
          GOTO      DDCCNT95
.
DDCCNT50  MOVE      "No ",KEY3
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,KEY3
.
DDCCNT95  PACK      VAR,KEY3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDCCNT99  RETURN
.
.*********************************************************************
.         Operation Duration
.*********************************************************************
DDCDUR00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCDURA
          PACK      VAR,OPDCDURA,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DDCDUR99  RETURN
.
.*********************************************************************
.         Number of Operations
.*********************************************************************
DCNOOP00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCNOOP
          PACK      VAR,OPDCNOOP,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DCNOOP99  RETURN
.
.*************************************************************************
.         Implant Codes 1- 10
.*************************************************************************
D1CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D1CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC1
          PACK      VAR,OPDCIMC1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D1CIMC50  MOVE      OPDCIMC1,KEY6
          CALL      DESCEX00                * Implant code 1
.
D1CIMC99  RETURN
.*************************************************************************
D2CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D2CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC2
          PACK      VAR,OPDCIMC2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D2CIMC50  MOVE      OPDCIMC2,KEY6
          CALL      DESCEX00                * Implant code 2
.
D2CIMC99  RETURN
.*************************************************************************
D3CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D3CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC3
          PACK      VAR,OPDCIMC3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D3CIMC50  MOVE      OPDCIMC3,KEY6
          CALL      DESCEX00                * Implant code 3
.
D3CIMC99  RETURN
.*************************************************************************
D4CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D4CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC4
          PACK      VAR,OPDCIMC4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D4CIMC50  MOVE      OPDCIMC4,KEY6
          CALL      DESCEX00                * Implant code 4
.
D4CIMC99  RETURN
.*************************************************************************
D5CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D5CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC5
          PACK      VAR,OPDCIMC5,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D5CIMC50  MOVE      OPDCIMC5,KEY6
          CALL      DESCEX00                * Implant code 5
.
D5CIMC99  RETURN
.*************************************************************************
D6CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D6CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC6
          PACK      VAR,OPDCIMC6,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D6CIMC50  MOVE      OPDCIMC6,KEY6
          CALL      DESCEX00                * Implant code 6
.
D6CIMC99  RETURN
.*************************************************************************
D7CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D7CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC7
          PACK      VAR,OPDCIMC7,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D7CIMC50  MOVE      OPDCIMC7,KEY6
          CALL      DESCEX00                * Implant code 7
.
D7CIMC99  RETURN
.*************************************************************************
D8CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D8CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC8
          PACK      VAR,OPDCIMC8,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D8CIMC50  MOVE      OPDCIMC8,KEY6
          CALL      DESCEX00                * Implant code 8
.
D8CIMC99  RETURN
.*************************************************************************
D9CIMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D9CIMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMC9
          PACK      VAR,OPDCIMC9,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D9CIMC50  MOVE      OPDCIMC9,KEY6
          CALL      DESCEX00                * Implant code 9
.
D9CIMC99  RETURN
.*************************************************************************
D10IMC00  COMPARE   ZERO,OPSCKCOL
          GOTO      D10IMC50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIM10
          PACK      VAR,OPDCIM10,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
D10IMC50  MOVE      OPDCIM10,KEY6
          CALL      DESCEX00                * Implant code 10
.
D10IMC99  RETURN
.
.*************************************************************************
.         IMPLANT QUANTITIES 1 - 10
.*************************************************************************
D1CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ1
          PACK      VAR,OPDCIMQ1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D1CIMQ99  RETURN
.
D2CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ2
          PACK      VAR,OPDCIMQ2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D2CIMQ99  RETURN
.
D3CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ3
          PACK      VAR,OPDCIMQ3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D3CIMQ99  RETURN
.
D4CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ4
          PACK      VAR,OPDCIMQ4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D4CIMQ99  RETURN
.
D5CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ5
          PACK      VAR,OPDCIMQ5,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D5CIMQ99  RETURN
.
D6CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ6
          PACK      VAR,OPDCIMQ6,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D6CIMQ99  RETURN
.
D7CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ7
          PACK      VAR,OPDCIMQ7,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D7CIMQ99  RETURN
.
D8CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ8
          PACK      VAR,OPDCIMQ8,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D8CIMQ99  RETURN
.
D9CIMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIMQ9
          PACK      VAR,OPDCIMQ9,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D9CIMQ99  RETURN
.
D10IMQ00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCIQ10
          PACK      VAR,OPDCIQ10,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
D10IMQ99  RETURN
.
.*************************************************************************
.         USER DEFINED FIELDS 1 - 8
.*************************************************************************
DDC1US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC1US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR1
          PACK      VAR,OPDCUSR1,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC1US50  MOVE      "Z1",TCODE
          MOVE      OPDCUSR1,ACODE
          CALL      DTHCD000
.
DDC1US99  RETURN
.***************************************************************************
DDC2US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC2US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR2
          PACK      VAR,OPDCUSR2,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC2US50  MOVE      "Z2",TCODE
          MOVE      OPDCUSR2,ACODE
          CALL      DTHCD000
.
DDC2US99  RETURN
.***************************************************************************
DDC3US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC3US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR3
          PACK      VAR,OPDCUSR3,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC3US50  MOVE      "Z3",TCODE
          MOVE      OPDCUSR3,ACODE
          CALL      DTHCD000
.
DDC3US99  RETURN
.***************************************************************************
DDC4US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC4US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR4
          PACK      VAR,OPDCUSR4,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC4US50  MOVE      "Z4",TCODE
          MOVE      OPDCUSR4,ACODE
          CALL      DTHCD000
.
DDC4US99  RETURN
.***************************************************************************
DDC5US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC5US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR5
          PACK      VAR,OPDCUSR5,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC5US50  MOVE      "Z5",TCODE
          MOVE      OPDCUSR5,ACODE
          CALL      DTHCD000
.
DDC5US99  RETURN
.***************************************************************************
DDC6US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC6US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR6
          PACK      VAR,OPDCUSR6,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC6US50  MOVE      "Z6",TCODE
          MOVE      OPDCUSR6,ACODE
          CALL      DTHCD000
.
DDC6US99  RETURN
.***************************************************************************
DDC7US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC7US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR7
          PACK      VAR,OPDCUSR7,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC7US50  MOVE      "Z7",TCODE
          MOVE      OPDCUSR7,ACODE
          CALL      DTHCD000
.
DDC7US99  RETURN
.***************************************************************************
DDC8US00  COMPARE   ZERO,OPSCKCOL
          GOTO      DDC8US50 IF EQUAL       * dont want to display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,OPDCUSR8
          PACK      VAR,OPDCUSR8,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
.
DDC8US50  MOVE      "Z8",TCODE
          MOVE      OPDCUSR8,ACODE
          CALL      DTHCD000
.
DDC8US99  RETURN
.
. ------------------------------------------------------
. ------- Booking Diagnosis variables - BOKDIAFD -------
. ------------------------------------------------------
.
DBKDIA00  SETLPTR   BKDICODE,OPSCSIZE
          RESET     BKDICODE
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,BKDICODE * diagnosis code
          PACK      VAR,BKDICODE,SP30,SP30,SP30
          MOVE      VAR,PRINTVAR
DBKDIA99  RETURN
.******************************************************************************
DBKDS100  PACK      VAR,BKDIDES1,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR      * Diagnosis desc 1
          MOVE      VAR,PRINTVAR
DBKDS199  RETURN
.******************************************************************************
DBKDS200  PACK      VAR,BKDIDES2,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR      * Diagnosis desc 2
          MOVE      VAR,PRINTVAR
DBKDS299  RETURN
.******************************************************************************
DBKCMM00  PACK      VAR,BKDICOMM,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,VAR      * Diagnosis desc 3
          MOVE      VAR,PRINTVAR
DBKCMM99  RETURN
.
.*******************************************************************
.*        gets the description for implant code  OPDCIMC(n)        *
.*        Para's  : KEY6          the implant code                 *
.*******************************************************************
DESCEX00  COMPARE   ZERO,OPSCKCOL
          GOTO      DESCEX25 IF EQUAL       * dont display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,KEY6
.
DESCEX25  COMPARE   ZERO,OPSCSIZE
          GOTO      DESCEX99 IF EQUAL       * dont want to display description
.
          PACK      OPEXDESC,SP30,SP30,SP10
          CALL      RDOPEXP1
.
          PACK      VAR,OPEXDESC
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR    
          MOVE      VAR,PRINTVAR
.
DESCEX99  RETURN
.
.*********************************************************************
.         display from codes file
.*********************************************************************
DTHCD000  COMPARE   ZERO,OPSCSIZE
          GOTO      DTHCD999 IF EQUAL       * dont want to display description
.
          PACK      ACODE,ACODE,SP3
          MATCH     SP3,ACODE
          GOTO      DTHCD999 IF EQUAL       * no code to display
.
          MOVE      "Invalid Code",TDESC
          PACK      KEY5,TCODE,ACODE
          CALL      RDCODE1                 * read codes file
.
          PACK      VAR,TDESC,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR
          MOVE      VAR,PRINTVAR
.
DTHCD999  RETURN
+
.*********************************************************************
.         display a doctor code
.*********************************************************************
DTHDC000  COMPARE   ZERO,OPSCSIZE
          GOTO      DTHDC999 IF EQUAL       * dont want to display description
.
          PACK      KEY6,KEY6,SP6
          MATCH     SP6,KEY6
          GOTO      DTHDC999 IF EQUAL       * no code to display
.
          MOVE      "Invalid Doctor",PACFNAME
          CALL      RDDOCT1                 * read doctor file
          BRANCH    OVRCD,DTHDC900          * invalid code
.
          MOVE      DSNAME,PACSNAME
          MOVE      DGNAME,PACGNAME
          MOVE      DTITL,PACTITLE
          MOVE      TWO,PACFRMT
          CALL      PACNAME
.
DTHDC900  PACK      VAR,PACFNAME,SP30,SP30,SP30
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR        * Attending Doctor
          MOVE      VAR,PRINTVAR
.
DTHDC999  RETURN
.***************************************************************************
DPOSDT00  MATCH     SP8,PTMXOSDT
          GOTO      DPOSDT99 IF EQUAL
. 
          UNPACK    PTMXOSDT,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          REP       " 0",CPCDATE
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,*+,CPCDATE   * date of birth
.
DPOSDT99  RETURN
.***************************************************************************
DBOPER00  COMPARE   ZERO,OPSCKCOL
          GOTO      DBOPER25 IF EQUAL       * dont display code
.
          DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREOPER
.
DBOPER25  COMPARE   ZERO,OPSCSIZE
          GOTO      DBOPER99 IF EQUAL       * dont want to display description
.
          MOVE      SP70,SECUSER
          MATCH     SP4,BKREOPER
          IF        !@EQUAL
            CALL      OPPASS1
            PACK      KEY4,BKREOPER,SP6
            CALL      RDPASS1  
          ENDIF
.
          PACK      VAR,SECUSER,SP70,SP10
          SETLPTR   VAR,OPSCSIZE
          RESET     VAR
          DISPLAY   *POPSCDSCL:OPSCDSRW,*+,VAR
          MOVE      VAR,PRINTVAR
.
DBOPER99  RETURN
.*********************************************************************
DEXLOS00  DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,BKREELOS     * exp length of stay
DEXLOS99  RETURN
.*********************************************************************
DKBKDT00  MATCH     SP8,BKREBKDT
          IF        !@EQUAL
            UNPACK    BKREBKDT,CCENT,CYEAR,CMON,CDAY
            CALL      PACDATE               * Format the booking date
            REP       " 0",CPCDATE
            DISPLAY   *POPSCKCOL:OPSCKROW,*V2LON,CPCDATE;
          ELSE
            DISPLAY   *POPSCKCOL:OPSCKROW,SP10;
          ENDIF
.
DKBKDT90  MOVE      ZERO,EXIT
DKBKDT99  RETURN
