.*****************************************************************************
.*    Program      : X00PMQVI                                                *
.*    Description  : Conversion pmsqviaf to new File layout                  *
.*                                                                           *
.*    Author       : J.Tan   TSK 0868813                                     *
.*    Date         :                                                         *
.*    Modifications:                                                         *
.*                                                                           *
.*****************************************************************************
.
.  using vi Global change command      :%s/FromString/ToString/g
.
.  Global change X00PMQVI  eg F57PTDOC
.  Global change x00pmqvi  eg f57ptdoc
.  Global change PMSQVIFD  eg PATDOCFD (new layout)
.  Global change pmsqviaf  eg patdoctf
.  Global change PMSQVIA1  eg PATDOCT1
.  Global change KEY22   eg KEY8
.  Global change KEY22  eg KEY9
.  Global change WRPMQVI1  eg WRDOCT1
.  Global change spmqviaf  eg sptdoctf
.
.  Global changes if Oracle Option is required -
.
.  Global Change No  to Yes
.  Global change RSPMQVI1  eg RSPTDOC1
.  Global change RKPMQVI1  eg RKPTDOC1
.  Global change UPPMQVI1  eg UPPTDOC1
.
.  Global changes if Oracle Option is NOT required -

.  Global Change No  to No
.  Global change RSPMQVI1  to OFDUMYIO
.  Global change RKPMQVI1  to OFDUMYIO
.  Global change UPPMQVI1  to OFDUMYIO
.
          INC       STD001FD
.
FINDFILE  FILE      ASCII, FIXED=256
LOGFILE   FILE      ASCII, FIXED=256
.
. Enter the first or the shortest index from the original FD and rename
. the index OLDFILE1
.
.                                     ******** copy the old FD here *******
.                                     * comment out all continuing fields and
.                                     * prefix changing fields with "OLD" -
.                                     * remove old Indexes and Redefines     
.
OLDFILE1   IFILE SQL, FIXED=2739, KEY="U1-20,21-22"
.
.Name      Type   Length  Physical Start Description
.----      ----   ------  -------- ----- -----------
.DPMQVMES   DIM      20       20       1  Message Id
.DPMQVTRN   DIM       2        2      21  Transaction Number
.
.          PATMI1FD variables
.
.AADMNO    FORM      8        5      23  PATIENT ADMISSION NO.
.AURNO     DIM       8        8      28  PATIENT U.R NO.
.ADATE     DIM       8        8      36  Admission Date (CCYYMMDD)
.ATIME     DIM       8        8      44  PATIENT ADMISSION TIME
.ASTAT     FORM      1        2      52  Admission Status
.                                             1 = Pre-Admission
.                                             2 = Current Admission
.                                             3 = Discharged
.                                             4 = On Leave
.                                             5 = Cancelled
.AINVPRT   FORM      3        3      54  NUMBER OF INVOICES PRINTED
.ALACDTE   DIM       8        8      57  last accom date invd (CCYYMMDD)
.ACANCEL   DIM       3        3      65  REASON PRE-ADMISS CANCELATION
.ADOCTR    DIM       6        6      68  DOCTOR REFERRED BY.
.ADOCTA    DIM       6        6      74  Attending Doctor (patdo1af)
.ADOCTL    DIM      30       30      80  LOCAL DOCTOR
.ASRCE     DIM       3        3     110  PATIENT ADMISSIONS SOURCE  (CAT S )
.ATYPE     DIM       3        3     113  Admission Type (Cat A)
.ACLSS     DIM       3        3     116  PATIENT ADMISSIONS CLASS   (CAT P )
.ACARE     DIM       3        3     119  PATIENT CARE CLASS         (CAT CC)
.AFUNDH    DIM       6        6     122  PATIENT HEALTH FUND
.AFNDTB    DIM       8        8     128  PATIENT FUND TABLE
.AFNDMM    DIM      10       10     136  PATIENT FUND MEMBERSHIP NO
.AELIG     FORM      1        2     146  PATIENT ELIGIBILITY FOR GOV'T
.                                         REBATE. 1 = YES  2 = NO
.                                         STH - DISCHARGE DIAG.PRINTED
.AVISIT    FORM      1        2     148  PATIENT RELIGIOUS VISIT
.                                                 1 = YES, 2 = NO
.AALERG    FORM      1        2     150  PATIENT ALLERGIES (Y/N)
.                                                 1 = YES, 2 = NO
.AILLN     FORM      1        2     152  PRE-EXISTING ILLNESS
.                                                 1 = YES, 2 = NO
.ADIAG1    DIM      80       80     154  PATIENTS ADMITTING DIAG 1
.ADIAG2    DIM      80       80     234   "   "     "   "     "  2
.ADISC     FORM      6.2      5     314  PATIENT DISCOUNT PERCENTAGE
.ADOCTT    DIM       6        6     319  TREATING DOCTOR
.ACLSSFT   DIM       3        3     325  Department (Cat AC)
.AALLOW    DIM       2        2     328  PATIENT ALLOWANCE CODE
.AMBS      DIM       9        9     330  ADMITTING MBS CODE
.ACLAIM    DIM       3        3     339  CLAIM CODE (CAT CL)
.ADIET     DIM       3        3     342  DIET CODE (CAT DC)
.APLOCCR   DIM       3        3     345  PLACE OF OCCR (CATEGORY PO)
.ASTAY     FORM      3        3     348  EXPECTED LENGTH OF STAY (DAYS)
.ADYHOSP   FORM      3        3     351  No OF DAYS OF HOSPITALIZATION
.AMEMB     FORM      1        2     354  DIAMOND VALLEY MEMBERSHIP
.                                                 1 = YES, 2 = NO
.AMEMBNO   FORM      6        4     356  MEMBERSHIP NUMBER
.ACOMM1    DIM      40       40     360  COMMENTS FIELD 1
.ACOMM2    DIM      30       30     400  COMMENTS FIELD 2
.APLUR     FORM      1        2     430  PLURATILY OF BABY (0=NORMAL)
.APURGE    FORM      1        2     432  PURGE INDICATOR
.                                                 OTHER = NO PURGE
.                                                 1     = PARTIAL
.                                                 2     = FULLY
.AUSR1     DIM       3        3     434  USER DEFINED FIELD 1 (CAT U1)
.AUSR2     DIM       3        3     437  USER DEFINED FIELD 2 (CAT U2)
.AUSR3     DIM       3        3     440  USER DEFINED FIELD 3 (CAT U3)
.AUSR4     DIM       3        3     443  USER DEFINED FIELD 4 (CAT U4)
.AUSR5     DIM       3        3     446  USER DEFINED FIELD 5 (CAT U5)
.AUSR6     DIM       3        3     449  USER DEFINED FIELD 6 (CAT U6)
.                                                 - Clinic Unit No. for Publics
.AUSR7     DIM       3        3     452  USER DEFINED FIELD 7 (CAT U7)
.                                                 - Coding status for Publics
.ADSCHI    FORM      1        2     455  DISCHARGE INVOICE INDICATOR
.                                                 0 = Discharge inv not printed
.                                                 1 = Have printed discharge inv
.ARDRNAM   DIM      22       22     457  FREE FORMAT REFERRING DOCTOR
.AFNDYY    DIM       2        2     479  YRS OF FUND MEMBERSHIP (JR,DE)
.AFNDCG    DIM       6        6     481  fund cover change (CCYYMM)
.AOCCDTE   DIM       8        8     487  DATE OF OCCURRENCE (CCYYMMDD)
.ACODDTE   DIM       8        8     495  DATE CODING COMPLETED
.ARETDTE   DIM       8        8     503  EXPECTED RETURN DATE FROM LVE
.AMUMADM   FORM      8        5     511  MOTHERS ADMSS NUMBER(IF BABY)
.PTMIPVIS  FORM      3        3     516  No of prev. visits charged
.ABWGHT    DIM       6        6     519  Baby's /Admission weight
.PTMSRFGP  DIM       8        8     525  Referring GP.
.PTMSGPPC  DIM       6        6     533  GP Practice Code
.PTMSFHAN  DIM      20       20     539  eAdmission ID
.PTMSECRA  DIM      20       20     559  ECR Approval Number
.PTMSMGIN  DIM       3        3     579  Management Intent   (CAT MI)
.PTMIDDIG  FORM      1        2     582  Discharged diagnosis printed?
.PTMIGPPT  DIM       2        2     584  GP Practice count
.PTMIDOFR  DIM       3        3     586  District of Residence (Cat DA)
.PTMIREFD  DIM       8        8     589  Date of Referral (EDI nz)
.PTMIDFCN  DIM       8        8     597  Date of 1st consultation (EDI nz)
.PTMIPHPU  DIM       3        3     605  Principal Health Service Purchaser
.                                         (EDI nz) (CAT HP)
.PTMIAGNC  DIM       3        3     608  Health Agency (EDI nz) (CAT HA)
.PTMIESSF  DIM       1        1     611  Event Summary supress flag Y/N(EDI nz)
.                                         "Y" = Suppress event summary
.                                         "N" = Don't supress
.PTMIUSR8  DIM       3        3     612  User defined field 8 (CAT U8)
.PTMIUSR9  DIM       3        3     615  User defined field 9 (CAT U9)
.PTMIUSR0  DIM       3        3     618  User defined field 0 (CAT U0)
.PTMIPDRG  DIM       4        4     621  Provisional DRG
.PTMIOPER  DIM       4        4     625  Operator who pre-admitted patient
.PTMIXWRD  DIM       3        3     629  Expected Ward for Pre-Admission
.PTMIADOC  DIM       6        6     632  Associated Doctor
.PTMIREGS  DIM       6        6     638  Registrar
.PTMIUYN1  FORM      1        2     644  User Defined Y/N Field (1=Yes, 0=No)
.PTMIUYN2  FORM      1        2     646  User Defined Y/N Field (1=Yes, 0=No)
.PTMIPANO  DIM       8        8     648  Previous admission number
.PTMIPADT  DIM       8        8     656  Previous admission date (ccyymmdd)
.PTMIPCMX  DIM       9        9     664  Casemix Code (Provisional MBS/DRG)
.PTMIGSTA  DIM       1        1     673  Is GST applicable to this event
.                                         Y=Yes, N/Space=No, U=Unknown
.PTMICMXP  DIM       1        1     674  Casemix Payment (Y/N)
.                                         NZ Billing - FFS has been charged(Y/N)
.PTMIEBED  DIM       3        3     675  Expected Bed
.PTMIDMOV  DIM       1        1     678  Pre-admission movement indicator
.PTMIDFAS  DIM       8        8     679  Date Patient First Aware of Symptoms
.PTMICRCD  DIM       1        1     687  Credit Card Details on File (1=Yes)
.PTMIFINV  DIM       1        1     688  Follow-up for implant invoicing(1=Yes)
.PTMICONB  DIM       1        1     689  Continuous Billing Event (1=Yes)
.PTMIDATC  DIM       8        8     690  Date Created CCYYMMDD
.PTMITIMC  DIM       8        8     698  Time Created hh:mm:ss
.PTMIWEBC  DIM      10       10     706  Web user Id Created
.PTMIDATU  DIM       8        8     716  Date Updated CCYYMMDD
.PTMITIMU  DIM       8        8     724  Time Updated hh:mm:ss
.PTMIWEBU  DIM      10       10     732  Web user Id Updated
.PTMI3BDY  DIM       3        3     742  3B certificate days
.PTMI3BAD  DIM       8        8     745  3B certificate admission date
.PTMILSDN  DIM       8        8     753  Linked Statistical Discharge Number
.PTMIOGNO  DIM       8        8     761  Original Admission Number
.
.         PATTRNFD variables
.
.TWARD     DIM       3        3     769  TRANSFER WARD NUMBER
.TBED      DIM       3        3     772  TRANSFER BED NUMBER
.TDATE     DIM       8        8     775  TRANSFER DATE (CCYYMMDD)
.TTIME     DIM       8        8     783  TRANSFER TIME (HH:MM)
.TURNO     DIM       8        8     791  PATIENT U/R  NUMBER
.TADMN     FORM      8        5     799  PATIENT ADMISSION  NUMBER
.TRATEF    FORM      12.2     8     804  PAT PORTION OF DAILY CHARGE
.                                             Daily rate = TRATEF + TRATEH
.                                                          - TDISC - TALLW
.                                          Accommodation Charge - Nursing Home
.TRATEG    FORM      12.2     8     812  GOVERNMENT  CHARGEABLE
.TDISC     FORM      12.2     8     820  PAT DISC (SUB FROM TRATEF)
.TALLW     FORM      12.2     8     828  PAT ALLOW (SUB FROM TRATEF)
.TATYPE    DIM       3        3     836  ADMISSION TYPE
.TADOCT    DIM       6        6     839  ATTENDING DOCTOR
.TRATEH    FORM      12.2     8     845  H/FND PORTION OF DAILY CHARGE
.TEXTRA    FORM      12.2     8     853  EXTRA CHGE PER DAY (PUB HOSP)
.PTTRITFS  FORM      12.2     8     861  Nursing Home Income Tested fee
.TRBTYP    DIM       3        3     869  E.F.R. BED TYPE FOR THIS BED
.TRBEND    FORM      3        3     872  END DAY IN RNGE FOR THIS RATE
.TCHSTAT   DIM       3        3     875  CHRGEABLE STATUS (USER DEF.2)
.                                          (PUBLIC HOSPITAL ONLY)
.TDEPT     DIM       3        3     878  DEPARTMENT CODE (CAT AC)
.PTTRLTYP  DIM       3        3     881  Type of Patient leave (Cat TL)
.PTTREPNO  FORM      2        2     884  Episode number
.PTTREPSD  FORM      1        2     886  Manual Stepdown
.                                           0 - Normal
.                                           1 - Forced Stepdown
.                                           2 - Bed Fee Update
.PTTRLSPT  FORM     12.2      8     888  Patient portion of lumpsum
.PTTRLSRB  FORM     12.2      8     896  Rebate portion of lumpsum
.PTTRAEND  FORM      4        3     904  End day for additional rate
.PTTRADPT  FORM     12.2      8     907  Additional daily rate - pat.
.                                          Resident contribution - Nursing Home
.PTTRADRB  FORM     12.2      8     915  Additional daily rate - rebate
.PTTRNHAC  DIM        3       3     923  Nursing Home Account code (Catg NH)
.PTTROPER  DIM        4       4     926  Operator Id
.PTTRAUAT  DIM        1       1     930  Auto update of admission type
.PTTRCDAT  DIM        8       8     931  Date Record Created (CCYYMMDD)
.PTTRCTIM  DIM        8       8     939  Time Record Created (hh:mm:ss)
.PTTRCUID  DIM        4       4     947  Passcode Created
.PTTRLTSC  DIM        5       5     951  Leave Transfer Source
.PTTRUCID  DIM       10      10     956  Web User Id who Created Record
.PTTRUUID  DIM       10      10     966  Web User Id who Updated Record
.PTTRCLTY  DIM        3       3     976  Claim Type (Cat CL)
.PTTRTRTY  DIM        3       3     979  Transfer Type (Cat RB)
.PTTRTEAM  DIM        5       5     982  Team
.PTTRRSTR  DIM       10      10     987  Registrar
.PTTRRESI  DIM       10      10     997  Resident
.PTTRFSRC  DIM       3       3     1007  Funding Source (Cat cx)
.PTTRHFND  DIM       6       6     1010  Health Fund Code (patfn1af)
.PTTRFTBL  DIM       8       8     1016  Health Fund Table (patfn1af)
.PTTRHFMN  DIM       19      19    1024  Health Fund Membership Number
.PTTRHFCN  DIM       40      40    1043  Health Fund Contributor Name
.
.         PMSVX1FD variables
.
.PMVXCSNR  DIM       1        1    1083  Consent release info (0=NO,1=YES)
.PMVXPOST  DIM       8        8    1084  Post Code
.PMVXPIND  DIM       3        3    1092  Privacy Indicator (Cat PV)
.PMVXVLOC  DIM      40       40    1095  Valuables Location
.PMVXCFSG  DIM       1        1    1135  Claim Form Signed (0=NO,1=YES)
.PMVXINGP  DIM       1        1    1136  Inform Registered GP
.                                         (0=NO,1=YES,2=Not Stated)
.PMVXCPTH  DIM       3        3    1137  Critical Pathway (Cat PW)
.PMVXHCP1  DIM       1        1    1140  Notify HCP1 (0=NO,1=YES)
.PMVXHCP2  DIM       1        1    1141  Notify HCP2 (0=NO,1=YES)
.PMVXHCP3  DIM       1        1    1142  Notify HCP3 (0=NO,1=YES)
.PMVXHCP4  DIM       1        1    1143  Notify HCP4 (0=NO,1=YES)
.PMVXRHC1  DIM      10       10    1144  Referring HCP 1 (pmshcpaf)
.PMVXRH1G  DIM      10       10    1154  Referring HCP 1 Practice (pmshclaf)
.PMVXRH1C  DIM       2        2    1164  Referring HCP 1 Grp Count (pmshcgaf
.PMVXRHC2  DIM      10       10    1166  Referring HCP 2 (pmshcpaf)
.PMVXRH2G  DIM      10       10    1176  Referring HCP 2 Practice (pmshclaf)
.PMVXRH2C  DIM       2        2    1186  Referring HCP 2 Grp Count (pmshcgaf
.PMVXRHC3  DIM      10       10    1188  Referring HCP 3 (pmshcpaf)
.PMVXRH3G  DIM      10       10    1198  Referring HCP 3 Practice (pmshclaf)
.PMVXRH3C  DIM       2        2    1208  Referring HCP 3 Grp Count (pmshcgaf
.PMVXRHC4  DIM      10       10    1210  Referring HCP 4 (pmshcpaf)
.PMVXRH4G  DIM      10       10    1220  Referring HCP 4 Practice (pmshclaf)
.PMVXRH4C  DIM       2        2    1230  Referring HCP 4 Grp Count (pmshclaf
.PMVXABRG  DIM       3        3    1232  Aboriginality (PRS/2) (Cat VA)
.PMVXCADM  DIM       3        3    1235  Admission Criterion (PRS/2) (Cat VB
.PMVXIRAD  DIM       3        3    1238  Intent to Readmit (PRS/2) (Cat VR)
.PMVXIDUS  DIM       3        3    1241  Intend Stay Duration (PRS/2) Cat VI
.PMVXCRAV  DIM       3        3    1244  Carer Availability (PRS/2) (Cat VK)
.PMVXRCCT  DIM       3        3    1247  Crit. Care Xfer Reason (PRS/2) (VJ)
.PMVXAPWD  DIM       3        3    1250  Admitting Point Ward (patwr1af)
.PMVXAPBD  DIM       3        3    1253  Admitting Point Bed (patwr1af)
.PMVXPOWD  DIM       3        3    1256  Post-Op Ward (patwr1af)
.PMVXPOBD  DIM       3        3    1259  Post-Op Bed (patwr1af)
.PMVXPSTY  DIM       1        1    1262  Parent Staying (0=NO,1=YES)
.PMVXVALW  DIM       1        1    1263  Visitor Allowed (0=NO,1=YES)
.PMVXPALW  DIM       1        1    1264  Phone Calls Allowed? (0=NO,1=YES)
.PMVXINDC  DIM       1        1    1265  Intended Day Case (0=NO,1=YES)
.PMVXMDAV  DIM       3        3    1266  Mode of Arrival (Cat VM)
.PMVXFRMS  DIM       3        3    1269  Forms (Cat VF)
.PMVXCSNG  DIM       3        3    1272  Coder Snags (Cat VN)
.PMVXPWGT  FORM      6        4    1275  Patient Weight(Convert to FORM 4.2)
.PMVXPHGT  FORM      6        4    1279  Patient Height
.PMVXDHWR  DIM       8        8    1283  Date Height/Weight Record. ccyymmdd
.PMVXEDC1  DIM      10       10    1291  Extra Doctor Code 1 (patdo1af)
.PMVXEDC2  DIM      10       10    1301  Extra Doctor Code 2 (patdo1af)
.PMVXEDC3  DIM      10       10    1311  Extra Doctor Code 3 (patdo1af)
.PMVXHOME  DIM       1        1    1321  Homeless Person (0=NO,1=YES)
.PMVXUDF1  DIM      50       50    1322  User Defined Free Format 1
.PMVXUDF2  DIM      50       50    1372  User Defined Free Format 2
.PMVXUDF3  DIM      50       50    1422  User Defined Free Format 3
.PMVXUDF4  DIM      50       50    1472  User Defined Free Format 4
.PMVXUDT1  DIM      13       13    1522  User Def. Date/Time 1 ccyymmddhh:mm
.PMVXUDT2  DIM      13       13    1535  User Def. Date/Time 2 ccyymmddhh:mm
.PMVXUDT3  DIM      13       13    1548  User Def. Date/Time 3 ccyymmddhh:mm
.PMVXUDT4  DIM      13       13    1561  User Def. Date/Time 4 ccyymmddhh:mm
.PMVXUDT5  DIM      13       13    1574  User Def. Date/Time 5 ccyymmddhh:mm
.PMVXUDT6  DIM      13       13    1587  User Def. Date/time 6 ccyymmddhh:mm
.PMVXCDTE  DIM      8        8     1600  Date record created (ccyymmdd)
.PMVXCTIM  DIM      8        8     1608  Time record created (hh:mm:ss)
.PMVXWEBC  DIM      10       10    1616  WEB User Id rec. creator (websecaf)
.PMVXLUPD  DIM      8        8     1626  Last Update Date (ccyymmdd)
.PMVXLUPT  DIM      8        8     1634  Last Update Time (hh:mm:ss)
.PMVXWEBU  DIM      10       10    1642  WEB User Id rec. update (websecaf)
.PMVXMHLS  DIM      3        3     1652  Mental Health Legal Status (LS)
.PMVXPICD  DIM      9        9     1655  Provisional ICD10 Code
.PMVXRMOR  DIM      3        3     1664  RMO Responsible Cat MO
.PMVXASUT  DIM      3        3     1667  Admission Service Unit Type Cat KA
.PMVXELPS  DIM      3        3     1670  Elective Patient Status Cat KC
.PMVXEMPL  DIM      3        3     1673  Employment Status Cat KD
.PMVXFINP  DIM      3        3     1676  Which Financial Program Cat KE
.PMVXOCCP  DIM      3        3     1679  Occupation Cat KF
.PMVXPALC  DIM      3        3     1682  Involvement in Palliat Care Cat KG
.PMVXPPAL  DIM      3        3     1685  Prev Non-Admitt Palliat Care Cat KH
.PMVXPPPT  DIM      3        3     1688  Public/Private Patients Cat KI
.PMVXPSOS  DIM      3        3     1691  Pension Status on Separation Cat KJ
.PMVXPYSP  DIM      3        3     1694  Payment Status on Separation Cat KK
.PMVXQLDB  DIM      3        3     1697  Banding/Type of Episode for QLDHDP
.PMVXREAD  DIM      3        3     1700  Re-Admission in 28 Days Cat KM
.PMVXUDIN  DIM      3        3     1703  Discharge Intention Cat KN
.PMVXUREA  DIM      3        3     1706  Unplanned Readmission Cat KO
.PMVXUSAC  DIM      3        3     1709  Usual Accommodation Cat KP
.PMVXUVTH  DIM      3        3     1712  Unplanned Visit to Theatre Cat KB
.PMVXINTR  DIM      1        1     1715  Interpreter Required? (0=NO,1=YES)
.PMVXLNG1  DIM      3        3     1716  Preferred Language 1 (Cat LA)
.PMVXASGC  DIM      9        9     1719  ABS AGSC
.PMVXMHOS  DIM      3        3     1728  Multi Hospital ID (pathspaf)
.PMVXDSPD  DIM      8        8     1731  Disch Summary Produced (ccyymmdd)
.PMVXDSIF  DIM      1        1     1739  Disch Summary (I)nterim / (F)inal
.PMVXPRMI  DIM      1        1     1740  Participate/Receive Marketing Info
.PMVXPRAI  DIM      1        1     1741  Participate/Receive Advertising Inf
.PMVXPRES  DIM      1        1     1742  Participate in Research Projects
.PMVXUITR  DIM      1        1     1743  Use Information for Training
.PMVXRPOA  DIM      1        1     1744  Release to Enduring POA / IFC
.PMVXRCN1  DIM      1        1     1745  Release to Contact 1 ptmxnrnm
.PMVXRCN2  DIM      1        1     1746  Release to Contact 2 ptmxexnm
.PMVXRHFU  DIM      1        1     1747  Release to Health Fund
.PMVXRDVA  DIM      1        1     1748  Release to DVA
.PMVXRSLO  DIM      1        1     1749  RSL Visit OK
.PMVXMLOC  DIM      3        3     1750  Medical Record Location (Cat MV)
.PMVXPACC  DIM      3        3     1753  Preferred Accommodation (Cat BP)
.PMVXEDU1  DIM      3        3     1756  Extra Doctor Unit 1 (Cat AC)
.PMVXEDU2  DIM      3        3     1759  Extra Doctor Unit 2 (Cat AC)
.PMVXEDU3  DIM      3        3     1762  Extra Doctor Unit 3 (Cat AC)
.PMVXPRGM  DIM      8        8     1765  Program Code
.PMVXCONF  DIM      1        1     1773  Appointment Confirmed 0=No 1=Yes
.PMVXEOCL  DIM      8        8     1774  EOC Link admission no.
.PMVXSLOC  DIM      3        3     1782  Location SOR (Cat SG)
.PMVXSCLI  DIM      3        3     1785  Clinical SOR (Cat SH)
.PMVXSTRA  DIM      3        3     1788  Transport SOR (Cat.SI)
.PMVXQASN  DIM      12       12    1791  QAS Number
.PMVXATCP  DIM      1        1     1803  All theatre charges posted (1=yes)
.PMVXATIM  DIM      8        8     1804  Arrival Time (hh:mm:ss)
.PMVXITIM  DIM      8        8     1812  Interview Time (hh:mm:ss)
.PMVXHFGN  DIM      40       40    1820  Health Fund First Given Name Alias
.PMVXHFSN  DIM      40       40    1860  Health Fund Surname Alias
.PMVXFUPI  DIM      2        2     1900  Health Fund UPI
.PMVXPOEC  DIM      1        1     1902  Patient Online Eligibility Consent
.PMVXPGID  DIM      3        3     1903  Program Identifier (Cat PK)
.PMVXTICM  DIM      3        3     1906  Reason Theatre Incomplete Catg Rt
.PMVXPILC  DIM      3        3     1909  Presenting Illness Code CAT (il)
.PMVXFVIO  DIM      3        3     1912  Family Violence (Cat fv)
.PMVXFNDM  DIM      19       19    1915  Health Fund Membership Number
.PMVXUDF5  DIM      3        3     1934  User defined Category Code
.PMVXUDF6  DIM      3        3     1937  User defined Category Code
.PMVXUDF7  DIM      3        3     1940  User defined Category Code
.PMVXUDF8  DIM      3        3     1943  User defined Category Code
.PMVXUDF9  DIM      3        3     1946  User defined Category Code
.PMVXUD10  DIM      3        3     1949  User defined Category Code
.PMVXUD11  DIM      3        3     1952  User defined Category Code
.PMVXUD12  DIM      3        3     1955  User defined Category Code
.PMVXUD13  DIM      3        3     1958  User defined Category Code
.PMVXUD14  DIM      3        3     1961  User defined Category Code
.PMVXUD15  DIM      3        3     1964  User defined Category Code
.PMVXTEAM  DIM      5        5     1967  Team
.PMVXNWHC  DIM      3        3     1972  Non WA Hospital Contact (Cat cw)
.PMVXEDDT  DIM      8        8     1975  Expected Delivery Date (ccyymmdd)
.PMVXPHLD  DIM      3        3     1983  Property Held (Cat ps)
.PMVXPLOC  DIM      3        3     1986  Property Location (Cat pt)
.PMVXDTRT  DIM      8        8     1989  Date Returned (ccyymmdd)
.PMVXDFLG  DIM      9        9     1997  Disaster Flag
.PMVXFSRC  DIM      3        3     2006  Funding Source (Cat cx)
.PMVXCONM  DIM      40       40    2009  Contributor Name
.PMVXCPDD  DIM       8       8     2049  Care Plan Documented Date
.PMVXPBMI  DIM       5       5     2057  Patient Body Mass Index
.
.          PATDSCFD variables
.
.DDATE     DIM       8        8    2062   PATIENT DIS. DATE (CCYYMMDD)
.DTIME     DIM       8        8    2070   PATIENT DISCHARGE TIME
.DSTAT     DIM       3        3    2078   DISCHARGE STATUS      (CAT D )
.DDEST     DIM       3        3    2081   DISCHARGE DESTINATION (CAT DD)
.DDIAG     DIM      50       50    2084   DISCHARGE DIAGNOSIS
.DDIAG2    DIM      50       50    2134   DISCHARGE DIAGNOSIS (PART 2)
.DUSD1     DIM       3        3    2184   USER DEFINED FIELD 1 (CAT D1)
.DUSD2     DIM       3        3    2187   USER DEFINED FIELD 2 (CAT D2)
.DUSD3     DIM       3        3    2190   USER DEFINED FIELD 3 (CAT D3)
.DUSD4     DIM       3        3    2193   USER DEFINED FIELD 4 (CAT D4)
.DUSD5     DIM       3        3    2196   USER DEFINED FIELD 5 (CAT D5)
.DFMBS     DIM       9        9    2199   DISCHARGE DIAGNOSIS CODE
.PTDSDMDC  DIM       4        4    2208   MDC code
.PTDSDDRG  DIM       4        4    2212   DRG code
.DWLREASN  DIM       3        3    2216   Reason Discharged Patient was
.                                                put back on Waiting List (RW)
.PTDSSIDX  DIM       1        1    2219   DRG severity index
.PTDSVOGU  DIM       3        3    2220   Vers grouper used when grouping
.PTDSOPER  DIM       4        4    2223   Operator who discharged patie
.PTDSUYN1  FORM      1        2    2227   User Defined Y/N Field 1
.PTDSUYN2  FORM      1        2    2229   User Defined Y/N Field 2
.PTDSUYN3  FORM      1        2    2231   User Defined Y/N Field 3
.PTDSUYN4  FORM      1        2    2233   User Defined Y/N Field 4
.PTDSDWRD  DIM       3        3    2235   Discharge Ward
.PTDSDLOS  FORM      4        3    2238   Length of Stay
.PTDSSREF  DIM       4        4    2241   Separation referral
.PTDSPALD  DIM       3        3    2245   Palliative care days (PRS2)
.PTDSDPMN  DIM       3        3    2248   Departure Means (Cat SI)
.
.          MEHLERFD variables
.
.MHLRCODE  DIM       3        3    2251  Leave end reason code (CAT LE)
.
.          PATRE1FD variables
.
OLDNAME   DIM      30       30    2254   PERSON RESP FOR A/C NAME
.PKADD1    DIM      35       35    2284   P.R.A ADDRESS LINE 1
.PKADD2    DIM      35       35    2219   P.R.A ADDRESS LINE 2
.PKSUBR    DIM      35       35    2254   P.R.A SUBURB
.PKADD4    DIM      35       35    2389   P.R.A ADDRESS LINE 2
.PKPOST    DIM       8        8    2424   P.R.A POSTCODE
.PKTELEP   DIM      20       20    2432   P.R.A PRIVATE TELEPHONE
.PKTELEB   DIM      20       20    2452   P.R.A BUSINESS TELEPHONE
.PKRELP    DIM      10       10    2472   P.R.A RELATIONSHIP
.PTREMOBL  DIM      20       20    2482   P.R.A MOBILE TELEPHONE
.PTRESNAM  DIM      40       40    2502   Surname or
.                                             Contact Name for Insurance
.PTREGNAM  DIM      40       40    2542   Given Name
.
.          Other variables
.
.WSTBY     FORM     8        5     2582   Standby Number
.PMQVTDAT   DIM      8        8     2587   Transfer Date (for cancelled transfer)
.                                                       (ccyymmdd)
.PMQVTTIM   DIM      8        8     2595   Transfer Date (for cancelled transfer)
.                                                       (hh:mm:ss)
.
.OERDATE   DIM      8        8     2603   Expected Return Date (ccyymmdd)
.OERTIME   DIM      8        8     2611   Expected Return Time (hh:mm:ss)
.
.PMBRREQD  DIM      8        8     2619   Request Date (ccyymmdd)
.PMBRREQT  DIM      8        8     2627   Request Time (hh:mm:ss)
.PMVXCNID  DIM      10      10     2635   Visit Confirmed WEB User Id
.                                         (websecaf)
.PMVXCNDT  DIM      13      13     2645   Visit Confirmed Date and Time
.                                         (ccyymmddhh:mm)
.PMVXCASE  DIM      10      10     2658   Case Team (allcasaf)
.PMVXEAFL  DIM      1        1     2668   Eclipse Adjustment Flag
.                                         Blank or 0 = No
.                                         1 = Yes
.PTDSLSDN  DIM      8        8     2669   Linked Statistical Discharge No
.PTDSCLGP  DIM     12       12     2677   Clinical Group
.PMQVSPAR   DIM     50       50     2689   Spare Variable
.
.End of Record                     2739
.
.
. Redefined FORM fields from key
. ------------------------------
PMQVMESI  FORM      20
PMQVTRAN  FORM      2
.
.                                     ******** copy the new FD here *******
.
PMSQVIA1   IFILE SQL, FIXED=2789, KEY="U1-20,21-22"
.
.Name      Type   Length  Physical Start Description
.----      ----   ------  -------- ----- -----------
DPMQVMES   DIM      20       20       1  Message Id
DPMQVTRN   DIM       2        2      21  Transaction Number
.
.          PATMI1FD variables
.
AADMNO    FORM      8        5      23  PATIENT ADMISSION NO.
AURNO     DIM       8        8      28  PATIENT U.R NO.
ADATE     DIM       8        8      36  Admission Date (CCYYMMDD)
ATIME     DIM       8        8      44  PATIENT ADMISSION TIME
ASTAT     FORM      1        2      52  Admission Status
.                                             1 = Pre-Admission
.                                             2 = Current Admission
.                                             3 = Discharged
.                                             4 = On Leave
.                                             5 = Cancelled
AINVPRT   FORM      3        3      54  NUMBER OF INVOICES PRINTED
ALACDTE   DIM       8        8      57  last accom date invd (CCYYMMDD)
ACANCEL   DIM       3        3      65  REASON PRE-ADMISS CANCELATION
ADOCTR    DIM       6        6      68  DOCTOR REFERRED BY.
ADOCTA    DIM       6        6      74  Attending Doctor (patdo1af)
ADOCTL    DIM      30       30      80  LOCAL DOCTOR
ASRCE     DIM       3        3     110  PATIENT ADMISSIONS SOURCE  (CAT S )
ATYPE     DIM       3        3     113  Admission Type (Cat A)
ACLSS     DIM       3        3     116  PATIENT ADMISSIONS CLASS   (CAT P )
ACARE     DIM       3        3     119  PATIENT CARE CLASS         (CAT CC)
AFUNDH    DIM       6        6     122  PATIENT HEALTH FUND
AFNDTB    DIM       8        8     128  PATIENT FUND TABLE
AFNDMM    DIM      10       10     136  PATIENT FUND MEMBERSHIP NO
AELIG     FORM      1        2     146  PATIENT ELIGIBILITY FOR GOV'T
.                                         REBATE. 1 = YES  2 = NO
.                                         STH - DISCHARGE DIAG.PRINTED
AVISIT    FORM      1        2     148  PATIENT RELIGIOUS VISIT
.                                                 1 = YES, 2 = NO
AALERG    FORM      1        2     150  PATIENT ALLERGIES (Y/N)
.                                                 1 = YES, 2 = NO
AILLN     FORM      1        2     152  PRE-EXISTING ILLNESS
.                                                 1 = YES, 2 = NO
ADIAG1    DIM      80       80     154  PATIENTS ADMITTING DIAG 1
ADIAG2    DIM      80       80     234   "   "     "   "     "  2
ADISC     FORM      6.2      5     314  PATIENT DISCOUNT PERCENTAGE
ADOCTT    DIM       6        6     319  TREATING DOCTOR
ACLSSFT   DIM       3        3     325  Department (Cat AC)
AALLOW    DIM       2        2     328  PATIENT ALLOWANCE CODE
AMBS      DIM       9        9     330  ADMITTING MBS CODE
ACLAIM    DIM       3        3     339  CLAIM CODE (CAT CL)
ADIET     DIM       3        3     342  DIET CODE (CAT DC)
APLOCCR   DIM       3        3     345  PLACE OF OCCR (CATEGORY PO)
ASTAY     FORM      3        3     348  EXPECTED LENGTH OF STAY (DAYS)
ADYHOSP   FORM      3        3     351  No OF DAYS OF HOSPITALIZATION
AMEMB     FORM      1        2     354  DIAMOND VALLEY MEMBERSHIP
.                                                 1 = YES, 2 = NO
AMEMBNO   FORM      6        4     356  MEMBERSHIP NUMBER
ACOMM1    DIM      40       40     360  COMMENTS FIELD 1
ACOMM2    DIM      30       30     400  COMMENTS FIELD 2
APLUR     FORM      1        2     430  PLURATILY OF BABY (0=NORMAL)
APURGE    FORM      1        2     432  PURGE INDICATOR
.                                                 OTHER = NO PURGE
.                                                 1     = PARTIAL
.                                                 2     = FULLY
AUSR1     DIM       3        3     434  USER DEFINED FIELD 1 (CAT U1)
AUSR2     DIM       3        3     437  USER DEFINED FIELD 2 (CAT U2)
AUSR3     DIM       3        3     440  USER DEFINED FIELD 3 (CAT U3)
AUSR4     DIM       3        3     443  USER DEFINED FIELD 4 (CAT U4)
AUSR5     DIM       3        3     446  USER DEFINED FIELD 5 (CAT U5)
AUSR6     DIM       3        3     449  USER DEFINED FIELD 6 (CAT U6)
.                                                 - Clinic Unit No. for Publics
AUSR7     DIM       3        3     452  USER DEFINED FIELD 7 (CAT U7)
.                                                 - Coding status for Publics
ADSCHI    FORM      1        2     455  DISCHARGE INVOICE INDICATOR
.                                                 0 = Discharge inv not printed
.                                                 1 = Have printed discharge inv
ARDRNAM   DIM      22       22     457  FREE FORMAT REFERRING DOCTOR
AFNDYY    DIM       2        2     479  YRS OF FUND MEMBERSHIP (JR,DE)
AFNDCG    DIM       6        6     481  fund cover change (CCYYMM)
AOCCDTE   DIM       8        8     487  DATE OF OCCURRENCE (CCYYMMDD)
ACODDTE   DIM       8        8     495  DATE CODING COMPLETED
ARETDTE   DIM       8        8     503  EXPECTED RETURN DATE FROM LVE
AMUMADM   FORM      8        5     511  MOTHERS ADMSS NUMBER(IF BABY)
PTMIPVIS  FORM      3        3     516  No of prev. visits charged
ABWGHT    DIM       6        6     519  Baby's /Admission weight
PTMSRFGP  DIM       8        8     525  Referring GP.
PTMSGPPC  DIM       6        6     533  GP Practice Code
PTMSFHAN  DIM      20       20     539  eAdmission ID
PTMSECRA  DIM      20       20     559  ECR Approval Number
PTMSMGIN  DIM       3        3     579  Management Intent   (CAT MI)
PTMIDDIG  FORM      1        2     582  Discharged diagnosis printed?
PTMIGPPT  DIM       2        2     584  GP Practice count
PTMIDOFR  DIM       3        3     586  District of Residence (Cat DA)
PTMIREFD  DIM       8        8     589  Date of Referral (EDI nz)
PTMIDFCN  DIM       8        8     597  Date of 1st consultation (EDI nz)
PTMIPHPU  DIM       3        3     605  Principal Health Service Purchaser
.                                         (EDI nz) (CAT HP)
PTMIAGNC  DIM       3        3     608  Health Agency (EDI nz) (CAT HA)
PTMIESSF  DIM       1        1     611  Event Summary supress flag Y/N(EDI nz)
.                                         "Y" = Suppress event summary
.                                         "N" = Don't supress
PTMIUSR8  DIM       3        3     612  User defined field 8 (CAT U8)
PTMIUSR9  DIM       3        3     615  User defined field 9 (CAT U9)
PTMIUSR0  DIM       3        3     618  User defined field 0 (CAT U0)
PTMIPDRG  DIM       4        4     621  Provisional DRG
PTMIOPER  DIM       4        4     625  Operator who pre-admitted patient
PTMIXWRD  DIM       3        3     629  Expected Ward for Pre-Admission
PTMIADOC  DIM       6        6     632  Associated Doctor
PTMIREGS  DIM       6        6     638  Registrar
PTMIUYN1  FORM      1        2     644  User Defined Y/N Field (1=Yes, 0=No)
PTMIUYN2  FORM      1        2     646  User Defined Y/N Field (1=Yes, 0=No)
PTMIPANO  DIM       8        8     648  Previous admission number
PTMIPADT  DIM       8        8     656  Previous admission date (ccyymmdd)
PTMIPCMX  DIM       9        9     664  Casemix Code (Provisional MBS/DRG)
PTMIGSTA  DIM       1        1     673  Is GST applicable to this event
.                                         Y=Yes, N/Space=No, U=Unknown
PTMICMXP  DIM       1        1     674  Casemix Payment (Y/N)
.                                         NZ Billing - FFS has been charged(Y/N)
PTMIEBED  DIM       3        3     675  Expected Bed
PTMIDMOV  DIM       1        1     678  Pre-admission movement indicator
PTMIDFAS  DIM       8        8     679  Date Patient First Aware of Symptoms
PTMICRCD  DIM       1        1     687  Credit Card Details on File (1=Yes)
PTMIFINV  DIM       1        1     688  Follow-up for implant invoicing(1=Yes)
PTMICONB  DIM       1        1     689  Continuous Billing Event (1=Yes)
PTMIDATC  DIM       8        8     690  Date Created CCYYMMDD
PTMITIMC  DIM       8        8     698  Time Created hh:mm:ss
PTMIWEBC  DIM      10       10     706  Web user Id Created
PTMIDATU  DIM       8        8     716  Date Updated CCYYMMDD
PTMITIMU  DIM       8        8     724  Time Updated hh:mm:ss
PTMIWEBU  DIM      10       10     732  Web user Id Updated
PTMI3BDY  DIM       3        3     742  3B certificate days
PTMI3BAD  DIM       8        8     745  3B certificate admission date
PTMILSDN  DIM       8        8     753  Linked Statistical Discharge Number
PTMIOGNO  DIM       8        8     761  Original Admission Number
.
.         PATTRNFD variables
.
TWARD     DIM       3        3     769  TRANSFER WARD NUMBER
TBED      DIM       3        3     772  TRANSFER BED NUMBER
TDATE     DIM       8        8     775  TRANSFER DATE (CCYYMMDD)
TTIME     DIM       8        8     783  TRANSFER TIME (HH:MM)
TURNO     DIM       8        8     791  PATIENT U/R  NUMBER
TADMN     FORM      8        5     799  PATIENT ADMISSION  NUMBER
TRATEF    FORM      12.2     8     804  PAT PORTION OF DAILY CHARGE
.                                             Daily rate = TRATEF + TRATEH
.                                                          - TDISC - TALLW
.                                          Accommodation Charge - Nursing Home
TRATEG    FORM      12.2     8     812  GOVERNMENT  CHARGEABLE
TDISC     FORM      12.2     8     820  PAT DISC (SUB FROM TRATEF)
TALLW     FORM      12.2     8     828  PAT ALLOW (SUB FROM TRATEF)
TATYPE    DIM       3        3     836  ADMISSION TYPE
TADOCT    DIM       6        6     839  ATTENDING DOCTOR
TRATEH    FORM      12.2     8     845  H/FND PORTION OF DAILY CHARGE
TEXTRA    FORM      12.2     8     853  EXTRA CHGE PER DAY (PUB HOSP)
PTTRITFS  FORM      12.2     8     861  Nursing Home Income Tested fee
TRBTYP    DIM       3        3     869  E.F.R. BED TYPE FOR THIS BED
TRBEND    FORM      3        3     872  END DAY IN RNGE FOR THIS RATE
TCHSTAT   DIM       3        3     875  CHRGEABLE STATUS (USER DEF.2)
.                                          (PUBLIC HOSPITAL ONLY)
TDEPT     DIM       3        3     878  DEPARTMENT CODE (CAT AC)
PTTRLTYP  DIM       3        3     881  Type of Patient leave (Cat TL)
PTTREPNO  FORM      2        2     884  Episode number
PTTREPSD  FORM      1        2     886  Manual Stepdown
.                                           0 - Normal
.                                           1 - Forced Stepdown
.                                           2 - Bed Fee Update
PTTRLSPT  FORM     12.2      8     888  Patient portion of lumpsum
PTTRLSRB  FORM     12.2      8     896  Rebate portion of lumpsum
PTTRAEND  FORM      4        3     904  End day for additional rate
PTTRADPT  FORM     12.2      8     907  Additional daily rate - pat.
.                                          Resident contribution - Nursing Home
PTTRADRB  FORM     12.2      8     915  Additional daily rate - rebate
PTTRNHAC  DIM        3       3     923  Nursing Home Account code (Catg NH)
PTTROPER  DIM        4       4     926  Operator Id
PTTRAUAT  DIM        1       1     930  Auto update of admission type
PTTRCDAT  DIM        8       8     931  Date Record Created (CCYYMMDD)
PTTRCTIM  DIM        8       8     939  Time Record Created (hh:mm:ss)
PTTRCUID  DIM        4       4     947  Passcode Created
PTTRLTSC  DIM        5       5     951  Leave Transfer Source
PTTRUCID  DIM       10      10     956  Web User Id who Created Record
PTTRUUID  DIM       10      10     966  Web User Id who Updated Record
PTTRCLTY  DIM        3       3     976  Claim Type (Cat CL)
PTTRTRTY  DIM        3       3     979  Transfer Type (Cat RB)
PTTRTEAM  DIM        5       5     982  Team
PTTRRSTR  DIM       10      10     987  Registrar
PTTRRESI  DIM       10      10     997  Resident
PTTRFSRC  DIM       3       3     1007  Funding Source (Cat cx)
PTTRHFND  DIM       6       6     1010  Health Fund Code (patfn1af)
PTTRFTBL  DIM       8       8     1016  Health Fund Table (patfn1af)
PTTRHFMN  DIM       19      19    1024  Health Fund Membership Number
PTTRHFCN  DIM       40      40    1043  Health Fund Contributor Name
.
.         PMSVX1FD variables
.
PMVXCSNR  DIM       1        1    1083  Consent release info (0=NO,1=YES)
PMVXPOST  DIM       8        8    1084  Post Code
PMVXPIND  DIM       3        3    1092  Privacy Indicator (Cat PV)
PMVXVLOC  DIM      40       40    1095  Valuables Location
PMVXCFSG  DIM       1        1    1135  Claim Form Signed (0=NO,1=YES)
PMVXINGP  DIM       1        1    1136  Inform Registered GP
.                                         (0=NO,1=YES,2=Not Stated)
PMVXCPTH  DIM       3        3    1137  Critical Pathway (Cat PW)
PMVXHCP1  DIM       1        1    1140  Notify HCP1 (0=NO,1=YES)
PMVXHCP2  DIM       1        1    1141  Notify HCP2 (0=NO,1=YES)
PMVXHCP3  DIM       1        1    1142  Notify HCP3 (0=NO,1=YES)
PMVXHCP4  DIM       1        1    1143  Notify HCP4 (0=NO,1=YES)
PMVXRHC1  DIM      10       10    1144  Referring HCP 1 (pmshcpaf)
PMVXRH1G  DIM      10       10    1154  Referring HCP 1 Practice (pmshclaf)
PMVXRH1C  DIM       2        2    1164  Referring HCP 1 Grp Count (pmshcgaf
PMVXRHC2  DIM      10       10    1166  Referring HCP 2 (pmshcpaf)
PMVXRH2G  DIM      10       10    1176  Referring HCP 2 Practice (pmshclaf)
PMVXRH2C  DIM       2        2    1186  Referring HCP 2 Grp Count (pmshcgaf
PMVXRHC3  DIM      10       10    1188  Referring HCP 3 (pmshcpaf)
PMVXRH3G  DIM      10       10    1198  Referring HCP 3 Practice (pmshclaf)
PMVXRH3C  DIM       2        2    1208  Referring HCP 3 Grp Count (pmshcgaf
PMVXRHC4  DIM      10       10    1210  Referring HCP 4 (pmshcpaf)
PMVXRH4G  DIM      10       10    1220  Referring HCP 4 Practice (pmshclaf)
PMVXRH4C  DIM       2        2    1230  Referring HCP 4 Grp Count (pmshclaf
PMVXABRG  DIM       3        3    1232  Aboriginality (PRS/2) (Cat VA)
PMVXCADM  DIM       3        3    1235  Admission Criterion (PRS/2) (Cat VB
PMVXIRAD  DIM       3        3    1238  Intent to Readmit (PRS/2) (Cat VR)
PMVXIDUS  DIM       3        3    1241  Intend Stay Duration (PRS/2) Cat VI
PMVXCRAV  DIM       3        3    1244  Carer Availability (PRS/2) (Cat VK)
PMVXRCCT  DIM       3        3    1247  Crit. Care Xfer Reason (PRS/2) (VJ)
PMVXAPWD  DIM       3        3    1250  Admitting Point Ward (patwr1af)
PMVXAPBD  DIM       3        3    1253  Admitting Point Bed (patwr1af)
PMVXPOWD  DIM       3        3    1256  Post-Op Ward (patwr1af)
PMVXPOBD  DIM       3        3    1259  Post-Op Bed (patwr1af)
PMVXPSTY  DIM       1        1    1262  Parent Staying (0=NO,1=YES)
PMVXVALW  DIM       1        1    1263  Visitor Allowed (0=NO,1=YES)
PMVXPALW  DIM       1        1    1264  Phone Calls Allowed? (0=NO,1=YES)
PMVXINDC  DIM       1        1    1265  Intended Day Case (0=NO,1=YES)
PMVXMDAV  DIM       3        3    1266  Mode of Arrival (Cat VM)
PMVXFRMS  DIM       3        3    1269  Forms (Cat VF)
PMVXCSNG  DIM       3        3    1272  Coder Snags (Cat VN)
PMVXPWGT  FORM      6        4    1275  Patient Weight(Convert to FORM 4.2)
PMVXPHGT  FORM      6        4    1279  Patient Height
PMVXDHWR  DIM       8        8    1283  Date Height/Weight Record. ccyymmdd
PMVXEDC1  DIM      10       10    1291  Extra Doctor Code 1 (patdo1af)
PMVXEDC2  DIM      10       10    1301  Extra Doctor Code 2 (patdo1af)
PMVXEDC3  DIM      10       10    1311  Extra Doctor Code 3 (patdo1af)
PMVXHOME  DIM       1        1    1321  Homeless Person (0=NO,1=YES)
PMVXUDF1  DIM      50       50    1322  User Defined Free Format 1
PMVXUDF2  DIM      50       50    1372  User Defined Free Format 2
PMVXUDF3  DIM      50       50    1422  User Defined Free Format 3
PMVXUDF4  DIM      50       50    1472  User Defined Free Format 4
PMVXUDT1  DIM      13       13    1522  User Def. Date/Time 1 ccyymmddhh:mm
PMVXUDT2  DIM      13       13    1535  User Def. Date/Time 2 ccyymmddhh:mm
PMVXUDT3  DIM      13       13    1548  User Def. Date/Time 3 ccyymmddhh:mm
PMVXUDT4  DIM      13       13    1561  User Def. Date/Time 4 ccyymmddhh:mm
PMVXUDT5  DIM      13       13    1574  User Def. Date/Time 5 ccyymmddhh:mm
PMVXUDT6  DIM      13       13    1587  User Def. Date/time 6 ccyymmddhh:mm
PMVXCDTE  DIM      8        8     1600  Date record created (ccyymmdd)
PMVXCTIM  DIM      8        8     1608  Time record created (hh:mm:ss)
PMVXWEBC  DIM      10       10    1616  WEB User Id rec. creator (websecaf)
PMVXLUPD  DIM      8        8     1626  Last Update Date (ccyymmdd)
PMVXLUPT  DIM      8        8     1634  Last Update Time (hh:mm:ss)
PMVXWEBU  DIM      10       10    1642  WEB User Id rec. update (websecaf)
PMVXMHLS  DIM      3        3     1652  Mental Health Legal Status (LS)
PMVXPICD  DIM      9        9     1655  Provisional ICD10 Code
PMVXRMOR  DIM      3        3     1664  RMO Responsible Cat MO
PMVXASUT  DIM      3        3     1667  Admission Service Unit Type Cat KA
PMVXELPS  DIM      3        3     1670  Elective Patient Status Cat KC
PMVXEMPL  DIM      3        3     1673  Employment Status Cat KD
PMVXFINP  DIM      3        3     1676  Which Financial Program Cat KE
PMVXOCCP  DIM      3        3     1679  Occupation Cat KF
PMVXPALC  DIM      3        3     1682  Involvement in Palliat Care Cat KG
PMVXPPAL  DIM      3        3     1685  Prev Non-Admitt Palliat Care Cat KH
PMVXPPPT  DIM      3        3     1688  Public/Private Patients Cat KI
PMVXPSOS  DIM      3        3     1691  Pension Status on Separation Cat KJ
PMVXPYSP  DIM      3        3     1694  Payment Status on Separation Cat KK
PMVXQLDB  DIM      3        3     1697  Banding/Type of Episode for QLDHDP
PMVXREAD  DIM      3        3     1700  Re-Admission in 28 Days Cat KM
PMVXUDIN  DIM      3        3     1703  Discharge Intention Cat KN
PMVXUREA  DIM      3        3     1706  Unplanned Readmission Cat KO
PMVXUSAC  DIM      3        3     1709  Usual Accommodation Cat KP
PMVXUVTH  DIM      3        3     1712  Unplanned Visit to Theatre Cat KB
PMVXINTR  DIM      1        1     1715  Interpreter Required? (0=NO,1=YES)
PMVXLNG1  DIM      3        3     1716  Preferred Language 1 (Cat LA)
PMVXASGC  DIM      9        9     1719  ABS AGSC
PMVXMHOS  DIM      3        3     1728  Multi Hospital ID (pathspaf)
PMVXDSPD  DIM      8        8     1731  Disch Summary Produced (ccyymmdd)
PMVXDSIF  DIM      1        1     1739  Disch Summary (I)nterim / (F)inal
PMVXPRMI  DIM      1        1     1740  Participate/Receive Marketing Info
PMVXPRAI  DIM      1        1     1741  Participate/Receive Advertising Inf
PMVXPRES  DIM      1        1     1742  Participate in Research Projects
PMVXUITR  DIM      1        1     1743  Use Information for Training
PMVXRPOA  DIM      1        1     1744  Release to Enduring POA / IFC
PMVXRCN1  DIM      1        1     1745  Release to Contact 1 ptmxnrnm
PMVXRCN2  DIM      1        1     1746  Release to Contact 2 ptmxexnm
PMVXRHFU  DIM      1        1     1747  Release to Health Fund
PMVXRDVA  DIM      1        1     1748  Release to DVA
PMVXRSLO  DIM      1        1     1749  RSL Visit OK
PMVXMLOC  DIM      3        3     1750  Medical Record Location (Cat MV)
PMVXPACC  DIM      3        3     1753  Preferred Accommodation (Cat BP)
PMVXEDU1  DIM      3        3     1756  Extra Doctor Unit 1 (Cat AC)
PMVXEDU2  DIM      3        3     1759  Extra Doctor Unit 2 (Cat AC)
PMVXEDU3  DIM      3        3     1762  Extra Doctor Unit 3 (Cat AC)
PMVXPRGM  DIM      8        8     1765  Program Code
PMVXCONF  DIM      1        1     1773  Appointment Confirmed 0=No 1=Yes
PMVXEOCL  DIM      8        8     1774  EOC Link admission no.
PMVXSLOC  DIM      3        3     1782  Location SOR (Cat SG)
PMVXSCLI  DIM      3        3     1785  Clinical SOR (Cat SH)
PMVXSTRA  DIM      3        3     1788  Transport SOR (Cat.SI)
PMVXQASN  DIM      12       12    1791  QAS Number
PMVXATCP  DIM      1        1     1803  All theatre charges posted (1=yes)
PMVXATIM  DIM      8        8     1804  Arrival Time (hh:mm:ss)
PMVXITIM  DIM      8        8     1812  Interview Time (hh:mm:ss)
PMVXHFGN  DIM      40       40    1820  Health Fund First Given Name Alias
PMVXHFSN  DIM      40       40    1860  Health Fund Surname Alias
PMVXFUPI  DIM      2        2     1900  Health Fund UPI
PMVXPOEC  DIM      1        1     1902  Patient Online Eligibility Consent
PMVXPGID  DIM      3        3     1903  Program Identifier (Cat PK)
PMVXTICM  DIM      3        3     1906  Reason Theatre Incomplete Catg Rt
PMVXPILC  DIM      3        3     1909  Presenting Illness Code CAT (il)
PMVXFVIO  DIM      3        3     1912  Family Violence (Cat fv)
PMVXFNDM  DIM      19       19    1915  Health Fund Membership Number
PMVXUDF5  DIM      3        3     1934  User defined Category Code
PMVXUDF6  DIM      3        3     1937  User defined Category Code
PMVXUDF7  DIM      3        3     1940  User defined Category Code
PMVXUDF8  DIM      3        3     1943  User defined Category Code
PMVXUDF9  DIM      3        3     1946  User defined Category Code
PMVXUD10  DIM      3        3     1949  User defined Category Code
PMVXUD11  DIM      3        3     1952  User defined Category Code
PMVXUD12  DIM      3        3     1955  User defined Category Code
PMVXUD13  DIM      3        3     1958  User defined Category Code
PMVXUD14  DIM      3        3     1961  User defined Category Code
PMVXUD15  DIM      3        3     1964  User defined Category Code
PMVXTEAM  DIM      5        5     1967  Team
PMVXNWHC  DIM      3        3     1972  Non WA Hospital Contact (Cat cw)
PMVXEDDT  DIM      8        8     1975  Expected Delivery Date (ccyymmdd)
PMVXPHLD  DIM      3        3     1983  Property Held (Cat ps)
PMVXPLOC  DIM      3        3     1986  Property Location (Cat pt)
PMVXDTRT  DIM      8        8     1989  Date Returned (ccyymmdd)
PMVXDFLG  DIM      9        9     1997  Disaster Flag
PMVXFSRC  DIM      3        3     2006  Funding Source (Cat cx)
PMVXCONM  DIM      40       40    2009  Contributor Name
PMVXCPDD  DIM       8       8     2049  Care Plan Documented Date
PMVXPBMI  DIM       5       5     2057  Patient Body Mass Index
.
.          PATDSCFD variables
.
DDATE     DIM       8        8    2062   PATIENT DIS. DATE (CCYYMMDD)
DTIME     DIM       8        8    2070   PATIENT DISCHARGE TIME
DSTAT     DIM       3        3    2078   DISCHARGE STATUS      (CAT D )
DDEST     DIM       3        3    2081   DISCHARGE DESTINATION (CAT DD)
DDIAG     DIM      50       50    2084   DISCHARGE DIAGNOSIS
DDIAG2    DIM      50       50    2134   DISCHARGE DIAGNOSIS (PART 2)
DUSD1     DIM       3        3    2184   USER DEFINED FIELD 1 (CAT D1)
DUSD2     DIM       3        3    2187   USER DEFINED FIELD 2 (CAT D2)
DUSD3     DIM       3        3    2190   USER DEFINED FIELD 3 (CAT D3)
DUSD4     DIM       3        3    2193   USER DEFINED FIELD 4 (CAT D4)
DUSD5     DIM       3        3    2196   USER DEFINED FIELD 5 (CAT D5)
DFMBS     DIM       9        9    2199   DISCHARGE DIAGNOSIS CODE
PTDSDMDC  DIM       4        4    2208   MDC code
PTDSDDRG  DIM       4        4    2212   DRG code
DWLREASN  DIM       3        3    2216   Reason Discharged Patient was
.                                                put back on Waiting List (RW)
PTDSSIDX  DIM       1        1    2219   DRG severity index
PTDSVOGU  DIM       3        3    2220   Vers grouper used when grouping
PTDSOPER  DIM       4        4    2223   Operator who discharged patie
PTDSUYN1  FORM      1        2    2227   User Defined Y/N Field 1
PTDSUYN2  FORM      1        2    2229   User Defined Y/N Field 2
PTDSUYN3  FORM      1        2    2231   User Defined Y/N Field 3
PTDSUYN4  FORM      1        2    2233   User Defined Y/N Field 4
PTDSDWRD  DIM       3        3    2235   Discharge Ward
PTDSDLOS  FORM      4        3    2238   Length of Stay
PTDSSREF  DIM       4        4    2241   Separation referral
PTDSPALD  DIM       3        3    2245   Palliative care days (PRS2)
PTDSDPMN  DIM       3        3    2248   Departure Means (Cat SI)
.
.          MEHLERFD variables
.
MHLRCODE  DIM       3        3    2251  Leave end reason code (CAT LE)
.
.          PATRE1FD variables
.
PKNAME    DIM      80       80    2254   PERSON RESP FOR A/C NAME
PKADD1    DIM      35       35    2334   P.R.A ADDRESS LINE 1
PKADD2    DIM      35       35    2269   P.R.A ADDRESS LINE 2
PKSUBR    DIM      35       35    2304   P.R.A SUBURB
PKADD4    DIM      35       35    2439   P.R.A ADDRESS LINE 2
PKPOST    DIM       8        8    2474   P.R.A POSTCODE
PKTELEP   DIM      20       20    2482   P.R.A PRIVATE TELEPHONE
PKTELEB   DIM      20       20    2502   P.R.A BUSINESS TELEPHONE
PKRELP    DIM      10       10    2522   P.R.A RELATIONSHIP
PTREMOBL  DIM      20       20    2532   P.R.A MOBILE TELEPHONE
PTRESNAM  DIM      40       40    2552   Surname or
.                                             Contact Name for Insurance
PTREGNAM  DIM      40       40    2592   Given Name
.
.          Other variables
.
WSTBY     FORM     8        5     2632   Standby Number
PMQVTDAT   DIM      8        8     2637   Transfer Date (for cancelled transfer)
.                                                       (ccyymmdd)
PMQVTTIM   DIM      8        8     2645   Transfer Date (for cancelled transfer)
.                                                       (hh:mm:ss)
.
OERDATE   DIM      8        8     2653   Expected Return Date (ccyymmdd)
OERTIME   DIM      8        8     2661   Expected Return Time (hh:mm:ss)
.
PMBRREQD  DIM      8        8     2669   Request Date (ccyymmdd)
PMBRREQT  DIM      8        8     2677   Request Time (hh:mm:ss)
PMVXCNID  DIM      10      10     2685   Visit Confirmed WEB User Id
.                                         (websecaf)
PMVXCNDT  DIM      13      13     2695   Visit Confirmed Date and Time
.                                         (ccyymmddhh:mm)
PMVXCASE  DIM      10      10     2708   Case Team (allcasaf)
PMVXEAFL  DIM      1        1     2718   Eclipse Adjustment Flag
.                                         Blank or 0 = No
.                                         1 = Yes
PTDSLSDN  DIM      8        8     2719   Linked Statistical Discharge No
PTDSCLGP  DIM     12       12     2727   Clinical Group
PMQVSPAR   DIM     50       50     2739   Spare Variable
.
.End of Record                     2789
.
. LOCAL VARIABLES
. ---------------
CMDLINE   DIM       200
.
DEFPATH   DIM       60
DIM60     DIM       60
DISNUM    FORM      4
.
ERORTEXT  DIM       80
.
INPFILE   DIM       8
.
MINUS3    FORM      "-3"
.
NEWFILE   DIM       60
NEWPATH   DIM       60
.
OLDPATH   DIM       60
.
RECNUM    FORM      8
.
SAVEFLG   FORM      1
.
USINGORC  DIM       1
.
.
. PROGRAM CONSTANTS
. -----------------
CREATEXT  INIT    "Log file created "
DASHLINE  INIT      "--------------------------------------------------":
                    "------------------------------"
ENDGTEXT  INIT    "Ending   fixit (Option "
OPENTEXT  INIT    "Log file opened "
SP60      INIT    "                                                            "
STARTTXT  INIT    "Starting fixit (Option "
.
.
.
PRGNAM    INIT      "CONVERSION PMSQVIFD"
PRGID     INIT      "X00PMQVI"
VERSION   INIT      "V12.00.00"
+
.*****************************************************************************
.*                             MAIN0000                                      *
.*                         Program Mainline                                  *
.*****************************************************************************
.
MAIN0000  CALL      INIT0000                      * init and open files
.
          CALL      OLOG0000                      * create/open log file
MAIN0500  CALL      OPTN0000                      * get option
          BRANCH    COPTION,MAIN1000:             * run c-isam fixit
                            MAIN2000              * run oracle fixit
          GOTO      MAIN9999                      * exit selected
.
MAIN1000  CALL      KDIR0000                      * Keyin directory
          BRANCH    EXIT,MAIN9000
.
MAIN2000  CALL      CONTQST                       * Ok to continue ?
          BRANCH    CEXIT,MAIN5000:               * yes
                          MAIN0500:               * no
                          MAIN9000                * cancel
.
MAIN5000  BRANCH    COPTION,MAIN6000:             * c-isam fixit
                            MAIN7000              * oracle fixit
.
.         Running c-isam fix
.
MAIN6000  CALL      PREP0000                      * preparing files
          BRANCH    EXIT,MAIN9000
.
          CALL      READ0000                      * read old records and write
          CALL      ENDP0000                      * save/zip saved file
          GOTO      MAIN9000
.
.         Running oracle fix
.
MAIN7000  CALL      OFIX0000                      * run oracle fix
.
MAIN9000  CALL      CLOG0000                      * close log file
.
MAIN9999  CHAIN     PGM
+
.********************************************************************
.*                          INIT0000                                *
.*  Display heading and check that the files needed exist&open them *
.********************************************************************
.
INIT0000  CALL      DISPHEAD
          MOVE      ZERO,RECNUM
          MOVE      ZERO,DISNUM
          
INIT9999  RETURN
+
.*****************************************************************************
.*                                OPTN0000             Called by: MAIN0000   *
.*                        Get user options or exit                           *
.*    Returns:  EXIT    = FALSE (0)  Ok to proceed                           *
.*                        TRUE  (1)  Exit option selected                    *
.*              COPTION - option selected                                    *
.*****************************************************************************
.
OPTN0000  MOVE      "N",USINGORC
          REP       "yYnN",USINGORC
          MOVE      USINGORC,KEY1
          REP       "Y-N-",KEY1
          MATCH     "-",KEY1
          GOTO      OPTN9200 IF NOT EQUAL
.
          DISPLAY   *P1:3,*EF,*P1:4,*V2LON,ZERO,*HOFF,". Exit":
                    *P1:5,*V2LON,ONE,*HOFF,". Run Fixit (c-isam only)"
          MATCH     "Y",USINGORC
          IF        @EQUAL
            DISPLAY   *P1:6,*V2LON,TWO,*HOFF,". Run Fixit (Oracle only)"
          ENDIF
.
OPTN0500  KEYIN     *P1:8,*EL,"Select Option : ":
                    *P17:8,*V2LON,COPTION
.
          COMPARE   ZERO,COPTION                 * exit selected ?
          GOTO      OPTN9500 IF EQUAL            * yes
.
          BRANCH    COPTION,OPTN9000:            * run c-isam fixit
                            OPTN9000             * run oracle fixit
.
          BEEP
          GOTO      OPTN0500
.
OPTN9000  MOVE      ZERO,EXIT
          GOTO      OPTN9999
.
OPTN9200  DISPLAY   *P1:3,*EF,*P1:4," Oracle Option has not been set up ":
                          "correctly":
                    *P1:6," Program will terminate    - ";
          MOVE      "Oracle Option has not been set up correctly",ERORTEXT
          WRITE     LOGFILE,SEQ;*+,ERORTEXT
          CALL      HITENTER
.
OPTN9500  MOVE      ONE,EXIT
.
OPTN9999  RETURN
+
.********************************************************************
.*                          KDIR0000                                *
.*  Keyin directories                                               *
.********************************************************************
.
KDIR0000  MOVE      ONE,SAVEFLG        * Default to keep file
          KEYIN     *P1:10,*EL,"Do you want to save the original file (Y/N) ? ":
                    ANS;
          REP       "yYnN",ANS
          CMATCH    "Y",ANS
          GOTO      KDIR1000 IF EQUAL
          MOVE      ZERO,SAVEFLG       * not to keep file
          CMATCH    "N",ANS
          GOTO      KDIR1000 IF EQUAL
          BEEP
          GOTO      KDIR0000
.
KDIR1000  CALL      DEFT0000                * Get the default path
          BRANCH    EXIT,KDIR9999
          MOVE      SP60,OLDPATH
.
          DISPLAY   *P1:24,*EL,"The directory path must end with a slash (/) ";
.
          MOVE      DEFPATH,OLDPATH
          BRANCH    SAVEFLG,KDIR2000
.
.         Keyin the path for the original file
.
          KEYIN     *P1:12,*EL,"Keyin path for temporarily saving original ":
                    "file: ":
                    *P10:13,*EL,*DV,*RV,OLDPATH:
                    *P10:13,OLDPATH;
          GOTO      KDIR3000
.
KDIR2000  KEYIN     *P1:12,*EL,"Keyin path for saving original file: ":
                    *P10:13,*EL,*DV,*RV,OLDPATH:
                    *P10:13,OLDPATH;
.
KDIR3000  ENDSET    OLDPATH
          APPEND    SP60,OLDPATH
          RESET     OLDPATH
.
          MATCH     SP60,OLDPATH
          IF        @EQUAL
            PACK      OLDPATH,DEFPATH      * use the default
            DISPLAY   *P10:13,*EL,*V2LON,OLDPATH;
          ENDIF
.
          SQUEEZE   OLDPATH
          CMATCH    EXITCHAR,OLDPATH
          GOTO      KDIR9000 IF EQUAL
.
          PACK      DIM60,OLDPATH,SP60
          CALL      VALD0000         * check if it's a valid directory
          BRANCH    EXIT,KDIR1000
.
.         Keyin the path for the new file
.
KDIR5000  MOVE      SP60,NEWPATH
          MOVE      DEFPATH,NEWPATH
          KEYIN     *P1:15,*EL,"Keyin path for the new file: ":
                    *P10:16,*EL,*DV,*RV,NEWPATH:
                    *P10:16,NEWPATH;
          ENDSET    NEWPATH
          APPEND    SP60,NEWPATH
          RESET     NEWPATH
.
          MATCH     SP60,NEWPATH
          IF        @EQUAL
            PACK      NEWPATH,DEFPATH      * use the default
            DISPLAY   *P10:16,*V2LON,NEWPATH;
          ENDIF
.
          SQUEEZE   NEWPATH
          CMATCH    EXITCHAR,NEWPATH
          GOTO      KDIR9000 IF EQUAL
.
          PACK      DIM60,NEWPATH,SP60
          CALL      VALD0000         * check if it's a valid directory
          BRANCH    EXIT,KDIR5000
          GOTO      KDIR9999
.
KDIR9000  MOVE      ONE,EXIT
.
KDIR9999  DISPLAY   *P1:24,*EL;
          RETURN
+
.********************************************************************
.*                          PREP0000                                *
.*  Preparing files                                                 *
.********************************************************************
.
PREP0000  CALL      IBACLOCK
          REP       " 0",CDATE
          REP       " 0",CTIMEIS
          DISPLAY   *P1:18,"Started : ",CDATE,SP1,CTIMEIS:
                    *P1:20,"Record : "
.
          CALL      SLOG0000                      * write start to log file
.
          MOVE      "pmsqviaf",INPFILE
          CALL      CHEK0000             * check file exists or has been changed
          BRANCH    EXIT,PREP9000
.
          CLOSE     OLDFILE1
          DISPLAY   *P1:24,*EL,"Copying files ... Please wait !! ";
.
.         Copy old file to the keyin directory
.
          PACK      CMDLINE,SP60,SP60
          CLEAR     CMDLINE
          APPEND    "cp `ldat pmsqviaf.dat` ",CMDLINE
          APPEND    OLDPATH,CMDLINE
          APPEND    "spmqviaf.dat",CMDLINE
          APPEND    SP60,CMDLINE
          RESET     CMDLINE
          EXECUTE   CMDLINE,TASKID
.
          CMATCH    "0",TASKID
          IF        !@EQUAL
            GOTO      PREP8000
          ENDIF
.
          PACK      CMDLINE,SP60,SP60
          CLEAR     CMDLINE
          APPEND    "cp `ldat pmsqviaf.idx` ",CMDLINE
          APPEND    OLDPATH,CMDLINE
          APPEND    "spmqviaf.idx",CMDLINE
          APPEND    SP60,CMDLINE
          RESET     CMDLINE
          EXECUTE   CMDLINE,TASKID
.
          CMATCH    "0",TASKID
          IF        !@EQUAL
            GOTO      PREP8000
          ENDIF
.
.         Remove the original files
.
          PACK      CMDLINE,SP60,SP60
          CLEAR     CMDLINE
          APPEND    "iserase ",CMDLINE
          APPEND    DEFPATH,CMDLINE
          APPEND    "pmsqviaf",CMDLINE
          RESET     CMDLINE
          EXECUTE   CMDLINE,TASKID
.
          CMATCH    "0",TASKID
          IF        !@EQUAL
            MOVE      "Unable to remove the original file.  ",ERORTEXT
            WRITE     LOGFILE,SEQ;ERORTEXT
            DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
            CALL      HITENTER
            GOTO      PREP9000
          ENDIF
.
.         Opening old file after being copied
.
          MOVE      SP60,DIM60
          CLEAR     DIM60
          APPEND    OLDPATH,DIM60
          APPEND    "spmqviaf",DIM60
          APPEND    SP60,DIM60
          RESET     DIM60
.
          MOVE      ZERO,OVRCD
          TRAP      OVERCOND IF IO
          OPEN      OLDFILE1,DIM60
          TRAPCLR   IO
          IF        OVRCD = 1
            MOVE      "Unable to open saved original file.  ",ERORTEXT
            WRITE     LOGFILE,SEQ;ERORTEXT
            DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
            CALL      HITENTER
            GOTO      PREP9000
          ENDIF
.
.         Create the new file
.
          DISPLAY   *P1:24,*EL,"Creating new files ... Please wait !! ";
          PACK      NEWFILE,SP60
          CLEAR     NEWFILE
          APPEND    NEWPATH,NEWFILE
          APPEND    "pmsqviaf",NEWFILE
          APPEND    SP60,NEWFILE
          RESET     NEWFILE
          SQUEEZE   NEWFILE
.
PREP1000  PACK      CMDLINE,SP60,SP60
          CLEAR     CMDLINE
          APPEND    "isbuild ",CMDLINE
          APPEND    NEWFILE,CMDLINE
.
.  The files new record length and unique key must be written here
.      eg    APPEND    " 195 UC9-16",CMDLINE
.
          APPEND    " 2789 UC1-20,21-22",CMDLINE
          APPEND    SP60,CMDLINE
          RESET     CMDLINE
          EXECUTE   CMDLINE,TASKID
.
          OPEN      PMSQVIA1,NEWFILE
.
          DISPLAY   *P1:24,*EL;
          MOVE      ZERO,EXIT
          GOTO      PREP9999
.
PREP5000  MOVE      "Old file not found.  ",ERORTEXT
          WRITE     LOGFILE,SEQ;ERORTEXT
          DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
          CALL      HITENTER
          GOTO      PREP9000
.
PREP8000  MOVE      "Unable to copy original file.  (Error: ",ERORTEXT
          ENDSET    ERORTEXT
          APPEND    TASKID,ERORTEXT
          APPEND    ")  ",ERORTEXT
          RESET     ERORTEXT
          WRITE     LOGFILE,SEQ;ERORTEXT
          DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
          CALL      HITENTER
.
PREP9000  MOVE      ONE,EXIT
.
PREP9999  RETURN
+
.********************************************************************
.*                          CHEK0000                                *
.*  Check if file exists, or has already been converted             *
.********************************************************************
.
CHEK0000  MOVE      ZERO,EXIT
.
          MOVE      ZERO,OVRCD
          TRAP      OVERCOND GIVING DIM60 IF IO
          OPEN      OLDFILE1,INPFILE
          TRAPCLR   IO
          BRANCH    OVRCD,CHEK2000       * Original file does not exist
          CLOSE     OLDFILE1
          GOTO      CHEK9999
.
CHEK2000  RESET     DIM60
          SCAN      "I * I",DIM60
          DISPLAY   *P1:23,*EF,"File '",INPFILE,"' ";
          IF        @EQUAL
            DISPLAY   "does not exist - ";
            MOVE      "File does not exist",ERORTEXT
            WRITE     LOGFILE,SEQ;ERORTEXT
          ELSE
            RESET     DIM60
            SCAN      "I * L",DIM60
            IF        @EQUAL
              DISPLAY   "has already been converted - ";
              MOVE      "File has already been converted",ERORTEXT
              WRITE     LOGFILE,SEQ;ERORTEXT
            ELSE
              DISPLAY   "has caused an IO error - ";
              MOVE      "File has caused an IO Error",ERORTEXT
              WRITE     LOGFILE,SEQ;ERORTEXT
            ENDIF
          ENDIF
          MOVE      "File will be bypassed",ERORTEXT
          WRITE     LOGFILE,SEQ;ERORTEXT
          DISPLAY   *+,ERORTEXT
.
          CALL      HITENTER
          DISPLAY   *P1:23,*EF;
.
CHEK9000  MOVE      ONE,EXIT
.
CHEK9999  RETURN
+
.**********************************************************************
.*                               READ0000                             *
.*             loop thru old file and write each record               *
.**********************************************************************
.
READ0000  DISPLAY   *P1:20,*EL,"Record No. : ";
.
          PACK      KEY22,SP60
          CALL      READSOLD                      * position at start
READ1000  CALL      READKOLD                      * read next record
          BRANCH    OVRCD,READ6000                * no more records
.
          ADD       ONE,RECNUM                    * update record counter
          ADD       ONE,DISNUM                    * Display counter
.
          IF        DISNUM = 5000  | RECNUM = 1
            MOVE      ZERO,DISNUM
            DISPLAY   *P15:20,*V2LON,RECNUM
          ENDIF
.
.  All necessary changes to the files field lengths, date changes
.  or any other sort of modification must be made here
.
          PACK      PKNAME,OLDNAME,SP70,SP70
.
          PACK      KEY22,DPMQVMES,DPMQVTRN,SP70
          CALL      WRPMQVI1                    * write to new file
.
          GOTO      READ1000                      * get next record
.
READ6000  CLOSE     PMSQVIA1                      * close new file
          CLOSE     OLDFILE1                      * close old file
.
          CALL      IBACLOCK
          REP       " 0",CDATE
          REP       " 0",CTIMEIS
          DISPLAY   *P15:20,*V2LON,RECNUM,*HOFF:
                    *P1:22,"Ended  : ",CDATE,SP1,CTIMEIS:
                    *P1:24;
.
READ9999  RETURN
+
.**********************************************************************
.*                               VALD0000                             *
.*        Check if it a valid directory                               *
.**********************************************************************
.
VALD0000  MOVE      ZERO,EXIT
.
          SQUEEZE   DIM60
          ENDSET    DIM60
          CMATCH    SLASH,DIM60
          IF        !@EQUAL
            MOVE      "Directory path must end with a slash (/) ",ERORTEXT
            WRITE     LOGFILE,SEQ;ERORTEXT
            DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
            CALL      HITENTER
            GOTO      VALD9000
          ENDIF
          RESET     DIM60
.
          PACK      CMDLINE,SP60,SP60
          CLEAR     CMDLINE
          APPEND    "cd ",CMDLINE
          APPEND    DIM60,CMDLINE
          APPEND    SP60,CMDLINE
          RESET     CMDLINE
          EXECUTE   CMDLINE,TASKID      * check if exists
.
          CMATCH    "0",TASKID
          IF        !@EQUAL
            MOVE      "Directory does not exist ",ERORTEXT
            WRITE     LOGFILE,SEQ;ERORTEXT
            DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
            CALL      HITENTER
            GOTO      VALD9000
          ENDIF
          GOTO      VALD9999
.
VALD9000  MOVE      ONE,EXIT            * Not valid
.
VALD9999  RETURN
+
.**********************************************************************
.*                               ENDP0000                             *
.*        Remove or zip save file                                     *
.**********************************************************************
.
ENDP0000  MOVE      SP60,DIM60
          CLEAR     DIM60
          APPEND    OLDPATH,DIM60        * set up the saved file with path
          APPEND    "spmqviaf*",DIM60
          APPEND    SP60,DIM60
          RESET     DIM60
          SQUEEZE   DIM60
.
          PACK      CMDLINE,SP60,SP60
          CLEAR     CMDLINE
          IF        SAVEFLG = 1
            APPEND    "gzip -f ",CMDLINE
            APPEND    DIM60,CMDLINE
            APPEND    SP60,CMDLINE
            RESET     CMDLINE
            DISPLAY   *P1:24,*EL,"Compressing original file.. ":
                      "Please wait !!  ";
          ELSE
            APPEND    "rm ",CMDLINE
            APPEND    DIM60,CMDLINE
            APPEND    SP60,CMDLINE
            RESET     CMDLINE
            DISPLAY   *P1:24,*EL,"Removing original file.. Please wait !!  ";
          ENDIF
          EXECUTE   CMDLINE,TASKID      * check if exists
.
          CMATCH    "0",TASKID
          IF        !@EQUAL
            MOVE      "Saved file not zipped or removed.  ",ERORTEXT
            WRITE     LOGFILE,SEQ;ERORTEXT
            DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
            CALL      HITENTER
            GOTO      ENDP9999
          ENDIF
.
          CALL      IBACLOCK
          REP       " 0",CDATE
          REP       " 0",CTIMEIS
          DISPLAY   *P1:24,*EL,*B,"Finished processing  ",CDATE,SP1,CTIMEIS:
                    ".  ";
          CALL      HITENTER
.
          CALL      ELOG0000                     * write an end log entry
.
ENDP9999  RETURN
+
.**********************************************************************
.*        DEFT0000 -  Get the default directory                       *
.**********************************************************************
.
DEFT0000  EXECUTE   "ldat pmsqviaf.dat > temp.txt",TASKID
.
          PACK      DEFPATH,SP30,SP30
          CLOSE     FINDFILE
          MOVE      ZERO,OVRCD
          TRAP      OVERCOND IF IO
          OPEN      FINDFILE,"temp"
          TRAPCLR   IO
          BRANCH    OVRCD,DEFT3000
.
          READ      FINDFILE,SEQ;DEFPATH
          GOTO      DEFT3000 IF OVER
.
          ENDSET    DEFPATH
DEFT1000  CMATCH    "/",DEFPATH
          GOTO      DEFT2000 IF EQUAL
.
          BUMP      DEFPATH,-1
          GOTO      DEFT1000 IF NOT EOS
          GOTO      DEFT3000
.
DEFT2000  LENSET    DEFPATH
          RESET     DEFPATH
.
          PACK      DEFPATH,DEFPATH,SP30,SP30,SP30,SP30
          STRIP     DEFPATH
          ENDSET    DEFPATH
          RESET     DEFPATH
          CLOSE     FINDFILE
          MOVE      ZERO,EXIT
          GOTO      DEFT9999
.
DEFT3000  MOVE      "Error finding 'pmsqviaf'.  ",ERORTEXT
          WRITE     LOGFILE,SEQ;ERORTEXT
          DISPLAY   *P1:24,*EL,*B,*+,ERORTEXT;
          CALL      HITENTER
          CLOSE     FINDFILE
          MOVE      ONE,EXIT
.
DEFT9999  RETURN
+
.*****************************************************************************
.*                            OLOG0000                                       *
.*                    Open the log file                                      *
.*****************************************************************************
.
OLOG0000  CALL      IBACLOCK
          REP       " 0",CDATE
          REP       " 0",CTIMEIS
.
          MOVE      ZERO,OVRCD
          TRAP      OVERCOND IF IO
          OPEN      LOGFILE,"x00pmqvi.log"       * open log file
          TRAPCLR   IO
          IF        OVRCD = 1
            PREP      LOGFILE,"x00pmqvi.log"     * create and open log file
            WRITE     LOGFILE,MINUS3;DASHLINE
            WRITE     LOGFILE,SEQ;CREATEXT,CDATE,SP1,CTIMEIS
          ELSE
            WRITE     LOGFILE,MINUS3;DASHLINE
            WRITE     LOGFILE,SEQ;OPENTEXT,CDATE,SP1,CTIMEIS
          ENDIF
.
OLOG9999  RETURN
+
.*****************************************************************************
.*                            CLOG0000                                       *
.*                    Close the log file                                     *
.*****************************************************************************
.
CLOG0000  CLOSE     LOGFILE
.
CLOG9999  RETURN
+
.*****************************************************************************
.*                            SLOG0000                                       *
.*                    Write a start log to the log file                      *
.*****************************************************************************
.
SLOG0000  WRITE     LOGFILE,SEQ;DASHLINE
          WRITE     LOGFILE,SEQ;STARTTXT,COPTION,RBRACK,SP1,CDATE,SP1:
                                   CTIMEIS
.
SLOG9999  RETURN
+
.*****************************************************************************
.*                            ELOG0000                                       *
.*                    Write an end log to the log file                       *
.*****************************************************************************
.
ELOG0000  WRITE     LOGFILE,SEQ;ENDGTEXT,COPTION,RBRACK,SP1,CDATE,SP1:
                                   CTIMEIS
ELOG9999  RETURN
+
.*****************************************************************************
.*                            OFIX0000                                       *
.*                    Oracle fix to "PMSQVIFD"                               *
.*****************************************************************************
.
OFIX0000  DISPLAY   *P1:24,*EL;
          CALL      IBACLOCK
          REP       " 0",CDATE
          REP       " 0",CTIMEIS
          DISPLAY   *P1:18,"Started : ",CDATE,SP1,CTIMEIS:
                    *P1:20,*EL,"Record No. :";
.
          CALL      SLOG0000                      * write start to log file
.
          OPEN      PMSQVIA1,"pmsqviaf"
.
          PACK      KEY22,SP70
          CALL      RSPMQVI1                      * position at start of file
OFIX0500  CALL      RKPMQVI1                      * read next record
          BRANCH    OVRCD,OFIX9000                * eof - finished
.
          ADD       ONE,RECNUM                    * increment record counter
          ADD       ONE,DISNUM                    * Display counter
.         
          IF        DISNUM = 5000  | RECNUM = 1
            MOVE      ZERO,DISNUM 
            DISPLAY   *P15:20,*V2LON,RECNUM
          ENDIF
.
.>>>>>>>  Add code here to populate/update variables
.
          PACK      PKNAME,PKNAME,SP70,SP70
          CALL      UPPMQVI1
.
          GOTO      OFIX0500                     * get next record
.         
OFIX9000  CLOSE     PMSQVIA1
.
          CALL      IBACLOCK
          REP       " 0",CDATE
          REP       " 0",CTIMEIS
          DISPLAY   *P15:20,*V2LON,RECNUM,*HOFF:
                    *P1:22,"Update completed ",CDATE,SP1,CTIMEIS:
                    *P1:24;
          CALL      HITENTER
.
          CALL      ELOG0000                     * write an end log entry
.
OFIX9999  RETURN
.
OFDUMYIO  RETURN
+
.*****************************************************************************
.*        I/O Routines                                                       *
.*****************************************************************************
.
.                  ******************************    OLD IO ROUTINES
.                  Copy the Positional Read (RS or RDS) from original I/O file,
.                  - change Label to READSOLD and the index name to OLDFILE1
.
.
READSOLD  MOVE      ZERO,OVRCD
          RESET     KEY22
          READ      OLDFILE1,KEY22;;
          RETURN
.
.                  Copy the Read Next (RK or RDK) from the original I/O file
.                  - change Label to READKOLD and the index name to OLDFILE1
.                  - change any fields that are changing to a prefix of OLD,
.                    eg. PTEDSPAR becomes OLDDSPAR
.
READKOLD  MOVE      ZERO,OVRCD
          READKS    OLDFILE1;DPMQVMES,DPMQVTRN,AADMNO,AURNO:
                                  ADATE,ATIME,ASTAT,AINVPRT,ALACDTE:
                                  ACANCEL,ADOCTR,ADOCTA,ADOCTL,ASRCE:
                                  ATYPE,ACLSS,ACARE,AFUNDH,AFNDTB:
                                  AFNDMM,AELIG,AVISIT,AALERG,AILLN:
                                  ADIAG1,ADIAG2,ADISC,ADOCTT,ACLSSFT:
                                  AALLOW,AMBS,ACLAIM,ADIET,APLOCCR:
                                  ASTAY,ADYHOSP,AMEMB,AMEMBNO,ACOMM1:
                                  ACOMM2,APLUR,APURGE,AUSR1,AUSR2:
                                  AUSR3,AUSR4,AUSR5,AUSR6,AUSR7:
                                  ADSCHI,ARDRNAM,AFNDYY,AFNDCG,AOCCDTE:
                                  ACODDTE,ARETDTE,AMUMADM,PTMIPVIS,ABWGHT:
                                  PTMSRFGP,PTMSGPPC,PTMSFHAN,PTMSECRA,PTMSMGIN:
                                  PTMIDDIG,PTMIGPPT,PTMIDOFR,PTMIREFD,PTMIDFCN:
                                  PTMIPHPU,PTMIAGNC,PTMIESSF,PTMIUSR8,PTMIUSR9:
                                  PTMIUSR0,PTMIPDRG,PTMIOPER,PTMIXWRD,PTMIADOC:
                                  PTMIREGS,PTMIUYN1,PTMIUYN2,PTMIPANO,PTMIPADT:
                                  PTMIPCMX,PTMIGSTA,PTMICMXP,PTMIEBED,PTMIDMOV:
                                  PTMIDFAS,PTMICRCD,PTMIFINV,PTMICONB,PTMIDATC:
                                  PTMITIMC,PTMIWEBC,PTMIDATU,PTMITIMU,PTMIWEBU:
                                  PTMI3BDY,PTMI3BAD,PTMILSDN,PTMIOGNO,TWARD:
                                  TBED,TDATE,TTIME,TURNO,TADMN:
                                  TRATEF,TRATEG,TDISC,TALLW,TATYPE:
                                  TADOCT,TRATEH,TEXTRA,PTTRITFS,TRBTYP:
                                  TRBEND,TCHSTAT,TDEPT,PTTRLTYP,PTTREPNO:
                                  PTTREPSD,PTTRLSPT,PTTRLSRB,PTTRAEND,PTTRADPT:
                                  PTTRADRB,PTTRNHAC,PTTROPER,PTTRAUAT,PTTRCDAT:
                                  PTTRCTIM,PTTRCUID,PTTRLTSC,PTTRUCID,PTTRUUID:
                                  PTTRCLTY,PTTRTRTY,PTTRTEAM,PTTRRSTR,PTTRRESI:
                                  PTTRFSRC,PTTRHFND,PTTRFTBL,PTTRHFMN,PTTRHFCN:
                                  PMVXCSNR,PMVXPOST,PMVXPIND,PMVXVLOC,PMVXCFSG:
                                  PMVXINGP,PMVXCPTH,PMVXHCP1,PMVXHCP2,PMVXHCP3:
                                  PMVXHCP4,PMVXRHC1,PMVXRH1G,PMVXRH1C,PMVXRHC2:
                                  PMVXRH2G,PMVXRH2C,PMVXRHC3,PMVXRH3G,PMVXRH3C:
                                  PMVXRHC4,PMVXRH4G,PMVXRH4C,PMVXABRG,PMVXCADM:
                                  PMVXIRAD,PMVXIDUS,PMVXCRAV,PMVXRCCT,PMVXAPWD:
                                  PMVXAPBD,PMVXPOWD,PMVXPOBD,PMVXPSTY,PMVXVALW:
                                  PMVXPALW,PMVXINDC,PMVXMDAV,PMVXFRMS,PMVXCSNG:
                                  PMVXPWGT,PMVXPHGT,PMVXDHWR,PMVXEDC1,PMVXEDC2:
                                  PMVXEDC3,PMVXHOME,PMVXUDF1,PMVXUDF2,PMVXUDF3:
                                  PMVXUDF4,PMVXUDT1,PMVXUDT2,PMVXUDT3,PMVXUDT4:
                                  PMVXUDT5,PMVXUDT6,PMVXCDTE,PMVXCTIM,PMVXWEBC:
                                  PMVXLUPD,PMVXLUPT,PMVXWEBU,PMVXMHLS,PMVXPICD:
                                  PMVXRMOR,PMVXASUT,PMVXELPS,PMVXEMPL,PMVXFINP:
                                  PMVXOCCP,PMVXPALC,PMVXPPAL,PMVXPPPT,PMVXPSOS:
                                  PMVXPYSP,PMVXQLDB,PMVXREAD,PMVXUDIN,PMVXUREA:
                                  PMVXUSAC,PMVXUVTH,PMVXINTR,PMVXLNG1,PMVXASGC:
                                  PMVXMHOS,PMVXDSPD,PMVXDSIF,PMVXPRMI,PMVXPRAI:
                                  PMVXPRES,PMVXUITR,PMVXRPOA,PMVXRCN1,PMVXRCN2:
                                  PMVXRHFU,PMVXRDVA,PMVXRSLO,PMVXMLOC,PMVXPACC:
                                  PMVXEDU1,PMVXEDU2,PMVXEDU3,PMVXPRGM,PMVXCONF:
                                  PMVXEOCL,PMVXSLOC,PMVXSCLI,PMVXSTRA,PMVXQASN:
                                  PMVXATCP,PMVXATIM,PMVXITIM,PMVXHFGN,PMVXHFSN:
                                  PMVXFUPI,PMVXPOEC,PMVXPGID,PMVXTICM,PMVXPILC:
                                  PMVXFVIO,PMVXFNDM,PMVXUDF5,PMVXUDF6,PMVXUDF7:
                                  PMVXUDF8,PMVXUDF9,PMVXUD10,PMVXUD11,PMVXUD12:
                                  PMVXUD13,PMVXUD14,PMVXUD15,PMVXTEAM,PMVXNWHC:
                                  PMVXEDDT,PMVXPHLD,PMVXPLOC,PMVXDTRT,PMVXDFLG:
                                  PMVXFSRC,PMVXCONM,PMVXCPDD,PMVXPBMI,DDATE:
                                  DTIME,DSTAT,DDEST,DDIAG,DDIAG2:
                                  DUSD1,DUSD2,DUSD3,DUSD4,DUSD5:
                                  DFMBS,PTDSDMDC,PTDSDDRG,DWLREASN,PTDSSIDX:
                                  PTDSVOGU,PTDSOPER,PTDSUYN1,PTDSUYN2,PTDSUYN3:
                                  PTDSUYN4,PTDSDWRD,PTDSDLOS,PTDSSREF,PTDSPALD:
                                  PTDSDPMN,MHLRCODE,OLDNAME,PKADD1,PKADD2:
                                  PKSUBR,PKADD4,PKPOST,PKTELEP,PKTELEB:
                                  PKRELP,PTREMOBL,PTRESNAM,PTREGNAM,WSTBY:
                                  PMQVTDAT,PMQVTTIM,OERDATE,OERTIME,PMBRREQD:
                                  PMBRREQT,PMVXCNID,PMVXCNDT,PMVXCASE,PMVXEAFL:
                                  PTDSLSDN,PTDSCLGP,PMQVSPAR
          GOTO      OVERCOND IF OVER
          MOVE      DPMQVMES,PMQVMESI
          MOVE      DPMQVTRN,PMQVTRAN
          RETURN
.
.                  ******************************    NEW IO ROUTINES
.                  Copy the Write statement from the new I/O file           
.                  (no changes are needed to this routine)               
.
WRPMQVI1  RESET     KEY22
          MOVE      PMQVMESI,DPMQVMES
          MOVE      PMQVTRAN,DPMQVTRN
          WRITE     PMSQVIA1,KEY22;DPMQVMES,DPMQVTRN,AADMNO,AURNO:
                                  ADATE,ATIME,ASTAT,AINVPRT,ALACDTE:
                                  ACANCEL,ADOCTR,ADOCTA,ADOCTL,ASRCE:
                                  ATYPE,ACLSS,ACARE,AFUNDH,AFNDTB:
                                  AFNDMM,AELIG,AVISIT,AALERG,AILLN:
                                  ADIAG1,ADIAG2,ADISC,ADOCTT,ACLSSFT:
                                  AALLOW,AMBS,ACLAIM,ADIET,APLOCCR:
                                  ASTAY,ADYHOSP,AMEMB,AMEMBNO,ACOMM1:
                                  ACOMM2,APLUR,APURGE,AUSR1,AUSR2:
                                  AUSR3,AUSR4,AUSR5,AUSR6,AUSR7:
                                  ADSCHI,ARDRNAM,AFNDYY,AFNDCG,AOCCDTE:
                                  ACODDTE,ARETDTE,AMUMADM,PTMIPVIS,ABWGHT:
                                  PTMSRFGP,PTMSGPPC,PTMSFHAN,PTMSECRA,PTMSMGIN:
                                  PTMIDDIG,PTMIGPPT,PTMIDOFR,PTMIREFD,PTMIDFCN:
                                  PTMIPHPU,PTMIAGNC,PTMIESSF,PTMIUSR8,PTMIUSR9:
                                  PTMIUSR0,PTMIPDRG,PTMIOPER,PTMIXWRD,PTMIADOC:
                                  PTMIREGS,PTMIUYN1,PTMIUYN2,PTMIPANO,PTMIPADT:
                                  PTMIPCMX,PTMIGSTA,PTMICMXP,PTMIEBED,PTMIDMOV:
                                  PTMIDFAS,PTMICRCD,PTMIFINV,PTMICONB,PTMIDATC:
                                  PTMITIMC,PTMIWEBC,PTMIDATU,PTMITIMU,PTMIWEBU:
                                  PTMI3BDY,PTMI3BAD,PTMILSDN,PTMIOGNO,TWARD:
                                  TBED,TDATE,TTIME,TURNO,TADMN:
                                  TRATEF,TRATEG,TDISC,TALLW,TATYPE:
                                  TADOCT,TRATEH,TEXTRA,PTTRITFS,TRBTYP:
                                  TRBEND,TCHSTAT,TDEPT,PTTRLTYP,PTTREPNO:
                                  PTTREPSD,PTTRLSPT,PTTRLSRB,PTTRAEND,PTTRADPT:
                                  PTTRADRB,PTTRNHAC,PTTROPER,PTTRAUAT,PTTRCDAT:
                                  PTTRCTIM,PTTRCUID,PTTRLTSC,PTTRUCID,PTTRUUID:
                                  PTTRCLTY,PTTRTRTY,PTTRTEAM,PTTRRSTR,PTTRRESI:
                                  PTTRFSRC,PTTRHFND,PTTRFTBL,PTTRHFMN,PTTRHFCN:
                                  PMVXCSNR,PMVXPOST,PMVXPIND,PMVXVLOC,PMVXCFSG:
                                  PMVXINGP,PMVXCPTH,PMVXHCP1,PMVXHCP2,PMVXHCP3:
                                  PMVXHCP4,PMVXRHC1,PMVXRH1G,PMVXRH1C,PMVXRHC2:
                                  PMVXRH2G,PMVXRH2C,PMVXRHC3,PMVXRH3G,PMVXRH3C:
                                  PMVXRHC4,PMVXRH4G,PMVXRH4C,PMVXABRG,PMVXCADM:
                                  PMVXIRAD,PMVXIDUS,PMVXCRAV,PMVXRCCT,PMVXAPWD:
                                  PMVXAPBD,PMVXPOWD,PMVXPOBD,PMVXPSTY,PMVXVALW:
                                  PMVXPALW,PMVXINDC,PMVXMDAV,PMVXFRMS,PMVXCSNG:
                                  PMVXPWGT,PMVXPHGT,PMVXDHWR,PMVXEDC1,PMVXEDC2:
                                  PMVXEDC3,PMVXHOME,PMVXUDF1,PMVXUDF2,PMVXUDF3:
                                  PMVXUDF4,PMVXUDT1,PMVXUDT2,PMVXUDT3,PMVXUDT4:
                                  PMVXUDT5,PMVXUDT6,PMVXCDTE,PMVXCTIM,PMVXWEBC:
                                  PMVXLUPD,PMVXLUPT,PMVXWEBU,PMVXMHLS,PMVXPICD:
                                  PMVXRMOR,PMVXASUT,PMVXELPS,PMVXEMPL,PMVXFINP:
                                  PMVXOCCP,PMVXPALC,PMVXPPAL,PMVXPPPT,PMVXPSOS:
                                  PMVXPYSP,PMVXQLDB,PMVXREAD,PMVXUDIN,PMVXUREA:
                                  PMVXUSAC,PMVXUVTH,PMVXINTR,PMVXLNG1,PMVXASGC:
                                  PMVXMHOS,PMVXDSPD,PMVXDSIF,PMVXPRMI,PMVXPRAI:
                                  PMVXPRES,PMVXUITR,PMVXRPOA,PMVXRCN1,PMVXRCN2:
                                  PMVXRHFU,PMVXRDVA,PMVXRSLO,PMVXMLOC,PMVXPACC:
                                  PMVXEDU1,PMVXEDU2,PMVXEDU3,PMVXPRGM,PMVXCONF:
                                  PMVXEOCL,PMVXSLOC,PMVXSCLI,PMVXSTRA,PMVXQASN:
                                  PMVXATCP,PMVXATIM,PMVXITIM,PMVXHFGN,PMVXHFSN:
                                  PMVXFUPI,PMVXPOEC,PMVXPGID,PMVXTICM,PMVXPILC:
                                  PMVXFVIO,PMVXFNDM,PMVXUDF5,PMVXUDF6,PMVXUDF7:
                                  PMVXUDF8,PMVXUDF9,PMVXUD10,PMVXUD11,PMVXUD12:
                                  PMVXUD13,PMVXUD14,PMVXUD15,PMVXTEAM,PMVXNWHC:
                                  PMVXEDDT,PMVXPHLD,PMVXPLOC,PMVXDTRT,PMVXDFLG:
                                  PMVXFSRC,PMVXCONM,PMVXCPDD,PMVXPBMI,DDATE:
                                  DTIME,DSTAT,DDEST,DDIAG,DDIAG2:
                                  DUSD1,DUSD2,DUSD3,DUSD4,DUSD5:
                                  DFMBS,PTDSDMDC,PTDSDDRG,DWLREASN,PTDSSIDX:
                                  PTDSVOGU,PTDSOPER,PTDSUYN1,PTDSUYN2,PTDSUYN3:
                                  PTDSUYN4,PTDSDWRD,PTDSDLOS,PTDSSREF,PTDSPALD:
                                  PTDSDPMN,MHLRCODE,PKNAME,PKADD1,PKADD2:
                                  PKSUBR,PKADD4,PKPOST,PKTELEP,PKTELEB:
                                  PKRELP,PTREMOBL,PTRESNAM,PTREGNAM,WSTBY:
                                  PMQVTDAT,PMQVTTIM,OERDATE,OERTIME,PMBRREQD:
                                  PMBRREQT,PMVXCNID,PMVXCNDT,PMVXCASE,PMVXEAFL:
                                  PTDSLSDN,PTDSCLGP,PMQVSPAR
          RETURN
.
.
.                  For Oracle fixits, you will probably also need to copy
.                  the RS.., RK.... & UP.... I/O routines for the new FD.
.
RSPMQVI1  RESET     KEY22
          READ      PMSQVIA1,KEY22;;
          RETURN
.
RKPMQVI1  MOVE      ZERO,OVRCD
          READKS    PMSQVIA1;DPMQVMES,DPMQVTRN,AADMNO,AURNO:
                                  ADATE,ATIME,ASTAT,AINVPRT,ALACDTE:
                                  ACANCEL,ADOCTR,ADOCTA,ADOCTL,ASRCE:
                                  ATYPE,ACLSS,ACARE,AFUNDH,AFNDTB:
                                  AFNDMM,AELIG,AVISIT,AALERG,AILLN:
                                  ADIAG1,ADIAG2,ADISC,ADOCTT,ACLSSFT:
                                  AALLOW,AMBS,ACLAIM,ADIET,APLOCCR:
                                  ASTAY,ADYHOSP,AMEMB,AMEMBNO,ACOMM1:
                                  ACOMM2,APLUR,APURGE,AUSR1,AUSR2:
                                  AUSR3,AUSR4,AUSR5,AUSR6,AUSR7:
                                  ADSCHI,ARDRNAM,AFNDYY,AFNDCG,AOCCDTE:
                                  ACODDTE,ARETDTE,AMUMADM,PTMIPVIS,ABWGHT:
                                  PTMSRFGP,PTMSGPPC,PTMSFHAN,PTMSECRA,PTMSMGIN:
                                  PTMIDDIG,PTMIGPPT,PTMIDOFR,PTMIREFD,PTMIDFCN:
                                  PTMIPHPU,PTMIAGNC,PTMIESSF,PTMIUSR8,PTMIUSR9:
                                  PTMIUSR0,PTMIPDRG,PTMIOPER,PTMIXWRD,PTMIADOC:
                                  PTMIREGS,PTMIUYN1,PTMIUYN2,PTMIPANO,PTMIPADT:
                                  PTMIPCMX,PTMIGSTA,PTMICMXP,PTMIEBED,PTMIDMOV:
                                  PTMIDFAS,PTMICRCD,PTMIFINV,PTMICONB,PTMIDATC:
                                  PTMITIMC,PTMIWEBC,PTMIDATU,PTMITIMU,PTMIWEBU:
                                  PTMI3BDY,PTMI3BAD,PTMILSDN,PTMIOGNO,TWARD:
                                  TBED,TDATE,TTIME,TURNO,TADMN:
                                  TRATEF,TRATEG,TDISC,TALLW,TATYPE:
                                  TADOCT,TRATEH,TEXTRA,PTTRITFS,TRBTYP:
                                  TRBEND,TCHSTAT,TDEPT,PTTRLTYP,PTTREPNO:
                                  PTTREPSD,PTTRLSPT,PTTRLSRB,PTTRAEND,PTTRADPT:
                                  PTTRADRB,PTTRNHAC,PTTROPER,PTTRAUAT,PTTRCDAT:
                                  PTTRCTIM,PTTRCUID,PTTRLTSC,PTTRUCID,PTTRUUID:
                                  PTTRCLTY,PTTRTRTY,PTTRTEAM,PTTRRSTR,PTTRRESI:
                                  PTTRFSRC,PTTRHFND,PTTRFTBL,PTTRHFMN,PTTRHFCN:
                                  PMVXCSNR,PMVXPOST,PMVXPIND,PMVXVLOC,PMVXCFSG:
                                  PMVXINGP,PMVXCPTH,PMVXHCP1,PMVXHCP2,PMVXHCP3:
                                  PMVXHCP4,PMVXRHC1,PMVXRH1G,PMVXRH1C,PMVXRHC2:
                                  PMVXRH2G,PMVXRH2C,PMVXRHC3,PMVXRH3G,PMVXRH3C:
                                  PMVXRHC4,PMVXRH4G,PMVXRH4C,PMVXABRG,PMVXCADM:
                                  PMVXIRAD,PMVXIDUS,PMVXCRAV,PMVXRCCT,PMVXAPWD:
                                  PMVXAPBD,PMVXPOWD,PMVXPOBD,PMVXPSTY,PMVXVALW:
                                  PMVXPALW,PMVXINDC,PMVXMDAV,PMVXFRMS,PMVXCSNG:
                                  PMVXPWGT,PMVXPHGT,PMVXDHWR,PMVXEDC1,PMVXEDC2:
                                  PMVXEDC3,PMVXHOME,PMVXUDF1,PMVXUDF2,PMVXUDF3:
                                  PMVXUDF4,PMVXUDT1,PMVXUDT2,PMVXUDT3,PMVXUDT4:
                                  PMVXUDT5,PMVXUDT6,PMVXCDTE,PMVXCTIM,PMVXWEBC:
                                  PMVXLUPD,PMVXLUPT,PMVXWEBU,PMVXMHLS,PMVXPICD:
                                  PMVXRMOR,PMVXASUT,PMVXELPS,PMVXEMPL,PMVXFINP:
                                  PMVXOCCP,PMVXPALC,PMVXPPAL,PMVXPPPT,PMVXPSOS:
                                  PMVXPYSP,PMVXQLDB,PMVXREAD,PMVXUDIN,PMVXUREA:
                                  PMVXUSAC,PMVXUVTH,PMVXINTR,PMVXLNG1,PMVXASGC:
                                  PMVXMHOS,PMVXDSPD,PMVXDSIF,PMVXPRMI,PMVXPRAI:
                                  PMVXPRES,PMVXUITR,PMVXRPOA,PMVXRCN1,PMVXRCN2:
                                  PMVXRHFU,PMVXRDVA,PMVXRSLO,PMVXMLOC,PMVXPACC:
                                  PMVXEDU1,PMVXEDU2,PMVXEDU3,PMVXPRGM,PMVXCONF:
                                  PMVXEOCL,PMVXSLOC,PMVXSCLI,PMVXSTRA,PMVXQASN:
                                  PMVXATCP,PMVXATIM,PMVXITIM,PMVXHFGN,PMVXHFSN:
                                  PMVXFUPI,PMVXPOEC,PMVXPGID,PMVXTICM,PMVXPILC:
                                  PMVXFVIO,PMVXFNDM,PMVXUDF5,PMVXUDF6,PMVXUDF7:
                                  PMVXUDF8,PMVXUDF9,PMVXUD10,PMVXUD11,PMVXUD12:
                                  PMVXUD13,PMVXUD14,PMVXUD15,PMVXTEAM,PMVXNWHC:
                                  PMVXEDDT,PMVXPHLD,PMVXPLOC,PMVXDTRT,PMVXDFLG:
                                  PMVXFSRC,PMVXCONM,PMVXCPDD,PMVXPBMI,DDATE:
                                  DTIME,DSTAT,DDEST,DDIAG,DDIAG2:
                                  DUSD1,DUSD2,DUSD3,DUSD4,DUSD5:
                                  DFMBS,PTDSDMDC,PTDSDDRG,DWLREASN,PTDSSIDX:
                                  PTDSVOGU,PTDSOPER,PTDSUYN1,PTDSUYN2,PTDSUYN3:
                                  PTDSUYN4,PTDSDWRD,PTDSDLOS,PTDSSREF,PTDSPALD:
                                  PTDSDPMN,MHLRCODE,PKNAME,PKADD1,PKADD2:
                                  PKSUBR,PKADD4,PKPOST,PKTELEP,PKTELEB:
                                  PKRELP,PTREMOBL,PTRESNAM,PTREGNAM,WSTBY:
                                  PMQVTDAT,PMQVTTIM,OERDATE,OERTIME,PMBRREQD:
                                  PMBRREQT,PMVXCNID,PMVXCNDT,PMVXCASE,PMVXEAFL:
                                  PTDSLSDN,PTDSCLGP,PMQVSPAR
          GOTO      OVERCOND IF OVER
          MOVE      DPMQVMES,PMQVMESI
          MOVE      DPMQVTRN,PMQVTRAN
          RETURN
.
UPPMQVI1  MOVE      PMQVMESI,DPMQVMES
          MOVE      PMQVTRAN,DPMQVTRN
          UPDATE    PMSQVIA1;DPMQVMES,DPMQVTRN,AADMNO,AURNO:
                                  ADATE,ATIME,ASTAT,AINVPRT,ALACDTE:
                                  ACANCEL,ADOCTR,ADOCTA,ADOCTL,ASRCE:
                                  ATYPE,ACLSS,ACARE,AFUNDH,AFNDTB:
                                  AFNDMM,AELIG,AVISIT,AALERG,AILLN:
                                  ADIAG1,ADIAG2,ADISC,ADOCTT,ACLSSFT:
                                  AALLOW,AMBS,ACLAIM,ADIET,APLOCCR:
                                  ASTAY,ADYHOSP,AMEMB,AMEMBNO,ACOMM1:
                                  ACOMM2,APLUR,APURGE,AUSR1,AUSR2:
                                  AUSR3,AUSR4,AUSR5,AUSR6,AUSR7:
                                  ADSCHI,ARDRNAM,AFNDYY,AFNDCG,AOCCDTE:
                                  ACODDTE,ARETDTE,AMUMADM,PTMIPVIS,ABWGHT:
                                  PTMSRFGP,PTMSGPPC,PTMSFHAN,PTMSECRA,PTMSMGIN:
                                  PTMIDDIG,PTMIGPPT,PTMIDOFR,PTMIREFD,PTMIDFCN:
                                  PTMIPHPU,PTMIAGNC,PTMIESSF,PTMIUSR8,PTMIUSR9:
                                  PTMIUSR0,PTMIPDRG,PTMIOPER,PTMIXWRD,PTMIADOC:
                                  PTMIREGS,PTMIUYN1,PTMIUYN2,PTMIPANO,PTMIPADT:
                                  PTMIPCMX,PTMIGSTA,PTMICMXP,PTMIEBED,PTMIDMOV:
                                  PTMIDFAS,PTMICRCD,PTMIFINV,PTMICONB,PTMIDATC:
                                  PTMITIMC,PTMIWEBC,PTMIDATU,PTMITIMU,PTMIWEBU:
                                  PTMI3BDY,PTMI3BAD,PTMILSDN,PTMIOGNO,TWARD:
                                  TBED,TDATE,TTIME,TURNO,TADMN:
                                  TRATEF,TRATEG,TDISC,TALLW,TATYPE:
                                  TADOCT,TRATEH,TEXTRA,PTTRITFS,TRBTYP:
                                  TRBEND,TCHSTAT,TDEPT,PTTRLTYP,PTTREPNO:
                                  PTTREPSD,PTTRLSPT,PTTRLSRB,PTTRAEND,PTTRADPT:
                                  PTTRADRB,PTTRNHAC,PTTROPER,PTTRAUAT,PTTRCDAT:
                                  PTTRCTIM,PTTRCUID,PTTRLTSC,PTTRUCID,PTTRUUID:
                                  PTTRCLTY,PTTRTRTY,PTTRTEAM,PTTRRSTR,PTTRRESI:
                                  PTTRFSRC,PTTRHFND,PTTRFTBL,PTTRHFMN,PTTRHFCN:
                                  PMVXCSNR,PMVXPOST,PMVXPIND,PMVXVLOC,PMVXCFSG:
                                  PMVXINGP,PMVXCPTH,PMVXHCP1,PMVXHCP2,PMVXHCP3:
                                  PMVXHCP4,PMVXRHC1,PMVXRH1G,PMVXRH1C,PMVXRHC2:
                                  PMVXRH2G,PMVXRH2C,PMVXRHC3,PMVXRH3G,PMVXRH3C:
                                  PMVXRHC4,PMVXRH4G,PMVXRH4C,PMVXABRG,PMVXCADM:
                                  PMVXIRAD,PMVXIDUS,PMVXCRAV,PMVXRCCT,PMVXAPWD:
                                  PMVXAPBD,PMVXPOWD,PMVXPOBD,PMVXPSTY,PMVXVALW:
                                  PMVXPALW,PMVXINDC,PMVXMDAV,PMVXFRMS,PMVXCSNG:
                                  PMVXPWGT,PMVXPHGT,PMVXDHWR,PMVXEDC1,PMVXEDC2:
                                  PMVXEDC3,PMVXHOME,PMVXUDF1,PMVXUDF2,PMVXUDF3:
                                  PMVXUDF4,PMVXUDT1,PMVXUDT2,PMVXUDT3,PMVXUDT4:
                                  PMVXUDT5,PMVXUDT6,PMVXCDTE,PMVXCTIM,PMVXWEBC:
                                  PMVXLUPD,PMVXLUPT,PMVXWEBU,PMVXMHLS,PMVXPICD:
                                  PMVXRMOR,PMVXASUT,PMVXELPS,PMVXEMPL,PMVXFINP:
                                  PMVXOCCP,PMVXPALC,PMVXPPAL,PMVXPPPT,PMVXPSOS:
                                  PMVXPYSP,PMVXQLDB,PMVXREAD,PMVXUDIN,PMVXUREA:
                                  PMVXUSAC,PMVXUVTH,PMVXINTR,PMVXLNG1,PMVXASGC:
                                  PMVXMHOS,PMVXDSPD,PMVXDSIF,PMVXPRMI,PMVXPRAI:
                                  PMVXPRES,PMVXUITR,PMVXRPOA,PMVXRCN1,PMVXRCN2:
                                  PMVXRHFU,PMVXRDVA,PMVXRSLO,PMVXMLOC,PMVXPACC:
                                  PMVXEDU1,PMVXEDU2,PMVXEDU3,PMVXPRGM,PMVXCONF:
                                  PMVXEOCL,PMVXSLOC,PMVXSCLI,PMVXSTRA,PMVXQASN:
                                  PMVXATCP,PMVXATIM,PMVXITIM,PMVXHFGN,PMVXHFSN:
                                  PMVXFUPI,PMVXPOEC,PMVXPGID,PMVXTICM,PMVXPILC:
                                  PMVXFVIO,PMVXFNDM,PMVXUDF5,PMVXUDF6,PMVXUDF7:
                                  PMVXUDF8,PMVXUDF9,PMVXUD10,PMVXUD11,PMVXUD12:
                                  PMVXUD13,PMVXUD14,PMVXUD15,PMVXTEAM,PMVXNWHC:
                                  PMVXEDDT,PMVXPHLD,PMVXPLOC,PMVXDTRT,PMVXDFLG:
                                  PMVXFSRC,PMVXCONM,PMVXCPDD,PMVXPBMI,DDATE:
                                  DTIME,DSTAT,DDEST,DDIAG,DDIAG2:
                                  DUSD1,DUSD2,DUSD3,DUSD4,DUSD5:
                                  DFMBS,PTDSDMDC,PTDSDDRG,DWLREASN,PTDSSIDX:
                                  PTDSVOGU,PTDSOPER,PTDSUYN1,PTDSUYN2,PTDSUYN3:
                                  PTDSUYN4,PTDSDWRD,PTDSDLOS,PTDSSREF,PTDSPALD:
                                  PTDSDPMN,MHLRCODE,PKNAME,PKADD1,PKADD2:
                                  PKSUBR,PKADD4,PKPOST,PKTELEP,PKTELEB:
                                  PKRELP,PTREMOBL,PTRESNAM,PTREGNAM,WSTBY:
                                  PMQVTDAT,PMQVTTIM,OERDATE,OERTIME,PMBRREQD:
                                  PMBRREQT,PMVXCNID,PMVXCNDT,PMVXCASE,PMVXEAFL:
                                  PTDSLSDN,PTDSCLGP,PMQVSPAR
          RETURN
.
          INC       STD001IO
