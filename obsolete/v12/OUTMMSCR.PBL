.******************************************************************************
.* System         : Outpatients                                               *
.*                                                                            *
.* Include Name   : OUTMMSCR.PBL                                              *
.*                                                                            *
.* Function       : This is the code to DISPLAY the screens for the Clinic    *
.*                  Master Maintenance and Enquiry programs.                  *
.*                                                                            *
.* Author         : Justin Coates      23/10/1995                             *
.*                                                                            *
.* Modifications  :                                                           *
.*        V11.00.01 23/03/2020  Peter Vela         Task 0889143               *
.*                  Fixed OUTLET IO calls                                     *
.*        V5.08.01  16/03/2000  Steve Armstrong    5.08 Mods                  *
.*                  Mods for changes to OUTCLIFD (effective date)             *
.*        V5.04.01  04/02/1997  Howellsy                                      *
.*                  Added Screen Painted Labels                               *
.******************************************************************************
.*********************************************************************
.*                  DISB0000                    Called by : xxxx0000 *
.*        Display the second input screen of data                    *
.*********************************************************************
DISB0000  DISPLAY   *P1:7,*EF:
                    *P1:8,*V2LON," 1",*HOFF:
                    ". Keyin Doctor Code (Y/N)                : ";
.
          MOVE      ONE,MOPT01
          MOVE      "8",CVERT
          MOVE      "1",FORM2
.
          MATCH     ANSC,MODE
          GOTO      DISB0100 IF NOT EQUAL   * dont disp data unless change mode
.
          MOVE      "Yes",DESCDOC           * default to yes
          MATCH     "Y",OMAKDOC
          GOTO      DISB0050 IF EQUAL       * keep as yes
          MOVE      "No ",DESCDOC
.
DISB0050  DISPLAY   *P46:8,*V2LON,DESCDOC;
.
.         See if using default doctor code
.
DISB0100  COMPARE   ONE,OTCNUDDC            * using default doctor code ?
          GOTO      DISB0150 IF NOT EQUAL   * no
.
          ADD       ONE,CVERT
          ADD       ONE,FORM2
.
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Default Doctor Code                    : ";
          STORE     TWO,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB0150 IF NOT EQUAL   * dont disp data unless change mode
.  
          MATCH     SP6,OTMADEFD            * doctor code on file ?
          GOTO      DISB0150 IF EQUAL       * no
.
          MOVE      "Unknown doctor",DOCNAME
          PACK      KEY6,OTMADEFD
          CALL      RDDOCT1
          BRANCH    OVRCD,DISB0125
.
          MOVE      DSNAME,PACSNAME
          MOVE      DGNAME,PACGNAME
          MOVE      DTITL,PACTITLE
          MOVE      ONE,PACFRMT
          CALL      PACNAME
          MOVE      PACFNAME,DOCNAME
DISB0125  DISPLAY   *P46:CVERT,*V2LON,OTMADEFD,*HOFF,*P52:CVERT,DOCNAME;
.
DISB0150  ADD       ONE,CVERT
          ADD       ONE,FORM2
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Input Extra screen when Attending (Y/N): ";
          STORE     THREE,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB0300 IF NOT EQUAL   * dont disp data unless change mode
.
          MOVE      "Yes",KEY3           * default to yes
          MATCH     ANSY,OTMAIXTA
          GOTO      DISB0200 IF EQUAL       * keep as yes
          MOVE      "No ",KEY3
.
DISB0200  DISPLAY   *P46:CVERT,*V2LON,KEY3;
.
. ------- see if using optional field 1 -------
.
DISB0300  COMPARE   ONE,OTCNAVIS
          GOTO      DISB1000 IF NOT EQUAL   * not using field
.
.         using 'allocate visit type when booking'
.
          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Allocate visit type when booking ?     : ";
          STORE     FOUR,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB1000 IF NOT EQUAL   * dont disp data unless change mode
.
.         get the value
.
          MOVE      "No ",ACODE             * set to no
          MATCH     "Y",OTMAAVIS
          GOTO      DISB0500 IF NOT EQUAL   * keep as no
          MOVE      "Yes",ACODE             * set to yes
.
DISB0500  DISPLAY   *P46:CVERT,*V2LON,ACODE;
.
. ------- see if using optional field 2 -------
.
DISB1000  COMPARE   ONE,OTCNSTVT
          GOTO      DISB2000 IF NOT EQUAL   * not using field
.
.         using 'slot times visit type controlled'
.
          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Slot times visit type controlled ?     : ";
          STORE     FIVE,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB2000 IF NOT EQUAL   * dont disp data unless change mode
.
.         get the value
.
          MOVE      "No ",ACODE             * set to no
          MATCH     "Y",OTMASTVT
          GOTO      DISB1500 IF NOT EQUAL   * keep as no
          MOVE      "Yes",ACODE             * set to yes
.
DISB1500  DISPLAY   *P46:CVERT,*V2LON,ACODE;
.
. ------- see if using optional field 3 -------
.
DISB2000  COMPARE   ONE,OTCNSUPX
          GOTO      DISB3000 IF NOT EQUAL   * not using field
.
.         using 'suppress extended slots on displays'
.
          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Suppress extended slots on displays ?  : ";
          STORE     SIX,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB3000 IF NOT EQUAL   * dont disp data unless change mode
.
.         get the value
.
          MOVE      "No ",ACODE             * set to no
          MATCH     "Y",OTMASUPX
          GOTO      DISB2500 IF NOT EQUAL   * keep as no
          MOVE      "Yes",ACODE             * set to yes
.
DISB2500  DISPLAY   *P46:CVERT,*V2LON,ACODE;
.
. ------- see if using RUS Automated Extraction -------
.
DISB3000  COMPARE   ONE,OTCNRUSE
          GOTO      DISB4000 IF NOT EQUAL   * not using field
.
.         using 'suppress extended slots on displays'
.
          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Automated Outpatient Proc Extraction?  : ";
          STORE     SEVEN,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB4000 IF NOT EQUAL   * dont disp data unless change mode
.
.         get the value
.
          MOVE      "No ",ACODE             * set to no
          MATCH     "Y",OTMARUSE
          GOTO      DISB3500 IF NOT EQUAL   * keep as no
          MOVE      "Yes",ACODE             * set to yes
.
DISB3500  DISPLAY   *P46:CVERT,*V2LON,ACODE;
.
. ------- see if displaying comments when booking ------
.
DISB4000  COMPARE   ONE,OTCNDCMB
          GOTO      DISB5000 IF NOT EQUAL   * not using field
.
.         using 'display comments at booking time'
.
          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Display Comments at Booking Time (Y/N) : ";
          STORE     EIGHT,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB5000 IF NOT EQUAL   * dont disp data unless change mode
.
.         get the value
.
          MOVE      "No ",ACODE             * set to no
          MATCH     "1",OTMADCMB
          GOTO      DISB4500 IF NOT EQUAL   * keep as no
          MOVE      "Yes",ACODE             * set to yes
.
DISB4500  DISPLAY   *P46:CVERT,*V2LON,ACODE;
.
. ------- see if using the attendance register ------
.
DISB5000  COMPARE   ONE,OTCNUARF
          GOTO      DISB5500 IF NOT EQUAL   * not using field
.
.         using 'Attendance Register'
.
          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Using Attendance Register (OUT73)(Y/N) : ";
          STORE     NINE,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05,MOPT06:
                    MOPT07,MOPT08,MOPT09,MOPT10
.
          MATCH     ANSC,MODE
          GOTO      DISB5500 IF NOT EQUAL   * dont disp data unless change mode
.
.         get the value
.
          MOVE      "No ",ACODE             * set to no
          MATCH     "1",OTMAUATR
          GOTO      DISB5500 IF NOT EQUAL   * keep as no
          MOVE      "Yes",ACODE             * set to yes
.
DISB5500  DISPLAY   *P46:CVERT,*V2LON,ACODE;
.
DISB9999  RETURN
+
.**************************************************************************
.*  DISC0000  :  Display Screen 3 if using new file                       *
.**************************************************************************
DISC0000  DISPLAY   *P1:7,*EF
          MOVE      "8",CVERT
          MOVE      "1",FORM2
          STORE     ONE,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                              MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                              MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                              MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
.
          DISPLAY   *P1:8,*V2LON,FORM2,*HOFF:
                    ". Discharge pat. after X number of DNA's : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC0200 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P46:CVERT,*V2LON,OTMADDNA
.
DISC0200  ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     TWO,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                              MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                              MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                              MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Number of days for re-appointment      : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC0300 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P46:CVERT,*V2LON,OTMANDRP;
.
DISC0300  ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     THREE,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                                MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                                MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                                MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Clinic Sessions                        : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC0400 IF NOT EQUAL   * dont disp data unless change mode
.
          PACK      KEY8,CCC,CYY,CMM,CDD
          REP       " 0",KEY8
          PACK      KEY14,OTMACLSE,KEY8
          CALL      RDCLIA2
          IF        OVRCD = 1
            CALL      RDPCLIA2
            IF        OVRCD = 0
              MATCH     OMASITE,OCASITE
              IF        !@EQUAL
                MOVE      ONE,OVRCD
              ELSE
                MATCH     OTMACLSE,OCACLIN
                IF        !@EQUAL
                  MOVE      ONE,OVRCD
                ENDIF
              ENDIF
            ENDIF
          ENDIF
          IF        OVRCD = 1
            MOVE      "Unknown clinic",OCADESC
            PACK      OCADESC,OCADESC,SP30
          ENDIF
          BRANCH    OVRCD,DISC0350
.
          MATCH     SP6,OCADOCT
          GOTO      DISC0350 IF EQUAL       * valid code
.
.         have a doctor code for the clinic so use this for description
.
          MOVE      OCADOCT,KEY6
          CALL      RDDOCT1
          BRANCH    OVRCD,DISC0350          * invalid doctor code
.
          MOVE      DSNAME,PACSNAME
          MOVE      DGNAME,PACGNAME
          MOVE      DTITL,PACTITLE
          MOVE      TWO,PACFRMT
          CALL      PACNAME
          MOVE      PACFNAME,OCADESC
.
DISC0350  DISPLAY   *P46:CVERT,*V2LON,OTMACLSE,*HOFF,*P55:CVERT,OCADESC
.
DISC0400  ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     FOUR,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Hospital code                          : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC0500 IF NOT EQUAL   * dont disp data unless change mode
.
          MOVE      "<<Missing>>",PTHSNAME
          MOVE      OTMAHOSP,KEY3
          CALL      RDPTHSP1
.
          DISPLAY   *P46:CVERT,*V2LON,OTMAHOSP,*HOFF,*P55:CVERT,PTHSNAME
.
DISC0500  ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     FIVE,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Clinic Location                        : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC0600 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P46:CVERT,*V2LON,OTMACLOC
.
DISC0600  ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     SIX,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                              MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                              MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                              MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Clinic Location Type                   : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC0700 IF NOT EQUAL   * dont disp data unless change mode
.
          MATCH     SP3,OTMALTYP
          GOTO      DISC0700 IF EQUAL       * nothing to display
.
          MOVE      "<< Missing Code >>",TDESC
          PACK      KEY5,CODECT,OTMALTYP
          CALL      RDCODE1
          DISPLAY   *P46:CVERT,*V2LON,OTMALTYP,*HOFF,*P55:CVERT,TDESC
.
DISC0700  ADD       ONE,CVERT
          ADD       ONE,FORM2
          STORE     SEVEN,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                                MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                                MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                                MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Default Send Letter value for OUT66    :    ";
          MATCH     ANSC,MODE
          GOTO      DISC0800 IF NOT EQUAL 
.
          MATCH     ANSY,OTMADFSL
          IF        @EQUAL
            DISPLAY   *P46:CVERT,*V2LON,"Yes"
          ENDIF
          MATCH     ANSN,OTMADFSL
          IF        @EQUAL
            DISPLAY   *P46:CVERT,*V2LON,"No "
          ENDIF
.
DISC0800  ADD       ONE,CVERT
          ADD       ONE,FORM2
          STORE     EIGHT,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                                MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                                MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                                MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Generate Case notes on attendance      : ";
          MATCH     ANSC,MODE
          GOTO      DISC0900 IF NOT EQUAL 
.
          MATCH     ANSY,OTMADFGN
          IF        @EQUAL
            DISPLAY   *P46:CVERT,*V2LON,"Yes"
          ELSE
            DISPLAY   *P46:CVERT,*V2LON,"No "
          ENDIF
.
DISC0900  COMPARE   ONE,OTCNUWDA
          GOTO      DISC1100 IF NOT EQUAL

          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     NINE,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
.
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Is this a Ward Clinic (Y/N)            : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC1000 IF NOT EQUAL   * dont disp data unless change mode
.
          MATCH     ANSY,OTMAWDCL
          IF        @EQUAL
            DISPLAY   *P46:CVERT,*V2LON,"Yes   "
          ELSE
            DISPLAY   *P46:CVERT,*V2LON,"No    "
          ENDIF
.
DISC1000  ADD       ONE,CVERT
          ADD       ONE,FORM2
          STORE     TEN,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                              MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                              MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                              MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Ward Code for Clinic                   : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC1100 IF NOT EQUAL   * dont disp data unless change mode
.
          MOVE      SP30,WBDESC
          PACK      KEY6,OTMAWARD,SP10
          CALL      RDWARD1
          DISPLAY   *P46:CVERT,*V2LON,OTMAWARD,*HOFF,SP3,WBDESC
.
DISC1100  COMPARE   ONE,OTCNURVS
          GOTO      DISC1200 IF NOT EQUAL

          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     TEN1,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
.
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Security level to use Reserved slots   : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC1200 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P46:CVERT,*V2LON,OTMASLRV
.
DISC1200  COMPARE   ONE,OTCNOVBK
          GOTO      DISC1500 IF NOT EQUAL

          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     TEN2,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
.
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Security level to Overbook             : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC1300 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P46:CVERT,*V2LON,OTMASOVB
.
DISC1300  ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     TEN3,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
.
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Number of Overbookings allowed         : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC1400 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P46:CVERT,*V2LON,OTMANOOB
.
DISC1400  ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     TEN4,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
.
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Security level to Forcebook            : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC1500 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P46:CVERT,*V2LON,OTMASLFB
.
DISC1500  COMPARE   ONE,OTCNNCOC
          GOTO      DISC1600 IF NOT EQUAL

          ADD       ONE,CVERT               * increment row
          ADD       ONE,FORM2               * increment counter
          STORE     TEN5,FORM2,MOPT01,MOPT02,MOPT03,MOPT04,MOPT05:
                               MOPT06,MOPT07,MOPT08,MOPT09,MOPT10:
                               MOPT11,MOPT12,MOPT13,MOPT14,MOPT15:
                               MOPT16,MOPT17,MOPT18,MOPT19,MOPT20
.
          DISPLAY   *P1:CVERT,*V2LON,FORM2,*HOFF:
                    ". Exclude from Contracting/Korner (Y/N)  : ";
.
          MATCH     ANSC,MODE
          GOTO      DISC1600 IF NOT EQUAL   * dont disp data unless change mode
.
          MOVE      DNO,KEY3
          LOAD      KEY3,OTMANCOC,DYES
          DISPLAY   *P46:CVERT,*V2LON,KEY3
.
DISC1600
DISC9999  RETURN
+
.**************************************************************************
.*  DISD0000  :  Display Screen 4 - Letters and Labels                    *
.**************************************************************************
DISD0000  DISPLAY   *P1:07,*EF,*HON,"                                 Label  ":
                    "Details                                 ",*HOFF:
                    *P1:08,*V2LON," 1",*HOFF:
                    ". Booking Label Number                       : ":
                    *P1:09,*V2LON," 2",*HOFF:
                    ". Appointment Label Number                   : ":
                    *P1:10,*V2LON," 3",*HOFF:
                    ". PMI Mailing Label Number                   : ":
                    *P1:11,*V2LON," 4",*HOFF:
                    ". G.P. Mailing Label Number                  : ":
                    *P1:12,*HON,"                                 Letter ":
                    "Details                                 ",*HOFF:
                    *P1:13,*V2LON," 5",*HOFF:
                    ". DNA Letter to Patient on Re-appointment    : ":
                    *P1:14,*V2LON," 6",*HOFF:
                    ". DNA Letter to Patient on Discharge         : ":
                    *P1:15,*V2LON," 7",*HOFF:
                    ". DNA Letter to G.P. on Discharge            : ":
                    *P1:16,*V2LON," 8",*HOFF:
                    ". Letter to Patient on Cancellation          : ":
                    *P1:17,*V2LON," 9",*HOFF:
                    ". Standard Booking Letter                    : ":
                    *P1:18,*V2LON,"10",*HOFF:
                    ". Standard Re-Appointment Letter             : ":
                    *P1:19,*V2LON,"11",*HOFF:
                    ". Standard Re-Schedule Letter (Patient)      : ":
                    *P1:20,*V2LON,"12",*HOFF:
                    ". Standard Re-Schedule Letter (Hospital)     : "
.
          MATCH     ANSC,MODE
          GOTO      DISD9999 IF NOT EQUAL   * dont disp data unless change mode
.
          DISPLAY   *P50:08,*V2LON,OTMASBKL,*P50:09,OTMASAPL,*P50:10,OTMASPMM:
                    *P50:11,OTMASGPM
.
          PACK      SCMADES,SP20,SP20
          PACK      KEY10,LABELOUT,OTMASBKL
          CALL      RDSCMA1
          DISPLAY   *P55:08,SCMADES
.
          PACK      SCMADES,SP20,SP20
          PACK      KEY10,LABELOUT,OTMASAPL
          CALL      RDSCMA1
          DISPLAY   *P55:09,SCMADES
.
          PACK      SCMADES,SP20,SP20
          PACK      KEY10,LABELOUT,OTMASPMM
          CALL      RDSCMA1
          DISPLAY   *P55:10,SCMADES
.
          PACK      SCMADES,SP20,SP20
          PACK      KEY10,LABELOUT,OTMASGPM
          CALL      RDSCMA1
          DISPLAY   *P55:11,SCMADES
.
          IF        OTMALPTR<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMALPTR,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:13,*V2LON,OTMALPTR,*P55:13,*HOFF,KEY25;
          ENDIF
.
          IF        OTMALPTD<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMALPTD,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:14,*V2LON,OTMALPTD,*P55:14,*HOFF,KEY25;
          ENDIF
.
          IF        OTMALGPD<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMALGPD,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:15,*V2LON,OTMALGPD,*P55:15,*HOFF,KEY25;
          ENDIF
.
          IF        OTMALPPC<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMALPPC,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:16,*V2LON,OTMALPPC,*P55:16,*HOFF,KEY25;
          ENDIF
.
          IF        OTMABKLT<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMABKLT,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:17,*V2LON,OTMABKLT,*P55:17,*HOFF,KEY25;
          ENDIF
.
          IF        OTMARALT<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMARALT,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:18,*V2LON,OTMARALT,*P55:18,*HOFF,KEY25;
          ENDIF
.
          IF        OTMARSLT<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMARSLT,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:19,*V2LON,OTMARSLT,*P55:19,*HOFF,KEY25;
          ENDIF
.
          IF        OTMASRLH<>0
            MOVE      SP30,OTLTTEXT
            PACK      KEY6,OTMASRLH,SP1,SP1,ZERO
            CALL      RDOTLET1
            MOVE      OTLTTEXT,KEY25
            DISPLAY   *P50:20,*V2LON,OTMASRLH,*P55:20,*HOFF,KEY25;
          ENDIF
.
DISD9999  RETURN
+
