.******************************************************************************
.* System         : ALL                     Release 5.0n                      *
.*                                                                            *
.* Include Name   : DXOPRDEA.PBL                                              *
.*                                                                            *
.* Function       : To display the values from OPRDEAFD/BOKRC1FD for Theatre  *
.*                  This uses the code in OPR013IO for the display routines   *
.*                  Note: for the descriptions, the display routines are      *
.*                        called at the D......50 label as this is the part   *
.*                        which displays the description                      *
.*                                                                            *
.* Author         : Justin Coates           05/05/1995                        *
.*                                                                            *
.* Parameters     : OPRDEAFD / BOKRC1FD records                               *
.*                  SCRSPTFD/SCRSBGFD records                                 *
.*                                                                            *
.* Modifications  :                                                           *
.******************************************************************************
DXOPRDEA  
          MOVE      SCPSROW,OPSCKROW        * set code row
          MOVE      SCPSCOL,OPSCKCOL        * set code column
          MOVE      SCPSROW,CVERT           * set code row
          MOVE      SCPSCOL,CCOL            * set code column
          MOVE      ZERO,OPSCSIZE           * set so desc not disp with code
          MOVE      SCPSITM,FIELDNO
          BRANCH    FIELDNO,DSTTIM00,DEXPDU00,DANAEC00,DOPDA004,DOPTYP00:
                            DOPDA006,DTRANS00,DOPDA008,DDA1US00,DOPDA010:
                            DDA2US00,DOPDA012,DDA3US00,DOPDA014,DDA4US00:
                            DOPDA016,DPR1TM00,DOPDA018,DPR2TM00,DOPDA020:
                            DPR3TM00,DOPDA022,DOP1DS00,DOP2DS00,DOP3DS00:
                            DOPCOM00,DDACNC00,DOPDA028,DDATHT00,DOPDA030:
                            DOP1PR00,DOP2PR00,DOP3PR00,DOP4PR00,DOP5PR00:
                            DOP1PS00,DOP2PS00,DOP3PS00,DOP4PS00,DDADUR00:
                            DDAKNW00,DOPDA042,DATTDO00,DOPDA044,DREFDO00:
                            DOPDA046,DDUEDT00,DDUETM00,DPASDT00,DPASTM00:
                            DFUNME00,DPRVIN00,DPREAC00,DOPDA054,DEXPWD00:
                            DOPDA056,DBKEBD00,DOPDA058,DBKCLS00,DOPDA060:
                            DBKATP00,DOPDA062,DBKDPT00,DOPDA064,DASSDO00:
                            DOPDA066,DBKCLT00,DOPDA068,DREFGP00,DGPNPR00:
                            DOPDA071,DGPPCD00,DOPDA073,DGPFHN00,DRESID00:
                            DOPDA076,DELADT00,DOPDA078,DECRAP00,DOPDA080:
                            DOPDA081,DOPDA082
          GOTO      DOPDA999
.
.         this is used for displaying the descriptions 
.         because of the way OPR013IO displays the code and desc together
.         we have to call the display routines at the point where it
.         checks if there is a desc'n.  before this. must set up the
.         required variables
.
DOPDA004  CALL      DOPDA998                * set variables
          CALL      DANAEC50                * display description
          GOTO      DOPDA999
.
DOPDA006  CALL      DOPDA998                * set variables
          CALL      DOPTYP50                * display description
          GOTO      DOPDA999
.
DOPDA008  CALL      DOPDA998                * set variables
          CALL      DTRANS50                * display description
          GOTO      DOPDA999
.
DOPDA010  CALL      DOPDA998                * set variables
          CALL      DDA1US50                * display description
          GOTO      DOPDA999
.
DOPDA012  CALL      DOPDA998                * set variables
          CALL      DDA2US50                * display description
          GOTO      DOPDA999
.
DOPDA014  CALL      DOPDA998                * set variables
          CALL      DDA3US50                * display description
          GOTO      DOPDA999
.
DOPDA016  CALL      DOPDA998                * set variables
          CALL      DDA4US50                * display description
          GOTO      DOPDA999
.
DOPDA018  CALL      DOPDA998                * set variables
          CALL      DPR1TM50                * display description
          GOTO      DOPDA999
.
DOPDA020  CALL      DOPDA998                * set variables
          CALL      DPR2TM50                * display description
          GOTO      DOPDA999
.
DOPDA022  CALL      DOPDA998                * set variables
          CALL      DPR3TM50                * display description
          GOTO      DOPDA999
.
DOPDA028  CALL      DOPDA998                * set variables
          CALL      DDACNC50                * display description
          GOTO      DOPDA999
.
DOPDA030  CALL      DOPDA998                * set variables
          CALL      DDATHT50                * display description
          GOTO      DOPDA999
.
DOPDA042  CALL      DOPDA998                * set variables
          CALL      DDAKNW50                * display description
          GOTO      DOPDA999
.
DOPDA044  CALL      DOPDA998                * set variables
          CALL      DATTDO50                * display description
          GOTO      DOPDA999
.
DOPDA046  CALL      DOPDA998                * set variables
          CALL      DREFDO50                * display description
          GOTO      DOPDA999
.
DOPDA054  CALL      DOPDA998                * set variables
          CALL      DPREAC50                * display description
          GOTO      DOPDA999
.
DOPDA056  CALL      DOPDA998                * set variables
          CALL      DEXPWD50                * display description
          GOTO      DOPDA999
.
DOPDA058  CALL      DOPDA998                * set variables
          CALL      DBKEBD50                * display description
          GOTO      DOPDA999
.
DOPDA060  CALL      DOPDA998                * set variables
          CALL      DBKCLS50                * display description
          GOTO      DOPDA999
.
DOPDA062  CALL      DOPDA998                * set variables
          CALL      DBKATP50                * display description
          GOTO      DOPDA999
.
DOPDA064  CALL      DOPDA998                * set variables
          CALL      DBKDPT50                * display description
          GOTO      DOPDA999
.
DOPDA066  CALL      DOPDA998                * set variables
          CALL      DASSDO50                * display description
          GOTO      DOPDA999
.
DOPDA068  CALL      DOPDA998                * set variables
          CALL      DBKCLT50                * display description
          GOTO      DOPDA999
.
DOPDA071  CALL      DOPDA998                * set variables
          CALL      DREFGP50                * display description
          GOTO      DOPDA999
.
DOPDA073  CALL      DOPDA998                * set variables
          CALL      DGPPCD50                * display description
          GOTO      DOPDA999
.
DOPDA076  CALL      DOPDA998                * set variables
          CALL      DRESID50                * display description
          GOTO      DOPDA999
.
DOPDA078  CALL      DOPDA998                * set variables
          CALL      DELADT50                * display description
          GOTO      DOPDA999
.
. session date (LABELS)
.
DOPDA080  UNPACK    OPDADATE,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          IF        SCPSLEN = 10
            PACK      VAR,CPCDATE,SP70,SP70
          ELSE
            PACK      VAR,CPDATE,SP70,SP70
          ENDIF
          GOTO      DOPDA995
.
. clinc/surgeon (LABELS)
.
DOPDA081  PACK      VAR,OPDACLIN,SP70,SP70
          GOTO      DOPDA995
DOPDA082  MOVE      OPDACLIN,KEY6
          CALL      DCLSU000
          GOTO      DOPDA995
.
DOPDA995  CALL      DISPITEM
DOPDA999  RETURN
+
.*********************************************************************
.         set up the variables for descriptions
.*********************************************************************
DOPDA998  MOVE      SCPSROW,OPSCDSRW        * set description row
          MOVE      SCPSCOL,OPSCDSCL        * set description column
          MOVE      SCPSLEN,OPSCSIZE        * set description size
          RETURN
+
.*********************************************************************
.         get the clinic description
.*********************************************************************
DCLSU000  MATCH     SP6,KEY6                * test key6 is non blank
          GOTO      DCLSU990 IF EQUAL
.
          BRANCH    OPCNCLSU,DCLSU555       * using doctor code
.
.         read clinic file
.
          CALL      RDOPCLI1                * check for valid clinic
          BRANCH    OVRCD,DCLSU990          * invalid code
.
          PACK      VAR,OPCLDESC,SP70,SP70
.
          MATCH     SP6,OPCLDOCT 
          GOTO      DCLSU999 IF EQUAL       * not using doctors code
.
          MOVE      OPCLDOCT,KEY6           * set up key
.
.         read doctors file
.
DCLSU555  CALL      RDDOCT1                 * read doctors information
          BRANCH    OVRCD,DCLSU990          * invalid code
.
          MOVE      DTITL,PACTITLE
          MOVE      DSNAME,PACSNAME
          MOVE      DGNAME,PACGNAME
          MOVE      TWO,PACFRMT
          CALL      PACNAME
          PACK      VAR,PACFNAME,SP70,SP70
          GOTO      DCLSU999
.
DCLSU990  PACK      VAR,SP70,SP70
.
DCLSU999  RETURN
...............................................................................
