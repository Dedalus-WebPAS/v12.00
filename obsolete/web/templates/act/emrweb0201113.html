<meta name="TemplateVersion" content="V11.00.00">
<meta name="TemplateHome" content="act">
<meta name="HelpFileName" content="NoContextSet.html">
<link rel="stylesheet" href="../html/validate.css" type="text/css">
<script language=javascript src="../js/EmrMandatory.js"> </script>
<script language=javascript src="../js/emrweb02100.js"> </script>
<script language=javascript>
function SplitComplaint()  {
words=triage.comptext.value.split(/\s+/);
triage.emvis004.value=""
triage.emvis005.value=""
firstflag=0
for (i=0 ; i<words.length ; i++) {
  if (triage.emvis004.value.length+words[i].length < 50 && firstflag==0 ) {
    triage.emvis004.value+=words[i] + " " }
  else {
    triage.emvis005.value+=words[i] + " "
    firstflag=1 }
  }
triage.comptext.value=triage.emvis004.value+triage.emvis005.value
}
function setFormactn() {
  var cont = workMandatory(triage);
  if(cont != true) {
     return;
     }
  else {
    document.triage.nextpage.value="2"
    document.triage.formactn.value="C1"
    document.triage.updttype.value="TRIAG"
    document.triage.submit()
    }
}
//
function workMandatory(theForm) {
//
  if (isWhitespace(document.triage.emvis060.value)) {
    alert("Presenting Complaint Code is Mandatory");
    return(false);
  }
//
  if (isWhitespace(document.triage.emvis004.value)) {
    alert("Presenting Complaint Comment is Mandatory");
    return(false);
  }
//
   var hasBeenSet=0;  // Radio button has not been selected
   for (var i =0 ; i < document.triage.emvis003.length; i++) {
     if (document.triage.emvis003[i].checked==1) {
       hasBeenSet=1;
     }
   }
   if (!hasBeenSet) {
     alert("Triage Category is Mandatory");
     return false;        //Radio button has bot been selected return false
   }
//
  if (isWhitespace(document.triage.emvis127.value)) {
    alert("Triage Nurse is Mandatory");
    return(false);
  }
//
  if (isWhitespace(document.triage.emvis128.value)) {
    alert("Triage Date is Mandatory");
    return(false);
  }
//
  if (isWhitespace(document.triage.emvis129.value)) {
    alert("Triage Time is Mandatory");
    return(false);
  }
//
  return true;
}
function DisplayDiv() {
Indicator=document.triage.emvis060.value.substr(13,1);
  if (Indicator=="I") {
     document.all.Triage.style.display="";
     document.all.Triage.innerHTML=document.all.EmergencyProc.innerHTML;
     }
  else {
     document.all.Triage.style.display="none";
     document.all.Triage.innerHTML="";}
}
function getPresentCom(SearchField,ReturnSelect,CatCode) {
  var serverURL   = "../cgi-bin/patweb80.pbl?reportno=32" +
                    "&valdcode=" + SearchField.value.replace(/ /g,"+") +
                    "&valdcatc=" + CatCode.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnSelect.options.length=0
    ReturnValue=returnValue.return_value.split("|");
    for (var j=0; j < ReturnValue.length; j++) {
       if (!isWhitespace(ReturnValue[j])) {
         SelectValue=ReturnValue[j].split(",");
         ReturnSelect.options[ReturnSelect.options.length]=
          new Option(SelectValue[1],SelectValue[0]); } } }
}
function validateLocation(SearchField,SearchName) {
  if (isWhitespace(SearchField.value)) {
      return;;
  }
  SearchField.value=SearchField.value.toUpperCase()
  var serverURL   = "../cgi-bin/emrweb08.pbl?reportno=2" +
                    "&valdcode=" + SearchField.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|")
    SearchName.value=trim(ReturnValue[1])
    SearchField.value=trim(ReturnValue[0])
  }
  else {
     document.triage.emvis006.focus();
     document.triage.emvis006.value="";
     document.triage.name_emvis006.value="";
  }
}
</script>
<style type=text/css>
select.[Select160] {
width: 160px;
}
</style>
%START.OF.PAGE
<body onload="PageLoad(event);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%EMRWEB02.01.003";
PatientVIS="%EMRWEB02.01.081";
PatientNAM="%EMRWEB02.01.002";
PatientSTA="%EMRWEB02.01.086.078";
PatientALT="%EMRWEB02.01.084";
PatientSEX="%EMRWEB02.01.019";
PatientDOB="%EMRWEB02.01.020";
PatientAGE="%EMRWEB02.01.021";
PatientLOC="%EMRWEB02.01.083";
PatientPRI="%EMRWEB02.01.086.066.1";
PatientUNT="%EMRWEB02.01.066.0";
PatientIND="%EMRWEB02.01.086.091";
GpCOD="%EMRWEB02.01.086.084.001";
GpNAM="%EMRWEB02.01.086.084.081";
GpPRAC="%EMRWEB02.01.086.085.001";
GpPRACCNT="%EMRWEB02.01.086.085.002";
GpPRACNAM="%EMRWEB02.01.086.085.005";
PatientARR="%EMRWEB02.01.101.0 %EMRWEB02.01.102";
PatientSEE="%EMRWEB02.01.130.0 %EMRWEB02.01.131";
PatientTRI="%EMRWEB02.01.103.3";
PatientECLC="%EMRWEB02.01.484.1";
PatientCLH="%STANDARD.01.017.CL";
PatientEHFT="%EMRWEB02.01.485";
InsertEmergencyHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<table width=100% border=0 cellspacing=0 cellpadding=1>
<form name=SelectScreen action="emrweb02.pbl" method=post>
 <input type=hidden name=reportno value=1>
 <input type=hidden name=template value=1>
 <input type=hidden name=admissno value="%EMRWEB02.01.146">
 <input type=hidden name=urnumber value="%EMRWEB02.01.151">
</form>
<form name=dummy action="emrweb02.pbl" method="post">
  <input type=hidden name=reportno value="1">
  <input type=hidden name=urnumber>
  <input type=hidden name=admissno>
  <input type=hidden name=formactn>
  <input type=hidden name=updttype>
  <input type=hidden name=username>
  <input type=hidden name=password>
  <input type=hidden name=updateky value="%EMRWEB02.01.404">
  <input type=hidden name=nextpage value="1">
  <input type=hidden name=redirect value="emrweb01.pbl?reportno=1&template=2">
</form>
<form name=triage action="emrweb02.pbl" method=post>
 <input type=hidden name=reportno value="01">
 <input type=hidden name=resavail value="%EMRWEB02.01.168">
 <input type=hidden name=template value="001">
 <input type=hidden name=admissno value="%EMRWEB02.01.146">
 <input type=hidden name=urnumber value="%EMRWEB02.01.151">
 <input type=hidden name=formactn>
 <input type=hidden name=redirect value="emrweb01.pbl?reportno=1&template=2">
 <input type=hidden name=updateky value="%EMRWEB02.01.404">
 <input type=hidden name=updttype>
 <input type=hidden name=nextpage>
 <input type="hidden" name="username">
 <input type="hidden" name="password">
 <input type=hidden name=emvis026 value="%EMRWEB02.01.126.3">

<tr><td class=DataLabel width=20%>Presenting Complaint </td>
    <input type=hidden name=emrviscat value="el">
    <td><input type="text" size=10 tabindex=11 
      onKeyUp='UpCase(this);getPresentCom(this,triage.emvis060,emrviscat);'
      onBlur='DisplayDiv()'>
    <select name=emvis060 class="SelectBig Mandatory" onchange="DisplayDiv();">
    </select></td></tr>

<tr><td></td>
    <td><input type=text size=100 maxlength=99 name=comptext
         class=Mandatory
    onchange=SplitComplaint()
    value="%EMRWEB02.01.104 %EMRWEB02.01.105" ><br>
    <input type=hidden name=emvis004 value="%EMRWEB02.01.104">
    <input type=hidden name=emvis005 value="%EMRWEB02.01.105">
    <input type=hidden name=nocodes>
    </td></tr>
</table>

<div id=Triage></div>

<table width=100% border=0 cellspacing=0 cellpadding=1>
<tr><td class=DataLabel width=20%>Triage Category
   <td><table border=0 cellspacing=0>
   <td bgcolor=#FF3333><i>1</i></font>
   <input type="radio" name=emvis003 value=1 tabindex=20 title="Triage Category"
   ></td>
   <td bgcolor=#FF9900><i>2</i><input type=radio name=emvis003 value=2 ></td>
   <td bgcolor=#66FF99><i>3</i><input type=radio name=emvis003 value=3 ></td>
   <td bgcolor=#99CCFF><i>4</i><input type=radio name=emvis003 value=4 ></td>
   <td bgcolor=#FFFFFF><i>5</i><input type=radio name=emvis003 value=5 ></td>
   </tr></table></td></td>

<tr><td class=DataLabel>Triage Nurse</td>
    <td><input type=text name=emvis127 max=3 size=3 class="Mandatory" 
               title="Triage Nurse"
             value="%EMRWEB02.01.161.1" onChange="CheckCode(emvis127,v127name)">
            <select class=Select160 name=v127name class="Mandatory"
             onChange="UpdateCode(emvis127,v127name);
                   defDateTime(emvis128,'Triage Date',emvis129,'Triage Time');">
            <option></option>
             %EMRWEB02.01.161.2
            </td></tr>

<tr><td class=DataLabel>Triage Date and Time</td>
    <td colspan=3>
    <select name="emvis128">
      %EMRWEB02.01.162.1
    </select>
    <input type=text size=8 max=8 name="emvis129"  tabindex=19
     onChange="checkTime(emvis129,'Triage Time');">
    <img src="../images/stopwat1.gif"
     onClick="defDateTime(emvis128,'Triage Date',emvis129,'Triage Time');">
    <img src=../images/TimeLookup.gif border=0 hspace=4 align=absmiddle
     onclick="TimeLookupFrame(emvis129);">
    </td></tr>

<tr><td class=DataLabel>Location</td>
    <td><input type="text" name=emvis006 tabindex=13 size=5
     onblur="validateLocation(emvis006,name_emvis006);"
     value="%EMRWEB02.01.106.1">
    <input type=text name=name_emvis006 readonly class=Readonly
     value="%EMRWEB02.01.106.0">
    </td></tr>

    <tr><td class=DataLabel>Doctor Allocated</td>
        <td><select class=Select160 name=emvis007>
            <option></option>
             %EMRWEB02.01.186.2
            </select></td></tr>

    <tr><td class=DataLabel>Tetanus Status</td>
        <td><select class=Select160 name=emvis045>
            <option></option>
             %EMRWEB02.01.205.2
            </select></td></tr>

<tr><td>Comments </td>
    <td><input type=text name=emvis036 size=50 maxlength=50 
               value="%EMRWEB02.01.136"></td>
<tr><td></td>
    <td><input type=text name=emvis037 size=50 maxlength=50 
               value="%EMRWEB02.01.137"></td>
    </tr>

    <tr><td colspan=4 align=center>
      <input type=button class="button" value="Update" onClick="setFormactn();">
      <input type=button class="button" value="Cancel" onClick="history.go(-1);">
    </td></tr>
    </table>
</form>

<span id=EmergencyProc style="display:none;">
<table align=center cellspacing=1 cellpadding=0 border=0 width=100%>
<tr><td class=DataLabel width=20%>Place Where Injury Occurred</td>
    <td><select name="emvis021" class=SelectBig tabindex=15
         title="Place Where Injury Occurred">
    <option></option>
    %EMRWEB02.01.121.2
     </select></td></tr>
<tr><td class=DataLabel>Activity When Injured</td>
    <td><select name="injur006" class=SelectBig title="Activity When Injured"
         tabindex=16>
    <option></option>
      %EMRWEB02.01.183.2
       </select></td></tr>
<tr><td class=DataLabel> Injury Cause</td>
    <td><select name="injur004" class=SelectBig title="Injury Cause" 
         tabindex=17>
     <option></option>
     %EMRWEB02.01.181.2
     </select>
     </td></tr>

<tr valign=top><td class=DataLabel> Human Intent</td>
    <td><select name="injur005" class=SelectBig title="Human Intent"
         tabindex=18>
    <option></option>
     %EMRWEB02.01.182.2
      </select></td></tr>
<tr><td class=DataLabel>
    Desc. of Injury Event</td>
    <td colspan=3><input type="text" name="injur002" maxlength="50" size="40"
         title="Description of Injury Event" value="" tabindex=19>
    <input type="text" name="injur003" maxlength="50" size="40" value=""
     tabindex=19></td></tr>
</table>
</span>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
</form>
</div>
</body>
<script language=javascript>
if  ("%EMRWEB02.01.260.1" == "1")  {
  document.triage.emvis100.checked=1
}
//
 var RadioIndex=%EMRWEB02.01.103.1 - 1           // Starts at 0 so sub 1
 if(RadioIndex!=-1) {
 document.triage.emvis003[RadioIndex].checked=1  // Set Current Checked Value
 }
</script>
