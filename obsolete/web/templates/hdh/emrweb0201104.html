<meta name="TemplateVersion" content="V10.15.00">
<meta name="TemplateHome" content="hdh">
<meta name="HelpFileName" content="NoContextSet.html">
<script type="text/javascript">
function init() {
PageLocation="?reportno=1&template=4" +
               "&urnumber=" + PatientURN.replace(/ /g,"+") +
               "&admissno=" + PatientVIS.replace(/ /g,"+")
  if(top.content.location.search.substring(1,23)!="reportno=1&template=16"&&
     top.content.location.search.substring(1,23)!="reportno=1&template=17"){
    if (top.content.location.search!=this.location.search) {
      if (top.content.location.search!=PageLocation) {
      top.content.location.href="emrweb02.pbl" + PageLocation } }
  }
}
function validateNurse() {
  validateCode('17',document.UpdateForm.emvis127,
                    document.UpdateForm.dummy1,
                    document.UpdateForm.gnm,
                    SetNurseName);
}
function SetNurseName() {
UpdateForm.dummy1.value=UpdateForm.gnm.value.replace(/\s*$/g,"")+
                              " " +
                            UpdateForm.dummy1.value.replace(/\s*$/g,"")
}

function setRedirect() {
 document.UpdateForm.redirect.value="emrweb02.pbl?reportno=1&template=104"
}
function changeUndischarge() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.reportno.value="01"
  PatientLinks.template.value="108"
  PatientLinks.action="emrweb02.pbl"
  Left=(document.body.clientWidth-600)/2
  DFrameSubmit(PatientLinks,100,Left,600,300);
  }
}
function changeNurDateTime() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.reportno.value="01"
  PatientLinks.template.value="112"
  PatientLinks.action="emrweb02.pbl"
  Left=(document.body.clientWidth-600)/2
  DFrameSubmit(PatientLinks,100,Left,600,300);
  }
}
function linkAdmission() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.reportno.value="01"
  PatientLinks.template.value="114"
  PatientLinks.action="emrweb02.pbl"
  Left=(document.body.clientWidth-750)/2
  DFrameSubmit(PatientLinks,50,Left,750,500);
  }
}
function changeDocDateTime() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.reportno.value="01"
  PatientLinks.template.value="111"
  PatientLinks.action="emrweb02.pbl"
  Left=(document.body.clientWidth-600)/2
  DFrameSubmit(PatientLinks,100,Left,600,300);
  }
}
function setUndischarge() {
    if(!isWhitespace(document.UpdateForm.username.value)) {
      getUserIDForLoginName(UpdateForm.username,UpdateForm.webuseid);
    }
    var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
      document.UpdateForm.nextpage.value="1"
      document.UpdateForm.formactn.value="U "
      document.UpdateForm.updttype.value="UNDIS"
      DFrameHide(UpdateForm)
   }
}
function PostDischarge() {
  document.UpdateForm.redirect.value="emrweb02.pbl?reportno=1&template=104"
  document.UpdateForm.nextpage.value="8";
  document.UpdateForm.suprflag.value="Y";
  document.UpdateForm.formactn.value="D "
  document.UpdateForm.updttype.value="DISCH"
  var validateresult = validateMandatory(document.UpdateForm);
  if (validateresult==true) {
    SubmitHidden(UpdateForm)
  }
}
function deleteEvent() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  linkurl="emrweb02.pbl?reportno=1&template=103" +
      "&urnumber=" + document.UpdateForm.urnumber.value +
      "&admissno=" + document.UpdateForm.admissno.value;
  Left=(document.body.clientWidth-420)/2
  DFrameLink(linkurl,0,Left,420,130)
 }
}
function SyncDates(){
  document.UpdateForm.emvis001.value=document.UpdateForm.emvis128.value;
  document.UpdateForm.emvis002.value=document.UpdateForm.emvis129.value;
  return; 
}
function setFormactn(type) {
    p=document.UpdateForm
    p.updfield.value=type;
    p.reasonfc.value=document.getElementById('reason'+type).value;
    document.getElementById('reason'+type).className='Mandatory';

    if (type=='01') {
      document.getElementById('emvis001').className='Mandatory';
      document.getElementById('emvis002').className='Mandatory';
    }

    if (type=='02') {
      document.getElementById('emvis128').className='Mandatory';
      document.getElementById('emvis129').className='Mandatory';
    }

    setRedirect()
    document.UpdateForm.nextpage.value="1"
    document.UpdateForm.formactn.value="C1"
    document.UpdateForm.updttype.value="ERROR"
    if(!isWhitespace(document.UpdateForm.username.value)) {
      getUserIDForLoginName(UpdateForm.username,UpdateForm.webuseid);
    }
    var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
       SubmitHidden(UpdateForm)
//       document.UpdateForm.submit()
    }
}
function changePatient() {
   PMenuLinkTo('../cgi-bin/emrweb02.pbl|01|008|1|400|150')
}
function changeClinical() {
//    document.UpdateForm.template.value="110";
//    document.UpdateForm.reportno.value="1"
//    document.UpdateForm.nextpage.value="1"
//    document.UpdateForm.formactn.value=""
//    document.UpdateForm.updttype.value=""
      var validateresult = validateMandatory(document.UpdateForm);
      if (validateresult==true) {
//       document.UpdateForm.submit()
         PMenuLinkTo('../cgi-bin/emrweb02.pbl|01|110|0|0|0')
      }
}
function changeDischarge() {
    document.UpdateForm.template.value="109";
    document.UpdateForm.reportno.value="1"
    document.UpdateForm.nextpage.value="1"
    document.UpdateForm.formactn.value=""
    document.UpdateForm.updttype.value=""
    var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
       document.UpdateForm.submit()
    }
}
function changeInjury() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.reportno.value="01"
  PatientLinks.template.value="072"
  PatientLinks.action="emrweb02.pbl"
  Left=(document.body.clientWidth-600)/2
  DFrameSubmit(PatientLinks,100,Left,600,300);
  }
}
function changeUR() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.action="patweb98.pbl"
  PatientLinks.reportno.value="01"
  PatientLinks.template.value="066"
  Left=(document.body.clientWidth-600)/2
  DFrameSubmit(PatientLinks,100,Left,600,300);
  }
}
function AccessAll() {
  if(!isWhitespace(document.UpdateForm.accessal.value)) {
    document.UpdateForm.username.value=document.UpdateForm.accessal.value;
    document.UpdateForm.username.className="Readonly";
    document.UpdateForm.username.readOnly=true; 
    document.UpdateForm.password.className="Readonly";
    document.UpdateForm.password.readOnly=true;
  } 
}
function changeClaim() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.reportno.value="01"
  PatientLinks.template.value="116"
  PatientLinks.action="emrweb02.pbl"
  Left=(document.body.clientWidth-600)/2
  DFrameSubmit(PatientLinks,100,Left,600,300);
  }                 
}                   
function ChangeMgtNote() {
  var validateresult = validateMandatory(document.UpdateForm);
    if (validateresult==true) {
  PatientLinks.reportno.value="06"
  PatientLinks.template.value="004"
  PatientLinks.action="cliweb06.pbl"
  Left=(document.body.clientWidth-700)/2
  DFrameSubmit(PatientLinks,0,Left,700,300);
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);AccessAll();self.focus();
              UpdateForm.emvis001.focus();">
<div id=PatientHeading></div>
<div id=PageBodySection>
<script type="text/javascript">
PatientURN="%EMRWEB02.01.003";
PatientVIS="%EMRWEB02.01.081";
PatientNAM="%EMRWEB02.01.002";
PatientSTA="%EMRWEB02.01.086.078";
PatientALT="%EMRWEB02.01.084";
PatientSEX="%EMRWEB02.01.019";
PatientDOB="%EMRWEB02.01.020";
PatientAGE="%EMRWEB02.01.021";
PatientLOC="%EMRWEB02.01.083";
PatientPRI="%EMRWEB02.01.086.066.1";
PatientUNT="%EMRWEB02.01.066.0";
PatientIND="%EMRWEB02.01.086.091";
GpCOD="%EMRWEB02.01.086.084.001";
GpNAM="%EMRWEB02.01.086.084.081";
GpPRAC="%EMRWEB02.01.086.085.001";
GpPRACCNT="%EMRWEB02.01.086.085.002";
GpPRACNAM="%EMRWEB02.01.086.085.005";
PatientARR="%EMRWEB02.01.101.0 %EMRWEB02.01.102";
PatientSEE="%EMRWEB02.01.130.0 %EMRWEB02.01.131";
PatientTRI="%EMRWEB02.01.103.3";
PatientECLC="%EMRWEB02.01.484.1";
PatientCLH="%STANDARD.01.017.CL";
PatientEHFT="%EMRWEB02.01.485";
InsertEmergencyHeader()
</script>
<div id=PatientMenu></div>

<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="01">
<input type=hidden name=updfield value="">
<input type=hidden name=reasonfc value="">
<input type=hidden name=resavail value="%EMRWEB02.01.168">
<input type=hidden name=template value="001">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=emvis118 value="%EMRWEB02.01.003">
<input type=hidden name=formactn>
<input type=hidden name=redirect>
<input type=hidden name=updateky value="%EMRWEB02.01.404">
<input type=hidden name=updttype>
<input type=hidden name=pmpxi067 value="%EMRWEB02.01.667.0">
<input type=hidden name=nextpage>
<input type=hidden name=suprflag>
<input type=hidden name=emvis058>
<input type=hidden name=emvis147>
<input type=hidden name=newloctn>
<input type=hidden name=webuseid value="">
<input type=hidden name=calcwait value="">
<input type=hidden name=accessal value="%EMRWEB02.01.487">
<input type=hidden name=emcntcat value="%STANDARD.01.025.089.233.0.1">

<table width=100% border=1 cellspacing=0 cellpadding=0>
<tr valign=top><td>
<table width=100% border=0 cellspacing=0 cellpadding=2>
    <tr><td class=DataLabel>Arrival Date </td>
    <td class=DataLabel><input type="text" name=emvis001 size="12" 
        onblur="checkDate(emvis001,'Arrival Date');" title="Arrival Date"
                         value="%EMRWEB02.01.101.0">
     <img src=../images/DateLookup.gif class=Icon
      date=document.UpdateForm.emvis001>

        Time
        <input type="text" name=emvis002 size="8" value="%EMRWEB02.01.102"
               onblur="checkTime(this,'Arrival Time')" title="Arrival Time">
        <img src=../images/TimeLookup.gif class=Icon
         onclick="TimeLookupFrame(emvis002);">
        <img src="../images/stopwat1.gif"i class=Icon
         onclick="SetCurrentDateTime(emvis001,emvis002);">
     </td>
     <td>Reason for Change</td>
     <td><select name=reason01 title="Arrival Date Reason for Change">
         <option></option>
         %STANDARD.01.007.FW
        </select></td>
     <td><input type=button class="button" value="Update" 
       onclick="setFormactn('01');">
    </td></tr>

    <tr><td class=DataLabel>Triage Date </td>
        <td class=DataLabel>
        <input type="text" name=emvis128 size="12" value="%EMRWEB02.01.162.0"
         onblur="checkDate(emvis128,'Triage Date');" title="Triage Date">
        <img src=../images/DateLookup.gif class=Icon
         date=document.UpdateForm.emvis128>
        Time
        <input type="text" name=emvis129 size="8" value="%EMRWEB02.01.163"
         onblur="checkTime(emvis129,'Triage Time');" title="Triage Time">
        <img src=../images/TimeLookup.gif class=Icon
         onclick="TimeLookupFrame(emvis129);">
        <img src="../images/stopwat1.gif" class=Icon
         onclick="SetCurrentDateTime(emvis128,emvis129);">
     </td>
     <td>Reason for Change</td>
     <td><select name=reason02 title="Triage Date Reason for Change">
         <option></option>
         %STANDARD.01.007.FW
        </select></td>
     <td><input type=button class="button" value="Update" 
       onclick="setFormactn('02');">

        </td></tr>

    <tr><td class=DataLabel>Triage Category
     <td><table border=0 cellspacing=0>
     <td class=Triage1><i>1</i><input type=radio name=emvis003 value=1></td>
     <td class=Triage2><i>2</i><input type=radio name=emvis003 value=2></td>
     <td class=Triage3><i>3</i><input type=radio name=emvis003 value=3></td>
     <td class=Triage4><i>4</i><input type=radio name=emvis003 value=4></td>
     <td class=Triage5><i>5</i><input type=radio name=emvis003 value=5></td>
     <td id="TriageCat9"></td>
     </tr></table>
     <td>Reason for Change</td>
     <td><select name=reason03 title="Triage Category Reason for Change">
         <option></option>
         %STANDARD.01.007.FW
        </select></td>
     <td><input type=button class="button" value="Update" 
       onclick="setFormactn('03');">
     </td>
     </td></tr>

<tr><td class=DataLabel>Triage Nurse </td>
    <td><input type=hidden name=gnm>
        <input type="text" name=emvis127 size=6 class=Readonly readonly
         onblur="UpCase(this);validateNurse(emvis127,dummy1);"
         title="Triage Nurse" value="%EMRWEB02.01.161.1">
        <input type="text" name=dummy1 size=20 class=Readonly readonly
         tabindex=-1 value="%EMRWEB02.01.161.0">
        <img src=../images/SearchIcon.gif class=Icon name=nursebut
         onclick='NurseSearchFrame(emvis127,dummy1);'>
     <td>Reason for Change</td>
     <td><select name=reason08 title="Triage Nurse Reason for Change">
         <option></option>
         %STANDARD.01.007.FW
        </select></td>
     <td><input type=button class="button" value="Update" 
       onclick="setFormactn('08');">
    </td></tr>

    <tr><td class=DataLabel>Username</td>
      <td class=DataLabel> 
          <input size=12 type=text name=username class=Mandatory
           title="Username">
          Password
          <input size=12 type=password name=password onblur=checkPass();
           class=Mandatory title="Password" ></td></tr>

    <tr><td colspan=5 align=center>
      <input type=button class="button" value="Delete" 
       onclick="deleteEvent();">
      <input type=button class="button" 
       value="Undischarge" onclick="changeUndischarge();">
      <input type=button class="button" 
       value="Change Patient" onclick="changePatient();">
      <input type=button class="button" 
       value="Clinical Screen" onclick="changeClinical();">
      <input type=button class="button" 
       value="Doctor date/time" onclick="changeDocDateTime();">
      <input type=button class="button" 
       value="Nurse date/time" onclick="changeNurDateTime();">
      <input type=button class="button" 
       value="Update Discharge" onclick="changeDischarge();">
      <input type=button class="button" name=injbuttn
       value="Injury Data" onclick="changeInjury();">
      <input type=button class="button" 
       value="Change U/R" onclick="changeUR();">
      <input type=button class="button" 
       value="Link Admission" onclick="linkAdmission();">
      <input type=button class="Bigbutton"
       value="Change Claim Code after Invoiced" onclick="changeClaim();">
      <input type=button class="button"
       value="Man. Notes" onclick="ChangeMgtNote();">
        </td></tr>
    </table>
</td></tr>
</table>
</form>

<span id=ShowTriageCat9 style="display:none;">
<table align=center cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td class=Triage9><i>9</i><input type=radio name=emvis003 value=9
     onclick="unCheck();"></td></tr>
</table>
</span>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=MenuType value="%EMRWEB02.01.088">
</form>
<script type="text/javascript">
 if(document.UpdateForm.emcntcat.value == "1" ) {
    var Triage9 = document.getElementById('TriageCat9');
    var ShowTriage9 = document.getElementById('ShowTriageCat9');
    Triage9.className="Triage9";
    Triage9.innerHTML = ShowTriage9.innerHTML;
    
 }
 var RadioIndex=%EMRWEB02.01.103.1 - 1           // Starts at 0 so sub 1
 if(RadioIndex!=-1) {
   if(RadioIndex==8) {
     RadioIndex=RadioIndex - 3 // Triage Cat 9
   }
 if(document.UpdateForm.emvis003[RadioIndex]!=undefined) {
   document.UpdateForm.emvis003[RadioIndex].checked=1 //Set Checked Value
 }
 document.UpdateForm.nursebut.disabled=false;
 document.UpdateForm.emvis127.readOnly=false;
 document.UpdateForm.emvis127.className="Mandatory"
 } 
 CTypeAdm="%EMRWEB02.01.252";
 if ( CTypeAdm == "Yes") {
   document.UpdateForm.emvis147.value=1; }
 else { 
   document.UpdateForm.emvis147.value=0; }
//
 Discharged="%EMRWEB02.01.147";
 if(Discharged==2 || Discharged==3){
   document.UpdateForm.calcwait.value="1";
 }
 if(Discharged=="4") {
   alert("Warning: This visit is cancelled");
 }
 InjData="%EMRWEB02.01.188";
 if ( InjData =="1" ) {
    document.UpdateForm.injbuttn.className="RedButton";
 }
</script>
</body>
