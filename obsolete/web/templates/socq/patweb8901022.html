<meta name="TemplateVersion" content="V11.00.00">
<meta name="TemplateHome" content="socq">
<meta name="HelpFileName" content="NoContextSet.html">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>
<script type="text/javascript" src="../js/patweb89.js"> </script>
<script type="text/javascript" src="../js/DefaultOnlineNok.js"> </script>
<script type="text/javascript">
function checkVis() {
 if(document.UpdateForm.ptpra001.value!="" | document.UpdateForm.ptpra002!=""){
 if(document.UpdateForm.admissno.value==""){
   alert("Person Responsible will not be saved, no visit selected.");
  }
 }
}
function submitUpdateForm() {
  document.UpdateForm.urnumber.value=
  document.UpdateForm.urnumber.value.replace(/ /g,"+");
  document.UpdateForm.admissno.value=
  document.UpdateForm.admissno.value.replace(/ /g,"+");
  document.UpdateForm.redirect.value=
  document.UpdateForm.redirect.value.replace(/ /g,"+");
  document.UpdateForm.submit();
}
function setRedirect() {
  if (window.name == "content") {
     document.UpdateForm.redirect.value="emrweb02.pbl?reportno=1&template=100" +
        "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
        "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
   }
  else {
     document.UpdateForm.redirect.value="emrweb01.pbl?reportno=1&template=1"
  }
  document.UpdateForm.submit();
}
// Default PRA to patient details
function PRASelf() {
  document.UpdateForm.ptpra002.value=document.hiddenvalues.padd1.value
  document.UpdateForm.ptpra003.value=document.hiddenvalues.padd2.value
  document.UpdateForm.ptpra004.value=document.hiddenvalues.padd3.value
  document.UpdateForm.ptpra005.value=document.hiddenvalues.padd4.value
  document.UpdateForm.ptpra006.value=document.hiddenvalues.ppost.value
  document.UpdateForm.ptpra007.value=document.hiddenvalues.ptelep.value
  document.UpdateForm.ptpra008.value=document.hiddenvalues.pteleb.value
  checkVis();
}
// Clear PRA details
function PRAClear() {
  document.UpdateForm.ptpra001.value="";
  document.UpdateForm.ptpra002.value="";
  document.UpdateForm.ptpra003.value="";
  document.UpdateForm.ptpra004.value="";
  document.UpdateForm.ptpra005.value="";
  document.UpdateForm.ptpra006.value="";
  document.UpdateForm.ptpra007.value="";
  document.UpdateForm.ptpra008.value="";
  document.UpdateForm.ptpra009.value="";
}
// Default NOK to patient details
function NOKSelf() {
  document.UpdateForm.ptmas050.value=document.hiddenvalues.padd1.value
  document.UpdateForm.ptmas051.value=document.hiddenvalues.padd2.value
  document.UpdateForm.ptmas052.value=document.hiddenvalues.padd3.value
  document.UpdateForm.ptmas053.value=document.hiddenvalues.padd4.value
  document.UpdateForm.ptmas054.value=document.hiddenvalues.ppost.value
  document.UpdateForm.ptmas055.value=document.hiddenvalues.ptelep.value
  document.UpdateForm.ptmas056.value=document.hiddenvalues.pteleb.value
}
// Clear NOK details
function NOKClear() {
  document.UpdateForm.ptmas049.value="";
  document.UpdateForm.ptmas050.value="";
  document.UpdateForm.ptmas051.value="";
  document.UpdateForm.ptmas052.value="";
  document.UpdateForm.ptmas053.value="";
  document.UpdateForm.ptmas054.value="";
  document.UpdateForm.ptmas055.value="";
  document.UpdateForm.ptmas056.value="";
  document.UpdateForm.ptmas057.value="";
  document.UpdateForm.pmpmi010.value="";
  document.UpdateForm.pmpmi011.value="";
}
// Default Emergency Contact to patient details
function ECSelf() {
  document.UpdateForm.ptmsx011.value=document.hiddenvalues.padd1.value
  document.UpdateForm.ptmsx012.value=document.hiddenvalues.padd2.value
  document.UpdateForm.ptmsx013.value=document.hiddenvalues.padd3.value
  document.UpdateForm.ptmsx014.value=document.hiddenvalues.padd4.value
  document.UpdateForm.ptmsx015.value=document.hiddenvalues.ppost.value
  document.UpdateForm.ptmsx016.value=document.hiddenvalues.ptelep.value
  document.UpdateForm.ptmsx017.value=document.hiddenvalues.pteleb.value
}
// Clear Emergency Contact details
function ECClear() {
  document.UpdateForm.ptmsx010.value="";
  document.UpdateForm.ptmsx011.value="";
  document.UpdateForm.ptmsx012.value="";
  document.UpdateForm.ptmsx013.value="";
  document.UpdateForm.ptmsx014.value="";
  document.UpdateForm.ptmsx015.value="";
  document.UpdateForm.ptmsx016.value="";
  document.UpdateForm.ptmsx017.value="";
  document.UpdateForm.ptmsx018.value="";
}
// Default Nearest Relative to patient details
function NRSelf() {
  document.UpdateForm.ptmsx020.value=document.hiddenvalues.padd1.value
  document.UpdateForm.ptmsx021.value=document.hiddenvalues.padd2.value
  document.UpdateForm.ptmsx022.value=document.hiddenvalues.padd3.value
  document.UpdateForm.ptmsx023.value=document.hiddenvalues.padd4.value
  document.UpdateForm.ptmsx024.value=document.hiddenvalues.ppost.value
  document.UpdateForm.ptmsx025.value=document.hiddenvalues.ptelep.value
  document.UpdateForm.ptmsx026.value=document.hiddenvalues.pteleb.value
}
// Clear Nearest Relative details
function NRClear() {
  document.UpdateForm.ptmsx019.value="";
  document.UpdateForm.ptmsx020.value="";
  document.UpdateForm.ptmsx021.value="";
  document.UpdateForm.ptmsx022.value="";
  document.UpdateForm.ptmsx023.value="";
  document.UpdateForm.ptmsx024.value="";
  document.UpdateForm.ptmsx025.value="";
  document.UpdateForm.ptmsx026.value="";
  document.UpdateForm.ptmsx027.value="";
}
</script>
</head>
%START.OF.PAGE
<script type="text/javascript">
function SetFields1() {
  if(isWhitespace(UpdateForm.ptmsx013.value)){
   return;
  }
  var OldSuburb=trim("%PATWEB89.01.614")
  if(UpdateForm.ptmsx013.value!=OldSuburb){
    suburb = UpdateForm.ptmsx013;
    state = UpdateForm.dummy;
    postcode = UpdateForm.ptmsx015;
    LookupPostCode(UpdateForm.ptmsx013.value);
  }
}
function SetFields2() {
  if(isWhitespace(UpdateForm.ptmas052.value)){
   return;
  }
  var OldSuburb=trim("%PATWEB89.01.056")
  if(UpdateForm.ptmas052.value!=OldSuburb){
    suburb = UpdateForm.ptmas052;
    state = UpdateForm.dummy;
    postcode = UpdateForm.ptmas054;
    LookupPostCode(UpdateForm.ptmas052.value);
  }
}
function SetFieldsPRA() {
  if(isWhitespace(UpdateForm.ptpra004.value)){
    return;
  }
  var OldSuburb=trim("%PATWEB89.01.169")
  if(UpdateForm.ptpra004.value!=OldSuburb){
  suburb = UpdateForm.ptpra004;
  state = UpdateForm.dummy;
// state = UpdateForm.ptpra004;
  postcode = UpdateForm.ptpra006;
  LookupPostCode(UpdateForm.ptpra004.value);
  }
}
function SetFieldsNRL() {
  if(isWhitespace(UpdateForm.ptmsx022.value)){
    return;
  }
  var OldSuburb=trim("%PATWEB89.01.623")
  if(UpdateForm.ptmsx022.value!=OldSuburb){
  suburb = UpdateForm.ptmsx022;
  state = UpdateForm.dummy;
  postcode = UpdateForm.ptmsx024;
  LookupPostCode(UpdateForm.ptmsx022.value);
  }
}
function OnlinePreadmission() {
  if (isWhitespace(document.UpdateForm.admisnid.value)){
    return;
  }
  var AdmissionID=GetCookieData("AdmissionID");
  var RegistrationType=GetCookieData("RegistrationType");
  SetCookie("RegistrationType","");
  if (!isWhitespace(AdmissionID)&&AdmissionID!="unknown") {
    DefaultOnlineNok(AdmissionID);
    var el=document.getElementById("redirect")
    var ad=document.getElementById("admisnid")
    el.value=document.getElementById("PreadmissionURL").value+'&admisnid='+ad.value;
  }
}
</script>
<BODY onLoad="PageLoad(event);InitPostCodes();OnlinePreadmission();">
<div>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<table border=1  cellpadding=0 cellspacing=0 width=100%>
<form name=hiddenvalues>
<input type=hidden name=padd1 value="%PATWEB89.01.012">
<input type=hidden name=padd2 value="%PATWEB89.01.013">
<input type=hidden name=padd3 value="%PATWEB89.01.014">
<input type=hidden name=padd4 value="%PATWEB89.01.015">
<input type=hidden name=ppost value="%PATWEB89.01.016">
<input type=hidden name=ptelep value="%PATWEB89.01.017">
<input type=hidden name=pteleb value="%PATWEB89.01.018">
</form>
<form name=UpdateForm action="patweb89.pbl" method=post onSubmit="chkFlag();" >
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=001>
<input type=hidden name=updatety value="4">
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=nextpage value="0">
<input type=hidden id=redirect name=redirect value="%PATWEB89.01.001.patweb89.01.002">
<input type=hidden id=PreadmissionURL name=PreadmissionURL value="%PATWEB89.01.001.patweb14.03.001">
<input type=hidden id=VisitListURL name=VisitListURL value="%PATWEB89.01.001.patweb98.01.020">
<input type=hidden name=dummy value="">
<input type=hidden name=ptmas046 value="%PATWEB89.01.050">
<input type=hidden name=ptmas061 value="%PATWEB89.01.064">
<input type=hidden name=ptmas067 value="%PATWEB89.01.079.0">
<input type=hidden name=pmpmi006 value="%PATWEB89.01.806">
<input type=hidden name=pmpmi009 value="%PATWEB89.01.809">
<input type=hidden name=pmpmi012 value="%PATWEB89.01.812.0">
<input type=hidden name=pmpmi015 value="%PATWEB89.01.815">
<input type=hidden name=pmpmi036 value="">
<input type=hidden name=pmpmi037 value="%PATWEB89.01.837">
<input type=hidden name=pmpmi052 value="">
<input type=hidden name=pmpmi053 value="%PATWEB89.01.853">
<input type=hidden name=pmpmi062 value="%PATWEB89.01.862">
<input type=hidden name=pmpmi063 value="%PATWEB89.01.863">
<input type=hidden name=pmpmi064 value="%PATWEB89.01.864">
<input type=hidden name=pmpmi067 value="%PATWEB89.01.867.0">
<input type=hidden name=pmpmi068 value="%PATWEB89.01.868.0">
<input type=hidden name=admisnid value="%PATWEB89.01.999.036">
<tr valign=top>
    <td class=HeadingCell align=center>Next-of-Kin</td>
    <td class=HeadingCell align=center>Emergency Contact </td></tr>
<tr valign=top>
    <td>
    <table border=0 width=100% cellspacing=0>
    <tr><td class=DataLabel>Name </td>
        <td><input type=text size="33" maxlength=20 name=ptmas049 tabindex=1
         value="%PATWEB89.01.053" onchange="UpCase(this);"></td>
        <td class=DataLabel>Relation </td>
        <td><select name=ptmas057 tabindex=7>
              <option value=""></option>
              %STANDARD.01.030
            </select>
        </td></tr>
    <tr valign=top>
        <td class=DataLabel>Address</td>
        <td><input type="text" size="33" maxlength="35" name="ptmas050"
         value="%PATWEB89.01.054" onchange="UpCase(this)"; tabindex=2></td>
        <td class=DataLabel>Private Ph</td>
        <td><input type="text" size="15" maxlength="20" name="ptmas055"
         value="%PATWEB89.01.059" tabindex=8></td></tr>
    <tr valign=top>
        <td class=DataLabel></td>
        <td><input type="text" size="33" maxlength="35" name="ptmas051"
         value="%PATWEB89.01.055" onchange="UpCase(this)"; tabindex=3></td>
        <td class=DataLabel>Work Ph.</td>
        <td><input type="text" size="15" maxlength="20" name="ptmas056"
         value="%PATWEB89.01.060" tabindex=9></td></tr>
    <tr valign=top>
        <td class=DataLabel>Suburb</td>
        <td><input type="text" size="33" maxlength="35" name="ptmas052"
         value="%PATWEB89.01.056" onchange="UpCase(this)"; tabindex=4
         onblur="SetFields2();"></td>
        <td class=DataLabel>Mobile Ph.</td>
        <td><input type="text" size="15" maxlength="20" name="pmpmi010"
         value="%PATWEB89.01.810" tabindex=9></td></tr>
    <tr valign=top>
        <td class=DataLabel>&nbsp;</td>
        <td><input type="text" size="33" maxlength="35" name="ptmas053"
        value="%PATWEB89.01.057" tabindex=5>
        <td>E-Mail</td>
        <td><input type=text size=23 maxlength=80
        name=pmpmi011 title="E-Mail" tabindex=10
        value="%PATWEB89.01.811" ></td>
        <tr>
    <tr><td>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptmas054" tabindex=6
        value="%PATWEB89.01.058"></td>
        <td class=DataLabel>&nbsp;</td>
        <td align=right colspan=2>
        <input type=button class="button" value="Clear" onClick="NOKClear();">
        <input type=button class="button" value="Default" onClick="NOKSelf();">
    </td></tr>
    </table></td>
    <td>
    <table border=0 width=100% cellspacing=0>
    <tr><td class=DataLabel>Name </td>
        <td><input type=text size="33" maxlength=20 name=ptmsx010 tabindex=10
         value="%PATWEB89.01.611" onchange="UpCase(this);"></td>
        <td class=DataLabel>Relation </td>
        <td><select name=ptmsx018 tabindex=16>
              <option value=""></option>
              %STANDARD.01.030
         </td></tr>
    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx011"
         value="%PATWEB89.01.612" onchange="UpCase(this)"; tabindex=11></td>
        <td class=DataLabel>Private Ph</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx016"
         value="%PATWEB89.01.617" tabindex=17></td></tr>
    <tr><td class=DataLabel></td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx012"
         value="%PATWEB89.01.613" onchange="UpCase(this)"; tabindex=12></td>
        <td class=DataLabel>Work/ <br> Mobile Ph</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx017"
         value="%PATWEB89.01.618" tabindex=18></td></tr>

    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx013"
         value="%PATWEB89.01.614" onchange="UpCase(this)"; tabindex=13
         onblur="SetFields1();">
        <td>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptmsx015"
         value="%PATWEB89.01.616" tabindex=15></td></tr>
    <tr><td class=DataLabel>&nbsp;</td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx014"
         value="%PATWEB89.01.615" tabindex=14>
         </td>
        <td colspan=2 align=right>
          <input type=button class="button" value="Clear" onClick="ECClear();">
          <input type=button class="button" value="Default" onClick="ECSelf();">
    </td></tr>
    </table>
</td></tr>
<tr valign=top>
    <td class=HeadingCell align=center >Enduring Power of Attorney  </td>
    <td class=HeadingCell align=center>Person Responsible for Account</td>
    </tr>
<tr><td><table border=0 width=100% cellspacing=0>
    <tr><td class=DataLabel>Name </td>
        <td><input type=text size="33" maxlength=20 name=ptmsx019
         value="%PATWEB89.01.620" onchange="UpCase(this);" tabindex=20></td>
        <td class=DataLabel>Relation </td>
        <td><select name=ptmsx027 tabindex=27>
              <option value=""></option>
              %STANDARD.01.030
        <td></tr>
    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx020"
         value="%PATWEB89.01.621" onchange="UpCase(this)"; tabindex=21></td>
        <td class=DataLabel>Private Ph</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx025"
         value="%PATWEB89.01.626" tabindex=28></td></tr>
    <tr><td class=DataLabel></td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx021"
         value="%PATWEB89.01.622" onchange="UpCase(this)"; tabindex=22></td>
        <td class=DataLabel>Work/<br>Mobile Ph</td>
        <td><input type="text" size="14" maxlength="20" name="ptmsx026"
         value="%PATWEB89.01.627" tabindex=29></td></tr>
    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx022"
         value="%PATWEB89.01.623" onchange="UpCase(this)"; tabindex=23
        onblur="SetFieldsNRL();">
        <td>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptmsx024"
         value="%PATWEB89.01.625" tabindex=25></td></tr>
    <tr><td class=DataLabel>&nbsp;</td>
        <td><input type="text" size="33" maxlength="35" name="ptmsx023"
         value="%PATWEB89.01.624" tabindex=24>
        </td>
        <td colspan=2 align=right>
          <input type=button class="button" value="Clear" onClick="NRClear();">
          <input type=button class="button" value="Default" onClick="NRSelf();">
    </td>
    </table>
<td>
    <table border=0 width=100% >
    <tr><td class=DataLabel>Name</td>
        <td><input type="text" size="33" name="ptpra001" tabindex=30
        maxlength="30" value="%PATWEB89.01.166" onchange="checkVis();"></td>
        <td class=DataLabel>Relation </td>
        <td><select name=ptpra009 tabindex=37>
              <option value=""></option>
              %STANDARD.01.030
            </select>
        </td></tr>
    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="33" maxlength="35" name="ptpra002"
            value="%PATWEB89.01.167" tabindex=31 onchange="checkVis();"></td>
        <td class=DataLabel>Home Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptpra007"
            value="%PATWEB89.01.171" tabindex=37></td></tr>
    <tr><td class=DataLabel></td>
        <td><input type="text" size="33" maxlength="35" name="ptpra003"
            value="%PATWEB89.01.168" tabindex=32></td>
        <td class=DataLabel>Work Phone</td>
        <td><input type="text" size="14" maxlength="20" name="ptpra008"
            value="%PATWEB89.01.172" tabindex=38></td></tr>
    <tr><td class=DataLabel>Suburb</td>
        <td>
        <input type="text" size="33" maxlength="35" name="ptpra004"
         value="%PATWEB89.01.169" tabindex=33 onblur="SetFieldsPRA();">
        <td>Post code</td>
        <td><input type="text" size="4" maxlength="8" name="ptpra006"
         value="%PATWEB89.01.170" tabindex=34></td></tr>
    <tr><td class=DataLabel></td>
        <td><input type="text" size="33" maxlength="35" name="ptpra005"
        value="%PATWEB89.01.182" tabindex=35  >
        <td colspan=2 align=right>
        <input type=button class="button" value="Clear" onClick="PRAClear();">
        <input type=button class="button" value="Default" onClick="PRASelf();">
        </td></tr>
    </table>
</td>
</td><td> &nbsp </td></tr>
<tr>
    <td colspan=4 align=center>
    <input type=button value="Update" tabindex=40 class="button"
     id="pat89sub" onClick="tempDisable(this);submitUpdateForm();">
    <input type=button value="Cancel" onClick="history.go(-1)" class="button">
    </td>
<div id=SelectHeading>
</div>
<div id=SelectLocation>
</div>
</tr>
</form>
</div></table>
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>
<script language=javascript>
//
   for (var i =0 ; i < document.UpdateForm.ptmas057.length; i++) {
     if (document.UpdateForm.ptmas057.options[i].value=="%PATWEB89.01.061.0") {
         document.UpdateForm.ptmas057.selectedIndex=i } };
//
   for (var i =0 ; i < document.UpdateForm.ptmsx018.length; i++) {
     if (document.UpdateForm.ptmsx018.options[i].value=="%PATWEB89.01.619") {
         document.UpdateForm.ptmsx018.selectedIndex=i } };
//
   for (var i =0 ; i < document.UpdateForm.ptmsx027.length; i++) {
     if (document.UpdateForm.ptmsx027.options[i].value=="%PATWEB89.01.628") {
         document.UpdateForm.ptmsx027.selectedIndex=i } };
//
   for (var i =0 ; i < document.UpdateForm.ptpra009.length; i++) {
     if (document.UpdateForm.ptpra009.options[i].value=="%PATWEB89.01.173") {
         document.UpdateForm.ptpra009.selectedIndex=i } };

   if ("%PATWEB89.01.836" == "Yes") {
       document.UpdateForm.pmpmi036.value=1;
     };
   if ("%PATWEB89.01.852" == "Yes") {
       document.UpdateForm.pmpmi052.value=1;
     };
 if  ("%PATWEB89.01.079.0" == "Y")
 {
    document.UpdateForm.ptmas067.checked=1
 }
   if ("%PATWEB89.01.050" == "Yes") {
       document.UpdateForm.ptmas046.value=1;
     }
function chkFlag() {
var intdet="%PATWEB89.01.921"
if (intdet==1) {
     document.UpdateForm.redirect.value="patweb92.pbl?reportno=12&template=1" +
        "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
        "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
 }
}

</script>
