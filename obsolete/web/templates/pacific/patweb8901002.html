<meta name="TemplateVersion" content="V11.00.00">
<meta name="TemplateHome" content="pacific">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/patweb89.js">  </script>

<script type="text/javascript">
function updatePatDetails() {
  if (validateMandatory(UpdateForm)) {
    validateDeath01();
    UpdHealthFund();
    document.UpdateForm.submit(); 
  }
}

function setAddress() {
  document.UpdateForm.ptmas008.value=document.UpdateForm.genpprac.value;
  document.UpdateForm.ptmas013.focus();
}
function setNotForResus() {
  if (typeof document.UpdateForm.nfresusc == "undefined")
    return;
  if (document.UpdateForm.nfresusc.checked == true)
    document.UpdateForm.pmpmi064.value = 1;
  else
    document.UpdateForm.pmpmi064.value = 0;
}

function SetMedRec() {
  if (document.UpdateForm.crmedtkb.checked == true)
    document.UpdateForm.crmedrec.value = 1;
  else
    document.UpdateForm.crmedrec.value = 0;
}
</script>

</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayResidency();setDeathfields();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>
<div id=PageBodySection>

<form name=UpdateForm action=patweb89.pbl method=post
 onsubmit="return validateDeath01(this)">
<input type=hidden name=reportno value="2">
<input type=hidden name=template value="002">
<input type=hidden name=updatety value="4">
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name="redirect" value="%PATWEB89.01.001.patweb98.01.001">
<input type=hidden name="savealia" value="0">
<input type=hidden name="aliasset" value="0">
<input type=hidden name="prevaddr" value="0">
<input type=hidden name="preaddset" value="0">
<input type=hidden name="pmpmi064" value="%PATWEB89.01.864">
<input type=hidden name="crmedrec" value="0">
<input type=hidden name="ptcnnewc" value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=d_ptmas061 value="%PATWEB89.01.064">
<input type=hidden name=updhfund value="">
<input type=hidden name=admhfund value="%PATWEB89.01.114.0">
<input type=hidden name=admhftab value="%PATWEB89.01.115.0">
<input type=hidden name=admnstat value="%PATWEB89.01.199.020">
<input type=hidden name=admninvc value="%PATWEB89.01.950">
<input type=hidden name="ptcnvshf" id="ptcnvshf"
 value="%STANDARD.01.025.124.158.0.1">

<table border=0 width=100% cellspacing=0 cellpadding=1>
  <tr><td colspan=6 class=HeadingCell align=center >
      Demographic Details </td></tr> 

  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel>    
        <script type="text/javascript">PractDescription()</script></td>
    <td><input type=hidden name=pmpmi060 id=pmpmi060
        value="%PATWEB89.01.885.001">
        <input type=text readonly name=genpprac id=genpprac
         value="%PATWEB89.01.885.005" onblur='setAddress();'>
        <input type=hidden name=pmpmi061 id=pmpmi061
         value="%PATWEB89.01.861">
        <input type=hidden name=genpprov id=genpprov
         value="">
        <img src="../images/SearchIcon.gif" class=Icon
       onclick="GPHCGSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,genpprac,pmpmi061,setAddress)">
     <img src="../images/erase.gif" class=Icon
      onclick="clrFields(pmpmi060,genpprac,pmpmi061,genpprov);">
    </td>
      <td class=DataLabel>MCH </td>
    <td><input type=hidden name=pmpmi059 id=pmpmi059
         value="%PATWEB89.01.884.001">
        <input type=text readonly name=genpname id=genpname
         value="%PATWEB89.01.884.081">
        <img src="../images/SearchIcon.gif" class=Icon
      onclick="GPHCPSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,genpprac,pmpmi061,3,setAddress)">
      <img src="../images/erase.gif" class=Icon
       onclick="clrFields(pmpmi059,genpname);">
         </td></tr>
  <tr><td class=DataLabel>Title</td>
  <td><select title="Patient Title"
        name=ptmas001 tabindex=1 class=Mandatory >
        <option></option>
        %STANDARD.01.029
        </select>
        </td>
    <td class=DataLabel>Address</td>
    <td><input type=text size=25 maxlength=25  tabindex=6
        name="ptmas008" title="Address Line 1" class=Mandatory
        value="%PATWEB89.01.012" onchange="checkAdd01();"></td>
    <td class=DataLabel>Private Phone</td>
    <td><input type=text size=12 maxlength=12 
        name=ptmas013 title="Private Phone No" tabindex=11
        value="%PATWEB89.01.017" ></td></tr>

<tr><td class=DataLabel> Surname</td>
    <td><input type=text size=40 name=ptmas005 
        title="Patient Surname" maxlength=40 class=Mandatory
        value="%PATWEB89.01.009" tabindex=2 
        onchange="checkAlias01();UpCase(this)"></td>
    <td class=DataLabel></td>
    <td><input type=text size=25 maxlength=25 
        name=ptmas009 title="Address Line 2" tabindex=7
        value="%PATWEB89.01.013" 
        onchange="checkAdd01();"</td>
    <td class=DataLabel>Business Phone</td>
    <td><input type=text size=12 maxlength=12 
        name=ptmas014 title="Business Phone No" tabindex=12
        value="%PATWEB89.01.018" ></td></tr>

<tr><td class=DataLabel>Given Names</td>
    <td><input type=text size=25 maxlength=25 
        title="Patient Given Names" class=Mandatory tabindex=3
        name=ptmas006 value="%PATWEB89.01.010" 
        onchange="checkAlias01();UpCase(this);">
    </td>
    <td class=DataLabel>        </td>
    <td><input type=text size=25 maxlength=25 
       name=ptmas010 title="Address Line 3" tabindex=8
       value="%PATWEB89.01.014" 
       onchange="checkAdd01();"></td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text size=17 maxlength=20 class=MobilePhone
        name=ptmsx039 title="Mobile Phone No" tabindex=13
        value="%PATWEB89.01.643" ></td></tr>


<tr><td class=DataLabel>Sex</td>
     <td><select name="ptmas015" tabindex=4
        title="Patient Gender" class=Mandatory >
         <option></option>
         <option value="U">Unknown</option>
         <option value="I">Indeterminate</option>
         <option value="M">Male</option>
         <option value="F">Female</option>
         </select></td>

    <td class=DataLabel>E-Mail</td>
    <td><input type=text size=23 maxlength=80
        name=pmpmi005 title="E-Mail" tabindex=9
        value="%PATWEB89.01.805" ></td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type=text size=12 name=ptmas017 title="Date of Birth"
         value="%PATWEB89.01.020" tabindex=5 class="Mandatory PastDate"></td>     

    <td class=DataLabel>Demographics Confirmed</td>
    <td><input type="text" class="PastDate" name="ptmas069" id=ptmas069
     title="Demographics Confirmed" tabindex=14 value="%PATWEB89.01.085.059">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(ptmas069,null);" />
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(ptmas069);" />
          </td></tr>

  <tr><td colspan=6 class=HeadingCell align=center >
      PMI Details </td></tr> 
  <tr><td>

<tr><td class=DataLabel>Previous Name</td>
    <td><input type="text" name="ptmas007" title="Previous Name"
         value="%PATWEB89.01.011" tabindex=15></td>
    <td class=DataLabel>Marital Status</td>
    <td><select  name=ptmas016 tabindex=17 class=select120>
        <option></option>
         %PATWEB89.01.069.2
        </select></td>
    <td class=DataLabel>Religion</td>
    <td><select name=ptmas020 tabindex=19 class=select120>
        <option></option>
        %PATWEB89.01.023.2
        </select></td>
</tr>    

<tr>
    <td class=DataLabel>Folder Selection</td>
    <td><select name=pmpmi077 tabindex=20 title="Folder Selection">
         <option></option>
         %PATWEB89.01.879.2
         </select></td>
</tr>

<tr><td class=DataLabel>Interpreter Required</td>
    <td><select title="Interpreter Required" name=pmpmi001 tabindex=20>
        %PATWEB89.01.801.2
        </select>
        </td>
    <td class=DataLabel>Pref Language 1</td>
    <td><select name=pmpmi002 class="select120" tabindex=23
         title="Preferred Language">
        <option></option>
         %PATWEB89.01.802.2
        </select></td>
    <td class=DataLabel>Pref Language 2</td>
    <td><select name=pmpmi003 class=select120 tabindex=26
         title="Preferred Language">
        <option></option>
         %PATWEB89.01.803.2
        </select></td>
</tr>

<tr><td colspan=6 class=HeadingCell align=center >
      Residency Details </td></tr>
<tr><td class=DataLabel>Country of Birth</td>
    <td><select  name="ptmas019" tabindex=30 class="select120"
                 title="Country of Birth">
        <option></option>
        %PATWEB89.01.022.2
        </select></td>
<tr><td class=DataLabel>Type of Residency</td>
    <td><select name=ptmas021 tabindex=31 class=Mandatory 
         title="Type of Resident" >
         <option></option>
         %PATWEB89.01.024.2
        </select></td>
        <td><div id=ExpiryHeading></div></td>
        <td><div id=ExpiryDate></div></td>
        <td><div id=VisaHeading></div></td>
        <td><div id=Visa></div></td>
        <tr><td><div id=CountryHeading></div></td>
        <td><div id=CountryResidence></div></td>

<tr><td class=DataLabel>Residency Comments</td>
    <td colspan=5><input type="text" name="pmres004" size=145 maxlength=127
         tabindex=32 value="%PATWEB89.01.946"></td></tr>
</table>

<table border=0 width=100% cellspacing=0 cellpadding=0>
<tr><td colspan=8 class=HeadingCell align=center >
      Death Details </td></tr> 
<tr><td class=DataLabel>Date of Death</td>
    <td><input type=hidden name=ptmas029>
        <input type=text size=12 name=ptmas061 id=ptmas061 class=Date notab
         value="%PATWEB89.01.064" title="Date of Death"
         onblur="confirmDeath(this,'Date of Death')">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(ptmas061);">
        </td>

    <td class=DataLabel>Unknown Date of Death </td>
    <td><input type=checkbox name=ptmas067 id=ptmas067 value="Y" notab
         onclick="confirmUnknownDeath();"></td>
    <td class=DataLabel>Death Notification </td>
    <td><select name=pmpmi017 id=pmpmi017 class=select120 notab
         title="Death Notification">
        <option></option>
        %PATWEB89.01.817.2
        </select>
    </td>

    <td class=DataLabel>%STANDARD.01.017.P7</td>
    <td><select name=pmpmi072 notab>
        <option></option>
        %PATWEB89.01.872.2
        </select>
    </td>
</tr>

<tr><td colspan=8 class=HeadingCell align=center >
   <script type="text/javascript">URDesc();</script> Comments </td></tr>
<tr>
<tr><td valign=top>
     <input type=button value="Add Comments" class="button"
      name="AddComm" id="AddComm"
      onclick="tempDisable(this);AddURComment();"></td>
    <td colspan=4><textarea wrap=hard name=urcommna class=Readonly readonly
         rows=4 cols=70>%PATWEB89.01.068.005</textarea>
    </td>
</tr>

<tr><td colspan=8 align=center>
    <input type=button value=Update class="button" tabindex=41 id="pat89sub"
     onclick='tempDisable(this);updatePatDetails()'>
    <input type=button class="button" name="aliasbut" value="Alias" tabindex=42
     onclick='PatientLinkTo("patweb89.pbl",6,1,1,550,300);'>
    <input type=button class="button" name="linksbut" value="Links" tabindex=43
     onclick='PatientLinkTo("patweb96.pbl",2,1,1,600,400);'>
    <input type=button class="Bigbutton" name="emergbut" value="Emerge Contact"
     tabindex=44 onclick="contacts();">
    <input type=button class="button" name="preadbut" value="Prev Address"
     tabindex=45 onclick='PatientLinkTo("patweb98.pbl",1,38,1,700,400);'>
    <input type=button class="button"  value="Cancel" tabindex=46
     onclick='PatientLinkTo("patweb98.pbl",1,1,0,0);'>
    </td></tr>
</table>
</form>

<div id=SelectHeading></div>
<div id=SelectLocation></div>
</div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>


<script type="text/javascript">
 if ("%PATWEB89.01.033" == "Yes") {
  alert("Warning: Patient is Deceased");
 }
 if ("%PATWEB89.01.947" == "1") {
  alert("Warning: Resident Status Expiry Imminent");
 }
 if ("%PATWEB89.01.947" == "2") {
  alert("Warning: Resident Status Expired");
 }

 if (typeof document.UpdateForm.nfresusc != "undefined")
 {
   if (document.UpdateForm.ptpmi064.value  == "1")
     document.UpdateForm.nfresusc.checked = true;
 }

 for (var i=0; i < document.UpdateForm.ptmas001.length; i++) {
  if (document.UpdateForm.ptmas001.options[i].value=="%PATWEB89.01.005.0"){
      document.UpdateForm.ptmas001.selectedIndex=i;
  }
 }

 PatientSex="%PATWEB89.01.019"
 for (var i =0 ; i < document.UpdateForm.ptmas015.length; i++) {
  if (document.UpdateForm.ptmas015.options[i].value==PatientSex.substr(0,1)) {
       document.UpdateForm.ptmas015.selectedIndex=i } };

// MergePsych="%PATWEB89.01.050"
// if ( MergePsych == "Yes") {
//   document.UpdateForm.ptmas046.checked=true;
// }
// InterpReq="%PATWEB89.01.049"
// if ( InterpReq == "Yes") {
//   document.UpdateForm.ptmas045.checked=true;
// } 
//
 AliasIndicator="%PATWEB89.01.093";
 if ( AliasIndicator =="1" ) {
    document.UpdateForm.aliasbut.className="RedButton";
 }
//
 LinksIndicator="%PATWEB89.01.094";
 if ( LinksIndicator =="1" ) {
    document.UpdateForm.linksbut.className="RedButton";
 }
//
 PreAddIndicator="%PATWEB89.01.095";
 if ( PreAddIndicator =="1" ) {
    document.UpdateForm.preadbut.className="RedButton";
 }
//
 EmergeIndicator="%PATWEB89.01.096";
 if ( EmergeIndicator =="1" ) {
    document.UpdateForm.emergbut.className="RedButton";
 }

 DateofDeath="%PATWEB89.01.064"
 if(!isWhitespace(DateofDeath)){
 document.UpdateForm.ptmas067.checked=false;
 document.UpdateForm.ptmas067.disabled=true;
 document.UpdateForm.pmpmi017.disabled=false;
 }
 UnknownDDeath="%PATWEB89.01.079.0";
 if  ( UnknownDDeath == "Y")
 {
    document.UpdateForm.ptmas067.checked=1
    document.UpdateForm.pmpmi017.className="Mandatory";
    document.UpdateForm.pmpmi017.disabled=false;}
 if (UnknownDDeath=="N") {
   if(isWhitespace(DateofDeath)){
    document.UpdateForm.pmpmi017.disabled=true;
   }
  }

function DisplayResidency() {
  i=document.UpdateForm.ptmas021.selectedIndex;
  ind=document.UpdateForm.ptmas021.options[i].value.substring(5,6)
  if (ind=="T") {
    ExpiryHeading.innerHTML=expiryhd.innerHTML;
    ExpiryDate.innerHTML=expirydate.innerHTML;
    VisaHeading.innerHTML=visahd.innerHTML;
    Visa.innerHTML=visano.innerHTML;
    CountryResidence.innerHTML=countryblank.innerHTML;
    CountryHeading.innerHTML="";
    document.UpdateForm.pmres001.value="";
  } else if (ind=="N"){
    CountryResidence.innerHTML=countryresidence.innerHTML;
    CountryHeading.innerHTML=countryheading.innerHTML;
    Visa.innerHTML=visablank.innerHTML;
    VisaHeading.innerHTML="";
    document.UpdateForm.pmres005.value="";
    ExpiryDate.innerHTML=expiryblank.innerHTML;
    ExpiryHeading.innerHTML="";
    document.UpdateForm.pmres002.value="";
    SetCategoryC_(document.UpdateForm.pmres001,"%PATWEB89.01.943.1")
  } else if (ind=="V") {
    ExpiryHeading.innerHTML=expiryhd.innerHTML;
    ExpiryDate.innerHTML=expirydate.innerHTML;
    VisaHeading.innerHTML=visahd.innerHTML;
    Visa.innerHTML=visano.innerHTML;
    CountryResidence.innerHTML=countryresidence.innerHTML;
    CountryHeading.innerHTML=countryheading.innerHTML;
    SetCategoryC_(document.UpdateForm.pmres001,"%PATWEB89.01.943.1")
    }
    else {
    ExpiryDate.innerHTML=expiryblank.innerHTML;
    ExpiryHeading.innerHTML="";
    Visa.innerHTML=visablank.innerHTML;
    VisaHeading.innerHTML="";
    document.UpdateForm.pmres005.value="";
    document.UpdateForm.pmres002.value="";
    CountryResidence.innerHTML=countryblank.innerHTML;
    CountryHeading.innerHTML="";
    document.UpdateForm.pmres001.value="";
  }
}
function contacts() {
 if (document.UpdateForm.ptcnnewc.value=='1') {
   location.href='patweb07.pbl?reportno=06&template=004&urnumber='+
                 '%PATWEB89.01.003&admissno=%PATWEB89.01.081&othrcont=0'
 } else {
   location.href='patweb89.pbl?reportno=01&template=022&urnumber='+
                 '%PATWEB89.01.003&admissno=%PATWEB89.01.081&othrcont=0'
 }
}
</script>
<span id=expiryhd style="display:none">
<td class=DataLabel>Expiry Date</td>
</span>
<span id=expirydate style="display:none">
    <td><input type=text size=12 name=pmres002 id=pmres002 tabindex=29
         class="Mandatory Date" title="Expiry Date"
        value="%PATWEB89.01.944" onblur="checkDate(this,'Expiry Date');">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(pmres002);">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(pmres002,null);">
    </td></tr>
</span>
<span id=expiryblank style="display:none">
   <input type=hidden name=pmres002>
</span>
<span id=countryblank style="display:none">
   <input type=hidden name=pmres001>
</span>
<span id=countryheading style="display:none">
<td class=DataLabel>Country of Residence</td>
</span>
<span id=countryresidence style="display:none">
    <td><select name="pmres001" id=pmres001 tabindex=30 
         class="select120 Mandatory" title="Country of Residence">
        <option></option>
        </select>
</span>
<span id=visablank style="display:none">
   <input type=hidden name=pmres005>
</span> 
<span id=visahd style="display:none">
<td class=DataLabel>Visa Number</td>
</span>
<span id=visano style="display:none">
    <td><input type=text size=12 name=pmres005 id=pmres005 tabindex=30
         class="Mandatory" title="Visa Number" value="%PATWEB89.01.951">
    </td></tr>
</span>
