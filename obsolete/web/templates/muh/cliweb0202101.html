<meta name="TemplateVersion" content="V11.00.00">
<meta name="TemplateHome" content="muh">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src="../js/cliweb02.js"></script>
<script type="text/javascript">
var RapidResponseText;
var ClinicalReviewText;
function init() {
 SelectNumbers(AddForm.obdet041,0,11,1,"");    // Pain Score (0-10)
 for (var i=1 ; i < document.AddForm.obdet032.length; i++) {
   if (document.AddForm.obdet032.options[i].value.substr(3,1)!="O") {
     document.AddForm.obdet032.selectedIndex=i 
     i=document.AddForm.obdet032.length;
   } 
 }
 checkRoomAir(AddForm.obdet032,AddForm.obdet010);
 RoundNumber(AddForm.pmsvx045,'1');
}
function SubmitObs(thisForm) {
  if (CheckRapidResponse()) {
    if (validateMandatory(thisForm)) {
      if (thisForm.chckhigh.checked==true) {
        thisForm.obdet034.value=999;
      }
      thisForm.submit();
    }
  }
}
function UpdateBMI() {
  AddForm.obdet037.value=AddForm.pmsvx045.value;
  AddForm.bmi.value="0.0"
  AddForm.bsa.value="0.0"
  WGT=AddForm.pmsvx045.value
  HGT=AddForm.pmsvx046.value
  if (WGT>0&&HGT>0) {
    AddForm.bsa.value=Math.sqrt(HGT*WGT/3600);
    RoundNumber(AddForm.bsa,'2');
    AddForm.bmi.value=WGT/Math.pow(HGT/100,2);
    RoundNumber(AddForm.bmi,'1');
  }
}
function CheckRapidResponse() {
  CheckClinicalReview();
  RapidResponseText='';
  if (!isWhitespace(document.AddForm.obdet008.value)) {
    if (parseInt(document.AddForm.obdet008.value,10)<5) {
      RapidResponseText+='\n - Respiration Very Low';
      return AlertRapidResponse("Respiration Very Low");   /* Resps <5 */
    }
    if (parseInt(document.AddForm.obdet008.value,10)>30) {
      RapidResponseText+='\n - Respiration Very High';
    }
  }
  if (!isWhitespace(document.AddForm.obdet009.value)) {
    if (parseInt(document.AddForm.obdet009.value,10)<90) {
      RapidResponseText+='\n - Oxygen Saturation Very Low';
    }
  }
  if (!isWhitespace(document.AddForm.obdet006.value)) {
    if (parseInt(document.AddForm.obdet006.value,10)<90) {
      RapidResponseText+='\n - Very Low Blood Pressure';
    }
    if (parseInt(document.AddForm.obdet006.value,10)>200) {
      RapidResponseText+='\n - Very High Blood Pressure';
    }
  }
  if (!isWhitespace(document.AddForm.obdet004.value)) {
    if (parseInt(document.AddForm.obdet004.value,10)<40) {
      RapidResponseText+='\n - Very Low Heart Rate';
    }
    if (parseInt(document.AddForm.obdet004.value,10)>140) {
      RapidResponseText+='\n - Very High Heart Rate';
    }
  }
  if (!isWhitespace(document.AddForm.obdet034.value)) {
    if (document.AddForm.obdet034.value<1) {
      RapidResponseText+='\n - Blood Sugar Very Low';
    }
  }
  el=document.AddForm.obdet035
  if (!isWhitespace(el.options[el.selectedIndex].value)) {
    if (el.options[el.selectedIndex].value=="1") {
      RapidResponseText+='\n - Patient is Unresponsive';
    }
  }
  if (RapidResponseText=='') {
    if (ClinicalReviewText=='') {
      return true;
    } else {
      alert('Clinical Review Required  '+ClinicalReviewText);
      return true;
    } 
  } 
  alert('Rapid Response Required  '+RapidResponseText+ClinicalReviewText);
  if (isWhitespace(AddForm.obdet038.value)) {
    alert("Please Record Action Taken as a Comment.");
    return false;
  }
  return true;
}
function CheckClinicalReview() {
  ClinicalReviewText='';
  if (!isWhitespace(document.AddForm.obdet005.value)) {
    if (document.AddForm.obdet005.value<35.5) {
      ClinicalReviewText+="\n - Temperature Low";   /* Temp <35.5 */
    }
    if (document.AddForm.obdet005.value>38.5) {
      ClinicalReviewText+="\n - Temperature High";   /* Temp >38.5 */
    }
  }
  if (!isWhitespace(document.AddForm.obdet008.value)) {
    if (parseInt(document.AddForm.obdet008.value,10)<10 &&
        parseInt(document.AddForm.obdet008.value,10)>=5) {
      ClinicalReviewText+="\n - Respiration Low";   /* Resps <10 */
    }
    if (parseInt(document.AddForm.obdet008.value,10)>25 &&
        parseInt(document.AddForm.obdet008.value,10)<=30) {
      ClinicalReviewText+="\n - Respiration High";   /* Resps >25 */
    }
  }
  if (!isWhitespace(document.AddForm.obdet009.value)) {
    if (parseInt(document.AddForm.obdet009.value,10)<95 &&
        parseInt(document.AddForm.obdet009.value,10)>=90) {
      ClinicalReviewText+="\n - Oxygen Saturation Low";   /* O2 Sats <90 */
    }
  }
  if (!isWhitespace(document.AddForm.obdet006.value)) {
    if (parseInt(document.AddForm.obdet006.value,10)<100 &&
        parseInt(document.AddForm.obdet006.value,10)>=90) {
      ClinicalReviewText+="\n - Low Blood Pressure";   /* Systolic <90 */
    }
    if (parseInt(document.AddForm.obdet006.value,10)>180 &&
        parseInt(document.AddForm.obdet006.value,10)<=200) {
      ClinicalReviewText+="\n - High Blood Pressure";   /* Systolic >200 */
    }
  }
  if (!isWhitespace(document.AddForm.obdet004.value)) {
    if (parseInt(document.AddForm.obdet004.value,10)<50 &&
        parseInt(document.AddForm.obdet004.value,10)>=40) {
      ClinicalReviewText+="\n - Low Heart Rate";   /* Heart Rate <40 */
    }
    if (parseInt(document.AddForm.obdet004.value,10)>120 &&  
        parseInt(document.AddForm.obdet004.value,10)<=140) {
      ClinicalReviewText+="\n - High Heart Rate";   /* Heart Rate >140 */
    }
  }
  if (!isWhitespace(document.AddForm.obdet034.value)) {
    if (document.AddForm.obdet034.value<4 &&
        document.AddForm.obdet034.value>=1) {
      ClinicalReviewText+="\n - Blood Sugar Low";   /* BSL < 1 */
    }
  }
}
</script>
%START.OF.PAGE
<body onload="PageLoad();UpdateBMI();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Basic Observations
</span>

<table border=0 cellspacing=1 cellpadding=1 width=95% align=center>
<form name=AddForm method=post action="cliweb02.pbl">
  <input type=hidden name=reportno value=2>
  <input type=hidden name=template value=1>
  <input type=hidden name=urnumber value="%CLIWEB02.02.003">
  <input type=hidden name=admissno value="%CLIWEB02.02.081">
  <input type=hidden name=nextpage value="1">
  <input type=hidden name=updttype value="A">
  <input type=hidden name=NeuroState value="%CLIWEB02.02.135">
  <input type=hidden name=obdet037 value="%CLIWEB02.02.137">
  <input type=hidden name=obdet003 value="B" title="Observation Type">
<!--
<tr><td class=DataLabel>User Id </td>
    <td><input type=hidden  name=securety value="2">
        <input type=text size=12 name=secureid class=Mandatory
         title="User ID">
    Password
    <input type=password size=12 name=securepw class=Mandatory
         title="Password" onblur=checkPass();>
    </td></tr>
-->
<tr><td class=DataLabel>Date </td>
    <td><input type=text name=obdet001 title="Observation Date"
         value="%CLIWEB02.02.101" readonly size=12 class="Readonly Date">
        </td>
    <td class=DataLabel>Time </td>
    <td><input type=text name=obdet002 title="Observation Time"
         value="%CLIWEB02.02.102" size=9 class=Mandatory></td></tr>

<tr><td class=DataLabel>Pulse </td>
    <td><input type=text name=obdet004 title="Pulse"
         size=4 maxlength=3 class=Integer 
         onblur="checkMinMax(document.AddForm.obdet004,'0','300');"></td>

    <td class=DataLabel>Respiration </td>
    <td><input type=text name=obdet008 title="Respiration"
         size=4 maxlength=3 class=Integer
         onblur="checkMinMax(document.AddForm.obdet008,'0','100');"></td></tr>

<tr><td class=DataLabel>Temperature</td>
    <td><input type=text name=obdet005 title="Temperature"
         size=4 maxlength=4 class=Number 
         onblur="RoundNumber(this,'1');checkMinMax(document.AddForm.obdet005,'15.0','45.0');">
    </td>
 
    <td class=DataLabel>Blood Pressure </td>
    <td><input type=text name=obdet006 title="BP Systolic"
         size=4 maxlength=3 class=Integer
         onblur="checkMinMax(document.AddForm.obdet006,'0','300');"> /
        <input type=text name=obdet007 title="BP Diastolic"
         size=4 maxlength=3 class=Integer
         onblur="checkMinMax(document.AddForm.obdet007,'0','300');"></td></tr>

<tr><td class=DataLabel>Pulse/Oximeter SaO<sub>2 </td>
    <td><input type=text size=4 maxlength=3 name=obdet009 title="Pulse/Oximeter"
         class=Integer min=0 max=100></td>

    <td class=DataLabel>F<sub>1</sub>O<sub>2</sub></td>
    <td><select name=obdet032 title="F1 O2 type" 
         onchange="checkRoomAir(document.AddForm.obdet032,document.AddForm.obdet010);">
        <option></option>
        %CLIWEB02.02.132.2
        </select>
        <input type=text name=obdet010 title="F1 O2 Flow"
         size=4 maxlength=2 class=Integer
         onblur="checkMinMax(document.AddForm.obdet010,'0','15');">
        &nbsp;ltr per min</td></tr>

<tr><td class=DataLabel>Peak Flow </td>
    <td><input type=text size=4 maxlength=4 name=obdet011 title="Peak Flow"
        class=Integer min=0 max=700>
        </td>

    <td class=DataLabel>Pain Score </td>
    <td><select name=obdet041 class=SelectTny title="Pain Score">
        <option></option>
        </select> 0=no pain, 10=worst</td></tr>

<tr><td class=DataLabel>%CLIWEB02.02.133.8</td>
    <td><select name=obdet033 title="%CLIWEB02.02.133.8">
        <option></option>
        %CLIWEB02.02.133.2
        </select>
        </td>

    <td class=DataLabel>BSL</td>
    <td><input type=text name=obdet034 title="Blood Sugar Level"  
         size=5 maxlength=4 class=Number 
         onblur="RoundNumber(this,'1');checkMinMax(document.AddForm.obdet034,'0.0','60.0');">
         mmol/L&nbsp;&nbsp;&nbsp;High
        <input type=checkbox name=chckhigh value="Y" 
         onclick="checkBSL(chckhigh,document.AddForm.obdet034);">
    </td></tr>
<tr><td class=DataLabel>Weight</td>
    <td><input type=text size=6 maxlength=6 name=pmsvx045 title="Weight"
        class=Number min=0 value="%CLIWEB02.02.245"
        onblur="RoundNumber(this,'1');UpdateBMI();">&nbsp;Kg
        </td>

    <td class=DataLabel>Height</td>
    <td><input type=text size=6 maxlength=6 name=pmsvx046 title="Height"
         class=Number min=0 value="%CLIWEB02.02.246"
         onblur="RoundNumber(this,'2');UpdateBMI();"> cm
    </td></tr>

<tr><td class=DataLabel>BMI</td>
    <td><input type=text size=6 name=bmi readonly title="Body Mass Index">
        </td>

    <td class=DataLabel>BSA</td>
    <td><input type=text size=6 name=bsa readonly title="Body Surface Area"> m2
    </td></tr>

<tr><td valign=top class=DataLabel>%CLIWEB02.02.127.8</td>
    <td><select name=obdet027 title="%CLIWEB02.02.127.8">
        <option></option>
        %CLIWEB02.02.127.2
       </select></td>
</tr>

<tr><td valign=top class=DataLabel>Neurological Status  </td>
    <td colspan=3><select name=obdet035 class=Select150 title="Neurological Status">
        <option></option>
        <option value=5>(5) Alert</option>
        <option value=4>(4) Voice</option>
        <!--<option value=3>(3) Agitated/Confused</option>-->
        <option value=2>(2) Pain</option>
        <option value=1>(1) Unresponsive</option>
        </select></td></tr>

<tr><td valign=top class=DataLabel>Comments </td>
    <td colspan=3><input size=40 maxlength=40 name=obdet038 title="Comment"><br>
        <input size=40 maxlength=40 name=obdet039 title="Comment"><br>
        <input size=40 maxlength=40 name=obdet040 title="Comment"></td></tr>
<tr><td align=center colspan=4>
    <input type=button name=addobsbt value="Add" class="button"
     onclick="SubmitObs(AddForm);">
    <input type=button name=cancelbt value="Cancel" class="button" 
     onClick="DFrameCloseRefresh();">
    </td></tr>
</form>
</table>
