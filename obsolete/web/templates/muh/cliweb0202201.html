<meta name="TemplateVersion" content="V11.00.00">
<meta name="TemplateHome" content="muh">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src="../js/cliweb02.js"></script>
<script type="text/javascript">
function SetNeuro() {
 var Neuro=parseInt(document.UpdateForm.NeuroState.value);
 for (var i=0;i<document.UpdateForm.obdet035.length;i++) {
   if (parseInt(document.UpdateForm.obdet035.options[i].value)==Neuro) {
     document.UpdateForm.obdet035.selectedIndex=i 
   } 
 }
}
function SubmitObs(type) {
  if (CheckRapidResponse()) {
    UpdateForm.updttype.value=type;
    if (validateMandatory(UpdateForm)) {
      if (UpdateForm.chckhigh.checked==true) {
        UpdateForm.obdet034.value=999;
      }
      UpdateForm.submit();
    }
  }
}
function UpdateBMI() {
  UpdateForm.obdet037.value=UpdateForm.pmsvx045.value;
  UpdateForm.bmi.value="0.0"
  UpdateForm.bsa.value="0.0"
  WGT=UpdateForm.pmsvx045.value
  HGT=UpdateForm.pmsvx046.value
  if (WGT>0&&HGT>0) {
    UpdateForm.bsa.value=Math.sqrt(HGT*WGT/3600);
    RoundNumber(UpdateForm.bsa,'2');
    UpdateForm.bmi.value=WGT/Math.pow(HGT/100,2);
    RoundNumber(UpdateForm.bmi,'1');
  }

}
function CheckRapidResponse() {
  CheckClinicalReview();
  RapidResponseText='';
  if (!isWhitespace(document.UpdateForm.obdet008.value)) {
    if (parseInt(document.UpdateForm.obdet008.value,10)<5) {
      RapidResponseText+='\n - Respiration Very Low';
      return AlertRapidResponse("Respiration Very Low");   /* Resps <5 */
    }
    if (parseInt(document.UpdateForm.obdet008.value,10)>30) {
      RapidResponseText+='\n - Respiration Very High';
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet009.value)) {
    if (parseInt(document.UpdateForm.obdet009.value,10)<90) {
      RapidResponseText+='\n - Oxygen Saturation Very Low';
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet006.value)) {
    if (parseInt(document.UpdateForm.obdet006.value,10)<90) {
      RapidResponseText+='\n - Very Low Blood Pressure';
    }
    if (parseInt(document.UpdateForm.obdet006.value,10)>200) {
      RapidResponseText+='\n - Very High Blood Pressure';
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet004.value)) {
    if (parseInt(document.UpdateForm.obdet004.value,10)<40) {
      RapidResponseText+='\n - Very Low Heart Rate';
    }
    if (parseInt(document.UpdateForm.obdet004.value,10)>140) {
      RapidResponseText+='\n - Very High Heart Rate';
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet034.value)) {
    if (document.UpdateForm.obdet034.value<1) {
      RapidResponseText+='\n - Blood Sugar Very Low';
    }
  }
  el=document.UpdateForm.obdet035
  if (!isWhitespace(el.options[el.selectedIndex].value)) {
    if (el.options[el.selectedIndex].value=="1") {
      RapidResponseText+='\n - Patient is Unresponsive';
    }
  }
  if (RapidResponseText=='') {
    if (ClinicalReviewText=='') {
      return true;
    } else {
      alert('Clinical Review Required  '+ClinicalReviewText);
      return true;
    } 
  } 
  alert('Rapid Response Required  '+RapidResponseText+ClinicalReviewText);
  if (isWhitespace(UpdateForm.obdet038.value)) {
    alert("Please Record Action Taken as a Comment.");
    return false;
  }
  return true;
}
function CheckClinicalReview() {
  ClinicalReviewText='';
  if (!isWhitespace(document.UpdateForm.obdet005.value)) {
    if (document.UpdateForm.obdet005.value<35.5) {
      ClinicalReviewText+="\n - Temperature Low";   /* Temp <35.5 */
    }
    if (document.UpdateForm.obdet005.value>38.5) {
      ClinicalReviewText+="\n - Temperature High";   /* Temp >38.5 */
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet008.value)) {
    if (parseInt(document.UpdateForm.obdet008.value,10)<10 &&
        parseInt(document.UpdateForm.obdet008.value,10)>=5) {
      ClinicalReviewText+="\n - Respiration Low";   /* Resps <10 */
    }
    if (parseInt(document.UpdateForm.obdet008.value,10)>25 &&
        parseInt(document.UpdateForm.obdet008.value,10)<=30) {
      ClinicalReviewText+="\n - Respiration High";   /* Resps >25 */
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet009.value)) {
    if (parseInt(document.UpdateForm.obdet009.value,10)<95 &&
        parseInt(document.UpdateForm.obdet009.value,10)>=90) {
      ClinicalReviewText+="\n - Oxygen Saturation Low";   /* O2 Sats <90 */
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet006.value)) {
    if (parseInt(document.UpdateForm.obdet006.value,10)<100 &&
        parseInt(document.UpdateForm.obdet006.value,10)>=90) {
      ClinicalReviewText+="\n - Low Blood Pressure";   /* Systolic <90 */
    }
    if (parseInt(document.UpdateForm.obdet006.value,10)>180 &&
        parseInt(document.UpdateForm.obdet006.value,10)<=200) {
      ClinicalReviewText+="\n - High Blood Pressure";   /* Systolic >200 */
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet004.value)) {
    if (parseInt(document.UpdateForm.obdet004.value,10)<50 &&
        parseInt(document.UpdateForm.obdet004.value,10)>=40) {
      ClinicalReviewText+="\n - Low Heart Rate";   /* Heart Rate <40 */
    }
    if (parseInt(document.UpdateForm.obdet004.value,10)>120 &&  
        parseInt(document.UpdateForm.obdet004.value,10)<=140) {
      ClinicalReviewText+="\n - High Heart Rate";   /* Heart Rate >140 */
    }
  }
  if (!isWhitespace(document.UpdateForm.obdet034.value)) {
    if (document.UpdateForm.obdet034.value<4 &&
        document.UpdateForm.obdet034.value>=1) {
      ClinicalReviewText+="\n - Blood Sugar Low";   /* BSL < 1 */
    }
  }
}
</script>
%START.OF.PAGE
<body onload="PageLoad(event);UpdateBMI();SetNeuro();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Basic Observations
</span>

<table border=0 cellspacing=1 cellpadding=1 width=95% align=center>
<form name=UpdateForm method=post action="cliweb02.pbl"
 onsubmit="return validateMandatory(this);">
  <input type=hidden name=reportno value=2>
  <input type=hidden name=template value=1>
  <input type=hidden name=urnumber value="%CLIWEB02.02.003">
  <input type=hidden name=admissno value="%CLIWEB02.02.081">
  <input type=hidden name=nextpage value="1">
  <input type=hidden name=updttype value="">
  <input type=hidden name=NeuroState value="%CLIWEB02.02.135">
  <input type=hidden name=obdet037 value="%CLIWEB02.02.137">
  <input type=hidden name=obdet003 value="B" title="Observation Type">
  <input type=hidden name=obserkey value="%CLIWEB02.02.141">
<!--
<tr><td class=DataLabel>User Id </td>
    <td><input type=hidden  name=securety value="2">
        <input type=text size=12 name=secureid class=Mandatory
         title="User ID">
    Password
    <input type=password size=12 name=securepw class=Mandatory
         title="Password" onblur=checkPass();>
    </td></tr>
-->
<tr><td class=DataLabel>Date </td>
    <td><input type=text name=obdet001 title="Observation Date"
         value="%CLIWEB02.02.101" readonly size=12 class="Readonly Date"></td>
    <td class=DataLabel>Time </td>
    <td><input type=text name=obdet002 title="Observation Time"
         value="%CLIWEB02.02.102" size=9 class=Readonly readonly></td></tr>

<tr><td class=DataLabel>Pulse </td>
    <td><input type=text name=obdet004 title="Pulse"
         size=4 maxlength=3 class=Integer value="%CLIWEB02.02.104"
         onblur="checkMinMax(obdet004,'0','300');"></td>

    <td class=DataLabel>Respiration </td>
    <td><input type=text name=obdet008 title="Respiration"
         size=4 maxlength=3 class=Integer value="%CLIWEB02.02.108"
         onblur="checkMinMax(obdet008,'0','100');"></td></tr>

<tr><td class=DataLabel>Temperature</td>
    <td><input type=text name=obdet005 title="Temperature"
         size=4 maxlength=4 class=Number value="%CLIWEB02.02.105"
         onblur="RoundNumber(this,'1');checkMinMax(obdet005,'15.0','45.0');">
    </td>

    <td class=DataLabel>Blood Pressure </td>
    <td><input type=text name=obdet006 title="BP Systolic"
         size=4 maxlength=3 class=Integer value="%CLIWEB02.02.106"
         onblur="checkMinMax(obdet006,'0','300');"> /
        <input type=text name=obdet007 title="BP Diastolic"
         size=4 maxlength=3 class=Integer value="%CLIWEB02.02.107"
         onblur="checkMinMax(obdet007,'0','300');"></td></tr>

<tr><td class=DataLabel>Pulse/Oximeter SaO<sub>2 </td>
    <td><input type=text size=6 name=obdet009 title="Pulse/Oximeter"
         class=Number min=0 max=100 value="%CLIWEB02.02.109">
        </td>

    <td class=DataLabel>F<sub>1</sub>O<sub>2</sub></td>
    <td><select name=obdet032 title="F1 O2 type"
         onchange="checkRoomAir(obdet032,obdet010);">
        <option></option>
        %CLIWEB02.02.132.2
        </select>
        <input type=text name=obdet010 title="F1 O2 Flow"
         size=4 maxlength=2 class=Integer value="%CLIWEB02.02.110"
         onblur="checkMinMax(obdet010,'0','15');">
        &nbsp;ltr per min</td></tr>

<tr><td class=DataLabel>Peak Flow </td>
    <td><input type=text size=6 name=obdet011 title="Peak Flow"
        class=Number min=0 max=700 value="%CLIWEB02.02.111">
        </td>
    <td class=DataLabel>Pain Score </td>
    <td><select name=obdet041 class=SelectTny title="Pain Score">
        <option></option>
        </select> 0=no pain, 10=worst</td></tr>

<tr><td class=DataLabel>%CLIWEB02.02.133.8</td>
    <td><select name=obdet033 title="%CLIWEB02.02.133.8">
        <option></option>
        %CLIWEB02.02.133.2
        </select>
        </td>

    <td class=DataLabel>BSL</td>
    <td><input type=text name=obdet034 title="Blood Sugar Level"
         size=5 maxlength=4 class=Number value="%CLIWEB02.02.134"
         onblur="RoundNumber(this,'1');checkMinMax(obdet034,'0.0','60.0');">
         mmol/L&nbsp;&nbsp;&nbsp;High
        <input type=checkbox name=chckhigh value="Y"
         onclick="checkBSL(chckhigh,obdet034);">
    </td></tr>

<tr><td class=DataLabel>Weight</td>
    <td><input type=text size=6 maxlength=6 name=pmsvx045 title="Weight"
        class=Number min=0 value="%CLIWEB02.02.245"
        onblur="RoundNumber(this,'1');UpdateBMI();">&nbsp;Kg
        </td>

    <td class=DataLabel>Height</td>
    <td><input type=text size=6 maxlength=6 name=pmsvx046 title="Height"
         class=Number min=0 value="%CLIWEB02.02.246"
         onblur="RoundNumber(this,'2');UpdateBMI();"> cm
    </td></tr>

<tr><td class=DataLabel>BMI</td>
    <td><input type=text size=6 name=bmi readonly title="Body Mass Index">
        </td>

    <td class=DataLabel>BSA</td>
    <td><input type=text size=6 name=bsa readonly title="Body Surface Area"> m2
    </td></tr>

<tr><td valign=top class=DataLabel>%CLIWEB02.02.127.8</td>
    <td><select name=obdet027 title="%CLIWEB02.02.127.8">
        <option></option>
        %CLIWEB02.02.127.2
       </select></td>
</tr>

<tr><td valign=top class=DataLabel>Neurological Status  </td>
    <td colspan=3><select name=obdet035 class=Select150 title="Neurological Status">
        <option></option>
        <option value=5>(5) Alert</option>
        <option value=4>(4) Voice</option>
        <!--<option value=3>(3) Agitated/Confused</option>-->
        <option value=2>(2) Pain</option>
        <option value=1>(1) Unresponsive</option>
        </select></td></tr>

<tr><td valign=top class=DataLabel>Comments </td>
    <td colspan=3><input size=40 maxlength=40 name=obdet038 title="Comment"
        value="%CLIWEB02.02.138"><br>
        <input size=40 maxlength=40 name=obdet039 title="Comment"
        value="%CLIWEB02.02.139"><br>
        <input size=40 maxlength=40 name=obdet040 title="Comment"
        value="%CLIWEB02.02.140"></td></tr>
<tr><td align=center colspan=4>
    <input type=button value="Update" class="button"
     onClick="SubmitObs('U');">
    <input type=button value="Delete" class="button"
     onClick="SubmitObs('D');">
    <input type=button value="Cancel" class="button" 
     onClick="DFrameCloseRefresh()";>
    </td></tr>
</form>
</table>
<script type="text/javascript"> 
function init() {
 SelectNumbers(UpdateForm.obdet041,0,11,1,"%CLIWEB02.02.142");    // Pain Score
 if (UpdateForm.obdet034.value==999) {
   UpdateForm.chckhigh.checked=true;
   UpdateForm.obdet034.value="";
 }
 checkBSL(UpdateForm.chckhigh,UpdateForm.obdet034);
 RAOO="%CLIWEB02.02.132.1"
 for (var i =0 ; i < document.UpdateForm.obdet032.length; i++) {
   if (document.UpdateForm.obdet032.options[i].value.substr(0,3)==RAOO) {
     document.UpdateForm.obdet032.selectedIndex=i
   }
 }
 checkRoomAir(UpdateForm.obdet032,UpdateForm.obdet010);
 RoundNumber(UpdateForm.pmsvx045,'1');
}
</script>

