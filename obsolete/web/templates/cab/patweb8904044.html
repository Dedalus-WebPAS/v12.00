<meta name="TemplateVersion" content="V11.03.00">
<meta name="TemplateHome" content="cab">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/preadmission.js">   </script>
<script type="text/javascript">
function SubmitAdm() {

   if (!CheckDateTimeRangeCAB(document.UpdateForm.emvidate,
                           document.UpdateForm.emvitime,
                           document.UpdateForm.ptmis001,
                           document.UpdateForm.ptmis002)) {
     alert("Admission Date and Time is prior to the Emergency Visit Attendance of "
         +  document.UpdateForm.emvidate.value + " and "
         +  document.UpdateForm.emvitime.value
         +  ". Please amend the admission date and time.");
      return;
   }

  if (!validateDepDateTime()) {return;}

  // Check if PMI 'Foundation' (PUYN2) value has been set; warn if not
  if (document.UpdateForm.alrtsind.value.substr(10,1) == '0') {
    alert("Mandatory PMI field - Foundation is missing.");
    return;
  }

  MandatoryOk=true;
  if  (!validateMandatory(UpdateForm)) {
      return;
  }
  if (!isWhitespace(UpdateForm.ptmis013.value)) {
      if (!validateHFT(20,UpdateForm.ptmis013,UpdateForm.ptmis014,
                          UpdateForm.funddesc,UpdateForm.tabldesc)) {
         ans=confirm("Select another active health fund table? ");
         if (ans==true) {
            return;
         }
      }
  }
  if(document.UpdateForm.mvmedre1.checked == true) {
     document.UpdateForm.mvmedrec.value="1";
  } else {
     document.UpdateForm.mvmedrec.value="0";
  }
  if (MandatoryOk) {
    setRedirect();
    validateBedRequestUpdate(UpdateForm.emadmiss,UpdateForm.ptmis068,
                             UpdateForm.ptmis076,UpdateForm.bedrqqry);
    UpdateForm.ptmis004.value=UpdateForm.ptmis068.value;
    UpdateForm.ptmis005.value=UpdateForm.ptmis076.value;
    UpdateForm.ptmis009.disabled=false;
    UpdateForm.OKButton.disabled=true;
    SubmitHidden(UpdateForm);
    setTimeout('UpdateForm.OKButton.disabled=false',6000);
   }
}
function CheckDateTimeRangeCAB(FromDate,FromTime,ToDate,ToTime) {
 FromDate=SetDateYYYYMMDD(FromDate.value);
 fyyyy = FromDate.substr(0,4);
 fmm = FromDate.substr(4,2);
 fdd = FromDate.substr(6,2);
 fhh = FromTime.value.substr(0,2);
 fmi = FromTime.value.substr(3,2);
 fse = FromTime.value.substr(6,2);
 from_date_time=new Date(fyyyy,parseInt(fmm,10)-1,fdd,fhh,fmi,fse);
//
 ToDate=SetDateYYYYMMDD(ToDate.value);
 tyyyy = ToDate.substr(0,4);
 tmm = ToDate.substr(4,2);
 tdd = ToDate.substr(6,2);
 thh = ToTime.value.substr(0,2);
 tmi = ToTime.value.substr(3,2);
 tse = ToTime.value.substr(6,2);
 to_date_time=new Date(tyyyy,parseInt(tmm,10)-1,tdd,thh,tmi,tse);
//
  if (from_date_time > to_date_time) {
    return false ;
  }
  if (trim(from_date_time) == trim(to_date_time)) {
    return false ;
  }
  return true;
}

function valDoctorUnit() {
  validateCode(31,UpdateForm.ptmis007,UpdateForm.doctnam2);
  selectOptions("30",UpdateForm.ptmis007,UpdateForm.ptmis024);
  UpdateForm.ptmis024.selectedIndex=1
}
function DisplaySel() {
  AdmitMandatory();
//  isParentFrameEmergency();
}
function AdmitMandatory() {
     UpdateForm.ptmis011.className="Mandatory";  //admission type
     UpdateForm.ptmis009.className="Mandatory";  //admission source
     UpdateForm.ptvis041.className="Mandatory";  //criteria for admission
     UpdateForm.ptmis012.className="Mandatory";  //care type
     UpdateForm.ptmis068.className="Mandatory";  //ward
     UpdateForm.ptmis005.className="mandatory";  //bed
     UpdateForm.ptmis007.className="Mandatory";  //Admitting Doctor
     UpdateForm.doctnam2.className="Mandatory";  //Admitting Doctor description
     UpdateForm.ptvis028.className="Mandatory";  //Referring GP 
     UpdateForm.doctnam1.className="Mandatory";  //Referring GP description
     UpdateForm.ptmis024.className="Mandatory";  //Unit
     UpdateForm.ptmis027.className="Mandatory";  //Financial Class
     UpdateForm.ptmis010.className="Mandatory";  //CMBS Class
     UpdateForm.ptvis043.className="Mandatory";  //Intended Stay
     UpdateForm.ptvis046.className="Mandatory";  //Admitting Point
//     UpdateForm.ptvis022.className="Mandatory";  //Inform GP
} 
function isParentFrameEmergency() {
  var p = top.content.location.href.match(/emrweb/);
  if(p == "emrweb") {
    var EmergencyVisit = document.getElementById('EmergencyVisit');
    var AttendanceDate = document.getElementById('AttendanceDate');
    EmergencyVisit.style.display="";
    var arrivalDT=top.content.PatientARR;
    var arrivalSec=arrivalDT.slice(-2);     // determine Arrival seconds
    if (arrivalSec=='59') {
      arrivalDT=arrivalDT.slice(0, -3);     // remove seconds if equal to 59
      arrivalMin=arrivalDT.slice(-2);       // determmine minutes
      if (arrivalMin=='59') {
        arrivalDT=arrivalDT.slice(0, -3);     // remove seconds if equal to 59
        arrivalHrs=arrivalDT.slice(-2);       // determmine hours
        arrivalHrs=parseInt(arrivalHrs,10)+1; // increment hours
        if (arrivalHrs<10) {
          arrivalDT='0'+arrivalHrs+':00:01';  // add hours, minutes and seconds
        } else {
          arrivalDT=arrivalHrs+':00:01';      // add hours, minutes and seconds
        }
      } else {
        arrivalDT=arrivalDT.slice(0, -2);     // remove minutes
        arrivalMin=parseInt(arrivalMin,10)+1; // increment minutes
        if (arrivalMin<10) {
          arrivalDT=arrivalDT+'0'+arrivalMin+':01'; // add minutes and seconds
        } else {
          arrivalDT=arrivalDT+arrivalMin+':01'; // add minutes and seconds
        }
      }
    } else {
      arrivalDT=arrivalDT.slice(0, -2);
      arrivalDT=arrivalDT+'59';
    }
    AttendanceDate.innerHTML = "<input type=text name=DisplayVisitDate readonly value=\""+
                                arrivalDT+"\">";
  }
}
function DefaultPMIGP(pmigp,pmipr,pmicn) {
  p=document.UpdateForm;
  p.ptvis028.value = pmigp.value;
  p.ptvis029.value = pmipr.value;
  p.ptvis030.value = pmicn.value;
  ValidateHCP(18,0,p.ptvis028,p.doctnam1);
  ValidateHCG(70,0,p.ptvis029,p.ptvis028,p.genpprac,p.ptvis030);
}
function validateDepDateTime() {

  if (!isWhitespace(document.UpdateForm.emviddat.value) &&
      !isWhitespace(document.UpdateForm.emvidtim.value)) {
    if(CheckDateTimeRange(document.UpdateForm.emviddat,
                          document.UpdateForm.emvidtim,
                          document.UpdateForm.ptmis001,
                          document.UpdateForm.ptmis002)) {
      return true;
    } else {
      alert("IP Admit Date and Time entered is invalid and must be greater " +
            "than or equal to the Discharge Date and Time.");
      return false;
    }
  } else {
    return true;
  }
}
function defaultDateTime() {
  if (!isWhitespace(document.UpdateForm.emviddat.value)) {
    document.UpdateForm.ptmis001.value = document.UpdateForm.emviddat.value;
    document.UpdateForm.ptmis002.value = document.UpdateForm.emvidtim.value;
  }
}
function DateEdits() {
  if (!checkDate(document.UpdateForm.ptmis001,
                 document.UpdateForm.ptmis001.title)) {
    return;
  }

  validateMbsCode(4,
                  document.UpdateForm.ptmis026,
                  document.UpdateForm.mbsdesc1,
                  document.UpdateForm.ptmis001);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplaySel();document.UpdateForm.ptmis001.focus();
              DisplayTrnSrc();displayRegime();defaultDateTime();
              ShowActiveProgramID();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.04.003";
PatientVIS="%PATWEB89.04.081";
PatientNAM="%PATWEB89.04.002";
PatientSTA="%PATWEB89.04.086.078";
PatientALT="%PATWEB89.04.084";
PatientSEX="%PATWEB89.04.019";
PatientDOB="%PATWEB89.04.020";
PatientAGE="%PATWEB89.04.021";
PatientLOC="%PATWEB89.04.083";
PatientPRI="%PATWEB89.04.086.066.1";
PatientUNT="%PATWEB89.04.066.0";
DoctorCOD="%PATWEB89.04.082.003";
DoctorNAM="%PATWEB89.04.082.002";
PatientAID="%PATWEB89.04.086.090";
PatientIND="%PATWEB89.04.086.091";
PatientCUR="%PATWEB89.04.086.092";
PatientCLC="%PATWEB89.04.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.04.086.094";
PatientCDM="%PATWEB89.04.086.095";
PatientVDH="%PATWEB89.04.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=UpdateForm method=post action=patweb89.pbl style="margin:0">
<input type=hidden name=urnumber value="%PATWEB89.04.003">
<input type=hidden name=admissno value="%PATWEB89.04.081">
<input type=hidden name=emadmiss value="%PATWEB89.04.926">
<input type=hidden name=reportno value=2>
<input type=hidden name=template value="001">
<input type=hidden name=updatety value="2">
<input type=hidden name=redirect>
<input type=hidden name=allocate value="1">
<input type=hidden name=chckname value="0">
<input type=hidden name=emradmit value="0">
<input type=hidden name=emradmis value="0">
<input type=hidden name=admitnow value="1">
<input type=hidden name=newbmand value="0">
<input type=hidden name=agebmand value="0">
<input type=hidden name=ptmas046 value="0">
<input type=hidden name=mvmedrec>
<input type=hidden name=admitbox value="1">
<input type=hidden name=exptward value="%PATWEB89.04.917">
<input type=hidden name=emvidate value="%PATWEB89.04.401.0">
<input type=hidden name=emvitime value="%PATWEB89.04.402">
<input type=hidden name=claimc value="">
<input type=hidden name=exstward value="%PATWEB89.04.158">
<input type=hidden name=cfinan value="%PATWEB89.04.932">
<input type=hidden name=dummy id=dummy value="">
<input type=hidden name=ipadmdat value="1">
<input type=hidden name=alrtsind id=alrtsind value="%PATWEB89.04.084">
<input type=hidden name=psex value="%PATWEB89.04.086.082">
<input type=hidden name=page value="%PATWEB89.04.938">
<input type=hidden name=bedrqqry value="">
<input type=hidden name=emviddat id=emviddat  value="%PATWEB89.04.424.0">
<input type=hidden name=emvidtim id=emvidtim  value="%PATWEB89.04.425">
<input type=hidden name=automvmr id=automvmr value="">
<input type=hidden name=atmrtoaw id=atmrtoaw value="1">

<input type=hidden name=ptcndigp id=ptcndigp
 value="%STANDARD.01.025.124.122.0.1">
<input type=hidden name=ptcndumh id=ptcndumh
 value="%STANDARD.01.025.124.240.0.1">

<table border=0 colspan=0 width=100% cellspacing=0 cellpadding=0 >
<tr><td class=HeadingCell align=center>
    Patient Admission Details  </td>
</tr>
<tr><td>
    <table width=100%  border=0 class=TableBody cellpadding=0 cellspacing=0>
     <tr id="EmergencyVisit" style='display:none'>
         <td class=DataLabel></td>
         <td id=AttendanceDate></td>
         <td></td>
         <td></td></tr>
     <tr><td class=DataLabel>Admission Date </td>
         <td><input type=text size=12 name=ptmis001 id=ptmis001 tabindex=1 
               class="Mandatory Date" title="Admission Date" 
               value="%STANDARD.01.015"
               onblur="DateEdits();">
         <img notab src=../images/DateLookup.gif class="Icon"
          onclick="DateLookupFrame(UpdateForm.ptmis001);">     
          Time 
       <input class=Mandatory type=text name=ptmis002 id=ptmis002 size=8 
        tabindex=2 value="%STANDARD.01.016" title="Admission Time">
        <img notab src=../images/DateTimeStamp.gif class="Icon"
         onclick="SetCurrentDateTime(null,UpdateForm.ptmis002);">
       <img notab src=../images/TimeLookup.gif class="Icon"
        onclick="TimeLookupFrame(UpdateForm.ptmis002);">
          </td>

       <td>Admitting Point</td>
       <td>
         <select name=ptvis046 tabindex=12 title="Admitting Point"
          onchange="defaultWard();">
           <option></option>
            %PATWEB89.04.290.2
         </select>
      </td>
      </tr>

      <tr><td class=DataLabel>%STANDARD.01.017.P </td>
          <td><select name=ptmis011 tabindex=3  
               title="%STANDARD.01.017.P ">
              <option> </option>
                 %PATWEB89.04.112.2
              </select></td>
          <td class=DataLabel>Ward / Bed </td>
          <td><input type=hidden name=bedstat1 id=bedstat1>
              <input type=hidden name=ptmis004>
              <input type=hidden name=ptmis005 title="Bed">
              <input type=hidden name=warddesc id=warddesc>
              <select name=ptmis068 id=ptmis068 tabindex=13 title="Ward"
               value="%PATWEB89.04.105.0">
                <option> </option>
                %PATWEB89.04.449.2
              </select>
              <input type=text name=ptmis076 id=ptmis076 readonly maxlength=3 
               size=3 title="Bed" value="%PATWEB89.04.194">
              <img notab src="../images/SearchIcon.gif" class=Icon
            onclick="WardBedSearchFrame(UpdateForm.ptmis068,
                     UpdateForm.warddesc,UpdateForm.ptmis076,
                     UpdateForm.bedstat1);">
          </td></tr>
          <tr><td class=DataLabel>Admission Source</td>
          <td><select name=ptmis009 id=ptmis009 tabindex=4 
               onchange="DisplayTrnSrc()" title="Admission Source">
               <option> </option>
               %PATWEB89.04.110.2
               </select></td>
          <td class=DataLabel>Admitting Doctor</td>
          <td><input type="text" size=8 maxlength=6 name=ptmis007 id=ptmis007 
               tabindex=13 title="Admitting Doctor" value="%PATWEB89.04.108.003"
               onblur="UpCase(this);valDoctorUnit();">
              <input type=text readonly size=25 notab name=doctnam2 id=doctnam2
               title="Admitting Doctor" value="%PATWEB89.04.108.002">
              <img notab src="../images/SearchIcon.gif" class=Icon
             onclick="DoctorSearchFrame(UpdateForm.ptmis007,
                      UpdateForm.doctnam2);">
          </td></tr>
          <tr><td>
          <div id=TranSrcHeading></div>
          <td><div id=TranSrc></div></td>
          <td class=DataLabel>Unit</td>
          <td><select name=ptmis024 tabindex=14
               title="Unit">
              <option> </option>
                 %PATWEB89.04.124.2
              </select>    
          </td></tr>
         <tr><td align=left>Prior Days Hospitalisation</td>
         <td align=left>
           <input type=text name=ptmis031 title='Prior Days Hospitalisation'
            class=Integer size=5 maxlength=3 tabindex=6
            onblur=checkInteger(this,this.title) value="%PATWEB89.04.130">
         </td>
          <td class=DataLabel>Diagnosis </td>
          <td><input tabindex=15 type=text name="ptmis020" size=50 maxlength=80
               value="%PATWEB89.04.121">
          </td></tr>

     <tr><td class=DataLabel>Mode of Arrival</td>
       <td>
         <select name=ptvis054 tabindex=7>
         <option></option> %PATWEB89.04.257.2
         </select>
       </td>
      <td class=DataLabel>Provisional DRG</td>
          <td class=DataLabel>
       <input type=text name=ptmis066 id=ptmis066 size=5 maxlength=4 tabindex=16
               onblur='validateCode(5,UpdateForm.ptmis066,
                       UpdateForm.drgdesc1);'
               value="%PATWEB89.04.140.0">
          <input type=text notab readonly name=drgdesc1 id=drgdesc1 size=45 
              value="%PATWEB89.04.140.1">
              <img notab src="../images/SearchIcon.gif" class=Icon
               title="Provisional DRG Search"
               onclick="DrgSearchFrame(UpdateForm.ptmis066,
                        UpdateForm.drgdesc1);">
              <img src="../images/DiagnosisSearchIcon.gif" class=Icon
               title="Provisional DRG Search via MBS Code"
           onclick="DrgViaMBSSearchFrame(UpdateForm.ptmis066,
                    UpdateForm.ptmis026,UpdateForm.ptvis043,
                    UpdateForm.psex,UpdateForm.page);">
          </td></tr>

      <tr><td class=DataLabel>Admission Criteria</td>
          <td>
          <select name=ptvis041 tabindex=8 title="Criteria for Admission">
          <option> </option>
          %PATWEB89.04.244.2
          </select>
          </td>
         <td class=DataLabel> Diet Code </td>
        <td>
           <select name=ptmis028 tabindex=17>
           <option> </option>
            %PATWEB89.04.127.2
            </select>
         </td></tr>

     <tr><td class=DataLabel>Care Type</td>
         <td><select name=ptmis012 tabindex=9 title="Care Type"
               onchange="displayRegime();"> 
              <option> </option>
               %PATWEB89.04.113.2
              </select>
         </td>
         <td class=DataLabel>Referring GP</td>
         <td><input type="text" size=10 maxlength=10 tabindex=13
            title="Referring GP"
            name=ptvis028 id=ptvis028 value="%PATWEB89.04.231.1"
onchange="ReadDoc(18,0,UpdateForm.ptvis028,UpdateForm.doctnam1,
          UpdateForm.ptvis029,UpdateForm.genpprac,
          UpdateForm.ptvis030,UpdateForm.genpprov);">
           <input type="text" size=25 name=doctnam1 id=doctnam1
            title="Referring GP"
            value="%PATWEB89.04.231.0">
           <img notab src="../images/SearchIcon.gif" class=Icon
onclick="GPHCPSearchFrame(UpdateForm.ptvis028,UpdateForm.doctnam1,
         UpdateForm.genpprov,UpdateForm.ptvis029,
         UpdateForm.genpprac,UpdateForm.ptvis030,0);">
        <img src="../images/gphead.gif" class=Icon
         onclick="DefaultPMIGP(UpdateForm.pmirefgp,UpdateForm.pmirefpr,
                  UpdateForm.pmirefcn);"
         title="Default GP and Practice from PMI">
      <input type=hidden name=pmirefgp id=pmirefgp value="%PATWEB89.04.884.001">
      <input type=hidden name=pmirefpr id=pmirefpr value="%PATWEB89.04.885.001">
      <input type=hidden name=pmirefcn id=pmirefcn value="%PATWEB89.04.861">
         </td>
      </tr>

      <tr><td class=DataLabel> Intended Stay </td>
          <td class=DataLabel>
             <select name=ptvis043 tabindex=10 title="Intended Stay">
             <option> </option>
              %PATWEB89.04.246.2
             </select>
        </td>
        <td class=DataLabel>Practice</td>
        <td><input type="text" name=genpprac id=genpprac size=35 readonly
                     value="%PATWEB89.04.232.0">
        <input type=hidden name=ptvis029 id=ptvis029 value="%PATWEB89.04.232.1">
        <input type=hidden name=ptvis030 id=ptvis030 value="%PATWEB89.04.233.1">
        <input type=hidden name=genpprov id=genpprov>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCGSearchFrame(UpdateForm.ptvis028,UpdateForm.doctnam1,
                  UpdateForm.genpprov,UpdateForm.ptvis029,
                  UpdateForm.genpprac,UpdateForm.ptvis030);">
        <img src="../images/erase.gif" class=Icon
        onclick="clrFields(UpdateForm.ptvis029,UpdateForm.genpprac,
                 UpdateForm.ptvis030,UpdateForm.genpprov);">
        </td>
       </tr>

       <tr><td class=DataLabel> Planned Length of Stay</td>
        <td>
        <input type=text size=5 maxlength=5 name=ptmis030
         tabindex=10 title='Expected Length of Stay'
         class=Integer onblur="checkInteger(this,this.value);"
         value="%PATWEB89.04.129">
        </td>
      <td class=DataLabel>Inform GP</td>
      <td>
        <select name=ptvis022 tabindex=23 title="Inform GP">
         <option value=" "></option>
         <option value="0">No</option>
         <option value="1">Yes</option>
        </select></td>
       </tr>

       <tr><td class=DataLabel>Discharge Intention</td>
           <td><select name=ptvis076 tabindex=11 title="Care Type">
                 <option> </option>
                 %PATWEB89.04.292.2
               </select></td>
       <td class=DataLabel><div id=PCEHRTitleDIV></div></td>
       <td><select name=pmsvx125 tabindex=24 title="Upload to PCEHR">
           <option value=" "></option>
           <option value="0">No</option>
           <option value="1">Yes</option>
          </select>
       </td>
       </tr>

       <tr><td class=DataLabel>Palliative Care Status</td>
           <td><select name=ptvis077 tabindex=12 title="Care Type">
                 <option> </option>
                 %PATWEB89.04.293.2
               </select></td>
       <td class=DataLabel>Religious Visit</td>
       <td>
         <select name=ptmis017 tabindex=24>
          <option value="2">No</option>
          <option value="1">Yes</option>
         </select>
       </td>
       </tr>

       <tr><td class=DataLabel>Preferred Accommodation</td>
           <td><select name=ptvis093 tabindex=13
                title="Preferred Accommodation">
                <option> </option>
                 %PATWEB89.04.298.012.2
                </select></td>

       <td>%STANDARD.01.017.U2</td>
         <td><select name=ptmis038 tabindex=27>
           <option></option>
            %PATWEB89.04.134.2
         </select></td>
       </tr>

       <tr><td class=DataLabel>Valuables Location</td>
           <td><input type="text" size=40 maxlength=40 name=ptvis020
                tabindex=13 value="%PATWEB89.04.223"></td>
         <td width=15%> Informed Financial Consent </td>
         <td><select name=ptvis086 tabindex=27 class=Mandatory 
              title="Informed Financial Consent">
          %PATWEB89.04.298.005.2
         </select></td>
       </tr>

<tr><td class=DataLabel>Admitting MBS</td>
    <td class=DataLabel>
    <input type=text name=ptmis026 id=ptmis026 size=10 maxlength=9 tabindex=13
     value="%PATWEB89.04.125"
     onblur="ValidateProvDRG(UpdateForm.ptmis026,UpdateForm.mbsdesc1,
             UpdateForm.ptmis066,UpdateForm.ptvis043,
             UpdateForm.psex,UpdateForm.page,UpdateForm.ptmis001);">
    <input type=text notab readonly name=mbsdesc1 id=mbsdesc1 size=35
     value="%PATWEB89.04.180">
    <img notab src="../images/SearchIcon.gif" class=Icon
     onclick="MbsSearchFrame(UpdateForm.ptmis026,UpdateForm.mbsdesc1,
              UpdateForm.ptmis001);"> </td>
        <td class=DataLabel>Program</td>
        <td><input type=text size=8 maxlength=8 name=ptvis099 
         title="Program" tabindex=27 value="%PATWEB89.04.298.021.1"
          onchange="findPrgmdesc();">
          <select name=prgmcode Readonly class=readonly tabindex=166
          onchange="savePrgmcode();">
          <option> </option>
           %PATWEB89.04.298.021.2
          </select></td>
    </tr>
     <tr><td class="DataLabel"><div id="ProgramIdTitle"></div></td>
         <td class="DataField"><div id="ProgramIdField"></div></td>
         <td class="DataLabel"></td>
         <td class="DataField"></td>
         <td class="DataLabel"></td>
         <td class="DataField"></td>
         </tr>

       <tr align=left>
         <td align=center colspan="4">
         <hr>
         </td>
       </tr>

     <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
          <td><select name=ptmis027 title="%STANDARD.01.017.CL" 
               tabindex=50>
                <option> </option>
                 %PATWEB89.04.126.9.1.10.2.X
              </select>
           </td>
         </tr>

      <tr><td class=DataLabel>%STANDARD.01.017.A </td>
          <td><select name=ptmis010 tabindex=51  
               title="%STANDARD.01.017.A "> 
              <option> </option>
                 %PATWEB89.04.111.2
              </select></td>

<tr><td class=DataLabel>Health Fund</td>
    <td class=DataLabel colspan=2>
        <input type=hidden name="ptmis013" value="%PATWEB89.04.040.0">
        <input type=text size=35 name="funddesc" maxlength="30"
         value="%PATWEB89.04.040.1" notab readonly> Level
        <input type=hidden name="ptmis014" value="%PATWEB89.04.041.0">
        <input type="text" size=20 maxlength=30 name="tabldesc"
         value="%PATWEB89.04.041.1" notab readonly>
        <img notab src="../images/SearchIcon.gif" class=Icon
         onclick="HealthFundSearchFrameNoFocus(UpdateForm.ptmis013,
                  UpdateForm.funddesc,UpdateForm.ptmis014,
                  UpdateForm.tabldesc);">
        <img src="../images/erase.gif" class="Icon"
         onclick="clrFields(UpdateForm.ptmis013,UpdateForm.funddesc,
                  UpdateForm.ptmis014,UpdateForm.tabldesc);"> 
    </td>      
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>

  <tr><td class=DataLabel> Member Number </td>
      <td><input type=text size=20 maxlength=19 name=ptmis015 tabindex=52
       value="%PATWEB89.04.042">
      </td>
        <td align=left>Move Medical Record</td>
        <td align=left>
        <input type="checkbox" name="mvmedre1" value="1" tabindex=53>
        </td>

<tr><td class=DataLabel>Continuous Billing</td>
    <td><select name=ptmis081 tabindex=54>
        <option> </option>
         %PATWEB89.04.199.014.2
        </select>
    </td>
</tr>

  <tr><td class=DataLabel>GST Applicable</td>
    <td>
      <select name=ptmis074 tabindex=54 class=Mandatory
      title="GST Applicable">
      <option> </option>
      %PATWEB89.04.189.2
      </select></td>
      <td><div id=RegimeHead1></div></td>
      <td><div id=RegimeCode1></div></td></tr>

  <tr><td><div id=UserNameHead></div></td>
      <td><div id=UserNameCode></div></td>
      <td><div id=RegimeHead2></div></td>
      <td><div id=RegimeCode2></div></td></tr>

  <tr><td><div id=PasswordHead></div></td>
      <td><div id=PasswordCode></div></td>
      <td><div id=RegimeHead3></div></td>
      <td><div id=RegimeCode3></div></td></tr>

  <tr><td class=DataLabel><div id=Contrac2Heading></div></td>
      <td><div id=ContractId></div></td>
      <td><div id=RegimeHead4></div></td>
      <td><div id=RegimeCode4></div></td>
      </tr>

<!-- END HEALTH FUND STUFF -->

      <tr align=center>
       <td colspan=4 align=center><br>
       <input tabindex=54 type=button value="Ok" class="button" name=OKButton
        onclick="checkBedStatus(UpdateForm.ptmis068.value,
                 UpdateForm.ptmis076.value,UpdateForm.ptmis001.value,
                 UpdateForm.ptmis030.value,UpdateForm.ptmis002.value,
                 UpdateForm.ptrgm001.value,UpdateForm.ptrgm002.value,
                 UpdateForm.ptrgm003.value,SubmitAdm);">
       <input tabindex=55 type=button value="Cancel" class="button"
             onclick='fnPatientLink("%PATWEB89.04.003","%PATWEB89.04.926");'>
    </table>
</td></tr>
</table>
</form>

<form name=PatientLinks method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.04.003">
<input type=hidden name=admissno value="%PATWEB89.04.101">
<input type=hidden name=MenuType value="%PATWEB89.04.088">
</form>

<form name=linkForm action=patweb89.pbl method=post style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%PATWEB89.04.003">
<input type=hidden name=admissno value="%PATWEB89.04.081">
</form>

<span id=WaitingList style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Date of Referral</td>
    <td><input type=text size=12 name=ptmis058 id=ptmis058 tabindex=19 
         title="Referral Date">
         <img notab src=../images/DateLookup.gif class="Icon"
          onclick="DateLookupFrame(UpdateForm.ptmis058);"></td></tr>
<tr><td class=DataLabel>Date of 1st Spec Consult</td>
    <td><input type=text size=12 name=ptmis059 id=ptmis059 tabindex=20 
         title="Consultation Date">
         <img notab src=../images/DateLookup.gif class="Icon"
          onclick="DateLookupFrame(UpdateForm.ptmis059);"></td></tr>
</table>
</span>

<span id=BabyAge style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Admission Weight</td>
    <td><input type=text name=ptmis051 size=8 maxlength=6
         onchange=justifyRight(this);>grams</td></tr>
</table>
</span>

<span id=NewBorn style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Gestation Period</td>
    <td><input type=text name=ptmis041 maxlength=3 size=4 tabindex=21> weeks
    </td></tr>
</table>
</span>

<span id=transferhd style="display:none">
Transfer Source
</span>
<span id=transfersrc style="display:none">
<input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc 
     class=Mandatory title="Transfer Source" tabindex=5
     value="%PATWEB89.04.193.0" 
    onchange="validateCode(9,UpdateForm.trnsfsrc,UpdateForm.trandesc);">
    <input type=text size=27 name=trandesc id=trandesc notab
     class=Readonly readonly value="%PATWEB89.04.193.1">
    <img notab src="../images/SearchIcon.gif" class=Icon
     onclick="TransferSourceFrame(UpdateForm.trnsfsrc,
              UpdateForm.trandesc,UpdateForm.ptmis009);">
</span>
<span id=transferblank style="display:none">
   <input type=hidden name=trnsfsrc>
</span>

<span id=regimehd1 style="display:none">
Regime Code 1
</span>
<span id=regimecod1 style="display:none">
<input type="text" size=15 maxlength=10
     name=ptrgm001 id=ptrgm001 tabindex=33
     onblur="validateCode(75,UpdateForm.ptrgm001,UpdateForm.dummy);"
     value="%PATWEB89.04.973. 1">
    <img notab src="../images/SearchIcon.gif" class=Icon
     onclick="RegimeSearchFrame(UpdateForm.ptrgm001,UpdateForm.dummy);">
    <img src="../images/erase.gif" class="Icon"
     onclick="clrFields(UpdateForm.ptrgm001,UpdateForm.dummy);">
</span>

<span id=regimehd2 style="display:none">
Regime Code 2
</span>
<span id=regimecod2 style="display:none">
<input type="text" size=15 maxlength=10
     name=ptrgm002 id=ptrgm002 tabindex=33
     onblur="validateCode(75,UpdateForm.ptrgm002,UpdateForm.dummy);"
     value="%PATWEB89.04.973. 2">
    <img notab src="../images/SearchIcon.gif" class=Icon
     onclick="RegimeSearchFrame(UpdateForm.ptrgm002,UpdateForm.dummy);">
    <img src="../images/erase.gif" class="Icon"
     onclick="clrFields(UpdateForm.ptrgm002,UpdateForm.dummy);">
</span>

<span id=regimehd3 style="display:none">
Regime Code 3
</span>
<span id=regimecod3 style="display:none">
<input type="text" size=15 maxlength=10
     name=ptrgm003 id=ptrgm003 tabindex=33
     onblur="validateCode(75,UpdateForm.ptrgm003,UpdateForm.dummy);"
     value="%PATWEB89.04.973. 3">
    <img notab src="../images/SearchIcon.gif" class=Icon
     onclick="RegimeSearchFrame(UpdateForm.ptrgm003,UpdateForm.dummy);">
    <img src="../images/erase.gif" class="Icon"
     onclick="clrFields(UpdateForm.ptrgm003,UpdateForm.dummy);">
</span>
<span id=regimeblank1 style="display:none">
<input type=hidden name=ptrgm001 value="">
</span>

<span id=regimeblank2 style="display:none">
<input type=hidden name=ptrgm002 value="">
</span>

<span id=regimeblank3 style="display:none">
<input type=hidden name=ptrgm003 value="">
</span>

<span id=usernamehd style="display:none">
User Name
</span>

<span id=usernamcd style="display:none">
<input size=12 type=text name=username class=Mandatory title="UserName">
</span>

<span id=passwordhd style="display:none">
Password
</span>

<span id=passwordcd style="display:none">
<input size=12 type=password name=password id=password 
     onblur="checkPass();" class=Mandatory title="Password">
</span>
<span id=regimeblank4 style="display:none">
<input type=hidden name=ptmis057 value="">
</span>

<span id=regimehd4 style="display:none">
%STANDARD.01.035.DA
</span>
<span id=regimecod4 style="display:none">
<select name=ptmis057 title="%STANDARD.01.035.DA">
   <option></option>
    %PATWEB89.04.148.2
   </select>
</span>
<span id=blanklabel style="display:none">&nbsp;</span>

<span id=PCEHRTitleSPAN style="display:none">
Upload to PCEHR
</span>

<span id="ShowProgramIdTitle" style="display:none">
 %STANDARD.01.035.PK
</span>

<span id="ShowProgramIdField" style="display:none">
  <select name=ptvis110 title="%STANDARD.01.035.PK" tabindex=12
   id="ptvis110" class="">
    <option> </option>
    %PATWEB89.04.298.033.2
  </select>
</span>

<script type="text/javascript">
 document.UpdateForm.ptmas046.value =
   document.UpdateForm.alrtsind.value.substr(10,1);

 for(var i=0;i<document.UpdateForm.ptmis017.length;i++){
   if(document.UpdateForm.ptmis017.options[i].value=="%PATWEB89.04.118.0"){
      document.UpdateForm.ptmis017.selectedIndex=i;}
 }
 //for (var i=0;i<document.UpdateForm.ptvis022.length;i++){
 //  if(document.UpdateForm.ptvis022.options[i].value=="%PATWEB89.04.225.0"){
 //     document.UpdateForm.ptvis022.selectedIndex=i;}
 //}
 expward="%PATWEB89.04.158"
 for (var i =0 ; i < document.UpdateForm.ptmis068.length; i++) {
   if(document.UpdateForm.ptmis068.options[i].value==expward) {
      document.UpdateForm.ptmis068.selectedIndex=i; } 
 }

 if ("%PATWEB89.04.903" == "1") {
  alert("Warning: Patient has a Waiting List Procedure");
 }
 if ("%PATWEB89.04.904" == "1") {
  alert("Warning: Patient has a Booking");
 }
 if ("%PATWEB89.04.905" == "1") {
  alert("Warning: Patient is currently admitted");
 }
 if ("%PATWEB89.04.908" == "1") {
  alert("Warning: Patient has a pre-admission record");
 }
  Day=document.UpdateForm.ptmis001.value.substr(0,2).replace(/ /g,"0")
  Dat=document.UpdateForm.ptmis001.value.substr(2)
  document.UpdateForm.ptmis001.value=Day + Dat
  if ((VariableNameExists('ScreenLabelMyHRConsent'))&&
      (ScreenLabelMyHRConsent!="")){
    document.getElementById("PCEHRTitleSPAN").innerHTML =
    ScreenLabelMyHRConsent;
    document.UpdateForm.pmsvx125.title = ScreenLabelMyHRConsent;
  }
  PCEHRTitleDIV.innerHTML=PCEHRTitleSPAN.innerHTML;
 /* 0894695

 PCEHR=trim("%PATWEB89.04.298.037");
 for (var i=0;i<document.UpdateForm.pmsvx125.length;i++){
 if (document.UpdateForm.pmsvx125.options[i].value==PCEHR){
     document.UpdateForm.pmsvx125.selectedIndex=i}};
*/
var p = document.UpdateForm;
var informGP = "%PATWEB89.04.225.0";               //ptvis022
valInformGP(p.ptvis022,informGP,p.ptcndigp.value);

var VisMyHealthRec = trim("%PATWEB89.04.298.037"); //pmsvx125/ptvis115
valMYHR(p.pmsvx125,VisMyHealthRec,p.ptcndumh.value);
if (p.ptcndumh.value > 2){
      p.pmsvx125.className="Mandatory";}
   else{
      p.pmsvx125.className="";}
</script>
